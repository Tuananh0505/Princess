;/*FB_PKG_DELIM*/

__d("LSOptimisticDeleteThread",["LSDeleteThread","LSIssueNewError","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSDeleteThread"),a[0],!1)},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[7]=b.syncGroup,c.i64.neq(d[7],void 0)?d[6]=d[7]:d[6]=c.i64.cast([0,1]),d[0]=d[6])})},function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[2]=!1:(b=a.item,d[2]=b.errorShouldBeShown)})},function(a){return d[2]===!0?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[6]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[7]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[6],d[7],void 0,void 0)}]):c.resolve()},function(e){return d[4]=new c.Map(),d[4].set("thread_key",a[0]),d[4].set("sync_group",d[0]),d[5]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),"delete_thread_v2",c.i64.cast([0,86]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticDeleteThreadStoredProcedure",["LSOptimisticDeleteThread","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSOptimisticDeleteThread").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSOptimisticUpdateThreadJoinRequestApprovalSetting",["LSIssueNewTask","LSUpdateThreadJoinRequestApprovalSetting"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSUpdateThreadJoinRequestApprovalSetting"),a[0],a[1])},function(e){return d[0]=new c.Map(),d[0].set("thread_id",a[0]),d[0].set("join_request_approval_setting",a[1]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"update_thread_join_request_approval_setting",c.i64.cast([0,661]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MWCMInboxLeftRailHeaderAuxiliary.react",["fbt","CometPlaceholder.react","MWInboxHeaderPlaceholder.react","MWInboxLeftRailHeaderIcons","MWInboxProvider.react","MWInboxRouteBuilder","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWXCircleButton.react","MessengerWebUXLogger","gkx","react","useMWInboxURIState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useContext,l=d("MWInboxRouteBuilder").buildNewThreadURL({});function m(a){a.entryPoint;var b=c("MessengerWebUXLogger").useInteractionLogger();a=k(c("MWResponsiveLayoutContext.react"));var e=a.pushCard,f=((a=k(d("MWInboxProvider.react").MWInboxProviderContext))==null?void 0:(a=a.uriStateDetails)==null?void 0:a.type)===d("useMWInboxURIState").MWInboxURIStateDetailsType.Compose;return j.jsx("div",{className:"x16n37ib",children:j.jsx(c("MWXCircleButton.react"),{color:"primary",icon:c("MWInboxLeftRailHeaderIcons").Compose,label:h._("__JHASH__uhF6__U4Uqu__JHASH__"),linkProps:{url:l},onPress:function(){c("gkx")("24056")&&f&&e(d("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL),b==null?void 0:b({eventName:"create_thread"})},size:36,testid:void 0})})}m.displayName=m.name+" [from "+f.id+"]";function a(a){a.entryPoint;return j.jsx(c("CometPlaceholder.react"),{fallback:j.jsx(c("MWInboxHeaderPlaceholder.react"),{}),children:j.jsx(m,{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxLeftRailHeader.react",["fbt","BaseHeading.react","MWCMInboxLeftRailHeaderAuxiliary.react","MWXRow.react","MWXRowItem.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={header:{paddingTop:"x889kno",paddingEnd:"x1pi30zi",paddingBottom:"x1a8lsjc",paddingStart:"x1swvt13",$$css:!0}};function a(){return j.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",xstyle:k.header,children:[j.jsx(c("MWXRowItem.react"),{expanding:!0,children:j.jsx(c("BaseHeading.react"),{isPrimaryHeading:!0,children:j.jsx(c("MWXText.react"),{type:"headlineEmphasized1",children:h._("__JHASH__9FTPnWJWCay__JHASH__")})})}),j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWCMInboxLeftRailHeaderAuxiliary.react"),{})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxHomeRoot.react",["fbt","CometPlaceholder.react","CometScrollView.react","CometTopNavListDropdown.react","I64","LSClearMessageSearchTableStoredProcedure","LSClearTablesStoredProcedure","LSFactory","LSIntEnum","LSIssueMessageSearchQueryStoredProcedure","LSMessageSearchType","Locale","MWInboxActiveNowTrayContainer.react","MWInboxLeftRailContentPlaceholder.react","MWInboxLeftRailHeader.react","MWInboxLeftRailPlaceholder.react","MWInboxLeftRailSearch.react","MWInboxQuickPromotionWrapper.react","MWLeftRailComponent.react","MWMessageSearchResults.react","MWOutOfChatAudioPlayer.react","MWPActor.react","MWQuickPromotionThreadlistBannerContainer.react","MWThreadList.react","MWThreadListNewMessage.react","MWThreadListNewMessageState.react","MWXText.react","MessengerThreadlistFooterDesktopAppLinkV2.react","Promise","cr:274","cr:3394","cr:6119","cr:7303","emptyFunction","gkx","promiseDone","react","recoverableViolation","stylex","useDebouncedComet","useMWInboxSelectedThread","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n,o=m||(m=d("react")),p=m,q=p.Fragment,r=p.useCallback,s=p.useContext,t=p.useEffect,u=p.useMemo,v=p.useRef,w=p.useState,x=(p=b("cr:7303"))!=null?p:q,y=d("Locale").isRTL(),z={header:{display:"x78zum5",flexDirection:"xdt5ytf",$$css:!0},headerResponsive:{"@media (max-width: 900px)_display":"xzd29fr",$$css:!0},infoBox:{marginTop:"x1k70j0n",marginEnd:"x11i5rnm",marginBottom:"xzueoph",marginStart:"x1mh8g0r",paddingTop:"xz9dl7a",paddingEnd:"x14uny0o",paddingBottom:"xsag5q8",paddingStart:"xvpee5o",$$css:!0},leftRail:{width:"xh8yej3",$$css:!0},page:{display:"x78zum5",height:"x5yr21d",opacity:"xg01cxk",position:"x10l6tqk",transitionDuration:"x1k90msu",transitionProperty:"x6o7n8i",transitionTimingFunction:"x1qfuztq",width:"xh8yej3",$$css:!0},pageHidden:{visibility:"xlshs6z",$$css:!0},pageVisible:{opacity:"x1hc1fzr",$$css:!0}},A=h._("__JHASH__9FTPnWJWCay__JHASH__"),B=(p=b("cr:6119")==null?void 0:b("cr:6119").useMWThreadListKeyCommandContext)!=null?p:null;function C(a){var b=a.entryPoint;a.hidePage;var d=a.info,e=a.parentThreadKey;a=a.title;var f=c("useMWInboxSelectedThread")();return o.jsxs(c("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[a!=null?o.jsx(c("CometTopNavListDropdown.react").Title,{actions:[],title:a}):null,d!=null?o.jsx("div",{className:"x1k70j0n x11i5rnm xzueoph x1mh8g0r xz9dl7a x14uny0o xsag5q8 xvpee5o",children:o.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:d})}):null,o.jsx(c("CometPlaceholder.react"),{fallback:o.jsx(c("MWInboxLeftRailContentPlaceholder.react"),{}),children:o.jsx(c("MWThreadList.react"),{gridLabel:A,lsEntryPoint:b,onOpenMessageRequests:void 0,parentThreadKey:e,responsive:!0,selectedThreadKey:f,threadListMessagingEntrypoint:"inbox"})})]})}C.displayName=C.name+" [from "+f.id+"]";function a(a){a=a.hidePage;return o.jsx(C,{entryPoint:"inboxSpam",hidePage:a,parentThreadKey:(n||(n=d("LSIntEnum"))).ofNumber(-2),title:h._("__JHASH__N8crnPq-zd1__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";function D(a){a=a.hidePage;return o.jsx(C,{entryPoint:"inboxFolder",hidePage:a,parentThreadKey:(n||(n=d("LSIntEnum"))).ofNumber(-12),title:h._("__JHASH__Yxm-6KVT3xg__JHASH__")})}D.displayName=D.name+" [from "+f.id+"]";function E(a){a=a.hidePage;return o.jsx(C,{entryPoint:"inboxFolder",hidePage:a,parentThreadKey:(n||(n=d("LSIntEnum"))).ofNumber(-13),title:h._("__JHASH__yJarfmqcRDP__JHASH__")})}E.displayName=E.name+" [from "+f.id+"]";function F(a){var b=a.hidePage,e=a.query;a=a.setIsConversationSearchVisible;var f=(k||(k=c("useReStore")))(),g=c("useMWInboxSelectedThread")(),h=v(!1),i=r(function(){if(!h.current){h.current=!0;c("promiseDone")(f.runInTransaction(function(a){var b=c("LSFactory")(a);return c("LSClearMessageSearchTableStoredProcedure")(b,{type_:(n||(n=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE)}).then(function(){return c("LSClearMessageSearchTableStoredProcedure")(b,{type_:(n||(n=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD)})})},"readwrite"),b);return}},[f,b]);return o.jsx(c("MWMessageSearchResults.react"),{clearSearchResultsAndHidePage:i,query:e,selectedThreadKey:g,setIsConversationSearchVisible:a})}F.displayName=F.name+" [from "+f.id+"]";function G(a){var e=a.hidePage,f=a.isAnimating,g=a.pageComponents,h=a.pageCursor,m=a.pushPage;a.queries;var p=a.selectedThreadKey,q=a.setIsConversationSearchVisible,v=(k||(k=c("useReStore")))(),B=d("MWPActor.react").useActor(),C=r(function(a){c("promiseDone")(v.runInTransaction(function(b){return c("LSClearTablesStoredProcedure")(c("LSFactory")(b)).then(function(){return c("LSIssueMessageSearchQueryStoredProcedure")(c("LSFactory")(b),{query:a,type_:(n||(n=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD)})})},"readwrite").then(function(){return b("cr:274")==null?(i||(i=b("Promise"))).resolve():b("cr:274").searchSecureDatabaseThreads(a,B,v)}),function(){return m(function(b){b=b.hidePage;return F({hidePage:b,query:a,setIsConversationSearchVisible:q})})})},[v,m,B,q]);t(function(){return function(){c("promiseDone")(v.runInTransaction(function(a){return c("LSClearMessageSearchTableStoredProcedure")(c("LSFactory")(a),{type_:(n||(n=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD)})},"readwrite"))}},[v]);var G=r(function(a){if((l||(l=d("I64"))).equal(a,(n||(n=d("LSIntEnum"))).ofNumber(-13)))return m(E);else if((l||(l=d("I64"))).equal(a,(n||(n=d("LSIntEnum"))).ofNumber(-12)))return m(D);c("recoverableViolation")("Attempted to show an unimplemented nested system folder","messenger_web_product")},[m]),H=s(d("MWThreadListNewMessageState.react").context);a=u(function(){return b("cr:3394")==null?o.jsx(c("MWInboxLeftRailSearch.react"),{searchMessagesClicked:C}):o.jsx(b("cr:3394"),{onMessageSearchClick:C,surface:"MessengerInboxThreadlist"})},[C]);var I=o.jsx(c("MWInboxQuickPromotionWrapper.react"),{onError:function(){},children:o.jsx(x,{children:o.jsx(c("MWQuickPromotionThreadlistBannerContainer.react"),{})})}),J=w(!1),K=J[0],L=J[1];J=u(function(){return o.jsx(c("CometPlaceholder.react"),{fallback:o.jsx(c("MWInboxLeftRailContentPlaceholder.react"),{}),children:o.jsx(c("MWThreadList.react"),{gridLabel:A,header:o.jsx(c("MWInboxActiveNowTrayContainer.react"),{}),lsEntryPoint:"inboxThreadList",onClickNestedFolderThread:G,onClose:c("emptyFunction"),onOpenMessageRequests:void 0,parentThreadKey:(n||(n=d("LSIntEnum"))).ofNumber(0),preamble:H.isActive?o.jsx(c("MWThreadListNewMessage.react"),{entries:H.entries}):null,responsive:!0,selectedThreadKey:p,setHasScrolled:L,threadListMessagingEntrypoint:"inbox"})})},[p,L,G,H]);var M=o.jsx(c("MessengerThreadlistFooterDesktopAppLinkV2.react"),{});return o.jsx(o.Fragment,{children:h>0?g.map(function(a,b){return o.jsx("div",{className:(j||(j=c("stylex")))(z.page,!f&&h!==b+1?z.pageHidden:!1,h===b+1?z.pageVisible:!1),style:{transform:"translateX("+(String(Math.imul(y?1:-1,h-b-1))+"00%) translateZ(1px)")},children:o.createElement(a,{hidePage:e})},String(b))}):o.jsx(c("MWLeftRailComponent.react"),{footer:M,hasScrolled:K,header:o.jsxs("div",{className:(j||(j=c("stylex")))(z.header,c("gkx")("24056")===!1&&z.headerResponsive),children:[o.jsx(c("MWOutOfChatAudioPlayer.react"),{}),o.jsx(c("MWInboxLeftRailHeader.react"),{})]}),preamble:I,primaryNav:J,search:a,xstyle:z.leftRail})})}G.displayName=G.name+" [from "+f.id+"]";function e(a){a=a.props;var b=a.queries;a=a.setIsConversationSearchVisible;var d=c("useMWInboxSelectedThread")(),e=w(function(){return!1}),f=e[0],g=e[1];e=w(function(){return[]});var h=e[0],i=e[1];e=w(0);var j=e[0],k=e[1];r(function(){return g(!1)},[g]);e=c("useDebouncedComet")(r(function(a){window.requestAnimationFrame(function(){g(!0);return k(function(b){i(function(c){return c.slice(0,b).concat([a])});return b+1})})},[g,k,i]),{leading:!0,wait:350});var l=r(function(){window.requestAnimationFrame(function(){if(j<1){c("recoverableViolation")("Attempting to close a page that does not exist anymore.","messenger_comet");return}g(!0);k(function(a){return a-1})})},[j,g,k]);l=o.jsx(c("CometPlaceholder.react"),{fallback:o.jsx(c("MWInboxLeftRailPlaceholder.react"),{}),children:o.jsx(G,{hidePage:l,isAnimating:f,pageComponents:h,pageCursor:j,pushPage:e,queries:b,selectedThreadKey:d,setIsConversationSearchVisible:a})});return B==null?l:o.jsx(B,{activeIndex:j,children:l})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("MessageRequestsBulkActionsButtons.react",["fbt","FocusRegion.react","I64","LSFactory","LSOptimisticDeleteThreadStoredProcedure","LSOptimisticMarkThreadReadV2StoredProcedure","MessageRequestsBulkActionsContext.react","MessageRequestsLog","ServerTime","TetraButtonGroup.react","emptyFunction","focusScopeQueries","promiseDone","react","stylex","useMWXConfirmationDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=k||(k=d("react"));b=k;var n=b.useCallback,o=b.useContext,p={bulkActionsButtons:{paddingBottom:"xsag5q8",$$css:!0},bulkActionsButtonsHidden:{display:"x1s85apg",$$css:!0}};function q(a){return n(function(b){b.forEach(function(b){var e=(l||(l=d("I64"))).of_string(b);c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticMarkThreadReadV2StoredProcedure")(c("LSFactory")(a),{readWatermarkTimestampMs:(l||(l=d("I64"))).of_float(d("ServerTime").getMillis()),threadKey:e})},"readwrite"))})},[a])}function r(a){return n(function(b){b.forEach(function(b){var e=(l||(l=d("I64"))).of_string(b);c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticDeleteThreadStoredProcedure")(c("LSFactory")(a),{threadKey:e})},"readwrite"))})},[a])}function a(a){a=a.entryPoint;var b=a===void 0?"messageRequests":a;a=o(c("MessageRequestsBulkActionsContext.react"));var e=a.bulkActionsSelectedThreads,f=a.bulkActionsUnreadSelectedThreads,g=a.isBulkActionsEditMode,k=a.setIsBulkActionsEditMode;a=(i||(i=c("useReStore")))();var l=q(a),n=r(a),s=c("useMWXConfirmationDialog")();a=function(){l(e);k(!1);return d("MessageRequestsLog").logMessageRequestsBulkActionTapped(0,e.size,f.size,5,b==="spam"?-3:-1)};var t=function(){d("MessageRequestsLog").logMessageRequestsBulkActionTapped(0,e.size,f.size,4,b==="spam"?-3:-1);return s({body:e.size===1?h._("__JHASH__MLd3xbTafSI__JHASH__"):h._("__JHASH__sZbvz5cEYff__JHASH__"),confirm:h._("__JHASH__pKnL1Kcyxnh__JHASH__"),title:e.size===1?h._("__JHASH__zdCU4WfWx_J__JHASH__"):h._("__JHASH__6Kbu-lnpMhp__JHASH__",[h._param("Number of selected threads",String(e.size))])},function(){n(e);k(!1);d("FocusRegion.react").focusRegionById("mwb-jewel-bulk-actions-edit-button",d("focusScopeQueries").tabbableScopeQuery);return d("MessageRequestsLog").logMessageRequestsBulkActionConfirmed(0,e.size,f.size,4,b==="spam"?-3:-1)},c("emptyFunction"))};return m.jsx("div",{className:(j||(j=c("stylex")))(g?p.bulkActionsButtons:p.bulkActionsButtonsHidden),id:b==="spam"?"spam-bulk-actions-buttons":"message-requests-bulk-actions-buttons",children:m.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,autoRestoreFocus:!0,children:m.jsx(c("TetraButtonGroup.react"),{align:"justify",direction:"forward",primary:{disabled:e.size===0||f.size===0,label:h._("__JHASH__pC0i0CAW1ov__JHASH__").toString(),onPress:a,testid:b==="spam"?"spam-bulk-mark-as-read-button":"message-requests-bulk-mark-as-read-button",type:"secondary"},secondary:{disabled:e.size===0,label:h._("__JHASH__pKnL1Kcyxnh__JHASH__"),onPress:t,testid:b==="spam"?"spam-bulk-delete-button":"message-requests-bulk-delete-button"}})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);