;/*FB_PKG_DELIM*/

__d("ArrowDownOutline20.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsxs("g",{fillRule:"evenodd",transform:"translate(-90 -248)",children:[i.jsx("path",{fillRule:"nonzero",d:"M95.322 258.928a.75.75 0 0 0-1.06 1.06l5.208 5.209a.75.75 0 0 0 1.06 0l5.209-5.208a.75.75 0 0 0-1.06-1.06L100 263.605l-4.678-4.678z"}),i.jsx("path",{fillRule:"nonzero",d:"M99.25 251.333v12.813a.75.75 0 1 0 1.5 0v-12.813a.75.75 0 1 0-1.5 0z"})]})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("BotFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{children:[i.jsx("path",{d:"M104.255 922c-.41 0-.755.458-.755 1s.346 1 .755 1c.409 0 .755-.458.755-1s-.346-1-.755-1m-3.505.36v-.234a.126.126 0 0 0-.126-.126H100v.486h.624c.07 0 .126-.057.126-.126m.033 1.14H100v.5h.843a.155.155 0 0 0 .157-.153v-.136c0-.115-.1-.211-.217-.211",transform:"translate(352 156.5)"}),i.jsx("path",{d:"M108.5 922h-.5v2.5a.5.5 0 1 1-1 0V922h-.5a.5.5 0 1 1 0-1h2a.5.5 0 1 1 0 1zm-4.245 3c-.968 0-1.755-.897-1.755-2s.787-2 1.755-2c.968 0 1.755.897 1.755 2s-.788 2-1.755 2zM102 923.843c0 .638-.519 1.157-1.156 1.157H99.5a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5h1.124c.621 0 1.126.505 1.126 1.126v.234c0 .172-.042.333-.111.479.223.22.361.526.361.863v.141zm7.94-2.486v-.002c-.067-.835-.145-1.332-.416-1.916a3.458 3.458 0 0 0-1.58-1.505l-.026-.008c-.475-.214-.917-.277-1.792-.346a28.09 28.09 0 0 0-4.254 0c-.768.061-1.278.116-1.882.382a3.465 3.465 0 0 0-1.541 1.538l-.013.033c-.236.498-.309.985-.377 1.825a25.389 25.389 0 0 0 0 3.287c.069.837.147 1.334.417 1.916.326.629.883 1.17 1.532 1.486a.597.597 0 0 0 .049.02l.025.007c.475.214.918.277 1.792.346a28.103 28.103 0 0 0 4.254 0c.767-.061 1.277-.116 1.882-.382a3.469 3.469 0 0 0 1.541-1.538l.013-.034c.235-.497.309-.983.377-1.824.07-.936.07-2.349 0-3.285z",transform:"translate(352 156.5)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("ChannelShareDialogLoggingContext",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["BROADCAST_CHANNEL_CREATION","THREAD_DETAILS_SHARE_ITEM","THREAD_DETAILS_QUICK_ACTION","CONTEXT_BANNER_QUICK_ACTION"]);c=a;f["default"]=c}),66);
__d("CometIXTFacebookProactiveWarningFlowTriggerRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="25094495840198555"}),null);
__d("CometIXTFacebookProactiveWarningFlowTriggerRootQuery$Parameters",["CometIXTFacebookProactiveWarningFlowTriggerRootQuery_facebookRelayOperation","VideoPlayerRelayReplaceDashManifestWithPlaylist.relayprovider"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometIXTFacebookProactiveWarningFlowTriggerRootQuery_facebookRelayOperation"),metadata:{},name:"CometIXTFacebookProactiveWarningFlowTriggerRootQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__VideoPlayerRelayReplaceDashManifestWithPlaylistrelayprovider:b("VideoPlayerRelayReplaceDashManifestWithPlaylist.relayprovider")}}};e.exports=a}),null);
__d("CometIXTFacebookProactiveWarningFlowTriggerEntryPoint.entrypoint",["CometIXTFacebookProactiveWarningFlowTriggerRootQuery$Parameters","JSResourceForInteraction","WebPixelRatio","react","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;h||c("react");a={getPreloadProps:function(a){return{queries:{reference:{parameters:c("CometIXTFacebookProactiveWarningFlowTriggerRootQuery$Parameters"),variables:{input:babelHelpers["extends"]({},a,{nt_context:null,trigger_session_id:c("uuidv4")()}),scale:d("WebPixelRatio").get()}}}}},root:c("JSResourceForInteraction")("CometIXTFacebookProactiveWarningFlowTriggerRoot.react").__setRef("CometIXTFacebookProactiveWarningFlowTriggerEntryPoint.entrypoint")};b=a;g["default"]=b}),98);
__d("CometMarketplaceCreateDiscountedPriceDialogContentQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5428046370622309"}),null);
__d("CometMarketplaceCreateDiscountedPriceDialogContentQuery$Parameters",["CometMarketplaceCreateDiscountedPriceDialogContentQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometMarketplaceCreateDiscountedPriceDialogContentQuery_facebookRelayOperation"),metadata:{},name:"CometMarketplaceCreateDiscountedPriceDialogContentQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometMarketplaceCreateDiscountedPriceDialogNUXQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7688342657865856"}),null);
__d("CometMarketplaceCreateDiscountedPriceDialogNUXQuery$Parameters",["CometMarketplaceCreateDiscountedPriceDialogNUXQuery_facebookRelayOperation","VideoPlayerRelayReplaceDashManifestWithPlaylist.relayprovider"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometMarketplaceCreateDiscountedPriceDialogNUXQuery_facebookRelayOperation"),metadata:{},name:"CometMarketplaceCreateDiscountedPriceDialogNUXQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__VideoPlayerRelayReplaceDashManifestWithPlaylistrelayprovider:b("VideoPlayerRelayReplaceDashManifestWithPlaylist.relayprovider")}}};e.exports=a}),null);
__d("CometMarketplaceCreateDiscountedPriceDialog.entrypoint",["CometMarketplaceCreateDiscountedPriceDialogContentQuery$Parameters","CometMarketplaceCreateDiscountedPriceDialogNUXQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=d("WebPixelRatio").get();return{queries:{cometMarketplaceCreateDiscountedPriceDialogContentQueryReference:{parameters:c("CometMarketplaceCreateDiscountedPriceDialogContentQuery$Parameters"),variables:{thread_id:a.threadId}},cometMarketplaceCreateDiscountedPriceDialogNUXQueryReference:{parameters:c("CometMarketplaceCreateDiscountedPriceDialogNUXQuery$Parameters"),variables:{contentParams:{pixelRatio:b},scale:b}}}}},root:c("JSResourceForInteraction")("CometMarketplaceCreateDiscountedPriceDialog.react").__setRef("CometMarketplaceCreateDiscountedPriceDialog.entrypoint")};g["default"]=a}),98);
__d("CometMessengerComposerInner.react",["fbt","BaseThemeProvider.react","CometLexicalContentEditable.react","CometLexicalPlaceholder.react","LSMessagingThreadTypeUtil","LexicalComposerContext","LexicalErrorBoundary","LexicalHistoryPlugin","MLCInstrumentationPluginDeferred__INTERNAL.react","cr:1948","cr:2559","cr:7192","react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useMemo,m=c("requireDeferred")("CometMessengerHandlePastedFileComposerPlugin").__setRef("CometMessengerComposerInner.react"),n=(e=b("cr:2559").RichTextPlugin)!=null?e:b("cr:2559").PlainTextPlugin,o={container:{backgroundColor:"x16sw7j7",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",boxSizing:"x9f619",caretColor:"xlai7qp",flexGrow:"x1iyjqo2",minWidth:"xeuugli",$$css:!0},editor:{flexGrow:"x1iyjqo2",maxHeight:"x1gh3ibb",minHeight:"xisnujt",minWidth:"xeuugli",overflowY:"x1odjw0f",$$css:!0},editorWrapper:{display:"x78zum5",flexGrow:"x1iyjqo2",marginEnd:"xq8finb",marginLeft:null,marginRight:null,marginStart:"x16n37ib",marginTop:"x1xmf6yo",marginBottom:"x1e56ztr",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},inputRow:{display:"x78zum5",justifyContent:"x13a6bvl",$$css:!0}},p={dark:{"text-highlight":"var(--chat-composer-text-highlight-color)"},light:{"text-highlight":"var(--chat-composer-text-highlight-color)"},type:"VARIABLES"},q=h._("__JHASH__mUqaYJ48Erc__JHASH__").toString();function a(a){var e=a.ariaDescribedBy,f=a.contentEditableRef,g=a.editor,h=a.endContent,i=a.handlePastedFiles,r=a.isSecureThread,s=a.mentionsPlugin,t=a.placeholderText;t=t===void 0?"Aa":t;var u=a.policyProduct,v=a.startContent,w=a.surface,x=a.testId,y=a.threadSubtype,z=a.topContent;a=k(function(a){a=(a=a)!=null?a:null;f.current=a;g.setRootElement(a)},[f,g]);var A=d("LexicalComposerContext").createLexicalComposerContext(),B=l(function(){return[g,A]},[g,A]),C=j.jsx(c("CometLexicalContentEditable.react"),{ariaDescribedBy:e,ariaLabel:q,contentEditableRef:a,editor:g,spellCheck:!0,tabIndex:0,webDriverTestID:x,xstyle:o.editor}),D=j.jsx(c("CometLexicalPlaceholder.react"),{children:t}),E=!(d("LSMessagingThreadTypeUtil").isPageToUserThread(y)&&b("cr:7192"))&&!Boolean(r),F=c("useDeferredModuleOnReady")(m);return j.jsx(c("BaseThemeProvider.react"),{config:p,children:function(a,e){return j.jsxs("div",{className:"x16sw7j7 x107yiy2 xv8uw2v x1tfwpuw x2g32xy x9f619 xlai7qp x1iyjqo2 xeuugli",style:e,children:[j.jsx(c("MLCInstrumentationPluginDeferred__INTERNAL.react"),{editor__DEPRECATED:g,policyProduct:u,surface:w}),z,j.jsxs("div",{className:"x78zum5 x13a6bvl",children:[v,j.jsx("div",{className:"x78zum5 x1iyjqo2 xq8finb x16n37ib x1xmf6yo x1e56ztr xeuugli x1n2onr6",children:j.jsxs(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:B,children:[n!=null&&j.jsx(n,{ErrorBoundary:c("LexicalErrorBoundary"),contentEditable:C,placeholder:D}),j.jsx(d("LexicalHistoryPlugin").HistoryPlugin,{})]})}),h]}),s,E&&b("cr:1948")!=null&&j.jsx(b("cr:1948"),{editor:g}),d("LSMessagingThreadTypeUtil").isPageToUserThread(y)&&b("cr:7192")&&j.jsx(b("cr:7192"),{editor:g}),F==null?null:j.jsx(F,{editor:g,handlePastedFiles:i})]})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("ComponentMountUnmountSubspanLogger.react",["InteractionTracingMetrics","hero-tracing-placeholder","performanceNow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useContext,k=b.useEffect;function a(a){var b=a.description,e=j(d("hero-tracing-placeholder").HeroInteractionIDContext);k(function(){var a=(h||(h=c("performanceNow")))();return function(){if(e!=null){var d=(h||(h=c("performanceNow")))();c("InteractionTracingMetrics").addSubspan(e,b,"AppTiming",a,d,{})}}},[b,e])}g["default"]=a}),98);
__d("CtmMultiPhotoCarouselMsgrMultiPhotoCarouselClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1746398");b=d("FalcoLoggerInternal").create("ctm_multi_photo_carousel_msgr_multi_photo_carousel_click",a);e=b;g["default"]=e}),98);
__d("CustomerInformationTemplateFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5813");b=d("FalcoLoggerInternal").create("customer_information_template",a);e=b;g["default"]=e}),98);
__d("Dots3VerticalOutline20.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-446 -398)",children:i.jsx("path",{d:"M456 410a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0 6a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0-12a2 2 0 1 1 0-4 2 2 0 0 1 0 4"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("EntMessageReplyType",[],(function(a,b,c,d,e,f){a=Object.freeze({REGULAR:0,BUMP:1});f["default"]=a}),66);
__d("FBP2MCheckoutDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("FBP2MCheckoutDialog.react").__setRef("FBP2MCheckoutDialog.entrypoint")};g["default"]=a}),98);
__d("FBP2MECPCheckoutDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("FBP2MECPCheckoutDialog.react").__setRef("FBP2MECPCheckoutDialog.entrypoint")};g["default"]=a}),98);
__d("FriendAddFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{children:[i.jsx("path",{d:"M105 920.25c0 1.242-.895 2.25-2 2.25s-2-1.008-2-2.25.572-2.25 2-2.25 2 1.008 2 2.25",transform:"translate(351.5 156) translate(.5)"}),i.jsx("path",{fillRule:"nonzero",d:"M105.5 920.25c0 1.506-1.105 2.75-2.5 2.75s-2.5-1.244-2.5-2.75c0-1.638.878-2.75 2.5-2.75 1.622 0 2.5 1.112 2.5 2.75zm-1 0c0-1.13-.489-1.75-1.5-1.75-1.011 0-1.5.62-1.5 1.75 0 .979.686 1.75 1.5 1.75s1.5-.771 1.5-1.75z",transform:"translate(351.5 156) translate(.5)"}),i.jsx("path",{d:"M106.564 929h-7.129a.938.938 0 0 1-.935-.936v-.515a3.058 3.058 0 0 1 3.049-3.049h2.902a3.058 3.058 0 0 1 3.049 3.049v.515a.938.938 0 0 1-.936.936",transform:"translate(351.5 156) translate(.5)"}),i.jsx("path",{fillRule:"nonzero",d:"M106.564 929.5h-7.129c-.79 0-1.435-.645-1.435-1.436v-.515a3.558 3.558 0 0 1 3.549-3.549h2.902a3.558 3.558 0 0 1 3.549 3.549v.515c0 .791-.645 1.436-1.436 1.436zm0-1a.438.438 0 0 0 .436-.436v-.515c0-1.4-1.148-2.549-2.549-2.549h-2.902a2.558 2.558 0 0 0-2.55 2.549l.001.515c0 .239.197.436.435.436h7.13z",transform:"translate(351.5 156) translate(.5)"}),i.jsx("path",{fillRule:"nonzero",d:"M107 922h3a.5.5 0 0 0 0-1h-3a.5.5 0 0 0 0 1z",transform:"translate(351.5 156)"}),i.jsx("path",{fillRule:"nonzero",d:"M108 920v3a.5.5 0 0 0 1 0v-3a.5.5 0 0 0-1 0z",transform:"translate(351.5 156)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("GraphQLMessengerPlatformCtaPostHandlingMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4973572169363354"}),null);
__d("GraphQLMessengerPlatformCtaPostHandlingMutation.graphql",["GraphQLMessengerPlatformCtaPostHandlingMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerPlatformCtaPostHandlingResponsePayload",kind:"LinkedField",name:"messenger_platform_cta_post_handling",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"GraphQLMessengerPlatformCtaPostHandlingMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"GraphQLMessengerPlatformCtaPostHandlingMutation",selections:c},params:{id:b("GraphQLMessengerPlatformCtaPostHandlingMutation_facebookRelayOperation"),metadata:{},name:"GraphQLMessengerPlatformCtaPostHandlingMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("GroupsCometAdmodChatsPendingPostReviewDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7563643680323705"}),null);
__d("GroupsCometAdmodChatsPendingPostReviewDialogQuery$Parameters",["GroupsCometAdmodChatsPendingPostReviewDialogQuery_facebookRelayOperation","IsMergQAPolls.relayprovider","IsWorkUser.relayprovider","VideoPlayerRelayReplaceDashManifestWithPlaylist.relayprovider"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("GroupsCometAdmodChatsPendingPostReviewDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometAdmodChatsPendingPostReviewDialogQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__VideoPlayerRelayReplaceDashManifestWithPlaylistrelayprovider:b("VideoPlayerRelayReplaceDashManifestWithPlaylist.relayprovider"),__relay_internal__pv__IsWorkUserrelayprovider:b("IsWorkUser.relayprovider"),__relay_internal__pv__IsMergQAPollsrelayprovider:b("IsMergQAPolls.relayprovider")}}};e.exports=a}),null);
__d("GroupsCometAdmodChatsPendingPostReviewDialog.entrypoint",["GroupsCometAdmodChatsPendingPostReviewDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.authorID,e=a.groupID,f=a.postID;a=a.scale;return{queries:{queryReference:{parameters:c("GroupsCometAdmodChatsPendingPostReviewDialogQuery$Parameters"),variables:{authorID:b,feedLocation:"GROUP_PENDING",focusCommentID:null,groupID:e,postID:f,privacySelectorRenderLocation:"COMET_STREAM",renderLocation:"group_pending_queue",scale:a?a:d("WebPixelRatio").get(),useDefaultActor:!1}}}}},root:c("JSResourceForInteraction")("GroupsCometAdmodChatsPendingPostReviewDialog.react").__setRef("GroupsCometAdmodChatsPendingPostReviewDialog.entrypoint")};b=a;g["default"]=b}),98);
__d("GroupsCometAdmodChatsReviewDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7631909650153865"}),null);
__d("GroupsCometAdmodChatsReviewDialogQuery$Parameters",["GroupsCometAdmodChatsReviewDialogQuery_facebookRelayOperation","VideoPlayerRelayReplaceDashManifestWithPlaylist.relayprovider"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("GroupsCometAdmodChatsReviewDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometAdmodChatsReviewDialogQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__VideoPlayerRelayReplaceDashManifestWithPlaylistrelayprovider:b("VideoPlayerRelayReplaceDashManifestWithPlaylist.relayprovider")}}};e.exports=a}),null);
__d("GroupsCometAdmodChatsReviewDialog.entrypoint",["GroupsCometAdmodChatsReviewDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.groupID,e=a.profileID;a=a.scale;return{queries:{queryReference:{parameters:c("GroupsCometAdmodChatsReviewDialogQuery$Parameters"),variables:{groupID:b,profileID:e,scale:a?a:d("WebPixelRatio").get()}}}}},root:c("JSResourceForInteraction")("GroupsCometAdmodChatsReviewDialog.react").__setRef("GroupsCometAdmodChatsReviewDialog.entrypoint")};b=a;g["default"]=b}),98);
__d("GroupsCometChatEditChatDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6517941274957526"}),null);
__d("GroupsCometChatEditChatDialogQuery$Parameters",["GroupsCometChatEditChatDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("GroupsCometChatEditChatDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometChatEditChatDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("GroupsCometChatEditChatDialog.entrypoint",["GroupsCometChatEditChatDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.threadID;return{queries:{queryReference:{options:{fetchPolicy:"network-only"},parameters:c("GroupsCometChatEditChatDialogQuery$Parameters"),variables:{threadID:a}}}}},root:c("JSResourceForInteraction")("GroupsCometChatEditChatDialog.react").__setRef("GroupsCometChatEditChatDialog.entrypoint")};g["default"]=a}),98);
__d("useIXTProactiveWarningFlowTriggerDialog",["cr:2998","cr:3116"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){return b("cr:3116")(b("cr:2998"),a,void 0,void 0,{baseModalProps:c})}g["default"]=a}),98);
__d("IXTProactiveWarningFollowUpActionsCell.react",["TetraButton.react","react","useIXTProactiveWarningFlowTriggerDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.context,d=a.label,e=a.onClose,f=a.onPress,g=a.setPWDismissTime;a=c("useIXTProactiveWarningFlowTriggerDialog")({proactive_warning_request_context:b,trigger_event_type:"OPEN_PROACTIVE_WARNING_FLOW"});var h=a[0],j=function(){e()};return i.jsx(c("TetraButton.react"),{label:d,onPress:function(){g(),f(),h({flowCallbacks:{onClose:j}})},reduceEmphasis:!1,type:"secondary"})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("InfoCircleFilled20.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("path",{d:"M10 2a8 8 0 1 0 8 8 8.009 8.009 0 0 0-8-8zm1 11.5a.75.75 0 0 1-1.5 0v-3h-.25a.75.75 0 0 1 0-1.5h1a.75.75 0 0 1 .75.75zM10 8a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("LSCTAIconType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,FB:1,FB_ALWAYS_WHITE:2,DOTS_THREE_HORIZONTAL:3,CHEVRON_DOWN:4,FB_INFO_SMALL:5});f["default"]=a}),66);
__d("LSClearReactionsV2DetailsAndRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.sequence([function(a){return b.forEach(b.db.table(239).fetch(),function(a){return a["delete"]()})},function(a){return b.forEach(b.db.table(243).fetch(),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSClearReactionsV2DetailsAndRangeStoredProcedure",["LSClearReactionsV2DetailsAndRange","cr:8709"],(function(a,b,c,d,e,f,g){function a(a){return c("LSClearReactionsV2DetailsAndRange")(a)}g["default"]=a}),98);
__d("LSCommunityInviteStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({IN_COMMUNITY:0,INVITED:1,REQUEST_PENDING:2,UNENGAGED_MEMBER:4,UNREQUESTED:3});f["default"]=a}),66);
__d("LSContactReachabilityStatusType",[],(function(a,b,c,d,e,f){a=Object.freeze({REACHABLE:0,UNREACHABLE_USER_TYPE:1,UNREACHABLE_ADULT_TYPE:2,REACHABLE_INVITE_BANNER:3,UNREACHABLE_INVITE_BLOCK:4,UNREACHABLE_INTEROP_THIRD_PARTY_USER:5,UNREACHABLE_INTEROP_USER_OPT_OUT:6,UNREACHABLE_INTEROP_THIRD_PARTY_APP_NOT_SUPPORTED:7,UNREACHABLE_INTEROP_USER_REMOVED_THIRD_PARTY_APP:8});f["default"]=a}),66);
__d("LSCustomUpdateMuteManagement",["LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(e){return d[1]=new c.Map(),d[1].set("game_id",a[1]),d[1].set("muted_user_id",a[0]),d[1].set("owner_id",d[0]),d[1].set("user_action_type",a[2]),d[2]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),"instant_game_custom_update_mute_management",c.i64.cast([0,759]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSCustomUpdateMuteManagementStoredProcedure",["LSCustomUpdateMuteManagement","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.mutedUserId;d[1]=b.gameId;d[2]=b.userActionType;return c("LSCustomUpdateMuteManagement").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSFetchAdditionalThreadData",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),["fetch_additional_thread_data","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,733]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSFetchAdditionalThreadDataStoredProcedure",["LSFetchAdditionalThreadData","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSFetchAdditionalThreadData").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSFetchMessageSeenCount",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_id",a[0]),d[0].set("message_id",a[1]),d[1]=d[0].get("thread_id"),d[0],d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),["cm_message_seen_count",c.i64.to_string(d[1])].join(""),c.i64.cast([0,540]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSFetchMessageSeenCountStoredProcedure",["LSFetchMessageSeenCount","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.messageId;return c("LSFetchMessageSeenCount").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSFetchProactiveWarningsIfNeeded",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],void 0)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return c.db.table(183).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(b){return c.db.table(183).put({threadKey:a[0],suspectId:a[0]})},function(e){return d[4]=new c.Map(),d[4].set("thread_key",a[0]),d[4].set("sync_group",d[0]),d[5]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),"proactive_warnings_fetch_queue",c.i64.cast([0,192]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[2]=c.i64.cast([0,1])}]):(f=e.item,c.sequence([function(e){return d[5]=f.nextCheckTimestampMs,d[4]=c.i64.of_float(Date.now()),c.i64.neq(d[5],void 0)&&c.i64.ge(d[4],d[5])?c.sequence([function(b){return c.db.table(183).put({threadKey:a[0],suspectId:a[0]})},function(e){return d[7]=new c.Map(),d[7].set("thread_key",a[0]),d[7].set("sync_group",d[0]),d[8]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTask"),"proactive_warnings_fetch_queue",c.i64.cast([0,192]),d[8],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[6]=c.i64.cast([0,1])}]):c.resolve((c.i64.neq(d[5],void 0)&&f.tag!==void 0?d[7]=c.i64.cast([0,2]):d[7]=c.i64.cast([0,3]),d[6]=d[7]))},function(a){return d[2]=d[6]}]))})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSFetchProactiveWarningsIfNeededStoredProcedure",["LSFetchProactiveWarningsIfNeeded","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSFetchProactiveWarningsIfNeeded").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSIssuePointQueryForRollCallConversion",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("roll_call_id",a[1]),d[0].set("thread_key",a[0]),d[0].set("query_purpose",c.i64.cast([0,2])),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"roll_call_point_query",c.i64.cast([0,611]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSIssuePointQueryForRollCallConversionStoredProcedure",["LSIssuePointQueryForRollCallConversion","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.rollCallId;return c("LSIssuePointQueryForRollCallConversion").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSIssueReactionsV2DetailsUsersListFetch",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.filter(c.db.table(243).fetch([[[a[0],a[1]]]]),function(b){return c.i64.eq(a[0],b.threadId)&&a[1]===b.messageId&&c.i64.eq(a[2],b.reactionFbid)}).next().then(function(b,d){var e=b.done;b=b.value;return e?c.db.table(243).add({threadId:a[0],messageId:a[1],reactionFbid:c.i64.cast([0,0]),minTimestampMs:c.i64.cast([2147483647,4294967295]),hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!0,maxTimestampMs:c.i64.cast([2147483647,4294967295]),nextPageCursor:""}):(d=b.item,c.forEach(c.db.table(243).fetch([[[d.threadId,d.messageId,d.reactionFbid,d.minTimestampMs]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:!0})}))})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[1]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[1]=d[5])})},function(e){return d[3]=new c.Map(),d[3].set("thread_id",a[0]),d[3].set("message_id",a[1]),d[3].set("reaction_fbid",a[2]),d[3].set("cursor",a[3]),d[3].set("sync_group",d[1]),d[4]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"fetch_reactions_v2_details_users_list",c.i64.cast([0,577]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure",["LSIssueReactionsV2DetailsUsersListFetch","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadId;d[1]=b.messageId;d[2]=b.reactionFbid;d[3]=b.nextPageCursor;return c("LSIssueReactionsV2DetailsUsersListFetch").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSSetClientCTAType",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(19).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({type_:a[1]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSMarkAsX",["LSIssueNewTask","LSSetClientCTAType"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSSetClientCTAType"),a[0],"xma_disabled_cta")},function(e){return d[0]=new c.Map(),d[0].set("cta_id",a[0]),d[0].set("order_id",a[1]),d[0].set("cta_type",a[2]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"p2m_mark_as_x",c.i64.cast([0,808]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSMarkAsXStoredProcedure",["LSMarkAsX","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.ctaId;d[1]=b.orderId;d[2]=b.ctaType;return c("LSMarkAsX").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSOnSendMessageFailure.nop",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d,e){return(g||(g=b("Promise"))).resolve()}f["default"]=a}),66);
__d("LSMarkOptimisticMessageFailed",["LSOnSendMessageFailure.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.sequence([function(d){return c.nativeOperation(b("LSOnSendMessageFailure.nop"),a[0],a[1])},function(b){return c.forEach(c.filter(c.db.table(12).fetch([[[a[0]]],"optimistic"]),function(b){return b.offlineThreadingId===a[0]&&c.i64.eq(b.authorityLevel,c.i64.cast([0,20]))}),function(a){var b=a.update;a.item;return b({sendStatus:c.i64.cast([0,4]),sendStatusV2:c.i64.cast([0,4])})})}])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("LSMarkOptimisticMessageFailedStoredProcedure",["LSMarkOptimisticMessageFailed","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.optimisticMid;d[1]=b.errorMessage;return c("LSMarkOptimisticMessageFailed").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSMediaUrlAttachmentItem",["LSMediaUrlUtils","rewriteFallbackUrl"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.previewUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.previewUrlFallback):a.previewUrl}function b(a){var b=a.previewUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.previewUrlFallback):a.previewUrlLarge}function e(a){var b=a.playableUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.playableUrlFallback):a.playableUrl}function f(a){var b=a.faviconUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.faviconUrlFallback):a.faviconUrl}g.previewUrl=a;g.previewUrlLarge=b;g.playableUrl=e;g.faviconUrl=f}),98);
__d("LSMessageRenderingType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,NON_COLLAPSIBLE_ADMIN_MESSAGE:1,HIDDEN:2,RICH_TEXT_COMMON_MARK:3});f["default"]=a}),66);
__d("LSMessageTakedownState",[],(function(a,b,c,d,e,f){a=Object.freeze({TAKEN_DOWN_BY_META:1,TAKEN_DOWN_BY_ADMIN:2,GEO_BLOCKED:3});f["default"]=a}),66);
__d("LSNullstateCTAType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,GET_STARTED:1,ICEBREAKER:2,PRIVACY_DISCLOSURE:3,MP_EMPTY_ICEBREAKER:4});f["default"]=a}),66);
__d("LSNullstateDescriptionType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,SUBTEXT:1,TITLE_SMALL_DEFAULT:2,TITLE_SMALL_SUBTEXT:3});f["default"]=a}),66);
__d("LSOptimisticEditMessage",["LSEditMessage","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(12).fetch([[[a[0]]],"messageId"]).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,d[2]=f.editCount,d[1]=c.i64.of_float(Date.now()),c.i64.lt(d[2]==null?c.i64.cast([0,0]):d[2],c.i64.cast([0,5]))&&c.i64.le(d[1],c.i64.add(f.timestampMs,c.i64.cast([0,9e5])))?c.sequence([function(e){return c.storedProcedure(b("LSEditMessage"),f.messageId,c.i64.cast([0,20]),a[1],c.i64.add(d[2]==null?c.i64.cast([0,0]):d[2],c.i64.cast([0,1])))},function(e){return d[3]=new c.Map(),d[3].set("message_id",a[0]),d[3].set("text",a[1]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[7]=c.i64.of_float(Date.now()),d[4]=c.i64.add(d[7],c.i64.cast([0,0]))):d[4]=c.i64.cast([0,0]),d[5]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),"edit_message",c.i64.cast([0,742]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[4],c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})},function(a){return void 0!==void 0?(d[7]=c.i64.of_float(Date.now()),c.forEach(c.db.table(2).fetch([[[d[6]]]]),function(a){var b=a.update;a.item;return b({dataTraceId:void 0,initTraceTimestampMs:d[7]})})):c.resolve()}]):c.resolve(void 0!==void 0?0:0))})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticEditMessageStoredProcedure",["LSOptimisticEditMessage","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.messageId;d[1]=b.text;return c("LSOptimisticEditMessage").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSOptimisticProcessMarketplaceCallFunctionCTA",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],void 0)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return d[2]=new c.Map(),d[2].set("action_type",a[4]),d[2].set("attachment_fbid",a[2]),d[2].set("message_id",a[0]),d[2].set("target_id",a[3]),d[2].set("thread_key",a[1]),d[2].set("sync_group",d[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),"process_marketplace_xma_cta",c.i64.cast([0,185]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticProcessMarketplaceCallFunctionCTAStoredProcedure",["LSOptimisticProcessMarketplaceCallFunctionCTA","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.messageId;d[1]=b.threadKey;d[2]=b.attachmentFbid;d[3]=b.targetId;d[4]=b.actionType;return c("LSOptimisticProcessMarketplaceCallFunctionCTA").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSPageType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,AI:1});f["default"]=a}),66);
__d("LSSendTypingIndicator",["LSIssueNewFireAndForgetTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return d[2]=["typing","_",c.i64.to_string(a[0])].join(""),c.forEach(c.filter(c.db.table(5).fetch(),function(a){return d[2]===a.queueName}),function(a){return a["delete"]()})},function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("is_group_thread",a[1]),d[0].set("is_typing",a[2]),d[0].set("attribution",c.i64.cast([0,0])),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewFireAndForgetTask"),d[2],c.i64.cast([0,3]),d[1])}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSSetProactiveWarningDismissTime",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[8]=b.syncGroup,c.i64.neq(d[8],void 0)?d[7]=d[8]:d[7]=c.i64.cast([0,1]),d[0]=d[7])})},function(e){return d[2]=c.i64.of_float(Date.now()),d[6]=c.i64.div(d[2],c.i64.cast([0,1e3])),d[3]=new c.Map(),d[3].set("thread_key",a[0]),d[3].set("timestamp",d[6]),d[3].set("sync_group",d[0]),d[4]=d[3].get("thread_key"),d[3],d[5]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[4]),c.i64.cast([0,438]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({proactiveWarningDismissTime:d[6]})})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSSetProactiveWarningDismissTimeStoredProcedure",["LSSetProactiveWarningDismissTime","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSSetProactiveWarningDismissTime").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSUpdateBotSubscription",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("user_action_type",a[1]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"game_messenger_updates_management_xmat",c.i64.cast([0,755]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpdateBotSubscriptionStoredProcedure",["LSUpdateBotSubscription","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.userActionType;return c("LSUpdateBotSubscription").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSVerifiedType",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_VERIFIED:0,DEFAULT:1,VERIFIED_FOOTER:2});f["default"]=a}),66);
__d("LikeFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{d:"M462 1080.384c0-.575-.193-.74-.403-.905.116-.191.226-.466.226-.817 0-.717-.555-1.162-1.449-1.162h-2.437c.067-.376.147-1.401.147-1.766 0-.756-.18-1.697-.873-2.069a1.224 1.224 0 0 0-.637-.165c-.399 0-.663.164-.757.267a.312.312 0 0 0-.082.236l.058 1.567a.625.625 0 0 1-.071.348l-1.207 2.693a.195.195 0 0 1-.083.075l-.008.003-.007.004-.178.097a.454.454 0 0 0-.239.4v4.286c0 .132.06.257.16.344.052.045.727.68 1.393.68h3.93c.609 0 1.012-.206 1.231-.61.2-.37.168-.725.089-.983.332-.105.645-.355.738-.818.06-.299-.01-.548-.106-.733.291-.16.565-.396.565-.972m-9.553-2.384h-1.893a.554.554 0 0 0-.554.553v5.894c0 .306.248.553.553.553h1.893a.554.554 0 0 0 .554-.553v-5.894a.553.553 0 0 0-.553-.553"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("LsBotComposerQuickReplyDisplayedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743836");b=d("FalcoLoggerInternal").create("ls_bot_composer_quick_reply_displayed",a);e=b;g["default"]=e}),98);
__d("LsFrxMessengerFeedbackProactiveWarningBannerPrimaryActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2898");b=d("FalcoLoggerInternal").create("ls_frx_messenger_feedback_proactive_warning_banner_primary_action_tapped",a);e=b;g["default"]=e}),98);
__d("LsFrxMessengerFeedbackProactiveWarningBannerSecondaryActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2899");b=d("FalcoLoggerInternal").create("ls_frx_messenger_feedback_proactive_warning_banner_secondary_action_tapped",a);e=b;g["default"]=e}),98);
__d("LsFrxMessengerFeedbackProactiveWarningBannerShownFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2900");b=d("FalcoLoggerInternal").create("ls_frx_messenger_feedback_proactive_warning_banner_shown",a);e=b;g["default"]=e}),98);
__d("LsReplyRenderedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743878");b=d("FalcoLoggerInternal").create("ls_reply_rendered",a);e=b;g["default"]=e}),98);
__d("MAWCreateGroupThread",["fbt","I64","LSFactory","LSIssueNewErrorStoredProcedure","MAWBridgeSendAndReceive","MAWJobDefinitions","MAWTimedJob","WAJobOrchestratorTypes","asyncToGeneratorRuntime","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.db,e=a.deduplicationKey,f=a.isDualSend;f=f===void 0?!1:f;var g=a.offlineThreadingId,j=a.participantIds;a=a.threadName;g=g!=null?(i||(i=d("I64"))).to_string(g):void 0;var k="msgr";e=(yield d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("createGroup",{extras:{clientThreadKey:g,deduplicationKey:e,isDualSend:f,platform:k},key:g,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},subject:a,uniqKey:g,users:j})));a=e.error;g=e.value;if(a==null&&g!=null&&g.type===k){j=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadIdByChatJid",{chatJid:g.chatJid}));if(j==null)throw c("unrecoverableViolation")("Group was not found in database","messenger_e2ee_web");else return{chatId:j,created:!0,jid:g.chatJid}}if(!f){var l=h._("__JHASH__Q8EKHlLB3en__JHASH__").toString();c("promiseDone")(b.runInTransaction(function(a){return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(a),{errorBodyText:l,errorTitleText:l})},"readwrite"))}throw c("unrecoverableViolation")("Unable to create group","messenger_e2ee_web")});return k.apply(this,arguments)}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.deduplicationKey;if(b==null)return j(a);b=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadIdByDeduplicationKey",{deduplicationKey:b}));return b!=null?{chatId:b.chatId,created:!1,jid:b.jid}:j(a)});return l.apply(this,arguments)}g["default"]=a}),98);
__d("MAWCreateOptimisticSecureMessage",["I64","LSAuthorityLevel","LSIntEnum","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessageSendStatus","LSQuickReplyType","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBridgeBuildMsg","MAWDbMsg","MAWMsgReplySnippet","MessagingAttachmentType","OfflineThreadingId","QPLUserFlow","ReQL","asyncToGeneratorRuntime","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if(e==null)return[void 0,void 0];var g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages).getKeyRange(b,e.timestampMs,e.messageId)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"get_reply_msg_end",{instanceKey:f});a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b,e.messageId)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"get_reply_attachment_end",{instanceKey:f});return[g,a]});return k.apply(this,arguments)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(c("gkx")("23989"))return d("OfflineThreadingId").createOfflineThreadingID();a=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.messages).getKeyRange(b)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"get_offline_threading_id_end",{instanceKey:e});if(a==null)return d("OfflineThreadingId").createOfflineThreadingID();b=d("MAWDbMsg").toMsgId(a.messageId);return b==null?d("OfflineThreadingId").createOfflineThreadingID():d("MAWDbMsg").getNextOptimisticId(b)});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(b)));return a==null?void 0:a.firstName});return o.apply(this,arguments)}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(b==null)return;a=(yield n(a,b.senderId));return(a=d("MAWMsgReplySnippet").buildLocalizedReplySnippet({isAuthorMe:!0,isDeletedMsg:b.replyStatus===c("LSReplyMessageStatus").DELETED,recipientName:a,replySenderIsMe:(h||(h=d("I64"))).equal(b.senderId,e)}))==null?void 0:a.toString()});return q.apply(this,arguments)}function r(a){if(a==null)return;var b=a.attachmentType;return(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER))?a.previewUrl:void 0}function s(a){if(a!=null){if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO);return(h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))?(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF):(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER)}}function a(a,b,c,d,e,f,g,h,i,j,k,l,m){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,k,l,m,n,o,q,t){l=(yield j(b,h,f,l));var u=l[0];l=l[1];b=(yield d("MAWBridgeBuildMsg").buildOptimisticMessage(a,b,g,n,h,u,o,m));g=(yield p(a,u,e));m=babelHelpers["extends"]({},b,{authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),displayedContentTypes:i.ofNumber(q),hasQuickReplies:!1,hotEmojiSize:k,isAdminMessage:!1,isCollapsed:!1,isUnsent:!1,messageId:n,offlineThreadingId:c("gkx")("23990")&&t!=null?t:n,primarySortKey:o,quickReplyType:i.ofNumber(c("LSQuickReplyType").NONE),replyAttachmentType:s(l),replyMediaPreviewHeight:l==null?void 0:l.previewHeight,replyMediaPreviewWidth:l==null?void 0:l.previewWidth,replyMediaUrl:r(l),replyMediaUrlMimeType:l==null?void 0:l.playableUrlMimeType,replySnippet:g,replySourceId:f==null?void 0:f.messageId,replySourceType:f!=null?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,replySourceTypeV2:f!=null?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,senderId:e,sendStatus:i.ofNumber(c("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:i.ofNumber(1),textHasLinks:!1,threadKey:h,timestampMs:o,transportKey:"WhatsApp",viewFlags:i.ofNumber(0)});return m});return t.apply(this,arguments)}function e(a,b,c,d){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){var e=Date.now();a=(yield l(a,b,c));d(a);return{offlineMsgId:a,offlineMsgTimestamp:e}});return u.apply(this,arguments)}g.getReply=j;g.getOfflineThreadingId=l;g.getOptimisticReplySnippet=p;g.getReplyMediaUrl=r;g.getReplyAttachmentType=s;g.createOptimisticMessageTxn=a;g.createOfflineMessageIdAndTimestamp=e}),98);
__d("MAWEphemeralMessageTimer.react",["fbt","CometScreenReaderText.react","I64","MAWEphemeralConsts","MWXText.react","WATimeUtils","react","setTimeout"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useEffect,m=b.useState;function n(a){if(a<d("MAWEphemeralConsts").oneMinuteInSeconds)return h._("__JHASH__A4ingmAx2be__JHASH__",[h._param("seconds",String(a).concat("s"))]);if(a<d("MAWEphemeralConsts").oneHourInSeconds)return h._("__JHASH__vWI2ZlgwXQb__JHASH__",[h._param("minutes",String(Math.floor(a/d("MAWEphemeralConsts").oneMinuteInSeconds)).concat("m"))]);return a<d("MAWEphemeralConsts").oneDayInSeconds?h._("__JHASH__25PcZ3MKsFM__JHASH__",[h._param("hours",String(Math.floor(a/d("MAWEphemeralConsts").oneHourInSeconds)).concat("h"))]):h._("__JHASH__eRreAbYsreU__JHASH__",[h._param("days",String(Math.floor(a/d("MAWEphemeralConsts").oneDayInSeconds)).concat("d"))])}function o(a,b){a=(j||(j=d("I64"))).to_int32(j.sub(a,j.of_float(d("WATimeUtils").unixTime())));return b!=null&&a>(j||(j=d("I64"))).to_int32(b)?(j||(j=d("I64"))).to_int32(b):a}function a(a){var b=a.ephemeralDurationInSec,e=a.expirationTimestamp;a=m(function(){return o(e,b)});var f=a[0],g=a[1];a=n(f);var i=h._("__JHASH__LNXEmV_oB6W__JHASH__",[h._param("time",a)]);l(function(){f>0&&c("setTimeout")(function(){return g(f-1)},d("MAWEphemeralConsts").msPerSec)},[f,e]);return f>0?k.jsxs("div",{className:"x2b8uid xbkr7qi",children:[k.jsx(c("CometScreenReaderText.react"),{text:i}),k.jsx("div",{"aria-hidden":!0,children:k.jsx(c("MWXText.react"),{testid:void 0,type:"meta1",children:a})})]}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWInternalLog",["WALoggerDeferred","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}function a(a){c("gkx")("23904")&&void d("WALoggerDeferred").LOG(h(),a)}g.internalLog=a}),98);
__d("MAWFetchCutoverMessages",["I64","LSFactory","LSIssueMessagesRangeQueryStoredProcedure","MAWBridgeSendAndReceive","MAWDbMsg","MAWInternalLog","MAWMiActOnActThreadReady","MWEncryptedBackupsIssueRangeQueryDeferred","Promise","ReQL","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["useFetchSecureMessages: threadJid: "," threadId: "," minMsgSortOrderTsResponse ",""]);j=function(){return a};return a}function k(a,d,e,f){return a.runInTransaction(function(a){return f!=null&&e!=null?c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:d,referenceTimestampMs:e.minTimestampMs,threadKey:f}):(i||(i=b("Promise"))).resolve()},"readwrite")}function a(a,b,c,d){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.messages_ranges_v2__generated).getKeyRange(c))),g=(yield d("ReQL").firstAsync(e!=null?d("ReQL").fromTableAscending(a.tables.messages_ranges_v2__generated).getKeyRange(e):d("ReQL").empty()));if(f==null)return;var i=f.hasMoreBefore,l=d("MAWDbMsg").toMsgId(f.minMessageId);return d("MAWMiActOnActThreadReady").onActThreadReady(a.tables,c,"MAWFetchMoreMessages",function(c,f,m){d("MAWInternalLog").internalLog("MAWFetchCutoverMessages: start loadMoreMsgs");return d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMoreMsgs",{chatJid:m,direction:"before",numMsgs:10,offsetMsgId:l,threadId:f}).then(function(c){d("MAWInternalLog").internalLog("MAWFetchCutoverMessages: response is "+c.hasMoreBefore.toString());if(c.hasMoreBefore)return;return d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMaybeNextNonAdminMsgSortOrderMs",{mayBeAdminMsgId:l,threadId:f}).then(function(c){d("WATagsLogger").TAGS(["labyrinth_web","useFetchSecureMessages"]).LOG(j(),m,f,c.minMsgTimestampMs);d("MWEncryptedBackupsIssueRangeQueryDeferred").issueRangeQueryDeferred({db:a,newerNumMessages:(h||(h=d("I64"))).zero,numMessages:h.of_string("10"),sortOrderMs:h.of_float(c.minMsgTimestampMs),threadId:f});if(!i)return k(a,b,g,e)})})})});return l.apply(this,arguments)}g["default"]=a}),98);
__d("MAWFetchSecureMessages",["I64","MAWBridgeSendAndReceive","MAWDbMsg","MAWInternalLog","MAWMiActOnActThreadReady","MWEncryptedBackupsIssueRangeQueryDeferred","ReQL","WATagsLogger","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWFetchSecureMessages: threadJid: "," threadId: "," minMsgSortOrderTsResponse ",""]);i=function(){return a};return a}var j=10;function a(a,b,c,d,e,f,g){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,k,l){k===void 0&&(k=j);var m=l.addQPLAnnotations,n=l.markQPLFailure,o=l.markQPLPoint,p=l.markQPLStart;l=l.markQPLSuccess;var q=p();function r(a){o(q,"load_more_msgs_success","successfully loaded messages from worker"),m(q,a)}d("MAWInternalLog").internalLog("MAWFetchSecureMessages: started to get message range");o(q,"before_start_load_more_msgs","before fetching messages range from table");m(q,{string:babelHelpers["extends"]({direction:g,thread_id:(h||(h=d("I64"))).to_string(e)},f!=null?{thread_type:(h||(h=d("I64"))).to_string(f)}:{})});p=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.messages_ranges_v2__generated).getKeyRange(e)));try{if(p!=null&&!p.isLoadingBefore&&g==="before"){o(q,"start_load_more_msgs","starting the load more QPL event");f=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,e,"MAWFetchMoreMessages"));var s=f.chatId;f=f.chatJid;d("MAWInternalLog").internalLog("MAWFetchSecureMessages: put message range");o(q,"put_message_range","put txn in messages_ranges_v2__generated table");yield b.messages_ranges_v2__generated.put({hasMoreAfter:p.hasMoreAfter,hasMoreBefore:p.hasMoreBefore,isLoadingAfter:p.isLoadingAfter,isLoadingBefore:!0,maxMessageId:p.maxMessageId,maxTimestampMs:p.maxTimestampMs,minMessageId:p.minMessageId,minTimestampMs:p.minTimestampMs,threadKey:p.threadKey});d("MAWInternalLog").internalLog("MAWFetchSecureMessages: loadMoreMsgs started");o(q,"send_loadMoreMsgs_to_backend","calling backend with loadMoreMsgs");var t=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMoreMsgs",{chatJid:f,direction:g,numMsgs:k,offsetMsgId:d("MAWDbMsg").toMsgId(p.minMessageId),threadId:s}));d("MAWInternalLog").internalLog("MAWFetchSecureMessages: response is "+t.hasMoreBefore.toString());r({bool:{hasMoreBefore:t.hasMoreBefore}});if(t.hasMoreBefore){l(q);return}t=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMaybeNextNonAdminMsgSortOrderMs",{mayBeAdminMsgId:d("MAWDbMsg").toMsgId(p.minMessageId),threadId:s}));d("WATagsLogger").TAGS(["labyrinth_web","MAWFetchSecureMessages"]).LOG(i(),f,s,t.minMsgTimestampMs);o(q,"issued_range_query","MAWFetchSecureMessages: minMsgSortOrderTsResponse "+t.minMsgTimestampMs);l(q);return d("MWEncryptedBackupsIssueRangeQueryDeferred").issueRangeQueryDeferred({db:a,newerNumMessages:(h||(h=d("I64"))).zero,numMessages:h.of_int32(k),sortOrderMs:h.of_float(t.minMsgTimestampMs),threadId:s})}if(c("gkx")("24143")&&p!=null&&!p.isLoadingAfter&&g==="after"){o(q,"start_load_more_msgs","starting the load more QPL event");f=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,e,"MAWFetchMoreMessages"));t=f.chatId;s=f.chatJid;d("MAWInternalLog").internalLog("MAWFetchSecureMessages: put message range");yield b.messages_ranges_v2__generated.put({hasMoreAfter:p.hasMoreAfter,hasMoreBefore:p.hasMoreBefore,isLoadingAfter:!0,isLoadingBefore:p.isLoadingBefore,maxMessageId:p.maxMessageId,maxTimestampMs:p.maxTimestampMs,minMessageId:p.minMessageId,minTimestampMs:p.minTimestampMs,threadKey:p.threadKey});d("MAWInternalLog").internalLog("MAWFetchSecureMessages: loadMoreMsgs started");o(q,"send_loadMoreMsgs_to_backend","MAWFetchSecureMessages: loadMoreMsgs started");g=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMoreMsgs",{chatJid:s,direction:"after",numMsgs:k,offsetMsgId:d("MAWDbMsg").toMsgId(p.maxMessageId),threadId:t}));r({bool:{hasMoreAfter:g.hasMoreAfter}});d("MAWInternalLog").internalLog("MAWFetchSecureMessages: response is "+g.hasMoreAfter.toString())}m(q,{bool:{isLoadingAfter:p==null?void 0:p.isLoadingAfter,isLoadingBefore:p==null?void 0:p.isLoadingBefore}});o(q,"already_loading_messages","end the load more QPL event.");l(q)}catch(a){n(q,a)}});return k.apply(this,arguments)}g["default"]=a}),98);
__d("useMAWQPLLogger",["MAWQPLLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a){return i(function(){return c("MAWQPLLogger")(a)},[a])}g.useMAWQPLLogger=a}),98);
__d("MAWFetchMoreMessages",["Int64Hooks","MAWFetchCutoverMessages","MAWFetchSecureMessages","cr:8591","promiseDone","qpl","useMAWQPLLogger","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=(h||(h=c("useReStore")))();return d("Int64Hooks").useCallbackInt64(function(d){c("promiseDone")(c("MAWFetchCutoverMessages")(f,d,a,b))},[f,a,b])}function e(){return d("Int64Hooks").useMemoInt64(function(){return new(b("cr:8591"))()},[])}function f(a){var b=(h||(h=c("useReStore")))(),e=d("useMAWQPLLogger").useMAWQPLLogger(c("qpl")._(25303796,"1974"));return d("Int64Hooks").useCallbackInt64(function(d,f,g,h){return c("MAWFetchSecureMessages")(b,d,f,a,g,h,e)},[b,e,a])}g.useFetchCutoverMessages=a;g.useSecureDataStorage=e;g.useFetchSecureMessages=f}),98);
__d("MAWFetchMoreMessagesWhenEnabled",["cr:1501","cr:7005"],(function(a,b,c,d,e,f,g){"use strict";c=(a=b("cr:7005"))!=null?a:b("cr:1501");d=c;g["default"]=d}),98);
__d("MessengerFilePreviewGenerationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("606");b=d("FalcoLoggerInternal").create("messenger_file_preview_generation",a);e=b;g["default"]=e}),98);
__d("MWFileViewerLogger",["I64","LSIntEnum","MessengerFilePreviewGenerationFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function b(){var b=function(){return Array.from((a.crypto||a.msCrypto).getRandomValues(new Uint32Array(2)))};return(h||(h=d("I64"))).to_string(b())}var j=c("gkx")("24035");function k(a,b){if(j){var e=b.attachment;return c("MessengerFilePreviewGenerationFalcoEvent").log(function(){return{attachment_id:b.attachmentID,entry_point:b.entryPoint,event:a,filesize:e!=null&&e.filesize!=null?(h||(h=d("I64"))).to_string(e.filesize):void 0,filetype:e==null?void 0:e.playableUrlMimeType,message_id:b.messageID.messageId,session_id:b.sessionId,thread_id:(h||(h=d("I64"))).to_string(b.thread.threadKey),thread_type:(i||(i=d("LSIntEnum"))).unwrapIntEnum(b.thread.threadType)}})}}function e(a){return k("file_viewer_direct_download",a)}g.generateSessionId=b;g.logFileViewerDirectDownload=e}),98);
__d("formatFileSize",["fbt"],(function(a,b,c,d,e,f,g,h){var i=[function(a){return h._("__JHASH__eMlnaQRXRvN__JHASH__",[h._param("value",a,[0])])},function(a){return h._("__JHASH__3UzqYHovNJr__JHASH__",[h._param("value",a,[0])])},function(a){return h._("__JHASH___CyxwP2Ni02__JHASH__",[h._param("value",a,[0])])},function(a){return h._("__JHASH__B5cUSs7YWey__JHASH__",[h._param("value",a,[0])])},function(a){return h._("__JHASH__7EGP9din_0A__JHASH__",[h._param("value",a,[0])])},function(a){return h._("__JHASH__ghfLx6_Ho7n__JHASH__",[h._param("value",a,[0])])},function(a){return h._("__JHASH__osT4Py2kL4R__JHASH__",[h._param("value",a,[0])])}],j=0;function a(a,b){b===void 0&&(b=1024);if(a==null)return null;if(a===0)return i[j](0);var c=Math.floor(Math.log(Math.abs(a))/Math.log(b));a=a/Math.pow(b,c);a=Math.round(a*100)/100;return i[c](a)}g["default"]=a}),98);
__d("useMWFileOnPress",["MWFileViewerLogger","ReQL","asyncToGeneratorRuntime","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(a,e,f,g,i){var k=(h||(h=c("useReStore")))();return j(function(h){f==null?void 0:f(h),c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b,c=(yield (b=d("ReQL")).firstAsync(b.fromTableAscending(k.table("threads")).getKeyRange(a.threadId)));b=(yield b.firstAsync(b.fromTableAscending(k.table("attachments")).getKeyRange(a.threadId,a.messageId)));if(c){b={attachment:b,attachmentID:e,entryPoint:g,messageID:a,sessionId:i,thread:c};d("MWFileViewerLogger").logFileViewerDirectDownload(b)}})())},[f,k,a,e,g,i])}g["default"]=a}),98);
__d("MAWFilePressable.react",["fbt","CometErrorBoundary.react","FBLogger","I64","MAWAttachmentBlob.react","MWChatMessageId","MWFileViewerLogger","MWXPressable.react","formatFileSize","goUriOnNewWindow","react","useMWFileOnPress"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react")),l=i.useCallback,m={filePressable:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},n=h._("__JHASH__uiTAWyhPCWI__JHASH__");function o(a){return a.filesize==null?null:c("formatFileSize")((j||(j=d("I64"))).to_int32(a.filesize))}function p(a){var b=a.children,d=a.linkProps,e=a.onPress;a=a.testid;return k.jsx(c("MWXPressable.react"),{display:"inline",linkProps:d,onPress:e,overlayDisabled:!0,testid:void 0,xstyle:m.filePressable,children:b})}p.displayName=p.name+" [from "+f.id+"]";function q(a){var b=a.attachmentID,e=a.children,f=a.entrypoint,g=a.linkProps,h=a.messageID,i=a.onPress;a=a.testid;a=c("useMWFileOnPress")(h,b,i,f,d("MWFileViewerLogger").generateSessionId());return k.jsx(p,{linkProps:g,onPress:a,testid:void 0,children:e})}q.displayName=q.name+" [from "+f.id+"]";function a(a){var b=a.children,e=a.entrypoint,f=a.file,g=a.onPress;a=a.testid;a=((a=f.filename)!=null?a:n).toString();var h=d("MAWAttachmentBlob.react").getAttachmentBlob(f,"MAWFilePressable"),i=d("MWChatMessageId").makeSent((j||(j=d("I64"))).to_string(f.threadKey),f.messageId,j.to_string(f.timestampMs)),m={download:a,target:"_blank",url:h},r=o(f),s=l(function(a,b){c("FBLogger")("rpp_file_viewer","cannot_load_entry_point").mustfix(a.message||"Cannot open file viewer in "+b),c("goUriOnNewWindow")(h)},[h]);return i.type==="sent"?k.jsx(c("CometErrorBoundary.react"),{onError:s,children:k.jsx(q,{attachmentID:f.attachmentFbid,entrypoint:e,linkProps:m,messageID:i.value,onPress:g,testid:void 0,children:b({filename:a,messageID:i,size:r})})}):k.jsx(p,{linkProps:m,onPress:g,testid:void 0,children:b({filename:a,messageID:i,size:r})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWMediaManagerUtilsDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("MAWMediaManagerUtils").__setRef("MAWMediaManagerUtilsDeferred");b=a;g["default"]=b}),98);
__d("MAWMiActMaybeCreateActThread",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSVerifyE2EEMetadataThreadExistsV2StoredProcedure","MAWCreateGroupThread","MAWCreateOneToOneThread","MAWMiActCreateThreadInActWithMiData","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){return a.runInTransaction(function(a){return c("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure")(c("LSFactory")(a),{authorityLevel:(h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),threadKey:b,threadType:h.ofNumber(15)}).then(function(){})},"readwrite")}function k(a,b,e){if(e==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Could not create optimistic thread because data was null\n      for threadKey: %s",(i||(i=d("I64"))).to_string(b.threadKey));var f=e.actorId;e=e.participantIds;var g=e.filter(function(a){return a!==(i||(i=d("I64"))).to_string(f)});if(d("LSMessagingThreadTypeUtil").isOneToOne(b.threadType)&&(g.length===1||c("gkx")("23988"))){var j=g.length===1?g:e;return d("MAWCreateOneToOneThread").call(a,(i||(i=d("I64"))).of_string(j[0]),i.to_string(b.threadKey),"maybeCreateActThread")}else if(d("LSMessagingThreadTypeUtil").isGroup(b.threadType)&&g.length>1)return c("MAWCreateGroupThread")({db:a,offlineThreadingId:b.threadKey,participantIds:e});throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Did not know which type of optimistic thread to create for\n    threadKey: %s, participantsCount: %s, threadType: %s",(i||(i=d("I64"))).to_string(b.threadKey),e.length,(h||(h=d("LSIntEnum"))).toNumber(b.threadType))}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("MAWMiActCreateThreadInActWithMiData").miActCreateThreadInActWithMiData(a.serverThreadKey,a.jidInt64,a.thread.lastActivityTimestampMs,a.thread.lastReadWatermarkTimestampMs,d("LSMessagingThreadTypeUtil").isGroup(a.thread.threadType)));return{chatId:a.chatId,created:a.isCreated,jid:a.chatJid}});return m.apply(this,arguments)}var n=new Map();function a(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByThreadKey(a.tables,b,"maybeCreateActThread"));switch(f.type){case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY:yield j(a,b);throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] We did not call MiActLoadExistingThread for threadKey: %s, threadState: %s",(i||(i=d("I64"))).to_string(b),f.type);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] MI inserted the thread but the mapping row was not\n        written or it was deleted for threadKey: %s",(i||(i=d("I64"))).to_string(b));case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:var g=(i||(i=d("I64"))).to_string(b),h=n.get(g);if(h!=null)return h;h=k(a,f.thread,e);n.set(g,h);return h;case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT:yield j(a,b);return{chatId:f.chatId,created:!1,jid:f.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:return{chatId:f.chatId,created:!1,jid:f.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:return l(f);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:return{chatId:f.chatId,created:!1,jid:f.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY_BY_CHAT_ID:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY_BY_JID:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unhandled ACT thread creation state %s for threadKey:\n        %s",f.type,(i||(i=d("I64"))).to_string(b));default:f.type;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable miActThreadState.type: %s",f.type)}});return o.apply(this,arguments)}g["default"]=a}),98);
__d("MAWOptimisticUpdateContactRelationship",["I64","LSAddMessengerContactStoredProcedure","LSFactory","LSMessagingThreadTypeUtil","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f){if(!d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType))return;c("promiseDone")(e.runInTransaction(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var g;g=(g=(yield d("ReQL").firstAsync(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.tables.contacts)).filter(function(a){a[0];a=a[1];return!(h||(h=d("I64"))).equal(a.id,f)}))))!=null?g:[void 0,void 0];g[0];g=g[1];if(g==null)return;var i=babelHelpers["extends"]({},g,{contactViewerRelationship:(h||(h=d("I64"))).of_string("2")});yield b.contacts.upsert([g.id],i);d("LSMessagingThreadTypeUtil").isSecure(a.threadType)&&(yield c("LSAddMessengerContactStoredProcedure")(c("LSFactory")(b),{contactId:g.id}))});return function(a){return g.apply(this,arguments)}}(),"readwrite"))}g.call=a}),98);
__d("MAWSecureThreadNonAddressableContactBannerCloseButton.react",["MWXPressable.react","fbs","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.onPress;return i.jsx("div",{className:"x1923su1 x10l6tqk xfr5jun x1vjfegm",children:i.jsx(c("MWXPressable.react"),{"aria-label":c("fbs")._("__JHASH__cwU_O5_fD5E__JHASH__"),onPress:a,overlayRadius:"50%",children:i.jsxs("svg",{height:"18px",viewBox:"0 0 24 24",width:"18px",children:[i.jsx("title",{children:c("fbs")._("__JHASH__lJTlDYURTnq__JHASH__")}),i.jsx("line",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",x1:"6",x2:"18",y1:"6",y2:"18"}),i.jsx("line",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",x1:"6",x2:"18",y1:"18",y2:"6"})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMAWNonAddressableParticipant",["I64","LSAuthorityLevel","LSIntEnum","LSWhatsAppConnectStatus","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b,e,g=(j||(j=c("useReStore")))(),k=d("MWPActor.react").useActor(),l=d("ReQLSuspense").useFirst(function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(g.tables.participants,[]).getKeyRange(a),d("ReQL").fromTableAscending(g.tables.contacts,["waConnectStatus","authorityLevel","id","name","firstName"])).filter(function(a){a[0];a=a[1];if((h||(h=d("I64"))).equal(a.waConnectStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSWhatsAppConnectStatus").WHATSAPP_NOT_ADDRESSABLE))&&(h||(h=d("I64"))).ge(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT)))return!(h||(h=d("I64"))).equal(a.id,k);else return!1}).map(function(a){a[0];a=a[1];return a})},[g,a,k],f.id+":29");b=((b=l==null?void 0:l.firstName)!=null?b:"")===""?null:l==null?void 0:l.firstName;e=((e=l==null?void 0:l.name)!=null?e:"")===""?null:l==null?void 0:l.name;e=(b=(b=b)!=null?b:e)!=null?b:"recipient";return[l!=null,e]}g["default"]=a}),98);
__d("useWAINonAddressableParticipant",["I64","MAWBridgeSendAndReceive","ODS","ReQL","ReQLSuspense","WAJids","WALogger","gkx","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["occam_reachable_with_no_wai_devices in ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["occam_not_reachable_with_wai_devices in ",""]);m=function(){return a};return a}b=k||d("react");var n=b.useEffect,o=b.useState;function a(a){var b=a.hasNonAddressableParticipant,e=a.isGroup,g=a.threadKey,k=(h||(h=c("useReStore")))();a=o(null);var p=a[0],q=a[1],r=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(k.tables.participants,["contactId"]).getKeyRange(g).map(function(a){a=a.contactId;return d("WAJids").toMsgrUserJid((i||(i=d("I64"))).to_string(a))})},[k,g],f.id+":41");n(function(){if(!c("gkx")("483"))return;c("promiseDone")(d("MAWBridgeSendAndReceive").sendAndReceive("backend","getWAIDevices",{users:r}).then(function(a){var c=!0;for(var f=0;f<r.length;f++){var g=r[f];if(!a.has(g)){c=!1;break}else if(((g=a.get(g))==null?void 0:g.length)===0){c=!1;break}}b&&!c?((j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_composer","occam_not_reachable_with_wai_devices in "+(e?"group":"1:1")),d("WALogger").DEV(m(),e?"group":"1:1")):b&&c&&((j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_composer","occam_reachable_with_no_wai_devices in "+(e?"group":"1:1")),d("WALogger").DEV(l(),e?"group":"1:1"));q(c)}))},[b,e,r]);return p}g.useHasWAIDevices=a}),98);
__d("MAWSecureThreadNonAddressableContactBanner.react",["fbt","IntlVariations","LSMessagingThreadTypeUtil","MAWSecureThreadNonAddressableContactBannerCloseButton.react","MWXRow.react","MWXRowItem.react","MWXText.react","fbs","react","useMAWNonAddressableParticipant","useWAINonAddressableParticipant"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useState;function a(a){var b=a.setHideComposerEditor;a=a.thread;var e=c("useMAWNonAddressableParticipant")(a.threadKey),f=e[0];e=e[1];d("useWAINonAddressableParticipant").useHasWAIDevices({hasNonAddressableParticipant:f,isGroup:d("LSMessagingThreadTypeUtil").isGroup(a.threadType),threadKey:a.threadKey});var g=l(!1),i=g[0],m=g[1];g=k(function(){return m(!0)},[m]);var n=d("LSMessagingThreadTypeUtil").isGroup(a.threadType);i=n?!i:!0;var o=f&&i;b(function(){if(o)return!n;else return!1});f=c("IntlVariations").GENDER_UNKNOWN;i=h._("__JHASH__9vfr7-Uns9r__JHASH__",[h._name("message recipient name",e,f)]);b=h._("__JHASH__J_HXGmiXLis__JHASH__",[h._name("message recipient name",e,f)]);if(o)return j.jsxs("div",{className:"x1exxf4d x13fuv20 x178xt8z x1n2onr6 x1ja2u2z",children:[n?j.jsx(c("MAWSecureThreadNonAddressableContactBannerCloseButton.react"),{onPress:g}):null,j.jsx(c("MWXRow.react"),{align:"center",expanding:!0,paddingVertical:12,spacingVertical:0,testid:void 0,children:j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXText.react"),{color:"primary",type:"headlineEmphasized4",children:d("LSMessagingThreadTypeUtil").isGroup(a.threadType)?c("fbs")._("__JHASH___yUMmqEez-U__JHASH__"):i})})}),j.jsx(c("MWXRow.react"),{align:"center",expanding:!0,paddingVertical:4,spacingVertical:4,testid:void 0,children:j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:d("LSMessagingThreadTypeUtil").isGroup(a.threadType)?c("fbs")._("__JHASH__ixaC9ybh3Q8__JHASH__"):b})})})]});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureTypingState",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MAWBridgeFireAndForget","MAWJids","MAWMiActOnActThreadReady","MWPActor.react","MessengerWebUXLogger","Promise","ReQL","WAChatState","asyncToGeneratorRuntime","gkx","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){if(!(j||(j=d("I64"))).equal(f,(k||(k=d("LSIntEnum"))).ofNumber(15)))return(i||(i=b("Promise"))).resolve(!0);f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(e).filter(function(a){return!(j||(j=d("I64"))).equal(a.contactId,g)})));if(f==null)return!1;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(f.contactId)));return e==null?!1:(j||(j=d("I64"))).equal(e.blockedByViewerStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))});return m.apply(this,arguments)}var n=[];function a(a,e,f){var g=(h||(h=c("useReStore")))(),m=d("MWPActor.react").useActor(),o=(j||(j=d("I64"))).to_string(e),p=c("MessengerWebUXLogger").useInteractionLogger();return d("Int64Hooks").useCallbackInt64(function(h){(j||(j=d("I64"))).ge(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&d("LSMessagingThreadTypeUtil").isSecure(f)&&(c("gkx")("24137")&&d("LSMessagingThreadTypeUtil").isGroup(f)&&!n.includes(o)&&c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(g.tables,e,"MAWSecureTypingState",function(a,c,e){d("MAWBridgeFireAndForget").fireAndForget("backend","preEstablishSession",{groupJid:d("MAWJids").toGroupJid(e)});n.push(o);return(i||(i=b("Promise"))).resolve()})),c("promiseDone")(l(g,e,f,m).then(function(a){return!a?(i||(i=b("Promise"))).resolve():d("MAWMiActOnActThreadReady").onActThreadReady(g.tables,e,"MAWSecureTypingState",function(a,c,g){p==null?void 0:p({eventName:"send_typing_indicators",threadKey:e,threadType:f});d("MAWBridgeFireAndForget").fireAndForget("backend","sendChatStateFromComposer",{state:h?d("WAChatState").TYPING:d("WAChatState").IDLE,threadId:c});return(i||(i=b("Promise"))).resolve()})})))},[g,a,e,f,m,o,p])}g.useOnTypingStateChanged=a}),98);
__d("MAWSupportedFileTypes",[],(function(a,b,c,d,e,f){"use strict";a=["*/*"];f.supportedFileTypes=a}),66);
__d("MWXMessageTextWithEntities.react",["cr:5671","cr:5867","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){if(b("cr:5671")!=null)return i.jsx(b("cr:5671"),babelHelpers["extends"]({},a));if(b("cr:5867")!=null){var c=a.seeLessLinkProps,d=a.seeMoreLinkProps;a=babelHelpers.objectWithoutPropertiesLoose(a,["seeLessLinkProps","seeMoreLinkProps"]);c=(c=c)!=null?c:{};var e=c.color;c=babelHelpers.objectWithoutPropertiesLoose(c,["color"]);d=(d=d)!=null?d:{};var f=d.color;d=babelHelpers.objectWithoutPropertiesLoose(d,["color"]);return i.jsx(b("cr:5867"),babelHelpers["extends"]({seeLessLinkProps:babelHelpers["extends"]({color:e==="primary"?"primary":void 0},c),seeMoreLinkProps:babelHelpers["extends"]({color:f==="primary"?"primary":void 0},d)},a))}return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatReplyText.react",["fbt","MWChatTextFormatting","MWChatTextTransform","MWXMessageTextWithEntities.react","cr:2472","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var e=a.isHotLike;e=e===void 0?!1:e;var f=a.ranges,g=a.text;a=a.transformEmoticons;a=a===void 0?!0:a;g=b("cr:2472")==null?g:b("cr:2472").unvault(g);var i=h._("__JHASH__fJLp3hO2Ffq__JHASH__").toString();return j.jsx("div",{className:"xi81zsa",dir:"auto",children:j.jsx(c("MWXMessageTextWithEntities.react"),{maxLength:120,maxLines:2,ranges:f,renderers:{MessengerTextFormatting:[d("MWChatTextFormatting").messageRenderer]},text:e?i:g,transforms:a?d("MWChatTextTransform").epdTextTransformsNoVault:[],truncationStyle:"ellipsis-only",withParagraphs:!1})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerReplyView.react",["fbt","ix","CometErrorBoundary.react","CometTriggerAccessibilityAlertContext","I64","LSContactGenderToGenderConst","LSHotEmojiSize","LSIntEnum","LSMessagingThreadTypeUtil","LsFalcoEventEntryPoint","LsReplyRenderedFalcoEvent","MWCMIsAnyCMThread","MWChatReplyText.react","MWPActor.react","MWPReplyContext.react","MWXIcon.react","MWXText.react","MWXTextPairing.react","MessagingAttachmentType","ReQL","ReQLSuspense","cr:2472","cr:6796","fbicon","getFBTSafeGenderFromGenderConst","react","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=k||(k=d("react"));e=k;var o=e.useContext,p=e.useEffect;function q(a,e,f){var g=a.text;g=g!=null?b("cr:2472")==null?g:b("cr:2472").unvault(g):"";g=g==="\ud83d\udc4d"&&((l||(l=d("I64"))).equal((g=a.hotEmojiSize)!=null?g:(l||(l=d("I64"))).neg_one,(m||(m=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))||(l||(l=d("I64"))).equal((g=a.hotEmojiSize)!=null?g:(l||(l=d("I64"))).neg_one,(m||(m=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM))||(l||(l=d("I64"))).equal((g=a.hotEmojiSize)!=null?g:(l||(l=d("I64"))).neg_one,(m||(m=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))&&e;if(a.isUnsent)return h._("__JHASH__OtyP2J0Nwkd__JHASH__");if(a.text!=null&&a.text!==""){return n.jsx(c("MWChatReplyText.react"),{isHotLike:g,text:(e=a.text)!=null?e:h._("__JHASH__C1Hm6KH3mNE__JHASH__")})}if(f!=null){if((l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return h._("__JHASH__vuq_ksOZBHO__JHASH__");if((l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return h._("__JHASH__7zoxdliwH6N__JHASH__");if((l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__d9ky9I-E6BP__JHASH__");return(l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))?h._("__JHASH__i96Qg8bFARm__JHASH__"):h._("__JHASH__L554Fq7JwGo__JHASH__")}return h._("__JHASH__C1Hm6KH3mNE__JHASH__")}function r(a,b,d,e){if(a)return h._("__JHASH__iW_IRrZDexS__JHASH__");if(b!=null){return h._("__JHASH__O5URXTVzEEM__JHASH__",[h._param("name",n.jsx(c("MWXText.react"),{type:"headlineEmphasized5",children:e?b.name:(e=(a=d)!=null?a:b.firstName)!=null?e:b.name}),[1,c("getFBTSafeGenderFromGenderConst")(c("LSContactGenderToGenderConst")(b.gender))])])}return h._("__JHASH__Y3usjYXlLYK__JHASH__",[h._param("Placeholder for an unknown user","Facebook User")])}function s(a){var b=a.isSecureThread,e=a.message;a=a.useContactFullname;var g=(j||(j=c("useReStore")))(),h=d("MWPActor.react").useActor(),i=(l||(l=d("I64"))).equal(e.senderId,h),k=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(e.senderId)},[g,e.senderId],f.id+":218");h=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.attachments).getKeyRange(e.threadKey,e.messageId)},[g,e.messageId,e.threadKey],f.id+":223");var m=d("ReQLSuspense").useFirst(function(){return k!=null&&!i?d("ReQL").fromTableAscending(g.tables.threads).getKeyRange(e.threadKey).map(function(a){var b=a.parentThreadKey;a=a.threadType;if(c("MWCMIsAnyCMThread")(a))return d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.community_folders).getKeyRange(b).map(function(a){a=a.folderId;return d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.contextual_profile_v1.index("associatedEntityIdAndOwner")).getKeyRange(a,k.id).map(function(a){return a.profileName}),f.id+":242")}),f.id+":238");else{a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.participants).getKeyRange(e.threadKey,k.id),f.id+":256");return(b=a==null?void 0:a.nickname)!=null?b:null}}):d("ReQL").empty()},[g,e.threadKey,k,i],f.id+":232");p(function(){c("LsReplyRenderedFalcoEvent").log(function(){return{funnel:{entry_point:d("LsFalcoEventEntryPoint").messageActions}}})},[]);b=q(e,b,h);h=r(i,k,m,a);return n.jsx("div",{className:"xmo9yow",children:n.jsx(c("MWXTextPairing.react"),{body:b,headline:h,level:4})})}s.displayName=s.name+" [from "+f.id+"]";function t(a){var e=a.isSecureThread;e=e===void 0?!1:e;var f=a.message;a=a.useContactFullname;var g=o(d("MWPReplyContext.react").MWPReplyContext),j=g.clearReply,k=o(c("CometTriggerAccessibilityAlertContext"));g=(g=b("cr:6796")(!0))==null?void 0:g.backgroundColor;return n.jsxs("div",{className:"x1cy8zhl xcrg951 x8cjs6t x13fuv20 x178xt8z x78zum5 x1qughib xg8j3zb x14uny0o xvpee5o x889kno","data-testid":void 0,style:g!=null?{backgroundColor:g}:void 0,children:[n.jsx(c("CometErrorBoundary.react"),{fallback:function(){return n.jsx(c("MWXText.react"),{type:"headlineEmphasized4",children:h._("__JHASH__viMkwR52t0r__JHASH__")})},children:n.jsx(s,{isSecureThread:e,message:f,useContactFullname:a})}),n.jsx(c("MWXIcon.react"),{"aria-label":h._("__JHASH__jHl6Cj_8ioz__JHASH__"),color:"primary",icon:d("fbicon")._(i("478231"),12),onPress:function(){j(f.threadKey,!0),k(h._("__JHASH__I4cDESLQyuo__JHASH__").toString(),{assertive:!1})}})]})}t.displayName=t.name+" [from "+f.id+"]";function a(a){var b=a.messageId,e=a.messageTimestamp,g=a.thread;a=a.useContactFullname;a=a===void 0?!1:a;var h=(j||(j=c("useReStore")))(),i=d("LSMessagingThreadTypeUtil").isSecure(g.threadType),k=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(h.tables.messages).getKeyRange(g.threadKey,e,b)},[h,g.threadKey,b,e],f.id+":356");if(k!=null)return n.jsx(t,{isSecureThread:i,message:k,useContactFullname:a});else return null}a.displayName=a.name+" [from "+f.id+"]";g.MWV2ComposerReplyViewContainer=t;g.MWV2ComposerReplyView=a}),98);
__d("MWPAudioPlayerIcons.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.color;return i.jsx("svg",{"aria-hidden":!0,height:"24px",viewBox:"0 0 36 36",width:"24px",children:i.jsx("path",{d:"M10 25.5v-15a1.5 1.5 0 012.17-1.34l15 7.5a1.5 1.5 0 010 2.68l-15 7.5A1.5 1.5 0 0110 25.5z",fill:a})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){a=a.color;return i.jsx("svg",{"aria-hidden":!0,height:"24px",viewBox:"0 0 36 36",width:"24px",children:i.jsx("rect",{fill:a,height:"18",rx:"2",width:"18",x:"9",y:"9"})})}b.displayName=b.name+" [from "+f.id+"]";function c(a){a=a.color;return i.jsx("svg",{"aria-hidden":!0,height:"24px",viewBox:"0 0 36 36",width:"24px",children:i.jsx("path",{d:"M11 8.5c-.83 0-1.5.67-1.5 1.5v16c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5V10c0-.83-.67-1.5-1.5-1.5h-4zM21 8.5c-.83 0-1.5.67-1.5 1.5v16c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5V10c0-.83-.67-1.5-1.5-1.5h-4z",fill:a})})}c.displayName=c.name+" [from "+f.id+"]";g.PlayIcon=a;g.StopIcon=b;g.PauseIcon=c}),98);
__d("MWPAudioPlaybackIcon.react",["MWPAudioPlayerIcons.react","MWPAudioPlayerUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.disabled,c=a.hasEnded,e=a.isPaused,f=a.isPlaying;a=a.outgoing;var g=d("MWPAudioPlayerUtils").useShowNewUX();g=g?a?"var(--always-white)":"var(--progress-ring-neutral-foreground)":a?"var(--chat-outgoing-message-bubble-background-color)":void 0;if(f)return i.jsx(d("MWPAudioPlayerIcons.react").PauseIcon,{color:g});return e||c||b?i.jsx(d("MWPAudioPlayerIcons.react").PlayIcon,{color:g}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPAudioPlayerSharedStyles",[],(function(a,b,c,d,e,f,g){"use strict";a={bar:{backgroundColor:"x14hiurz",borderTopStartRadius:"x1inr27j",borderTopEndRadius:"x1vcqv9c",borderBottomEndRadius:"xfrm7hi",borderBottomStartRadius:"xpbad92",boxShadow:"x49dmcg",height:"xn3w4p2",position:"x10l6tqk",top:"xwa60dl",transform:"x1cb1t30",width:"x51ohtg",zIndex:"x1vjfegm",$$css:!0},common:{alignItems:"x6s0dn4",alignSelf:"xkh2ocl",backgroundAttachment:"x1nr1p0w",borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"x1qughib",outline:"x1k4qllp",$$css:!0},commonIncoming:{backgroundColor:"x1xr0vuk",$$css:!0},commonOutgoing:{backgroundColor:"x11jlvup",$$css:!0},commonOutgoingReply:{backgroundImage:"xl54vp5",$$css:!0},commonReply:{outline:"x1ucz5p",$$css:!0},container:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"x1qughib",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},highlight:{height:"x5yr21d",position:"x10l6tqk",start:"x17qophe",left:null,right:null,top:"x13vifvy",width:"xh8yej3",$$css:!0},incomingWaveFormStyle:{fill:"x1f9y4dh",$$css:!0},mask:{height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},outgoingWaveFormStyle:{fill:"xe3v8dz",$$css:!0},playbackButtonContainer:{marginStart:"x1mnrxsn",marginLeft:null,marginRight:null,marginEnd:"x1w0mnb",$$css:!0},pressable:{alignItems:"x6s0dn4",backgroundColor:"x14hiurz",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",display:"x78zum5",height:"xxk0z11",justifyContent:"xl56j7k",minWidth:"xnei2rj",$$css:!0},rightSideBottom:{backgroundColor:"x14hiurz",borderTopStartRadius:"xfj52jq",borderTopEndRadius:"xykzs3s",borderBottomEndRadius:"x17xv1ja",borderBottomStartRadius:"x1mvicbb",$$css:!0},rightSideImprove:{marginStart:"x16n37ib",marginLeft:null,marginRight:null,marginEnd:"xq8finb",width:"x1691je0",$$css:!0},rightSideMargin:{marginTop:"x1gslohp",$$css:!0},rightSideTop:{alignItems:"x6s0dn4",color:"x1a3ma36",display:"x78zum5",fontSize:"x1nxh6w3",fontWeight:"x1s688f",height:"xi0exxh",justifyContent:"xl56j7k",marginStart:"x1mnrxsn",marginLeft:null,marginRight:null,marginEnd:"x1w0mnb",position:"x1n2onr6",userSelect:"x87ps6o",width:"x1r9kitl",$$css:!0},scrubber:{alignItems:"x6s0dn4",display:"x78zum5",height:"x5yr21d",position:"x1n2onr6",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0},transparent:{height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",position:"x1n2onr6","::after_borderTopColor":"x14617ij","::after_borderEndColor":"x1b5s2of","::after_borderBottomColor":"xv84cap","::after_borderStartColor":"x15ngzmr","::after_borderTopStartRadius":"xwuuf8d","::after_borderTopEndRadius":"xpd6q6o","::after_borderBottomEndRadius":"x1n6g0fn","::after_borderBottomStartRadius":"xu4xob7","::after_borderTopStyle":"xynf4tj","::after_borderEndStyle":"xdspwft","::after_borderBottomStyle":"x1r9ni5o","::after_borderStartStyle":"x1d52zm6","::after_borderTopWidth":"x1gnji40","::after_borderEndWidth":"xymhjbi","::after_borderBottomWidth":"x1ekxc0f","::after_borderStartWidth":"x5arhyh","::after_bottom":"x14apmda","::after_content":"x1s928wv","::after_display":"xhkezso","::after_end":"xhyvd7x","::after_left":null,"::after_right":null,"::after_pointerEvents":"x2q1x1w","::after_position":"x1j6awrg","::after_start":"x1aneyt","::after_top":"xso615a",$$css:!0},transparentBar:{backgroundColor:"xjbqb8w",borderTopStartRadius:"x1inr27j",borderTopEndRadius:"x1vcqv9c",borderBottomEndRadius:"xfrm7hi",borderBottomStartRadius:"xpbad92",boxShadow:"x49dmcg",height:"xn3w4p2",position:"x10l6tqk",top:"xwa60dl",transform:"x1cb1t30",width:"x51ohtg",zIndex:"x1vjfegm",$$css:!0},waveform:{height:"xn3w4p2",position:"x1n2onr6",width:"xh8yej3",$$css:!0}};g.styles=a}),98);
__d("MWPAudioPlayerButtons.react",["MWPAudioPlaybackContext.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerUtils","MWXPressable.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){a=a.outgoing;var b=d("MWPAudioPlayerUtils").useShowNewUX(),e=d("MWPAudioPlaybackContext.react").useMWPAudioPlaybackRate(),f=e[0];e=e[1];if(!b)return null;b=a?"var(--always-white)":"var(--progress-ring-neutral-foreground)";return j.jsx(c("MWXPressable.react"),{onPress:e,overlayDisabled:!0,children:j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.rightSideTop,d("MWPAudioPlayerSharedStyles").styles.rightSideMargin,d("MWPAudioPlayerSharedStyles").styles.rightSideBottom,d("MWPAudioPlayerSharedStyles").styles.rightSideImprove),style:{backgroundColor:"var(--placeholder-text-on-media)",borderRadius:10,color:b},children:f})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.disabled,e=a.icon,f=a.label;a.onHoverMove;a=a.onPress;var g=d("MWPAudioPlayerUtils").useShowNewUX(),h=g?{backgroundColor:"transparent"}:{};return j.jsx(c("MWXPressable.react"),{"aria-label":f,disabled:b,onPress:a,overlayDisabled:g,overlayRadius:"50%",style:h,testid:void 0,xstyle:d("MWPAudioPlayerSharedStyles").styles.pressable,children:e})}b.displayName=b.name+" [from "+f.id+"]";g.PlaybackRateButton=a;g.AudioPlayerPlaybackButton=b}),98);
__d("MWPAudioPlayerLabels",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=h._("__JHASH__KhMMxBdqg3x__JHASH__");b=h._("__JHASH__2rBFW-RfRDV__JHASH__");c=h._("__JHASH__IubwmxlTNhe__JHASH__");g.playLabel=a;g.stopLabel=b;g.pauseLabel=c}),98);
__d("MWPAudioPlaybackButton.react",["MWPAudioPlaybackIcon.react","MWPAudioPlayerButtons.react","MWPAudioPlayerLabels","MWPAudioPlayerSharedStyles","MWPAudioPlayerUtils","MWXSpinner.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var b=a.isLoading,e=a.onPress,f=a.scrubberRef,g=a.disabled,i=a.hasEnded,k=a.isPaused,l=a.isPlaying;a=a.outgoing;var m=d("MWPAudioPlayerUtils").usePlaybackButtonContainerStyle();f=d("MWPAudioPlayerUtils").useResetHighlightProgress(f);var n=l||k;return b?j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.pressable),onMouseMove:n?f:void 0,style:m,children:j.jsx(c("MWXSpinner.react"),{color:"disabled",size:16})}):j.jsx("div",{onMouseMove:n?f:void 0,style:m,children:j.jsx(d("MWPAudioPlayerButtons.react").AudioPlayerPlaybackButton,{disabled:g,icon:j.jsx(c("MWPAudioPlaybackIcon.react"),{disabled:g,hasEnded:i,isPaused:k,isPlaying:l,outgoing:a}),label:l?d("MWPAudioPlayerLabels").pauseLabel:d("MWPAudioPlayerLabels").playLabel,onPress:e})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPAudioPlayerContainer.react",["MWPAudioPlayerSharedStyles","MWPAudioPlayerUtils","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useRef;function a(a){var b=a.audioEl,e=a.children,f=a.hasScrubber,g=a.scrubberRef,i=a.style,l=a.testid;l=a.useCase;a=d("MWPAudioPlayerUtils").useShowNewUX();var m=k(),n=function(a){var c=b.current,e=m.current;c!=null&&e!=null&&Number.isFinite(c.duration)&&(c.currentTime=d("MWPAudioPlayerUtils").getMousePos(a,e)*c.duration)},o=function(a){if(m.current!=null&&g.current!=null)return g.current.updateHighlight(d("MWPAudioPlayerUtils").getMousePos(a,m.current)*100)},p=function(){if(g.current!=null)return g.current.updateHighlight(0)};i=babelHelpers["extends"]({cursor:f?"pointer":"default",height:a&&l===d("MWPAudioPlayerUtils").UseCase.PLAYER?70:36},i);a=f&&!a;return j.jsx(d("MWPAudioPlayerUtils").UseCaseContext.Provider,{value:l,children:j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.container),"data-testid":void 0,onClick:a?n:void 0,onMouseLeave:f?p:void 0,onMouseMove:a?o:void 0,ref:m,style:i,children:e})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPAudioPlayerScrubberBar.react",["fbt","MWPAudioPlayerSharedStyles","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));j.forwardRef;b=k.forwardRef(a);e=b;function a(a,b){var e=a.xPosition,f=a.currentTime;a=a.duration;return k.jsx("div",{"aria-label":h._("__JHASH__cCPjPb_WWZb__JHASH__"),"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":f,className:(i||(i=c("stylex")))(f===0?d("MWPAudioPlayerSharedStyles").styles.transparentBar:d("MWPAudioPlayerSharedStyles").styles.bar),ref:b,role:"slider",style:{left:e.toFixed(2)+"%"}})}a.displayName=a.name+" [from "+f.id+"]";b=e;g["default"]=b}),98);
__d("MWChatRecorderUtils",["DateConsts"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.reduce(function(a,b){return a+b.length},0)}function a(a){var b=h(a),c=new Float32Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.length},0);return c}function b(a,b){var c=h([a,b]);return new Float32Array(c).map(function(c,d){c=Math.floor(d/2);if(d%2===0)return a[c];else return b[c]})}function i(a,b,c){c.forEach(function(c,d){c=Math.max(-1,Math.min(1,c));d=b+(d<<1);c=c<0?Math.abs(c)*-32768:Math.abs(c)*32767;a.setInt16(d,c,!0)})}function j(a,b,c){Array.from(c).forEach(function(d,e){d=c.charCodeAt(e);a.setUint8(b+e,d)})}function k(a){var b=a.numberOfChannels,c=a.sampleRate;a=a.samples;var d=a.length;d=d<<1;var e=new ArrayBuffer(44+d);e=new DataView(e);j(e,0,"RIFF");e.setUint32(4,36+d,!0);j(e,8,"WAVE");j(e,12,"fmt ");e.setUint32(16,16,!0);e.setUint16(20,1,!0);e.setUint16(22,b,!0);e.setUint32(24,c,!0);e.setUint32(28,c*b*2,!0);e.setUint16(32,b*2,!0);e.setUint16(34,16,!0);j(e,36,"data");e.setUint32(40,d,!0);i(e,44,a);return e}function c(a){var b=a.numberOfChannels,c=a.sampleRate;a=a.samples;b=k({numberOfChannels:b,sampleRate:c,samples:a});return new File([b],"audio_clip.wav",{type:"audio/wav"})}function e(a){var b=a.numberOfChannels,c=a.sampleRate;a=a.samples;var e=Float32Array.BYTES_PER_ELEMENT;a=a.byteLength/e/b;return a/c%d("DateConsts").SEC_PER_MIN}function l(a,b,c){return a+(b-a)*c}function f(a,b){var c=new Array(Math.ceil(b));if(b===0||a.length===0)return c;if(b===a.length)return Array.from(a);if(a.length===1)return c.fill(a[0]);c[0]=a[0];var d=(a.length-1)/(b-1);for(var e=1;e<b;e++){var f=e*d,g=Math.floor(f),h=Math.ceil(f);f=f-g;c[e]=l(a[g],a[h],f)}b>=2&&(c[c.length-1]=a[a.length-1]);return c}function m(a,b,c){var d=Math.min.apply(Math,a),e=Math.max.apply(Math,a),f=e-d,g=c-b;return a.map(function(a){return(a-d)/f*g+b})}g.getTotalBuffersLen=h;g.flattenBuffer=a;g.interleave=b;g.exportWAV=c;g.getAudioDuration=e;g.computeWaveformAmplitudes=f;g.linearConversion=m}),98);
__d("MWPAudioPlayerWaveform.react",["MWChatRecorderUtils","MWPAudioPlayerSharedStyles","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useLayoutEffect,l=b.useMemo,m=b.useRef,n=b.useState,o=Float32Array.of(.5,.1875,.375,.75,.5,1,1,.75,.25,.375,.75,1,1,.5,.75,1,.75,.75,.5,.25,.25,.375,.5,1,.75,.5,.5,.75,.25,.5,.75,1,.5,.25,.75),p=3,q=3,r=44,s=4;function t(a,b){var c=l(function(){return a==null||a===""?o:Float32Array.from(a.split(",").map(Number))},[a]);return l(function(){if(b<=0||c.length===0)return[];var a=Math.floor(b/(q*2));a=d("MWChatRecorderUtils").linearConversion(d("MWChatRecorderUtils").computeWaveformAmplitudes(c,a),s,r);return a.map(function(a,b){a=Math.ceil(a);var c=p,d=q;b=b*q*2;var e="calc(50% - "+a/2+"px)";return{height:a,rx:c,width:d,x:b,y:e}})},[b,c])}function u(a){var b=a.hasEnded,e=b===void 0?!1:b;b=a.isPlaying;var f=b===void 0?!1:b,g=a.outgoing,i=a.scrubberLeft;b=babelHelpers.objectWithoutPropertiesLoose(a,["hasEnded","isPlaying","outgoing","scrubberLeft"]);var l=m(null);a=n("auto");var o=a[0],p=a[1];k(function(){var a=l.current;p(function(){var b="auto";(e||f)&&(b=g===!0?"var(--non-media-pressed-on-dark)":"var(--secondary-button-background-on-dark)");if(a==null)return b;var c=a.getBoundingClientRect();c=c.left;return i>c?g===!0?"var(--always-white)":"var(--progress-ring-neutral-foreground)":b})},[e,f,g,i]);a=(h||(h=c("stylex")))(g===!0?d("MWPAudioPlayerSharedStyles").styles.outgoingWaveFormStyle:d("MWPAudioPlayerSharedStyles").styles.incomingWaveFormStyle);return j.jsx("rect",babelHelpers["extends"]({},b,{className:a,ref:l,style:{fill:o}}))}u.displayName=u.name+" [from "+f.id+"]";function a(a){var b=a.hasEnded,e=a.isListened,f=a.isPlaying,g=a.outgoing,i=a.scrubberLeft;a=a.waveformData;var l=m(null),o=n(0),p=o[0],q=o[1],r=b===!0||e===!0;k(function(){if(l.current!=null){var a=l.current.getBoundingClientRect();q(a.width)}},[]);o=t(a,p);return o.length===0?j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.waveform),ref:l}):j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.waveform),ref:l,children:j.jsx("svg",{"aria-hidden":!0,className:h(d("MWPAudioPlayerSharedStyles").styles.mask),children:o.map(function(a,b){return j.createElement(u,babelHelpers["extends"]({},a,{hasEnded:r,isPlaying:f,key:b,outgoing:g,scrubberLeft:i}))})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPAudioPlayerHighlight.react",["MWPAudioPlayerScrubberBar.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerUtils","MWPAudioPlayerWaveform.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;e=b.forwardRef;var k=b.useImperativeHandle,l=b.useLayoutEffect,m=b.useRef,n=b.useState,o=e(function(a,b){var e=a.audioEl,f=a.children,g=a.duration,i=a.hasEnded,o=a.isListened,q=a.isPlaying;q=q===void 0?!0:q;var r=a.onUpdateScrubber,s=a.outgoing,t=a.waveformData;a=a.xstyle;var u=d("MWPAudioPlayerUtils").useShowNewUX(),v=m(),w=m(),x=n(0),y=x[0],z=x[1];x=n(0);var A=x[0],B=x[1];l(function(){if((e==null?void 0:e.current)!=null&&w.current!=null&&g!=null&&g>0){var a=e.current.currentTime,b=w.current;B(p(b,a/g*100))}},[e,g]);k(b,function(){return{updateHighlight:function(a){var b=v.current,c=w.current;if(b==null)return;if(u){if(c!=null){c=p(c,a);B(c)}}else b.style.transform="translateX("+(a-100).toFixed(1)+"%)"}}},[u]);x=function(a){if(v.current!=null){var b,c;b=(b=v.current)==null?void 0:b.getBoundingClientRect();b=(b=b==null?void 0:b.left)!=null?b:0;b=a.clientX-b;c=(c=(c=v.current)==null?void 0:c.offsetWidth)!=null?c:0;z(b/c*100);if(g!=null&&g>0){b=d("MWPAudioPlayerUtils").getMousePos(a,v.current)*g;if(r!=null&&w.current!=null){c=w.current;r(b);B(p(c,b/g*100))}}}};if(u){return j.jsxs(j.Fragment,{children:[f,j.jsxs("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.highlight,d("MWPAudioPlayerSharedStyles").styles.scrubber),onMouseDownCapture:x,ref:v,children:[j.jsx(c("MWPAudioPlayerScrubberBar.react"),{currentTime:e==null?void 0:(b=e.current)==null?void 0:b.currentTime,duration:(x=e==null?void 0:(f=e.current)==null?void 0:f.duration)!=null?x:0,ref:w,xPosition:y}),j.jsx(c("MWPAudioPlayerWaveform.react"),{hasEnded:i,isListened:o,isPlaying:q,outgoing:s,scrubberLeft:A,waveformData:t})]})]})}return j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.highlight,a),ref:v})});function p(a,b){a.style.left=b.toFixed(2)+"%";a.style.transition="transform 1s ease-out";b=a.getBoundingClientRect();a=b.left;return a}function a(a){var b=a.hasScrubber,c=a.progressHighlightRef,e=a.scrubberRef,f=a.audioEl,g=a.children,h=a.currentTime,i=a.duration,k=a.hasEnded,l=a.isListened,m=a.isPlaying;m=m===void 0?!0:m;var n=a.onUpdateScrubber,p=a.outgoing,q=a.waveformData;a=a.xstyle;var r=d("MWPAudioPlayerUtils").useShowNewUX();return r?j.jsx(o,{audioEl:f,duration:i,hasEnded:k,isListened:l,isPlaying:m,onUpdateScrubber:n,outgoing:p,ref:c,waveformData:q,xstyle:a,children:g}):j.jsxs(j.Fragment,{children:[j.jsx(o,{ref:c,xstyle:a}),b?j.jsx(d("MWPAudioPlayerUtils").ScreenReaderLabel,{currentTime:h,duration:i}):null,j.jsx(o,{ref:e,xstyle:a}),g]})}a.displayName=a.name+" [from "+f.id+"]";g.MWPAudioPlayerHighlightV1=o;g.MWPAudioPlayerHighlightV2=a}),98);
__d("MWPAudioPlayerKeyCommands.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useMemo;function m(a){if(a>30)return 5;else if(a>10)return 3;else if(a>5)return 2;else if(a>2)return 1;else return.5}function a(a){var b=a.audioEl;a=a.children;var d=k(function(){if(b.current==null)return;var a=b.current.duration;b.current.currentTime-=m(a)},[b]),e=k(function(){if(b.current==null)return;var a=b.current.duration;b.current.currentTime+=m(a)},[b]),f=k(function(){b.current!=null&&(b.current.currentTime=0)},[b]),g=k(function(){if(b.current==null)return;var a=b.current.duration;b.current.currentTime=a},[b]),i=l(function(){var a;return[{command:{key:(a=c("CometKeys")).UP},description:h._("__JHASH__0poPtptaPoq__JHASH__"),handler:e},{command:{key:a.DOWN},description:h._("__JHASH__rYkfY7o-Wnk__JHASH__"),handler:d},{command:{key:a.LEFT},description:h._("__JHASH__1Lid3qpGe7D__JHASH__"),handler:d},{command:{key:a.RIGHT},description:h._("__JHASH__SFoCE2wpUn9__JHASH__"),handler:e},{command:{key:a.HOME},description:h._("__JHASH__d6P7X8Ve8io__JHASH__"),handler:f},{command:{key:a.END},description:h._("__JHASH__QXmXaNdkPYM__JHASH__"),handler:g}]},[d,e,f,g]);return j.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:i,children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPAudioPlayerTimer.react",["MWPAudioPlayerSharedStyles","MWPAudioPlayerUtils","MWPThreadThemeGradientUtils","formatDurationSeconds","react","stylex","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var b=a.outgoing;b=b===void 0?!0:b;a=a.time;var e=c("useMWPThreadTheme")();e=d("MWPThreadThemeGradientUtils").getBottomGradientColor(e);var f=d("MWPAudioPlayerUtils").useShowNewUX();b=f?{color:b?"var(--always-white)":"var(--progress-ring-neutral-foreground)"}:{color:b?e:"var(--always-black)",cursor:"pointer"};return j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.rightSideTop,!f&&d("MWPAudioPlayerSharedStyles").styles.rightSideBottom,f&&d("MWPAudioPlayerSharedStyles").styles.rightSideImprove),"data-testid":void 0,style:b,children:c("formatDurationSeconds")(a)})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessengerSurfaceContext.bs",["MessengerSurfaceType","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(d("MessengerSurfaceType").messenger);g.context=b;g.defaultValue=d("MessengerSurfaceType").messenger}),98);
__d("MessengerSurfaceQuickChat.bs",["MessengerSurfaceContext.bs","MessengerSurfaceType","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=i.useContext(d("MessengerSurfaceContext.bs").context);return a===d("MessengerSurfaceType").workQuickchat}g.useIsQuickChatSurface=a}),98);
__d("useMWNextAttachment",["ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.messages.index("messageId")).bounds({gt:d("ReQL").key(a.messageId)}).filter(function(a){return!a.isUnsent})},[b,a.messageId],f.id+":22"),g=d("ReQLSuspense").useFirst(function(){return e!=null?d("ReQL").fromTableAscending(b.tables.attachments).getKeyRange(e.threadKey,e.messageId):d("ReQL").empty()},[b,e],f.id+":29");return g}g["default"]=a}),98);
__d("fetch",[],(function(a,b,c,d,e,f){"use strict";a=window.fetch;b=a;f["default"]=b}),66);
__d("fetchMWPAudioWaveformDataForURL",["AudioContextSingleton","FBLogger","Promise","asyncToGeneratorRuntime","fetch"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){var b=[];for(var c=0;c<a.numberOfChannels;c++)b.push(a.getChannelData(c));a=b.reduce(function(a,b){return a+b.length},0);c=new Float32Array(a);for(a=0;a<b.length;a++)for(var d=0;d<b[a].length;d++)c[d*b.length+a]=b[a][d];return c}function j(a){var d=c("AudioContextSingleton").get();return new(h||(h=b("Promise")))(function(b,c){d.decodeAudioData(a,b,c)})}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.toString();try{var b=(yield c("fetch")(a));b=(yield b.arrayBuffer());b=(yield j(b));return i(b)}catch(b){c("FBLogger")("messenger_web_product","audio_waveform_error").catching(b).mustfix("Error fetching waveform data for URL: %s",a);return Float32Array.of()}});return k.apply(this,arguments)}g["default"]=a}),98);
__d("useMWAttachmentUpdater",["Int64Hooks","ReQL","asyncToGeneratorRuntime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e=a.attachmentFbid,f=a.messageId,g=a.threadKey,i=(h||(h=c("useReStore")))();return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield i.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b.attachments;var c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b).getKeyRange(g,f,e)));c!=null&&(yield b.put(babelHelpers["extends"]({},c,a)))});return function(a){return c.apply(this,arguments)}}(),"readwrite")});return function(b){return a.apply(this,arguments)}}(),[i,g,f,e])}g["default"]=a}),98);
__d("useMWPAudioWaveformData.react",["ConstUriUtils","FBLogger","asyncToGeneratorRuntime","fetchMWPAudioWaveformDataForURL","promiseDone","react","useMWAttachmentUpdater"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");var i=e.useCallback,j=e.useEffect,k=e.useState,l=3,m=",",n=["blob:","data:"];function a(a,e){var f=k(a.waveformData),g=f[0],h=f[1],o=c("useMWAttachmentUpdater")(a),p=i(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(e!=null&&e!==""){var a=d("ConstUriUtils").getUri(e);if(a!=null&&n.includes(a.getProtocol())){a=(yield c("fetchMWPAudioWaveformDataForURL")(a));a.length>l&&h(a.join(m))}}}),[e]);j(function(){if(g!=null&&g.length>l)return;c("promiseDone")(p())},[p,g]);j(function(){g!=null&&g.length>l&&g!==a.waveformData&&o({waveformData:g})["catch"](function(a){c("FBLogger")("messenger_web_product","audio_waveform_error").catching(a).mustfix("Error from updating attachment waveform data")})},[a.waveformData,o,g]);return g}g["default"]=a}),98);
__d("useMWPMarkAudioAttachmentAsConsumed.react",["FBLogger","react","useMWAttachmentUpdater"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a,b){var d=c("useMWAttachmentUpdater")(b),e=b.isAttachmentConsumed;i(function(){var b=a==null?void 0:a.current;if(b==null)return;var f=function(){(e==null||e===!1)&&void d({isAttachmentConsumed:!0})["catch"](function(a){c("FBLogger")("messenger_web_product","attachment_update_error").catching(a).mustfix("Error marking attachment as consumed.")})};b.addEventListener("ended",f);return function(){b.removeEventListener("ended",f)}},[a,e,d])}g["default"]=a}),98);
__d("MWAudioPlayer.react",["I64","MWLSThreadDisplayContext","MWPAudioPlaybackButton.react","MWPAudioPlayerButtons.react","MWPAudioPlayerContainer.react","MWPAudioPlayerHighlight.react","MWPAudioPlayerKeyCommands.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerTimer.react","MWPAudioPlayerUtils","MessengerSurfaceQuickChat.bs","react","requireDeferred","stylex","useMWNextAttachment","useMWPAudioWaveformData.react","useMWPMarkAudioAttachmentAsConsumed.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));b=i;var l=b.useMemo,m=b.useRef,n=c("requireDeferred")("MWChatAudioLog").__setRef("MWAudioPlayer.react"),o={incoming:{backgroundColor:"x1arowe1",opacity:"x1ptxcow",$$css:!0},outgoing:{backgroundColor:"x14hiurz",opacity:"xz5rk10",$$css:!0},root:{transform:"x5i6ehr",$$css:!0}};function p(a){return l(function(){return[o.root,a?o.outgoing:o.incoming]},[a])}function q(){n.onReady(function(a){return a.logBrowserDenyAccess()})}function a(a){var b=a.attachment,e=a.getPlayableUrl,f=a.isReply;f=f===void 0?!1:f;var g=a.outgoing;a=a.width;var i=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),l=d("MessengerSurfaceQuickChat.bs").useIsQuickChatSurface(),n=b.playableDurationMs;n=(j||(j=d("I64"))).to_float((n=n)!=null?n:(j||(j=d("I64"))).zero)/1e3;var o=c("useMWNextAttachment")(b),r=e(b,"MWAudioPlayer");r=c("useMWPAudioWaveformData.react")(b,r);e=d("MWPAudioPlayerUtils").useControlCenter(e(b,"MWAudioPlayer"),o!=null?e(o,"MWAudioPlayer"):void 0,q,!1,n);o=e[0];var s=e[1],t=e[2],u=e[3],v=e[4];e=e[5];c("useMWPMarkAudioAttachmentAsConsumed.react")(t,b);var w=o===d("MWPAudioPlayerUtils").State.NONE,x=o===d("MWPAudioPlayerUtils").State.PLAYING,y=o===d("MWPAudioPlayerUtils").State.PAUSED,z=o===d("MWPAudioPlayerUtils").State.LOADING;o=o===d("MWPAudioPlayerUtils").State.ENDED;var A=x||y,B=m(),C=p(g);a={width:((a=a)!=null?a:i==="Inbox")?"218px":i==="ChatTab"&&l?"168px":"180px"};i=A?Math.max(n-s,0):0;return k.jsx(c("MWPAudioPlayerKeyCommands.react"),{audioEl:t,children:k.jsx(c("MWPAudioPlayerContainer.react"),{audioEl:t,hasScrubber:A,scrubberRef:B,style:a,testid:void 0,useCase:d("MWPAudioPlayerUtils").UseCase.PLAYER,children:k.jsxs("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.common,g?d("MWPAudioPlayerSharedStyles").styles.commonOutgoing:d("MWPAudioPlayerSharedStyles").styles.commonIncoming,f&&d("MWPAudioPlayerSharedStyles").styles.commonReply,g&&f&&d("MWPAudioPlayerSharedStyles").styles.commonOutgoingReply),children:[k.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV2,{audioEl:t,currentTime:s,duration:n,hasEnded:o,hasScrubber:A,isListened:b.isAttachmentConsumed===!0,isPlaying:x,onUpdateScrubber:e,outgoing:g,progressHighlightRef:v,scrubberRef:B,waveformData:r,xstyle:C,children:k.jsx(c("MWPAudioPlaybackButton.react"),{disabled:w,hasEnded:o,isLoading:z,isPaused:y,isPlaying:x,onPress:u,outgoing:g,scrubberRef:B})}),k.jsx("div",{children:x?k.jsxs(k.Fragment,{children:[k.jsx(c("MWPAudioPlayerTimer.react"),{outgoing:g,time:i}),k.jsx(d("MWPAudioPlayerButtons.react").PlaybackRateButton,{outgoing:g})]}):k.jsx(c("MWPAudioPlayerTimer.react"),{outgoing:g,time:i})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g.useHighlightStyles=p;g.MWAudioPlayer=a}),98);
__d("MWPUseVoiceRecorder",["AudioContextSingleton","MWChatRecorderUtilsWorkerResource","MWPAudioPlayerIcons.react","MWPAudioPlayerLabels","Promise","WebWorker","clearTimeout","emptyFunction","gkx","react","setTimeout","useIsMountedRef","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i,l=k.useCallback,m=k.useEffect,n=k.useReducer,o=k.useRef;function a(a){switch(a.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function e(a){switch(a.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function p(a){switch(a.stage){case"Unopen":return 0;case"Recording":return a.duration;case"Recorded":case"Playing":return Math.max(a.duration-a.currentTime,0)}}function q(a){switch(a.stage){case"Unopen":return 0;case"Recording":return a.recordingTimeout;case"Recorded":case"Playing":return a.duration}}function r(a){switch(a.stage){case"Unopen":case"Recording":return;case"Recorded":case"Playing":return a.currentTime}}function s(a){switch(a.stage){case"Unopen":case"Recorded":return!1;case"Recording":case"Playing":return!0}}function t(a){if(a.stage==="Recorded")return a.currentTime===0;else return!1}function u(a){switch(a.stage){case"Recording":return d("MWPAudioPlayerLabels").stopLabel;case"Unopen":case"Recorded":return d("MWPAudioPlayerLabels").playLabel;case"Playing":return d("MWPAudioPlayerLabels").pauseLabel}}function v(a,b){switch(a.stage){case"Recording":return j.jsx(d("MWPAudioPlayerIcons.react").StopIcon,{color:b});case"Unopen":case"Recorded":return j.jsx(d("MWPAudioPlayerIcons.react").PlayIcon,{color:b});case"Playing":return j.jsx(d("MWPAudioPlayerIcons.react").PauseIcon,{color:b})}}v.displayName=v.name+" [from "+f.id+"]";function w(a,b){switch(b.type){case"Start":return{duration:0,mediaStream:b.mediaStream,recordingTimeout:b.recordingTimeout,stage:"Recording"};case"Toggle":switch(a.stage){case"Unopen":return a;case"Recording":return{currentTime:0,duration:a.duration,stage:"Recorded"};case"Recorded":return{currentTime:a.currentTime,duration:a.duration,stage:"Playing"};case"Playing":return{currentTime:a.currentTime,duration:a.duration,stage:"Recorded"}}break;case"UpdateDuration":var c=b.duration;switch(a.stage){case"Unopen":return a;case"Recording":return{duration:c,mediaStream:a.mediaStream,recordingTimeout:a.recordingTimeout,stage:"Recording"};case"Recorded":return{currentTime:a.currentTime,duration:c,stage:"Recorded"};case"Playing":return{currentTime:a.currentTime,duration:c,stage:"Playing"}}break;case"UpdateTime":c=b.currentTime;switch(a.stage){case"Unopen":case"Recording":return a;case"Recorded":var d=a.duration;return c===d?{currentTime:0,duration:d,stage:"Recorded"}:{currentTime:c,duration:d,stage:"Recorded"};case"Playing":d=a.duration;return c===d?{currentTime:0,duration:d,stage:"Recorded"}:{currentTime:c,duration:d,stage:"Playing"}}break;case"RecordingTimeout":return{currentTime:0,duration:b.recordingTimeout,stage:"Recorded"};case"Reset":return{stage:"Unopen"}}}var x={stage:"Unopen"};function y(a,d,e){a===void 0&&(a=60);d===void 0&&(d=c("emptyFunction"));e===void 0&&(e=c("emptyFunction"));var f=c("gkx")("24131"),g=c("gkx")("9179"),i=f?1:2;f=n(w,x);var j=f[0],k=f[1],p=c("useIsMountedRef")(),q=o(),r=o([]),s=o([]),t=o(),u=o(),v=o(),y=o(),z=o(c("emptyFunction")),A=l(function(a){var b=a[0],c=a[1];if(!p.current)return;a=URL.createObjectURL(b);v.current=a;var d=new Audio(a);d.addEventListener("canplay",function(){u.current=d;var a=d.duration;k({duration:a,type:"UpdateDuration"});a={duration:a,file:b,waveformData:c};y.current=a;z.current(a)});d.addEventListener("timeupdate",function(){var a;a=(a=u.current)==null?void 0:a.currentTime;a!=null&&k({currentTime:a,type:"UpdateTime"})});d.addEventListener("durationchange",function(){var a;a=(a=u.current)==null?void 0:a.duration;a!=null&&!Number.isNaN(a)&&k({duration:a,type:"UpdateDuration"})})},[p]),B=l(function(){if(q.current==null||t.current==null)return;t.current.postMessage({buffersL:r.current,buffersR:i===2?s.current:null,sampleRate:q.current})},[i]);m(function(){if(j.stage!=="Recording")return;r.current=[];s.current=[];var a=c("AudioContextSingleton").get({sampleRate:g?44100:void 0}),b=a.destination;q.current=a.sampleRate;var e=j.mediaStream,f=a.createScriptProcessor(4096,i,i);a=a.createMediaStreamSource(e);t.current=new(c("WebWorker"))(c("MWChatRecorderUtilsWorkerResource")).setMessageHandler(A).setAllowCrossPageTransition(!0).execute();var h=function(a){j.stage==="Recording"&&a instanceof AudioProcessingEvent&&(r.current.push(a.inputBuffer.getChannelData(0).slice()),i===2&&s.current.push(a.inputBuffer.getChannelData(1).slice()))};f.addEventListener("audioprocess",h);a.connect(f);f.connect(b);d();return function(){e.getAudioTracks().forEach(function(a){if(a.readyState!=="ended"){a.stop();return}}),f.removeEventListener("audioprocess",h)}},[A,d,j.stage,j.mediaStream,i,g]);var C=c("usePrevious")(j);m(function(){(C==null?void 0:C.stage)==="Recording"&&j.stage==="Recorded"&&B()},[C==null?void 0:C.stage,B,j.stage]);m(function(){if(j.stage!=="Recording")return;var b=Date.now(),d,e=function e(){var f=(Date.now()-b)/1e3;if(f>=a){k({recordingTimeout:a,type:"RecordingTimeout"});return}k({duration:f,type:"UpdateDuration"});d=c("setTimeout")(e,1e3)};d=c("setTimeout")(e,1e3);return function(){d!=null&&c("clearTimeout")(d)}},[a,j.stage]);f=l(function(b){k({mediaStream:b,recordingTimeout:a,type:"Start"})},[a]);var D=l(function(){var a;k({type:"Reset"});(a=u.current)==null?void 0:a.pause();u.current=void 0;y.current=void 0;q.current=void 0;a=v.current;a!=null&&(URL.revokeObjectURL(a),v.current=void 0)},[]),E=l(function(){var a=function(){k({type:"Toggle"})},b=u.current;if(b==null){a();return}switch(j.stage){case"Unopen":case"Recording":a();break;case"Recorded":b.play().then(a)["catch"](e);break;case"Playing":b.pause();a();break}},[e,j.stage]),F=l(function(){return new(h||(h=b("Promise")))(function(a){var b=y.current;if(b!=null)return a(b);z.current=a;if(j.stage==="Recording")return E()})},[j,E]);return{audioEl:u,getVoiceClip:F,reset:D,start:f,state:j,toggle:E}}g.showScreenReaderLabel=a;g.hasScrubber=e;g.getTimerTime=p;g.getDuration=q;g.getCurrentTime=r;g.isProgressing=s;g.isCompleted=t;g.getPlaybackLabel=u;g.getPlaybackIcon=v;g.useVoiceRecorder=y}),98);
__d("MWAudioRecorder.react",["MWAudioPlayer.react","MWPAudioPlayerButtons.react","MWPAudioPlayerContainer.react","MWPAudioPlayerHighlight.react","MWPAudioPlayerKeyCommands.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerTimer.react","MWPAudioPlayerUtils","MWPUseVoiceRecorder","react","requireDeferred","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useRef,l=c("requireDeferred")("MWChatAudioLog").__setRef("MWAudioRecorder.react");function a(a){var b;a=a.voiceRecorder;var e=a.audioEl,f=a.state,g=a.toggle;a=k();var i=d("MWPAudioPlayerUtils").useResetHighlightProgress(a),m=(b=d("MWPUseVoiceRecorder")).hasScrubber(f),n=function(){g();switch(f.stage){case"Unopen":return;case"Recording":l.onReady(function(a){return a.logClickStopRecording(0)});return;case"Recorded":var a=f.currentTime,b=f.duration;a===0?l.onReady(function(a){return a.logPlaybackStart(b)}):l.onReady(function(c){return c.logPlaybackResume(b,a)});return;case"Playing":var c=f.currentTime,d=f.duration;l.onReady(function(a){return a.logPlaybackPause(d,c)});return}};b=d("MWPAudioPlayerUtils").useProgressLiveUpdate(b.getDuration(f),e,b.getCurrentTime(f),b.isProgressing(f),!1,b.isCompleted(f));var o=d("MWAudioPlayer.react").useHighlightStyles(!0),p=function(){switch(f.stage){case"Unopen":case"Recording":return null;case"Recorded":case"Playing":return j.jsx(d("MWPAudioPlayerUtils").ScreenReaderLabel,{currentTime:f.currentTime,duration:f.duration})}}();return j.jsx(c("MWPAudioPlayerContainer.react"),{audioEl:e,hasScrubber:m,scrubberRef:a,style:{backgroundColor:"var(--chat-composer-button-color, var(--accent))",borderRadius:"18px"},testid:void 0,useCase:d("MWPAudioPlayerUtils").UseCase.RECORDER,children:j.jsxs(c("MWPAudioPlayerKeyCommands.react"),{audioEl:e,children:[j.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:b,xstyle:o}),p,j.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:a,xstyle:o}),j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.playbackButtonContainer),onMouseMove:m?i:void 0,children:j.jsx(d("MWPAudioPlayerButtons.react").AudioPlayerPlaybackButton,{icon:d("MWPUseVoiceRecorder").getPlaybackIcon(f,"var(--chat-composer-button-color, var(--accent))"),label:d("MWPUseVoiceRecorder").getPlaybackLabel(f),onPress:n})}),j.jsx(c("MWPAudioPlayerTimer.react"),{time:d("MWPUseVoiceRecorder").getTimerTime(f)})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatHotlikeButton.react",["fbt","CometEmoji.react","EmojiRenderer","I64","LSHotEmojiSize","LSIntEnum","MWLikeSvgIcon.react","MWXPressable.react","MWXTooltip.react","StickerConstants","gkx","isStringNullOrEmpty","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||d("react"),m={customEmojiButtonFDS:{marginStart:"xsgj6o6",marginLeft:null,marginRight:null,marginEnd:"xw3qccf",paddingStart:"xcu9agk",paddingLeft:null,paddingRight:null,paddingEnd:"x2qib4z",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0},customEmojiButtonMDS:{marginStart:"x1i64zmx",marginLeft:null,marginRight:null,marginEnd:"x1emribx",paddingStart:"xcu9agk",paddingLeft:null,paddingRight:null,paddingEnd:"x2qib4z",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0},fillGrey:{fill:"xsrhx6k",$$css:!0},hotlikeButtonFDS:{marginStart:"xsgj6o6",marginLeft:null,marginRight:null,marginEnd:"xw3qccf",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},hotlikeButtonMDS:{marginStart:"x1i64zmx",marginLeft:null,marginRight:null,marginEnd:"x1emribx",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},n=h._("__JHASH__OzQk4bc7gK8__JHASH__"),o=(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL),p=(k||(k=d("I64"))).of_string(c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID);function a(a){var b=a.customEmoji,e=a.disabled;e=e===void 0?!1:e;var f=a.onSendMessage;a=function(){!c("isStringNullOrEmpty")(b)?f(b,void 0,void 0,o,void 0,void 0,void 0,void 0,void 0,void 0):f(void 0,void 0,p,o,void 0,void 0,void 0,void 0,void 0,void 0)};if(!c("isStringNullOrEmpty")(b)){var g=h._("__JHASH__tAqfCk1edp7__JHASH__",[h._param("emoji",b)]),i=function(a){var e=d("EmojiRenderer").parse(b).map(function(a){return a.emoji});if(e.length!==1)return l.jsx("span",{children:b});e=e[0];return l.jsx(c("CometEmoji.react"),{emoji:e,size:a})},j=h._("__JHASH__CsSxx_HAT5f__JHASH__",[h._param("emoji",i(16))]);return l.jsx(c("MWXTooltip.react"),{align:"middle",label:n,position:"above",tooltip:j,children:l.jsx(c("MWXPressable.react"),{"aria-label":g,disabled:e,loggingEvent:"send_hot_like",onPress:a,overlayDisabled:e,overlayRadius:"50%",testid:void 0,xstyle:function(){return[c("gkx")("23219")?m.customEmojiButtonMDS:m.customEmojiButtonFDS]},children:i(20)})})}return l.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:n,children:l.jsx(c("MWXPressable.react"),{"aria-label":n,disabled:e,onPress:a,overlayDisabled:e,overlayRadius:"50%",testid:void 0,xstyle:function(){return[c("gkx")("23219")?m.hotlikeButtonMDS:m.hotlikeButtonFDS]},children:l.jsx(c("MWLikeSvgIcon.react"),{className:"xsrhx6k",color:"var(--chat-composer-button-color)",size:20})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerMenuButtonTrigger.react",["fbt","MWChatChatButtonColorConstants","MWXPressable.react","MWXTooltip.react","gkx","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l=h._("__JHASH__2kGg_y6m8FS__JHASH__"),m={buttonFDS:{flexShrink:"x2lah0s",marginStart:"xsgj6o6",marginLeft:null,marginRight:null,marginEnd:"xw3qccf",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},buttonMDS:{flexShrink:"x2lah0s",marginStart:"x1i64zmx",marginLeft:null,marginRight:null,marginEnd:"x1emribx",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}};function a(a){var b=a.color,e=a.contextRef,f=a.disabled;a=a.onShow;return k.jsx(c("MWXTooltip.react"),{forceInlineDisplay:!0,position:"above",tooltip:l,children:k.jsx(c("MWXPressable.react"),{disabled:f,label:l,onPress:a,overlayDisabled:f,overlayRadius:"50%",ref:e,xstyle:function(){return[c("gkx")("23219")?m.buttonMDS:m.buttonFDS]},children:k.jsx("svg",{"aria-hidden":"true",className:(i||(i=c("stylex")))(d("MWChatChatButtonColorConstants").styles.strokeGrey),height:"20",viewBox:"0 0 24 18",width:"20",children:k.jsxs("g",{stroke:b,strokeLinecap:"round",strokeWidth:"2.5",children:[k.jsx("path",{d:"M1.5,1.5 H22.5"}),k.jsx("path",{d:"M1.5,9 H22.5"}),k.jsx("path",{d:"M1.5,16.5 H22.5"})]})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerMenuButton.react",["JSResourceForInteraction","MWV2ComposerMenuButtonTrigger.react","MWXLazyPopoverTrigger.react","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.color,d=a.disabled,e=d===void 0?!1:d;d=a.editor;var f=a.hasPersistentMenu,g=a.onSendMessage;a=a.threadKey;return i.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{editor:d,hasPersistentMenu:f,onClose:c("emptyFunction"),onSendMessage:g,threadKey:a},popoverResource:c("JSResourceForInteraction")("MWComposerCommandsMenu.react").__setRef("MWV2ComposerMenuButton.react"),children:function(a,d){return i.jsx(c("MWV2ComposerMenuButtonTrigger.react"),{color:b,contextRef:a,disabled:e,onShow:d})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWComposerPersistentMenuItemSelect",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.onSendMessage;return i(function(a){var c=a.id;a=a.title;return b(a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0)},[b])}g["default"]=a}),98);
__d("MWV2ComposerPersistentMenuButton.react",["JSResourceForInteraction","MWV2ComposerMenuButtonTrigger.react","MWXLazyPopoverTrigger.react","emptyFunction","react","useMWComposerPersistentMenuItemSelect"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.color,d=a.disabled,e=d===void 0?!1:d;d=a.onSendMessage;a=c("useMWComposerPersistentMenuItemSelect")({onSendMessage:d});return i.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{onClose:c("emptyFunction"),onSelect:a},popoverResource:c("JSResourceForInteraction")("LSComposerPersistentMenu.react").__setRef("MWV2ComposerPersistentMenuButton.react"),children:function(a,d){return i.jsx(c("MWV2ComposerMenuButtonTrigger.react"),{color:b,contextRef:a,disabled:e,onShow:d})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerSendButton.react",["fbt","Locale","MWChatChatButtonColorConstants","MWXPressable.react","MWXTooltip.react","UserAgent","gkx","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");b=c("gkx")("23402");e=c("UserAgent").isPlatform("Mac OS X");var l=b?e?h._("__JHASH__rZOmP6eifIV__JHASH__"):h._("__JHASH__ylwhpFdWk4l__JHASH__"):h._("__JHASH__7975gRkNyLl__JHASH__"),m={buttonFDS:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",marginStart:"xsgj6o6",marginLeft:null,marginRight:null,marginEnd:"xw3qccf",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},buttonMDS:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",marginStart:"x1i64zmx",marginLeft:null,marginRight:null,marginEnd:"x1emribx",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},reverse:{transform:"xpk2tj9",$$css:!0}};b=k.forwardRef(a);function a(a,b){var e=a.disabled;a=a.onPress;return k.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:l,children:k.jsx(c("MWXPressable.react"),{disabled:e,label:l,loggingEvent:"composer_send_message",onPress:a,overlayDisabled:e,overlayRadius:"50%",ref:b,testid:void 0,xstyle:function(){return[c("gkx")("23219")?m.buttonMDS:m.buttonFDS,d("Locale").isRTL()&&m.reverse]},children:k.jsxs("svg",{className:(i||(i=c("stylex")))(d("MWChatChatButtonColorConstants").styles.fillGrey),height:"20px",viewBox:"0 0 24 24",width:"20px",children:[k.jsx("title",{children:l}),k.jsx("path",{d:"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z",fill:"var(--chat-composer-button-color)"})]})})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("MWComposerEndButtonsGroup.react",["MWV2ChatHotlikeButton.react","MWV2ComposerMenuButton.react","MWV2ComposerPersistentMenuButton.react","MWV2ComposerSendButton.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j="var(--chat-composer-button-color)";function a(a){var b=a.customEmoji,d=a.editor,e=a.hasPersistentMenu,f=a.hasStuffToSend,g=a.isVoiceRecorderOpen,h=a.onSendMessage,k=a.sendMessage,l=a.shouldHideHotLike,m=a.showCommands;a=a.threadKey;return g?null:f?i.jsx(c("MWV2ComposerSendButton.react"),{onPress:k}):m?i.jsx(c("MWV2ComposerMenuButton.react"),{color:j,editor:d,hasPersistentMenu:e,onSendMessage:h,threadKey:a}):e?i.jsx(c("MWV2ComposerPersistentMenuButton.react"),{color:j,onSendMessage:h}):l?i.jsx("span",{className:"x1e558r4 x150jy0e"}):i.jsx(c("MWV2ChatHotlikeButton.react"),{customEmoji:b,onSendMessage:h})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerEmojiButton.react",["fbt","JSResourceForInteraction","MWChatComposerIcons","MWXLazyPopoverTrigger.react","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","Promise","gkx","promiseDone","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l=h._("__JHASH__HXazdxq92Fj__JHASH__"),m={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},n=c("JSResourceForInteraction")("cometAddEmojiToComposerForLexical").__setRef("MWV2ComposerEmojiButton.react");function a(a){var e=a.editor;a=function(a){c("promiseDone")(n.load().then(function(c){c(a,e,16);return(i||(i=b("Promise"))).resolve()}))};var f=c("MessengerWebUXLogger").useInteractionLogger();return k.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{onSelect:a,withArrow:!0},popoverResource:c("JSResourceForInteraction")("MWV2ComposerEmojiPickerForJSResource").__setRef("MWV2ComposerEmojiButton.react"),preloadTrigger:c("gkx")("22922")?"button":void 0,children:function(a,b,e,g,h,i,j){return k.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:l,children:k.jsx(c("MWXPressable.react"),{"aria-label":l,onHoverIn:g,onHoverOut:h,onPress:function(a){b(),n.preload(),f==null?void 0:f({eventName:"composer_open_emoji_picker"})},onPressIn:i,overlayRadius:"50%",ref:a,testid:void 0,xstyle:function(){return[c("gkx")("23219")?m.buttonMDS:m.buttonFDS]},children:k.jsx(d("MWChatComposerIcons").MWChatComposerIconsEmoji,{fill:"var(--chat-composer-button-color)",size:20})})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWComposerInnerButtonsGroup.react",["MWV2ComposerEmojiButton.react","cr:793","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={fds:{marginStart:"x16hk5td",marginLeft:null,marginRight:null,paddingBottom:"xjkvuk6",paddingEnd:"x150jy0e",paddingLeft:null,paddingRight:null,$$css:!0},innerButtons:{alignItems:"x6s0dn4",alignSelf:"xpvyfi4",display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},mds:{marginStart:"x169t7cy",marginLeft:null,marginRight:null,$$css:!0}};function a(a){var d=a.editor,e=a.shouldUseMDS;a=a.threadKey;return j.jsxs("div",{className:(h||(h=c("stylex")))(k.innerButtons,e?k.mds:k.fds),children:[b("cr:793")!=null&&j.jsx(b("cr:793"),{editor:d,threadId:a}),j.jsx(c("MWV2ComposerEmojiButton.react"),{editor:d})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerFileButton.react",["fbt","CometFileSelector.react","MWChatComposerIcons","MWXPressable.react","MWXTooltip.react","gkx","react","useMWV2ComposerOnFilesSelected"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},l=h._("__JHASH__irWVZkNfl97__JHASH__");function a(a){var b=a.disabled,e=a.onAttachmentsAdded;a=a.supportedFileTypes;e=c("useMWV2ComposerOnFilesSelected")(e);return j.jsx(c("CometFileSelector.react"),{accept:a,multiple:!0,onFilesSelected:e,children:function(a){return j.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:l,children:j.jsx(c("MWXPressable.react"),{"aria-label":l,disabled:b,loggingEvent:"composer_open_file_picker",onPress:a,overlayRadius:"50%",testid:void 0,xstyle:function(){return[c("gkx")("23219")?k.buttonMDS:k.buttonFDS]},children:j.jsx(d("MWChatComposerIcons").MWChatComposerIconsPhoto,{fill:b?void 0:"var(--chat-composer-button-color)",size:20})})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerGifButton.react",["fbt","JSResourceForInteraction","MWChatComposerIcons","MWXLazyPopoverTrigger.react","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","gkx","react","useMWV2ComposerOnGifSelect"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("JSResourceForInteraction")("MWChatAnimatedImageFlyoutWithPopover.react").__setRef("MWV2ComposerGifButton.react"),l={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},m=h._("__JHASH__J6q-Bfr0oTE__JHASH__");function a(a){var b=a.disabled,e=a.isSecureThread;a=a.onSendMessage;a=c("useMWV2ComposerOnGifSelect")(a);var f=c("MessengerWebUXLogger").useInteractionLogger();return j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",disableAutoFlip:!0,popoverProps:{isSecureThread:e,onSelect:a,testid:"mw_gif_picker"},popoverResource:k,position:"above",children:function(a,e,g,h,i,k,n){return j.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:m,children:j.jsx(c("MWXPressable.react"),{"aria-label":m,disabled:b,onHoverIn:h,onHoverOut:i,onPress:function(){e(),f==null?void 0:f({eventName:"composer_open_gif_picker"})},onPressIn:k,overlayRadius:"50%",ref:a,xstyle:function(){return[c("gkx")("23219")?l.buttonMDS:l.buttonFDS]},children:j.jsx(d("MWChatComposerIcons").MWChatComposerIconsGif,{fill:b?void 0:"var(--chat-composer-button-color)",size:20})})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerStickerButton.react",["cr:1084","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");g["default"]=b("cr:1084")}),98);
__d("MWComposerStartButtonsGroup.react",["CometPlaceholder.react","LSMessagingThreadTypeUtil","MWV2ComposerFileButton.react","MWV2ComposerGifButton.react","MWV2ComposerStickerButton.react","MWXTooltipGroup.react","cr:571","emptyFunction","react","stylex","useMWEntrypoint","useMWFalcoFeatureEventLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={button:{alignItems:"x6s0dn4",bottom:"x1ey2m1c",display:"x78zum5",justifyContent:"xl56j7k",position:"x10l6tqk",zIndex:"x1vjfegm",$$css:!0},buttonFDS:{marginBottom:"x12nagc",marginEnd:"xw3qccf",marginLeft:null,marginRight:null,$$css:!0},buttonHidden:{transform:"x1f85oc2",transitionDuration:"x1g2r6go",transitionProperty:"x11xpdln",$$css:!0},buttonMDS:{marginBottom:"xat24cr",$$css:!0},buttonShown:{transform:"x3oybdh",transitionDuration:"x1g2r6go",transitionProperty:"x11xpdln",$$css:!0},fileButtonHidden:{transitionDelay:"x1th4bbo",$$css:!0},fileButtonShown:{transitionDelay:"x1th4bbo",$$css:!0},gifButtonHidden:{transitionDelay:"x1ahifba",$$css:!0},gifButtonShown:{transitionDelay:"x5w5eug",$$css:!0},pollButtonHidden:{transitionDelay:"x1th4bbo",$$css:!0},pollButtonShown:{transitionDelay:"x1th4bbo",$$css:!0},stickerButtonHidden:{transitionDelay:"x5zdck6",$$css:!0},stickerButtonShown:{transitionDelay:"x5h36tt",$$css:!0}},l="var(--chat-composer-button-color)";function a(a){var e=a.canSendFileFinal,f=a.canSendGifFinal,g=a.canSendSecureSticker,i=a.canSendStickerFinal,m=a.composerLinkPreview,n=a.gifButtonPosition,o=a.isInputExpanded,p=a.isRTL,q=a.isSecureThread,r=a.localTimezoneInformation,s=a.onAttachmentsAdded,t=a.onSendMessage,u=a.shouldUseMDS,v=a.stickerButtonPosition,w=a.supportedFileTypes,x=a.threadKey;a=a.threadType;var y=c("useMWEntrypoint")(),z=c("useMWFalcoFeatureEventLogger")(x,a),A=function(a,b){var c="select_sticker_book";a?c="sticker_search":b&&(c="recent_stickers");z(y,c)},B=d("LSMessagingThreadTypeUtil").isJoinedDiscoverablePublicBroadcastChannel(a),C=p?{right:"0px"}:{left:"0px"},D=p?{right:v.toString()+"px"}:{left:v.toString()+"px"};v=p?{right:v.toString()+"px"}:{left:v.toString()+"px"};p=p?{right:n.toString()+"px"}:{left:n.toString()+"px"};return j.jsxs(j.Fragment,{children:[j.jsxs(c("MWXTooltipGroup.react"),{children:[j.jsx("div",{className:(h||(h=c("stylex")))(k.button,u?k.buttonMDS:k.buttonFDS,o?k.buttonHidden:k.buttonShown,o?k.fileButtonHidden:k.fileButtonShown),style:C,children:j.jsx(c("MWV2ComposerFileButton.react"),{disabled:!e,onAttachmentsAdded:s,supportedFileTypes:w})}),B&&b("cr:571")!=null?j.jsx("div",{className:(h||(h=c("stylex")))(k.button,u?k.buttonMDS:k.buttonFDS,o?k.buttonHidden:k.buttonShown,o?k.pollButtonHidden:k.pollButtonShown),style:D,children:j.jsx(b("cr:571"),{color:l,entryPoint:"composer",onClose:c("emptyFunction"),threadKey:x,threadType:a})}):j.jsx("div",{className:(h||(h=c("stylex")))(k.button,u?k.buttonMDS:k.buttonFDS,o?k.buttonHidden:k.buttonShown,o?k.stickerButtonHidden:k.stickerButtonShown),style:v,children:j.jsx(c("MWV2ComposerStickerButton.react"),{color:l,disabled:!i,onSelectStickerPack:A,onSendMessage:t,useSecureSend:g})}),j.jsx("div",{className:h(k.button,u?k.buttonMDS:k.buttonFDS,o?k.buttonHidden:k.buttonShown,o?k.gifButtonHidden:k.gifButtonShown),style:p,children:j.jsx(c("MWV2ComposerGifButton.react"),{disabled:!f,isSecureThread:q,onSendMessage:t})})]}),r!=null?j.jsx(c("CometPlaceholder.react"),{fallback:null,children:r}):null,m!=null?j.jsx(c("CometPlaceholder.react"),{fallback:null,children:m}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessengerMentionsComposerPluginCreatorWithTypeaheadViewForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","I64","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWChatAppendMentionsNodeToReply","MWChatComposerMentionsViewItem.react","MWLSThread","cr:2600","cr:4183","messengerMentionsLexicalCreateNodeStrategy","react","useCometTypeaheadSectionedViewListStrategy","useCommunityFolder","useMWChatMentionsDataSourceResolverConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useMemo,l=(e=b("cr:4183"))!=null?e:function(a){return function(a,b){}},m={view:{minWidth:"x1jzhcrs",$$css:!0}};function a(a){var e=a.editor,f=a.isAiBotMentionsEnabled,g=a.participants,h=a.threadFBID,n=l((i||(i=d("I64"))).of_string(h));a=k(function(){return{isAiBotMentionsEnabled:f,participants:g,threadFBID:h,triggerParticipantsSearch:n}},[f,g,h,n]);a=c("useMWChatMentionsDataSourceResolverConfig")(a);var o=c("useCometTypeaheadSectionedViewListStrategy")({viewItemStrategyRenderer:c("MWChatComposerMentionsViewItem.react"),viewXStyle:m.view}),p=d("MWLSThread").useThreadExn(i.of_string(h)),q=c("useCommunityFolder")(p);d("MWChatAppendMentionsNodeToReply").useMWChatAppendMentionsNodeToReply(e,p.threadKey,f);if(b("cr:2600")!=null&&(d("MWCMThreadTypes.react").isJoinedCMThread(p.threadType)&&q||d("LSMessagingThreadTypeUtil").isJoinedSocialChannelV2(p.threadType))){var r;return j.jsx(b("cr:2600"),{editor:e,fbGroupId:(r=q==null?void 0:q.fbGroupId)!=null?r:p.threadKey,folderId:(r=q==null?void 0:q.folderId)!=null?r:p.threadKey,threadFBID:h})}else return j.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("messengerMentionsLexicalCreateNodeStrategy"),dataSourceResolverConfig:a,editor:e,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),position:"above",viewStrategyRenderer:o})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWReQLComposerInner.react",["CometMessengerComposerInner.react","I64","MWLSThread","MessengerMentionsComposerPluginCreatorWithTypeaheadViewForLexical.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var b=a.ariaDescribedBy,e=a.contentEditableRef,f=a.editor,g=a.endContent,h=a.handlePastedFiles,k=a.isAiBotMentionsEnabled,l=a.isSecureThread,m=a.participants,n=a.placeholderText;n=n===void 0?"Aa":n;var o=a.policyProduct,p=a.startContent,q=a.surface,r=a.testId,s=a.threadID,t=a.topContent;a=a.useMentionsPlugin;var u=d("MWLSThread").useThread((i||(i=d("I64"))).of_string(s),function(a){return a.threadSubtype});a=a&&j.jsx(c("MessengerMentionsComposerPluginCreatorWithTypeaheadViewForLexical.react"),{editor:f,isAiBotMentionsEnabled:k,participants:m,threadFBID:s});return j.jsx(c("CometMessengerComposerInner.react"),{ariaDescribedBy:b,contentEditableRef:e,editor:f,endContent:g,handlePastedFiles:h,isSecureThread:l,mentionsPlugin:a,placeholderText:n,policyProduct:o,startContent:p,threadSubtype:u,topContent:t,surface:q,testId:r})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWV2ComposerOnPressVoiceClip",["$InternalEnum","JSResourceForInteraction","emptyFunction","gkx","react","requireDeferred","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useState,j=c("requireDeferred")("MWChatAudioLog").__setRef("useMWV2ComposerOnPressVoiceClip"),k=b("$InternalEnum").Mirrored(["AWAITING","GRANTED","DENIED","FAILED"]);function a(a){var b=i(k.AWAITING),d=b[0],e=b[1];b=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatAudioRecorderPermissionsDialog.react").__setRef("useMWV2ComposerOnPressVoiceClip"));var f=b[0],g={},h=c("gkx")("24131"),l=c("gkx")("9179");h&&(g.channelCount=1);l&&(g.sampleRate=44100);var m=function(){return f({contentType:"accessDenied",onAllow:c("emptyFunction")},c("emptyFunction"))},n=function(){var b;(b=navigator)==null?void 0:(b=b.mediaDevices)==null?void 0:b.getUserMedia({audio:h||l?g:!0,video:!1}).then(function(b){e(k.GRANTED),a.start(b)})["catch"](function(a){a.name==="NotAllowedError"?(e(k.DENIED),m()):e(k.FAILED),j.onReady(function(a){return a.logBrowserDenyAccess()})})},o=function(){return f({contentType:"askForAccess",onAllow:function(){return n()}},c("emptyFunction"))};return function(){var a;switch(d){case k.AWAITING:a=(a=navigator.permissions)==null?void 0:a.query({name:"microphone"});a!=null?a.then(function(a){a=a.state;switch(a){case"denied":e(k.DENIED);m();break;case"granted":n();break;case"prompt":o();break;default:o()}})["catch"](function(){o()}):(n(),j.onReady(function(a){return a.logMicAccessCheckFailed()}));return;case k.DENIED:return m();case k.GRANTED:case k.FAILED:return n()}}}g["default"]=a}),98);
__d("MWV2ComposerPlusButton.react",["fbt","JSResourceForInteraction","LSMessagingThreadTypeUtil","MWChatComposerIcons","MWXLazyPopoverTrigger.react","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","emptyFunction","gkx","isStickerEnabled","react","requireDeferred","useMWV2ComposerOnPressVoiceClip"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useMemo,l=b.useState,m=c("requireDeferred")("MWChatAudioLog").__setRef("MWV2ComposerPlusButton.react"),n={plusButtonFDS:{marginStart:"xsgj6o6",marginLeft:null,marginRight:null,marginEnd:"xw3qccf",marginTop:"x1gslohp",marginBottom:"x12nagc",paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},plusButtonMDS:{marginStart:"x1i64zmx",marginLeft:null,marginRight:null,paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}};function a(a){var b=a.canSendAudioClip,e=a.canSendFile,f=a.canSendPayment,g=a.editor,i=a.hasAudioClipsCapability,o=a.hasGIFCapability,p=a.hasPaymentCapability,q=a.hasPollCreationCapability,r=a.hasRollcallCapability,s=a.hasStickerCapability,t=a.isInputExpanded,u=a.isSecureThread,v=a.onAttachmentsAdded,w=a.onSendMessage,x=a.renderExtraOverflowMenuItems,y=a.supportedFileTypes,z=a.threadKey,A=a.threadType,B=a.voiceRecorder,C=c("emptyFunction");a=l(!1);var D=a[0],E=a[1];a=d("LSMessagingThreadTypeUtil").isJoinedDiscoverablePublicBroadcastChannel(A);A=function(a){return E(a)};var F=a&&c("gkx")("735");u=c("isStickerEnabled")()&&u;p=p&&!c("gkx")("24133")&&f;f=q&&(!a||c("gkx")("23422"))&&(!F||t);q=i&&!c("gkx")("24134")&&b;a=o&&!c("gkx")("23427")&&t;i=e&&t;b=F||!c("gkx")("23421")&&(s||u)&&t;o=c("gkx")("23423");e=c("gkx")("23159");F=k(function(){if(x!=null)return x("var(--chat-composer-button-color)",C,v);else return[]},[x,C,v]);s=c("useMWV2ComposerOnPressVoiceClip")(B);var G=B.state.stage!=="Unopen",H=G?h._("__JHASH__gaxHiFwvIGk__JHASH__"):D?h._("__JHASH__SFruYEeI3S-__JHASH__"):h._("__JHASH__PUPO-44z1pF__JHASH__"),I=c("MessengerWebUXLogger").useInteractionLogger();u=p||f||q||a||i||b||o||e||r||F.length>0;var J=!u;return j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"start",onVisibilityChange:A,popoverProps:{color:"var(--chat-composer-button-color)",editor:g,extraItems:F,onAttachmentsAdded:v,onClose:C,onPressVoiceClip:s,onSendMessage:w,showCreatePoll:f,showCreatePrompt:r,showFile:i,showGenAICreate:o,showGenAICreateVideo:e,showGif:a,showPayment:p,showSendVoiceClip:q,showSticker:b,supportedFileTypes:y,threadKey:z},popoverResource:c("JSResourceForInteraction")("MWV2ComposerOverflowMenu.react").__setRef("MWV2ComposerPlusButton.react"),position:"above",preloadTrigger:"button",children:function(a,b,e,f,g,h){return j.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:H,children:j.jsx(c("MWXPressable.react"),{"aria-label":H,disabled:J,onHoverIn:f,onHoverOut:g,onPress:function(){if(G){B.reset();m.onReady(function(a){return a.logDeleteRecording()});I==null?void 0:I({eventName:"composer_close_audio_recorder"});return}else I==null?void 0:I({eventName:"composer_open_overflow_menu"}),b()},onPressIn:h,overlayDisabled:J,overlayRadius:"50%",ref:a,testid:void 0,xstyle:function(){return[c("gkx")("23219")?n.plusButtonMDS:n.plusButtonFDS]},children:j.jsx(d("MWChatComposerIcons").MWChatComposerIconsMoreActions,{fill:J?void 0:"var(--chat-composer-button-color)",isRotated:G,size:20})})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWHasPollsCreationEnabled",["LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=(a=d("MWLSThread").useThread(a,function(a){return d("LSThreadBitOffset").has(36,a)}))!=null?a:!1;return a}g["default"]=a}),98);
__d("MWReQLComposerPlusButton.react",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWV2ComposerPlusButton.react","react","useMWHasPollsCreationEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b,e=a.canSendAudioClip,f=a.canSendFile,g=a.canSendPayment,h=a.editor,j=a.isInputExpanded,k=a.onAttachmentsAdded,l=a.onSendMessage,m=a.renderExtraOverflowMenuItems,n=a.supportedFileTypes,o=a.thread;a=a.voiceRecorder;var p=c("useMWHasPollsCreationEnabled")(o.threadKey);b={hasAudioClipsCapability:(b=d("LSThreadBitOffset")).has(14,o),hasGIFCapability:b.has(4,o),hasPaymentCapability:b.has(0,o),hasPollCreationCapability:p,hasRollcallCapability:b.has(152,o),hasStickerCapability:b.has(3,o)};return i.jsx(c("MWV2ComposerPlusButton.react"),babelHelpers["extends"]({canSendAudioClip:e,canSendFile:f,canSendPayment:g,editor:h,hasPollCreationCapability:p,isInputExpanded:j,isSecureThread:d("LSMessagingThreadTypeUtil").isSecure(o.threadType),onAttachmentsAdded:k,onSendMessage:l,renderExtraOverflowMenuItems:m,supportedFileTypes:n,threadKey:o.threadKey,threadType:o.threadType,voiceRecorder:a},b))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatFileIcon.react",["ix","MWXIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx("div",{className:"x6s0dn4 x2bj2ny x14yjl9h xudhj91 x18nykt9 xww2gxu x78zum5 xl56j7k xmo9yow x1y1aw1k x1sxyh0 xwib8y2 xurb0ha",children:j.jsx(c("MWXIcon.react"),{color:"primary",icon:d("fbicon")._(h("908355"),16)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerMediaProgressBar.react",["MWPColorUtils","react","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.height;a=a.mediaStaging;var e=c("useMWPThreadTheme")();e=e.threadTheme;e=a.hasError?"var(--negative)":d("MWPColorUtils").int64ToHex(e.fallbackColor);var f=Math.ceil(a.progress*100),g=(b/2).toString();g="M 0,"+g+" L 100,"+g;return a.progress===1?null:i.jsxs("svg",{"aria-hidden":!0,className:"x1ey2m1c x10l6tqk x17qophe xh8yej3",preserveAspectRatio:"none",style:{height:b.toString()},viewBox:"0 0 100 "+b.toString(),children:[i.jsx("path",{d:g,stroke:"rgba(0,0,0,.5)",strokeLinecap:"round",strokeWidth:b.toString()}),i.jsx("path",{d:g,stroke:e,strokeLinecap:"round",strokeWidth:(f===0?0:b).toString(),style:{strokeDasharray:"100",strokeDashoffset:(100-f|0).toString(),transition:"stroke-dashoffset .5s, stroke .5s"}})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerMediaStagingItem.react",["fbt","ix","CometImageCover.react","I64","LSIntEnum","MWChatFileIcon.react","MWV2ComposerMediaProgressBar.react","MWXCircleButton.react","MWXIconCross","MWXImage.react","MWXText.react","MessagingAttachmentType","react","stylex"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=k||(k=d("react")),o=k.useCallback,p={button:{end:"xoo4vsp",left:null,right:null,position:"x10l6tqk",top:"x1v4kod4",$$css:!0},file:{alignItems:"x6s0dn4",display:"x78zum5",paddingStart:"xurb0ha",paddingLeft:null,paddingRight:null,paddingEnd:"x1sxyh0",paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",userSelect:"x87ps6o",$$css:!0},fileContainer:{width:"x2pejg6",$$css:!0},fileContent:{flexGrow:"x1iyjqo2",$$css:!0},filePreviewContainer:{backgroundColor:"x1vtvx1t",width:"x2pejg6",$$css:!0},itemContainer:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",height:"xsdox4t",marginTop:"xr9ek0c",marginEnd:"xq8finb",marginBottom:"xzueoph",marginStart:"x1mh8g0r",position:"x1n2onr6",width:"x1useyqa",$$css:!0},playIcon:{marginStart:"x16hk5td",marginLeft:null,marginRight:null,marginTop:"x7wgvq7",position:"x10l6tqk",start:"xtzzx4i",left:null,right:null,top:"xwa60dl",$$css:!0},previewContainer:{borderTopStartRadius:"x1a2cdl4",borderTopEndRadius:"xnhgr82",borderBottomEndRadius:"x1qt0ttw",borderBottomStartRadius:"xgk8upj",height:"xsdox4t",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",width:"x1useyqa",$$css:!0},video:{objectFit:"xl1xv1r",$$css:!0}};function a(a){var b=a.mediaStaging,e=a.onAttachmentRemoved;a=o(function(){return e(b.offlineAttachmentId)},[b.offlineAttachmentId,e]);var f=!(l||(l=d("I64"))).equal(b.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))&&!(l||(l=d("I64"))).equal(b.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))&&!q(b);return n.jsxs("div",{className:(j||(j=c("stylex")))(p.itemContainer,f&&p.fileContainer),"data-testid":void 0,children:[n.jsxs("div",{className:j(p.previewContainer,f&&p.filePreviewContainer),children:[n.jsx(r,{mediaStaging:b}),n.jsx(c("MWV2ComposerMediaProgressBar.react"),{height:4,mediaStaging:b})]}),n.jsx("div",{className:"xoo4vsp x10l6tqk x1v4kod4",children:n.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:h._("__JHASH__JpwWRvbxl3y__JHASH__"),onPress:a,size:24,type:"overlay"})})]})}a.displayName=a.name+" [from "+f.id+"]";function q(a){if(a.mimeType==="image/gif")return!0;else return a.mimeType==="image/webp"}function r(a){a=a.mediaStaging;var b=a.attachmentType,e=a.previewUrl;if(q(a)||(l||(l=d("I64"))).equal(b,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))if(e!=null)return n.jsx(c("CometImageCover.react"),{alt:"",src:e});else return null;if((l||(l=d("I64"))).equal(b,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))if(e!=null)return n.jsxs(n.Fragment,{children:[n.jsx("video",{className:"xl1xv1r",height:"48",src:e,width:"48"}),n.jsx("div",{className:"x16hk5td x7wgvq7 x10l6tqk xtzzx4i xwa60dl",children:n.jsx(c("MWXImage.react"),{src:i("354763")})})]});else return null;return n.jsxs("div",{className:"x6s0dn4 x78zum5 xurb0ha x1sxyh0 x1iorvi4 xjkvuk6 x87ps6o",children:[n.jsx(c("MWChatFileIcon.react"),{}),n.jsx("div",{className:"x1iyjqo2",children:n.jsx(c("MWXText.react"),{numberOfLines:2,type:"headline4",children:a.filename})})]})}r.displayName=r.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerMediaStaging.react",["fbt","ix","CometFileSelector.react","MWV2ComposerMediaStagingItem.react","MWXIcon.react","MWXPressable.react","fbicon","react","useMWV2ComposerOnFilesSelected"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={container:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",flexWrap:"xozqiw3",justifyContent:"x1nhvcw1",overflowX:"xw2csxc",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",width:"xh8yej3",$$css:!0},uploadPlaceholderRoot:{alignItems:"x6s0dn4",backgroundColor:"x1vtvx1t",borderTopStartRadius:"x1a2cdl4",borderTopEndRadius:"xnhgr82",borderBottomEndRadius:"x1qt0ttw",borderBottomStartRadius:"xgk8upj",display:"x78zum5",flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",height:"xsdox4t",justifyContent:"xl56j7k",marginEnd:"xq8finb",marginLeft:null,marginRight:null,position:"x1n2onr6",width:"x1useyqa",$$css:!0}};function m(a){var b=a.onAttachmentsAdded;a=a.supportedFileTypes;b=c("useMWV2ComposerOnFilesSelected")(b);return k.jsx(c("CometFileSelector.react"),{accept:a,multiple:!0,onFilesSelected:b,children:function(a){return k.jsx(c("MWXPressable.react"),{"aria-label":h._("__JHASH__Mhonj9wa21Q__JHASH__"),onPress:function(){return a()},xstyle:l.uploadPlaceholderRoot,children:k.jsx(c("MWXIcon.react"),{color:"primary",icon:d("fbicon")._(i("481777"),24),testid:void 0})})}})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.mediaStaging,d=a.onAttachmentRemoved,e=a.onAttachmentsAdded;a=a.supportedFileTypes;return b.length===0?null:k.jsxs("div",{className:"x6s0dn4 x9f619 x78zum5 xozqiw3 x1nhvcw1 xw2csxc xz9dl7a xn6708d xsag5q8 x1ye3gou xh8yej3",children:[k.jsx(m,{onAttachmentsAdded:e,supportedFileTypes:a}),b.map(function(a){return k.jsx(c("MWV2ComposerMediaStagingItem.react"),{mediaStaging:a,onAttachmentRemoved:d},a.offlineAttachmentId)})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWComposerAriaDescribedBy",["fbt","I64","Int64Hooks","MWPActor.react","ReQL","ReQLSuspense","intlList","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a){var b=a.threadKey,e=a.threadName,g=(j||(j=c("useReStore")))(),k=d("MWPActor.react").useActor(),l=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(g.tables.participants,["contactId"]).getKeyRange(b).map(function(a){return d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(a.contactId),f.id+":33")})},[g,b],f.id+":28");return d("Int64Hooks").useMemoInt64(function(){if(e!=null)return h._("__JHASH__AZYBx6Ry0lI__JHASH__",[h._param("name of conversation",e)]);var a=c("intlList")(l.map(function(a){if(a!=null&&!(i||(i=d("I64"))).equal(a.id,k))return a.name}).filter(Boolean),c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA);return h._("__JHASH__a-kg7czmDb1__JHASH__",[h._param("participant list",a)])},[l,e,k])}g["default"]=a}),98);
__d("useParticipantsExcludingViewer",["I64","MAWSubscribeToContactNames","MWPActor.react","MWWorkForeignEntityTypeUtils","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useMemo;function a(a){var b=a.threadKey,e=d("MWPActor.react").useActor(),g=(h||(h=c("useReStore")))(),j=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(g.tables.participants).getKeyRange(b).map(function(a){return[d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(a.contactId),f.id+":42"),a]})},[g,b],f.id+":36"),l=k(function(){return j.reduce(function(a,b){var c=b[0];b=b[1];if(c!=null&&!(i||(i=d("I64"))).equal(c.id,e)){return a.concat([[babelHelpers["extends"]({},c,{name:(c=c.name)!=null?c:d("MAWSubscribeToContactNames").getUnknownUser()}),b]])}return a},[])},[j,e]);return k(function(){return new Map(l.map(function(a){var b,e=a[1];a=a[0];return[(i||(i=d("I64"))).to_string(a.id),{actualName:a.name,contactId:i.to_string(a.id),isAdmin:(b=e.isAdmin)!=null?b:!1,isContact:!0,jobTitle:a.workJobTitle,name:a.name,nickname:e.nickname,profilePictureUrl:c("getLSMediaContactProfilePictureUrl")(a),secondaryName:a.secondaryName,workForeignEntityInfo:d("MWWorkForeignEntityTypeUtils").getWorkForeignEntityType(a.workForeignEntityType)}]}))},[l])}g["default"]=a}),98);
__d("MWV2ComposerView.react",["fbt","FBLogger","I64","LSMessagingThreadTypeUtil","LSThreadBitOffset","Locale","MWAudioRecorder.react","MWCMThreadTypes.react","MWComposerEndButtonsGroup.react","MWComposerInnerButtonsGroup.react","MWComposerStartButtonsGroup.react","MWPUseVoiceRecorder","MWReQLComposerInner.react","MWReQLComposerPlusButton.react","MWV2ComposerMediaStaging.react","MWV2ComposerSendButton.react","Promise","ReQL","ReQLSuspense","emptyFunction","gkx","isStickerEnabled","react","requireDeferred","stylex","useDeferredModuleOnReady","useMWComposerAriaDescribedBy","useMWEntrypoint","useParticipantsExcludingViewer","usePrevious","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=m||(m=d("react"));e=m;var o=e.useEffect,p=e.useId,q=e.useRef,r=c("requireDeferred")("MWChatAudioLog").__setRef("MWV2ComposerView.react"),s=c("requireDeferred")("getUpgradedCometEmojiComposerHandler").__setRef("MWV2ComposerView.react"),t={composer:{display:"x78zum5",flexGrow:"x1iyjqo2",transition:"x6q2ic0",$$css:!0},container:{flexGrow:"x1iyjqo2",overflowX:"xw2csxc",position:"x1n2onr6",$$css:!0},hidden:{display:"x1s85apg",$$css:!0},root:{alignItems:"xuk3077",backgroundColor:"x57kliw",display:"x78zum5",fontSize:"x6prxxf",paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0},visuallyHidden:{clip:"xzpqnlu",clipPath:"x1hyvwdk",height:"xjm9jq1",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",width:"x1i1rx1s",$$css:!0}};function u(a){var b=c("useDeferredModuleOnReady")(s);o(function(){if(b!=null)return b(a,16)},[a,b])}function v(){r.onReady(function(a){return a.logClickStartRecording()})}function w(){r.onReady(function(a){return a.logBrowserDenyAccess()})}function a(a){var e=a.canSendAudioClip;e=e===void 0?!0:e;var g=a.canSendFile;g=g===void 0?!0:g;var m=a.canSendGif;m=m===void 0?!0:m;var r=a.canSendPayment;r=r===void 0?!1:r;var s=a.canSendSticker;s=s===void 0?!0:s;var x=a.composerLinkPreview,y=a.editor,z=a.editorElementRef,A=a.hasStuffToSend,B=a.isAiBotMentionsEnabled,C=a.isMentionsPluginEnabled;C=C===void 0?!0:C;var D=a.localTimezoneInformation,E=a.maxAudioDuration,F=a.mediaStaging,G=a.onAttachmentRemoved,H=a.onAttachmentsAdded,I=a.onSendMessage,aa=a.placeholderText,ba=a.policyProduct,ca=a.renderExtraOverflowMenuItems,da=a.sendMessage,J=a.supportedFileTypes,ea=a.surface,K=a.thread;a=m&&d("LSThreadBitOffset").has(4,K)&&!c("gkx")("23427");m=d("MWCMThreadTypes.react").isBroadcastThread(K.threadType);var L=d("LSMessagingThreadTypeUtil").isAiBot(K.threadType);g=g&&(m||L?!c("gkx")("23428")&&d("LSThreadBitOffset").has(56,K):!c("gkx")("23428"));m=d("LSMessagingThreadTypeUtil").isSecure(K.threadType);L=c("isStickerEnabled")()&&m;s=s&&!c("gkx")("23421")&&(d("LSThreadBitOffset").has(3,K)||L);var M=c("useMWEntrypoint")(),N=d("MWPUseVoiceRecorder").useVoiceRecorder(E,v,w),O=N.state.stage!=="Unopen";E=function(){N.getVoiceClip().then(function(a){N.reset();I(void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,void 0,void 0);return(l||(l=b("Promise"))).resolve()})["catch"](function(a){c("FBLogger")("messenger_e2ee_web").catching(a).warn("Failed to send voice clip in messenger composer ");return(l||(l=b("Promise"))).reject(a)})};var P=q(null),Q=c("usePrevious")(O);o(function(){if(O===!0&&Q===!1){var a;(a=P.current)==null?void 0:a.focus()}},[O,P,Q]);var fa=c("useParticipantsExcludingViewer")({threadKey:K.threadKey}),ga=d("LSThreadBitOffset").has(43,K),R=d("Locale").isRTL(),S=c("gkx")("23219"),T=S?[36,8]:[32,4],U=T[0];T=T[1];var V=0+U|0,W=d("LSMessagingThreadTypeUtil").isCMSubthread(K.threadType);M=A||W&&M==="inbox";var X=V+U|0;U=R?{marginRight:M?S?8..toString()+"px":"0":((X+U|0)+T|0).toString()+"px"}:{marginLeft:M?S?8..toString()+"px":"0":((X+U|0)+T|0).toString()+"px"};T=c("useMWComposerAriaDescribedBy")(K);var Y=p();u(y);var ha=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(K.threadType),Z=(i||(i=c("useReStore")))(),$=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(Z.tables.custom_thread_commands).getKeyRange(K.threadKey).filter(function(a){return!a.isOpenPersistentMenu})},[Z,K.threadKey],f.id+":268")!=null;$=c("gkx")("23425")&&$;return n.jsxs("div",{"aria-label":h._("__JHASH__J510aPC_joc__JHASH__"),className:"xuk3077 x57kliw x78zum5 x6prxxf xz9dl7a xsag5q8","data-testid":void 0,role:"group",children:[n.jsx(c("MWReQLComposerPlusButton.react"),{canSendAudioClip:e,canSendFile:g,canSendPayment:r,editor:y,isInputExpanded:M,onAttachmentsAdded:H,onSendMessage:I,renderExtraOverflowMenuItems:ca,supportedFileTypes:J,thread:K,voiceRecorder:N}),O?n.jsxs(n.Fragment,{children:[n.jsx(c("MWAudioRecorder.react"),{voiceRecorder:N}),n.jsx(c("MWV2ComposerSendButton.react"),{onPress:E,ref:P})]}):null,n.jsxs("div",{className:(k||(k=c("stylex")))(O?t.hidden:!1,t.container),children:[n.jsx(c("MWComposerStartButtonsGroup.react"),{canSendFileFinal:g,canSendGifFinal:a,canSendSecureSticker:L,canSendStickerFinal:s,composerLinkPreview:x,gifButtonPosition:X,isInputExpanded:M,isRTL:R,isSecureThread:m,localTimezoneInformation:D,onAttachmentsAdded:H,onSendMessage:I,shouldUseMDS:S,stickerButtonPosition:V,supportedFileTypes:J,threadKey:K.threadKey,threadType:K.threadType}),n.jsxs("div",{className:"x78zum5 x1iyjqo2 x6q2ic0",style:U,children:[n.jsx("div",{className:"xzpqnlu x1hyvwdk xjm9jq1 x6ikm8r x10wlt62 x10l6tqk x1i1rx1s",id:Y,children:T}),n.jsx(c("MWReQLComposerInner.react"),{ariaDescribedBy:Y,contentEditableRef:z,editor:y,endContent:n.jsx(c("MWComposerInnerButtonsGroup.react"),{editor:y,shouldUseMDS:S,threadKey:K.threadKey}),handlePastedFiles:g?H:c("emptyFunction"),isAiBotMentionsEnabled:B,isSecureThread:m,participants:fa,placeholderText:aa,policyProduct:ba,surface:ea,testId:"chat_input:rich-input",threadID:(j||(j=d("I64"))).to_string(W?K.parentThreadKey:K.threadKey),topContent:n.jsx(c("MWV2ComposerMediaStaging.react"),{mediaStaging:F,onAttachmentRemoved:G,onAttachmentsAdded:H,supportedFileTypes:J}),useMentionsPlugin:C&&(B===!0?!0:ga&&d("LSMessagingThreadTypeUtil").isGroup(K.threadType))})]})]}),n.jsx(c("MWComposerEndButtonsGroup.react"),{customEmoji:K.customEmoji,editor:y,hasPersistentMenu:K.hasPersistentMenu,hasStuffToSend:A,isVoiceRecorderOpen:O,onSendMessage:I,sendMessage:da,shouldHideHotLike:ha,showCommands:$,threadKey:K.threadKey})]})}a.displayName=a.name+" [from "+f.id+"]";g.MWV2ComposerView=a}),98);
__d("MAWSendSecureMessageV2Utils",["I64","LSDatabaseSingleton","MAWMiActMaybeCreateActThread","MWPActor.react","ReQL","StickerConstants","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){var a=d("MWPActor.react").useActor();return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton),f=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.tables.participants,["contactId"]).getKeyRange(b).map(function(a){return(i||(i=d("I64"))).to_string(a.contactId)})));return c("MAWMiActMaybeCreateActThread")(e,b,{actorId:a,participantIds:f})});return function(a){return e.apply(this,arguments)}}()}function e(a){return a===c("StickerConstants").LIKE_STICKER_ID||a===c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||a===c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||a===c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID}g.useMaybeCreateThreadForMAWSendSecurMessageV2=a;g.isLikeStickerId=e}),98);
__d("useMAWFetchAndDispatchEphemeralSettings",["MAWGetEphemeralSettings","MAWMiActOnActThreadReady","MAWStateContext.react","Promise","WALoggerDeferred","WATimeUtils","asyncToGeneratorRuntime","gkx","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ephemeral settings in memory]: MAWGetEphemeralSettings for "," returns ",", set it to 0"]);k=function(){return a};return a}e=j||d("react");var l=e.useCallback,m=e.useContext;function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(a,b));if(b!=null&&b.ephemeralExpirationInSec!=null&&b.ephemeralLastUpdatedOrSetTimestamp!=null)c(a,b,!1);else{void d("WALoggerDeferred").LOG(k(),a,b);var e=d("WATimeUtils").unixTime();c(a,{ephemeralExpirationInSec:b==null?0:(c=b.ephemeralExpirationInSec)!=null?c:0,ephemeralLastUpdatedOrSetTimestamp:e},!1)}});return o.apply(this,arguments)}function a(){var a=(i||(i=c("useReStore")))(),e=m(d("MAWStateContext.react").MAWNonRerenderingStateContext),f=d("MAWStateContext.react").useDispatchEphemeralSettingsUpdatedForUI();return l(function(g){if(!c("gkx")("23920")){var i=e().state.ephemeralSettings;c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(a.tables,g,"fetch-ephemeral-settings",function(a,c,d){return i[d]!=null?(h||(h=b("Promise"))).resolve():n(d,g,f)}))}},[a,f,e])}g["default"]=a}),98);
__d("MAWSendSecureAttachment",["I64","MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWJobDefinitions","MAWUIJob","MAWUIThreadCache","QPLUserFlow","WAJobOrchestratorTypes","asyncToGeneratorRuntime","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("MWLogSend").__setRef("MAWSendSecureAttachment");function a(a,b,c,d,e,f,g,h,i,k,l,m,n){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,j,k,l,m,n,o,p,q){a=(yield d("MAWUIThreadCache").getThreadJidByChatId({threadId:a}));if(a==null){c("QPLUserFlow").endFailure(c("qpl")._(25313175,"1551"),"no_chat_jid",{instanceKey:n});return}var r=null;if(l!=null){l=d("MAWDbMsg").toMsgId(l.messageId);l!=null&&(r=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:l})))}c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_media_to_wajob",{instanceKey:n});l=q!=null?{msgId:q.offlineMsgId,ts:q.offlineMsgTimestamp}:void 0;switch(g.type){case"image":var s;q=g.imageSpec;var t=g.thumbnailUrlAndSpec;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{ephemeralSetting:(s=o)!=null?s:void 0,height:q.height,initiatingSource:p,isFirstMsg:m,isForwarded:!1,jpegThumbnail:t.jpegThumbnail,jpegThumbnailHeight:t.height,jpegThumbnailWidth:t.width,offlineAttachmentId:j,optimisticMsg:l,quote:(s=r)!=null?s:void 0,s2sInstanceKey:n,source:k,width:q.width},chatJid:a,externalId:d("MAWExternalId").generateExternalId(),file:g.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;case"video":t=g.thumbnailUrlAndSpec;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{duration:t.duration,ephemeralSetting:(s=o)!=null?s:void 0,height:t.height,initiatingSource:p,isFirstMsg:m,isForwarded:!1,jpegThumbnail:t.jpegThumbnail,jpegThumbnailHeight:t.height,jpegThumbnailWidth:t.width,offlineAttachmentId:j,optimisticMsg:l,quote:(q=r)!=null?q:void 0,s2sInstanceKey:n,source:k,width:t.width},chatJid:a,externalId:d("MAWExternalId").generateExternalId(),file:g.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;case"audio":s=g.durations;q=g.isPtt;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{duration:Math.round(s),ephemeralSetting:(t=o)!=null?t:void 0,initiatingSource:p,isFirstMsg:m,isForwarded:!1,isPtt:q,offlineAttachmentId:j,optimisticMsg:l,quote:(s=r)!=null?s:void 0,s2sInstanceKey:n,source:k},chatJid:a,externalId:d("MAWExternalId").generateExternalId(),file:g.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;case"document":t=g.filename;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{ephemeralSetting:(q=o)!=null?q:void 0,filename:t,initiatingSource:p,isFirstMsg:m,isForwarded:!1,offlineAttachmentId:j,optimisticMsg:l,quote:(s=r)!=null?s:void 0,s2sInstanceKey:n,source:k},chatJid:a,externalId:d("MAWExternalId").generateExternalId(),file:g.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;default:c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"uknown_file_type_sendMediaMsg_not_fired",{instanceKey:n})}var u;switch(g.type){case"image":u=8;break;case"video":u=10;break;case"audio":u=11;break;case"document":u=34;break}i.onReady(function(a){var c=(h||(h=d("I64"))).to_string(b);return a.log({actor:f,attachmentFbids:[],attachmentType:u,backend:1,hasReply:!1,messagingThreadId:c,offlineThreadingId:j,sendType:0,source:k,threadKey:b,threadType:e})});return a});return j.apply(this,arguments)}g.sendSecureAttachment=a}),98);
__d("MAWSendFileMsgIfNecessary",["FBLogger","MAWImagePreProcess","MAWSendSecureAttachment","Promise","asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.actorId,f=a.attachmentOfflineId,g=a.attachments,i=a.ephemeralSetting,j=a.externalAttachmentUrl,k=a.initiatingSource,l=a.isFirstMsg,m=a.offlineMsgIdAndTimestamps,n=a.reply,o=a.s2sInstanceKey,p=a.source,q=a.stickerId,r=a.thread,s=a.threadId;a=a.voiceClip;var t=[];if(a!=null){a={durations:a.duration||0,file:a.file,isPtt:!0,type:"audio"};t.push([a,f])}if(j!=null){a=(yield window.fetch(j,{cache:"no-cache"}).then(function(a){return a.blob()})["catch"](function(a){d("sendToSentQPLLogger").markSendToSentPoint(o,"fetch_external_attachment_failed");throw a}));j=q!=null;q=(yield d("MAWImagePreProcess").imagePreprocess(new File([a],"stickerFromPicker",{type:a.type}),j));t.push([q,f])}t=t.concat(g);d("sendToSentQPLLogger").markSendToSentPoint(o,"prepare_attachment_promises");a=t.map(function(a){var b=a[0];a=a[1];var c=m==null?void 0:m.get(a);return d("MAWSendSecureAttachment").sendSecureAttachment(s,r.threadKey,r.threadType,e,b,a,p,n,l,o,i,k,c)});yield (h||(h=b("Promise"))).all(a)["catch"](function(a){d("sendToSentQPLLogger").markSendToSentPoint(o,"send_attachment_promise_failed"),d("sendToSentQPLLogger").markSendToSentFail(o,a),a instanceof Error?c("FBLogger")("messenger_e2ee_web").catching(a).addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment promise").mustfix("Failed while sending message"):c("FBLogger")("messenger_e2ee_web").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment promise").mustfix("Failed while sending attachment, %s",a.message)})});return i.apply(this,arguments)}g.sendFileMsgIfNecessary=a}),98);
__d("useLSMessagingInitiatingSourceNumber",["LSMessagingInitiatingSource","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(a==null)return;else if(a==="Inbox")return c("LSMessagingInitiatingSource").FACEBOOK_INBOX;else if(a==="FullscreenChat")return c("LSMessagingInitiatingSource").FACEBOOK_FULLSCREEN;else if(a==="ChatTab")return c("LSMessagingInitiatingSource").FACEBOOK_CHAT;else return c("LSMessagingInitiatingSource").ROOMS_SIDE_CHAT}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessageWithAttachments",["I64","LSAuthorityLevel","LSIntEnum","MAWAdminMsg","MAWBumpThread","MAWCreateOptimisticSecureMessage","MAWLocalizationType","MWPActor.react","MessagingAttachmentType","Promise","QPLUserFlow","asyncToGeneratorRuntime","qpl","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(){var a=(k||(k=c("useReStore")))(),e=d("MWPActor.react").useActor();return function(f,g,k,o,p,q,r,s){var t=l(p.type);return t==null?(j||(j=b("Promise"))).resolve():a.runInTransaction(function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var j=(yield d("MAWCreateOptimisticSecureMessage").createOfflineMessageIdAndTimestamp(b,g,q,r)),l=(h||(h=d("I64"))).of_float(j.offlineMsgTimestamp),u=(yield d("MAWCreateOptimisticSecureMessage").createOptimisticMessageTxn(a,b,e,f,"",g,void 0,q,void 0,j.offlineMsgId,l,m(p.type),s));yield b.messages.add(u);u={attachmentFbid:String(o),attachmentIndex:h.zero,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(t),authorityLevel:i.ofNumber(c("LSAuthorityLevel").OPTIMISTIC),filename:p.filename,hasMedia:!0,hasXma:!1,isSharable:!1,messageId:j.offlineMsgId,offlineAttachmentId:k,previewUrl:p.url,threadKey:g,timestampMs:l};if(p.type==="image"||p.type==="video"){var v;u=babelHelpers["extends"]({},u,{previewHeight:((v=p.thumbnailSpec)==null?void 0:v.height)?(h||(h=d("I64"))).of_float((v=p.thumbnailSpec)==null?void 0:v.height):void 0,previewWidth:((v=p.thumbnailSpec)==null?void 0:v.width)?(h||(h=d("I64"))).of_float((v=p.thumbnailSpec)==null?void 0:v.width):void 0})}yield b.attachments.add(u);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:q});v=n(p.type);v!=null&&(yield d("MAWBumpThread").threadMutation(b,g,l,l,v,e));return j});return function(a){return j.apply(this,arguments)}}(),"readwrite","ui")}}function l(a){switch(a){case"image":return c("MessagingAttachmentType").IMAGE;case"video":return c("MessagingAttachmentType").VIDEO;case"audio":return c("MessagingAttachmentType").AUDIO;case"document":return c("MessagingAttachmentType").FILE;default:return null}}function m(a){switch(a){case"image":return 2;case"video":return 2;case"audio":return 4;case"document":return 64;default:return 1}}function n(a){switch(a){case"image":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_IMAGE);case"video":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_VIDEO);case"audio":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_AUDIO);case"document":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_ATTACHMENT);default:return null}}g["default"]=a}),98);
__d("useMarkOptimisticMessageAsFailed",["LSFactory","LSMarkOptimisticMessageFailedStoredProcedure","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return j(function(b,d){return a.runInTransaction(function(a){return c("LSMarkOptimisticMessageFailedStoredProcedure")(c("LSFactory")(a),{errorMessage:d,optimisticMid:b})},"readwrite")},[a])}g["default"]=a}),98);
__d("useMAWSendSecureAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","MAWExternalId","MAWGetEphemeralSettings","MAWInternalLog","MAWMediaManagerUtils","MAWSendFileMsgIfNecessary","MAWSendSecureMessageV2Utils","MAWStateContext.react","MWPActor.react","Promise","QPLUserFlow","WALoggerDeferred","WAStanzaUtils","asyncToGeneratorRuntime","qex","qpl","react","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMWLSDefaultThreadSource","useMarkOptimisticMessageAsFailed"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useContext;function a(a,b,c){return l(a,b,c,d("MAWMediaManagerUtils").MAWMediaManagerAttachments)}function l(a,b,c,e){var f=b.hasFile,g=b.hasImage;b=b.hasVideo;var h=null;if(b||g||f){b=a[a.length-1];h=d("WAStanzaUtils").toStanzaId(b.offlineAttachmentId)}else h=d("MAWExternalId").generateExternalId();c(h);g=a.reduce(function(a,b){var c=e.get(b.offlineAttachmentId);c!=null&&a.push([c,d("WAStanzaUtils").toStanzaId(b.offlineAttachmentId)]);return a},[]);return{attachmentOfflineId:h,attachments:g}}function e(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=d("MAWSendSecureMessageV2Utils").useMaybeCreateThreadForMAWSendSecurMessageV2(),g=c("useLSMessagingInitiatingSourceNumber")(),j=k(d("MAWStateContext.react").MAWNonRerenderingStateContext);return d("Int64Hooks").useCallbackInt64(function(){var k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(k){var l=k.externalAttachmentUrl,m=k.messageTypeParams,n=k.preparedAttachments,o=k.reply,p=k.s2sInstanceKey,q=k.stickerId,r=k.thread;k=k.voiceClip;m=m.hasAttachment;if(!m)return;m=n.attachmentOfflineId;n=n.attachments;var s=e(r.threadKey),t=(yield (h||(h=b("Promise"))).all([(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(r.threadKey)])),u=t[0];t=t[1];var v=j().state.ephemeralSettings[t.jid];v==null&&(v=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(t.jid,r.threadKey)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:p});m={actorId:a,attachmentOfflineId:m,attachments:n,db:u,ephemeralSetting:v,externalAttachmentUrl:l,initiatingSource:g,isFirstMsg:t.created,reply:o,s2sInstanceKey:p,source:s,stickerId:q,thread:r,threadId:t.chatId,voiceClip:k};return d("MAWSendFileMsgIfNecessary").sendFileMsgIfNecessary(m)});return function(a){return k.apply(this,arguments)}}(),[a,j,e,g,f])}function f(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=d("MAWSendSecureMessageV2Utils").useMaybeCreateThreadForMAWSendSecurMessageV2(),g=c("useLSMessagingInitiatingSourceNumber")(),j=k(d("MAWStateContext.react").MAWNonRerenderingStateContext),m=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),n=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),o=c("useMarkOptimisticMessageAsFailed")();return d("Int64Hooks").useCallbackInt64(function(){var k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(k){var p=k.externalAttachmentUrl,q=k.lssTraceApi,r=k.mediaStagings,s=k.messageTypeParams,t=k.onGenerateOfflineMsgId,u=k.reply,v=k.s2sInstanceKey,w=k.stickerId,x=k.thread;k=k.voiceClip;var y=new Map();try{var z=s.hasAttachment;if(!z)return;var A=new Map();c("qex")._("874")===!0&&(q==null?void 0:q.addMarkerPoint("create_optimistic_message_start","AppTiming"),yield (h||(h=b("Promise"))).all(r.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);if(e==null||e.optimisticMedia==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to find optimistic media attachment in useMAWSendSecureAttachmentMessage");return null}b=(yield m(u,x.threadKey,a.offlineAttachmentId,b,e.optimisticMedia,v,t));if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message");return null}y.set(a.offlineAttachmentId,b);n(b.offlineMsgId,b.offlineMsgTimestamp)});return function(b,c){return a.apply(this,arguments)}}())),q==null?void 0:q.addMarkerPoint("create_optimistic_message_end","AppTiming"));yield (h||(h=b("Promise"))).all(r.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);if(b==null){c("FBLogger")("messenger_e2ee_web").mustfix("Failed while sending secure media message: unable to find media attachment in useMAWSendSecureAttachmentMessage");return}yield b.processedMediaPromise.then(function(b){A.set(a.offlineAttachmentId,b)})});return function(b){return a.apply(this,arguments)}}()));z=l(r,s,t,A);q=z.attachmentOfflineId;s=z.attachments;z=e(x.threadKey);var B=(yield h.all([(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(x.threadKey)])),C=B[0];B=B[1];var D=j().state.ephemeralSettings[B.jid];D==null&&(D=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(B.jid,x.threadKey)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:v});q={actorId:a,attachmentOfflineId:q,attachments:s,db:C,ephemeralSetting:D,externalAttachmentUrl:p,initiatingSource:g,isFirstMsg:B.created,offlineMsgIdAndTimestamps:y,reply:u,s2sInstanceKey:v,source:z,stickerId:w,thread:x,threadId:B.chatId,voiceClip:k};return d("MAWSendFileMsgIfNecessary").sendFileMsgIfNecessary(q)}catch(a){var E=a instanceof Error?a.message:"Fail to send secure attachment message";y.forEach(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield o(a.offlineMsgId,E)});return function(b,c){return a.apply(this,arguments)}}());d("MAWInternalLog").internalLog("useMAWSendSecureAttachmentMessage: send attachment message failed: "+a);yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureAttachmentMessage"],["Send attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}finally{r.map(function(a){return d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2["delete"](a.offlineAttachmentId)})}});return function(a){return k.apply(this,arguments)}}(),[a,m,n,j,e,g,o,f])}g.prepareAttachmentsFromMediaManager_DEPRECATED=a;g.useMAWSendSecureAttachmentMessage_DEPRECATED=e;g.useMAWSendSecureAttachmentMessageV2=f}),98);
__d("useMAWCreateOptimisticSecureMessage",["I64","LSHotEmojiSize","LSIntEnum","MAWAdminMsg","MAWBumpThread","MAWCreateOptimisticSecureMessage","MAWLocalizationType","MWPActor.react","QPLUserFlow","asyncToGeneratorRuntime","cr:2472","qpl","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=(j||(j=c("useReStore")))(),e=d("MWPActor.react").useActor();return function(f,g,j,k,l,m,n,o){return a.runInTransaction(function(){var p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(p){var q=(yield d("MAWCreateOptimisticSecureMessage").createOfflineMessageIdAndTimestamp(p,j,l,n)),r=(h||(h=d("I64"))).of_float(q.offlineMsgTimestamp),s=(yield d("MAWCreateOptimisticSecureMessage").createOptimisticMessageTxn(a,p,e,f,g,j,k,l,m,q.offlineMsgId,r,1,o));yield p.messages.add(s);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:l});s=b("cr:2472")==null?g:b("cr:2472").unvault(g);s=k!=null&&(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))&&s==="\ud83d\udc4d"?"(Y)":g;yield d("MAWBumpThread").threadMutation(p,j,r,r,d("MAWAdminMsg").buildLocalizedString([s],[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT),e);return q});return function(a){return p.apply(this,arguments)}}(),"readwrite","ui")}}g["default"]=a}),98);
__d("MWV2ComposerActionsContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;c=b.createContext;var j=b.useContext,k=b.useMemo,l=c({});function a(a){var b=a.children,c=a.onMessageSendAttempt;a=j(l);var d=a.onMessageSendAttempt;a=k(function(){return{onMessageSendAttempt:function(a){d==null?void 0:d(a),c==null?void 0:c(a)}}},[d,c]);return i.jsx(l.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g.MWV2ComposerActionsContext=l;g.MWV2ComposerActionsListener=a}),98);
__d("useMAWSendMessageV2",["I64","LSHotEmojiSize","LSIntEnum","MAWExternalId","MAWJobDefinitions","MAWTimedJob","MWPActor.react","MWPReplyContext.react","MWV2ComposerActionsContext.react","QPLUserFlow","WAJobOrchestratorTypes","asyncToGeneratorRuntime","qpl","react","requireDeferred","useLSMessagingInitiatingSourceNumber"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useContext,l=c("requireDeferred")("MWLogSend").__setRef("useMAWSendMessageV2");function m(a){if(a==null)return;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL)))return 1;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM)))return 2;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))return 3}function a(){var a=d("MWPActor.react").useActor(),e=k(d("MWPReplyContext.react").MWPReplyContext),f=e.reply,g=c("useLSMessagingInitiatingSourceNumber")();e=k(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext);var h=e.onMessageSendAttempt;return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e,j,k,n,o,p,q,r,s,t,u,v,w,x,y,z,A){h==null?void 0:h(!0);e=babelHelpers["extends"]({content:n,initiatingSource:g,isFirstMsg:t,isForwarded:!1,openMessageOtid:p,openMessageParticipantCount:u,optimisticMsg:{msgId:q,ts:r},participantCount:v,s2sInstanceKey:z,s2sUserFlowQPLEvent:c("qpl")._(25313175,"1551"),source:o,specialTextSize:m(s)},w!=null&&{quote:w});x!=null&&(e.ephemeralSetting=x);y!=null&&(e.mentionedJids=[].concat(y));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob",{instanceKey:z});yield d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMsg",{args:e,chatJid:k,externalId:A!=null?A:d("MAWExternalId").generateExternalId(),scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));l.onReady(function(c){var e=(i||(i=d("I64"))).to_string(b),g=s!=null?3:0;return c.log({_mentionedJids:y,actor:a,attachmentFbids:[],attachmentType:g,backend:1,hasReply:f!=null,messagingThreadId:e,msgTtl:x==null?void 0:x.ephemeralExpirationInSec,offlineThreadingId:A,sendType:0,source:o,threadKey:b,threadType:j})})});return function(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return e.apply(this,arguments)}}()}g["default"]=a}),98);
__d("useMAWSendSecureTextMessage",["MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWGetEphemeralSettings","MAWInternalLog","MAWSendSecureMessageV2Utils","MAWStateContext.react","MAWVault","Promise","WALoggerDeferred","asyncToGeneratorRuntime","emptyFunction","gkx","react","useMAWCreateOptimisticSecureMessage","useMAWSendMessageV2","useMWLSDefaultThreadSource","useMarkOptimisticMessageAsFailed"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useCallback,k=e.useContext;function a(){var a=c("useMWLSDefaultThreadSource")(),e=d("MAWSendSecureMessageV2Utils").useMaybeCreateThreadForMAWSendSecurMessageV2(),f=k(d("MAWStateContext.react").MAWNonRerenderingStateContext),g=c("useMAWSendMessageV2")(),i=c("useMAWCreateOptimisticSecureMessage")(),l=c("useMarkOptimisticMessageAsFailed")(),m=d("MAWStateContext.react").useDispatchOptimisticSendMessage();return j(function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j){var k=j.hotEmojiSize,n=j.lssTraceApi,o=j.mentionedJids,p=j.messageText,q=j.onGenerateOfflineMsgId,r=j.reply,s=j.s2sInstanceKey;j=j.thread;var t=c("gkx")("23990")?d("MAWExternalId").generateExternalId():void 0,u=null;try{var v;n==null?void 0:n.addMarkerPoint("create_optimistic_message_start","AppTiming");q=(yield (h||(h=b("Promise"))).all([e(j.threadKey),i(r,d("MAWVault").vault(p),j.threadKey,k,(v=s)!=null?v:0,o,(v=q)!=null?v:c("emptyFunction"),t)]));v=q[0];q=q[1];n==null?void 0:n.addMarkerPoint("create_optimistic_message_end","AppTiming");u=q.offlineMsgId;n=q.offlineMsgTimestamp;m(u,Date.now());q=f().state.ephemeralSettings[v.jid];q==null&&(q=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(v.jid,j.threadKey)));var w=a(j.threadKey),x=null;if(r!=null){r=d("MAWDbMsg").toMsgId(r.messageId);r!=null&&(x=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:r})))}return g(j.threadKey,v.chatId,j.threadType,v.jid,p,w,void 0,u,n,k,v.created,void 0,void 0,x,q,o,s,t)}catch(a){r=a instanceof Error?a.message:"Fail to send secure text message";u!=null&&(yield l(u,r));d("MAWInternalLog").internalLog("useMAWSendSecureTextMessage: send text message failed: "+a);yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureTextMessage"],["Send text message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a){return j.apply(this,arguments)}}(),[i,m,f,a,l,e,g])}g["default"]=a}),98);
__d("useMAWSendSecureLinkXMAMessage",["FBLogger","Int64Hooks","MAWExternalId","MAWExternalLinkUtil","MAWSendSecureMessageV2Utils","asyncToGeneratorRuntime","useMAWSendSecureTextMessage","useMWLSDefaultThreadSource"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useMWLSDefaultThreadSource")(),e=d("MAWSendSecureMessageV2Utils").useMaybeCreateThreadForMAWSendSecurMessageV2(),f=c("useMAWSendSecureTextMessage")();return d("Int64Hooks").useCallbackInt64(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var g=b.mentionedJids,h=b.messageText,i=b.onGenerateOfflineMsgId,j=b.reply,k=b.s2sInstanceKey,l=b.thread;b=b.threadKey;var m=d("MAWExternalLinkUtil").findFirstUrl(h);if(m==null||m.length===0)return f({mentionedJids:g,messageText:h,onGenerateOfflineMsgId:i,reply:j,s2sInstanceKey:k,thread:l});try{g=m[0];j=d("MAWExternalLinkUtil").findFirstAvailableOembedUrlAndRequestPair(m);l=g.entity.url;m=null;if(j!=null){l=j.oEmbedUrl;try{m=(yield d("MAWExternalLinkUtil").getOembedResponse(j.oEmbedRequest))}catch(a){c("FBLogger")("messenger_e2ee_web").mustfix("[External link] Failed to send External Link XMA.")}}g=d("MAWExternalId").generateExternalId();i==null?void 0:i(g);j=a(b);i=(yield e(b));return d("MAWExternalLinkUtil").sendExternalLinkXMA(h,m,l,i.jid,k,j,b,g)}catch(a){c("FBLogger")("messenger_e2ee_web").mustfix("[External link] Failed to send external link XMA ");throw a}});return function(a){return g.apply(this,arguments)}}(),[a,e,f])}g["default"]=a}),98);
__d("useMAWUpdateThreadCapabilities",["LSMessagingThreadTypeUtil","MAWUpdateLSThreadCapabilities","Promise","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(){var a=(i||(i=c("useReStore")))();return k(function(c){return!d("LSMessagingThreadTypeUtil").isOneToOne(c.threadType)?(h||(h=b("Promise"))).resolve():a.runInTransaction(function(a){return d("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(a,c.threadKey)},"readwrite")},[a])}g["default"]=a}),98);
__d("useMAWSendSecureMessageV2Impl",["FBLogger","I64","Int64Hooks","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadTypeUtil","MAWInternalLog","MAWOptimisticUpdateContactRelationship","MWLSLogSend","MWPActor.react","MWPReplyContext.react","MWPreloadableQueries","MWSharedMsgLogUtils","MWVersion","MessageRequestsLog","Promise","ReQL","WALoggerDeferred","asyncToGeneratorRuntime","qex","react","sendToSentQPLLogger","useLSMessagingInitiatingSource","useMAWSendSecureAttachmentMessage","useMAWSendSecureLinkXMAMessage","useMAWSendSecureTextMessage","useMAWUpdateThreadCapabilities","useMWLSUnarchiveThread"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=(i||d("react")).useContext;function a(a){var e=d("MWPActor.react").useActor(),f=m(d("MWPReplyContext.react").MWPReplyContext),g=f.clearReply,i=c("useLSMessagingInitiatingSource")(),n=c("useMAWSendSecureTextMessage")(),o=c("useMAWSendSecureLinkXMAMessage")(),p=d("useMAWSendSecureAttachmentMessage").useMAWSendSecureAttachmentMessage_DEPRECATED(),q=d("useMAWSendSecureAttachmentMessage").useMAWSendSecureAttachmentMessageV2(),r=c("useMWLSUnarchiveThread")(),s=c("useMAWUpdateThreadCapabilities")();return d("Int64Hooks").useCallbackInt64(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){var m=f.externalAttachmentUrl,t=f.hotEmojiSize,u=f.lssTraceApi,v=f.mentionedJids,w=f.messageText,x=f.reply,y=f.s2sInstanceKey,z=y===void 0?0:y;y=f.stickerId;var A=f.thread;f=f.voiceClip;d("MAWInternalLog").internalLog("start to send message from UI");yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer"],["Starting message send"],"LOG");d("sendToSentQPLLogger").markSendToSentPoint(z,"send_secure_message_started");u.addMarkerPoint("send_secure_message_started","AppTiming");var B=(yield (j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton),C=d("LSMessagingThreadTypeUtil").isMessageRequest(A),D=(k||(k=d("I64"))).equal(A.parentThreadKey,(l||(l=d("LSIntEnum"))).ofNumber(-10)),E=(yield d("ReQL").toArrayAsync(d("MWPreloadableQueries").getMediaStagingQuery(B,A.threadKey))),F=d("MWSharedMsgLogUtils").getMessageTypeParams(w,t,x,y,m,f,E);d("sendToSentQPLLogger").addSendToSentAnnotations(z,yield d("MWSharedMsgLogUtils").getSendToSentAnnotations(A,F,i));d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(u,F,A,i);var G=function(a){d("MWLSLogSend").logSentHeroInteraction(u,a,{initiatingSource:i,isMessageRequest:C,mwVersion:d("MWVersion").v2,threadType:A.threadType}),d("sendToSentQPLLogger").markSendToSentPoint(z,"offline_msg_id_generated"),d("MWLSLogSend").setS2sKeyForOfflineMessageId(a,z)},H=[],I=F.hasAttachment,J=F.hasLinks;w!=null&&w!==""&&(J?H.push(o({mentionedJids:v,messageText:w,onGenerateOfflineMsgId:I?void 0:G,reply:x,s2sInstanceKey:z,thread:A,threadKey:A.threadKey})):H.push(n({hotEmojiSize:t,lssTraceApi:u,mentionedJids:v,messageText:w,onGenerateOfflineMsgId:I?void 0:G,reply:x,s2sInstanceKey:z,thread:A})));if(I)if(c("qex")._("460")===!0)H.push(q({externalAttachmentUrl:m,lssTraceApi:u,mediaStagings:E,messageTypeParams:F,onGenerateOfflineMsgId:G,reply:x,s2sInstanceKey:z,stickerId:y,thread:A,voiceClip:f}));else{t=d("useMAWSendSecureAttachmentMessage").prepareAttachmentsFromMediaManager_DEPRECATED(E,F,G);H.push(p({externalAttachmentUrl:m,messageTypeParams:F,preparedAttachments:t,reply:x,s2sInstanceKey:z,stickerId:y,thread:A,voiceClip:f}))}a();g(A.threadKey,!1);yield (h||(h=b("Promise"))).all(H)["catch"](function(a){d("sendToSentQPLLogger").markSendToSentFail(z,a);a instanceof Error?c("FBLogger")("messenger_e2ee_web").catching(a).addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","hasAttachment: "+I.toString()).mustfix("Failed while sending secure message in useMAWSendSecureMessageV2Impl"):c("FBLogger")("messenger_e2ee_web").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","hasAttachment: "+I.toString()).mustfix("Failed while sending secure message in useMAWSendSecureMessageV2Impl, %s",a.message);throw a});w!=null&&w!==""&&J&&d("sendToSentQPLLogger").markSendToSentSuccess(z);d("MAWInternalLog").internalLog("send message is done");yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer"],["Send message is done"],"LOG");d("MAWOptimisticUpdateContactRelationship").call(A,B,e);yield s(A);C&&d("MessageRequestsLog").logActionConfirmed(A,1);D&&r(A.threadKey)});return function(a){return f.apply(this,arguments)}}(),[e,g,i,a,p,q,o,n,r,s])}g["default"]=a}),98);
__d("useMAWSendSecureMessageV2",["I64","Int64Hooks","MAWJids","MAWSendSecureMessageV2Utils","MWPReplyContext.react","WALoggerDeferred","promiseDone","qpl","react","sendToSentQPLLogger","unrecoverableViolation","useCometInteractionTracing","useMAWFetchAndDispatchEphemeralSettings","useMAWSendSecureMessageV2Impl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useContext;function a(a,b,e){var f=j(d("MWPReplyContext.react").MWPReplyContext),g=f.reply,h=c("useMAWSendSecureMessageV2Impl")(e),k=c("useCometInteractionTracing")(c("qpl")._(30605384,"573"),"fast","INTERACTION",void 0),l=c("useMAWFetchAndDispatchEphemeralSettings")();d("Int64Hooks").useEffectInt64(function(){l(a.threadKey)},[l,a.threadKey]);return function(e,f,j,l,m,n,o,p,q,r){c("promiseDone")(d("WALoggerDeferred").logWithTags(["Composer"],["Calling useMAWSendSecureMessageV2"],"LOG"));var s=f==null?void 0:f.map(function(a){return d("MAWJids").toUserJid(a.id)}),t=e;j!=null&&d("MAWSendSecureMessageV2Utils").isLikeStickerId((i||(i=d("I64"))).to_string(j))&&(t="\ud83d\udc4d");var u=d("sendToSentQPLLogger").markSendToSentStart();k(function(e){c("promiseDone")(h({externalAttachmentUrl:n,hotEmojiSize:l,lssTraceApi:e,mentionedJids:s,messageText:t,reply:g,s2sInstanceKey:u,stickerId:j,thread:a,voiceClip:p}),b,function(a){d("sendToSentQPLLogger").markSendToSentFail(u,a);e.failTrace(a,!0);throw c("unrecoverableViolation")("Encountered failure during Armadillo Message Send (UI)","messenger_e2ee_web",{error:a})})})}}g["default"]=a}),98);
__d("MWChatFilePreProcessingErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:h._("__JHASH__rp1B2ks3qwV__JHASH__"),title:h._("__JHASH__Tgh_5naYWqz__JHASH__")};g.invalidFileFormat=a}),98);
__d("MWChatFileUploadErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){return{body:h._("__JHASH__Tr8urrZ1rc1__JHASH__",[h._param("size",a)]),title:h._("__JHASH__GVmFuh2jycz__JHASH__")}};g.maxFileSizeExceeded=a}),98);
__d("MWSharedMediaManagerUtils",["I64","LSGetAttachmentType","LSIntEnum","LSMailboxType","MWPreloadableQueries","Promise","ReQLSuspense","asyncToGeneratorRuntime","justknobx","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){return new(k||(k=b("Promise")))(function(b){var c=new Image();c.onload=function(){return b({previewHeight:c.height,previewWidth:c.width})};c.onerror=function(){return b()};c.src=a})}function m(a){return new(k||(k=b("Promise")))(function(b){var c=document.createElement("video");c.onloadedmetadata=function(){return b({previewHeight:c.videoHeight,previewWidth:c.videoWidth})};c.onerror=function(){return b()};c.src=a})}function n(a,b){if(b==null||a==null)return;var c=Math.floor(a.previewHeight*b.previewWidth/a.previewWidth);return c>=b.previewHeight?{previewHeight:(i||(i=d("I64"))).of_float(c),previewWidth:i.of_float(b.previewWidth)}:{previewHeight:(i||(i=d("I64"))).of_float(b.previewHeight),previewWidth:i.of_float(a.previewWidth*b.previewHeight/a.previewHeight)}}function a(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=(yield (k||(k=b("Promise"))).all(e.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];var e=URL.createObjectURL(b),g;c("justknobx")._("1704")===!0&&b.type.includes("video/")?g=(yield m(e)):g=(yield l(e));return[{attachmentType:c("LSGetAttachmentType")(b),durationMs:void 0,fbid:void 0,filename:b.name,fileSize:(i||(i=d("I64"))).of_int32(b.size),hasError:!1,isSent:!1,mailboxType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),mimeType:b.type,offlineAttachmentId:a,offlineThreadingId:void 0,previewUrl:e,progress:0,threadKey:f},g]});return function(b){return a.apply(this,arguments)}}())));yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield a.sync_groups.get((i||(i=d("I64"))).of_float(1))),e;if((c==null?void 0:c.syncParams)!=null){c=JSON.parse(c.syncParams);var f=c.preview_height;c=c.preview_width;e={previewHeight:f,previewWidth:c}}yield (k||(k=b("Promise"))).all(g.map(function(b){var c=b[0];b=b[1];return a.media_staging.add(babelHelpers["extends"]({},c,n(b,e)))}))});return function(b){return a.apply(this,arguments)}}(),"readwrite")});return o.apply(this,arguments)}function e(a,b){return a.runInTransaction(function(a){return a.media_staging["delete"](b)},"readwrite")}function p(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){return d("MWPreloadableQueries").getMediaStagingQuery(b,a.threadKey)},[b,a.threadKey],f.id+":167")}g.insertMediaStaging=a;g.deleteMediaStaging=e;g.useMediaStaging=p}),98);
__d("MWMediaManager",["FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWChatFilePreProcessingErrorDialog.react","MWChatFileUploadErrorDialog.react","MWPActor.react","MWSharedMediaManagerUtils","Promise","cr:8525","emptyFunction","gkx","promiseDone","qex","requireDeferred","useMWXAlertDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("MWOpenMediaManagerUtils").__setRef("MWMediaManager"),l=function(){if(b("cr:8525")==null){c("FBLogger")("messenger_web_product").warn("Unsupported thread type for media upload");return(j||(j=b("Promise"))).resolve(null)}return b("cr:8525").load()},m=c("gkx")("24138")?75:25;function n(a,d){if(d)if(c("qex")._("460")===!0)return l().then(function(c){return(j||(j=b("Promise"))).resolve((c=c==null?void 0:c.preprocessV2(a))!=null?c:[])});else return l().then(function(c){return(c=c==null?void 0:c.preprocess_DEPRECATED(a))!=null?c:(j||(j=b("Promise"))).resolve([])});else return k.load().then(function(b){return b.preprocess(a)})}function o(a,b,c){for(var d=0;d<a.length;d++){var e=a[d],f=c(e,b);if(e.size>f*1024*1024)return f}return null}function a(a){var e=a.chatSupportUserId,f=a.chatSupportUserNonce,g=a.getMaxAttachmentSizeInMB,p=g===void 0?function(){return m}:g,q=a.isChatSupportUser,r=a.onUploadFailure,s=a.onUploadStart,t=a.onUploadSuccess,u=a.showUploadFailureToast,v=a.thread,w=(i||(i=c("useReStore")))(),x=c("useMWXAlertDialog")({onClose:c("emptyFunction")}),y=d("LSMessagingThreadTypeUtil").isSecure(v.threadType),z=d("MWSharedMediaManagerUtils").useMediaStaging(v),A=d("MWPActor.react").useActor();g=d("Int64Hooks").useCallbackInt64(function(a){var g=o(a,y,p);if(g!=null){x(d("MWChatFileUploadErrorDialog.react").maxFileSizeExceeded(g),c("emptyFunction"));return}c("promiseDone")(n(a,y)["catch"](function(){x(d("MWChatFilePreProcessingErrorDialog.react").invalidFileFormat,c("emptyFunction"));return(j||(j=b("Promise"))).resolve([])}).then(function(a){c("promiseDone")(d("MWSharedMediaManagerUtils").insertMediaStaging(w,a,v.threadKey));var b=v.threadKey;return y?l().then(function(c){return c==null?void 0:c.upload(w,b,a)}):k.load().then(function(c){return c.upload(w,b,a,u,s,t,r,q,e,f,(h||(h=d("I64"))).to_string(A))})}))},[A,e,f,w,p,q,y,r,s,t,x,u,v.threadKey]);a=function(a){c("promiseDone")(d("MWSharedMediaManagerUtils").deleteMediaStaging(w,a).then(function(){if(y&&b("cr:8525")!=null)return b("cr:8525").load().then(function(b){b.MAWMediaManagerAttachments["delete"](a)})}))};var B=function(){var a=z.map(function(a){return a.offlineAttachmentId});a.forEach(function(a){d("MWSharedMediaManagerUtils").deleteMediaStaging(w,a)["catch"](function(a){c("FBLogger")("MWMediaManager").catching(a).mustfix("Error deletting media staging.")})});y&&b("cr:8525")!=null&&c("promiseDone")(b("cr:8525").load().then(function(b){b.clearAttachments(a)}))};return{handleFileRemove:a,handleFileSelect:g,mediaStaging:z,resetAttachments:B}}g.useMediaManager=a}),98);
__d("useMWMediaManagerUploadFailedToast",["mwPushToast","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){return i(function(a,b){d("mwPushToast").mwPushErrorToast({body:b,title:a})},[])}g["default"]=a}),98);
__d("useMWMediaManager",["LSGetAttachmentType","LSIntEnum","MWMediaManager","MessagingAttachmentType","qex","useMWMediaManagerUploadFailedToast"],(function(a,b,c,d,e,f,g){"use strict";var h,i=25;function a(a){var b=a.onUploadFailure;a=a.thread;var e=c("useMWMediaManagerUploadFailedToast")();return d("MWMediaManager").useMediaManager({getMaxAttachmentSizeInMB:j,onUploadFailure:b,showUploadFailureToast:e,thread:a})}function j(a,b){a=c("LSGetAttachmentType")(a);if((h||(h=d("LSIntEnum"))).toNumber(a)===c("MessagingAttachmentType").FILE){return(a=k(b))!=null?a:i}return i}function k(a){if(a)return c("qex")._("245");else return c("qex")._("413")}g["default"]=a}),98);
__d("MWPComposerDraftMessages",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function a(a,b){if(b==null){i["delete"]((h||(h=d("I64"))).to_string(a));return}i.set((h||(h=d("I64"))).to_string(a),b)}function b(a){return i.get((h||(h=d("I64"))).to_string(a))}g.updateDraftMessage=a;g.getDraftMessage=b}),98);
__d("MWV2ChatComposerGetViewContent",["Lexical","MessengerLexicalActorNode","MessengerLexicalEntityTextNode","cr:3101","cr:6138"],(function(a,b,c,d,e,f,g){"use strict";var h=b("cr:3101")||b("cr:6138");a={getRanges:function(a){var b=[],c=0;a.getEditorState().read(function(){var a=d("Lexical").$getRoot().getFirstChild();a instanceof d("Lexical").ElementNode&&a.getChildren().forEach(function(a){if(d("MessengerLexicalEntityTextNode").isMessengerLexicalEntityTextNode(a)){var e=a.getEntity();b.push({id:e.id,length:a.getTextContent().length,offset:c,type:d("MessengerLexicalActorNode").$isMessengerLexicalActorNode(a)?a.getRangeType():"p"})}if(h!=null&&a instanceof h.MessengerLexicalCommandNode){e=a.getEntity();b.push({id:e.commandId,length:a.getTextContent().length,offset:c,type:a.getRangeType()})}c+=a.getTextContent().length})});return b}};c=a;g["default"]=c}),98);
__d("mwpLexicalCreateEditor",["CometLexicalEmojiNode","FBLogger","Lexical","MessengerLexicalActorNode","cometLexicalBaseTheme","cr:3101","cr:6138","mlcErrorHandler__INTERNAL"],(function(a,b,c,d,e,f,g){"use strict";e=b("cr:3101")||b("cr:6138");var h=[d("MessengerLexicalActorNode").MessengerLexicalActorNode,d("CometLexicalEmojiNode").EmojiNode,e==null?void 0:e.MessengerLexicalCommandNode],i=babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{paragraph:"xat24cr xdj266r",text:{base:"xsdi744"}});function a(a){var b,e=d("Lexical").createEditor({namespace:"MWPEditor",nodes:(b=a==null?void 0:a.nodes)!=null?b:h.filter(Boolean),onError:function(a){return c("mlcErrorHandler__INTERNAL")(a,e,function(b){c("FBLogger")("messenger_web_product").catching(a).mustfix("Lexical Error MWP: %s",b)})},theme:(b=a==null?void 0:a.theme)!=null?b:i});return e}g["default"]=a}),98);
__d("useMWPComposerAutoFocus",["MWChatFocusComposerContext","MWPReplyContext.react","MWV2IsTabFocusedContext.react","deepEquals","react","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect;function l(a){var b;b=(b=document.activeElement)==null?void 0:(b=b.attributes.getNamedItem("id"))==null?void 0:b.value;if(b==null?void 0:b.includes("prevent-composer-focus-steal"))return;return a.focus(function(){})}function a(a){var b=a.editor,e=a.focusEditorDelayed,f=a.hasUnsentAttachments,g=f===void 0?!1:f;f=a.isPreviewThread;f=f===void 0?!1:f;var h=a.isQuickchat;a=d("MWChatFocusComposerContext").useMWChatFocusComposer();a=a.setFocusComposer;var m=j(d("MWPReplyContext.react").MWPReplyContext),n=m.reply,o=c("usePrevious")(n);k(function(){(o==null?n!=null:!c("deepEquals")(o,n))&&(h&&e?e(b):l(b))},[b,n,o,e,h]);m=d("MWV2IsTabFocusedContext.react").useIsTabFocused();var p=m&&!f;k(function(){p&&(h&&e?e(b):l(b))},[b,p,e,h]);k(function(){g&&(h&&e?e(b):l(b))},[b,g,e,h]);a(i(function(){h&&e?e(b):l(b)},[b,e,h]))}g["default"]=a}),98);
__d("MWPNewMessageDraftContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=c.useRef,l=e();function a(a){a=a.children;var b=k("");return i.jsx(l.Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(l)}g.MWPNewMessageDraftContextProvider=a;g.useNewMessageDraftContext=b}),98);
__d("MWPreloadedText",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a({text:null});g["default"]=b}),98);
__d("useMWLSSaveDrafts",["CometDebounce","Int64Hooks","LexicalText","MWPComposerDraftMessages","MWPNewMessageDraftContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.editor,e=a.isPreviewThread,f=a.threadKey,g=d("MWPNewMessageDraftContext.react").useNewMessageDraftContext(),h=i(function(a){e&&g!=null?g.current=a:d("MWPComposerDraftMessages").updateDraftMessage(f,a)},[e,g,f]);d("Int64Hooks").useEffectInt64(function(){return b.registerUpdateListener(c("CometDebounce")(function(a){a=a.editorState;a=a.read(function(){return d("LexicalText").$rootTextContent()});h(a)},{wait:250}))},[b,h]);d("Int64Hooks").useEffectInt64(function(){var a=b.getEditorState().read(function(){return d("LexicalText").$rootTextContent()});h(a)},[b,h])}g["default"]=a}),98);
__d("useMWPCometComposerPrepopulateDraftMessage",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a,b,c){i(function(){if(b==null||c)return;a.update(function(){if(b!=null){var a=d("Lexical").$getRoot(),c=a.getFirstChild();d("Lexical").$isParagraphNode(c)||(c=d("Lexical").$createParagraphNode(),a.append(c));a=d("Lexical").$createTextNode(b);c.clear();c.append(a)}})},[a,c])}g["default"]=a}),98);
__d("useMWPComposerEditorDraftText",["MWPComposerDraftMessages","MWPNewMessageDraftContext.react","MWPreloadedText","react","useMWLSSaveDrafts","useMWPCometComposerPrepopulateDraftMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(a){var b=a.editor,e=a.isPreviewThread;e=e===void 0?!1:e;var f=a.isQuickchat;f=f===void 0?!1:f;a=a.threadKey;var g=d("MWPNewMessageDraftContext.react").useNewMessageDraftContext(),h=i(c("MWPreloadedText"));h=h.text!=null?h.text:g!=null?g.current:d("MWPComposerDraftMessages").getDraftMessage(a);c("useMWLSSaveDrafts")({editor:b,isPreviewThread:e,threadKey:a});c("useMWPCometComposerPrepopulateDraftMessage")(b,h,f);return h}g["default"]=a}),98);
__d("useMWPLexicalClearEditor",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a,b){b===void 0&&(b=!1),i(function(){return a.registerCommand(d("Lexical").CLEAR_EDITOR_COMMAND,function(){a.update(function(){var a=d("Lexical").$getRoot(),c=d("Lexical").$getSelection(),e=d("Lexical").$createParagraphNode();a.clear();a.append(e);c!==null&&(e.select(),b===!0&&d("Lexical").$isRangeSelection(c)&&(c.format=0))});return!0},d("Lexical").COMMAND_PRIORITY_EDITOR)},[b,a])}g["default"]=a}),98);
__d("useMWPLexicalCommitMessageOnEnter",["Lexical","MLCInstrumentationCommands","MLCKeyBindingUtil","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a,b){i(function(){return a.registerCommand(d("Lexical").KEY_ENTER_COMMAND,function(e){e=e;if(e!=null&&!e.shiftKey&&!e.altKey&&(!c("gkx")("23402")||d("MLCKeyBindingUtil").hasCommandModifier(e))){e.preventDefault();a.dispatchCommand(d("MLCInstrumentationCommands").COMMIT_COMMAND,"create");b();return!0}return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[a,b])}g["default"]=a}),98);
__d("useMWXLexicalHasText",["LexicalText","react"],(function(a,b,c,d,e,f,g){"use strict";var h;c=h||d("react");var i=c.useCallback,j=c.useEffect,k=c.useRef,l=c.useState;function m(a){return a.getEditorState().read(d("LexicalText").$isRootTextContentEmptyCurry(a.isComposing()))}function n(a){var b=l(function(){return!m(a)}),c=b[0],d=b[1];j(function(){return a.registerUpdateListener(function(){d(!m(a))})},[a]);return c}function a(a){var b=a.editor;a=a.initialValue;var c=k(a);return{useHasText:i(function(){var a,d=k((a=c.current)!=null?a:!1);j(function(){d.current=!1},[]);return n(b)||d.current},[b])}}function b(a){var b=a.editor;a=a.initialValue;a=k(a);var c=k((a=a.current)!=null?a:!1);j(function(){c.current=!1},[]);return n(b)||c.current}g.useMWXLexicalHasText_DEPRECATED=a;g.useMWXLexicalHasText=b}),98);
__d("MWXUseLatch",["CometThrottle","Run","debounce","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useMemo;function a(a,b,e){var f=b!=null?b:!1;i(function(){if(!f)return;var b=d("Run").onUnload(function(){return a(!1)});return function(){return b.remove()}},[f,a]);return j(function(){var b={contents:!1},d=c("debounce")(function(){if(!b.contents)return a(!1)},e|0),f=c("CometThrottle")(function(){return a(!0)},3e3,{leading:!0,trailing:!1}),g=function(){a(!1),b.contents=!0},h=function(){f();return d()};return[h,g]},[a,e])}g.useLatch=a}),98);
__d("useMWXLexicalOnTypingChanged",["LexicalText","MWXUseLatch","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function a(a){var b=a.editor;a=a.onTypingStateChanged;a=d("MWXUseLatch").useLatch(a,!0,5e3);var c=a[0],e=a[1],f=j("");i(function(){var a=function(a){a=a.editorState.read(function(){return d("LexicalText").$rootTextContent()});if(a!==f.current){f.current=a;if(a==="")return e();else return c()}};return b.registerUpdateListener(a)},[c,e,b]);return{}}g["default"]=a}),98);
__d("useMWPComposerEditor",["I64","Int64Hooks","Lexical","LexicalText","MWChatMessagesOnChatTabLoadTracker","MWPComposerDraftMessages","MWV2ChatComposerGetViewContent","MWV2ComposerActionsContext.react","MWV2ComposerHasContentContext.react","WALoggerDeferred","cr:7101","emptyFunction","mwpLexicalCreateEditor","promiseDone","react","useLexicalInitializeEditor__DEPRECATED","useMWPComposerAutoFocus","useMWPComposerEditorDraftText","useMWPLexicalClearEditor","useMWPLexicalCommitMessageOnEnter","useMWXLexicalHasText","useMWXLexicalOnTypingChanged"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=h||d("react");var j=e.useContext,k=e.useEffect,l=e.useMemo,m=e.useRef,n=b("cr:7101")==null?function(a){}:b("cr:7101").useMWComposerKeyCommandFocusRegister,o=[];function p(){c("promiseDone")(d("WALoggerDeferred").logWithTags(["MWPComposerEditor","Composer"],["Calling onSendMessage"],"LOG"))}var q=function(a){return a.read(function(){return d("LexicalText").$rootTextContent()})};function a(a){var b=a.customizedRanges,e=a.getTextFromEditorState,f=e===void 0?q:e;e=a.isPreviewThread;e=e===void 0?!1:e;var g=a.isSendDisabled;g=g===void 0?!1:g;var h=a.mediaStaging;h=h===void 0?o:h;var r=a.onSendMessage,s=a.onTypingStateChanged,t=a.threadKey,u=a.clearFormatAfterSend,v=a.isQuickchat;v=v===void 0?!1:v;var w=a.focusEditorDelayed,x=a.editorNodes,y=a.editorTheme;a=m(null);var z=l(function(){return c("mwpLexicalCreateEditor")({nodes:x,theme:y})},[x,y]);h=h.length>0;c("useLexicalInitializeEditor__DEPRECATED")(z);c("useMWPLexicalClearEditor")(z,u);c("useMWPComposerAutoFocus")({editor:z,focusEditorDelayed:w,hasUnsentAttachments:h,isPreviewThread:e,isQuickchat:v});u=c("useMWPComposerEditorDraftText")({editor:z,isPreviewThread:e,isQuickchat:v,threadKey:t});var A=d("useMWXLexicalHasText").useMWXLexicalHasText({editor:z,initialValue:u!=null&&u!==""}),B=A||h;w=d("MWV2ComposerHasContentContext.react").useComposerHasContext();var C=w.hasContentRef;k(function(){if(C==null)return;C.current=A},[A,C]);c("useMWXLexicalOnTypingChanged")({editor:z,onTypingStateChanged:s});e=j(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext);var D=e.onMessageSendAttempt;v=d("Int64Hooks").useCallbackInt64(function(){D==null?void 0:D(B);z.dispatchCommand(d("Lexical").CLEAR_EDITOR_COMMAND);if(!B)return;d("MWChatMessagesOnChatTabLoadTracker").trackSendFor(t);p();var a=b!=null?b(z,(i||(i=d("I64"))).to_string(t)):c("MWV2ChatComposerGetViewContent").getRanges(z),e=z.getEditorState();e=f(e);r(e,a);d("MWPComposerDraftMessages").updateDraftMessage(t,"");z.focus()},[B,r,t,b,z,f,D]);u=g?c("emptyFunction"):v;c("useMWPLexicalCommitMessageOnEnter")(z,u);n(a.current);return{editor:z,editorElementRef:a,hasStuffToSend:B,sendMessage:u}}g["default"]=a}),98);
__d("MWV2FileDropzone.react",["fbt","LSFactory","LSIssueNewErrorStoredProcedure","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMThreadTypes.react","MWXText.react","cometIsMimeTypeForMedia","gkx","promiseDone","react","recoverableViolation","stylex","useFileDragEvents","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;e=b.createContext;var m=b.createElement,n=b.useCallback,o=b.useRef,p=e({current:{enabled:!0,handler:null}});function q(a){var b=a.children;a=a.fileUploadHandlerConfigRef;return m(p.Provider,{children:b,value:a})}var r={dropzone:{alignItems:"x6s0dn4",backgroundColor:"x1h0vfkc",bottom:"x1ey2m1c",display:"x78zum5",end:"xds687c",left:null,right:null,justifyContent:"xl56j7k",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",zIndex:"x1vjfegm",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxWidth:"x193iq5w",minHeight:"x2lwn1j",position:"x1n2onr6",$$css:!0}};function s(a){if(a==null)return[];a=a.dataTransfer;return a==null?[]:a.types}function t(a){switch(a){case 0:return void 0;case 1:return h._("__JHASH__M7mGXjgzxvT__JHASH__").toString();default:return h._("__JHASH__UaK2GgtSNQH__JHASH__").toString()}}function u(a,b){var d=t(b);if(d==null)return;c("promiseDone")(a.runInTransaction(function(a){return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(a),{errorBodyText:d,errorTitleText:d})},"readwrite"))}function v(a){a=a.type;return d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a)||d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a)?!0:a.startsWith("audio/")}var w=new Set(["text/plain","text/html","text/uri-list"]);function a(a){var b=a.children,e=a.isDisabled,f=a.isMediaOnly,g=a.thread;a=a.xstyle;var k=o({enabled:!1,handler:null}),m=o(null),p=(i||(i=c("useReStore")))(),t=g!=null?(d("MWCMThreadTypes.react").isBroadcastThread(g.threadType)||d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(g.threadType)||d("LSMessagingThreadTypeUtil").isAiBot(g.threadType))&&!d("LSThreadBitOffset").has(56,g):!1;g=!c("gkx")("24132");var x=e===!0||g||t;e=function(a){var b;return((b=k.current)==null?void 0:b.handler)==null?!1:!s(a).some(function(a){return w.has(a)})};g=c("useFileDragEvents")(function(){return!1},void 0,e);e=n(function(a){var b;if(((b=k.current)==null?void 0:b.enabled)===!1)return;b=(b=k.current)==null?void 0:b.handler;if(b==null){if(!t){var d=k.current==null?"fileUploadHandlerConfigRef was not setup to handle dropped file!":"fileUploadHandlerConfigRef.current.handler was not setup to handle dropped file";c("recoverableViolation")(d,"messenger_comet")}return}d=Array.from(a);a=f?d.filter(v):d;d.length!==a.length&&u(p,d.length);!x&&a.length!==0&&b(a)},[f,x,t,p]);c("useFileDragEvents")(e,m.current,function(a){return!0});return l.jsxs("div",{className:(j||(j=c("stylex")))(r.root,(e=a)!=null?e:!1),ref:m,children:[l.jsx(q,{fileUploadHandlerConfigRef:k,children:b}),!x&&g?l.jsx("div",{className:"x6s0dn4 x1h0vfkc x1ey2m1c x78zum5 xds687c xl56j7k x10l6tqk x17qophe x13vifvy x1vjfegm",children:l.jsx(c("MWXText.react"),{type:"body1",children:h._("__JHASH__Cpq0daihgaG__JHASH__")})}):null]})}a.displayName=a.name+" [from "+f.id+"]";g.mWV2FileDropzoneContext=p;g.MWV2FileDropzone=a}),98);
__d("useMWV2FileDropzoneRegisterHandler",["MWV2FileDropzone.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a){var b=i(d("MWV2FileDropzone.react").mWV2FileDropzoneContext);j(function(){var c={enabled:!0,handler:a};b.current=c;return function(){c.enabled=!1,c.handler=null}},[b,a])}g["default"]=a}),98);
__d("MAWSecureComposer.react",["fbt","MAWSecureComposerText","MAWSecureThreadNonAddressableContactBanner.react","MAWSecureTypingState","MAWSupportedFileTypes","MWBlockedComposerLogging","MWPReplyContext.react","MWV2ComposerReplyView.react","MWV2ComposerView.react","WebUXLoggingSurfaceContextProvider","cr:6241","emptyFunction","gkx","react","useCometAlertDialog","useMAWEditMessageData","useMAWSendSecureMessageV2","useMWMediaManager","useMWPComposerEditor","useMWV2FileDropzoneRegisterHandler"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useContext,m=e.useState,n=c("gkx")("23429");function a(a){var e=a.afterSendMessage;e=e===void 0?c("emptyFunction"):e;var f=a.isPreviewThread;a=a.thread;var g=l(d("MWPReplyContext.react").MWPReplyContext);g=g.reply;var i=c("useMAWEditMessageData")(),o=c("useCometAlertDialog")(),p=k(function(){return o({body:h._("__JHASH__cHTRYg3bfeC__JHASH__"),title:h._("__JHASH__shIDOoHHO5L__JHASH__")})},[o]);p=c("useMWMediaManager")({onUploadFailure:p,thread:a});var q=p.handleFileRemove,r=p.handleFileSelect,s=p.mediaStaging;p=p.resetAttachments;e=c("useMAWSendSecureMessageV2")(a,e,p);p=d("MAWSecureTypingState").useOnTypingStateChanged(a.authorityLevel,a.threadKey,a.threadType);c("useMWV2FileDropzoneRegisterHandler")(r);var t=m(!1),u=t[0];t=t[1];d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a.threadKey,u?d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_RECEIVER_NON_ADDRESSABLE_ON_WA:d("MWBlockedComposerLogging").ComposerBlockingReason.NOT_BLOCKED);f=c("useMWPComposerEditor")({getTextFromEditorState:d("MAWSecureComposerText").getTextFromEditorState,isPreviewThread:f,mediaStaging:s,onSendMessage:e,onTypingStateChanged:p,threadKey:a.threadKey});p=f.editor;var v=f.editorElementRef,w=f.hasStuffToSend;f=f.sendMessage;return j.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"secure_composer",children:j.jsxs("div",{"data-testid":void 0,children:[g!=null?j.jsx(d("MWV2ComposerReplyView.react").MWV2ComposerReplyView,{messageId:g.messageId,messageTimestamp:g.timestampMs,thread:a}):null,j.jsx(c("MAWSecureThreadNonAddressableContactBanner.react"),{setHideComposerEditor:t,thread:a}),i!=null&&b("cr:6241")&&j.jsx(b("cr:6241"),{editMessageData:i}),u||i!=null?null:j.jsx(d("MWV2ComposerView.react").MWV2ComposerView,{editor:p,editorElementRef:v,hasStuffToSend:w,isMentionsPluginEnabled:n,mediaStaging:s,onAttachmentRemoved:q,onAttachmentsAdded:r,onSendMessage:e,policyProduct:"messaging_lightswitch",sendMessage:f,supportedFileTypes:d("MAWSupportedFileTypes").supportedFileTypes,surface:"mwp_maw_secure_composer",thread:a})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSAccountSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:i.jsx("path",{clipRule:"evenodd",d:"M18 29c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm5.824-6.132c.408.316.431.91.059 1.268A8.472 8.472 0 0118 26.5c-2.283 0-4.355-.9-5.883-2.364a.834.834 0 01.059-1.268C13.654 21.719 15.746 21 18 21c2.255 0 4.346.719 5.824 1.868zM18 19c-1.882 0-3.5-1.304-3.5-4.142C14.5 12.544 15.974 11 18 11s3.5 1.544 3.5 3.858C21.5 17.696 19.882 19 18 19z",fillRule:"evenodd"})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSCautionTriangleSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:i.jsx("path",{clipRule:"evenodd",d:"M19.747 8.027c-.764-1.367-2.73-1.367-3.494 0L6.757 25.025C6.012 26.358 6.977 28 8.504 28h18.992c1.528 0 2.492-1.642 1.747-2.975L19.747 8.027zm-3.159 5.97a1.414 1.414 0 112.824 0l-.353 6.005a1.06 1.06 0 01-2.118 0l-.353-6.005zm2.662 9.753a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z",fillRule:"evenodd"})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSForwardStackSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[i.jsx("path",{d:"M10.5 14a.5.5 0 0 0 .5-.5v-2.536c0-1.608 1.769-2.532 3.02-1.578l9.21 7.026c1.026.783 1.027 2.37.002 3.154l-9.21 7.046c-1.25.957-3.022.034-3.022-1.576V22.5a.5.5 0 0 0-.5-.5H5a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h5.5Z"}),i.jsx("path",{d:"M20.38 24.265a.97.97 0 0 0-.38.771c0 1.61 1.771 2.533 3.022 1.576l9.21-7.046c1.025-.784 1.024-2.37-.002-3.154l-9.21-7.026c-1.251-.954-3.02-.03-3.02 1.578 0 .295.138.574.373.753l4.07 3.105c2.074 1.583 2.076 4.747.004 6.332l-4.066 3.111Z"})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSPinnedMessageIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useId;function a(a){var b=j(),d=j(),e=j(),f=j();return i.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[i.jsx("g",{filter:"url(#"+b+")",children:i.jsx("rect",{fill:"url(#"+d+")",height:"2",width:"8",x:"17",y:"26"})}),i.jsx("path",{d:"M23.9989 27.5928L23.9988 27.5383L24.0367 27.585C24.1817 27.7518 24.7409 28.2715 25.8875 27.9427C26.9382 27.6414 26.5281 26.8227 26.371 26.5705C26.3138 26.4819 26.2525 26.3965 26.1873 26.3135L16.8703 14.3899C16.2845 15.045 15.5884 15.6539 14.8084 16.0737L23.9989 27.5928Z",fill:"url(#"+e+")"}),i.jsx("path",{d:"M11.5653 17.1305C15.7434 17.1305 19.1305 13.7434 19.1305 9.56526C19.1305 5.38708 15.7434 2 11.5653 2C7.38708 2 4 5.38708 4 9.56526C4 13.7434 7.38708 17.1305 11.5653 17.1305Z",fill:"#FF0D0D"}),i.jsx("path",{d:"M9.19306 12.5345C6.38338 10.2164 5.72669 6.37369 7.72578 3.95078C9.72486 1.52787 13.6231 1.44245 16.432 3.76062C19.2417 6.07879 19.8984 9.92145 17.8993 12.3444C15.9002 14.7673 12.0019 14.8519 9.19306 12.5345Z",fill:"url(#"+f+")"}),i.jsxs("defs",{children:[i.jsxs("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"2.8",id:b,width:"8.8",x:"16.6",y:"25.6",children:[i.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.jsx("feBlend",{"in":"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),i.jsx("feGaussianBlur",{result:"effect1_foregroundBlur_28_51",stdDeviation:"0.2"})]}),i.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:d,x1:"25",x2:"17.6667",y1:"27",y2:"27",children:[i.jsx("stop",{stopColor:"#969495"}),i.jsx("stop",{offset:"1",stopColor:"#D9D9D9",stopOpacity:"0"})]}),i.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:e,x1:"20.4956",x2:"21.941",y1:"22.4135",y2:"21.2698",children:[i.jsx("stop",{stopColor:"#666666"}),i.jsx("stop",{offset:"1",stopColor:"#CACCCD"})]}),i.jsxs("radialGradient",{cx:"0",cy:"0",gradientTransform:"translate(12.8132 8.1471) rotate(129.523) scale(5.68739 6.59482)",gradientUnits:"userSpaceOnUse",id:f,r:"1",children:[i.jsx("stop",{stopColor:"white",stopOpacity:"0.5"}),i.jsx("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})]})]})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSSvgDocumentCompleteIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[i.jsx("path",{clipRule:"evenodd",d:"M18 8c0-.6-.4-1-1-1h-6a2 2 0 00-2 2v18c0 1.1.9 2 2 2h14a2 2 0 002-2V17c0-.6-.4-1-1-1h-4a4 4 0 01-4-4V8zm-6 7c0-.6.4-1 1-1h2a1 1 0 110 2h-2a1 1 0 01-1-1zm1 3.5a1 1 0 100 2h10a1 1 0 100-2H13zm0 4.5a1 1 0 100 2h10a1 1 0 100-2H13z",fillRule:"evenodd"}),i.jsx("path",{d:"M22 14h4a1 1 0 00.7-1.7l-5-5A1 1 0 0020 8v4c0 1.1.9 2 2 2z"})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessengerPlatformClientTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClientUserID=function(a){this.$1.client_userid=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setDeviceid=function(a){this.$1.deviceid=a;return this};c.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};c.setIsemployee=function(a){this.$1.isemployee=a;return this};c.setLoggingToken=function(a){this.$1.logging_token=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setRawclienttime=function(a){this.$1.rawclienttime=a;return this};c.setSessionid=function(a){this.$1.sessionid=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};return a}();c={appid:!0,appversion:!0,client_userid:!0,clienttime:!0,country:!0,deviceid:!0,extra_client_data:!0,isemployee:!0,logging_token:!0,name:!0,rawclienttime:!0,sessionid:!0,thread_id:!0};f["default"]=a}),66);
__d("XWebGraphQLMutationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/webgraphql/mutation/",{query_id:{type:"FBID"},variables:{type:"String"},doc_id:{type:"FBID"},legacy_response_format:{type:"Bool",defaultValue:!1}})}),null);
__d("base62",[],(function(a,b,c,d,e,f){"use strict";var g="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function a(a){if(!a)return"0";var b="";while(a>0)b=g[a%62]+b,a=Math.floor(a/62);return b}f["default"]=a}),66);
__d("WebGraphQLMutationHelper",["CurrentUser","WebGraphQLLegacyHelper","XWebGraphQLMutationController","base62"],(function(a,b,c,d,e,f,g){"use strict";var h=0;function a(a,b){return d("WebGraphQLLegacyHelper").getURI({controller:c("XWebGraphQLMutationController"),docID:a,variables:{input:babelHelpers["extends"]({client_mutation_id:c("base62")(h++),actor_id:c("CurrentUser").getID()},b)}})}g.getMutationURI=a}),98);
__d("XMNCommerceCTAPostProcessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/cta/postprocess/",{cta_id:{type:"String",required:!0},message_id:{type:"String"}})}),null);
__d("MNCommerceCTAProcessor",["AsyncRequest","CurrentUser","GraphQLMessengerPlatformCtaPostHandlingMutation.graphql","MessengerPlatformClientTypedLogger","PopupWindow","WebGraphQLMutationHelper","XMNCommerceCTAPostProcessController","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.process=function(a,b){b===void 0&&(b=null);var e=d("PopupWindow").open("",500,1024);a=c("XMNCommerceCTAPostProcessController").getURIBuilder().setString("cta_id",a).setString("message_id",b).getURI();new(c("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(a){return e.location=a.payload}).send()};b.postHandle=function(a,b){a=d("WebGraphQLMutationHelper").getMutationURI(c("nullthrows")(c("GraphQLMessengerPlatformCtaPostHandlingMutation.graphql").params.id),{cta_id:a,message_id:b});new(c("AsyncRequest"))().setURI(a).send()};b.logCTAClick=function(a){var b,d;d=(d=a)!=null?d.logging_token:d;var e=d?JSON.parse(d).click_source:"UNKNOWN";e={action_id:(b=a)!=null?b.id:b,action_type:(b=a)!=null?b.action_type:b,action_url:((b=a)!=null?b.action_url:b)||((b=a)!=null?b.action_link:b),click_source:e,page_id:(b=a)!=null?b.page_id:b};new(c("MessengerPlatformClientTypedLogger"))().setClientUserID(c("CurrentUser").getID()).setName("did_tap_call_to_action").setExtraClientData(JSON.stringify(e)).setLoggingToken(d).log()};return a}();b=new a();g["default"]=b}),98);
__d("MNCommerceCTAProcessor.bs",["MNCommerceCTAProcessor"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("MNCommerceCTAProcessor").logCTAClick(a)}function b(a,b){c("MNCommerceCTAProcessor").process(a,(a=b)!=null?a:void 0)}g.logCTAClick=a;g.$$process=b}),98);
__d("MNXMASubtitleDecorationType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,THREADS_ICON:1,FACEBOOK_ICON:2,EXTERNAL_LINK_ICON:3,MESSENGER_ICON:4});f["default"]=a}),66);
__d("MW3PBotCommandsPill.react",["fbt","JSResourceForInteraction","MWXPressable.react","MWXText.react","ReQL","ReQLSuspense","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l=c("JSResourceForInteraction")("MW3PBotCommandsDialog.react").__setRef("MW3PBotCommandsPill.react"),m={commandsPill:{backgroundColor:"x1qhmfi1",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",paddingStart:"x1sln4lm",paddingLeft:null,paddingRight:null,paddingEnd:"x1iji9kk",paddingTop:"x1yrsyyn",paddingBottom:"x10b6aqq",$$css:!0},commandsPillContainer:{display:"x78zum5",justifyContent:"xl56j7k",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0}};function a(a){var b=a.threadKey,e=(i||(i=c("useReStore")))(),g=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.tables.custom_thread_commands.index("rank")).getKeyRange(b).filter(function(a){return!a.isOpenPersistentMenu})},[e,b],f.id+":46");a=c("useMWXLazyDialog")(l);var j=a[0];return g.length===0?null:k.jsx("div",{className:"x78zum5 xl56j7k xyamay9 x1l90r2v",children:k.jsx(c("MWXPressable.react"),{onPress:function(){return j({commands:g})},overlayRadius:"inherit",xstyle:m.commandsPill,children:k.jsx(c("MWXText.react"),{align:"center",type:"headline4",children:h._("__JHASH__ey53XOJ4uK9__JHASH__",[h._plural(g.length,"number")])})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatComposer3PBotCommandViewItem.react",["CometSearchMentionsBaseViewItem.react","MWXTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);var d=b.label,e=b.rawData.subtitle;return i.jsx(c("CometSearchMentionsBaseViewItem.react"),babelHelpers["extends"]({},a,{entry:b,children:i.jsx(c("MWXTextPairing.react"),{headline:d,level:4,meta:e,metaLineLimit:1,reduceEmphasis:!0})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCommandsComposerPluginTextNode",["Lexical"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d,e=a.commandId,f=a.commandPrefix,g=a.handle;a=a.rangeType;d=b.call(this,""+((d=f)!=null?d:"")+g,c)||this;d.__handle=g;d.__commandId=e;d.__rangeType=a;d.__commandPrefix=f;return d}a.getType=function(){return"command"};a.clone=function(b){var c,d=b.getEntity();return new a({commandId:d.commandId,commandPrefix:(c=b.__commandPrefix)!=null?c:"",handle:d.handle,rangeType:d.rangeType},b.__key)};a.importJSON=function(a){return i({commandId:a.commandId,handle:a.handle,rangeType:a.rangeType})};var c=a.prototype;c.exportJSON=function(){return babelHelpers["extends"]({},b.prototype.exportJSON.call(this),{commandId:this.__commandId,handle:this.__handle,rangeType:this.__rangeType,type:"command"})};c.createDOM=function(a){a=b.prototype.createDOM.call(this,a);a.className="xv78j7m xt0e3qv x3jgonx";a.spellcheck=!1;return a};c.getEntity=function(){return{commandId:this.__commandId,handle:this.__handle,rangeType:this.__rangeType}};c.getRangeType=function(){return this.__rangeType};c.getCommandId=function(){return this.__commandId};return a}(d("Lexical").TextNode);function i(a){return new h(a).setMode("segmented").toggleDirectionless()}g.MessengerLexicalCommandNode=h;g.$createMessengerLexicalCommandNode=i}),98);
__d("createCommandsHandleMatchStrategy",[],(function(a,b,c,d,e,f){"use strict";b="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\[\\]\\\\/!%'\"~=<>_:;";c="\\b[\\w][^\\s"+b+"]";d="(^|\\s|\\/)((?:"+c+"{"+1+",})$)";var g=new RegExp(d);function a(a){var b=a.minMatchLength;return{findMentionableString:function(a){a=g.exec(a);if(a===null)return null;var c=a[1],d=a[2];if(d!=null&&d.length>=b){var e=d;(c==null?void 0:c.startsWith("/"))&&(e=""+c+d);return{leadOffset:a.index+c.length,matchingString:d,replaceableString:e}}return null},name:"CommandsHandleMatchStrategy"}}f["default"]=a}),66);
__d("useMW3PBotsCommandsDataSourceResolverConfig",["I64","Promise","ReQL","ReQLSuspense","createCometMentionMatchStrategy","createCommandsHandleMatchStrategy","useCometMentionsDataSourceResolverConfig","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){var e=(j||(j=c("useReStore")))(),g=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.tables.custom_thread_commands.index("rank")).getKeyRange(a).filter(function(a){return!a.isOpenPersistentMenu}).map(function(a){var b=a.commandDescription,c=a.commandId;a=a.commandText;return{key:(i||(i=d("I64"))).to_string(c),label:a,rawData:{rangeType:"cu",subtitle:b},type:"entry"}})},[e,a],f.id+":33"),k=function(a){return{entries:a.query.length?g.filter(function(b){return b.label.toLowerCase().startsWith(a.query.toLowerCase())}):g,params:a}};return{bootstrap:function(){},fetchCache:k,fetchNetwork:function(a){return(h||(h=b("Promise"))).resolve(k(a))}}}function a(a){a=k(a);a=[{dataSource:a,matchStrategy:c("createCommandsHandleMatchStrategy")({minMatchLength:4})},{dataSource:a,matchStrategy:c("createCometMentionMatchStrategy")({minMatchLength:0,name:"CometMentionsNameMatchStrategy",triggers:"/"})}];return c("useCometMentionsDataSourceResolverConfig")(a,!1)}g["default"]=a}),98);
__d("MW3PBotsCommandsComposerPlugin.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","MWChatComposer3PBotCommandViewItem.react","MWCommandsComposerPluginTextNode","MWThreadKey.react","cometBaseMentionsLexicalCreateNodeStrategy","react","useCometTypeaheadViewListStrategy","useMW3PBotsCommandsDataSourceResolverConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.editor;var b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();b=c("useMW3PBotsCommandsDataSourceResolverConfig")(b);var e=c("useCometTypeaheadViewListStrategy")({viewItemStrategyRenderer:c("MWChatComposer3PBotCommandViewItem.react")});return i.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("cometBaseMentionsLexicalCreateNodeStrategy")(function(a){return d("MWCommandsComposerPluginTextNode").$createMessengerLexicalCommandNode({commandId:a.key,handle:a.label,rangeType:(a=(a=a.rawData)==null?void 0:a.rangeType)!=null?a:"n"})}),dataSourceResolverConfig:b,editor:a,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),position:"above",viewStrategyRenderer:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXIconFriendGenericAdd",["MWXSvgIcon","SVGIcon","cr:9160","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9160")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWAddParticipantDialog",["JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","MWLSDatabaseLazySync","promiseDone","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("MWLSDatabaseLazySync").useSync((h||(h=d("LSIntEnum"))).ofNumber(7)),f=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWAddParticipantOpenDialog.react").__setRef("useMWAddParticipantDialog")),g=f[0];f=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MAWAddParticipantSecureDialog.react").__setRef("useMWAddParticipantDialog"));var i=f[0];return function(){c("promiseDone")(e());var f=d("LSMessagingThreadTypeUtil").isSecure(b);f?i({threadKey:a}):g({threadKey:a})}}g["default"]=a}),98);
__d("MWAddMemberToGroupCircleButton.react",["MWXCircleButton.react","MWXIconFriendGenericAdd","MessengerWebUXLogger","react","useMWAddParticipantDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.label,d=a.testid,e=a.threadKey,f=a.threadType,g=c("useMWAddParticipantDialog")(e,f),h=c("MessengerWebUXLogger").useInteractionLogger();d=function(){g(),h==null?void 0:h({eventName:"open_add_members_dialog",threadKey:e,threadType:f})};return i.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconFriendGenericAdd"),label:b,onPress:d,size:36,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatColors",[],(function(a,b,c,d,e,f,g){"use strict";a={action:{alignContent:"xc26acl",alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",display:"x78zum5",flexShrink:"x2lah0s",height:"xxk0z11",justifyContent:"xl56j7k",marginEnd:"x11i5rnm",marginLeft:null,marginRight:null,marginStart:"x1mh8g0r",position:"x1n2onr6",textAlign:"x2b8uid",width:"xvy4d1p",":hover_backgroundColor":"x15vn3sj",$$css:!0},icon:{height:"x17rw0jw",opacity:"x197sbye",width:"x17z2i9w",":active_opacity":"x4gyw5p",":hover_opacity":"x1o7uuvo",$$css:!0},svgFill:{fill:"x148u3ch",$$css:!0},svgStroke:{fill:"xbh8q5q",stroke:"xmb71p3",$$css:!0}};b={styles:a};g.MessageActions=b}),98);
__d("MWMessageReactionIcon.react",["fbt","MWChatColors","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");function a(a){var b=a.size;b=b===void 0?16:b;a=a.viewBox;a=a===void 0?"0 0 16 16":a;return k.jsxs("svg",{fill:"none",height:b,viewBox:a,width:b,xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("title",{children:h._("__JHASH__Wo2O5nlXhKT__JHASH__")}),k.jsx("path",{className:(i||(i=c("stylex")))(d("MWChatColors").MessageActions.styles.svgFill),d:"M12.48 0.64C12.48 0.286538 12.7665 0 13.12 0C13.4735 0 13.76 0.286538 13.76 0.64V2.08C13.76 2.16837 13.8316 2.24 13.92 2.24H15.36C15.7135 2.24 16 2.52654 16 2.88C16 3.23346 15.7135 3.52 15.36 3.52H13.92C13.8316 3.52 13.76 3.59163 13.76 3.68V5.12C13.76 5.47346 13.4735 5.76 13.12 5.76C12.7665 5.76 12.48 5.47346 12.48 5.12V3.68C12.48 3.59163 12.4084 3.52 12.32 3.52H10.88C10.5265 3.52 10.24 3.23346 10.24 2.88C10.24 2.52654 10.5265 2.24 10.88 2.24H12.32C12.4084 2.24 12.48 2.16837 12.48 2.08V0.64Z"}),k.jsx("path",{className:i(d("MWChatColors").MessageActions.styles.svgFill),clipRule:"evenodd",d:"M8.96 2.42705C8.96 2.28386 8.86505 2.15735 8.726 2.12317C8.18582 1.99041 7.62113 1.92 7.04 1.92C3.15192 1.92 0 5.07192 0 8.96C0 12.8481 3.15192 16 7.04 16C10.9281 16 14.08 12.8481 14.08 8.96C14.08 8.37887 14.0096 7.81418 13.8768 7.274C13.8427 7.13495 13.7161 7.04 13.573 7.04H13.12C12.0596 7.04 11.2 6.18039 11.2 5.12C11.2 4.94327 11.0567 4.8 10.88 4.8C9.81961 4.8 8.96 3.94039 8.96 2.88V2.42705ZM4.63999 6.4C4.03999 6.4 3.67999 6.88 3.67999 7.68C3.67999 8.48 4.03999 8.96 4.63999 8.96C5.23999 8.96 5.59999 8.48 5.59999 7.68C5.59999 6.88 5.23999 6.4 4.63999 6.4ZM9.43999 6.4C8.83999 6.4 8.47999 6.88 8.47999 7.68C8.47999 8.48 8.83999 8.96 9.43999 8.96C10.04 8.96 10.4 8.48 10.4 7.68C10.4 6.88 10.04 6.4 9.43999 6.4ZM10.56 11.2C10.56 12.48 8.96 13.76 7.04 13.76C5.12 13.76 3.52 12.48 3.52 11.2C3.52 11.0233 3.66327 10.88 3.84 10.88H10.24C10.4167 10.88 10.56 11.0233 10.56 11.2Z",fillRule:"evenodd"})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWAddReactionButton.react",["fbt","I64","MWCMThreadTypes.react","MWChatMessageId","MWChatReactionsActionContainer.react","MWMessageReactionIcon.react","MWV2MessageReactionHooks","MWXPressable.react","MWXTooltip.react","ODS","emptyFunction","react","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;e=b.forwardRef;var m=b.useCallback,n=b.useMemo,o={additionalInlineButton:{display:"x78zum5",flexDirection:"xdt5ytf",height:"xlup9mm",justifyContent:"xl56j7k",width:"x1npj6m0",$$css:!0},emoji:{alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",lineHeight:"x14ju556",marginEnd:"x11i5rnm",marginLeft:null,marginRight:null,$$css:!0},emojiRow:{alignItems:"x6s0dn4",backgroundColor:"x1vtvx1t",borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",display:"x78zum5",justifyContent:"xl56j7k",paddingBottom:"x10b6aqq",paddingEnd:"xsyo7zv",paddingLeft:null,paddingRight:null,paddingStart:"xurb0ha",paddingTop:"x1yrsyyn",position:"x1n2onr6",textAlign:"xp4054r",$$css:!0},emojiRowContainer:{borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",marginBottom:"x12nagc",marginEnd:"xw3qccf",marginLeft:null,marginRight:null,$$css:!0}},p=e(function(a,b){var e=a.onHoverInPrerenderer,f=a.onHoverOutPrerenderer,g=a.onPressInPrerenderer,i=a.showPopover;a=h._("__JHASH__czR8vxcW0mN__JHASH__");var k=m(function(){i(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","reaction")},[i]);return l.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:a,children:l.jsx(c("MWXPressable.react"),{"aria-label":a,expanding:!0,loggingEvent:"click_react_to_message",onHoverIn:e,onHoverOut:f,onPress:k,onPressIn:g,overlayRadius:"inherit",ref:b,role:"button",testid:void 0,xstyle:o.emojiRowContainer,children:l.jsx("div",{className:"x6s0dn4 x1vtvx1t xdxvlk3 x1fglp x1rp6h8o xg6i1s1 x78zum5 xl56j7k x10b6aqq xsyo7zv xurb0ha x1yrsyyn x1n2onr6 xp4054r",role:"none",children:l.jsx("div",{className:"x6s0dn4 x14yjl9h xudhj91 x18nykt9 xww2gxu x1ypdohk x14ju556 x11i5rnm x78zum5 xdt5ytf xlup9mm xl56j7k x1npj6m0",children:l.jsx(c("MWMessageReactionIcon.react"),{})})})})})});function a(a){var b=a.isSecure,e=a.message,f=a.sendReaction,g=a.setShouldRowStayExpanded,h=a.threadKey;a=a.threadType;var i=(k||(k=d("I64"))).to_string(h),j=k.to_string(e.timestampMs),m=n(function(){return d("MWChatMessageId").makeSent(i,e.messageId,j)},[i,e.messageId,j]);a=d("MWCMThreadTypes.react").isBroadcastThread(a);h=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(h);var o=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReactionsV2(e);return l.jsx(c("MWChatReactionsActionContainer.react"),{alwaysShowEmojiPicker:!0,closeActionsMenu:c("emptyFunction"),disableCustomReactions:h&&a,hasReactionsV2:h,isBroadcastThread:a,isSecure:b,messageID:m,onVisibilityChange:g,selectedReactions:(h=o)!=null?h:void 0,sendReaction:f,children:function(a,b,c,d,e,f){return l.jsx(p,{messageID:m,onHoverInPrerenderer:d,onHoverOutPrerenderer:e,onPressInPrerenderer:f,ref:a,showPopover:b})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWAdminMsgCtaLink.react",["MWPColorUtils","MWXLink.react","react","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.children,e=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","xstyle"]);var f=c("useMWPThreadTheme")();f=f.threadTheme.fallbackColor;return i.jsx(c("MWXLink.react"),babelHelpers["extends"]({style:{color:d("MWPColorUtils").int64ToHex(f)},weight:"bold",xstyle:e},a,{children:b}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWAdminTextLayout.react",["CometTextWithEntities.react","MWChatTextTransform","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.cta;a=a.message;a=a.text;if(a!=null)if(b!=null)return i.jsxs(i.Fragment,{children:[i.jsx(c("CometTextWithEntities.react"),{text:a,transforms:d("MWChatTextTransform").epdTextTransforms})," ",b]});else return i.jsx(c("CometTextWithEntities.react"),{text:a,transforms:d("MWChatTextTransform").epdTextTransforms});else if(b!=null)return b;else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWBuyerShippingAddressRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24917306604535550"}),null);
__d("MWBuyerShippingAddressRootQuery.graphql",["MWBuyerShippingAddressRootQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"street1",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"street2",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"city_name",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"state_name",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"district",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"sub_district",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"country_name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"care_of",storageKey:null},n={alias:null,args:null,concreteType:"XFBPAYAddressAssociatedPhoneNumberResponse",kind:"LinkedField",name:"address_linked_phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"normalized_phone_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"national_number",storageKey:null}],storageKey:null},o=[{kind:"Variable",name:"id",variableName:"id"}],p={alias:null,args:null,kind:"ScalarField",name:"country_id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWBuyerShippingAddressRootQuery",selections:[{alias:null,args:null,concreteType:"FBPayAccountExtended",kind:"LinkedField",name:"fbpay_account_extended",plural:!1,selections:[{alias:null,args:null,concreteType:"PAYFBPayAccount",kind:"LinkedField",name:"fbpay_account",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"shipping_addresses",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"MWBuyerShippingAddressSelectionAddressListItem",selections:[c,d,e,f,g,h,i,j,k,l,m,n],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:o,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWBuyerShippingAddressSelectionPrivacyText"},p],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWBuyerShippingAddressRootQuery",selections:[{alias:null,args:null,concreteType:"FBPayAccountExtended",kind:"LinkedField",name:"fbpay_account_extended",plural:!1,selections:[{alias:null,args:null,concreteType:"PAYFBPayAccount",kind:"LinkedField",name:"fbpay_account",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"shipping_addresses",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"TypeDiscriminator",abstractKey:"__isPAYMailingAddress"},c,d,e,f,g,h,i,j,k,l,m,n],storageKey:null},c],storageKey:null}],storageKey:null},{alias:null,args:o,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"messenger_privacy_policy_url",storageKey:null},p,c],storageKey:null}]},params:{id:b("MWBuyerShippingAddressRootQuery_facebookRelayOperation"),metadata:{},name:"MWBuyerShippingAddressRootQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWBuyerShippingAddressRootQuery",["MWBuyerShippingAddressRootQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("MWBuyerShippingAddressRootQuery.graphql");c=a;g["default"]=c}),98);
__d("MWCMAutoJoinNotifNUX.react",["fbt","CometContextualMessage.react","CometErrorBoundary.react","CometPlaceholder.react","JSResourceForInteraction","LSCommunityBitOffset","MWInboxPersistedUIState","MWXButtonGroup.react","ReQL","ReQLSuspense","react","useMWXLazyDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useRef,m=b.useState,n=c("JSResourceForInteraction")("LSMuteThreadDialog.react").__setRef("MWCMAutoJoinNotifNUX.react");function o(a){var b=a.thread;a=c("useMWXLazyDialog")(n);var e=a[0];a=m(!1);var f=a[0],g=a[1];a=d("MWInboxPersistedUIState").usePersistedUIState(0,"__MWCMAutoJoinNotifNuxBanner.showBanner__");var i=a[0],j=a[1];a=l(i);var o=l(!1);i=c("useVisibilityObserver")({onVisible:function(){o.current||(o.current=!0,j(function(a){return a+1}))}});return a.current<3&&!f?k.jsx("div",{className:"xcrg951 x7m3og9 x1vjfegm",ref:i,children:k.jsx(c("CometContextualMessage.react"),{addOnPrimary:k.jsx(c("MWXButtonGroup.react"),{primary:{label:h._("__JHASH__7NhHq3FFyid__JHASH__"),onPress:function(){e({threadKey:b.threadKey},function(){})},padding:"wide",type:"secondary"}}),body:h._("__JHASH__y4SjVH1sWqP__JHASH__"),headline:h._("__JHASH__Y1eNmRtGK12__JHASH__",[h._param("param",b.threadName)]),level:4,onClose:function(){g(!0)}})}):null}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.thread,e=(i||(i=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.community_folders).getKeyRange(b.parentThreadKey)},[e,b.parentThreadKey],f.id+":122");if(a){a=d("LSCommunityBitOffset").has(39,a);return a?k.jsx(o,{thread:b}):null}else return null}p.displayName=p.name+" [from "+f.id+"]";function a(a){a=a.thread;return k.jsx(c("CometErrorBoundary.react"),{children:k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(p,{thread:a})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXIconThread",["MWXSvgIcon","SVGIcon","cr:9328","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9328")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWCMCreateSubthreadRowActionButton.react",["fbt","I64","Int64Hooks","LsFalcoEventEntryPoint","MWMessageActionButton.react","MWXIconThread","react","requireDeferred","useMWCMCreateSubthread","useOpenSubthreadView"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react"),l=c("requireDeferred")("LsMessageActionFalcoEvent").__setRef("MWCMCreateSubthreadRowActionButton.react"),m=h._("__JHASH__BJS3T2_tOPf__JHASH__"),n=h._("__JHASH__ZHBRqixJ9Qy__JHASH__");function a(a){var b=a.message;a=c("useMWCMCreateSubthread")(b);var e=a[0];a=a[1];var f=c("useOpenSubthreadView")(),g=b.subthreadKey,h=d("Int64Hooks").useCallbackInt64(function(){l.onReady(function(a){return a.log(function(){var a={};return{action:{container_module:"MWCMCreateSubthreadRowActionButton",type:g!=null?105:104},error:{message:void 0},extra:a,message:{attachment_type:"",entry_point:d("LsFalcoEventEntryPoint").messageActions,id:b.messageId,recipient_id:void 0},thread:{group_size:(j||(j=d("I64"))).to_string(j.zero),id:j.to_string(b.threadKey),type:18}}})}),g!=null?f(g):void e()},[b.messageId,b.threadKey,e,f,g]);return k.jsx(c("MWMessageActionButton.react"),{disabled:a,icon:c("MWXIconThread"),label:g!=null?n:m,onPress:h})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCMHostTextHovercard.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMHostTextHovercard.react").__setRef("MWCMHostTextHovercard.entrypoint")};g["default"]=a}),98);
__d("MWCMMemberRequestsDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMMemberRequestsDialog.react").__setRef("MWCMMemberRequestsDialog.entrypoint")};g["default"]=a}),98);
__d("MWCMStandaloneJoinDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMStandaloneJoinDialog.react").__setRef("MWCMStandaloneJoinDialog.entrypoint")};g["default"]=a}),98);
__d("MWCMStandaloneRequestToJoinDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMStandaloneRequestToJoinDialog.react").__setRef("MWCMStandaloneRequestToJoinDialog.entrypoint")};g["default"]=a}),98);
__d("MWChannelInviteDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWChannelInviteDialog.react").__setRef("MWChannelInviteDialog.entrypoint")};g["default"]=a}),98);
__d("MWChatBubbleEmphasisRing.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");({borderRadius:22,borderStyle:"solid",borderWidth:2,content:"''",display:"block",pointerEvents:"none",position:"absolute",zIndex:1});var k={emphasis_ring:{backgroundColor:"xjbqb8w",borderTopColor:"xxdu5gn",borderEndColor:"x1uipg7g",borderBottomColor:"xnezbuk",borderStartColor:"xlauuyb",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x1gp4ovq",borderEndWidth:"xdio9jc",borderBottomWidth:"x1h2mt7u",borderStartWidth:"x7g060r",display:"x78zum5",maxWidth:"x1hvl878",position:"x1n2onr6","::after_borderTopStartRadius":"xquudas","::after_borderTopEndRadius":"x6p43zf","::after_borderBottomEndRadius":"x1wnhr99","::after_borderBottomStartRadius":"x1gquc79","::after_borderTopStyle":"xynf4tj","::after_borderEndStyle":"xdspwft","::after_borderBottomStyle":"x1r9ni5o","::after_borderStartStyle":"x1d52zm6","::after_borderTopWidth":"x31ga2r","::after_borderEndWidth":"xcmxnv6","::after_borderBottomWidth":"x13afdcp","::after_borderStartWidth":"x10va8jt","::after_content":"x1s928wv","::after_display":"xhkezso","::after_pointerEvents":"x2q1x1w","::after_position":"x1j6awrg","::after_zIndex":"xitxdhh","::after_borderTopColor":"x1yzler7","::after_borderEndColor":"xh3oo2y","::after_borderBottomColor":"xxqiif8","::after_borderStartColor":"xrh6a5","::after_bottom":"xdb1ctf","::after_end":"x4bhatf","::after_left":null,"::after_right":null,"::after_start":"xhg89tr","::after_top":"x7kqs8i","::before_borderTopStartRadius":"x2e93ah","::before_borderTopEndRadius":"xigdz7j","::before_borderBottomEndRadius":"x1vxwiij","::before_borderBottomStartRadius":"xfgw0w6","::before_borderTopStyle":"xnvurfn","::before_borderEndStyle":"xv1ta3e","::before_borderBottomStyle":"x1opv7go","::before_borderStartStyle":"x1dtnpoi","::before_borderTopWidth":"x1b8stmw","::before_borderEndWidth":"xyhsekn","::before_borderBottomWidth":"xmbliey","::before_borderStartWidth":"x1igdxxj","::before_content":"x1cpjm7i","::before_display":"x1fgarty","::before_pointerEvents":"xkk1bqk","::before_position":"x1hmns74","::before_zIndex":"x12maryy","::before_borderTopColor":"xtei6gu","::before_borderEndColor":"x1nwru9p","::before_borderBottomColor":"xxs4umj","::before_borderStartColor":"xg8j718","::before_bottom":"xe80sof","::before_end":"x105ji64","::before_left":null,"::before_right":null,"::before_opacity":"x1u3qutx","::before_start":"xbs7dl3","::before_top":"x51xajf",$$css:!0},emphasis_ring_before_xma:{borderBottomStyle:"x1sy0etr","::after_borderBottom":"x1bxl7c5","::after_borderBottomEndRadius":"x1qo8dsh","::after_borderBottomStartRadius":"x1oiup0q","::before_borderBottom":"xozyfcf","::before_borderBottomEndRadius":"x1nxuetn","::before_borderBottomStartRadius":"x1doa7m0",$$css:!0},emphasis_ring_connect_bottom_incoming:{"::after_borderBottomStartRadius":"x1573djm","::before_borderBottomStartRadius":"x106tphz",$$css:!0},emphasis_ring_connect_bottom_outgoing:{"::after_borderBottomEndRadius":"x1nb2ndt","::before_borderBottomEndRadius":"x7ft4bm",$$css:!0},emphasis_ring_connect_top_incoming:{"::after_borderTopStartRadius":"x14nzmgs","::before_borderTopStartRadius":"x58eeit",$$css:!0},emphasis_ring_connect_top_outgoing:{"::after_borderTopEndRadius":"xe41ffp","::before_borderTopEndRadius":"x1cbhpwz",$$css:!0},emphasis_ring_xma:{borderTopStyle:"x1ejq31n",width:"x1o2z316","::after_borderTop":"x12dgpll","::after_borderTopEndRadius":"x1utvphz","::after_borderTopStartRadius":"x17dqjr0","::before_borderTop":"xp2bjph","::before_borderTopEndRadius":"xajc7s","::before_borderTopStartRadius":"x1eo7yr1",$$css:!0}};function a(a){var b=a.hasXMA,d=a.children,e=a.connectBottom,f=a.connectTop,g=a.outgoing;a=a.precedesXMA;var i=g?k.emphasis_ring_connect_top_outgoing:k.emphasis_ring_connect_top_incoming;g=g?k.emphasis_ring_connect_bottom_outgoing:k.emphasis_ring_connect_bottom_incoming;a=[k.emphasis_ring,a?k.emphasis_ring_before_xma:e&&g,f&&(b?k.emphasis_ring_xma:i)];return j.jsx("div",{className:(h||(h=c("stylex")))(a),"data-testid":void 0,children:d})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatBusinessQuickReply.react",["FDSImage.react","MDSTextPairing.react","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={image:{borderTopStartRadius:"x1z11no5",borderTopEndRadius:"xjy5m1g",borderBottomEndRadius:"x1mnwbp6",borderBottomStartRadius:"x4pb5v6","float":"xrbpyxo",height:"x158ke7r",marginTop:"x16ldp7u",marginEnd:"x1t4t16n",marginBottom:"xz62fqu",marginStart:"xbmpl8g",width:"x1kl0l3y",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"x1eb86dx",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",borderTopStyle:"x143s1ad",borderEndStyle:"xp3zfi1",borderBottomStyle:"x137oirg",borderStartStyle:"xojro6o",boxShadow:"x1vnslfi",boxSizing:"x9f619",cursor:"x1ypdohk",fontFamily:"xjb2p0i",fontWeight:"xk50ysn",justifyContent:"xl56j7k",marginTop:"xr9ek0c",marginEnd:"x1emribx",marginBottom:"xjpr12u",marginStart:"x1i64zmx",overflowWrap:"x1mzt3pk",paddingBottom:"x1a8lsjc",paddingEnd:"xn6708d",paddingLeft:null,paddingRight:null,paddingStart:"x1ye3gou",paddingTop:"x889kno",textAlign:"x1yc453h",wordBreak:"x13faqbe",$$css:!0},vertical:{paddingBottom:"xsag5q8",paddingEnd:"xn6708d",paddingLeft:null,paddingRight:null,paddingStart:"xr9oo41",$$css:!0}};function a(a){var b=a.bodyLineLimit;b=b===void 0?1:b;var d=a.imageUrl,e=a.onClick,f=a.quickReplyVertical;f=f===void 0?!1:f;a=a.text;var g=c("gkx")("24108");return j.jsx("div",{className:(h||(h=c("stylex")))(f?k.vertical:!1),children:j.jsxs("button",{className:"x6s0dn4 x1eb86dx xfh8nwu xoqspk4 x12v9rci x138vmkv x143s1ad xp3zfi1 x137oirg xojro6o x1vnslfi x9f619 x1ypdohk xjb2p0i xk50ysn xl56j7k xr9ek0c x1emribx xjpr12u x1i64zmx x1mzt3pk x1a8lsjc xn6708d x1ye3gou x889kno x1yc453h x13faqbe",onClick:e,children:[d!=null?j.jsx(c("FDSImage.react"),{src:d,xstyle:k.image}):null,j.jsx(c("MDSTextPairing.react"),{body:a,bodyColor:g?"blueLink":"primary",bodyLineLimit:b,level:3})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatBusinessQuickReplyText.react",["MWChatBusinessQuickReply.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.onSend,d=a.quickReply;a=a.quickReplyVertical;var e=a?3:1,f=function(){return b(d)},g=d.image_url;return i.jsx(c("MWChatBusinessQuickReply.react"),{bodyLineLimit:e,imageUrl:(e=g)!=null?e:void 0,onClick:f,quickReplyVertical:a,text:d.title})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUserBirthdayQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4679476245513562"}),null);
__d("MWChatUserBirthdayQuery.graphql",["MWChatUserBirthdayQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,concreteType:"Date",kind:"LinkedField",name:"birthdate",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"day",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"month",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"year",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatUserBirthdayQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatUserBirthdayQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MWChatUserBirthdayQuery_facebookRelayOperation"),metadata:{},name:"MWChatUserBirthdayQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatUserBirthdayQuery",["CometRelay","MWChatUserBirthdayQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i="en-US";function j(a,b,c,d){c=new Date(c,b-1,a);return c.toLocaleDateString(d,{day:"numeric",month:"numeric",year:"numeric"})}function a(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,k,{}).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.user)==null?void 0:a.birthdate;if(a){var c=a==null?void 0:a.day,d=a==null?void 0:a.month;a=a==null?void 0:a.year;c!=null&&d!=null&&a!=null&&b(j(c,d,a,i))}});c("promiseDone")(e)}}var k=h!==void 0?h:h=b("MWChatUserBirthdayQuery.graphql");g.useUserBirthdayDataQuery=a}),98);
__d("MWChatBusinessQuickReplyUserBirthday.react",["MWChatBusinessQuickReply.react","MWChatUserBirthdayQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserBirthdayQuery").useUserBirthdayDataQuery(),h=k(),l=h[0],m=h[1];j(function(){g(function(a){return m(a)})},[a,g,m]);if(l==null)return null;h=e.content_type;a=e.data;var n=e.image_url;e=e.payload;var o={content_type:h,data:a,image_url:n,payload:e,title:l};h=function(){return b(o)};return i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:h,quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUserEmailQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5146654855396537"}),null);
__d("MWChatUserEmailQuery.graphql",["MWChatUserEmailQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Email",kind:"LinkedField",name:"all_emails",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"display_email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_primary",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatUserEmailQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatUserEmailQuery",selections:a},params:{id:b("MWChatUserEmailQuery_facebookRelayOperation"),metadata:{},name:"MWChatUserEmailQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatUserEmailQuery",["CometRelay","MWChatUserEmailQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,i,{}).toPromise().then(function(a){a=a==null?void 0:a.viewer.all_emails;if(a&&a.length>0){var c=a.find(function(a){return a.is_primary});c!=null?b(c.display_email):b(a[0].display_email)}});c("promiseDone")(e)}}var i=h!==void 0?h:h=b("MWChatUserEmailQuery.graphql");g.useUserEmailDataQuery=a}),98);
__d("MWChatBusinessQuickReplyUserEmail.react",["MWChatBusinessQuickReply.react","MWChatUserEmailQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserEmailQuery").useUserEmailDataQuery(),h=k(),l=h[0],m=h[1];j(function(){g(m)},[a,g,m]);return l==null?null:i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:function(){return b({content_type:e.content_type,data:e.data,image_url:e.image_url,payload:e.payload,title:l})},quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUserPhoneNumberQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5063442323698780"}),null);
__d("MWChatUserPhoneNumberQuery.graphql",["MWChatUserPhoneNumberQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,concreteType:"Phone",kind:"LinkedField",name:"all_phones",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_preferred",storageKey:null},{alias:null,args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"universal_number",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatUserPhoneNumberQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatUserPhoneNumberQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MWChatUserPhoneNumberQuery_facebookRelayOperation"),metadata:{},name:"MWChatUserPhoneNumberQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatUserPhoneNumberQuery",["CometRelay","MWChatUserPhoneNumberQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,i,{}).toPromise().then(function(a){a=a==null?void 0:a.viewer.user.all_phones;if(a&&a.length>0){var c=a.find(function(a){return a.is_preferred});if(c!=null){b((c=c.phone_number)==null?void 0:c.universal_number)}else{b((c=a[0].phone_number)==null?void 0:c.universal_number)}}});c("promiseDone")(e)}}var i=h!==void 0?h:h=b("MWChatUserPhoneNumberQuery.graphql");g.useUserPhoneNumberDataQuery=a}),98);
__d("MWChatBusinessQuickReplyUserPhoneNumber.react",["MWChatBusinessQuickReply.react","MWChatUserPhoneNumberQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserPhoneNumberQuery").useUserPhoneNumberDataQuery(),h=k(function(){}),l=h[0],m=h[1];j(function(){g(function(a){return m(function(){return a})})},[a,g,m]);if(l==null)return null;h=e.content_type;a=e.data;var n=e.image_url;e=e.payload;var o={content_type:h,data:a,image_url:n,payload:e,title:l};h=function(){return b(o)};return i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:h,quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUserProfileLocationQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7039613476103704"}),null);
__d("MWChatUserProfileLocationQuery.graphql",["MWChatUserProfileLocationQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null}],storageKey:null}],type:"User",abstractKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatUserProfileLocationQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatUserProfileLocationQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MWChatUserProfileLocationQuery_facebookRelayOperation"),metadata:{},name:"MWChatUserProfileLocationQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatUserProfileLocationQuery",["CometRelay","MWChatUserProfileLocationQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,i,{}).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.actor)==null?void 0:(a=a.address)==null?void 0:a.region;a!=null&&a!==""&&b(a)});c("promiseDone")(e)}}function e(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,i,{}).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.actor)==null?void 0:a.address;a=a==null?void 0:a.postal_code;a!=null&&b(a)});c("promiseDone")(e)}}var i=h!==void 0?h:h=b("MWChatUserProfileLocationQuery.graphql");g.useUserProfileStateDataQuery=a;g.useUserProfileZipCodeDataQuery=e}),98);
__d("MWChatBusinessQuickReplyUserState.react",["MWChatBusinessQuickReply.react","MWChatUserProfileLocationQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserProfileLocationQuery").useUserProfileStateDataQuery(),h=k(),l=h[0],m=h[1];j(function(){g(function(a){return m(a)})},[a,g,m]);if(l==null)return null;h=e.content_type;a=e.data;var n=e.image_url;e=e.payload;var o={content_type:h,data:a,image_url:n,payload:e,title:l};h=function(){return b(o)};return i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:h,quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatBusinessQuickReplyUserZipCode.react",["MWChatBusinessQuickReply.react","MWChatUserProfileLocationQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserProfileLocationQuery").useUserProfileZipCodeDataQuery(),h=k(),l=h[0],m=h[1];j(function(){g(function(a){return m(a)})},[a,g,m]);if(l==null)return null;h=e.content_type;a=e.data;var n=e.image_url;e=e.payload;var o={content_type:h,data:a,image_url:n,payload:e,title:l};h=function(){return b(o)};return i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:h,quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatBusinessQuickReplyList.react",["Actor","CometScrollableArea.react","I64","LSIntEnum","LSQuickReplyType","MWChatBusinessQuickReplyText.react","MWChatBusinessQuickReplyUserBirthday.react","MWChatBusinessQuickReplyUserEmail.react","MWChatBusinessQuickReplyUserPhoneNumber.react","MWChatBusinessQuickReplyUserState.react","MWChatBusinessQuickReplyUserZipCode.react","MessengerWebEventsFalcoEvent","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useEffect,n={container:{position:"x1n2onr6",width:"xh8yej3",$$css:!0},mask:{backgroundColor:"x1eb86dx",$$css:!0},pillContainer:{backgroundColor:"x1eb86dx",display:"x78zum5",flexDirection:"x1q0g3np",flexWrap:"xozqiw3",paddingTop:"x1nn3v0j",paddingEnd:"x1sxyh0",paddingBottom:"x1a8lsjc",paddingStart:"xurb0ha",$$css:!0},pillContainerVertical:{alignItems:"xuk3077",backgroundColor:"x1eb86dx",display:"x78zum5",flexDirection:"xdt5ytf",paddingTop:"xm7lytj",$$css:!0}};function a(a){var b=a.arrayQR,e=a.id,f=a.onSend;a=a.quickReplyType;a=a===void 0?(j||(j=d("LSIntEnum"))).ofNumber(c("LSQuickReplyType").NONE):a;var g=(k||(k=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSQuickReplyType").VERTICAL));a=d("Actor").useActor();var i=a[0];m(function(){c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"render_quick_replies",other_user_fbid:e}})},[e]);return l.jsx("div",{className:"x1n2onr6 xh8yej3 x1eb86dx",children:l.jsx(c("CometScrollableArea.react"),{horizontal:!0,children:l.jsx("div",{className:(h||(h=c("stylex")))(g?n.pillContainerVertical:n.pillContainer),children:b.map(function(a,b){switch(a.content_type){case"text":return l.jsx(c("MWChatBusinessQuickReplyText.react"),{onSend:f,quickReply:a,quickReplyVertical:g},String(b));case"user_birthday":return l.jsx(c("MWChatBusinessQuickReplyUserBirthday.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));case"user_email":return l.jsx(c("MWChatBusinessQuickReplyUserEmail.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));case"user_phone_number":return l.jsx(c("MWChatBusinessQuickReplyUserPhoneNumber.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));case"user_state":return l.jsx(c("MWChatBusinessQuickReplyUserState.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));case"user_zip_code":return l.jsx(c("MWChatBusinessQuickReplyUserZipCode.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));default:return null}})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatCustomerFeedbackFormDataQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5832261760118587"}),null);
__d("MWChatCustomerFeedbackFormDataQuery.graphql",["MWChatCustomerFeedbackFormDataQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"formID"}],c={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null};c=[{alias:null,args:[{kind:"Variable",name:"form_id",variableName:"formID"}],concreteType:"MessengerFeedbackFormDataResult",kind:"LinkedField",name:"messenger_feedback_form_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"form_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"page_id",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedbackBusinessPrivacyObject",kind:"LinkedField",name:"privacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedbackFormScreenObject",kind:"LinkedField",name:"first_screen",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerFeedbackQuestionObject",kind:"LinkedField",name:"feedback_questions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_default_title",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score_option",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"left_score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"right_score_label",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedBackQuestionFollowup",kind:"LinkedField",name:"follow_up",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatCustomerFeedbackFormDataQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatCustomerFeedbackFormDataQuery",selections:c},params:{id:b("MWChatCustomerFeedbackFormDataQuery_facebookRelayOperation"),metadata:{},name:"MWChatCustomerFeedbackFormDataQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatCustomerFeedbackFormDataQuery",["CometRelay","MWChatCustomerFeedbackFormDataQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b,e){b=d("CometRelay").fetchQuery(b,j,{formID:a}).toPromise().then(function(a){a&&e({firstScreen:a.messenger_feedback_form_data.first_screen,formId:a.messenger_feedback_form_data.form_id,pageId:a.messenger_feedback_form_data.page_id,privacy:a.messenger_feedback_form_data.privacy})});c("promiseDone")(b)},j=h!==void 0?h:h=b("MWChatCustomerFeedbackFormDataQuery.graphql");a=function(a,b,c){i(a,b,function(a){return c(a)})};g.fetch=a}),98);
__d("MWChatCustomerFeedbackStateQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4589106431193063"}),null);
__d("MWChatCustomerFeedbackStateQuery.graphql",["MWChatCustomerFeedbackStateQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"formID"}],c=[{alias:null,args:[{fields:[{kind:"Variable",name:"form_id",variableName:"formID"}],kind:"ObjectValue",name:"input"}],concreteType:"MessengerFeedbackFormStateQueryObject",kind:"LinkedField",name:"messenger_feedback_form_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"form_state",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatCustomerFeedbackStateQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatCustomerFeedbackStateQuery",selections:c},params:{id:b("MWChatCustomerFeedbackStateQuery_facebookRelayOperation"),metadata:{},name:"MWChatCustomerFeedbackStateQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatCustomerFeedbackStateQuery",["CometRelay","MWChatCustomerFeedbackStateQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b,e){b=d("CometRelay").fetchQuery(b,j,{formID:a}).toPromise().then(function(a){if(a){e((a=a.messenger_feedback_form_state)==null?void 0:a.form_state)}});c("promiseDone")(b)},j=h!==void 0?h:h=b("MWChatCustomerFeedbackStateQuery.graphql");a=function(a,b,c){i(a,b,function(a){return c(a)})};g.fetch=a}),98);
__d("MWChatFileIconV2.react",["MDSSvgDocumentCompleteIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){return i.jsx("div",{className:"x6s0dn4 xgx9qek x14yjl9h xudhj91 x18nykt9 xww2gxu x78zum5 xl56j7k x1iorvi4 x150jy0e xjkvuk6 x1e558r4",children:i.jsx(c("MDSSvgDocumentCompleteIcon.react"),{color:"primary",size:24})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatFilePreview.react",["CometImageCover.react","MWChatFileIconV2.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={icon:{paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,$$css:!0},imageCover:{maxHeight:"x138jeol",objectPosition:"x8ozjh4",$$css:!0}};function a(a){var b=a.attachment,d=a.fileName;a=a.withPreview;b=(b=b)!=null?b:{};b=b.previewUrl;return b==null||!a?i.jsx("div",{className:"x1ye3gou",children:i.jsx(c("MWChatFileIconV2.react"),{})}):i.jsx(c("CometImageCover.react"),{alt:(a=d)!=null?a:"",src:b,style:j.imageCover})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatImageInsetShadow.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={imageShadow:{borderTopColor:"x1pdss0j",borderEndColor:"xtcpoma",borderBottomColor:"x81c4ja",borderStartColor:"x8g6rb3",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",borderTopEndRadius:"x1g8br2z",borderTopStartRadius:"x1tlxs6b",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",bottom:"x1ey2m1c",boxSizing:"x9f619",end:"xds687c",left:null,right:null,start:"x17qophe",pointerEvents:"x47corl",position:"x10l6tqk",top:"x13vifvy",$$css:!0}};function a(a){a=a.xstyle;return i.jsx(d("react-strict-dom").html.div,{style:[j.imageShadow,a]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatImageSize",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState;function a(a,b,c){var d=b!=null?b:!1,e=j();c=k();b=c[0];var f=c[1];i(function(){if(a==null)return;if(e.current==null&&!d){var b=new Image();b.src=a;b.onload=function(){return f({height:b.naturalHeight,width:b.naturalWidth})};e.current=b}return function(){f(function(){});var a=e.current;if(a==null)return;a.onload=null}},[a,d,f]);return b}g.useImageSize=a}),98);
__d("MWChatMessageUnreadIndicator.react",["fbt","MDSRow.react","MDSRowItem.react","MWXText.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={color:{color:"x186z157",$$css:!0},line:{backgroundColor:"x1m026b5",flexGrow:"x1iyjqo2",height:"xjm9jq1",$$css:!0}};function a(){var a=h._("__JHASH__dAK4xN4bf5e__JHASH__");return j.jsxs(c("MDSRow.react"),{"aria-label":a,paddingVertical:12,spacingVertical:0,children:[j.jsx(c("MDSRowItem.react"),{verticalAlign:"center",xstyle:k.line,children:j.jsx(j.Fragment,{})}),j.jsx(c("MDSRowItem.react"),{children:j.jsx(c("MWXText.react"),{color:"secondary",isSemanticHeading:!0,type:"meta4",children:j.jsx(d("react-strict-dom").html.div,{style:k.color,children:a})})}),j.jsx(c("MDSRowItem.react"),{verticalAlign:"center",xstyle:k.line,children:j.jsx(j.Fragment,{})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatMultiReactionsTooltip.react",["fbt","I64","LSClearReactionsV2DetailsAndRangeStoredProcedure","LSFactory","LSIssueReactionsV2DetailsUsersListFetchStoredProcedure","LSPlatformWaitForTaskCompletion","MWPActor.react","MWXPressable.react","MWXText.react","ReQL","ReQLSuspense","intlSummarizeNumber","promiseDone","react","usePrevious","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;var m=b.useEffect,n=b.useRef,o=b.useState,p=9;function a(a){var b=a.messageId,e=a.onTooltipCTAPress,g=a.reactionFbid,k=a.threadKey,q=(i||(i=c("useReStore")))();a=o(!0);var r=a[0],s=a[1];m(function(){s(!0),c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(q,function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:b,reactionFbid:g,threadId:k})},"issueReactionsV2DetailsUsersListFetch").then(function(){s(!1)}))},[q,k,b,g,s]);var t=d("MWPActor.react").useActor();a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(q.tables.reactions_v2_details).getKeyRange(k,b).filter(function(a){return(j||(j=d("I64"))).equal(a.reactionFbid,g)})},[q,k,b,g],f.id+":70");var u=new Map();a.forEach(function(a){return u.set((j||(j=d("I64"))).to_string(a.reactorId),a.fullName)});var v=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(q.tables.threads).getKeyRange(k).map(function(a){var b=a.parentThreadKey;return d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(q.tables.contextual_profile_v1).filter(function(a){return(j||(j=d("I64"))).equal(a.associatedEntityId,b)}),f.id+":88")})},[q,k],f.id+":83"),w=null;v!=null&&v.forEach(function(a){var b=(j||(j=d("I64"))).to_string(a.ownerId),c=a.profileName;if(c==null)return;u.has(b)&&u.set(b,c);(j||(j=d("I64"))).equal(a.ownerId,t)&&(w=c)});var x=a.map(function(a){return u.get((j||(j=d("I64"))).to_string(a.reactorId))}).filter(Boolean);v=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(q.tables.reactions_v2).getKeyRange(k,b,g)},[q,k,b,g],f.id+":117");a=(a=v==null?void 0:v.viewerIsReactor)!=null?a:!1;var y=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(q.tables.contacts).getKeyRange(t).map(function(a){return a.name})},[q,t],f.id+":129");y=w!=null?w:y;var z=v!=null?(j||(j=d("I64"))).to_int32(v.count):0;z===1&&a&&x.length===0&&y!=null?x.push(y):a&&x[0]!=null&&y!=null&&((v=x[0])==null?void 0:v.toString())!==y&&x.unshift(y);var A=h._("__JHASH__GTBXwO8BaZr__JHASH__");a=function(){var a=[].concat(x.slice(0,p)),b=!1;if(x.length>p){var d=z-p;if(d<0)return[A,!0];a.push(h._("__JHASH__KVtJcih6CQz__JHASH__",[h._plural(d),h._param("count",String(c("intlSummarizeNumber")(d)))]).toString())}else b=!r&&x.length!==z;return a.length===0?[A,b]:[a.map(function(a,b){return l.jsx("div",{children:a},String(b))}),b]}();v=a[0];var B=a[1],C=c("usePrevious")(B),D=n(null);m(function(){return function(){D.current!=null&&window.clearTimeout(D.current)}},[]);m(function(){if(C===B)return;if(!B)D.current!=null&&(window.clearTimeout(D.current),D.current=null);else{if(D.current!=null)return;D.current=window.setTimeout(function(){D.current=null,c("promiseDone")(q.runInTransaction(function(a){return c("LSClearReactionsV2DetailsAndRangeStoredProcedure")(c("LSFactory")(a))},"readwrite")),c("promiseDone")(q.runInTransaction(function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:b,threadId:k})},"readwrite"))},700)}},[q,B,C,b,g,k]);return l.jsx(c("MWXPressable.react"),{"aria-label":h._("__JHASH__g_e4jdcSB-i__JHASH__"),onPress:e,overlayDisabled:!0,children:l.jsx(c("MWXText.react"),{color:"tooltip",type:"body4",children:v})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatPIIFormNuxQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5048028465289521"}),null);
__d("MWChatPIIFormNuxQuery.graphql",["MWChatPIIFormNuxQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"MessengerPIIFormFirstPartyPrivacyObject",kind:"LinkedField",name:"messenger_pii_nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatPIIFormNuxQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatPIIFormNuxQuery",selections:a},params:{id:b("MWChatPIIFormNuxQuery_facebookRelayOperation"),metadata:{},name:"MWChatPIIFormNuxQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PiiActionFlowFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744182");b=d("FalcoLoggerInternal").create("pii_action_flow",a);e=b;g["default"]=e}),98);
__d("MWChatPIIFormNuxQuery",["CometRelay","MWChatPIIFormNuxQuery.graphql","PiiActionFlowFalcoEvent","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b,e,f){a=d("CometRelay").fetchQuery(a,j,{}).toPromise().then(function(a){if(a){c("PiiActionFlowFalcoEvent").log(function(){return{event_name:"pii_initial_query_success",extra_data:"",form_id:b,page_id:e}});if(a.messenger_pii_nux==null)f({description:"",seen:!0,title:"",url:"",url_text:""});else{var d;f({description:(d=a.messenger_pii_nux.description)!=null?d:"",seen:!1,title:(d=a.messenger_pii_nux.title)!=null?d:"",url:(d=a.messenger_pii_nux.url)!=null?d:"",url_text:(d=a.messenger_pii_nux.url_text)!=null?d:""})}}},function(a){c("PiiActionFlowFalcoEvent").log(function(){return{event_name:"pii_initial_query_failure",extra_data:a.message,form_id:b,page_id:e}})});c("promiseDone")(a)},j=h!==void 0?h:h=b("MWChatPIIFormNuxQuery.graphql");a=function(a,b,c,d){i(a,b,c,function(a){return d(a)})};g.fetch=a}),98);
__d("MWChatPIIFormScreenQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5021823607854583"}),null);
__d("MWChatPIIFormScreenQuery.graphql",["MWChatPIIFormScreenQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"formID"},{defaultValue:null,kind:"LocalArgument",name:"screenIndex"}],c=[{alias:null,args:[{fields:[{kind:"Variable",name:"form_id",variableName:"formID"},{kind:"Variable",name:"screen_index",variableName:"screenIndex"}],kind:"ObjectValue",name:"input"}],concreteType:"MessengerPIIFormSingleScreenObject",kind:"LinkedField",name:"messenger_pii_form_single_screen",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerPIIFormScreenObject",kind:"LinkedField",name:"screen",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"screen_title",storageKey:null},{alias:null,args:null,concreteType:"MessengerPIIQuestionObject",kind:"LinkedField",name:"questions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mask",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatPIIFormScreenQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatPIIFormScreenQuery",selections:c},params:{id:b("MWChatPIIFormScreenQuery_facebookRelayOperation"),metadata:{},name:"MWChatPIIFormScreenQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatPIIFormScreenQuery",["CometRelay","MWChatPIIFormScreenQuery.graphql","PiiActionFlowFalcoEvent","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b,e,f,g){f=d("CometRelay").fetchQuery(f,j,{formID:a,screenIndex:e}).toPromise().then(function(d){if(d){d=d.messenger_pii_form_single_screen.screen;var e=d.questions.map(function(a){return{format:a.format,id:a.id,length:a.length,mask:a.mask,placeholder:a.placeholder,subtitle:a.subtitle,title:a.title,type:a.type}}),f={question_list_size:d.questions.length};c("PiiActionFlowFalcoEvent").log(function(){return{event_name:"pii_single_page_query_success",extra_data:JSON.stringify(f),form_id:a,page_id:b}});g({questions:e,screen_title:d.screen_title})}},function(d){c("PiiActionFlowFalcoEvent").log(function(){return{event_name:"pii_single_page_query_failure",extra_data:d.message,form_id:a,page_id:b}})});c("promiseDone")(f)},j=h!==void 0?h:h=b("MWChatPIIFormScreenQuery.graphql");a=function(a,b,c,d,e){i(a,b,c,d,function(a){return e(a)})};g.fetch=a}),98);
__d("MWChatPIIFormStateQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4923666631045015"}),null);
__d("MWChatPIIFormStateQuery.graphql",["MWChatPIIFormStateQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"formID"}],c=[{alias:null,args:[{fields:[{kind:"Variable",name:"form_id",variableName:"formID"}],kind:"ObjectValue",name:"input"}],concreteType:"MessengerPIIFormStateQueryObject",kind:"LinkedField",name:"messenger_pii_form_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatPIIFormStateQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatPIIFormStateQuery",selections:c},params:{id:b("MWChatPIIFormStateQuery_facebookRelayOperation"),metadata:{},name:"MWChatPIIFormStateQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatPIIFormStateQuery",["CometRelay","MWChatPIIFormStateQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b,e){b=d("CometRelay").fetchQuery(b,j,{formID:a}).toPromise().then(function(a){a&&e(a.messenger_pii_form_state.state)});c("promiseDone")(b)},j=h!==void 0?h:h=b("MWChatPIIFormStateQuery.graphql");a=function(a,b,c){i(a,b,function(a){return c(a)})};g.fetch=a}),98);
__d("MWChatReceiptDataQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7735392359808092"}),null);
__d("MWChatReceiptDataQuery.graphql",["MWChatReceiptDataQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"messageID"},c={defaultValue:null,kind:"LocalArgument",name:"receiptID"},d=[{alias:null,args:[{kind:"Variable",name:"message_id",variableName:"messageID"},{kind:"Variable",name:"receipt_id",variableName:"receiptID"}],concreteType:"ReceiptDataResult",kind:"LinkedField",name:"receipt_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"recipient_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"merchant_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"order_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payment_method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"order_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cancellation_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"address_line_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"address_line_2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"address_line_3",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_cost",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_tax",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shipping_cost",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtotal",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"order_time",storageKey:null},{alias:null,args:null,concreteType:"ReceiptItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumb_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"quantity",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Adjustment",kind:"LinkedField",name:"adjustments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"adjustment_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"display_adjustment_amount",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c],kind:"Fragment",metadata:null,name:"MWChatReceiptDataQuery",selections:d,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a],kind:"Operation",name:"MWChatReceiptDataQuery",selections:d},params:{id:b("MWChatReceiptDataQuery_facebookRelayOperation"),metadata:{},name:"MWChatReceiptDataQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatReceiptDataQuery",["CometRelay","CometRelayEnvironment","MWChatReceiptDataQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,b,e){c("promiseDone")(d("CometRelay").fetchQuery(c("CometRelayEnvironment"),i,{messageID:b,receiptID:a}).toPromise().then(function(a){if((a==null?void 0:a.receipt_data)!=null){a=a.receipt_data;var b=a.items?a.items.map(function(a){return{description:a.description,name:a.name,price:a.price,quantity:a.quantity,thumb_url:a.thumb_url}}):[],c=a.adjustments?a.adjustments.map(function(a){return{adjustment_type:a.adjustment_type,display_adjustment_amount:a.display_adjustment_amount}}):[];e({address_line_1:a.address_line_1,address_line_2:a.address_line_2,address_line_3:a.address_line_3,adjustments:c,cancellation_url:a.cancellation_url,items:b,merchant_name:a.merchant_name,order_id:a.order_id,order_time:a.order_time,order_url:a.order_url,payment_method:a.payment_method,recipient_name:a.recipient_name,shipping_cost:a.shipping_cost,subtotal:a.subtotal,total_cost:a.total_cost,total_tax:a.total_tax})}}))};var i=h!==void 0?h:h=b("MWChatReceiptDataQuery.graphql");g.fetch=a}),98);
__d("MWChatSingleSeenHead.react",["MDSGlimmer.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.altText,e=a.head;a=a.xstyle;return e.imageSrc===""?i.jsx(c("MDSGlimmer.react"),{index:1,xstyle:j.profilePlaceholder}):i.jsx(d("react-strict-dom").html.img,{alt:b,"data-testid":void 0,height:14,src:e.imageSrc,style:[j.image,a],width:14})}a.displayName=a.name+" [from "+f.id+"]";var j={image:{borderTopStartRadius:"x1rcc7c0",borderTopEndRadius:"xbtbmw4",borderBottomEndRadius:"x1lie4ck",borderBottomStartRadius:"x16hxpj1",height:"x1v9usgg",userSelect:"x87ps6o",verticalAlign:"x11njtxf",width:"x6jxa94",$$css:!0},profilePlaceholder:{borderTopStartRadius:"x1rcc7c0",borderTopEndRadius:"xbtbmw4",borderBottomEndRadius:"x1lie4ck",borderBottomStartRadius:"x16hxpj1",height:"x1v9usgg",verticalAlign:"x3ajldb",width:"x6jxa94",$$css:!0}};g["default"]=a}),98);
__d("MWChatSingleSeenHeadRow.react",["MWChatSingleSeenHead.react","MWLSThreadDisplayContext","MWXTooltip.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={mask:{backgroundColor:"x1eb86dx",$$css:!0},root:{display:"x78zum5",justifyContent:"x13a6bvl",$$css:!0},singleSeenHeadRow:{display:"x1jfb8zj",$$css:!0}};function a(a){var b=a.head,e=a.text;a=a.xstyle;var f=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();return i.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[j.root,j.mask],children:i.jsx(d("react-strict-dom").html.div,{style:[j.singleSeenHeadRow,a],children:i.jsx(c("MWXTooltip.react"),{align:f==="Inbox"?"middle":"end",forceInlineDisplay:!0,position:"above",tooltip:e,children:i.jsx(c("MWChatSingleSeenHead.react"),{altText:e,head:b})},b.id)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUnavailableComposer.react",["fbt","ComponentMountUnmountSubspanLogger.react","MWBlockedComposerLogging","MWXComposerBanner.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.reason;a=a.thread;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a.threadKey,b);a=h._("__JHASH__FoZB3MxTOU9__JHASH__");return j.jsxs("div",{children:[j.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MWChatUnavailableComposer"}),j.jsx(c("MWXComposerBanner.react"),{bodyText:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUnsendNUX.react",["cr:2884","cr:4186","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.senderUnsendNUXEnabled;return i.jsxs(i.Fragment,{children:[b("cr:2884")==null?null:i.jsx(b("cr:2884"),{}),b("cr:4186")!=null&&a?i.jsx(b("cr:4186"),{}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatXACSunsettingBanner.react",["fbt","ix","MWXButton.react","MWXImage.react","MWXRow.react","MWXRowItem.react","MWXText.react","goURIOnWindow","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l="https://www.facebook.com/help/messenger-app/619453488713104?ref=learn_more",m={button:{flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",$$css:!0},card:{backgroundColor:"xcrg951",boxShadow:"x7m3og9",position:"x10l6tqk",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0},imageRow:{paddingTop:"x1nn3v0j",$$css:!0}};function a(){var a,b,d=h._("__JHASH__TDoMKgQOS58__JHASH__"),e=h._("__JHASH__9PUf24O7tfB__JHASH__");return k.jsxs("div",{className:"xcrg951 x7m3og9 x10l6tqk xh8yej3 x1vjfegm",children:[k.jsxs(a=c("MWXRow.react"),{paddingHorizontal:12,paddingTop:12,children:[k.jsx(b=c("MWXRowItem.react"),{xstyle:m.imageRow,children:k.jsx(c("MWXImage.react"),{src:i("331359")})}),k.jsxs(b,{expanding:!0,children:[k.jsx(a,{paddingHorizontal:0,paddingTop:0,children:k.jsx(b,{children:k.jsx(c("MWXText.react"),{color:"primary",type:"headline4",children:d})})}),k.jsx(a,{paddingHorizontal:0,paddingTop:8,children:k.jsx(b,{children:k.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:e})})})]})]}),k.jsx(a,{paddingHorizontal:12,paddingTop:8,paddingVertical:12,wrap:"forward",children:k.jsx(b,{xstyle:m.button,children:k.jsx(c("MWXButton.react"),{label:h._("__JHASH__W_KwwnBzw9K__JHASH__"),onPress:function(){c("goURIOnWindow")(window.open("","_blank"),l)},type:"primary"})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWP2PPaymentTransactionInformationVerify",["JSResourceForInteraction","XP2PVerificationDialogBaseControllerRouteBuilder","gkx","nullthrows","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("CometCompatModal.react").__setRef("MWP2PPaymentTransactionInformationVerify")),b=a[0];a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("CometP2PPaymentIDVFlow.react").__setRef("MWP2PPaymentTransactionInformationVerify"));var d=a[0];return i(function(a){a=a.id;if(c("gkx")("22992"))return d({transferId:c("nullthrows")(a)},function(){});else return b({params:{rel:"dialog-post",uri:c("XP2PVerificationDialogBaseControllerRouteBuilder").buildURL({id:c("nullthrows")(a),is_sender_flow:!1})}},function(){})},[b])}g.useP2PPaymentTransactionInformationVerify=a}),98);
__d("commitWorkplaceChatBotSubmitFeedbackMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6107272026057140"}),null);
__d("commitWorkplaceChatBotSubmitFeedbackMutation.graphql",["commitWorkplaceChatBotSubmitFeedbackMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:"results",args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"WorkplaceChatBotSubmitFeedbackResponsePayload",kind:"LinkedField",name:"workplace_chat_bot_submit_feedback",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"commitWorkplaceChatBotSubmitFeedbackMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"commitWorkplaceChatBotSubmitFeedbackMutation",selections:c},params:{id:b("commitWorkplaceChatBotSubmitFeedbackMutation_facebookRelayOperation"),metadata:{},name:"commitWorkplaceChatBotSubmitFeedbackMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("commitWorkplaceChatBotSubmitFeedbackMutation",["CometRelay","Promise","commitWorkplaceChatBotSubmitFeedbackMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h!==void 0?h:h=b("commitWorkplaceChatBotSubmitFeedbackMutation.graphql");function a(a){var c=a.action_content_blob,e=a.config;return new(i||(i=b("Promise")))(function(a,b){d("CometRelay").commitMutation(e.environment,{mutation:j,onCompleted:function(b){a((b=b.results)==null?void 0:b.success)},onError:function(a){b(a)},variables:{input:{action_content_blob:c}}})})}g["default"]=a}),98);
__d("useMWChatShowPIIForm",["CometRelay","JSResourceForInteraction","MWChatPIIFormNuxQuery","MWChatPIIFormScreenQuery","MWChatPIIFormStateQuery","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback,j=c("JSResourceForInteraction")("MWChatPIIFormDialog.react").__setRef("useMWChatShowPIIForm");function a(){var a=c("useMWXLazyDialog")(j),b=a[0],e=d("CometRelay").useRelayEnvironment();return i(function(a){var c=a.color,f=a.currentIndex,g=a.firstScreen,h=a.formId,i=a.numScreens,j=a.pageId;d("MWChatPIIFormStateQuery").fetch(h,e,function(a){d("MWChatPIIFormNuxQuery").fetch(e,h,j,function(k){if(i>1){d("MWChatPIIFormScreenQuery").fetch(h,j,1,e,function(d){return b({color:c,ctaType:null,currentIndex:f,firstScreen:g,formId:h,numScreens:i,nuxData:k,pageId:j,secondScreen:(d=d)!=null?d:void 0,state:a})});return}else return b({color:c,ctaType:null,currentIndex:f,firstScreen:g,formId:h,numScreens:i,nuxData:k,pageId:j,secondScreen:void 0,state:a})})})},[e,b])}g["default"]=a}),98);
__d("useMWLSMarketplaceXmaCtaHandler",["LSFactory","LSOptimisticProcessMarketplaceCallFunctionCTAStoredProcedure","MWThreadKey.react","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))(),b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();return j(function(d,e,f,g){c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticProcessMarketplaceCallFunctionCTAStoredProcedure")(c("LSFactory")(a),{actionType:g,attachmentFbid:e,messageId:d,targetId:f,threadKey:b})},"readwrite"))},[a,b])}g["default"]=a}),98);
__d("useMWLSOpenStaticLocationDialog.react",["I64","JSResourceForInteraction","MWThreadKey.react","Promise","ReQL","ReQLSuspense","promiseDone","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).useCallback;function a(){var a=(i||(i=c("useReStore")))(),e=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),g=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatStaticLocationDialog.react").__setRef("useMWLSOpenStaticLocationDialog.react")),k=g[0];return l(function(g){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("attachments")).getKeyRange(e,g).map(function(b){b=b.defaultCtaId;b=b!=null?b:(j||(j=d("I64"))).zero;b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.table("attachment_ctas")).getKeyRange(b),f.id+":40");if(b!=null)return b.nativeUrl})).then(function(a){a=(a=a)!=null?a:"";a=a.split(",");var c=a[0];a=a[1];k({latitude:c,longitude:a},function(){});return(h||(h=b("Promise"))).resolve()}))},[a,e,k])}g["default"]=a}),98);
__d("P2MAttachBankSlipDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5342426462467736"}),null);
__d("P2MAttachBankSlipDialogQuery$Parameters",["P2MAttachBankSlipDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("P2MAttachBankSlipDialogQuery_facebookRelayOperation"),metadata:{},name:"P2MAttachBankSlipDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("P2MAttachBankSlipDialog.entrypoint",["JSResourceForInteraction","P2MAttachBankSlipDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.orderID;return{queries:{P2MAttachBankSlipDialogQueryReference:{parameters:b("P2MAttachBankSlipDialogQuery$Parameters"),variables:{orderID:a}}}}},root:c("JSResourceForInteraction")("P2MAttachBankSlipDialog.react").__setRef("P2MAttachBankSlipDialog.entrypoint")};g["default"]=a}),98);
__d("useMWUIAttachBankSlipDialog",["P2MAttachBankSlipDialog.entrypoint","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("useMWXEntryPointDialog")(c("P2MAttachBankSlipDialog.entrypoint"),{orderID:a})}g["default"]=a}),98);
__d("useMWLSShowAttachBankSlip",["react","useMWUIAttachBankSlipDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useMemo,k=b.useState;function a(){var a=k(null),b=a[0],d=a[1];a=k(!1);var e=a[0],f=a[1];a=c("useMWUIAttachBankSlipDialog")(b);var g=a[0];i(function(){b!=null&&e&&g({orderID:b},function(){return f(!1)})},[b,e,g]);return j(function(){return function(a){f(function(){return!0});return d(function(){return a})}},[f,d])}g["default"]=a}),98);
__d("useMWUICheckoutDialog",["FBP2MCheckoutDialog.entrypoint","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return c("useMWXEntryPointDialog")(c("FBP2MCheckoutDialog.entrypoint"),{orderID:a,pageID:b})}g["default"]=a}),98);
__d("useMWLSShowCheckout",["react","useMWUICheckoutDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useMemo,k=b.useState;function a(){var a=k(null),b=a[0],d=a[1];a=k("");var e=a[0],f=a[1];a=k(!1);var g=a[0],h=a[1];a=c("useMWUICheckoutDialog")(b);var l=a[0];i(function(){b!=null&&g&&l({orderID:b,pageID:e},function(){return h(!1)})},[b,e,g,l]);return j(function(){return function(a,b){h(function(){return!0});d(function(){return a});return f(function(){return b})}},[h,d])}g["default"]=a}),98);
__d("useMWUIECPCheckoutDialog",["FBP2MECPCheckoutDialog.entrypoint","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return c("useMWXEntryPointDialog")(c("FBP2MECPCheckoutDialog.entrypoint"),{orderID:a,pageID:b})}g["default"]=a}),98);
__d("useMWLSShowECPCheckout",["react","useMWUIECPCheckoutDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useMemo,k=b.useState;function a(){var a=k(""),b=a[0],d=a[1];a=k("");var e=a[0],f=a[1];a=k(!1);var g=a[0],h=a[1];a=c("useMWUIECPCheckoutDialog")(b,e);var l=a[0];i(function(){if(b!=null&&g){l({orderID:b,pageID:e},function(){return h(!1)});return}},[b,e,g,l]);return j(function(){return function(a,b){h(function(){return!0}),d(function(){var b;return(b=a)!=null?b:""}),f(function(){return b})}},[h,d])}g["default"]=a}),98);
__d("useMWLSShowMemberRequest",["GroupsCometAdminActivityLogItemSeeDetailsDialog.entrypoint","GroupsCometAdmodChatsReviewDialog.entrypoint","WebPixelRatio","react","useCometDynamicEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useCometDynamicEntryPointDialog")(c("GroupsCometAdminActivityLogItemSeeDetailsDialog.entrypoint")),b=c("useCometDynamicEntryPointDialog")(c("GroupsCometAdmodChatsReviewDialog.entrypoint"));return i(function(c,e,f,g){if(c==null)return;g!=null&&g!=="0"?a({routeProps:{adminActivityID:g,groupID:e,isManagementActivityLogTargetProfilePlus:!1}},{activityLogTarget:"Group",groupID:e}):b({groupID:e,profileID:f,scale:d("WebPixelRatio").get()},{})},[a,b])}g["default"]=a}),98);
__d("P2MOffsiteBankTransferDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5004730099638134"}),null);
__d("P2MOffsiteBankTransferDialogQuery$Parameters",["P2MOffsiteBankTransferDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("P2MOffsiteBankTransferDialogQuery_facebookRelayOperation"),metadata:{},name:"P2MOffsiteBankTransferDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("P2MOffsiteBankTransferDialog.entrypoint",["JSResourceForInteraction","P2MOffsiteBankTransferDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.orderID;return{queries:{P2MOffsiteBankTransferDialogQueryReference:{parameters:b("P2MOffsiteBankTransferDialogQuery$Parameters"),variables:{input:{invoice_id:a}}}}}},root:c("JSResourceForInteraction")("P2MOffsiteBankTransferDialog.react").__setRef("P2MOffsiteBankTransferDialog.entrypoint")};g["default"]=a}),98);
__d("useMWUIOffsiteBankTransferDialog",["P2MOffsiteBankTransferDialog.entrypoint","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("useMWXEntryPointDialog")(c("P2MOffsiteBankTransferDialog.entrypoint"),{orderID:a})}g["default"]=a}),98);
__d("useMWLSShowOffsiteBankTransfer",["react","useMWUIOffsiteBankTransferDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useMemo,k=b.useState;function a(){var a=k(null),b=a[0],d=a[1];a=k(!1);var e=a[0],f=a[1];a=c("useMWUIOffsiteBankTransferDialog")(b);var g=a[0];i(function(){b!=null&&e&&g({orderID:b},function(){return f(!1)})},[b,e,g]);return j(function(){return function(a){f(function(){return!0});return d(function(){return a})}},[f,d])}g["default"]=a}),98);
__d("P2MInvoicerAndConsumerSwitcherQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6822387771217384"}),null);
__d("P2MInvoicerAndConsumerSwitcherQuery$Parameters",["P2MInvoicerAndConsumerSwitcherQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("P2MInvoicerAndConsumerSwitcherQuery_facebookRelayOperation"),metadata:{},name:"P2MInvoicerAndConsumerSwitcherQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("P2MOrderDetailDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7672015816155720"}),null);
__d("P2MOrderDetailDialogQuery$Parameters",["P2MOrderDetailDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("P2MOrderDetailDialogQuery_facebookRelayOperation"),metadata:{live:{polling_interval:1e4}},name:"P2MOrderDetailDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("P2MOrderDetailDialog.entrypoint",["JSResourceForInteraction","P2MInvoicerAndConsumerSwitcherQuery$Parameters","P2MOrderDetailDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.orderID;return{queries:{P2MInvoicerAndConsumerSwitcherQueryReference:{parameters:b("P2MInvoicerAndConsumerSwitcherQuery$Parameters"),variables:{orderID:a}},P2MOrderDetailDialogQueryReference:{parameters:b("P2MOrderDetailDialogQuery$Parameters"),variables:{orderID:a}}}}},root:c("JSResourceForInteraction")("P2MOrderDetailDialogContainer.react").__setRef("P2MOrderDetailDialog.entrypoint")};g["default"]=a}),98);
__d("useMWUIOrderDetailsDialog",["P2MOrderDetailDialog.entrypoint","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("useMWXEntryPointDialog")(c("P2MOrderDetailDialog.entrypoint"),{orderID:a},void 0,void 0,{baseModalProps:{disableGeoToCometModalsCompatibility_DO_NOT_USE:!0}})}g["default"]=a}),98);
__d("useMWLSShowOrderDetails",["react","useMWUIOrderDetailsDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useMemo,k=b.useState;function a(){var a=k(null),b=a[0],d=a[1];a=k(!1);var e=a[0],f=a[1];a=c("useMWUIOrderDetailsDialog")(b);var g=a[0];i(function(){b!=null&&e&&g({orderID:b},function(){return f(!1)})},[b,e,g]);return j(function(){return function(a){f(function(){return!0});return d(function(){return a})}},[f,d])}g["default"]=a}),98);
__d("useMWUIPaymentDetailsDialog",["FBPayHubTransactionDetailDialog.entrypoint","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("useMWXEntryPointDialog")(c("FBPayHubTransactionDetailDialog.entrypoint"),{transactionID:a})}g["default"]=a}),98);
__d("useMWLSShowPaymentDetails",["fbt","LSIntEnum","MWLSDatabaseLazySync","promiseDone","react","useMWUIPaymentDetailsDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;b=i||d("react");var k=b.useEffect,l=b.useMemo,m=b.useState;function a(){var a=m(null),b=a[0],e=a[1];a=m(!1);var f=a[0],g=a[1];a=c("useMWUIPaymentDetailsDialog")(b);var i=a[0],n=d("MWLSDatabaseLazySync").useSync((j||(j=d("LSIntEnum"))).ofNumber(15));k(function(){b!=null&&f&&i({title:h._("__JHASH__NIyxBo8HYXZ__JHASH__"),transactionID:b},function(){return g(!1)})},[b,f,i]);return l(function(){return function(a){c("promiseDone")(n());g(function(){return!0});return e(function(){return a})}},[g,e,n])}g["default"]=a}),98);
__d("useMWUIPendingPostDialog",["GroupsCometAdminActivityLogItemSeeDetailsDialog.entrypoint","GroupsCometAdmodChatsPendingPostReviewDialog.entrypoint","WebPixelRatio","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f,g){a=c("useMWXEntryPointDialog")(c("GroupsCometAdminActivityLogItemSeeDetailsDialog.entrypoint"),{routeProps:{adminActivityID:g,groupID:b,isManagementActivityLogTargetProfilePlus:!1}});e=c("useMWXEntryPointDialog")(c("GroupsCometAdmodChatsPendingPostReviewDialog.entrypoint"),{authorID:e,groupID:b,postID:f,scale:d("WebPixelRatio").get()});return g!=null&&g!=="0"?a:e}g["default"]=a}),98);
__d("useMWLSShowPendingPost",["react","useMWUIPendingPostDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useMemo,k=b.useState;function a(){var a=k(null),b=a[0],d=a[1];a=k("");var e=a[0],f=a[1];a=k("");var g=a[0],h=a[1];a=k("");var l=a[0],m=a[1];a=k("");var n=a[0],o=a[1];a=k(!1);var p=a[0],q=a[1];a=c("useMWUIPendingPostDialog")(b,e,g,l,n);var r=a[0];i(function(){b!=null&&p&&r({activityLogTarget:"Group",groupID:e},function(){return q(!1)})},[b,p]);return j(function(){return function(a,b,c,e,g){q(!0);d(a);f(b);h(c);m(e);return o(g)}},[q,d])}g["default"]=a}),98);
__d("useMWP2PPaymentRequestCancelDialog",["JSResourceForInteraction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatComposerP2PPaymentRequestCancelDialog.react").__setRef("useMWP2PPaymentRequestCancelDialog")),b=a[0];return i(function(a){a!=null&&b({id:a})},[b])}g["default"]=a}),98);
__d("useMWP2PPaymentTransactionDeclineDialog",["JSResourceForInteraction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatComposerP2PPaymentTransactionDeclineDialog.react").__setRef("useMWP2PPaymentTransactionDeclineDialog")),b=a[0];return i(function(a){a!=null&&b({id:a})},[b])}g["default"]=a}),98);
__d("useMakeRoomRingbackCommon",["cr:401"],(function(a,b,c,d,e,f,g){"use strict";function a(){return b("cr:401")()}g["default"]=a}),98);
__d("useP2PPaymentMethodAddDialog",["JSResourceForInteraction","emptyFunction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatComposerP2PPaymentMethodAddDialog.react").__setRef("useP2PPaymentMethodAddDialog")),b=a[0];return i(function(a){a!=null&&b({id:a},c("emptyFunction"))},[b])}g["default"]=a}),98);
__d("useP2PPaymentRequestConfirmDialog",["JSResourceForInteraction","emptyFunction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatComposerP2PPaymentRequestConfirmDialog.react").__setRef("useP2PPaymentRequestConfirmDialog")),b=a[0];return i(function(a){a!=null&&b({id:a},c("emptyFunction"))},[b])}g["default"]=a}),98);
__d("useP2PPaymentRequestDeclineDialog",["JSResourceForInteraction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatComposerP2PPaymentRequestDeclineDialog.react").__setRef("useP2PPaymentRequestDeclineDialog")),b=a[0];return i(function(a){a!=null&&b({id:a})},[b])}g["default"]=a}),98);
__d("useServicesConfirmAppointmentBookingMutation",["RelayHooks","ServicesApproveAppointmentMutation.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=d("RelayHooks").useMutation(c("ServicesApproveAppointmentMutation.graphql")),b=a[0];a[1];return i(function(a){b({variables:{input:{referrer_ui_component:"BUBBLE",referrer_ui_surface:"MESSAGE",request_id:a}}})},[b])}g["default"]=a}),98);
__d("MWChatXmaThirdPartyActionHandler",["fbt","CometMarketplaceCreateDiscountedPriceDialog.entrypoint","CometRelay","CtmMultiPhotoCarouselMsgrMultiPhotoCarouselClickFalcoEvent","CustomerInformationTemplateFalcoEvent","JSResourceForInteraction","LSFactory","LSMarkAsXStoredProcedure","MWBuyerShippingAddressRootQuery","MWChatCustomerFeedbackFormDataQuery","MWChatCustomerFeedbackStateQuery","MWChatPIIFormScreenQuery","MWChatPIIFormStateQuery","MWChatReceiptDataQuery","MWP2PPaymentTransactionInformationVerify","MarketplaceCometReviewOffersDialog.entrypoint","Popup","asyncToGeneratorRuntime","cometPushToast","commitWorkplaceChatBotSubmitFeedbackMutation","cr:11076","emptyFunction","gkx","promiseDone","react","requireDeferred","useAsyncReStore","useCometDynamicEntryPointDialog","useMWChatShowPIIForm","useMWLSMarketplaceXmaCtaHandler","useMWLSOpenStaticLocationDialog.react","useMWLSShowAttachBankSlip","useMWLSShowCheckout","useMWLSShowECPCheckout","useMWLSShowMemberRequest","useMWLSShowOffsiteBankTransfer","useMWLSShowOrderDetails","useMWLSShowPaymentDetails","useMWLSShowPendingPost","useMWP2PPaymentRequestCancelDialog","useMWP2PPaymentTransactionDeclineDialog","useMWXLazyDialog","useMakeRoomRingbackCommon","useP2PPaymentMethodAddDialog","useP2PPaymentRequestConfirmDialog","useP2PPaymentRequestDeclineDialog","useServicesConfirmAppointmentBookingMutation"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||d("react")).useCallback,k=c("requireDeferred")("ZenonUserActionLoggerCommon").__setRef("MWChatXmaThirdPartyActionHandler");function l(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatReceiptModal.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0];return j(function(a){var c=a.messageId;a=a.receiptId;if(a!=null){d("MWChatReceiptDataQuery").fetch(a,c,function(a){var c=h._("__JHASH__PDJB6VYGeXn__JHASH__");return b({receipt:a,title:c})});return}},[b])}function m(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("PaymentsCometInfomationBottomSheetDialog.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0];return j(function(a){b({contentType:a.contentType.content_type,orderID:a.orderID,pageID:a.pageID},c("emptyFunction"))},[b])}function n(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("PaymentsCometOffsitePaymentOnboaringDialog.react").__setRef("MWChatXmaThirdPartyActionHandler"),void 0,{baseModalProps:{disableGeoToCometModalsCompatibility_DO_NOT_USE:!0}}),b=a[0];return j(function(a){b({orderID:a.orderID},c("emptyFunction"))},[b])}function o(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("PaymentsCometBankSlipDetailsPanelDialog.react").__setRef("MWChatXmaThirdPartyActionHandler"),void 0,{baseModalProps:{disableGeoToCometModalsCompatibility_DO_NOT_USE:!0}}),b=a[0];return j(function(a){b({orderID:a.orderID},c("emptyFunction"))},[b])}function p(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWBuyerShippingAddressRoot.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0],e=d("CometRelay").useRelayEnvironment();return j(function(a){c("CustomerInformationTemplateFalcoEvent").log(function(){return{consumer_id:a.actorId,event_type:"mw_xma_click",form_id:a.eeMessageId,page_id:a.pageId}});var f=d("CometRelay").loadQuery(e,c("MWBuyerShippingAddressRootQuery"),{id:a.pageId});b({actorId:a.actorId,eeMessageId:a.eeMessageId,initialQueryRef:f,messageId:a.messageId,pageId:a.pageId},function(){f.dispose()})},[e,b])}function q(){var a=d("CometRelay").useRelayEnvironment();return j(function(b){var e={environment:a};b=c("commitWorkplaceChatBotSubmitFeedbackMutation")({action_content_blob:b.feedbackActionContentBlob,config:e});e=b.then(function(){d("cometPushToast").cometPushSimpleToast("Feedback submitted!",2e3)},function(){d("cometPushToast").cometPushSimpleToast("Error in submitting feedback!",2e3)});c("promiseDone")(e)},[a])}var r=c("JSResourceForInteraction")("MWChatCustomerFeedbackDialog.react").__setRef("MWChatXmaThirdPartyActionHandler");function s(){var a=c("useMWXLazyDialog")(r),b=a[0],e=d("CometRelay").useRelayEnvironment();return j(function(a){var c=a.feedbackFormId;d("MWChatCustomerFeedbackStateQuery").fetch(c,e,function(a){a!=null&&d("MWChatCustomerFeedbackFormDataQuery").fetch(c,e,function(c){c!=null&&b({firstScreen:c.firstScreen,formId:c.formId,pageId:c.pageId,privacy:c.privacy,state:a})})})},[e,b])}function t(){var a=c("useMWXLazyDialog")(r),b=a[0],e=d("CometRelay").useRelayEnvironment();return j(function(a){var c=a.firstScreen,f=a.formId,g=a.pageId,h=a.privacy;d("MWChatCustomerFeedbackStateQuery").fetch(f,e,function(a){return b({firstScreen:c,formId:f,pageId:g,privacy:h,state:a})})},[e,b])}function u(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatPIIFormDialog.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0],e=d("CometRelay").useRelayEnvironment();return j(function(a){var c=a.ctaType,f=a.nuxData;a=a.piiForm;var g=a.color,h=a.currentIndex,i=a.firstScreen,j=a.formId,k=a.numScreens,l=a.pageId;d("MWChatPIIFormStateQuery").fetch(j,e,function(a){if(k>1){d("MWChatPIIFormScreenQuery").fetch(j,l,1,e,function(d){return b({color:g,ctaType:c,currentIndex:h,firstScreen:i,formId:j,numScreens:k,nuxData:f,pageId:l,secondScreen:d,state:a})});return}else return b({color:g,ctaType:c,currentIndex:h,firstScreen:i,formId:j,numScreens:k,nuxData:f,pageId:l,secondScreen:void 0,state:a})})},[e,b])}function v(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWInboxUrlWebviewDialog.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0];return j(function(){var a=h._("__JHASH__HFLlRGYwWh7__JHASH__").toString();b({htmlBlob:a})},[b])}function w(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MessengerCometBookingDetailsModal.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0];return j(function(a){return b({pageID:a.pageId,requestID:a.requestId})},[b])}function x(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatLiveLocationDialog.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0];return j(function(a){return b({})},[b])}function y(){var a=c("useMWLSOpenStaticLocationDialog.react")();return j(function(b){return a(b.msgId)},[a])}function z(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatBusinessBoardingPassDetail.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0];return j(function(a){return b({boardingPassDetail:a})},[b])}function A(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatBusinessItineraryDetail.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0];return j(function(a){return b({itineraryPayload:a})},[b])}function B(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatBusinessMessengerExtension.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0];return j(function(a){return b({actionLink:a.actionLink,pageID:a.pageID,threadID:a.pageID,userID:a.userID},c("emptyFunction"))},[b])}function C(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatRichWidgetExtension.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0];return j(function(a){return b({actionLink:a.actionLink,pageID:a.pageID},c("emptyFunction"))},[b])}function D(a){return j(function(b){k.onReady(function(a){return a.logClick({component:"start_call_button",surface:"admin_message"})});return a(b.hasVideo,b.threadId,b.trigger)},[a])}function E(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatGuestChatHistoryModal.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0];return j(function(a){return b({guestID:a.guestId,pageID:a.pageId})},[b])}function F(){return j(function(a){if(b("cr:11076")!=null)return b("cr:11076").$$process(a.ctaId,a.messageId)},[])}function G(a){d("Popup").open(a,1024,500)}function H(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("CometJoinRoomFromPortalDialog.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0];return j(function(a){return b({linkUrl:a.linkUrl})},[b])}function I(){var a=c("useAsyncReStore")();return j(function(d,e,f){c("promiseDone")(a.then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield c("LSMarkAsXStoredProcedure")(c("LSFactory")(a),{ctaId:d,ctaType:e,orderId:f})});return function(b){return a.apply(this,arguments)}}(),"readwrite")});return function(b){return a.apply(this,arguments)}}()))},[a])}function J(){var a=c("useCometDynamicEntryPointDialog")(c("MarketplaceCometReviewOffersDialog.entrypoint"));return j(function(b){return a({listingId:b},{})},[a])}function K(){var a=c("useCometDynamicEntryPointDialog")(c("CometMarketplaceCreateDiscountedPriceDialog.entrypoint"));return j(function(b){return a({threadId:b},{})},[a])}function L(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWInformationalDialog.react").__setRef("MWChatXmaThirdPartyActionHandler")),b=a[0];return j(function(){return b({body:h._("__JHASH__jTsNVv7n_rW__JHASH__"),title:h._("__JHASH__g-wowo_Mm7M__JHASH__")})},[b])}function a(a,b){var e=l(),f=n(),g=o(),h=t(),i=s(),j=F(),k=u(),r=x(),M=y(),N=w(),O=z(),P=E(),Q=A(),R=B(),S=C(),T=c("useMWP2PPaymentRequestCancelDialog")(),U=c("useP2PPaymentRequestConfirmDialog")(),V=c("useP2PPaymentRequestDeclineDialog")(),W=c("useMWP2PPaymentTransactionDeclineDialog")(),X=c("useP2PPaymentMethodAddDialog")(),Y=d("MWP2PPaymentTransactionInformationVerify").useP2PPaymentTransactionInformationVerify(),Z=D(b),$=c("useMakeRoomRingbackCommon")(),aa=H(),ba=m(),ca=q(),da=c("useMWLSShowMemberRequest")(),ea=c("useMWLSShowPendingPost")(),fa=c("useMWLSShowCheckout")(),ga=c("useMWLSShowECPCheckout")(),ha=c("useMWLSShowPaymentDetails")(),ia=c("useMWLSShowOrderDetails")(),ja=I(),ka=c("useMWLSShowAttachBankSlip")(),la=c("useMWLSShowOffsiteBankTransfer")(),ma=p(),na=c("useMWLSMarketplaceXmaCtaHandler")(),oa=J(),pa=K(),qa=c("useMWChatShowPIIForm")(),ra=v(),sa=L(),ta=c("useServicesConfirmAppointmentBookingMutation")();return function(b){if(b.NAME==="P2PPaymentTransactionInformationVerify")return Y(b.VAL);if(b.NAME==="P2PPaymentTransactionDecline")return W(b.VAL.id);if(b.NAME==="MakeWorkJoinableCallInvite"||b.NAME==="MakeRoomRingback")return $(b.VAL);if(b.NAME==="P2MCheckout"){var d=b.VAL;return c("gkx")("4214")?ga(d.orderID,d.pageID):fa(d.orderID,d.pageID)}if(b.NAME==="ShowCustomerFeedback")return h(b.VAL);if(b.NAME==="P2MInformationalMessageBottomSheet"){d=(d=b.VAL.contentType)==null?void 0:d.content_type;if(d==="payment_detection_merchant_slip_validation")return f(b.VAL);else if(d==="payment_detection_merchant_bank_account_verified_details")return g(b.VAL);return ba(b.VAL)}if(b.NAME==="WorkplaceChatBotSubmitFeedback")return ca(b.VAL);if(b.NAME==="P2PPaymentRequestCancel")return T(b.VAL.id);if(b.NAME==="SendImagePostback"){d=b.VAL;var l=d.loggingDetails;l!=null&&c("CtmMultiPhotoCarouselMsgrMultiPhotoCarouselClickFalcoEvent").log(function(){return{consumer_id:l.consumer_id,event_data:{ad_id:l.ad_id,cta:"button",index:String(l.index)},event_location:"unknown",page_id:l.page_id}});return a(d.message,d.platformToken,d.image)}if(b.NAME==="ShowMessengerExtensions")return R(b.VAL);if(b.NAME==="OpenAccountLink")return j(b.VAL);if(b.NAME==="ShowPIIForm")return qa(b.VAL);if(b.NAME==="P2MOffsiteBankTransferCTA")return la(b.VAL.orderID);if(b.NAME==="P2PPaymentTransactionReceiveMoney")return X(b.VAL.id);if(b.NAME==="ShowBoardingPass")return O(b.VAL);if(b.NAME==="P2MOrderDetails")return ia(b.VAL.orderID);if(b.NAME==="P2MMarkAsPaid"||b.NAME==="P2MMarkAsShipped")return ja(b.VAL.ctaId,b.VAL.ctaType,b.VAL.orderID);if(b.NAME==="ShowStaticLocationDetails")return M(b.VAL);if(b.NAME==="P2PPaymentTransactionDetails")return ha(b.VAL.id);if(b.NAME==="P2PPaymentRequestDecline")return V(b.VAL.id);if(b.NAME==="ShowBookingDetails")return N(b.VAL);if(b.NAME==="ShowOrderConfirmation")return e(b.VAL);if(b.NAME==="ShowCustomerFeedbackForm")return i(b.VAL);if(b.NAME==="ShowMessengerRichWidgetExtension")return S(b.VAL);if(b.NAME==="ShowItinerary")return Q(b.VAL);if(b.NAME==="OpenAccountLinkUrl")return G(b.VAL);if(b.NAME==="MakeJoinRoomFromPortal")return aa(b.VAL);if(b.NAME==="P2MAttachBankSlip")return ka(b.VAL.orderID);if(b.NAME==="BuyerShippingAddress")return ma(b.VAL);if(b.NAME==="AdmodChatsShowPendingPost"){d=b.VAL;return ea(d.targetId,d.groupId,d.authorId,d.postId,d.activityLogItemId)}if(b.NAME==="P2PPaymentRequestConfirm")return U(b.VAL.id);if(b.NAME==="MakeRtcCall")return Z(b.VAL);if(b.NAME==="ProcessMarketplaceCallFunction"){d=b.VAL;var m=d.actionType,n=d.attachmentFbid,o=d.messageId;d=d.targetId;return na(o,n,d,m)}if(b.NAME==="ShowPIIFormForFormBuilder")return k(b.VAL);if(b.NAME==="ShowLiveLocationDetails")return r(b.VAL);if(b.NAME==="AdmodChatsShowMemberRequest"){o=b.VAL;return da(o.targetId,o.groupId,o.profileId,o.activityLogItemId)}if(b.NAME==="ShowGuestChatHistory")return P(b.VAL);if(b.NAME==="ShowInThreadFormDetails")return ra();if(b.NAME==="ShowPhoneVerificationDialog")return sa();if(b.NAME==="ConfirmAppointmentBooking")return ta(b.VAL.requestID);if(b.NAME==="OpenMarketplaceDialog"){n=b.VAL;d=n.ctaType;m=n.listingId;o=n.threadId;switch(d){case"SHIPPED_DECLINED_OFFER_SEND_ANOTHER_PRICE":case"SHIPPED_EXPIRED_OFFER_SEND_ANOTHER_PRICE":if(o!=null)return pa(o);else return;case"SHIPPED_OFFER_CANCEL":if(m!=null)return oa(m);else return;default:return}}}}e=a;g.useHandler=e}),98);
__d("MWClickedMessageContext.react",["GroupsCometChatsEngagementLogger","I64","LSFactory","LSFetchMessageSeenCountStoredProcedure","emptyFunction","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;e=b.createContext;var l=b.useCallback,m=b.useContext,n=b.useMemo,o=b.useState,p=e({clickedMessageId:null,fetchMessageSeenCount:c("emptyFunction"),hasError:!1,isLoading:!1,setClickedMessageId:c("emptyFunction")});function a(a){a=a.children;var b=o(null),e=b[0],f=b[1];b=o(!1);var g=b[0],j=b[1];b=o(!1);var m=b[0],q=b[1],r=(h||(h=c("useReStore")))(),s=l(function(a,b,e){q(!0),f(b),r.runInTransaction(function(d){return c("LSFetchMessageSeenCountStoredProcedure")(c("LSFactory")(d),{messageId:b,threadKey:a})},"readwrite").then(function(){q(!1),j(!1),d("GroupsCometChatsEngagementLogger").log({action:"impression",client_extras:{mid:b},community_id:e?(i||(i=d("I64"))).to_string(e.folderId):null,event:"seen_count_rendered",group_id:e?(i||(i=d("I64"))).to_string(e.fbGroupId):null,source:"message_bubble",surface:"thread_view",thread_id:(i||(i=d("I64"))).to_string(a)})})["catch"](function(){q(!1),j(!0)})},[r]);b=n(function(){return{clickedMessageId:e,fetchMessageSeenCount:s,hasError:g,isLoading:m,setClickedMessageId:f}},[e,s,g,m]);return k.jsx(p.Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";b={Provider:a,useHook:function(){return m(p)}};g["default"]=b}),98);
__d("MWMessageDisplayContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k=i.createContext();function a(a){var b=a.children;a=a.value;a=a===void 0?"standard":a;return i.jsx(k.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(k)}g.MWMessageDisplayContextProvider=a;g.useMWMessageDisplayContext=b}),98);
__d("MWMessageEditContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;var j=c.useContext,k=c.useMemo,l=c.useState,m={setShowEdits:function(){},showEdits:!1},n=i.createContext();function a(a){var b=a.children;a=a.value;a=a===void 0?m:a;a=l((a=a==null?void 0:a.showEdits)!=null?a:!1);var c=a[0],d=a[1];a=k(function(){return{setShowEdits:d,showEdits:c}},[c]);return i.jsx(n.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(n)}g.MWMessageEditContextProvider=a;g.useMWMessageEditContext=b}),98);
__d("MWMessageListMediaPressableContainer.react",["I64","LSIntEnum","LSMediaUrlAttachment","MWPThreadCapabilitiesContext","MWXPressable.react","MessagingAttachmentType","cr:4509","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var e=a.allowClickEventPropagation,f=a.ariaLabel,g=a.attachment,h=a.children,l=a.disabled,m=a.linkProps_,n=a.onHoverIn,o=a.onPress,p=a.overlayDisabled;p=p===void 0?!1:p;var q=a.testid;q=a.xstyle;a=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();a=a.blurMediaEnabled;a=c("gkx")("24098")&&a;var r=(i||(i=d("I64"))).equal(g.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)),s=i.equal(g.attachmentType,j.ofNumber(c("MessagingAttachmentType").VIDEO)),t=r?"Image":s?"Video":"Media";return b("cr:4509")!=null&&(r||s)&&a?k.jsx(b("cr:4509"),{ariaLabel:f,disabled:l,linkProps:m,mediaType:t,onPress:o,overlayDisabled:p,testid:void 0,type:s?"video":"image",url:d("LSMediaUrlAttachment").previewUrl(g),xstyle:q,children:h}):k.jsx(c("MWXPressable.react"),{allowClickEventPropagation:e,"aria-label":f,disabled:l,linkProps:m,onHoverIn:n,onPress:function(){return o()},overlayDisabled:p,testid:void 0,xstyle:q,children:h})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPStableImage.react",["CometObjectFitContainer.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useMemo,l={constraint:{maxWidth:"x193iq5w",$$css:!0},image:{display:"x1lliihq",height:"xt7dq6l",maxWidth:"x193iq5w",width:"x14atkfc",$$css:!0},imageFill:{height:"x5yr21d",width:"xh8yej3",$$css:!0}};function m(a){var b=a.alt,d=a.aspectRatio,e=a.maxHeight,f=a.onError,g=a.onLoad;a=a.src;var i=k(function(){return{display:"block",maxHeight:e.toString()+"px",maxWidth:"100%"}},[e]);b=j.jsx("img",{alt:b,className:(h||(h=c("stylex")))(l.image,d==null?!1:l.imageFill),onError:f,onLoad:g,src:a,style:i});if(d!=null)return j.jsx(c("CometObjectFitContainer.react"),{contentAspectRatio:d,objectFitMode:"CONTAINER_WIDTH_BASED_ASPECT_RATIO",children:b});else return b}function n(a){var b=a.aspectRatio,c=a.children,d=a.className,e=a.height,f=a.maxHeight,g=a.maxWidth;a.width;c=(a=c)!=null?a:null;a=k(function(){if(b!=null&&e!=null)return{maxWidth:"100%",width:(b*Math.min(f,e)).toString()+"px"}},[b,e,f]);var h=k(function(){if(g!=null)return{maxWidth:g.toString()+"px"}},[g]);return j.jsx("div",{className:"x193iq5w",children:j.jsx("div",{style:h,children:j.jsx("div",{className:d,style:a,children:c})})})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.alt,c=a.children,d=a.className,e=a.height,f=a.maxHeight,g=a.maxWidth,h=a.onError,i=a.onLoad,k=a.src;a=a.width;var l=a!=null&&e!=null?a/e:void 0;return j.jsxs(n,{aspectRatio:l,className:d,height:e,maxHeight:f,maxWidth:g,width:a,children:[j.jsx(m,{alt:b,aspectRatio:l,maxHeight:f,onError:h,onLoad:i,src:k}),c]})}a.displayName=a.name+" [from "+f.id+"]";g.MWPStableImageContainer=n;g.MWPStableImage=a}),98);
__d("MWV2AttachmentProgressBar.react",["MWV2ComposerMediaProgressBar.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var b=a.attachment.offlineAttachmentId,e=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return b!=null?d("ReQL").fromTableAscending(e.tables.media_staging).getKeyRange(b):d("ReQL").empty()},[b],f.id+":24");return a!=null&&a.isSent?j.jsx(c("MWV2ComposerMediaProgressBar.react"),{height:5,mediaStaging:a}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWMessageListAttachmentDimensions",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a,b){return i(function(){var c=b.previewWidthLarge,d=b.previewHeightLarge;return c!=null&&d!=null&&a==="Inbox"?[c,d]:[b.previewWidth,b.previewHeight]},[a,b])}g["default"]=a}),98);
__d("useMWV2FocusRowAfterClosingPushView",["MWV2MessageRowIsRowFocusedContext.react","react","useCometRouterState","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useLayoutEffect;function a(){var a=i(d("MWV2MessageRowIsRowFocusedContext.react").context),b=a.isDialogOpened,e=a.setIsDialogOpened,f=a.setFocused;a=c("useCometRouterState")();var g;if(a==null)g=0;else{a=a.pushViewStack;g=a==null?0:a.length}var h=c("usePrevious")(g);j(function(){if(h!=null){b===!0&&h>0&&g===0&&(e(function(){return!1}),f(function(){return!0}));return}},[b,h,g]);return e}g["default"]=a}),98);
__d("MWV2MediaViewerFallback.react",["fbt","MWV2MediaViewerContainer.react","MWXCircleButton.react","MWXIconCross","MWXRow.react","MWXRowItem.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.onClose;a=a.shouldShowMessengerLogo;return j.jsx(c("MWV2MediaViewerContainer.react"),{actions:j.jsx(c("MWXRow.react"),{paddingTop:0,spacing:8,children:j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXCircleButton.react"),{color:"white",icon:c("MWXIconCross"),label:h._("__JHASH__tnRfHlva-bL__JHASH__"),onPress:b,size:36,type:"dark-overlay"})})}),shouldShowMessengerLogo:a,children:null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWV2MediaViewerShowDialog",["JSResourceForInteraction","MWV2MediaViewerFallback.react","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function k(a){return i.jsx(c("MWV2MediaViewerFallback.react"),{onClose:a})}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWV2MediaViewer.react").__setRef("useMWV2MediaViewerShowDialog"),k),d=b[0],e=b[1];j(function(){a||e()},[e,a]);return[d,e]}g["default"]=a}),98);
__d("XCometMessengerMediaControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/messenger_media/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("XCometMessengerPhotoControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/messenger_photo/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("useMWV2MediaViewerURL",["I64","Int64Hooks","LSIntEnum","MessagingAttachmentType","XCometMessengerMediaControllerRouteBuilder","XCometMessengerPhotoControllerRouteBuilder","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return d("Int64Hooks").useMemoInt64(function(){var b=(h||(h=d("I64"))).equal(a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE));return b&&c("justknobx")._("1284")===!1?c("XCometMessengerPhotoControllerRouteBuilder").buildURL({fbid:a.attachmentFbid,message_id:a.messageId,photo_ids:void 0}):c("XCometMessengerMediaControllerRouteBuilder").buildURL({attachment_id:a.attachmentFbid,message_id:a.messageId,thread_id:h.to_string(a.threadKey)})},[a.threadKey,a.attachmentType,a.messageId,a.attachmentFbid])}g["default"]=a}),98);
__d("MWV2ChatImage.react",["fbt","I64","LSAuthorityLevel","LSIntEnum","MWChatImageInsetShadow.react","MWInboxInfoSharedContentQPLLogger","MWLSThreadDisplayContext","MWMessageListMediaPressableContainer.react","MWPStableImage.react","MWV2AttachmentProgressBar.react","MWV2LogMessageClick","gkx","qex","react","stylex","useMWMessageListAttachmentDimensions","useMWV2FocusRowAfterClosingPushView","useMWV2MediaViewerShowDialog","useMWV2MediaViewerURL","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=m||(m=d("react")),o=m.useCallback,p={appAttr:{alignItems:"x6s0dn4",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",display:"x78zum5",lineHeight:"x1rfph6h",paddingTop:"x1iorvi4",paddingEnd:"xsyo7zv",paddingBottom:"xjkvuk6",paddingStart:"x16hj40l",$$css:!0},appIcon:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"xlup9mm",marginEnd:"x1w0mnb",marginLeft:null,marginRight:null,objectFit:"x19kjcj4",width:"x1kky2od",$$css:!0},appText:{color:"xzsf02u",fontSize:"x1nxh6w3",wordBreak:"x13faqbe",$$css:!0},container:{display:"x78zum5",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},content:{display:"x78zum5",flexDirection:"xdt5ytf",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",position:"x1n2onr6",$$css:!0},incomingConnectBottom:{borderBottomStartRadius:"x10y3i5r",$$css:!0},incomingConnectTop:{borderTopStartRadius:"x1lcm9me",$$css:!0},outgoingConnectBottom:{borderBottomEndRadius:"xrt01vj",$$css:!0},outgoingConnectTop:{borderTopEndRadius:"x1yr5g0i",$$css:!0},standalone:{borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",borderTopEndRadius:"x1g8br2z",borderTopStartRadius:"x1tlxs6b",$$css:!0},withAppAttribution:{borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",borderTopEndRadius:"x1g8br2z",borderTopStartRadius:"x1tlxs6b",$$css:!0}};function q(a){a=a.attachment;var b=a.attributionAppName;if(b==null)return null;a=a.attributionAppIcon;return n.jsxs("div",{className:"x6s0dn4 x1gn5b1j x230xth x78zum5 x1rfph6h x1iorvi4 xsyo7zv xjkvuk6 x16hj40l",children:[a!=null?n.jsx("img",{className:"x14yjl9h xudhj91 x18nykt9 xww2gxu xlup9mm x1w0mnb x19kjcj4 x1kky2od",role:"presentation",src:a}):null,n.jsx("span",{className:"xzsf02u x1nxh6w3 x13faqbe",children:b})]})}q.displayName=q.name+" [from "+f.id+"]";function a(a){var b,e=a.attachment,f=a.connectBottom,g=a.connectTop;a.getPlayableUrl;var m=a.getPreviewUrl,r=a.mediaRenderQpl,s=a.message,t=a.navigateToRouteForMediaViewer,u=a.outgoing;a=a.renderUnsupportedAttachment;var v=o(function(){r==null?void 0:r.endFail("load-image-error")},[r]),w=o(function(){r==null?void 0:r.endSuccess()},[r]),x=(i||(i=c("useReStore")))(),y=(b=t)!=null?b:!0;b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();var z=e.attributionAppName!=null,A=c("useMWMessageListAttachmentDimensions")(b,e),B=A[0];A=A[1];var C=c("useMWV2MediaViewerURL")(e);g=g?u?p.outgoingConnectTop:p.incomingConnectTop:!1;f=f===!0?u?p.outgoingConnectBottom:p.incomingConnectBottom:!1;u=c("gkx")("23009");var D=c("useMWV2FocusRowAfterClosingPushView")();t=c("useMWV2MediaViewerShowDialog")((t=t)!=null?t:!0);var E=t[0],F=t[1];t=m(e,"MWV2ChatImage");if(t==null||t.length===0)return a!=null?a(e):null;m=y&&(k||(k=d("I64"))).gt(s.authorityLevel,(l||(l=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL))?{passthroughProps:{origSrc:t},url:C}:void 0;a=function(){d("MWV2LogMessageClick").log(x,s,28);d("MWInboxInfoSharedContentQPLLogger").logOpenSharedContentFromThread("media");D(function(){return!0});if(!y)return E({attachment:e},function(){})};C=(C=b==="Inbox"?c("qex")._("23"):void 0)!=null?C:200;b=(b=b==="Inbox"?c("qex")._("33"):void 0)!=null?b:480;return n.jsxs(c("MWMessageListMediaPressableContainer.react"),{attachment:e,disabled:(k||(k=d("I64"))).le(s.authorityLevel,(l||(l=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL)),linkProps_:m,onHoverIn:function(){if(!y)return F()},onPress:a,testid:void 0,xstyle:[p.container,p.standalone,g,f],children:[n.jsx(d("MWPStableImage.react").MWPStableImage,{alt:e.titleText!=null&&u?e.titleText:h._("__JHASH__mrw3CpFXi7r__JHASH__"),className:(j||(j=c("stylex")))(p.content,z?p.withAppAttribution:p.standalone,g,f),height:A!=null?(k||(k=d("I64"))).to_float(A):void 0,maxHeight:C,maxWidth:b,onError:v,onLoad:w,src:t,width:B!=null?(k||(k=d("I64"))).to_float(B):void 0,children:n.jsx(q,{attachment:e})}),(k||(k=d("I64"))).le(s.authorityLevel,(l||(l=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL))?n.jsx(c("MWV2AttachmentProgressBar.react"),{attachment:e}):null,n.jsx(c("MWChatImageInsetShadow.react"),{xstyle:[g,f]})]},e.attachmentFbid)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWResponsiveVideo.react",["CometObjectFitContainer.react","CometPlaceholder.react","MWLSThreadDisplayContext","MWPThreadCapabilitiesContext","MWXGlimmer.react","deferredLoadComponent","gkx","justknobx","react","requireDeferredForDisplay","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useMemo,l=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWChatVideoPlayer.react").__setRef("MWResponsiveVideo.react")),m={container:{maxWidth:"x193iq5w",minHeight:"x11md1zd",minWidth:"x450l9j",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},fill:{bottom:"x1ey2m1c",end:"xds687c",left:null,right:null,position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",zIndex:"x1vjfegm",$$css:!0},glimmer:{height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},glimmerFallback:{borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",borderTopEndRadius:"x1g8br2z",borderTopStartRadius:"x1tlxs6b",display:"x78zum5",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",width:"xh8yej3",$$css:!0}};function n(a){return[a==="Inbox"?240:180,140]}function a(a){var b=a.connectTopStyles,e=a.fbid,f=a.height,g=a.maxHeight,i=a.maxWidth,o=a.mediaRenderQpl,p=a.shouldForcePauseOnClick,q=a.src,r=a.width,s=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),t=k(function(){var a=r!=null?f!=null?[r,f]:[500,300]:[500,300];return a[0]/a[1]},[r,f]);a=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();a=a.hasLSThreadBitOffset;var u=c("gkx")("24098")&&a(46);a=k(function(){var a=n(s);if(c("justknobx")._("1704")===!0){var b;b=Math.min((b=r)!=null?b:500,i,g*t).toString()+"px"}else{var d;b=Math.min((d=r)!=null?d:500,i).toString()+"px"}return{maxHeight:g.toString()+"px",minHeight:u?a[1].toString(10)+"px":"",minWidth:u?a[0].toString(10)+"px":"",width:b}},[g,r,i,u,s,t]);return j.jsxs("div",{className:"x193iq5w x11md1zd x450l9j x6ikm8r x10wlt62 x1n2onr6",style:a,children:[j.jsx("div",{className:"x1ey2m1c xds687c x10l6tqk x17qophe x13vifvy x1vjfegm",children:j.jsx(c("CometPlaceholder.react"),{fallback:j.jsx("div",{className:(h||(h=c("stylex")))(m.glimmerFallback,b),children:j.jsx(c("MWXGlimmer.react"),{index:0,xstyle:m.glimmer})}),children:j.jsx(l,{autoPlaySetting:u?"off":void 0,controls:"mwchat",fbid:e,hideExpandButton:!0,mediaRenderQpl:o,originalHeight:(a=f)!=null?a:300,originalWidth:(b=r)!=null?b:500,sdSrc:q,shouldForcePauseOnClick:p})})}),j.jsx(c("CometObjectFitContainer.react"),{contentAspectRatio:t,objectFitMode:"CONTAINER_WIDTH_BASED_ASPECT_RATIO",children:null})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatVideo.react",["fbt","I64","LSAuthorityLevel","LSIntEnum","MWChatImageInsetShadow.react","MWLSThreadDisplayContext","MWMessageListMediaPressableContainer.react","MWResponsiveVideo.react","MWV2AttachmentProgressBar.react","MWV2LogMessageClick","MWVideoPlayerControllerContext.react","react","recoverableViolation","useCometRouterDispatcher","useMWV2FocusRowAfterClosingPushView","useMWV2MediaViewerShowDialog","useMWV2MediaViewerURL","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));b=l;var n=b.useContext,o=b.useMemo,p=b.useRef,q={incoming_connect_top:{borderTopStartRadius:"x1lcm9me",$$css:!0},outgoing_connect_top:{borderTopEndRadius:"x1yr5g0i",$$css:!0},root:{backfaceVisibility:"xlp1x4z",backgroundColor:"x1eb86dx",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",borderTopEndRadius:"x1g8br2z",borderTopStartRadius:"x1tlxs6b",display:"x1lliihq",maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0}};function r(a){var b=a.attachment,e=a.connectTop,f=a.getPreviewUrl,g=a.mediaRenderQpl,l=a.message,o=a.navigateToRouteForMediaViewer,p=o===void 0?!0:o;o=a.outgoing;var r=(i||(i=c("useReStore")))(),s=c("useCometRouterDispatcher")(),t=c("useMWV2MediaViewerURL")(b);a=e?o?q.outgoing_connect_top:q.incoming_connect_top:!1;var u=c("useMWV2FocusRowAfterClosingPushView")();e=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();o=c("useMWV2MediaViewerShowDialog")(p);var v=o[0],w=o[1],x=n(c("MWVideoPlayerControllerContext.react")),y=f(b,"MWV2ChatVideoInner");if(y==null||y==="")return null;o=b.previewHeight;f=b.previewWidth;return m.jsxs(c("MWMessageListMediaPressableContainer.react"),{ariaLabel:h._("__JHASH__Sk-r4mWi0bD__JHASH__"),attachment:b,disabled:(j||(j=d("I64"))).le(l.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL)),onHoverIn:function(){if(!p)return w()},onPress:function(){d("MWV2LogMessageClick").log(r,l,27);u(function(){return!0});if(!p)return v({attachment:b},function(){});var a=x.ref.current;if(a){var e=a.getCurrentState();e=e.volume;var f=a.getPlayheadPosition();s==null?void 0:s.go(t,{passthroughProps:{origSrc:y,startTimestamp:f,volumeSetting:e}});a.setMuted(!0,"product_initiated")}else c("recoverableViolation")("Missing controller","messenger_web_product",void 0,{trackOnly:!0})},overlayDisabled:!0,testid:void 0,xstyle:[q.root,a],children:[m.jsx(c("MWResponsiveVideo.react"),{connectTopStyles:a,fbid:b.attachmentFbid,height:o!=null?(j||(j=d("I64"))).to_float(o):void 0,maxHeight:200,maxWidth:e==="Inbox"?500:167,mediaRenderQpl:g,shouldForcePauseOnClick:!0,src:y,width:f!=null?(j||(j=d("I64"))).to_float(f):void 0}),(j||(j=d("I64"))).le(l.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL))?m.jsx(c("MWV2AttachmentProgressBar.react"),{attachment:b}):null,m.jsx(c("MWChatImageInsetShadow.react"),{xstyle:a})]})}r.displayName=r.name+" [from "+f.id+"]";function a(a){var b=p(null),d=o(function(){return{ref:b}},[b]);return m.jsx(c("MWVideoPlayerControllerContext.react").Provider,{value:d,children:m.jsx(r,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2Sticker.react",["I64","MWChatImageSize","MWLSThreadDisplayContext","Sticker.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i.useMemo;function m(a){var b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();return l(function(){var c=b!=null?b==="Inbox"?.75:.5:.5;if(a<60)return 1;else return c},[a,b])}function a(a){var b,e=a.attachment,f=a.getPreviewUrl,g=a.scale;a=a.xstyle;f=f(e,"MWV2Sticker");var i=e.previewHeight!=null?(j||(j=d("I64"))).to_int32(e.previewHeight):void 0,l=e.previewWidth!=null?(j||(j=d("I64"))).to_int32(e.previewWidth):void 0;b=m((b=i)!=null?b:120);var n=l!=null&&i!=null;n=d("MWChatImageSize").useImageSize(f,n);l=l!=null&&i!=null?[l,i]:n!=null?[n.width,n.height]:[24,24];i=l[0];n=l[1];return k.jsx(c("Sticker.react"),{accessibilityLabel:(l=e.accessibilitySummaryText)!=null?l:"",animationTrigger:"load_and_hover",className:(h||(h=c("stylex")))(a),customColor:"var(--chat-composer-button-color)",enablePopoverIfPassesGK:!0,frameCount:0,frameRate:void 0,framesPerCol:0,framesPerRow:0,packID:void 0,paddedSpriteURI:void 0,scale:(l=g)!=null?l:b,sourceHeight:n,sourceURI:f,sourceWidth:i,spriteURI:void 0,stickerID:e.attachmentFbid,tabIndex:-1,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2TombstonedMessage.react",["MWXText.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={connectBottom:{borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",$$css:!0},connectTop:{borderTopEndRadius:"x13lgxp2",borderTopStartRadius:"x168nmei",$$css:!0},message:{fontStyle:"x1k4tb9n",marginBottom:"x12nagc",marginTop:"x1gslohp",$$css:!0},root:{borderTopColor:"x2z21go",borderEndColor:"x7glw7h",borderBottomColor:"xytfwv8",borderStartColor:"x1c7a9eh",borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",color:"x1tbs7aw",maxWidth:"x193iq5w",paddingTop:"x1y1aw1k",paddingEnd:"xn6708d",paddingBottom:"xwib8y2",paddingStart:"x1ye3gou",wordBreak:"x13faqbe",$$css:!0}};function a(a){var b=a.children,e=a.connectBottom;e=e===void 0?!1:e;var f=a.connectTop;f=f===void 0?!1:f;a=a.xstyle;a=a===void 0?!1:a;return i.jsx(d("react-strict-dom").html.div,{style:[j.root,f?j.connectTop:!1,e?j.connectBottom:!1,a],children:i.jsx(c("MWXText.react"),{color:"disabled",type:"body3",children:i.jsx(d("react-strict-dom").html.div,{style:j.message,children:b})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageListAttachment.react",["fbt","LSMediaUrlAttachment","MWAudioPlayer.react","MWLSThreadDisplayContext","MWV2ChatImage.react","MWV2ChatVideo.react","MWV2Sticker.react","MWV2TombstonedMessage.react","react","recoverableViolation","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useCallback;function a(a){var b=a.connectBottom,d=a.connectTop;a=a.xstyle;return k.jsx("div",{className:(i||(i=c("stylex")))(a),children:k.jsx(c("MWV2TombstonedMessage.react"),{connectBottom:b,connectTop:d,children:h._("__JHASH__962PS6SI-P2__JHASH__")})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.attachment,e=a.connectTop,f=a.message,g=a.navigateToRouteForMediaViewer;a=a.outgoing;var h=l(function(a){return d("LSMediaUrlAttachment").playableUrl(a)},[]);return k.jsx(c("MWV2ChatVideo.react"),{attachment:b,connectTop:e,getPreviewUrl:h,mediaRenderQpl:null,message:f,navigateToRouteForMediaViewer:g,outgoing:a})}b.displayName=b.name+" [from "+f.id+"]";function e(a){var b=a.attachment,c=a.isReply;a=a.outgoing;var e=l(function(a){return d("LSMediaUrlAttachment").playableUrl(a)},[]);return k.jsx(d("MWAudioPlayer.react").MWAudioPlayer,{attachment:b,getPlayableUrl:e,isReply:c,outgoing:a})}e.displayName=e.name+" [from "+f.id+"]";function m(a){var b=a.attachment,e=a.connectBottom,f=a.connectTop,g=a.message,h=a.navigateToRouteForMediaViewer,i=a.outgoing;a=a.renderUnsupportedAttachment;var j=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),m=l(function(a){var b=a.previewUrlLarge;return b!=null&&j==="Inbox"?b:d("LSMediaUrlAttachment").previewUrl(a)},[j]),n=function(a){return d("LSMediaUrlAttachment").playableUrl(a)};return k.jsx(c("MWV2ChatImage.react"),{attachment:b,connectBottom:e,connectTop:f,getPlayableUrl:n,getPreviewUrl:m,mediaRenderQpl:null,message:g,navigateToRouteForMediaViewer:h,outgoing:i,renderUnsupportedAttachment:a})}m.displayName=m.name+" [from "+f.id+"]";function n(a){a=a.attachment;var b=l(function(a){var b;b=(b=d("LSMediaUrlAttachment").playableUrl(a))!=null?b:d("LSMediaUrlAttachment").previewUrl(a);if(b!=null)return b;c("recoverableViolation")("Sticker Attachment has no preview_url or playable_url: "+a.attachmentFbid,"messenger_privacy_web")},[]);return k.jsx(c("MWV2Sticker.react"),{attachment:a,getPreviewUrl:b})}n.displayName=n.name+" [from "+f.id+"]";g.MWMessageListAttachmentError=a;g.MWMessageListAttachmentVideo=b;g.MWMessageListAttachmentAudio=e;g.MWMessageListAttachmentImage=m;g.MWMessageListAttachmentSticker=n}),98);
__d("MWPMessageIsReply",["LSIntEnum","LSMessageReplySourceTypeV2"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a.replySourceTypeV2!=null&&(h||(h=d("LSIntEnum"))).toNumber(a.replySourceTypeV2)!==c("LSMessageReplySourceTypeV2").FORWARD}g["default"]=a}),98);
__d("MWPMessageHasXMA",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return[(h||(h=d("I64"))).and_((i||(i=d("LSIntEnum"))).ofNumber(1024),a.displayedContentTypes),h.and_(i.ofNumber(2048),a.displayedContentTypes)].some(function(a){return(h||(h=d("I64"))).to_int32(a)!==0})}g["default"]=a}),98);
__d("MWPMessageWithAttachmentHasPoll",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return(h||(h=d("I64"))).to_int32(h.and_((i||(i=d("LSIntEnum"))).ofNumber(32),a.displayedContentTypes))!==0}g["default"]=a}),98);
__d("MWPMessageListAttachmentContainer.react",["MWPMessageHasXMA","MWPMessageIsReply","MWPMessageListColumn.react","MWPMessageWithAttachmentHasPoll","react","react-strict-dom","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={container:{maxWidth:"x193iq5w",position:"x1n2onr6",zIndex:"x1vjfegm",$$css:!0},container_for_poll:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"xdt5ytf",width:"xh8yej3",$$css:!0},container_for_xma:{width:"xh8yej3",$$css:!0},vr:{backgroundColor:"x1eb86dx",height:"x36qwtl",width:"xh8yej3",$$css:!0}};function a(a){var b=a.children,e=a.connectTop,f=a.message;a.outgoing;var g=a.paint;g=g===void 0?!0:g;var h=a.renderEmphasisRing;a=a.xmaLayout;var k=c("MWPMessageHasXMA")(f),l=c("MWPMessageIsReply")(f),m=c("MWPMessageWithAttachmentHasPoll")(f);f=f.text;f=f!=null?f!=="":!1;m=i.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[j.container,k?j.container_for_xma:!1,m?j.container_for_poll:!1],children:b});return i.jsxs(i.Fragment,{children:[e&&(a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT||!k||!f)?i.jsx(d("react-strict-dom").html.div,{style:j.vr}):null,i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{paint:!l&&g,children:h!=null?h(k,m):m})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPGetAttachmentCTA",["I64","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=(i||(i=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){var c;return d("ReQL").fromTableAscending(b.table("attachment_ctas")).getKeyRange((c=a)!=null?c:(h||(h=d("I64"))).zero)},[b,a],f.id+":23")}g["default"]=a}),98);
__d("useMWPGetAttachments",["I64","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=(i||(i=c("useReStore")))(),e=a.messageId,g=a.threadKey;return d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.table("attachments")).getKeyRange(g,e)},[b,e,g],f.id+":24").sort(function(a,b){return(h||(h=d("I64"))).compare(a.attachmentIndex,b.attachmentIndex)})}g["default"]=a}),98);
__d("MWPMessageListAttachment.react",["EntMessageReplyType","I64","LSIntEnum","MWPMessageListAttachmentContainer.react","MWPThreadCapabilitiesContext","MWVerticalRhythm","MessagingAttachmentType","gkx","react","useMWPGetAttachmentCTA","useMWPGetAttachments","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function l(a){return(i||(i=d("I64"))).equal(a.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))}function a(a){var b=a.connectBottom,e=a.connectTop,f=a.message,g=a.renderAudioAttachment,h=a.renderEmphasisRing,m=a.renderEphemeralMediaAttachment,n=a.renderFileAttachment,o=a.renderImageAttachment,p=a.renderImageGrid,q=a.renderStickerAttachment,r=a.renderUnsupportedAttachment,s=a.renderUnsupportedMultipleAttachments,t=a.renderVideoAttachment,u=a.renderWrapper,v=a.renderXMAAttachment;a=a.xmaLayout;var w=a===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:a,x=c("useMWPGetAttachments")(f);a=c("useMWPGetAttachmentCTA")(x.length>0?x[0].attachmentCta1Id:null);var y=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();y=y.blurMediaEnabled;y=c("gkx")("24098")&&y;if(f.replyType!=null&&(i||(i=d("I64"))).equal(f.replyType,(j||(j=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").BUMP)))return null;if(x.length!==1)x.length>1&&x.every(l)?y?y=x.map(function(a,b){return k.jsxs(k.Fragment,{children:[b!==0?k.jsx(c("MWVerticalRhythm"),{height:2}):null,k.jsx(c("MWPMessageListAttachmentContainer.react"),{connectTop:e,message:f,renderEmphasisRing:h,xmaLayout:w,children:o(a,b!==0,b!==x.length-1,r)})]},a.attachmentFbid)}):y=k.jsx(c("MWPMessageListAttachmentContainer.react"),{connectTop:e,message:f,renderEmphasisRing:h,xmaLayout:w,children:p(x)}):y=s!=null?s(x):void 0;else{p=x[0];s=p.attachmentType;s=!(i||(i=d("I64"))).equal(s,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO));var z=p.attachmentType;y=k.jsx(c("MWPMessageListAttachmentContainer.react"),{connectTop:e,message:f,paint:s,renderEmphasisRing:h,xmaLayout:w,children:(i||(i=d("I64"))).equal(z,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(i||(i=d("I64"))).equal(z,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))?o(p,e,b,r):(i||(i=d("I64"))).equal(z,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))?t(p):(i||(i=d("I64"))).equal(z,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))?g(p):(i||(i=d("I64"))).equal(z,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER))?q(p):(i||(i=d("I64"))).equal(z,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))?v(p,a):(i||(i=d("I64"))).equal(z,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE))?n(p):(i||(i=d("I64"))).equal(z,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(i||(i=d("I64"))).equal(z,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))?m(p):r(p)})}return y!=null?u!=null?u(y):y:null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWFIlePressableDirectDownload.react",["MWXPressable.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.children,d=a.onPress,e=a.url;a=a.xstyle;return i.jsx(c("MWXPressable.react"),{children:b,display:"inline",linkProps:e!=null?{download:!0,target:"_blank",url:e}:void 0,onPress:d,overlayDisabled:!0,xstyle:a})}a.displayName=a.name+" [from "+f.id+"]";g.MWFilePressableDirectDownload=a}),98);
__d("MWFilePressable.react",["CometErrorBoundary.react","ConstUriUtils","FBLogger","MWFIlePressableDirectDownload.react","MWFileViewerLogger","goUriOnNewWindow","react","useMWFileOnPress"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.attachmentID,c=a.children,e=a.entryPoint,f=a.messageID,g=a.onPress,h=a.url;a=a.xstyle;return f!=null&&f.type==="sent"&&b!=null&&h!=null?i.jsx(j,{attachmentID:b,children:c,entryPoint:e,onPress:g,sentMessage:f.value,url:h,xstyle:a}):i.jsx(d("MWFIlePressableDirectDownload.react").MWFilePressableDirectDownload,{children:c,onPress:g,url:h,xstyle:a})}a.displayName=a.name+" [from "+f.id+"]";function j(a){var b=a.attachmentID,e=a.children,f=a.entryPoint,g=a.onPress,h=a.sentMessage,j=a.url;a=a.xstyle;var k=d("MWFileViewerLogger").generateSessionId();h=c("useMWFileOnPress")(h,b,g,f,k);return i.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},onError:function(a){a=a?a.message:"Cannot open file viewer";c("FBLogger")("rpp_file_viewer","cannot_load_entry_point").mustfix(a);a=d("ConstUriUtils").getUri(j);a!=null&&c("goUriOnNewWindow")(a)},children:i.jsx(d("MWFIlePressableDirectDownload.react").MWFilePressableDirectDownload,{children:e,onPress:h,url:j,xstyle:a})})}j.displayName=j.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatAttachmentParserUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.startsWith("blob:");if(!b)return;b=a.length;return a.substring(5,b)}f.getBlobUrl=a}),66);
__d("MWV2ChatFileV2.react",["fbt","ConstUriUtils","I64","LSMediaUrlAttachment","MDSTextPairing.react","MWChatFilePreview.react","MWChatMessageId","MWFilePressable.react","MWInboxInfoSharedContentQPLLogger","MWV2ChatAttachmentParserUtils","formatFileSize","react","recoverableViolation","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react")),m=j.useMemo,n={content:{color:"xzsf02u",flexGrow:"x1iyjqo2",fontWeight:"x1s688f",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",wordBreak:"x13faqbe",$$css:!0},fileSize:{paddingTop:"x889kno",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",userSelect:"x87ps6o",$$css:!0}};function a(a){var b=a.attachment,e=a.getPlayableUrlSecure;a=m(function(){var a=b.filename;if(a!=null)return a;else return h._("__JHASH__uiTAWyhPCWI__JHASH__")},[b]);var f=m(function(){var a=b.filesize!=null?(k||(k=d("I64"))).to_int32(b.filesize):void 0;if(a!=null)return c("formatFileSize")(a);else return null},[b]),g=m(function(){if(e!=null){var a;a=(a=e(b))!=null?a:"";return d("ConstUriUtils").getUri(a)}else{a=d("LSMediaUrlAttachment").playableUrl(b);if(a!=null){var f=d("MWV2ChatAttachmentParserUtils").getBlobUrl(a);if(f!=null)return d("ConstUriUtils").getUri(f);else return d("ConstUriUtils").getUri(a)}}c("recoverableViolation")("Attachment has no playable_url "+b.attachmentFbid,"messenger_comet")},[b,e]);return l.jsx(c("MWFilePressable.react"),{attachmentID:b.attachmentFbid,entryPoint:"chat_file_v4",messageID:d("MWChatMessageId").makeSent((k||(k=d("I64"))).to_string(b.threadKey),b.messageId,k.to_string(b.timestampMs)),onPress:function(){return d("MWInboxInfoSharedContentQPLLogger").logOpenSharedContentFromThread("files")},url:g==null?void 0:g.toString(),children:l.jsxs("div",{className:(i||(i=c("stylex")))(n.root,!1),"data-testid":void 0,children:[l.jsx(c("MWChatFilePreview.react"),{attachment:b,withPreview:!1}),l.jsxs("div",{className:"xzsf02u x1iyjqo2 x1s688f xz9dl7a xn6708d xsag5q8 x1ye3gou x13faqbe",children:[l.jsx(c("MDSTextPairing.react"),{headline:a,headlineLineLimit:3,level:4}),l.jsx("div",{className:"x889kno",children:l.jsx(c("MDSTextPairing.react"),{body:f,bodyColor:"secondary",bodyLineLimit:1,level:4,testid:void 0})})]})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatImagesGrid.react",["fbt","CometImageCover.react","CometPhotoGrid.react","LSMediaUrlAttachment","MWLSThreadDisplayContext","MWXPressable.react","react","stylex","useMWV2MediaViewerURL"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useMemo,m={large:{width:"x7cdydq",$$css:!0},pressable:{borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",display:"x1lliihq",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xh8yej3",$$css:!0},root:{maxWidth:"x193iq5w",$$css:!0},small:{width:"x1so1ns2",$$css:!0}};function n(a){var b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();return l(function(){var c=a.previewUrlLarge;if(c!=null&&b==="Inbox")return c;else return d("LSMediaUrlAttachment").previewUrl(a)},[a,b])}function o(a){a=a.attachment;var b=n(a);a=c("useMWV2MediaViewerURL")(a);if(b==null)return null;var d=h._("__JHASH__mrw3CpFXi7r__JHASH__");return k.jsx(c("MWXPressable.react"),{"aria-label":d,linkProps:{passthroughProps:{origSrc:b},url:a},overlayRadius:"compact",xstyle:function(){return[m.pressable]},children:k.jsx(c("CometImageCover.react"),{alt:d,src:b})})}o.displayName=o.name+" [from "+f.id+"]";function a(a){a=a.attachments;var b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();return k.jsx("div",{className:(i||(i=c("stylex")))(m.root,b==="Inbox"?m.large:m.small),"data-testid":void 0,children:k.jsx(c("CometPhotoGrid.react"),{children:a.map(function(a){return k.jsx(o,{attachment:a},a.attachmentFbid)})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2UnsupportedAttachment.react",["fbt","MDSCautionTriangleSvgIcon.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.attachment;a=a.descriptionText;return j.jsxs("div",{className:"x6s0dn4 x78zum5 xjkvuk6 x1iorvi4 x87ps6o",children:[j.jsx("div",{className:"x6s0dn4 xgx9qek x14yjl9h xudhj91 x18nykt9 xww2gxu x78zum5 xl56j7k xmo9yow x1iorvi4 x150jy0e xjkvuk6 x1e558r4",children:j.jsx(c("MDSCautionTriangleSvgIcon.react"),{color:"primary",size:24})}),j.jsxs("div",{className:"xzsf02u x1iyjqo2 x1s688f x13faqbe",children:[j.jsx(c("MWXText.react"),{type:"headline4",children:h._("__JHASH__Uhh5LwoNOuv__JHASH__")}),a!=null?j.jsx("div",{className:"x889kno",children:j.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:a})}):null]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPBaseXMAAttachmentItem.react",["BaseImage.react","I64","LSIntEnum","LSMediaUrlAttachment","LSMediaUrlAttachmentItem","MNLSXMALayoutType","MWPThreadCapabilitiesContext","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react")),l=h,m=l.createContext,n=l.createElement,o=l.useContext,p=new Set(["xma_rtc_video","xma_rtc_missed_video","xma_rtc_missed_group_video","xma_rtc_ended_video","xma_rtc_new_video_default","xma_rtc_new_video_from_fb_share","xma_rtc_new_video_from_fb_video_share","xma_rtc_new_video_from_cowatch_share","xma_rtc_cowatch_start_video"]),q=new Set(["xma_rtc_audio","xma_rtc_missed_audio","xma_rtc_missed_group_audio","xma_rtc_ended_audio","xma_rtc_new_audio_default","xma_rtc_new_audio_from_fb_share","xma_rtc_new_audio_from_fb_video_share","xma_rtc_new_audio_from_cowatch_share"]),r=m({hasAtLeastOneCta:!1,isDisabledRtcXma:!1,renderPressable:function(a){return null}});function a(a){var b=a.attachment,c=a.attachmentItem,e=a.children;a=a.renderPressable;var f=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();f=f.hasLSThreadBitOffset;var g=f(25);f=f(24);b=b.defaultCtaType;c=c.attachmentCta1Id!=null;g=b!=null?q.has(b)&&!g||p.has(b)&&!f:!1;b={hasAtLeastOneCta:c,isDisabledRtcXma:g,renderPressable:a};return n(r.Provider,{children:!c&&!g?a(e):e,value:b})}function b(a){a=a.children;var b=o(r);if(b.hasAtLeastOneCta&&!b.isDisabledRtcXma)return b.renderPressable(a);else return a}var s={container:{display:"x78zum5",position:"x1n2onr6",width:"xh8yej3",$$css:!0},image:{flexGrow:"x1iyjqo2",height:"xt7dq6l",maxWidth:"x193iq5w",objectFit:"xl1xv1r",$$css:!0}};function e(a){var b=a.attachmentItem;a=a.url;var e=b.previewHeight;b=b.previewWidth;return k.jsx(d("react-strict-dom").html.div,{style:s.container,children:k.jsx(c("BaseImage.react"),{height:e!=null?(i||(i=d("I64"))).to_int32(e):void 0,src:a,width:b!=null?(i||(i=d("I64"))).to_int32(b):void 0,xstyle:s.image})})}e.displayName=e.name+" [from "+f.id+"]";function t(a){var b,c=a.attachment,e=a.attachmentItem,f=a.getPreviewUrl;a=a.preferLargePreview;a=a===void 0?!1:a;var g=d("LSMediaUrlAttachmentItem").playableUrl(e),h=d("LSMediaUrlAttachment").previewUrlLarge(c);b=a?(b=d("LSMediaUrlAttachmentItem").previewUrlLarge(e))!=null?b:d("LSMediaUrlAttachmentItem").previewUrl(e):d("LSMediaUrlAttachmentItem").previewUrl(e);f=f==null?d("LSMediaUrlAttachment").previewUrl(c):f(c,e);a=a&&h!=null?h:(c=b)!=null?c:f;h=e.playableUrlMimeType;b=h!=null?h.includes("video")?"video":h.includes("image")?"image":"unsupported":"unsupported";if(b==="video"&&g!=null)return{type:"Video",url:g};if(a!=null)return{type:"Image",url:a};return b==="image"&&g!=null?{type:"Image",url:g}:{type:"Unsupported"}}function u(a,b){var e=a.xmaLayoutType!=null&&!(i||(i=d("I64"))).equal(a.xmaLayoutType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").HSCROLL)),f=b.titleText;f=f!=null||!e?f:a.titleText;b=b.subtitleText;e=b!=null||!e?b:a.subtitleText;return[f,e]}g.MWPBaseXMAAttachmentItemPressableContext=r;g.MWPBaseXMAAttachmentItemPressable=a;g.MWPBaseXMAAttachmentItemPressableNested=b;g.MWPBaseXMAAttachmentItemImage=e;g.getXMAAttachmentItemPreview=t;g.useTitleAndSubtitle=u}),98);
__d("useMWChatOpenTabByThreadKey",["I64","LSAuthorityLevel","LSContactType","LSFactory","LSIntEnum","LSVerifyThreadRowExistsStoredProcedure","MWPActor.react","Promise","ReQL","promiseDone","react","useMWBaseChatOpenTabForUser","useMWChatOpenTabForPage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;e=l||d("react");var m=e.useCallback,n=e.useMemo;function a(a,e){var f=(k||(k=c("useReStore")))(),g=c("useMWBaseChatOpenTabForUser")(void 0,e),l=g[0],o=c("useMWChatOpenTabForPage")(e),p=d("MWPActor.react").useActor(),q=n(function(){return new(h||(h=b("Promise")))(function(b,e){var g=(e=d("ReQL")).mergeJoin(e.fromTableAscending(f.tables.participants).getKeyRange(a).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,p)}),e.fromTableAscending(f.tables.contacts)),h={contents:function(){}};h.contents=g.subscribe(function(a,e){if(e.operation==="delete")return;a=e.value[1];if((i||(i=d("I64"))).ge(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))){h.contents();return b(a)}});c("promiseDone")(e.firstAsync(g),function(e){if(e!=null){e=e[1];if((i||(i=d("I64"))).ge(e.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))){h.contents();return b(e)}else return}c("promiseDone")(f.runInTransaction(function(b){return c("LSVerifyThreadRowExistsStoredProcedure")(c("LSFactory")(b),{syncGroup:(j||(j=d("LSIntEnum"))).ofNumber(1),threadKey:a,threadType:j.ofNumber(1)})},"readwrite"))})})},[a,f]);return m(function(){c("promiseDone")(q,function(b){var e=(i||(i=d("I64"))).to_string(a);b=b.contactType;if((i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE)))return o(e,!1);else return l(e,!1)})},[q,l,o,a])}g["default"]=a}),98);
__d("MWXMAAttachmentActionTriggerWithOpenChatTab.react",["I64","Int64Hooks","LSThreadAttributionStore","MWLSThread","useBlockedUserInterstitial","useCometRouterDispatcher","useMWChatOpenTabByThreadKey","useReStore","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a.children;a=a.threadKey;return b(j(a))}function j(a){var b=c("useBlockedUserInterstitial")(),e=c("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),f=c("useCometRouterDispatcher")(),g=c("useMWChatOpenTabByThreadKey")(a,"chatInThread"),j=(i||(i=c("useReStore")))();return d("Int64Hooks").useCallbackInt64(function(c,i){if(e){var k=d("MWLSThread").getThreadExn(j,a);return b(a,k,function(){var a=i.metaKey||i.ctrlKey||i.shiftKey;if(!a)return g()},"chatInThread")}else if(f!=null){k=d("MWLSThread").getThreadExn(j,a);return b(a,k,function(){d("LSThreadAttributionStore").setSource((h||(h=d("I64"))).to_string(a),"chatInThread"),f.go(c,{})},"chatInThread")}else return},[j,f,e,b,g,a])}g["default"]=a}),98);
__d("XmaEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5680");b=d("FalcoLoggerInternal").create("xma_events",a);e=b;g["default"]=e}),98);
__d("MessengerWebUXLoggerXMAEventLoggingImpl",["CometPassiveGetRouterStateContext","CometProductAttribution","I64","LSMessagingThreadTypeUtil","LsThreadType","WebUXLoggingEntryPointContextProvider","XmaEventsFalcoEvent","castToEnum","cr:1576","react","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k=j.useCallback,l=j.useContext,m=j.useInsertionEffect,n=j.useRef;function a(){var a=p("xma_redirect_to_fb");return k(function(b){a(b)},[a])}function e(a){var b=p("xma_impression");return c("useSinglePartialViewImpression")({onImpressionStart:function(){b(a)}})}function f(){var a=p("xma_click");return k(function(b){a(b)},[a])}function o(){var a=p("xma_fb_opened");return k(function(b){a(b)},[a])}function p(a){var e=l(d("WebUXLoggingEntryPointContextProvider").WebUXEntryPointLoggingContext),f=n(e);m(function(){f.current=e});var g=l(c("CometPassiveGetRouterStateContext"));return k(function(e){var h,j=e.attachment.messageId;h=c("castToEnum")((i||(i=d("I64"))).to_int32((h=e.threadType)!=null?h:(i||(i=d("I64"))).zero),c("LsThreadType"),null);var k=e.threadType?d("LSMessagingThreadTypeUtil").isSecure(e.threadType):!1,l=e.attachment.threadKey,m=i.to_string(l),n=f.current,o=r(e.attachment),p=d("CometProductAttribution").getMinifiedTopMostRouteProductAttribution(g),s={click_category:e==null?void 0:e.clickCategory,click_target_type:o,entrypoint:n,event:(e==null?void 0:e.isDirectToExternal)===!0?"xma_redirect_to_external_app":a,is_facebook_installed:null,thread_id:m,thread_type:h};if(k===!0&&b("cr:1576")!=null){var t=q(e.message);b("cr:1576").log(function(){return babelHelpers["extends"]({},s,t,{navigation_chain:p,thread_key:(i||(i=d("I64"))).to_string(l)})})}else c("XmaEventsFalcoEvent").log(function(){return babelHelpers["extends"]({},s,{attribution_id_v2:p,message_id:j})})},[a,g])}function q(a){return a==null?{}:{forward:a.isForwarded,message_sender_id:(i||(i=d("I64"))).to_string(a.senderId),message_sent_time:i.to_string(i.div(a.timestampMs,i.of_string("1000")))}}function r(a){var b=a.defaultCtaType,c=a.attachmentLoggingType;a=a.cta1Type;var d=35;b==="xma_rtc_missed_audio"?d=37:b==="xma_rtc_missed_video"?d=36:b==="xma_rtc_missed_group_audio"?d=67:b==="xma_rtc_missed_group_video"?d=66:b==="xma_rtc_audio"?d=17:b==="xma_rtc_video"?d=18:b==="xma_rtc_ended_audio"?d=57:b==="xma_rtc_ended_video"?d=56:b==="xma_rtc_new_audio_default"?d=68:b==="xma_live_location_sharing"?(d=38,a==="xma_live_location_sharing"&&(d=39)):b==="xma_shops_pdp"?d=61:b==="xma_open_native"?d=41:b==="xma_web_url"?d=35:c==="xma_open_contact_share"?d=64:b==="xma_customer_information"?d=65:c==="xma_appointment_confirmed"?d=70:b==="xma_montage_share"&&(d=82);return d}g.useXMAEventsRedirectDefaultToFBLogger=a;g.useXMAEventsImpressionLoggerRef=e;g.useXMAEventsClickLogger=f;g.useXMAEventOpenInFBLogger=o}),98);
__d("logXMACtaClicked",["I64","LsDidTapCallToActionFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.cta,e=a.loggingDetails,f=a.source;if(e==null)return;a=b.actionContentBlob;var g=a!=null?i(a):"",l=a!=null?k(a):"",m=a!=null?j(a):"",n=e[1],o=e[0];c("LsDidTapCallToActionFalcoEvent").log(function(){return{action:{cta_type_unique_id:l,id:(h||(h=d("I64"))).to_string(b.ctaId),name:"",source:f,type:n},message:{campaign_id:m,id:b.messageId,notification_token:g},page:{id:o},target:{id:o},thread:{id:o}}})}function i(a){try{a=JSON.parse(a);a=a.notification_message_token;return a!=null?a:""}catch(a){return""}}function j(a){try{a=JSON.parse(a);a=a.mbs_mm_campaign_id;return a!=null?a:""}catch(a){return""}}function k(a){try{a=JSON.parse(a);a=a.mm_cta_unique_id;return a!=null?a:""}catch(a){return""}}g.logXMACtaClicked=a}),98);
__d("MWLSImagePostbackCtaHandler",["ActorURI","I64","LSFactory","LSInsertNewMediaSendStoredProcedure","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure","LSMailboxType","LSMarkSubJobCompletedV2StoredProcedure","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSResumeMediaSendJobStoredProcedure","LSShape","LSThreadAttributionTypeUtil","LSVec","MWPActor.react","MWThreadKey.react","MercuryConfig","MercuryLocalIDs","MessagePowerUp","MessagingAttachmentType","Promise","URI","cr:6057","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n=(k||d("react")).useMemo;function o(a,e,f,g,h,i,k){var n=d("MercuryLocalIDs").generateOfflineThreadingID();return c("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(c("LSFactory")(a),{attachments:c("LSVec").ofArray([d("LSShape").ofRecord({action_url:void 0,attachment_fbid:n,attachment_index:(l||(l=d("I64"))).zero,attachment_type:(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE),cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:"postback image.jpg",filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:n,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:void 0,playable_url_mime_type:void 0,preview_height:void 0,preview_url:g,preview_url_mime_type:"image/jpeg ",preview_width:void 0,source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0})]),replySourceType:m.ofNumber(c("LSMessageReplySourceType").NONE),replySourceTypeV2:m.ofNumber(c("LSMessageReplySourceTypeV2").NONE),senderId:e,snippetHasEmoji:!1,threadKey:f,threadType:m.ofNumber(1)}).then(function(c){var e=c[0];return a.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:void 0,markThreadRead:!0,messageId:void 0,offlineThreadingId:e,platformRef:void 0,platformToken:h,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:void 0,taskId:(l||(l=d("I64"))).of_string(e),threadAttributionSource:i,threadKey:f}).then(function(){return(j||(j=b("Promise"))).resolve([e,n])})})}function a(a,e){var f=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),k=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();return n(function(){return function(h,n,p){var q=(l||(l=d("I64"))).to_string(g),r=function(a){var e=a[1],g=a[0];c("promiseDone")(window.fetch(p).then(function(a){return a.blob()}).then(function(a){return b("cr:6057").load().then(function(b){return{XComposerPhotoUploader:b,blob:a}})}).then(function(a){var h=a.XComposerPhotoUploader;a=a.blob;h=new h({concurrentLimit:3,onUploadFailure:function(a,b){return!0},onUploadProgress:function(a,b){},onUploadStart:function(a){c("promiseDone")(f.runInTransaction(function(a){return c("LSInsertNewMediaSendStoredProcedure")(c("LSFactory")(a),{attachmentType:(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE),inMessageIndex:(l||(l=d("I64"))).zero,isSecure:!1,offlineAttachmentId:e,offlineThreadingId:g,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1})},"readwrite"))},onUploadSuccess:function(a,b){a=b.response.payload.metadata[0];var h=a.image_id;if(h==null)return;c("promiseDone")(f.runInTransaction(function(a){return c("LSMarkSubJobCompletedV2StoredProcedure")(c("LSFactory")(a),{fbid:(l||(l=d("I64"))).of_string(h.toString()),offlineAttachmentId:e}).then(function(){return c("LSResumeMediaSendJobStoredProcedure")(c("LSFactory")(a),{jobId:g,pluginType:(l||(l=d("I64"))).zero})})},"readwrite"))},retryLimit:1,uploadEndpoint:d("ActorURI").create(new(i||(i=c("URI")))(c("MercuryConfig").upload_url),q)});h.getAsyncUploadRequest([new File([a],"postback image.jpg",{type:"image/jpeg"})]).send();return(j||(j=b("Promise"))).resolve()}))},s=d("LSThreadAttributionTypeUtil").getSource(k,a);c("promiseDone")(f.runInTransaction(function(a){return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,initiating_source:(a=e)!=null?a:void 0,mark_read:!0,power_up_style:(m||(m=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_type:m.ofNumber(c("LSMessageReplySourceType").NONE),reply_source_type_v2:m.ofNumber(c("LSMessageReplySourceTypeV2").NONE),snippet_has_emoji:!1,source:s}),mailboxType:m.ofNumber(c("LSMailboxType").MESSENGER),senderId:g,snippet:h,text:h,threadKey:k,threadType:m.ofNumber(1)})},"readwrite").then(function(a){return f.runInTransaction(function(a){return o(a,g,k,p,n,s,e).then(function(a){r(a)})},"readwrite")}))}},[f,g,k])}g.usePostbackCtaHandler=a}),98);
__d("MWLSPostbackCtaHandler",["Int64Hooks","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","MWPActor.react","MWThreadKey.react","MessagePowerUp","promiseDone","useLSMessagingInitiatingSource","useLSMessagingSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){var a=(i||(i=c("useReStore")))(),b=d("MWPActor.react").useActor(),e=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),f=c("useLSMessagingInitiatingSource")(),g=c("useLSMessagingSource")();return d("Int64Hooks").useCallbackInt64(function(i,j){var k=d("LSThreadAttributionTypeUtil").getSource(e,g);c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,initiating_source:(a=f)!=null?a:void 0,mark_read:!0,platform_token:i,power_up_style:(h||(h=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_type:h.ofNumber(c("LSMessageReplySourceType").NONE),reply_source_type_v2:h.ofNumber(c("LSMessageReplySourceTypeV2").NONE),snippet_has_emoji:!1,source:k}),mailboxType:h.ofNumber(c("LSMailboxType").MESSENGER),senderId:b,snippet:j,text:j,threadKey:e,threadType:h.ofNumber(1)})},"readwrite"))},[a,g,f,b,e])}g.usePostbackCtaHandler=a}),98);
__d("MWLSWebUrlCtaHandler",["JSResourceForInteraction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWInboxUrlWebviewDialog.react").__setRef("MWLSWebUrlCtaHandler")),b=a[0];return i(function(a){return b({htmlBlob:a},function(){})},[b])}g.useShowWebViewDialog=a}),98);
__d("useMWChatPollXMAActionHandler",["JSResourceForInteraction","MWThreadKey.react","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=d("MWThreadKey.react").useMWThreadKeyMemoized(),b=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatPollDetailsDialog.react").__setRef("useMWChatPollXMAActionHandler")),e=b[0];return i(function(b,c){if(a==null||b==null||c==null)return;return e({pollId:b,threadKey:a,title:c},function(){})},[e,a])}g["default"]=a}),98);
__d("useMWLinkHashXMAActionHandler",["ConstUriUtils","FBLogger","I64","LSCommunityInviteStatus","LSFactory","LSIntEnum","LSOptimisticFetchPendingGroupInviteStoredProcedure","MWCMStandaloneJoinDialog.entrypoint","MWCMStandaloneRequestToJoinDialog.entrypoint","MWInboxCommunityThreadsRouteBuilder","ReQL","ReQLSuspense","promiseDone","react","requireDeferred","useCometRouterDispatcher","useMWXEntryPointDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=k||d("react");var l=b.useCallback,m=b.useRef,n=c("requireDeferred")("C4gEngagementFalcoEvent").__setRef("useMWLinkHashXMAActionHandler"),o=["ch","cm"];function p(a){a=d("ConstUriUtils").getUri(a);if(a==null?void 0:a.isSubdomainOfDomain("m.me")){a=a==null?void 0:(a=a.getPath())==null?void 0:a.split("/").filter(function(a){return a!==""});return(a==null?void 0:a.length)===2&&o.includes(a[0])?a[1]:null}return null}function a(){var a=c("useMWXEntryPointDialog")(c("MWCMStandaloneRequestToJoinDialog.entrypoint"),{}),b=a[0];a=c("useMWXEntryPointDialog")(c("MWCMStandaloneJoinDialog.entrypoint"),{});var e=a[0],g=(h||(h=c("useReStore")))(),k=c("useCometRouterDispatcher")(),o=m();a=l(function(a,h){if(a==null)return c("FBLogger")("messenger_web_product").info("Invalid url to extract link hash");var l=p(a);if(l==null)return c("FBLogger")("messenger_web_product").info("Invalid link hash in url");c("promiseDone")(g.runInTransaction(function(a){return c("LSOptimisticFetchPendingGroupInviteStoredProcedure")(c("LSFactory")(a),{linkHash:l})},"readwrite"));o.current=d("ReQL").fromTableAscending(g.tables.group_invitations_pending).getKeyRange(l).subscribe(function(a,m){if(m.operation!=="delete"){a=m.value;var p=a.communityId,q=a.communityJoinRequestStatus,r=a.threadId;if(p==null||(i||(i=d("I64"))).equal(p,(i||(i=d("I64"))).zero))return;o.current==null?void 0:o.current();if(h==="xma_join_community"){var s=d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.community_folders).getKeyRange(p),f.id+":131");n.onReady(function(a){a.log(function(){return{action:"tap",client_extras:{has_invite:(s==null).toString(),has_pending_request:(i||(i=d("I64"))).to_string(q)},community_id:i.to_string(p),entry_point:"cm:xma",event:r==null?"request_to_join_community_initiated":"request_to_join_community_and_thread_initiated",surface:"message_thread",thread_id:r!=null?(i||(i=d("I64"))).to_string(r):void 0}})});return s!=null&&(i||(i=d("I64"))).equal(s.inviteStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSCommunityInviteStatus").INVITED))?e({folder:s}):b({linkHash:l})}m=r==null?d("MWInboxCommunityThreadsRouteBuilder").buildURLWithoutThread({folder_id:(i||(i=d("I64"))).to_string(p)}):d("MWInboxCommunityThreadsRouteBuilder").buildURL({folder_id:(i||(i=d("I64"))).to_string(p),thread_key:(i||(i=d("I64"))).to_string(r)});if(k==null)return;n.onReady(function(a){a.log(function(){return{action:"tap",community_id:(i||(i=d("I64"))).to_string(p),entry_point:"cm:xma",event:r==null?"redirect_to_community":"redirect_to_community_and_thread",surface:"message_thread",thread_id:r!=null?(i||(i=d("I64"))).to_string(r):void 0}})});return k.go(m,{})}})},[k,g,e,b]);return a}g["default"]=a}),98);
__d("MWRollcallContributionsDialogContainer.react",["CometHideLayerOnEscape.react","CometTheme.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.children,d=a.onClose;a=a.visibilityRef;return i.jsx(c("CometHideLayerOnEscape.react"),{onHide:d,children:i.jsx("div",{className:"x1qjc9v5 xal61yo x9f619 x78zum5 xdt5ytf x1iyjqo2 x5yr21d x1n2onr6 x87ps6o x1uvtmcs",ref:a,children:i.jsx(c("CometTheme.react"),{style:{display:"contents"},theme:"dark",children:b})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRollcallContributionsDialogFallback.react",["fbt","ix","MDSColumn.react","MDSColumnItem.react","MDSGlimmer.react","MDSRow.react","MDSRowItem.react","MWRollcallContributionsDialogContainer.react","MWXIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");function a(a){var b;a=a.onClose;return k.jsxs(c("MWRollcallContributionsDialogContainer.react"),{onClose:a,children:[k.jsxs(c("MDSRow.react"),{paddingHorizontal:16,paddingVertical:16,spacing:0,verticalAlign:"center",children:[k.jsx(b=c("MDSRowItem.react"),{children:k.jsx(c("MWXIcon.react"),{"aria-label":h._("__JHASH__l-5nlfLCheV__JHASH__"),icon:d("fbicon")._(i("478232"),16),onPress:a,size:20})}),k.jsx(b,{children:k.jsx(a=c("MDSGlimmer.react"),{index:0,xstyle:l.rollcallTitle})}),k.jsx(b,{children:k.jsx(c("MWXIcon.react"),{"aria-label":h._("__JHASH__LLSQ7_q3mOX__JHASH__"),disabled:!0,icon:d("fbicon")._(i("816819"),16),size:20})})]}),k.jsx(c("MDSColumn.react"),{align:"center",expanding:!0,paddingVertical:20,spacing:20,verticalAlign:"center",children:k.jsxs(c("MDSColumnItem.react"),{children:[k.jsxs(c("MDSRow.react"),{align:"start",paddingHorizontal:0,paddingVertical:12,spacing:8,verticalAlign:"center",xstyle:l.contributionHeader,children:[k.jsx(b,{children:k.jsx(a,{index:0,xstyle:l.profilePicture})}),k.jsx(b,{children:k.jsx(a,{index:0,xstyle:l.profileName})})]}),k.jsx(a,{index:0,xstyle:l.contributionMedia})]})})]})}a.displayName=a.name+" [from "+f.id+"]";var l={contributionHeader:{width:"x1cvmir6",$$css:!0},contributionMedia:{borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",height:"xuo6tqj",marginBottom:"x1e56ztr",width:"x1cvmir6",$$css:!0},profileName:{borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",height:"x1qx5ct2",width:"x1oysuqx",$$css:!0},profilePicture:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"x10w6t97",width:"x1td3qas",$$css:!0},rollcallTitle:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"x10w6t97",width:"xdzyupr",$$css:!0}};g["default"]=a}),98);
__d("RollcallXmaCtaClickQplLogging",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("QPLUserFlow").endSuccess(c("qpl")._(127406705,"1680"))}function b(){c("QPLUserFlow").endFailure(c("qpl")._(127406705,"1680"),"fail to load roll call information")}function d(a,b,d){c("QPLUserFlow").start(c("qpl")._(127406705,"1680"),{annotations:{string:{cta_title:d,entry_point:a,source_type:b}}})}g.endSuccessXMACtaClickQplLogging=a;g.endFailureXMACtaClickQplLogging=b;g.startXMACtaClickQplLogging=d}),98);
__d("RollcallXmaViewerQplLogging",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("QPLUserFlow").endSuccess(c("qpl")._(127403136,"1137"))}function b(){c("QPLUserFlow").endFailure(c("qpl")._(127403136,"1137"),"error while doing actions in Rollcall viewer.")}function d(a,b,d){c("QPLUserFlow").start(c("qpl")._(127403136,"1137"),{annotations:{bool:{is_viewer_contribute:b},"int":{total_media_items:a},string:{source_type:d}}})}function e(){c("QPLUserFlow").addPoint(c("qpl")._(127403136,"1137"),"added_reaction")}function f(){c("QPLUserFlow").addPoint(c("qpl")._(127403136,"1137"),"unsend_contribution")}function h(){c("QPLUserFlow").addPoint(c("qpl")._(127403136,"1137"),"reset_prompt")}function i(){c("QPLUserFlow").addPoint(c("qpl")._(127403136,"1137"),"report_prompt")}function j(){c("QPLUserFlow").addPoint(c("qpl")._(127403136,"1137"),"report_contribution")}function k(){c("QPLUserFlow").addPoint(c("qpl")._(127403136,"1137"),"reply_contribution")}g.endSuccessXMARollCallViewerQplLogging=a;g.endFailureXMARollCallViewerQplLogging=b;g.startXMARollCallViewerQplLogging=d;g.addReactionRollCallViewerQplPoint=e;g.unsendContributionRollCallViewerQplPoint=f;g.resetPromptRollCallViewerQplPoint=h;g.reportPromptRollCallViewerQplPoint=i;g.reportContributionRollCallViewerQplPoint=j;g.replyContributionRollCallViewerQplPoint=k}),98);
__d("useRollcallContributionsXMAActionHandlerQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="23868899752758299"}),null);
__d("useRollcallContributionsXMAActionHandlerQuery.graphql",["useRollcallContributionsXMAActionHandlerQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"surface_nux_id",value:10706},{kind:"Literal",name:"trigger",value:"COMMUNITY_MESSAGING_PROMPT"}],c=[{kind:"Literal",name:"supported",value:"TDHjT"}],d={kind:"InlineFragment",selections:[{args:null,documentName:"useRollcallContributionsXMAActionHandlerQuery",fragmentName:"CometQuickPromotionMessengerWebPromptsNuxDialogRendererStrategy_quickPromotionRef",fragmentPropName:"quickPromotionRef",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebPromptsRendererStrategy",abstractKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useRollcallContributionsXMAActionHandlerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:a,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[d],storageKey:'renderer_strategy(supported:"TDHjT")'}],storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:10706,trigger:"COMMUNITY_MESSAGING_PROMPT")'}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useRollcallContributionsXMAActionHandlerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:a,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d],storageKey:'renderer_strategy(supported:"TDHjT")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:10706,trigger:"COMMUNITY_MESSAGING_PROMPT")'}],storageKey:null}]},params:{id:b("useRollcallContributionsXMAActionHandlerQuery_facebookRelayOperation"),metadata:{},name:"useRollcallContributionsXMAActionHandlerQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("useRollcallContributionsXMAActionHandler",["CometRelay","I64","JSResourceForInteraction","MWCMIsAnyCMThread","MWDidQueryPromptsNux","MWLSThread","MWRollcallContributionsDialogFallback.react","RollcallXmaCtaClickQplLogging","RollcallXmaViewerQplLogging","promiseDone","react","useMWXLazyDialog","usePrevious","useRollcallContributionsXMAActionHandlerQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));e=i;var l=e.useCallback,m=e.useEffect,n=e.useState;function o(){var a=d("CometRelay").useRelayEnvironment();return function(){return d("CometRelay").fetchQuery(a,h!==void 0?h:h=b("useRollcallContributionsXMAActionHandlerQuery.graphql"),{}).toPromise()}}function a(){var a=n((j||(j=d("I64"))).zero),b=a[0],e=a[1];a=n(j.zero);var f=a[0],g=a[1];a=n(null);var h=a[0],i=a[1];a=n(null);var p=a[0],q=a[1],r=c("usePrevious")(b),s=c("usePrevious")(f);a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWRollcallContributionsDialog.react").__setRef("useRollcallContributionsXMAActionHandler"),function(a){return k.jsx(c("MWRollcallContributionsDialogFallback.react"),{onClose:a})});var t=a[0];a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWCommunityMessagingPromptsNUXQuickPromotion.react").__setRef("useRollcallContributionsXMAActionHandler"));var u=a[0],v=o(),w=d("MWLSThread").useThread(b,function(a){return c("MWCMIsAnyCMThread")(a.threadType)});m(function(){w!=null&&!(j||(j=d("I64"))).is_zero(b)&&!(j||(j=d("I64"))).is_zero(f)&&r!==b&&s!==f&&(d("RollcallXmaCtaClickQplLogging").startXMACtaClickQplLogging("xma_www_button",w?"cm_thread":"friends_family_thread","open_viewer"),d("MWDidQueryPromptsNux").getDidQueryPromptsNux()||d("MWDidQueryPromptsNux").markDidQueryPromptsNux(),t({ctaType:p,rollCallId:f,scrollToContributionMessageId:h,threadKey:b},function(){d("RollcallXmaViewerQplLogging").endSuccessXMARollCallViewerQplLogging(),e((j||(j=d("I64"))).zero),g(j.zero),i(null)}),c("promiseDone")(v(),function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.eligible_promotions)==null?void 0:(a=a.nodes)==null?void 0:(a=a.find(function(a){return((a=a.comet_qp_sections)==null?void 0:a.renderer_strategy)!=null}))==null?void 0:(a=a.comet_qp_sections)==null?void 0:a.renderer_strategy;a&&u({asCreator:!1,rendererStrategy:a})}))},[w,s,r,f,t,b,h,v,u,p]);return l(function(a,b,c,d){e(b),g(a),i(c),q(d)},[])}g.useRollcallContributionsXMAActionHandler=a}),98);
__d("logCallAttemptViaLocalhost",["MessengerDesktopDeeplinkEventFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.funnelSessionId;c("MessengerDesktopDeeplinkEventFalcoEvent").logImmediately(function(){return{event:"attempt_localhost_deeplink",eventLocation:"browser",eventType:"call",funnelSessionId:b,mobile_app_source:"unknown"}})}g["default"]=a}),98);
__d("MWStartRTCCallUtils",["I64","Int64Hooks","LSContactBitOffset","LSContactBlockedByViewerStatus","LSContactReachabilityStatusType","LSContactType","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWChatIsMessageRequest","MWPActor.react","MessengerDesktopDeepLinkUtils","MessengerDesktopLocalServerRequest","ODS","Promise","ReQL","ReQLSuspense","ZenonRTWebBrowserFeatureSupport","gkx","isFeatureLimitEnabled","logCallAttemptViaLocalhost","promiseDone","react","useIsReadOnlyFeatureLimitedWithThreadType","useMWGetOtherUserContact","useReStore","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n=j||d("react"),o=n.useCallback,p=n.useRef;function a(a){var e=p(c("uuidv4")()).current;return o(function(f,g,h){var j="/call?threadid="+g+"&isvideocall="+(f?1:0)+"&funnel_id="+e;(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","initiating_dapp_call");c("logCallAttemptViaLocalhost")({funnelSessionId:e});c("promiseDone")((i||(i=b("Promise"))).all([new(c("MessengerDesktopLocalServerRequest"))(j,d("MessengerDesktopDeepLinkUtils").PORT).setOnLoadEndHandler(function(){}).setErrorHandler(function(b){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_failed_with_error_"+b),a(f,g,h)}).setTimeoutHandler(function(){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_timed_out"),a(f,g,h)}).send()]))},[a,e])}function e(a,e,f){var g=p(c("uuidv4")()).current;return d("Int64Hooks").useCallbackInt64(function(h){var j=(k||(k=d("I64"))).to_string(a),l=e==="video"?1:0;j="/call?threadid="+j+"&isvideocall="+l+"&funnel_id="+g;(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","initiating_dapp_call");c("logCallAttemptViaLocalhost")({funnelSessionId:g});c("promiseDone")((i||(i=b("Promise"))).all([new(c("MessengerDesktopLocalServerRequest"))(j,d("MessengerDesktopDeepLinkUtils").PORT).setOnLoadEndHandler(function(){}).setErrorHandler(function(a){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_failed_with_error_"+a),f(h)}).setTimeoutHandler(function(){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_timed_out"),f(h)}).send()]))},[e,g,a,f])}function q(a,b,e){a=r(a);var f,g=!1;if(a.length!==1)f=!1;else{var h,i=a[0];b=d("LSMessagingThreadTypeUtil").isOneToOne(b)&&i!=null&&!(k||(k=d("I64"))).equal(i.blockedByViewerStatus,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED));if(b)return[!1,!1];f=i!=null?(k||(k=d("I64"))).equal(i.contactType,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE)):!1;b=i!=null?(b=d("LSContactBitOffset").has(0,i))!=null?b:!0:!0;h=i!=null?(h=d("LSContactBitOffset").has(1,i))!=null?h:!0:!0;g=e&&i!=null&&i.blockedSinceTimestampMs==null&&!f&&(!b||!h)}if(!f)return[!g,!g];return c("gkx")("23431")?[a.every(function(a){return a==null?!0:d("LSContactBitOffset").has(17,a)}),a.every(function(a){return a==null?!0:d("LSContactBitOffset").has(16,a)})]:[!1,!1]}function r(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor();return d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.table("participants"),["contactId"]).getKeyRange(a).take(2).filter(function(a){return!(k||(k=d("I64"))).equal(a.contactId,e)}).map(function(a){return d("ReQLSuspense").first(d("ReQL").fromTableAscending(b.table("contacts"),["contactType","blockedSinceTimestampMs","capabilities","capabilities2","blockedByViewerStatus"]).getKeyRange(a.contactId),f.id+":283")})},[b,a,e],f.id+":272")}function s(a){var b=a.folderName,e=a.threadKey,g=a.threadType,i=(h||(h=c("useReStore")))(),j=d("MWPActor.react").useActor(),m=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(i.table("messages_ranges_v2__generated"),["threadKey"]).getKeyRange(e)},[i,e],f.id+":304")!=null,n=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(i.table("participants"),["threadKey","contactId"]).getKeyRange(e,j)},[i,e,j],f.id+":313")!=null,o=c("useMWGetOtherUserContact")(e,g,["contactReachabilityStatusType"]),p=d("LSThreadBitOffset").has(25,a),r=d("LSThreadBitOffset").has(24,a),s=d("LSMessagingThreadTypeUtil").isSecure(g),t=c("useIsReadOnlyFeatureLimitedWithThreadType")(g)&&(!s||c("isFeatureLimitEnabled")());a=q(e,a.threadType,s);var u=a[0];a=a[1];if(s&&(!d("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()||!c("gkx")("23430")))return[!1,!1];s=(o==null?void 0:o.contactReachabilityStatusType)!=null?(k||(k=d("I64"))).equal(o.contactReachabilityStatusType,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactReachabilityStatusType").REACHABLE)):!0;o=((k||(k=d("I64"))).equal(g,(l||(l=d("LSIntEnum"))).ofNumber(2))||(k||(k=d("I64"))).equal(g,(l||(l=d("LSIntEnum"))).ofNumber(16)))&&n||(k||(k=d("I64"))).equal(g,(l||(l=d("LSIntEnum"))).ofNumber(1))||(k||(k=d("I64"))).equal(g,(l||(l=d("LSIntEnum"))).ofNumber(15));n=d("MWChatIsMessageRequest").fn(b);g=!n&&m&&!t&&o&&s;return g?[u&&p,a&&r]:[!1,!1]}g.useStartDesktopCall=a;g.useStartMessengerDesktopCall=e;g.useCanCall=s}),98);
__d("useShouldTryWithMessengerDesktop",["MWFacebookUserWithoutMessengerAccess","MessengerDesktopDeepLinkUtils","ODS","gkx","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useRef,l=b.useState;function a(){var a=l(!1),b=a[0],e=a[1],f=k(!1),g=d("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess();j(function(){if(f.current)return;f.current=!0;if(g)return;if(c("gkx")("23670")||!d("MessengerDesktopDeepLinkUtils").isMessengerDesktopDeeplinkEligible())return;(i||(i=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","is_dapp_running");c("promiseDone")(d("MessengerDesktopDeepLinkUtils").isMessengerDesktopRunning(d("MessengerDesktopDeepLinkUtils").PORT).then(function(a){if(!a||a!==200){a||(i||(i=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","localhost_did_not_respond");a===500&&(i||(i=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","localhost_responded_but_crashed");return}e(!0)}))});return b}g["default"]=a}),98);
__d("useStartRTCCall",["MWLSStartPhoneCall","MWStartRTCCallUtils","useShouldTryWithMessengerDesktop"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useShouldTryWithMessengerDesktop")(),b=d("MWLSStartPhoneCall").useMakeRTCCall();b=b[0];var e=d("MWStartRTCCallUtils").useStartDesktopCall(b);return a?e:b}g["default"]=a}),98);
__d("useGetMWXMACtaRegistryHandler",["$InternalEnum","Actor","ConstUriUtils","CurrentEnvironment","CustomerInformationTemplateFalcoEvent","I64","MWChatXmaThirdPartyActionHandler","MWLSImagePostbackCtaHandler","MWLSPostbackCtaHandler","MWLSWebUrlCtaHandler","RoomsLinkUtils","XCometMessengerControllerRouteBuilder","XCometStoriesControllerRouteBuilder","XMessengerDotComCometMainControllerRouteBuilder","cr:131","cr:236","cr:4538","cr:4539","cr:5751","emptyFunction","gkx","isStringNullOrEmpty","nullthrows","useCometRouterDispatcher","useLSMessagingInitiatingSource","useLSMessagingSource","useMWChatPollXMAActionHandler","useMWLinkHashXMAActionHandler","useRollcallContributionsXMAActionHandler","useStartRTCCall"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(f=(e=b("cr:4539"))!=null?e:b("cr:131"))!=null?f:c("emptyFunction"),j=(e=b("cr:5751"))!=null?e:c("emptyFunction"),k=(e=(f=b("cr:4538"))!=null?f:b("cr:236"))!=null?e:c("emptyFunction"),l=b("$InternalEnum")({SUBTHREAD_LINK:"fb-messenger://community_subthread/"});function a(){var a=c("useLSMessagingInitiatingSource")(),b=c("useLSMessagingSource")(),e=d("Actor").useActor(),f=e[0];e=d("MWLSImagePostbackCtaHandler").usePostbackCtaHandler(b,a);b=c("useStartRTCCall")();var g=d("MWChatXmaThirdPartyActionHandler").useHandler(e,b),m=d("MWLSPostbackCtaHandler").usePostbackCtaHandler(),n=c("useMWLinkHashXMAActionHandler")(),o=c("useMWChatPollXMAActionHandler")(),p=d("useRollcallContributionsXMAActionHandler").useRollcallContributionsXMAActionHandler(),q=d("MWLSWebUrlCtaHandler").useShowWebViewDialog(),r=c("useCometRouterDispatcher")();a=k();var s=i({onSuccess:(e=a)!=null?e:c("emptyFunction")}),t=j();return function(a){var b=a.actionUrl,e=a.platformToken,i=a.type_,j=a.title,k=a.messageId,u=a.threadKey,v=a.attachmentFbid,w=["Title: "+j,"Type: "+i,"PlatformTokenPresent: "+(e!=null).toString(),"ActionUrlPresent: "+(b!=null).toString(),"ActionContentBlobPresent: "+(a.actionContentBlob!=null).toString()].join(", ");if(i==="xma_roll_call_open_viewer"||i==="xma_prompt_open_viewer_for_text"||i==="xma_roll_call_add_yours")return a.targetId==null?{actionType:"NOT_SUPPORTED",primaryInfo:void 0}:{actionType:"BUTTON",primaryInfo:function(){p(c("nullthrows")(a.targetId),u,null,i)},secondaryInfo:void 0};if(i==="xma_event_rsvp"&&c("gkx")("24146"))return{actionType:"BUTTON",primaryInfo:function(){},secondaryInfo:void 0};if(i==="xma_rtc_audio"||i==="xma_rtc_missed_audio"||i==="xma_rtc_new_audio_default"||i==="xma_rtc_ended_audio")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"MakeRtcCall",VAL:{hasVideo:!1,threadId:(h||(h=d("I64"))).to_string(u),trigger:i}})},secondaryInfo:void 0};if(i==="xma_rtc_video"||i==="xma_rtc_new_video_default"||i==="xma_rtc_new_video_from_fb_share"||i==="xma_rtc_new_video_from_fb_video_share"||i==="xma_rtc_missed_video"||i==="xma_rtc_ended_video")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"MakeRtcCall",VAL:{hasVideo:!0,threadId:(h||(h=d("I64"))).to_string(u),trigger:i}})},secondaryInfo:void 0};if(i==="xma_postback")return{actionType:"BUTTON",primaryInfo:function(){return m(e,j)},secondaryInfo:[(h||(h=d("I64"))).to_string(u),31]};if(i==="xma_open_dialog"){var x;if(b==null)return{actionType:"CTA_ERROR",primaryInfo:"Expected an open dialog url but didn't get any",secondaryInfo:"messenger_business_core_product"};x=(x=d("ConstUriUtils").getUri(b))==null?void 0:x.getQueryData==null?void 0:x.getQueryData();if(x==null)return{actionType:"CTA_ERROR",primaryInfo:"Expected a valid open dialog url but didn't get any",secondaryInfo:"messenger_business_core_product"};var y=String(x.page_id).toString(),z=String(x.guest_id).toString();return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowGuestChatHistory",VAL:{guestId:z,pageId:y}})},secondaryInfo:void 0}}if(i==="xma_p2p_payment_details"||i==="xma_p2p_request_pay"||i==="xma_p2p_payment_details_receive_money"||i==="xma_p2p_verify_info"){var A=a.targetId;return A==null?{actionType:"CTA_ERROR",primaryInfo:"P2P Transaction encounterd without txn id",secondaryInfo:"messenger_privacy_web"}:{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2PPaymentTransactionDetails",VAL:{currentStatus:null,id:(h||(h=d("I64"))).to_string(A)}})},secondaryInfo:void 0}}if(i==="fill_in_thread_form"||i==="filled_in_thread_form_successfully"){var B=a.actionContentBlob;return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowInThreadFormDetails",VAL:JSON.parse(c("nullthrows")(B))})},secondaryInfo:void 0}}if(i==="xma_join_from_portal"&&b!=null)return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"MakeJoinRoomFromPortal",VAL:{linkUrl:b}})},secondaryInfo:void 0};if(i==="xma_live_location_sharing")return{actionType:"BUTTON",primaryInfo:function(){return g(a.nativeUrl!=null?{NAME:"ShowStaticLocationDetails",VAL:{msgId:k}}:{NAME:"ShowLiveLocationDetails",VAL:{messageId:k,titleString:j}})},secondaryInfo:void 0};var C=a.actionContentBlob,D=a.targetId;if(i==="xma_join_community"||i==="xma_join_community_chat"||i==="xma_see_community"||i==="xma_see_community_chat")return{actionType:"BUTTON",primaryInfo:function(){return n(b,i)},secondaryInfo:void 0};if(i==="xma_poll_details_button"||i==="xma_poll_details_card")return{actionType:"BUTTON",primaryInfo:function(){return o(D,C)},secondaryInfo:void 0};if(i==="xma_otp_verification")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowPhoneVerificationDialog",VAL:JSON.parse(c("nullthrows")(C))})},secondaryInfo:void 0};if(C!=null&&D!=null)try{var E=JSON.parse(C);if(i==="xma_admod_chat_member_request")return{actionType:"BUTTON",primaryInfo:function(){var a=E.activityLogItemID,b=E.groupID,c=E.profileID;return g({NAME:"AdmodChatsShowMemberRequest",VAL:{activityLogItemId:a!=null?JSON.stringify(a):"",groupId:b!=null?JSON.stringify(b):"",profileId:c!=null?JSON.stringify(c):"",targetId:D!=null?(h||(h=d("I64"))).to_string(D):""}})},secondaryInfo:void 0};else if(i==="xma_admod_chat_pending_post")return{actionType:"BUTTON",primaryInfo:function(){var a=E.activityLogItemID,b=E.authorID,c=E.groupID,e=E.postID;return g({NAME:"AdmodChatsShowPendingPost",VAL:{activityLogItemId:a!=null?JSON.stringify(a):"",authorId:b!=null?JSON.stringify(b):"",groupId:c!=null?JSON.stringify(c):"",postId:e!=null?JSON.stringify(e):"",targetId:D!=null?(h||(h=d("I64"))).to_string(D):""}})},secondaryInfo:void 0}}catch(a){if(i!=="marketplace_xma_call_function"||!c("gkx")("24148"))return{actionType:"NOT_SUPPORTED",primaryInfo:void 0}}var F=a.targetId;if(F!=null){var G={ctaId:a.ctaId,ctaType:i,orderID:(h||(h=d("I64"))).to_string(F)};if(i==="xma_p2m_payment_details")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MOrderDetails",VAL:G})},secondaryInfo:void 0};else if(i==="xma_p2m_attach_receipt")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MAttachBankSlip",VAL:G})},secondaryInfo:void 0};else if(i==="xma_p2m_offsite_bank_transfer")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MOffsiteBankTransferCTA",VAL:G})},secondaryInfo:void 0};else if(i==="xma_p2m_mark_as_paid")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MMarkAsPaid",VAL:{ctaId:a.ctaId,ctaType:i,orderID:(h||(h=d("I64"))).to_string(F)}})},secondaryInfo:void 0};else if(i==="xma_p2m_mark_as_shipped")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MMarkAsShipped",VAL:{ctaId:a.ctaId,ctaType:i,orderID:(h||(h=d("I64"))).to_string(F)}})},secondaryInfo:void 0};if(i==="xma_p2m_checkout"){var H={orderID:(h||(h=d("I64"))).to_string(F),pageID:h.to_string(u)};return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MCheckout",VAL:H})},secondaryInfo:void 0}}if(i==="xma_p2m_informational_message_bottom_sheet"){var I={contentType:JSON.parse(c("nullthrows")(C)),orderID:(h||(h=d("I64"))).to_string(F),pageID:h.to_string(u)};return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MInformationalMessageBottomSheet",VAL:I})},secondaryInfo:void 0}}}if(i==="xma_customer_information"){var J=(h||(h=d("I64"))).to_string(u);c("CustomerInformationTemplateFalcoEvent").log(function(){return{consumer_id:f,event_type:"mw_xma_impression",form_id:a.attachmentFbid,page_id:J}});var K={actorId:f,eeMessageId:a.attachmentFbid,messageId:a.messageId,pageId:J};return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"BuyerShippingAddress",VAL:K})},secondaryInfo:void 0}}if(C==null&&(i==="xma_direct_send"||i==="xma_biz_inbox_form_send"||i==="xma_feedback_send"))return{actionType:"CTA_ERROR",primaryInfo:"Expected pii_form data but didn't get any",secondaryInfo:"mb_apix"};if(i==="xma_direct_send")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowPIIForm",VAL:JSON.parse(c("nullthrows")(C))})},secondaryInfo:[(h||(h=d("I64"))).to_string(u),45]};if(i==="xma_biz_inbox_form_send")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowPIIFormForFormBuilder",VAL:{ctaType:i,nuxData:{description:"",seen:!0,title:"",url:"",url_text:""},piiForm:JSON.parse(c("nullthrows")(C))}})},secondaryInfo:[(h||(h=d("I64"))).to_string(u),45]};if(i==="xma_feedback_send")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowCustomerFeedbackForm",VAL:{feedbackFormId:c("nullthrows")(C)}})},secondaryInfo:[(h||(h=d("I64"))).to_string(u),69]};if(i==="xma_workplace_chat_bot_submit_feedback"){var L={feedbackActionContentBlob:c("nullthrows")(C)};return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"WorkplaceChatBotSubmitFeedback",VAL:L})},secondaryInfo:void 0}}if(i==="xma_work_meetings_invite"){x=d("RoomsLinkUtils").getRoomsLinkHash((x=a==null?void 0:a.actionUrl)!=null?x:"");return x!=null?{actionType:"POPOVER_BUTTON",primaryInfo:x}:{actionType:"NOT_SUPPORTED",primaryInfo:void 0}}if(i==="xma_account_link")return b==null?{actionType:"CTA_ERROR",primaryInfo:"Expected an account link url but didn't get any",secondaryInfo:"mb_apix"}:{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"OpenAccountLinkUrl",VAL:b})},secondaryInfo:[(h||(h=d("I64"))).to_string(u),49]};if(i==="xma_open_joinable_call_invite_url")return{actionType:"BUTTON",primaryInfo:function(){var a;return g({NAME:"MakeWorkJoinableCallInvite",VAL:{linkUrl:(a=b)!=null?a:""}})},secondaryInfo:void 0};if(i==="xma_montage_share"){if(a.targetId==null)return{actionType:"NOT_SUPPORTED",primaryInfo:void 0};x=(x=c("XCometStoriesControllerRouteBuilder").buildUri({card_id:window.btoa("S:_ISC:"+(h||(h=d("I64"))).to_string(a.targetId)),view_single:!0}).setDomain("www.facebook.com"))==null?void 0:x.setProtocol("https");return x==null?{actionType:"NOT_SUPPORTED",primaryInfo:void 0}:{actionType:"URL",primaryInfo:c("nullthrows")(x).toString(),secondaryInfo:void 0}}if(i==="marketplace_xma_call_function")return a.actionContentBlob==null||a.targetId==null?{actionType:"NOT_SUPPORTED",primaryInfo:void 0}:{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ProcessMarketplaceCallFunction",VAL:{actionType:c("nullthrows")(a.actionContentBlob),attachmentFbid:v,messageId:k,targetId:c("nullthrows")(a.targetId)}})},secondaryInfo:void 0};if(i==="marketplace_xma_open_dialog"){if(b==null||a.actionContentBlob==null)return{actionType:"CTA_ERROR",primaryInfo:"Expected an open dialog url and actionContentBlob but didn't get any",secondaryInfo:"messenger_business_core_product"};x=d("ConstUriUtils").getUri(b);if(x==null)return{actionType:"CTA_ERROR",primaryInfo:"Found invalid url when creating CTA",secondaryInfo:"messenger_business_core_product"};var M=String(x.getQueryParam("listingID")).toString();return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"OpenMarketplaceDialog",VAL:{ctaType:c("nullthrows")(a.actionContentBlob),listingId:M,threadId:(h||(h=d("I64"))).to_string(u)}})},secondaryInfo:void 0}}if(i==="xma_ctm_in_thread_multiphoto_reply_image"){if(a.actionContentBlob==null)return{actionType:"NOT_SUPPORTED",primaryInfo:void 0};try{x=JSON.parse(a.actionContentBlob);var N=x.action_prefill,O=x.ad_id,P=x.customer_id,Q=x.index,R=x.page_id,S=x.reply_image_uri;if(N==null||S==null)return{actionType:"NOT_SUPPORTED",primaryInfo:void 0};var T='{"in_thread_multiphoto_xma_reply": true}';return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"SendImagePostback",VAL:{image:S,loggingDetails:{ad_id:O.toString(),consumer_id:P.toString(),index:Q,page_id:R.toString()},message:N,platformToken:c("isStringNullOrEmpty")(e)?T:e}})},secondaryInfo:void 0}}catch(a){return{actionType:"NOT_SUPPORTED",primaryInfo:void 0}}}if(i==="xma_disabled_cta")return{actionType:"DISABLED_BUTTON",primaryInfo:void 0};if(i==="xma_open_native"){x=a.nativeUrl;if(x!=null&&x.startsWith("fb-messenger://user-thread/")){var U=x.substr("fb-messenger://user-thread/".length);return{actionType:"DEEPLINK",primaryInfo:{loggingDetails:[(h||(h=d("I64"))).to_string(u),33],threadKey:h.of_string(U)}}}if(x!=null&&x.startsWith(l.SUBTHREAD_LINK)){try{U=new URL(x),x=U.searchParams.get("subthread_fbid")}catch(a){x=null}if(t!=null&&x!=null){var V=(h||(h=d("I64"))).of_string(x);return{actionType:"BUTTON",primaryInfo:function(){return t(V)},secondaryInfo:void 0}}}var W=a.actionContentBlob;if(W!=null)return{actionType:"BUTTON",primaryInfo:function(){return q(W)},secondaryInfo:void 0};if(b!=null)if(b.includes("://m.me/j/")){if(a.targetId!=null){U=(h||(h=d("I64"))).to_string(a.targetId);var X=c("CurrentEnvironment").messengerdotcom?c("XMessengerDotComCometMainControllerRouteBuilder").buildURL({thread_key:U}):c("XCometMessengerControllerRouteBuilder").buildURL({thread_key:U});return{actionType:"BUTTON",primaryInfo:function(){return r==null?void 0:r.go(X,{})},secondaryInfo:void 0}}return{actionType:"BUTTON",primaryInfo:function(){return s==null?void 0:s(b)},secondaryInfo:void 0}}else return{actionType:"URL",primaryInfo:b,secondaryInfo:[(h||(h=d("I64"))).to_string(u),33]};return{actionType:"CTA_ERROR",primaryInfo:"No Url found while parsing Open Native XMA "+w,secondaryInfo:"messenger_privacy_web"}}var Y=a.targetId;if(Y!=null&&i==="xma_services_confirm_booking")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ConfirmAppointmentBooking",VAL:{requestID:(h||(h=d("I64"))).to_string(Y)}})},secondaryInfo:void 0};if(C!=null&&C.length>0&&C!=="{}"&&!C.includes("notification_message_token")&&!C.includes("contact_type"))return{actionType:"BUTTON",primaryInfo:function(){return q(C)},secondaryInfo:void 0};if(b!=null){if(a.enableExtensions===!0){var Z={actionLink:b,pageID:(h||(h=d("I64"))).to_string(u),sourceTitle:(x=j)!=null?x:"",userID:h.to_string(u)};if(i==="xma_open_rich_widget")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowMessengerRichWidgetExtension",VAL:Z})},secondaryInfo:[(h||(h=d("I64"))).to_string(u),33]};else return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowMessengerExtensions",VAL:Z})},secondaryInfo:[(h||(h=d("I64"))).to_string(u),33]}}return{actionType:"URL",primaryInfo:b,secondaryInfo:[(h||(h=d("I64"))).to_string(u),32]}}return{actionType:"CTA_ERROR",primaryInfo:"Unknown CTA encountered while parsing XMA. "+w,secondaryInfo:"messenger_privacy_web"}}}g["default"]=a}),98);
__d("useMWXMAInformedAttachmentLabel",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b){a===void 0&&(a="");a={ALTERED_MEDIA:h._("__JHASH__pK0fcBDpaEV__JHASH__",[h._param("attachment item title",a)]),ALTERED_PHOTO:h._("__JHASH__dJ_qZg1Bnj2__JHASH__",[h._param("attachment item title",a)]),FALSE_NEWS:h._("__JHASH__9UILySlE-wD__JHASH__",[h._param("attachment item title",a)]),MISLEADING_NEWS:h._("__JHASH__7LJaDiii2kF__JHASH__",[h._param("attachment item title",a)]),MISSING_CONTEXT:h._("__JHASH__JiWZCmbD51v__JHASH__",[h._param("attachment item title",a)]),SENSITIVE:h._("__JHASH__gmdVuVfF78Q__JHASH__",[h._param("attachment item title",a)])};return b==null||a[b]==null?h._("__JHASH__jBGVUqdMJ6C__JHASH__"):a[b]}g["default"]=a}),98);
__d("MWXMAAttachmentActionTriggerDefault.react",["I64","MWInboxRouteBuilder","MWLSThread","MWXLink.react","MWXMAAttachmentActionTriggerWithOpenChatTab.react","MWXPressable.react","MessengerWebUXLogger","MessengerWebUXLoggerXMAEventLoggingImpl","ReQL","ReQLSuspense","isCometRouterUrl","justknobx","logXMACtaClicked","react","recoverableViolation","useGetMWXMACtaRegistryHandler","useMWXMAInformedAttachmentLabel","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react"),l={link:{":hover_textDecoration":"x1lku1pv",$$css:!0}};function a(a){var b=a.attachment,e=a.attachmentItem,g=a.children,j=(h||(h=c("useReStore")))(),m=e.defaultCtaId,n=e.defaultCtaType,o=e.threadKey;a=c("useMWXMAInformedAttachmentLabel")(e==null?void 0:e.titleText,b==null?void 0:b.gatingTitle);var p=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(j.tables.messages.index("messageId")).getKeyRange(b.messageId)},[j,b.messageId],f.id+":60"),q=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableAscending(j.tables.attachment_ctas).getKeyRange((a=m)!=null?a:(i||(i=d("I64"))).zero)},[j,m],f.id+":67"),r=c("useGetMWXMACtaRegistryHandler")(),s=c("MessengerWebUXLogger").useInteractionLogger(),t=d("MessengerWebUXLoggerXMAEventLoggingImpl").useXMAEventsClickLogger(),u=d("MessengerWebUXLoggerXMAEventLoggingImpl").useXMAEventsRedirectDefaultToFBLogger(),v=d("MessengerWebUXLoggerXMAEventLoggingImpl").useXMAEventOpenInFBLogger(),w=d("MWLSThread").useThread(o,function(a){return a.threadType}),x=b.defaultCtaType==="xma_prompt_open_viewer_for_text";if(q==null)return g;r=r(q);switch(r.actionType){case"BUTTON":var y,z=r.primaryInfo,A=r.secondaryInfo;return k.jsx(c("MWXPressable.react"),{"aria-label":(y=e.titleText)!=null?y:e.defaultCtaTitle,hideHoverOverlay:x,onPress:function(){s==null?void 0:s({ctaType:n,eventName:"open_xma_attachment_cta",threadKey:o,threadType:w});d("logXMACtaClicked").logXMACtaClicked({cta:q,loggingDetails:A,source:1});t==null?void 0:t({attachment:b,clickCategory:2,message:p,threadType:w});u({attachment:b,message:p,threadType:w});return z()},children:g});case"DISABLED_BUTTON":return k.jsx(c("MWXPressable.react"),{"aria-label":(y=e.titleText)!=null?y:"",disabled:!0,children:g});case"URL":x=r.primaryInfo;var B=c("isCometRouterUrl")(x);if(!(x.startsWith("http")||x.startsWith("/")))return g;var C=r.secondaryInfo;return k.jsx(c("MWXLink.react"),{href:x,label:a,onClick:function(){d("logXMACtaClicked").logXMACtaClicked({cta:q,loggingDetails:C,source:1}),t==null?void 0:t({attachment:b,clickCategory:2,message:p,threadType:w}),u({attachment:b,isDirectToExternal:!B,message:p,threadType:w})},onNavigate:function(a){B&&a&&v({attachment:b,message:p,threadType:w})},target:c("justknobx")._("1677")?void 0:"_blank",xstyle:l.link,children:g});case"DEEPLINK":var D=function(){d("logXMACtaClicked").logXMACtaClicked({cta:q,loggingDetails:E,source:1}),t==null?void 0:t({attachment:b,clickCategory:2,message:p,threadType:w}),u==null?void 0:u({attachment:b,message:p,threadType:w})};e=r.primaryInfo;var E=e.loggingDetails;y=e.threadKey;var F=d("MWInboxRouteBuilder").buildURL({thread_key:(i||(i=d("I64"))).to_string(y)});return k.jsx(c("MWXMAAttachmentActionTriggerWithOpenChatTab.react"),{threadKey:y,children:function(a){return k.jsx(c("MWXLink.react"),{href:F,onClick:function(b){a(F,b);return D()},preventLocalNavigation:!0,xstyle:l.link,children:g})}});case"CTA_ERROR":c("recoverableViolation")(r.primaryInfo,r.secondaryInfo,void 0,{trackOnly:!0});return g;case"NOT_SUPPORTED":return g;case"POPOVER_BUTTON":return g}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentActionTrigger.react",["MWXMAAttachmentActionTriggerDefault.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.attachment,d=a.attachmentItem,e=a.children;a=a.isPressable;if(a)return i.jsx(c("MWXMAAttachmentActionTriggerDefault.react"),{attachment:b,attachmentItem:d,children:e});else return e}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRollCallXMAAttachmentItem.react",["BaseImage.react","MWXImage.react","MWXText.react","gkx","isStringNullOrEmpty","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=160,l=213,m={avatar:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0},card:{borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",filter:"xa5fk4t",height:"x1xx6w2s",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xq1dxzn",$$css:!0},media:{backgroundColor:"xwcfey6",backgroundPosition:"x1xsqp64",backgroundSize:"x18d0r48",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",objectFit:"xl1xv1r",$$css:!0},textCard:{backgroundColor:"x9bbmet",display:"x78zum5",flexDirection:"xdt5ytf",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",$$css:!0},timestamp:{flexShrink:"x2lah0s",paddingBottom:"x84yb8i",$$css:!0},titleText:{flexGrow:"x1iyjqo2",paddingEnd:"x1pi30zi",paddingLeft:null,paddingRight:null,paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0}};function a(a){a=a.attachmentItem;var b=a.faviconUrl,d=a.playableUrl,e=a.previewUrl,f=a.subtitleText;a=a.titleText;if(!c("isStringNullOrEmpty")(d))return j.jsx("div",{className:"xfh8nwu xoqspk4 x12v9rci x138vmkv xa5fk4t x1xx6w2s x6ikm8r x10wlt62 xq1dxzn",children:j.jsx("video",{className:"xwcfey6 x1xsqp64 x18d0r48 xfh8nwu xoqspk4 x12v9rci x138vmkv xl1xv1r",height:l,muted:!0,src:d,width:k})});else if(!c("isStringNullOrEmpty")(e))return j.jsx("div",{className:"xfh8nwu xoqspk4 x12v9rci x138vmkv xa5fk4t x1xx6w2s x6ikm8r x10wlt62 xq1dxzn",children:j.jsx(c("BaseImage.react"),{height:l,src:e,width:k,xstyle:m.media})});else if(c("gkx")("23420")&&!c("isStringNullOrEmpty")(a)&&!c("isStringNullOrEmpty")(b))return j.jsxs("div",{className:"xfh8nwu xoqspk4 x12v9rci x138vmkv xa5fk4t x1xx6w2s x6ikm8r x10wlt62 xq1dxzn x9bbmet x78zum5 xdt5ytf xz9dl7a xn6708d xsag5q8 x1ye3gou",children:[j.jsx(c("MWXImage.react"),{height:24,src:b,width:24,xstyle:m.avatar}),j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).spread(m.titleText),{children:j.jsx(c("MWXText.react"),{numberOfLines:6,type:"entityHeaderMeta3",children:a})})),c("isStringNullOrEmpty")(f)?null:j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).spread(m.timestamp),{children:j.jsx(c("MWXText.react"),{type:"body4",children:f})}))]});return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentItemCtaButtonBase.react",["ix","AdsMessengerContext.react","I64","ImageIconSource","LSCTAIconType","LSIntEnum","LSMessagingThreadTypeUtil","MWInboxRouteBuilder","MWLSThread","MessengerWebUXLogger","ReQL","ReQLSuspense","gkx","react","recoverableViolation","requireDeferred","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||(j=d("react")),n=j.useEffect,o=c("requireDeferred")("ZenonUserActionLoggerCommon").__setRef("MWXMAAttachmentItemCtaButtonBase.react");function p(a){if(a==null)return null;switch((l||(l=d("LSIntEnum"))).toNumber(a)){case c("LSCTAIconType").NONE:return null;case c("LSCTAIconType").FB:return new(c("ImageIconSource"))(h("814640"),16,16);default:return null}}function a(a){var b=a.attachmentId,e=a.ctaIconType,g=a.ctaId,h=a.getCtaRegistryHandler;a.messageId;var j=a.renderButtonActionEventButton,l=a.renderButtonActionNonEventButton,q=a.renderDeeplinkActionButton,r=a.renderDisabledButtonActionButton,s=a.renderPopoverMenuButtonActionButton,t=a.renderUrlActionButton,u=a.threadKey,v=a.title,w=a.type,x=(i||(i=c("useReStore")))();a=d("MWLSThread").useThread(u,function(a){return a.threadType});var y=c("MessengerWebUXLogger").useImpressionLoggerRef({ctaType:w,eventName:"xma_attachment_cta",threadKey:u,threadType:a});a=a?d("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a):!1;var z=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(x.tables.attachment_ctas).getKeyRange(g)},[x,g],f.id+":138");n(function(){var a=["xma_rtc_audio","xma_rtc_missed_audio","xma_rtc_ended_audio","xma_rtc_video","xma_rtc_missed_video","xma_rtc_ended_video"].includes(w);a&&o.onReady(function(a){a.logImpression({surface:"admin_message"})})},[w]);var A=d("AdsMessengerContext.react").useAdsMessengerContext(),B=A.isMessengerInAds;A=A.maybeGetCallbackFromURI;if(z==null)return w==="xma_disabled_cta"?m.jsx("div",{className:"x18xmwgd x1iyjqo2 xs83m0k x1iorvi4 x150jy0e xjkvuk6 x1e558r4",ref:y,children:r(v)}):null;h=h(z);e=p(e);var C=null;switch(h.actionType){case"BUTTON":var D=h.secondaryInfo,E=h.primaryInfo,F=w==="xma_event_rsvp"&&c("gkx")("24146");b!=null&&u!=null&&!((a=a)!=null?a:!1)&&F?C=j(b,u,v,e,z,D):F||(C=l(v,e,z,D,E));break;case"POPOVER_BUTTON":s&&(C=s(v,z,h.primaryInfo));break;case"URL":a=h.secondaryInfo;j=A==null?void 0:A(h.primaryInfo);B&&j!=null?C=l(v,e,z,a,j):C=t(v,e,z,a,h.primaryInfo);break;case"DISABLED_BUTTON":C=r(v);break;case"DEEPLINK":b=h.primaryInfo;u=b.loggingDetails;F=b.threadKey;D=d("MWInboxRouteBuilder").buildURL({thread_key:(k||(k=d("I64"))).to_string(F)});C=q(v,F,z,u,D);break;case"CTA_ERROR":c("recoverableViolation")(h.primaryInfo,h.secondaryInfo,void 0,{trackOnly:!0});C=null;break;case"NOT_SUPPORTED":C=null;break}return m.jsx("div",{className:"x18xmwgd x1iyjqo2 xs83m0k x1iorvi4 x150jy0e xjkvuk6 x1e558r4",ref:y,children:C})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWCMPollsV1Enabled",["LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=(a=d("MWLSThread").useThread(a,function(a){return{pollsV1UICapability:d("LSThreadBitOffset").has(158,a)}}))!=null?a:{};a=a.pollsV1UICapability;return a===!0}g["default"]=a}),98);
__d("useMWHasPollsVotingEnabled",["LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=(a=d("MWLSThread").useThread(a,function(a){return d("LSThreadBitOffset").has(170,a)}))!=null?a:!1;return a}g["default"]=a}),98);
__d("MWXMAAttachmentItemCtaButton.react",["I64","JSResourceForInteraction","LSMessagingThreadTypeUtil","MDSButton.react","MWCMIsAnyCMThread","MWLSThread","MWXEntryPointPopoverTrigger.react","MWXLazyPopoverTrigger.react","MWXMAAttachmentActionTriggerWithOpenChatTab.react","MWXMAAttachmentItemCtaButtonBase.react","MWXPopoverLoadingState.react","MWXTooltip.react","MessengerWebUXLogger","logXMACtaClicked","react","useGetMWXMACtaRegistryHandler","useMWCMPollsV1Enabled","useMWCMPollsV2Enabled","useMWHasPollsVotingEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k=c("JSResourceForInteraction")("MWCMEventRSVPXMADropdownMenu.react").__setRef("MWXMAAttachmentItemCtaButton.react"),l={root:{minWidth:"xktpd3l",$$css:!0}};function a(a){var b=a.attachmentId,e=a.ctaIconType,f=a.ctaId,g=a.messageId,h=a.popoverMenu,m=a.threadKey,n=a.title;a=a.type;var o=c("MessengerWebUXLogger").useInteractionLogger(),p=d("MWLSThread").useThread(m,function(a){return a.threadType}),q={ctaType:a,eventName:"open_xma_attachment_cta",threadKey:m,threadType:p};p=c("useGetMWXMACtaRegistryHandler")();var r=c("useMWHasPollsVotingEnabled")(m),s=c("useMWCMPollsV1Enabled")(m),t=c("useMWCMPollsV2Enabled")(m),u=d("MWLSThread").useThread(m,function(a){return c("MWCMIsAnyCMThread")(a.threadType)}),v=d("MWLSThread").useThread(m,function(a){return d("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a.threadType)||d("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(a.threadType)});if(!r&&(a==="xma_poll_details_button"||a==="xma_poll_details_card"))return null;return((r=u)!=null?r:!1)&&!s&&!t&&a==="xma_poll_details_button"?null:j.jsx(c("MWXMAAttachmentItemCtaButtonBase.react"),{attachmentId:b,ctaIconType:e,ctaId:f,getCtaRegistryHandler:p,messageId:g,renderButtonActionEventButton:function(a,b,e,f,g,h){return j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"stretch",popoverProps:{eventId:(i||(i=d("I64"))).of_string(a),threadKey:b},popoverResource:k,popoverType:"menu",position:"above",preloadTrigger:"button",children:function(a,b,i,k,l,m){return j.jsx(c("MWXTooltip.react"),{tooltip:e,children:j.jsx(c("MDSButton.react"),{icon:f,label:e,onHoverIn:k,onHoverOut:l,onPress:function(){o==null?void 0:o(q);d("logXMACtaClicked").logXMACtaClicked({cta:g,loggingDetails:h,source:2});return b()},onPressIn:m,ref:a,type:"secondary"})})}})},renderButtonActionNonEventButton:function(a,b,e,f,g){return j.jsx(c("MWXTooltip.react"),{tooltip:a,children:j.jsx(c("MDSButton.react"),{disabled:v,icon:b,label:a,onPress:function(){o==null?void 0:o(q);d("logXMACtaClicked").logXMACtaClicked({cta:e,loggingDetails:f,source:2});return g()},type:"secondary"})})},renderDeeplinkActionButton:function(a,b,e,f,g){return j.jsx(c("MWXTooltip.react"),{tooltip:a,children:j.jsx(c("MWXMAAttachmentActionTriggerWithOpenChatTab.react"),{threadKey:b,children:function(b){return j.jsx(c("MDSButton.react"),{label:a,linkProps:{preventLocalNavigation:!0,url:g},onPress:function(a){b(g,a);o==null?void 0:o(q);return d("logXMACtaClicked").logXMACtaClicked({cta:e,loggingDetails:f,source:2})},type:"secondary"})}})})},renderDisabledButtonActionButton:function(a){return j.jsx(c("MWXTooltip.react"),{tooltip:a,children:j.jsx(c("MDSButton.react"),{disabled:!0,label:a,type:"secondary"})})},renderPopoverMenuButtonActionButton:h?function(a,b,e){return j.jsx(c("MWXEntryPointPopoverTrigger.react"),{align:"stretch",entryPointParams:{primaryInfo:e},fallback:j.jsx(c("MWXPopoverLoadingState.react"),{withArrow:!1,xstyle:l.root}),otherProps:{cta:b},popoverEntryPoint:h,popoverType:"menu",position:"below",preloadTrigger:"button",children:function(e,f){return j.jsx(c("MWXTooltip.react"),{tooltip:a,children:j.jsx(c("MDSButton.react"),{label:a,onPress:function(){o==null?void 0:o(q);d("logXMACtaClicked").logXMACtaClicked({cta:b,loggingDetails:void 0,source:2});return f()},ref:e,type:"secondary"})})}})}:void 0,renderUrlActionButton:function(a,b,e,f,g){return j.jsx(c("MWXTooltip.react"),{tooltip:a,children:j.jsx(c("MDSButton.react"),{icon:b,label:n,linkProps:{target:"_blank",url:g},onPress:function(){o==null?void 0:o(q),d("logXMACtaClicked").logXMACtaClicked({cta:e,loggingDetails:f,source:2})},type:"secondary"})})},threadKey:m,title:n,type:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentItemIcon.react",["CometImageCover.react","FDSSkittleIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.icon;if(a==null)return null;return typeof a==="string"?i.jsx("div",{className:"x6s0dn4 x78zum5 x5yr21d xq8finb",children:i.jsx(c("CometImageCover.react"),{alt:"Icon for this message",src:a,style:{borderRadius:"50%",height:"36px",width:"36px"}})}):i.jsx("div",{className:"x6s0dn4 x78zum5 x5yr21d xq8finb",children:i.jsx(c("FDSSkittleIcon.react"),{color:a.color,icon:a.icon,size:36})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentItemListItemsBase.react",["LSMediaUrlAttachment","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.attachment,c=a.renderDefaultListItem,e=a.renderPercentageListItem;a=[{contactUrlExpirationTimestampList:b.listItemContactUrlExpirationTimestampList1,contactUrlFallbackList:b.listItemContactUrlFallbackList1,contactUrlList:d("LSMediaUrlAttachment").listItemContactUrlList1(b),id:b.listItemId1,progressBarFilledPercentage:b.listItemProgressBarFilledPercentage1,titleText:b.listItemTitleText1,totalCount:b.listItemTotalCount1},{contactUrlExpirationTimestampList:b.listItemContactUrlExpirationTimestampList2,contactUrlFallbackList:b.listItemContactUrlFallbackList2,contactUrlList:d("LSMediaUrlAttachment").listItemContactUrlList2(b),id:b.listItemId2,progressBarFilledPercentage:b.listItemProgressBarFilledPercentage2,titleText:b.listItemTitleText2,totalCount:b.listItemTotalCount2},{contactUrlExpirationTimestampList:b.listItemContactUrlExpirationTimestampList3,contactUrlFallbackList:b.listItemContactUrlFallbackList3,contactUrlList:d("LSMediaUrlAttachment").listItemContactUrlList3(b),id:b.listItemId3,progressBarFilledPercentage:b.listItemProgressBarFilledPercentage3,titleText:b.listItemTitleText3,totalCount:b.listItemTotalCount3}];var f=[];a.forEach(function(a){var b=a.contactUrlExpirationTimestampList,c=a.contactUrlFallbackList,d=a.contactUrlList,e=a.id,g=a.progressBarFilledPercentage,h=a.titleText;a=a.totalCount;if(e!=null){d=d!=null?d.split(","):[];var i=b!=null?b.split(","):[],j=c!=null?c.split(","):[];f.push({contacts:d.map(function(a,b){return{url:a,urlExpirationTimestamp:i[b],urlFallback:j[b]}}),id:e,progressBarFilledPercentage:g,titleText:h,totalCount:a})}});return i.jsx(d("react-strict-dom").html.ul,{children:f.map(function(a){var b=a.progressBarFilledPercentage;return b!=null?e(a,b):c(a)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentItemListItems.react",["I64","MWChatPollFacepile.react","MWLSThreadDisplayContext","MWPColorUtils","MWXMAAttachmentItemListItemsBase.react","MWXText.react","react","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var b=a.attachment,e=a.onPollOptionFacepilePress;a=c("useMWPThreadTheme")();var f=a.threadTheme.fallbackColor,g=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();return j.jsx(c("MWXMAAttachmentItemListItemsBase.react"),{attachment:b,renderDefaultListItem:function(a){return j.jsx("li",{className:"xwwskcc x1q0q8m5 xso031l x1l1xfun x13fuv20 x178xt8z x14vqqas xsag5q8 xz9dl7a",children:j.jsxs("div",{children:[j.jsx(c("MWChatPollFacepile.react"),{contactWithBorder:!1,contacts:a.contacts.map(function(a){return{name:void 0,profile_picture_url:a.url}}),countOverride:a.totalCount!=null?(i||(i=d("I64"))).to_int32(a.totalCount):void 0,limit:9,overflowStyle:"overlayLastPhoto",size:"large"}),a.titleText!=null?j.jsx("div",{className:"xsgj6o6 x1xmf6yo",children:j.jsx(c("MWXText.react"),{color:"secondary",numberOfLines:2,type:"body4",children:a.titleText})}):null]})},(i||(i=d("I64"))).to_string(a.id))},renderPercentageListItem:function(a,b){return j.jsxs("li",{className:"x14vqqas",children:[j.jsxs("div",{className:"x78zum5 x1qughib",children:[a.titleText!=null?j.jsx(c("MWXText.react"),{numberOfLines:g==="Inbox"?3:1,type:"headline4",children:a.titleText}):null,j.jsx("div",{className:"x1i64zmx",children:j.jsx(c("MWChatPollFacepile.react"),{contacts:a.contacts.map(function(a){return{name:void 0,profile_picture_url:a.url}}),countOverride:a.totalCount!=null?(i||(i=d("I64"))).to_int32(a.totalCount):void 0,direction:"reversed",gap:"negative",onPress:e!=null?function(){e(a.id)}:void 0,size:"small"})})]}),j.jsx("div",{className:"x1wpzbip x1lq5wgf xgqcy7u x30kzoy x9jhf4c xdk7pt xod5an3 x1xmf6yo",children:j.jsx("div",{className:"x1lq5wgf xgqcy7u x30kzoy x9jhf4c xdk7pt",style:{backgroundColor:d("MWPColorUtils").int64ToHex(f),width:(i||(i=d("I64"))).to_string(b)+"%"}})})]},i.to_string(a.id))}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentSubtitleDecoration.react",["ix","Int64Hooks","LSIntEnum","MNXMASubtitleDecorationType","MWXIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(a){var b=a.subtitleDecorationType;return d("Int64Hooks").useMemoInt64(function(){switch((j||(j=d("LSIntEnum"))).toNumber(b)){case c("MNXMASubtitleDecorationType").THREADS_ICON:return k.jsx(c("MWXIcon.react"),{color:"secondary",icon:d("fbicon")._(h("380222"),16)});default:return null}},[b])}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPXMAIconParser",["ConstUriUtils","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case"clear":case"staticWhite":case"white":case"white70":case"black":case"black50":case"black34":case"black20":case"black12":case"black6":case"black4":case"bluegrey75":case"bluegrey50":case"placeholder-icon":case"blue":case"purple":case"gray":case"background":case"scarlet":case"steel":case"coregreen":case"coral":case"sky":case"coreblue":case"emerald":return"gray";case"red":return"cherry";case"green":return"lime";case"honey":return"lemon";default:c("recoverableViolation")("Unknown Icon color: "+a,"messenger_web_product");return"gray"}}function a(a){if(a==null)return;if(a.startsWith("https")||a.startsWith("blob"))return a;if(!a.startsWith("ls"))return;a=a.replace("ls","http");a=d("ConstUriUtils").getUri(a);if(a==null)return;var b=a.getQueryParam("icon");a=a.getQueryParam("circleColor");if(typeof b==="string"&&typeof a==="string"){a=h(a);return{color:a,icon:b}}return}g.parse=a}),98);
__d("MWXMAIconParser.react",["ix","MWPXMAIconParser","fbicon","recoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){switch(a){case"airplane":return d("fbicon")._(h("571771"),20);case"calendar":return d("fbicon")._(h("481118"),20);case"calendar-add":return d("fbicon")._(h("640913"),20);case"camcorder":return d("fbicon")._(h("493174"),20);case"camcorder-incoming":return d("fbicon")._(h("1096148"),20);case"camcorder-missed":return d("fbicon")._(h("662989"),20);case"camcorder-outgoing":return d("fbicon")._(h("1096150"),20);case"camcorder-plus":return d("fbicon")._(h("662993"),20);case"checkmark-circle":return d("fbicon")._(h("498146"),20);case"cross-circle":return d("fbicon")._(h("1501526"),20);case"currency-peso":return d("fbicon")._(h("1174630"),20);case"currency-pound":return d("fbicon")._(h("1174587"),20);case"currency-taka":return d("fbicon")._(h("182108"),20);case"currency-thai-baht":return d("fbicon")._(h("876716"),20);case"currency-usd":return d("fbicon")._(h("847056"),20);case"document-complete":return d("fbicon")._(h("728245"),20);case"friend-generic":return d("fbicon")._(h("502671"),20);case"friend-generic-checkmark":return d("fbicon")._(h("538342"),20);case"group":return d("fbicon")._(h("485091"),20);case"group-block":return d("fbicon")._(h("714636"),20);case"location":return d("fbicon")._(h("795388"),20);case"pin":return d("fbicon")._(h("481942"),20);case"phone":return d("fbicon")._(h("558161"),20);case"phone-incoming":return d("fbicon")._(h("1096151"),20);case"phone-outgoing":return d("fbicon")._(h("1096154"),20);case"shield":return d("fbicon")._(h("492714"),20);case"phone-missed":return d("fbicon")._(h("847457"),20);case"question-circle":return d("fbicon")._(h("1604445"),20);case"tag":return d("fbicon")._(h("502473"),20);case"watch":return d("fbicon")._(h("607169"),20);case"map":return d("fbicon")._(h("645715"),20);case"house-keyhole":return d("fbicon")._(h("1670302"),20);case"document":return d("fbicon")._(h("728245"),20);case"checkmark":return d("fbicon")._(h("477814"),20);case"shopping-cart":return d("fbicon")._(h("763120"),20);case"cross":return d("fbicon")._(h("478233"),20);default:c("recoverableViolation")("Unknown XMA Icon: "+a,"messenger_web_product");return}}function a(a){a=d("MWPXMAIconParser").parse(a);if(a==null)return;if(typeof a==="string")return a;var b=a.color;a=a.icon;a=i(a);if(a!=null)return{color:b,icon:a}}g.parse=a}),98);
__d("MWXMAAttachmentItemMainText.react",["fbt","I64","LSIntEnum","MNLSXMALayoutType","MNXMASubtitleDecorationType","MWXIconChevronRight","MWXIconStrict.react","MWXMAAttachmentSubtitleDecoration.react","MWXMAIconParser.react","MWXText.react","MWXTextPairing.react","gkx","react","stylex","xmaLayouts"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||d("react"),n={description:{paddingTop:"x889kno",$$css:!0},hscroll:{paddingEnd:"xsyo7zv",paddingLeft:null,paddingRight:null,paddingStart:"x16hj40l",$$css:!0},root:{maxWidth:"x193iq5w",whiteSpace:"x126k92a",width:"xh8yej3",$$css:!0},subthreadDescription:{marginTop:"x1k70j0n",$$css:!0},subthreadXMADescriptionRow:{justifyContent:"x1nhvcw1",$$css:!0},subthreadXMARow:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"x1qughib",$$css:!0},subtitleContainer:{alignItems:"x6s0dn4",display:"x78zum5",$$css:!0},subtitleDecorationIconContainer:{marginEnd:"x1emribx",marginLeft:null,marginRight:null,marginTop:"x1k70j0n",$$css:!0},titleText:{marginBottom:"xahult9",$$css:!0},withIcon:{paddingBottom:"xg8j3zb",paddingTop:"xyqdw3p",$$css:!0}},o=c("gkx")("24147");function a(a){var b,e=a.attachment,f=a.attachmentItem,g=a.bodyLineLimit,j=a.facePileElement,p=a.getFaviconUrlXMA,q=a.headlineLineLimit,r=a.isHscroll;a.isStandalone;var s=a.outgoing;s=s===void 0?!1:s;var t=a.subtitleText,u=a.title;a=a.xmaLayout;b=(k||(k=d("I64"))).equal((b=e.xmaLayoutType)!=null?b:(k||(k=d("I64"))).zero,(l||(l=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").THREAD_SHORTCUT));f=d("MWXMAIconParser.react").parse((p=p(e,f))!=null?p:"");p=h._("__JHASH__SFJQf-uN6yj__JHASH__");var v=h._("__JHASH__-LANapr3SYq__JHASH__");p=u!==""?b&&o?m.jsxs("div",{className:"x6s0dn4 x78zum5 x1qughib",children:[m.jsx(c("MWXText.react"),{color:s?"secondaryOnMedia":"secondary",type:"meta2",children:u}),m.jsx(c("MWXIconStrict.react"),{color:s?"white":"secondary",icon:c("MWXIconChevronRight"),size:12})]}):m.jsx(c("MWXTextPairing.react"),{headline:b?p:u,headlineLineLimit:q,level:4,testid:void 0,textAlign:e.attachmentLoggingType==="xma_view_event"?"center":"start"}):null;j=t!==""?b&&o?m.jsxs("div",{className:(i||(i=c("stylex")))([n.subthreadXMARow,n.subthreadXMADescriptionRow]),children:[j,m.jsx("div",{className:"x1k70j0n",children:m.jsx(c("MWXText.react"),{color:s?"secondaryOnMedia":"secondary",type:"meta2",children:e.replyCount==null||(k||(k=d("I64"))).equal(e.replyCount,(k||(k=d("I64"))).zero)?t:(k||(k=d("I64"))).gt((u=e.replyCount)!=null?u:(k||(k=d("I64"))).zero,(k||(k=d("I64"))).of_int32(20))?h._("__JHASH__Dd3JSX2bl8X__JHASH__"):h._("__JHASH__J-X-Y424pwe__JHASH__",[h._plural((k||(k=d("I64"))).to_int32((q=e.replyCount)!=null?q:(k||(k=d("I64"))).zero),"number")])})})]}):m.jsx("div",{className:"x889kno",children:m.jsx(c("MWXTextPairing.react"),{body:b?v:t,bodyColor:"secondary",bodyLineLimit:g,level:4,testid:void 0})}):null;u=(s=e.subtitleDecorationType)!=null?s:(k||(k=d("I64"))).zero;q=(l||(l=d("LSIntEnum"))).toNumber(u)===c("MNXMASubtitleDecorationType").THREADS_ICON?m.jsx("div",{className:"x1emribx x1k70j0n",children:m.jsx(c("MWXMAAttachmentSubtitleDecoration.react"),{subtitleDecorationType:u})}):null;b=e.captionBodyText!=null?m.jsx(c("MWXText.react"),{color:"primary",type:"meta3",children:e.captionBodyText}):null;return m.jsxs("div",{className:(i||(i=c("stylex")))(n.root,f==null?r?n.hscroll:!1:n.withIcon),children:[a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT&&p!==null?m.jsx("div",{className:"xahult9",children:p}):p,b,m.jsxs("div",{className:"x6s0dn4 x78zum5",children:[q,j]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAEventFacepiles.react",["CometFacepile.react","I64","MWXText.react","ReQL","ReQLSuspense","react","stylex","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=j||d("react"),m={facepile:{display:"x78zum5",flexDirection:"xdt5ytf",maxWidth:"x193iq5w",paddingTop:"x889kno",paddingBottom:"x1a8lsjc",$$css:!0},root_center_aligned:{display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},root_start_aligned:{display:"x78zum5",justifyContent:"x1nhvcw1",$$css:!0}};function a(a){var b=a.avatarText,e=a.count,g=a.ctaId,j=a.size;j=j===void 0?32:j;var n=a.urls;a=a.xstyle;var o=g!=null?(k||(k=d("I64"))).to_string(g):"",p=(h||(h=c("useReStore")))();o=d("ReQLSuspense").useFirst(function(){return g!=null?d("ReQL").fromTableAscending(p.tables.attachment_ctas).getKeyRange(g):d("ReQL").empty()},[p,o],f.id+":51");var q=e!=null?(k||(k=d("I64"))).le(e,(k||(k=d("I64"))).of_int32(9)):!1;o=q?void 0:{target:"_blank",url:o==null?void 0:o.actionUrl};q=q?n.map(function(a){return{source:{uri:a}}}):n.slice(0,9).map(function(a){return{source:{uri:a}}});var r=b==null?m.root_center_aligned:m.root_start_aligned,s=b!=null?l.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:b}):void 0;return q.length>0?l.jsx("div",{className:(i||(i=c("stylex")))(r),"data-testid":void 0,children:l.jsx("div",{className:(i||(i=c("stylex")))(m.facepile,a),role:"gridcell",children:l.jsx(c("CometFacepile.react"),{count:e!=null?(k||(k=d("I64"))).to_int32(e):n.length,isOverlapping:!0,isTextInline:b!=null,items:q,linkProps:o,size:j,text:s})})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("getLSMediaAttachmentAvatarViewUrlList",["I64","LSMediaUrlUtils","rewriteFallbackUrl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.avatarViewUrlExpirationTimestampList,e=a.avatarViewUrlFallbackList;a=a.avatarViewUrlList;if(a==null)if(b!=null)return[];else if(e!=null)return e.split(", ");else return[];if(b==null)return[];if(e==null)return[];a=a.split(", ");var f=b.split(", "),g=e.split(", ");return a.map(function(a,b){var e;try{e=d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(f[b]))}catch(a){e=!0}if(e){return(e=c("rewriteFallbackUrl")(g[b]))!=null?e:""}else return a})}g["default"]=a}),98);
__d("MWXMAAttachmentItemBody.react",["I64","LSIntEnum","LSMediaUrlAttachment","LSMediaUrlAttachmentItem","MDSTextPairing.react","MNLSXMALayoutType","MWLSThread","MWXMAAttachmentActionTrigger.react","MWXMAAttachmentItemCtaButton.react","MWXMAAttachmentItemIcon.react","MWXMAAttachmentItemListItems.react","MWXMAAttachmentItemMainText.react","MWXMAEventFacepiles.react","MWXMAIconParser.react","MessengerWebUXLoggerXMAEventLoggingImpl","ReQL","ReQLSuspense","getLSMediaAttachmentAvatarViewUrlList","react","stylex","useReStore","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=j||d("react"),n={buttonsOnly:{marginTop:"xdj266r",$$css:!0},buttonsWrapper:{justifySelf:"x1qab1bc",marginTop:"x14vqqas",$$css:!0},description:{display:"x78zum5",flexDirection:"x1q0g3np",flexGrow:"x1iyjqo2",marginEnd:"xw3qccf",marginLeft:null,marginRight:null,$$css:!0},descriptionSubtitleText:{display:"x78zum5",justifyContent:"xl56j7k",paddingBottom:"xwib8y2",paddingTop:"x889kno",$$css:!0},descriptionText:{display:"x78zum5",flexDirection:"x1q0g3np",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",marginEnd:"xw3qccf",marginLeft:null,marginRight:null,$$css:!0},hasFavicon:{paddingEnd:"x4uap5",paddingLeft:null,paddingRight:null,paddingStart:"xkhd6sd",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",minHeight:"xisnujt",$$css:!0},rootWithHeaderAndNoMedia:{marginTop:"xdj266r",$$css:!0},secondaryDescriptionText:{marginBottom:"xod5an3",$$css:!0},subthreadFacepiles:{marginEnd:"xmo9yow",marginLeft:null,marginRight:null,paddingTop:"xexx8yu",paddingBottom:"x18d9i69",$$css:!0},xmaUnifiedtyles:{marginTop:"x14vqqas",marginEnd:"xktsk01",marginBottom:"x1yztbdb",marginStart:"x1d52u69",$$css:!0}};function a(a){var b,e,g=a.attachment,j=a.attachmentItem,r=a.bodyLineLimit,s=a.ctaPopoverMenu,t=a.facepiles,u=a.getFaviconUrlXMA,v=a.getPlayableUrl,w=a.getPreviewUrlXMA,x=a.headlineLineLimit,y=a.isHscroll,z=a.isPressable,A=a.isStandalone,B=a.onPollOptionFacepilePress,C=a.outgoing;C=C===void 0?!1:C;a=a.xmaLayout;b=d("MWXMAIconParser.react").parse((b=u(g,j))!=null?b:"");e=(k||(k=d("I64"))).equal((e=g.xmaLayoutType)!=null?e:(k||(k=d("I64"))).zero,(l||(l=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").THREAD_SHORTCUT));var D=j.titleText==null&&j.subtitleText==null&&b==null,E=j.titleText!=null||!A?j.titleText:g.titleText,F=j.subtitleText!=null||!A?j.subtitleText:g.subtitleText,G=c("getLSMediaAttachmentAvatarViewUrlList")(g);t=(t=t)!=null?t:G.length!==0&&!e?[m.jsx(c("MWXMAEventFacepiles.react"),{avatarText:g.avatarViewContextText,count:g.avatarCount,ctaId:j.attachmentCta1Id,urls:G},"xma-event-facepiles")]:[];e=E==null&&F==null?[]:[m.jsx(c("MWXMAAttachmentActionTrigger.react"),{attachment:g,attachmentItem:j,isPressable:z,children:m.jsxs("div",{className:(h||(h=c("stylex")))(n.description,b==null?!1:n.hasFavicon),children:[m.jsx(c("MWXMAAttachmentItemIcon.react"),{icon:b}),m.jsx(c("MWXMAAttachmentItemMainText.react"),{attachment:g,attachmentItem:j,bodyLineLimit:r,facePileElement:(k||(k=d("I64"))).equal((e=g.avatarCount)!=null?e:(k||(k=d("I64"))).zero,(k||(k=d("I64"))).zero)?null:m.jsx(c("MWXMAEventFacepiles.react"),{avatarText:g.avatarViewContextText,count:g.avatarCount,ctaId:j.attachmentCta1Id,size:16,urls:G,xstyle:n.subthreadFacepiles}),getFaviconUrlXMA:u,headlineLineLimit:x,isHscroll:y,isStandalone:A,outgoing:C,subtitleText:(z=F)!=null?z:"",title:(b=E)!=null?b:"",xmaLayout:a})]})},"xma-action-trigger")];G=g.listItemsDescriptionText;u=g.listItemsDescriptionSubtitleText;y=g.cta2IconType;A=g.cta3IconType;C=g.listItemId1;F=g.listItemsSecondaryDescriptionText;z=g.messageId;E=g.threadKey;b=j.attachmentCta1Id;var H=j.attachmentCta2Id,I=j.attachmentCta3Id,J=j.cta1IconType,K=j.cta1Title,L=j.cta1Type,M=j.cta2Title,N=j.cta2Type,O=j.cta3Title,P=j.cta3Type;D=L!=null&&K!=null&&b!=null?[m.jsxs("div",{className:(h||(h=c("stylex")))(n.buttonsWrapper,D?n.buttonsOnly:!1),children:[m.jsx(c("MWXMAAttachmentItemCtaButton.react"),{attachmentId:g.attachmentFbid,ctaIconType:J,ctaId:b,messageId:z,threadKey:E,title:K,type:L}),N!=null&&M!=null&&H!=null?m.jsxs(m.Fragment,{children:[m.jsx(c("MWXMAAttachmentItemCtaButton.react"),{attachmentId:g.attachmentFbid,ctaIconType:y,ctaId:H,messageId:z,popoverMenu:s,threadKey:E,title:M,type:N}),P!=null&&O!=null&&I!=null?m.jsx(c("MWXMAAttachmentItemCtaButton.react"),{ctaIconType:A,ctaId:I,messageId:z,threadKey:E,title:O,type:P}):null]}):null]},"xma-cta-button")]:[];J=G!=null?[m.jsx(o,{headlineLineLimit:x,listItemsDescriptionText:G},"xma-list-items-description-text")]:[];b=u!=null?[m.jsx(p,{bodyLineLimit:r,value:u},"xma-list-items-description-subtitle-text")]:[];K=C!=null?[m.jsx(c("MWXMAAttachmentItemListItems.react"),{attachment:g,onPollOptionFacepilePress:B},"list-item-1")]:[];L=F!=null?[m.jsx(q,{bodyLineLimit:r,listItemsSecondaryDescriptionText:F},"xma-list-items-secondary-description-text")]:[];y=[e,J,b,t,K,L,D].reduce(function(a,b){return a.concat(b)},[]);H=d("LSMediaUrlAttachment").previewUrl(g)!=null||d("LSMediaUrlAttachmentItem").previewUrl(j)!=null||d("LSMediaUrlAttachmentItem").playableUrl(j)!=null||w(g,j)!=null||v(g,j)!=null;var Q=(i||(i=c("useReStore")))();s=d("MWLSThread").useThread(E,function(a){return a.threadType});M=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(Q.tables.messages.index("messageId")).getKeyRange(g.messageId)},[Q,g.messageId],f.id+":336");N=d("MessengerWebUXLoggerXMAEventLoggingImpl").useXMAEventsImpressionLoggerRef({attachment:g,clickCategory:1,message:M,threadType:s});return y.length===0?null:m.jsx("div",{className:(h||(h=c("stylex")))(n.root,a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT?n.xmaUnifiedtyles:!1,a!==d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT&&!H&&g.headerTitle!=null?n.rootWithHeaderAndNoMedia:!1),ref:N,children:y.map(function(a,b){return m.jsx(m.Fragment,{children:a},String(b))})})}a.displayName=a.name+" [from "+f.id+"]";function o(a){var b=a.headlineLineLimit;a=a.listItemsDescriptionText;return m.jsx("div",{className:"x78zum5 x1q0g3np x1iyjqo2 xl56j7k xw3qccf",children:m.jsx(c("MDSTextPairing.react"),{headline:a,headlineLineLimit:b,level:4,textAlign:"center"})})}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.bodyLineLimit;a=a.value;return m.jsx("div",{className:"x78zum5 xl56j7k xwib8y2 x889kno",children:m.jsx(c("MDSTextPairing.react"),{body:a,bodyColor:"secondary",bodyLineLimit:b,level:4,textAlign:"center"})})}p.displayName=p.name+" [from "+f.id+"]";function q(a){var b=a.bodyLineLimit;a=a.listItemsSecondaryDescriptionText;return m.jsx("div",{className:"xod5an3",children:m.jsx(c("MDSTextPairing.react"),{body:a,bodyColor:"secondary",bodyLineLimit:b,level:4})})}q.displayName=q.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentItemAttribution.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.attachment;a=a;var b=a.attributionAppIcon;a=a.attributionAppName;return b!=null&&a!=null?i.jsxs("div",{className:"x6s0dn4 x1gn5b1j x230xth x78zum5 x1rfph6h x1iorvi4 xsyo7zv xjkvuk6 x16hj40l",children:[i.jsx("img",{className:"x14yjl9h xudhj91 x18nykt9 xww2gxu xlup9mm x1kky2od",src:b}),i.jsx("span",{className:"xzsf02u x1nxh6w3 x1mnrxsn x13faqbe",children:a})]}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAInformedTreatment.react",["fbt","CometBlurredBackgroundImage.react","EyeCrossFilled24.svg.react","InfoCircleFilled20.svg.react","MWXColumn.react","MWXColumnItem.react","MWXIcon.react","MWXImage.react","MWXText.react","MessengerWebUXLogger","SVGIcon","WAArmadilloXMA.pb","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={blurry:{backgroundColor:"x18l40ae",bottom:"x1ey2m1c",end:"xds687c",left:null,right:null,filter:"xtea3wc",pointerEvents:"x47corl",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},center:{position:"x10l6tqk",start:"xtzzx4i",left:null,right:null,top:"xwa60dl",transform:"x11lhmoz",width:"xh8yej3",$$css:!0},overlay:{paddingTop:"xexx8yu",paddingEnd:"x1iji9kk",paddingBottom:"x18d9i69",paddingStart:"x1sln4lm",$$css:!0},post:{flexGrow:"x1iyjqo2",height:"x5yr21d",objectFit:"xl1xv1r",width:"xh8yej3",$$css:!0},topRight:{alignItems:"x6s0dn4",backgroundColor:"x1gevrdp",borderTopColor:"x1fk37vd",borderEndColor:"xdy0ngz",borderBottomColor:"xqb0rpr",borderStartColor:"x1tp0a3f",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",boxShadow:"xe80o0v",display:"x78zum5",end:"x1k3u6ij",left:null,right:null,rowGap:"xpse7mg",columnGap:"x1ihrfj4",height:"x10w6t97",paddingTop:"xyqdw3p",paddingEnd:"x1iji9kk",paddingBottom:"xg8j3zb",paddingStart:"x16hj40l",position:"x10l6tqk",top:"x1tk7jg1",whiteSpace:"xuxw1ft",wordWrap:"x1vvkbs",$$css:!0},warning:{display:"x78zum5",height:"x1m3v4wt",position:"x1n2onr6",width:"xh8yej3",$$css:!0}},l={ALTERED_MEDIA:{icon:d("SVGIcon").svgIcon(c("EyeCrossFilled24.svg.react")),text:h._("__JHASH__5H5N5-Xsncf__JHASH__")},ALTERED_PHOTO:{icon:d("SVGIcon").svgIcon(c("EyeCrossFilled24.svg.react")),text:h._("__JHASH__MMwXoLKk349__JHASH__")},CRUEL:{icon:d("SVGIcon").svgIcon(c("EyeCrossFilled24.svg.react")),text:h._("__JHASH__i1O1Uvt1vZ6__JHASH__")},FALSE_NEWS:{icon:d("SVGIcon").svgIcon(c("InfoCircleFilled20.svg.react")),text:h._("__JHASH__MnSycojlY-Q__JHASH__")},MISLEADING_NEWS:{icon:d("SVGIcon").svgIcon(c("InfoCircleFilled20.svg.react")),text:h._("__JHASH__CYwjewQWzi8__JHASH__")},MISSING_CONTEXT:{icon:d("SVGIcon").svgIcon(c("InfoCircleFilled20.svg.react")),text:h._("__JHASH__RL7VH1G5kZU__JHASH__")},SENSITIVE:{icon:d("SVGIcon").svgIcon(c("EyeCrossFilled24.svg.react")),text:h._("__JHASH__sovQqayBAJd__JHASH__")},VIOLENCE:{icon:d("SVGIcon").svgIcon(c("EyeCrossFilled24.svg.react")),text:h._("__JHASH__sovQqayBAJd__JHASH__")}},m=h._("__JHASH__zDjOAdn9yE8__JHASH__");function a(a){var b=a.dimension,e=a.gatingTitle,f=a.gatingType,g=a.previewUrl,h=g===void 0?"":g,i=a.xstyle,n=c("gkx")("23219"),o=function(a){var b;return((b=l[a])==null?void 0:b.icon)==null?d("SVGIcon").svgIcon(c("EyeCrossFilled24.svg.react")):l[a].icon},p=function(a){var b;return((b=l[a])==null?void 0:b.text)==null?null:l[a].text};g=function(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.WARNING_SCREENS:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE:return j.jsx("div",{className:"x10l6tqk xtzzx4i xwa60dl x11lhmoz xh8yej3",children:j.jsxs(c("MWXColumn.react"),{spacing:12,verticalAlign:"center",children:[j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWXIcon.react"),{color:"white",icon:o(e),size:32})}),j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXText.react"),{align:"center",color:"white",numberOfLines:1,type:n?"bodyLink3":"bodyLink4",children:p(e)})}),j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXText.react"),{align:"center",color:"white",type:n?"meta3":"meta4",children:m})})]})});case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.MEDIA_LABEL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.POST_LABEL:return j.jsxs("div",{className:"x6s0dn4 x1gevrdp x1fk37vd xdy0ngz xqb0rpr x1tp0a3f x107yiy2 xv8uw2v x1tfwpuw x2g32xy x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi x178xt8z xm81vs4 xso031l xy80clv xe80o0v x78zum5 x1k3u6ij xpse7mg x1ihrfj4 x10w6t97 xyqdw3p x1iji9kk xg8j3zb x16hj40l x10l6tqk x1tk7jg1 xuxw1ft x1vvkbs",children:[j.jsx(c("MWXIcon.react"),{color:"white",icon:o(e),size:24}),j.jsx(c("MWXText.react"),{align:"center",color:"white",type:n?"bodyLink3":"bodyLink4",children:p(e)})]});default:return null}};a=function(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.MEDIA_LABEL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.POST_LABEL:return j.jsx("div",{style:b,children:j.jsx(c("MWXImage.react"),{alt:"",src:h,xstyle:k.post})});default:return j.jsxs(j.Fragment,{children:[j.jsx(c("CometBlurredBackgroundImage.react"),{alt:"",src:h,xstyle:[k.post,i,k.overlay]}),j.jsx("div",{className:"x18l40ae x1ey2m1c xds687c xtea3wc x47corl x10l6tqk x17qophe x13vifvy"})]})}};var q=c("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"inform_treatment_chat_impression"});return j.jsxs("div",{className:"x78zum5 x1m3v4wt x1n2onr6 xh8yej3",ref:q,children:[a(parseInt(f,10)),g(parseInt(f,10))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentItemImage.react",["CometImageCover.react","I64","LSIntEnum","MNLSXMALayoutType","MWXMAInformedTreatment.react","react","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=a.attachment,e=a.attachmentItem,f=a.cardWidth,g=a.isStandalone,h=a.previewUrl;a=a.xmaLayout;var l=e.previewWidth==null?0:(i||(i=d("I64"))).to_int32(e.previewWidth),m=e.previewHeight==null?0:(i||(i=d("I64"))).to_int32(e.previewHeight),n=e.defaultCtaType;n==="xma_montage_share"?n=!0:n=e.imageUrl==null?g:l===m;e=l!==0?m!==0?l/m:0:0;b.xmaLayoutType!=null&&(i||(i=d("I64"))).equal(b.xmaLayoutType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").STANDARD_DXMA))&&(e===0&&(e=2),n=!0);g=f;f={height:(e===0?106:g/e).toString()+"px",width:g.toString()+"px"};var o={};a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT&&(m>l&&(f.height=g.toString()+"px",f.width=(e===0?106:g*e).toString()+"px"),o=babelHelpers["extends"]({aspectRatio:void 0,flexGrow:"0",margin:"auto"},f));if(h.length===0||h==="")return null;a={height:(e===0?g-106:g/e).toString()+"px",width:g.toString()+"px"};if(b.gatingTitle!=null&&b.gatingType!=null)return k.jsx(c("MWXMAInformedTreatment.react"),{dimension:a,gatingTitle:b.gatingTitle,gatingType:b.gatingType,previewUrl:h});return n?k.jsx("div",{className:"x78zum5 x1n2onr6 xh8yej3",children:k.jsx("img",{alt:"",src:h,style:babelHelpers["extends"]({aspectRatio:e,flexGrow:"1",height:"auto",maxWidth:"100%",objectFit:"cover"},o)})}):k.jsx("div",{className:"x78zum5 x1n2onr6 xh8yej3",style:f,children:k.jsx(c("CometImageCover.react"),{alt:"",src:h,style:{bottom:"0",left:"0",position:"absolute",right:"0",top:"0"}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentItemDefaultPreview.react",["CometObjectFitContainer.react","CometPlaceholder.react","I64","MDSGlimmer.react","MWLSThreadDisplayContext","MWPBaseXMAAttachmentItem.react","MWXMAAttachmentActionTrigger.react","MWXMAAttachmentItemAttribution.react","MWXMAAttachmentItemImage.react","deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWChatVideoPlayer.react").__setRef("MWXMAAttachmentItemDefaultPreview.react")),l={glimmer:{height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},root:{display:"x78zum5",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",width:"xh8yej3",$$css:!0}};function a(a){var b,e=a.attachment,f=a.attachmentItem,g=a.cardWidth,h=a.getPlayableUrl,l=a.getPreviewUrlXMA,m=a.isPressable,o=a.isStandalone;a=a.xmaLayout;b=(b=e.shouldAutoplayVideo)!=null?b:!1;var p=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();p=p==="Inbox";p=d("MWPBaseXMAAttachmentItem.react").getXMAAttachmentItemPreview({attachment:e,attachmentItem:f,getPreviewUrl:l,preferLargePreview:p});l=l(e,f);h=h(e,f);switch(p.type){case"Video":return h==null?null:j.jsxs(c("MWXMAAttachmentActionTrigger.react"),{attachment:e,attachmentItem:f,isPressable:m,children:[j.jsx(n,{attachmentItem:f,children:j.jsx(k,{controls:b?"none":"mwchat",fbid:f.attachmentFbid,hideExpandButton:!1,mediaRenderQpl:null,originalHeight:f.previewHeight!=null?(i||(i=d("I64"))).to_int32(f.previewHeight):0,originalWidth:f.previewWidth!=null?(i||(i=d("I64"))).to_int32(f.previewWidth):0,sdSrc:h,shouldForcePauseOnClick:!0})}),b?j.jsx(c("MWXMAAttachmentItemAttribution.react"),{attachment:e}):null]});case"Image":return l==null?null:j.jsx(c("MWXMAAttachmentActionTrigger.react"),{attachment:e,attachmentItem:f,isPressable:m,children:j.jsx(c("MWXMAAttachmentItemImage.react"),{attachment:e,attachmentItem:f,cardWidth:g,isStandalone:o,previewUrl:l,xmaLayout:a})});case"Unsupported":return null}}a.displayName=a.name+" [from "+f.id+"]";function m(){return j.jsx("div",{className:"x78zum5 x5yr21d x6ikm8r x10wlt62 x10l6tqk xh8yej3",children:j.jsx(c("MDSGlimmer.react"),{index:0,xstyle:l.glimmer})})}m.displayName=m.name+" [from "+f.id+"]";function n(a){var b,e=a.attachmentItem;a=a.children;b=(i||(i=d("I64"))).to_int32((b=e.previewWidth)!=null?b:(i||(i=d("I64"))).zero);e=i.to_int32((e=e.previewHeight)!=null?e:(i||(i=d("I64"))).zero);b=b!==0?e!==0?b/e:0:0;e=e>250&&b<.8;return j.jsx(c("CometObjectFitContainer.react"),{contentAspectRatio:e?.8:b,children:j.jsx(c("CometPlaceholder.react"),{fallback:j.jsx(m,{}),children:a})})}n.displayName=n.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentItemHeaderIcon.react",["CometImageCover.react","FDSSkittleIcon.react","react","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.icon;a=a.xmaLayout;a=a===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:a;if(typeof b==="string"){a=a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT?"40px":"32px";return i.jsx("div",{className:"x6s0dn4 x78zum5 x5yr21d xq8finb",children:i.jsx(c("CometImageCover.react"),{alt:"Icon for this message's header",src:b,style:{borderRadius:"50%",height:a,width:a}})})}return i.jsx("div",{className:"x6s0dn4 x78zum5 x5yr21d xq8finb",children:i.jsx(c("FDSSkittleIcon.react"),{color:b.color,icon:b.icon,size:36})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentItemHeader.react",["ix","I64","LSIntEnum","LSVerifiedType","MWXIcon.react","MWXMAAttachmentItemHeaderIcon.react","MWXMAIconParser.react","MWXText.react","MWXTextPairing.react","fbicon","react","stylex","xmaLayouts"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||d("react"),n={root:{alignItems:"x6s0dn4",display:"x78zum5",marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",$$css:!0},verifiedIconContainer:{display:"x78zum5",marginStart:"xsgj6o6",marginLeft:null,marginRight:null,$$css:!0},withBorder:{borderBottomColor:"x1nb4dca",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",paddingStart:"x1swvt13",paddingLeft:null,paddingRight:null,paddingEnd:"x1pi30zi",paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0}};function a(a){var b=a.attachment,e=a.getHeaderUrlXMA;a=a.xmaLayout;a=a===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:a;var f=b.headerTitle;if(f==null)return null;var g=b.headerSubtitleText;e=e(b);e=e==null?void 0:d("MWXMAIconParser.react").parse(e);var j=a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT;b=b.verifiedType!=null?(k||(k=d("I64"))).equal(b.verifiedType,(l||(l=d("LSIntEnum"))).ofNumber(c("LSVerifiedType").DEFAULT)):!1;return m.jsxs("div",{className:(i||(i=c("stylex")))(n.root,j?n.withBorder:!1),children:[e!=null&&m.jsx(c("MWXMAAttachmentItemHeaderIcon.react"),{icon:e,xmaLayout:a}),j&&g!==null&&g!=null&&g!==""?m.jsx(c("MWXTextPairing.react"),{headline:f,level:4,meta:g}):m.jsx(c("MWXText.react"),{type:"bodyLink3",children:f}),b?m.jsx("div",{className:"x78zum5 xsgj6o6",children:m.jsx(c("MWXIcon.react"),{color:"highlight",icon:d("fbicon")._(h("494936"),12)})}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentItemDefaultXMAContent.react",["LSIntEnum","MNLSXMALayoutType","MWRollCallXMAAttachmentItem.react","MWXMAAttachmentItemBody.react","MWXMAAttachmentItemDefaultPreview.react","MWXMAAttachmentItemHeader.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var b=a.attachment,e=a.attachmentItem,f=a.bodyLineLimit,g=a.cardWidth,h=a.ctaPopoverMenu,k=a.facepiles,l=a.getFaviconUrlXMA,m=a.getHeaderUrlXMA,n=a.getPlayableUrl,o=a.getPreviewUrlXMA,p=a.headlineLineLimit,q=a.isHscroll,r=a.isPressable,s=a.isStandalone,t=a.onPollOptionFacepilePress,u=a.outgoing;u=u===void 0?!1:u;a=a.xmaLayout;var v=b.defaultCtaType,w=b.xmaLayoutType!==void 0&&(i||(i=d("LSIntEnum"))).toNumber(b.xmaLayoutType)===c("MNLSXMALayoutType").SHARED_STACK;if(w)return j.jsx(c("MWRollCallXMAAttachmentItem.react"),{attachmentItem:e});return v==="xma_montage_share"?j.jsx(c("MWXMAAttachmentItemDefaultPreview.react"),{attachment:b,attachmentItem:e,cardWidth:g,getPlayableUrl:n,getPreviewUrlXMA:o,isPressable:r,isStandalone:s,xmaLayout:a}):j.jsxs(j.Fragment,{children:[j.jsx(c("MWXMAAttachmentItemHeader.react"),{attachment:b,getHeaderUrlXMA:m,xmaLayout:a}),j.jsx(c("MWXMAAttachmentItemDefaultPreview.react"),{attachment:b,attachmentItem:e,cardWidth:g,getPlayableUrl:n,getPreviewUrlXMA:o,isPressable:r,isStandalone:s,xmaLayout:a}),j.jsx(c("MWXMAAttachmentItemBody.react"),{attachment:b,attachmentItem:e,bodyLineLimit:f,ctaPopoverMenu:h,facepiles:k,getFaviconUrlXMA:l,getPlayableUrl:n,getPreviewUrlXMA:o,headlineLineLimit:p,isHscroll:q,isPressable:r,isStandalone:s,onPollOptionFacepilePress:t,outgoing:u,xmaLayout:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAPrivateAttachment.react",["fbt","ix","IconSource","MWXIcon.react","MWXMAAttachmentActionTrigger.react","MWXMAInformedTreatment.react","MWXText.react","emptyFunction","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={FBIcon:{marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",$$css:!0},description:{display:"x78zum5",flexDirection:"x1q0g3np",flexGrow:"x1iyjqo2",marginEnd:"xw3qccf",marginLeft:null,marginRight:null,$$css:!0},privateBackground:{alignItems:"x6s0dn4",backdropFilter:"x1qb2erx",background:"xjw5052",display:"x78zum5",flexDirection:"xdt5ytf",height:"x1dr9wh",justifyContent:"xl56j7k",textAlign:"x2b8uid",width:"xni59qk",$$css:!0},publicBackground:{alignItems:"x6s0dn4",backdropFilter:"x99fzhk",background:"xzudefj",display:"x78zum5",flexDirection:"xdt5ytf",height:"x1iu8u7t",justifyContent:"xl56j7k",textAlign:"x2b8uid",width:"xh8yej3",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",maxWidth:"x193iq5w",minHeight:"xisnujt",minWidth:"x1jzhcrs",width:"xh8yej3",$$css:!0},sensitiveContent:{alignItems:"x6s0dn4",backdropFilter:"x1qb2erx",backgroundColor:"x1av1boa",display:"x78zum5",flexDirection:"xdt5ytf",height:"x5yr21d",justifyContent:"xl56j7k",textAlign:"x2b8uid",width:"xni59qk",$$css:!0}};function a(a){var b=a.attachment,d=a.attachmentItem,e=a.getPreviewUrlXMA;e=e===void 0?c("emptyFunction"):e;a=a.isPressable;var f=b.defaultCtaType;e=e(b,d);if(b.gatingTitle!=null&&b.gatingType!=null)return k.jsxs(k.Fragment,{children:[k.jsx(c("MWXMAInformedTreatment.react"),{gatingTitle:b.gatingTitle,gatingType:b.gatingType,previewUrl:e,xstyle:l.sensitiveContent}),k.jsx(n,{attachment:b,attachmentItem:d,isPressable:a})]});return f==="xma_montage_share"?k.jsx(m,{attachment:b}):k.jsxs(k.Fragment,{children:[k.jsx(m,{attachment:b}),k.jsx(n,{attachment:b,attachmentItem:d,isPressable:a})]})}a.displayName=a.name+" [from "+f.id+"]";function m(a){a=a.attachment;var b=new(c("IconSource"))("FB",i("1423125"),32);a=a.defaultCtaType;if(a==="xma_montage_share")return k.jsx("div",{className:"x6s0dn4 x1qb2erx xjw5052 x78zum5 xdt5ytf x1dr9wh xl56j7k x2b8uid xni59qk",children:k.jsx("div",{className:"x14vqqas xq8finb xod5an3 x16n37ib",children:k.jsx(c("MWXIcon.react"),{icon:b})})});a=h._("__JHASH__EXLuTpYr-at__JHASH__");return k.jsxs("div",{className:"x6s0dn4 x99fzhk xzudefj x78zum5 xdt5ytf x1iu8u7t xl56j7k x2b8uid xh8yej3",children:[k.jsx("div",{className:"x14vqqas xq8finb xod5an3 x16n37ib",children:k.jsx(c("MWXIcon.react"),{icon:b})}),k.jsx(c("MWXText.react"),{color:"white",type:"bodyLink4",children:a})]})}m.displayName=m.name+" [from "+f.id+"]";function n(a){var b=a.attachment,d=a.attachmentItem;a=a.isPressable;return k.jsx(c("MWXMAAttachmentActionTrigger.react"),{attachment:b,attachmentItem:d,isPressable:a,children:k.jsx("div",{className:"x78zum5 x1q0g3np x1iyjqo2 xw3qccf",children:k.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2 xl56j7k x14vqqas xq8finb xod5an3 x16n37ib x193iq5w xisnujt x1jzhcrs xh8yej3",children:k.jsx(c("MWXText.react"),{type:"meta4",children:h._("__JHASH__N1DOsSnTIti__JHASH__")})})})})}n.displayName=n.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentItem.react",["I64","LSIntEnum","LSMediaUrlAttachment","LSMediaUrlAttachmentItem","MNLSXMALayoutType","MWCMThreadTypes.react","MWLSThreadDisplayContext","MWPBaseXMAAttachmentItem.react","MWPThreadCapabilitiesContext","MWXMAAttachmentActionTrigger.react","MWXMAAttachmentItemDefaultXMAContent.react","MWXMAPrivateAttachment.react","ReQL","ReQLSuspense","WAArmadilloXMA.pb","react","stylex","useReStore","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||(l=d("react")),n=l.useCallback,o={root:{display:"x78zum5",flexDirection:"xdt5ytf",height:"x5yr21d",$$css:!0},withBorder:{borderTopColor:"x1exxf4d",borderEndColor:"x1y71gwh",borderBottomColor:"x1nb4dca",borderStartColor:"xu1343h",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",$$css:!0}},p=new Set(["xma_rtc_video","xma_rtc_missed_video","xma_rtc_missed_group_video","xma_rtc_ended_video","xma_rtc_new_video_default","xma_rtc_new_video_from_fb_share","xma_rtc_new_video_from_fb_video_share","xma_rtc_new_video_from_cowatch_share","xma_rtc_cowatch_start_video"]),q=new Set(["xma_rtc_audio","xma_rtc_missed_audio","xma_rtc_missed_group_audio","xma_rtc_ended_audio","xma_rtc_new_audio_default","xma_rtc_new_audio_from_fb_share","xma_rtc_new_audio_from_fb_video_share","xma_rtc_new_audio_from_cowatch_share"]);function a(a){var b,e=a.attachment,g=a.attachmentItem,l=a.bodyLineLimit;l=l===void 0?3:l;var r=a.cardWidth;r=r===void 0?300:r;var s=a.ctaPopoverMenu,t=a.facepiles,u=a.getFaviconUrlXMA,v=a.getHeaderUrlXMA;v=v===void 0?d("LSMediaUrlAttachment").headerImageUrl:v;var w=a.getPlayableUrl,x=a.getPreviewUrlXMA,y=a.headlineLineLimit;y=y===void 0?3:y;var z=a.isHscroll,A=a.isStandalone,B=a.onPollOptionFacepilePress,C=a.outgoing;C=C===void 0?!1:C;a=a.xmaLayout;a=a===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:a;var D=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),E=D.rtcVideoCallEnabled;D=D.rtcVoiceCallEnabled;var F=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="Inbox",G=n(function(a,b){a=d("MWPBaseXMAAttachmentItem.react").getXMAAttachmentItemPreview({attachment:a,attachmentItem:b,preferLargePreview:F});switch(a.type){case"Video":case"Image":return a.url;case"Unsupported":return}},[F]),H=(h||(h=c("useReStore")))(),I=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(H.tables.threads,["threadType"]).getKeyRange(e.threadKey)},[H,e.threadKey],f.id+":119"),J=e.defaultCtaType;D=J!=null?q.has(J)&&!D||p.has(J)&&!E:!1;E=(J=e.shouldAutoplayVideo)!=null?J:!1;J=E&&e.attributionAppIcon!=null&&e.attributionAppName!=null;E=(k||(k=c("stylex")))(o.root,J?o.withBorder:!1);J=g.attachmentCta1Id!=null;var K=e.gatingType===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE.toString();I=I?d("MWCMThreadTypes.react").isUnjoinedCMThread(I.threadType):!1;b=(i||(i=d("I64"))).equal((b=e.xmaLayoutType)!=null?b:(i||(i=d("I64"))).zero,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").THREAD_SHORTCUT));var L=e.cta1Type==="xma_join_community"||e.cta1Type==="xma_join_community_chat";I=I&&b||D||L;return m.jsx(c("MWXMAAttachmentActionTrigger.react"),{attachment:e,attachmentItem:g,isPressable:!J&&!I,children:m.jsx("div",{className:E,"data-testid":void 0,children:K?m.jsx(c("MWXMAPrivateAttachment.react"),{attachment:e,attachmentItem:g,getPreviewUrlXMA:(b=x)!=null?b:G,isPressable:J&&!I}):m.jsx(c("MWXMAAttachmentItemDefaultXMAContent.react"),{attachment:e,attachmentItem:g,bodyLineLimit:l,cardWidth:r,ctaPopoverMenu:s,facepiles:t,getFaviconUrlXMA:(D=u)!=null?D:function(a,b){return(a=(a=d("LSMediaUrlAttachment").faviconUrl(a))!=null?a:d("LSMediaUrlAttachmentItem").faviconUrl(b))!=null?a:""},getHeaderUrlXMA:v,getPlayableUrl:(L=w)!=null?L:G,getPreviewUrlXMA:(E=x)!=null?E:G,headlineLineLimit:y,isHscroll:z,isPressable:J&&!I,isStandalone:A,onPollOptionFacepilePress:B,outgoing:C,xmaLayout:a})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentHorizontalItems.react",["fbt","CometHScroll.react","I64","MWXMAAttachmentItem.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||d("react"),m=284,n={cardWrapper:{backgroundColor:"x2bj2ny",height:"x5yr21d",width:"xh8yej3",$$css:!0},flexibleContainer:{"@media (max-width: 1439px)_maxWidth":"x1bu0bv6","@media (min-width: 1440px)_maxWidth":"x6vbh5p",$$css:!0},spacer:{marginTop:"xvijh9v",$$css:!0},topElement:{borderTopEndRadius:"x13lgxp2",borderTopStartRadius:"x168nmei",$$css:!0}};function a(a){var b=a.attachmentItems,e=a.fullWidthContainer;e=e===void 0?!1:e;var f=a.hasText,g=f===void 0?!1:f,k=a.xstyle,o=a.cardWidth,p=babelHelpers.objectWithoutPropertiesLoose(a,["attachmentItems","fullWidthContainer","hasText","xstyle","cardWidth"]);return l.jsx("div",{className:(i||(i=c("stylex")))(!e&&n.flexibleContainer),children:l.jsx(d("CometHScroll.react").Container,{accessibilityLabel:h._("__JHASH__grvWiY5ySlo__JHASH__"),cardWidth:o!=null?{type:"fixed",width:o}:{minWidth:m,type:"responsive"},gap:8,children:b.map(function(a,b){return l.jsx(d("CometHScroll.react").Child,{expanding:!0,children:l.jsx("div",{className:"x2bj2ny x5yr21d xh8yej3",children:l.jsx("div",{className:(i||(i=c("stylex")))(k,b===0&&g&&n.topElement,g&&n.spacer),children:l.jsx(c("MWXMAAttachmentItem.react"),babelHelpers["extends"]({},p,{attachmentItem:a,cardWidth:o,isStandalone:!1}))})})},(j||(j=d("I64"))).to_string(a.attachmentIndex))})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPResponsiveImageGrid.react",["BaseImage.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={aspectRatioWrapper:{height:"xqtp20y",marginStart:"x12mruv9",marginLeft:null,marginRight:null,marginTop:"xr9ek0c",paddingBottom:"x1vrad04",position:"x1n2onr6",$$css:!0},grid:{display:"x78zum5",flexWrap:"x1a02dak",marginStart:"x8182xy",marginLeft:null,marginRight:null,marginTop:"x1kgmq87",$$css:!0},gridImage:{bottom:"x1ey2m1c",end:"xds687c",left:null,right:null,height:"x5yr21d",objectFit:"xl1xv1r",objectPosition:"x115dhu7",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",width:"xh8yej3",$$css:!0},gridItem:{flexBasis:"x1yu6fn4",$$css:!0}};function a(a){a=a.urls;return i.jsx("ul",{className:"x78zum5 x1a02dak x8182xy x1kgmq87",children:a.map(function(a){return i.jsx("li",{className:"x1yu6fn4",children:i.jsx("div",{className:"xqtp20y x12mruv9 xr9ek0c x1vrad04 x1n2onr6",children:i.jsx(c("BaseImage.react"),{src:a,xstyle:j.gridImage})})},a)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPXMAIgProfile.react",["MWPResponsiveImageGrid.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo,k=function(a){a=a.previewUrl;return a};function a(a){var b=a.attachmentItems;a=j(function(){return b.map(k).filter(Boolean)},[b]);return i.jsx("div",{className:"x193iq5w xgqtt45 xdzyupr",children:i.jsx(c("MWPResponsiveImageGrid.react"),{urls:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentItemIgProfile.react",["LSMediaUrlAttachment","MWPXMAIgProfile.react","MWXMAAttachmentActionTrigger.react","MWXMAAttachmentItemHeader.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var b=a.attachment,e=a.attachmentItems,f=a.getHeaderUrlXMA;f=f===void 0?d("LSMediaUrlAttachment").headerImageUrl:f;a=a.xstyle;var g=e[0];return j.jsx(c("MWXMAAttachmentActionTrigger.react"),{attachment:b,attachmentItem:g,isPressable:!0,children:j.jsxs("div",{className:(h||(h=c("stylex")))(a),"data-testid":void 0,children:[j.jsx(c("MWXMAAttachmentItemHeader.react"),{attachment:b,getHeaderUrlXMA:f}),j.jsx(c("MWPXMAIgProfile.react"),{attachmentItems:e})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRollCallTimerPill.react",["fbt","I64","MWXText.react","react","useInterval"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useMemo,m=b.useState;function n(a){var b=1e3,c=b*60,d=c*60,e=d*24;a=a;var f=Math.floor(a/e);a-=f*e;e=Math.floor(a/d);a-=e*d;d=Math.floor(a/c);a-=d*c;c=Math.floor(a/b);a-=c*b;return{days:f,hours:e,minutes:d,seconds:c}}function a(a){var b=a.attachment;a=l(function(){var a;return(j||(j=d("I64"))).to_float((a=b.countdownTimestampMs)!=null?a:(j||(j=d("I64"))).zero)},[b.countdownTimestampMs]);var e=m(Date.now()),f=e[0],g=e[1];e=f>a;c("useInterval")(function(){g(Date.now())},e?6e4:1e3,[g]);if(!e){e=n(a-f);var i=e.minutes;e=e.seconds;i=("0"+i).slice(-2)+":"+("0"+e).slice(-2)}else if(b.cta1Type==="xma_roll_call_open_viewer")i=h._("__JHASH__iEcmesFoHMR__JHASH__");else{e=n(f-a);f=e.days;a=e.hours;e=e.minutes;f>30?i=h._("__JHASH__FgpGUEY9N0G__JHASH__"):f>0?i=h._("__JHASH__UZjF4IaHC-f__JHASH__",[h._param("days",f)]):a>0?i=h._("__JHASH__4LZO7x78s0P__JHASH__",[h._param("hours",a)]):i=h._("__JHASH__JXYYWJwIx9x__JHASH__",[h._param("minutes",Math.max(1,e))])}return k.jsx("div",{className:"x1h0vfkc x1a2cdl4 xnhgr82 x1qt0ttw xgk8upj x9f619 x78zum5 xdt5ytf x1qx5ct2 xl56j7k xkrivgy x1gryazu x1sxyh0 xurb0ha xeq5yr9",children:k.jsx(c("MWXText.react"),{numberOfLines:1,type:"meta4",children:i})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentSharedStackFrontCard.react",["I64","LSAuthorityLevel","LSIntEnum","MWChatPollFacepile.react","MWLSThread","MWRollCallTimerPill.react","MWXMAAttachmentItemCtaButton.react","MWXSpinner.react","MWXText.react","MessengerWebUXLoggerXMAEventLoggingImpl","ReQL","ReQLSuspense","getLSMediaAttachmentAvatarViewUrlList","react","stylex","useCurrentDisplayMode","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=j||d("react"),n={ctaContainer:{marginTop:"x1xmf6yo",$$css:!0},facepileContainer:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",$$css:!0},frontCard:{backgroundColor:"x9bbmet",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",boxShadow:"x28gwc1",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",height:"x5yr21d",overflowX:"xw2csxc",overflowY:"x1odjw0f",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",width:"xh8yej3",$$css:!0},frontCardDarkMode:{boxShadow:"xdxoyvu",$$css:!0},titleContainer:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",marginTop:"x1xmf6yo",$$css:!0}};function a(a){var b=a.attachment;a=a.xstyle;var e=c("getLSMediaAttachmentAvatarViewUrlList")(b),g=b.countdownTimestampMs;g=g!=null&&!(l||(l=d("I64"))).equal(g,(l||(l=d("I64"))).zero)?m.jsx(c("MWRollCallTimerPill.react"),{attachment:b}):null;var j=(h||(h=c("useReStore")))(),o=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(j.tables.messages.index("messageId")).getKeyRange(b.messageId)},[j,b.messageId],f.id+":78"),p=d("MWLSThread").useThread(b.threadKey,function(a){return a.threadType});o=d("MessengerWebUXLoggerXMAEventLoggingImpl").useXMAEventsImpressionLoggerRef({attachment:b,clickCategory:1,message:o,threadType:p});p=(k||(k=d("LSIntEnum"))).toNumber(b.authorityLevel)===c("LSAuthorityLevel").OPTIMISTIC;var q=c("useCurrentDisplayMode")()==="dark";return m.jsxs("div",{className:(i||(i=c("stylex")))(n.frontCard,q&&n.frontCardDarkMode,a),ref:o,children:[g,m.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x1xmf6yo",children:m.jsx(c("MWXText.react"),{align:"center",numberOfLines:3,type:"headlineEmphasized4",children:b.titleText})}),m.jsx("div",{className:"xr1yuqi xkrivgy x4ii5y1 x1gryazu",children:p?m.jsx(c("MWXSpinner.react"),{color:"disabled",size:24}):m.jsx(c("MWChatPollFacepile.react"),{contacts:e.map(function(a){return{name:void 0,profile_picture_url:a}}),direction:"reversed",gap:"negative",size:"large"})}),m.jsx("div",{className:"x1xmf6yo",children:b.attachmentCta1Id!=null&&b.cta1Title!=null&&b.cta1Type!=null?m.jsx(c("MWXMAAttachmentItemCtaButton.react"),{attachmentId:b.attachmentFbid,ctaId:b.attachmentCta1Id,messageId:b.messageId,threadKey:b.threadKey,title:b.cta1Title,type:b.cta1Type}):null})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentSharedStackItem.react",["MWXMAAttachmentItem.react","MWXMAAttachmentSharedStackConstants","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={stackItem:{borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",bottom:"x1ey2m1c",boxShadow:"x28gwc1",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",start:"x17qophe",left:null,right:null,$$css:!0}};function a(a){var b=a.attachment,e=a.attachmentItem,f=a.index,g=a.totalItems;a=a.xstyle;var i=f%2===0?-4:4,l=0,m=0;switch(f){case 0:l=0;m=-12;break;case 1:l=58;m=-20;break;case 2:l=34;m=-28;break}return(b.defaultCtaType==="xma_prompt_open_viewer_for_text"||b.defaultCtaType==="xma_roll_call_open_viewer")&&e.previewUrl===void 0&&e.titleText===void 0?null:j.jsx("div",{className:(h||(h=c("stylex")))(k.stackItem,a),style:{height:d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT,transform:"rotate("+i+"deg) translateX("+l+"px) translateY("+m+"px)",width:d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH,zIndex:g-f},children:j.jsx(c("MWXMAAttachmentItem.react"),{attachment:b,attachmentItem:e,cardWidth:d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH,isHscroll:!1,isStandalone:!1})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentSharedStackLayout.react",["MWXMAAttachmentSharedStackConstants","MWXMAAttachmentSharedStackItem.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={centered:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",$$css:!0},stackContainer:{position:"x1n2onr6",$$css:!0},stackItem:{bottom:"x1ey2m1c",position:"x10l6tqk",start:"x17qophe",left:null,right:null,$$css:!0},stackItemFront:{start:"x3f4u1h",left:null,right:null,$$css:!0}};function a(a){var b=a.attachment,e=a.attachmentItems,f=a.centered;f=f===void 0?!1:f;var g=a.children;a=a.xstyle;var i=e.slice(0,3);e=d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT+32;var l=d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH+64;return j.jsxs("div",{className:(h||(h=c("stylex")))(k.stackContainer,a,f&&k.centered),style:{height:e,width:l},children:[i.map(function(a,d){return j.jsx(c("MWXMAAttachmentSharedStackItem.react"),{attachment:b,attachmentItem:a,index:d,totalItems:i.length},d)}),j.jsx("div",{className:"x1ey2m1c x10l6tqk x3f4u1h",style:{height:d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT,width:d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH,zIndex:i.length+1},children:g})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentSubthreadShortcutLayout.react",["MWPColorUtils","gkx","react","stylex","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={centered:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",$$css:!0},incoming:{backgroundColor:"x1vtvx1t",$$css:!0}};function a(a){a.centered;var b=a.children,e=a.outgoing;a=a.xstyle;var f=c("useMWPThreadTheme")(),g=c("gkx")("24147");e=e?{backgroundColor:d("MWPColorUtils").int64ToHex(f.threadTheme.fallbackColor),color:"white"}:void 0;return j.jsx("div",{className:(h||(h=c("stylex")))(a,k.centered,k.incoming),style:g?e:null,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentVerticalLayout.react",["react","react-strict-dom","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={centered:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",$$css:!0},connectBottomIncoming:{borderBottomStartRadius:"x10y3i5r",$$css:!0},connectBottomOutgoing:{borderBottomEndRadius:"xrt01vj",$$css:!0},connectTop:{borderTopEndRadius:"x13lgxp2",borderTopStartRadius:"x168nmei",$$css:!0},connectTopIncoming:{borderTopStartRadius:"x1lcm9me",$$css:!0},connectTopOutgoing:{borderTopEndRadius:"x1yr5g0i",$$css:!0}};function a(a){var b=a.centered;b=b===void 0?!1:b;var c=a.children,e=a.connectBottom,f=a.connectTop,g=a.outgoing,h=a.xmaLayout;a=a.xstyle;return i.jsx(d("react-strict-dom").html.div,{style:[a,f&&h!==d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT&&j.connectTop,f&&g&&j.connectTopOutgoing,f&&!g&&j.connectTopIncoming,e&&g&&j.connectBottomOutgoing,e&&!g&&j.connectBottomIncoming,b&&j.centered],children:c})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachment.react",["I64","Int64Hooks","LSIntEnum","LSXmaContentType","MNLSXMALayoutType","MWChatTypingIndicator.react","MWLSThreadDisplayContext","MWXMAAttachmentHorizontalItems.react","MWXMAAttachmentItem.react","MWXMAAttachmentItemIgProfile.react","MWXMAAttachmentSharedStackFrontCard.react","MWXMAAttachmentSharedStackLayout.react","MWXMAAttachmentSubthreadShortcutLayout.react","MWXMAAttachmentVerticalLayout.react","MWXMessageBubble.react","ReQL","ReQLSuspense","gkx","react","recoverableViolation","stylex","useReStore","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||d("react");function n(a){return{attachmentCta1Id:a.attachmentCta1Id,attachmentCta2Id:a.attachmentCta2Id,attachmentCta3Id:a.attachmentCta3Id,attachmentFbid:a.attachmentFbid,attachmentIndex:a.attachmentIndex,cta1Title:a.cta1Title,cta1Type:a.cta1Type,cta2Title:a.cta2Title,cta2Type:a.cta2Type,cta3Title:a.cta3Title,cta3Type:a.cta3Type,dashManifest:a.dashManifest,defaultActionEnableExtensions:!1,defaultActionUrl:void 0,defaultButtonType:void 0,defaultCtaId:a.defaultCtaId,defaultCtaTitle:a.defaultCtaTitle,defaultCtaType:a.defaultCtaType,defaultWebviewHeightRatio:void 0,faviconUrl:a.faviconUrl,faviconUrlExpirationTimestampMs:a.faviconUrlExpirationTimestampMs,faviconUrlFallback:a.faviconUrlFallback,imageUrl:a.imageUrl,messageId:a.messageId,originalPageSenderId:a.originalPageSenderId,playableUrl:a.playableUrl,playableUrlExpirationTimestampMs:a.playableUrlExpirationTimestampMs,playableUrlFallback:a.playableUrlFallback,playableUrlMimeType:a.playableUrlMimeType,previewHeight:a.previewHeight,previewUrl:a.previewUrl,previewUrlExpirationTimestampMs:a.previewUrlExpirationTimestampMs,previewUrlFallback:a.previewUrlFallback,previewUrlLarge:a.previewUrlLarge,previewUrlMimeType:a.previewUrlMimeType,previewWidth:a.previewWidth,subtitleText:a.subtitleText,threadKey:a.threadKey,titleText:a.titleText}}var o={cardWidth:{maxWidth:"xw5ewwj",width:"xh8yej3",$$css:!0},cardWidthChatTab:{maxWidth:"x1i5r0r9",width:"xh8yej3",$$css:!0},outgoing_xma:{marginStart:"x1gryazu",marginLeft:null,marginRight:null,$$css:!0}},p={card:{borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",verticalAlign:"xxymvpz",$$css:!0},opaqueCard:{backgroundColor:"x1xr0vuk",$$css:!0},rootForHScrollInChatTab:{maxWidth:"xaka53j",$$css:!0}};function a(a){var b=a.attachment,e=a.bodyLineLimit,g=a.cardWidth,l=a.connectBottom,q=a.connectTop,r=a.ctaPopoverMenu,s=a.facepiles,t=a.fullWidthContainer;t=t===void 0?!1:t;var u=a.getFaviconUrlXMA,v=a.getHeaderUrlXMA,w=a.getPlayableUrl,x=a.getPreviewUrlXMA,y=a.hasText;y=y===void 0?!1:y;var z=a.headlineLineLimit,A=a.onPollOptionFacepilePress,B=a.outgoing,C=a.xmaLayout;C=C===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:C;a=a.xstyle;var D=(h||(h=c("useReStore")))(),E=b.attachmentFbid,F=b.attachmentType,G=b.cta1Type,H=b.defaultCtaType,I=b.isBorderless,J=b.xmaContentType,K=b.xmaLayoutType,L=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(D.tables.attachment_items).getKeyRange(E)},[E,D],f.id+":155"),M=d("Int64Hooks").useMemoInt64(function(){return K!=null?[(j||(j=d("I64"))).equal(K,(k||(k=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").HSCROLL)),(j||(j=d("I64"))).equal(K,(k||(k=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").XCENTER)),(j||(j=d("I64"))).equal(K,(k||(k=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").SINGLE)),(j||(j=d("I64"))).equal(K,(k||(k=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").SHARED_STACK)),(j||(j=d("I64"))).equal(K,(k||(k=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").THREAD_SHORTCUT)),(j||(j=d("I64"))).equal(K,(k||(k=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").STANDARD_DXMA))]:[!1,!1,!1]},[K]),N=M[0],O=M[1],P=M[2],Q=M[3],R=M[4];M=M[5];var S=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),T=null;J!=null&&(j||(j=d("I64"))).equal(J,(k||(k=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").MSG_RECEIVER_FETCH))&&c("gkx")("23991")?T=m.jsx(c("MWXMessageBubble.react"),{align:"left",color:"incoming",connectBottom:!1,connectTop:!1,precedesXMA:!1,children:m.jsx(c("MWChatTypingIndicator.react"),{})}):Q?T=m.jsx(c("MWXMAAttachmentSharedStackLayout.react"),{attachment:b,attachmentItems:L,children:m.jsx(c("MWXMAAttachmentSharedStackFrontCard.react"),{attachment:b})}):R?T=m.jsx(c("MWXMAAttachmentSubthreadShortcutLayout.react"),{outgoing:B,xstyle:p.card,children:m.jsx(c("MWXMAAttachmentItem.react"),{attachment:b,attachmentItem:L[0],bodyLineLimit:e,cardWidth:g,ctaPopoverMenu:r,facepiles:s,getFaviconUrlXMA:u,getHeaderUrlXMA:v,getPlayableUrl:w,getPreviewUrlXMA:x,headlineLineLimit:z,isHscroll:N,isStandalone:!0,outgoing:B,xmaLayout:C})}):N?T=m.jsx(c("MWXMAAttachmentHorizontalItems.react"),{attachment:b,attachmentItems:L,bodyLineLimit:e,cardWidth:g,ctaPopoverMenu:r,facepiles:s,fullWidthContainer:t,getFaviconUrlXMA:u,getHeaderUrlXMA:v,getPlayableUrl:w,getPreviewUrlXMA:x,hasText:y,headlineLineLimit:z,isHscroll:N,xmaLayout:C,xstyle:[p.card,p.opaqueCard]}):P&&L.length===6?T=m.jsx(c("MWXMAAttachmentVerticalLayout.react"),{centered:!0,connectBottom:l,connectTop:q,outgoing:B,xmaLayout:C,xstyle:[p.card,p.opaqueCard],children:m.jsx(c("MWXMAAttachmentItemIgProfile.react"),{attachment:b,attachmentItems:L,getHeaderUrlXMA:v})}):O&&L.length===1?T=m.jsx(c("MWXMAAttachmentVerticalLayout.react"),{centered:!0,connectBottom:l,connectTop:q,outgoing:B,xmaLayout:C,xstyle:[p.card,p.opaqueCard],children:m.jsx(c("MWXMAAttachmentItem.react"),{attachment:b,attachmentItem:L[0],bodyLineLimit:e,cardWidth:g,ctaPopoverMenu:r,facepiles:s,getFaviconUrlXMA:u,getHeaderUrlXMA:v,getPlayableUrl:w,getPreviewUrlXMA:x,headlineLineLimit:z,isHscroll:N,isStandalone:!0,onPollOptionFacepilePress:A,xmaLayout:C})}):L.length===0?T=m.jsx(c("MWXMAAttachmentVerticalLayout.react"),{connectBottom:l,connectTop:q,outgoing:B,xmaLayout:C,xstyle:[p.card,I!==!0&&p.opaqueCard],children:m.jsx(c("MWXMAAttachmentItem.react"),{attachment:b,attachmentItem:n(b),bodyLineLimit:e,cardWidth:g,ctaPopoverMenu:r,facepiles:s,getFaviconUrlXMA:u,getHeaderUrlXMA:v,getPlayableUrl:w,getPreviewUrlXMA:x,headlineLineLimit:z,isHscroll:N,isStandalone:!0,xmaLayout:C})}):L.length===1?T=m.jsx(c("MWXMAAttachmentVerticalLayout.react"),{connectBottom:l,connectTop:q,outgoing:B,xmaLayout:C,xstyle:[p.card,p.opaqueCard],children:m.jsx(c("MWXMAAttachmentItem.react"),{attachment:b,attachmentItem:L[0],bodyLineLimit:e,cardWidth:g,ctaPopoverMenu:r,facepiles:s,getFaviconUrlXMA:u,getHeaderUrlXMA:v,getPlayableUrl:w,getPreviewUrlXMA:x,headlineLineLimit:z,isHscroll:N,isStandalone:!0,outgoing:B,xmaLayout:C})}):c("recoverableViolation")("Unknown combination of XMA items and layout. n Attachment Items: "+String(L.length)+", XMA Layout Type: "+(K==null?"na":(j||(j=d("I64"))).to_string(K))+", Attachment Type: "+(j||(j=d("I64"))).to_string(F)+",  XMA content Type: "+(J==null?"na":(j||(j=d("I64"))).to_string(J))+", default CTA type: "+(H==null?"na":H)+", CTA 1 type: "+(G==null?"na":G),"messenger_web_product",void 0,{trackOnly:!0});Q=C===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT?[o.cardWidth,B&&o.outgoing_xma]:o.cardWidth;R=S==="ChatTab";t=M?R?o.cardWidthChatTab:o.cardWidth:a;return m.jsx("div",{className:(i||(i=c("stylex")))(N&&R&&p.rootForHScrollInChatTab,!N&&!O&&Q,t),children:T})}a.displayName=a.name+" [from "+f.id+"]";g.xmaCardStyles=o;g.MWXMAAttachment=a}),98);
__d("MWMessageListAttachmentContainer.react",["CometErrorBoundary.react","MWChatBubbleEmphasisRing.react","MWLSThreadDisplayContext","MWMessageListAttachment.react","MWPMessageIsReply","MWPMessageListAttachment.react","MWV2ChatFileV2.react","MWV2ChatImagesGrid.react","MWV2UnsupportedAttachment.react","MWXMAAttachment.react","MWXMessageBubble.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectBottom,e=a.connectTop,f=a.hasEmphasisRing;f=f===void 0?!1:f;var g=a.hasText,h=g===void 0?!1:g,j=a.message,k=a.navigateToRouteForMediaViewer,l=a.outgoing,m=a.xstyle;g=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();var n=g==="ChatTab"?180:void 0;return i.jsx(c("MWPMessageListAttachment.react"),{connectBottom:b,connectTop:e,message:j,renderAudioAttachment:function(a){return i.jsx(d("MWMessageListAttachment.react").MWMessageListAttachmentAudio,{attachment:a,isReply:c("MWPMessageIsReply")(j),outgoing:l})},renderEmphasisRing:f?function(a,b){return i.jsx(c("MWChatBubbleEmphasisRing.react"),{connectBottom:!1,connectTop:e,hasXMA:a,outgoing:l,precedesXMA:!1,children:b})}:void 0,renderEphemeralMediaAttachment:function(){return null},renderFileAttachment:function(a){return i.jsx(c("MWXMessageBubble.react"),{align:l?"right":"left",color:"incoming",connectBottom:b,connectTop:e,style:{padding:0},children:i.jsx(c("MWV2ChatFileV2.react"),{attachment:a})})},renderImageAttachment:function(c,b,a,e){return i.jsx(d("MWMessageListAttachment.react").MWMessageListAttachmentImage,{attachment:c,connectBottom:a,connectTop:b,message:j,navigateToRouteForMediaViewer:k,outgoing:l,renderUnsupportedAttachment:e})},renderImageGrid:function(a){return i.jsx(c("MWV2ChatImagesGrid.react"),{attachments:a})},renderStickerAttachment:function(a){return i.jsx(d("MWMessageListAttachment.react").MWMessageListAttachmentSticker,{attachment:a})},renderUnsupportedAttachment:function(a){return i.jsx(c("MWXMessageBubble.react"),{align:l?"right":"left",color:"incoming",connectBottom:b,connectTop:e,children:i.jsx(c("MWV2UnsupportedAttachment.react"),{attachment:a})})},renderVideoAttachment:function(a){return i.jsx(d("MWMessageListAttachment.react").MWMessageListAttachmentVideo,{attachment:a,connectTop:e,message:j,navigateToRouteForMediaViewer:k,outgoing:l})},renderXMAAttachment:function(a){return i.jsx(c("CometErrorBoundary.react"),{fallback:function(a){return i.jsx(d("MWMessageListAttachment.react").MWMessageListAttachmentError,{connectBottom:b,connectTop:e,xstyle:m})},children:i.jsx(d("MWXMAAttachment.react").MWXMAAttachment,{attachment:a,cardWidth:n,connectBottom:b,connectTop:e,hasText:h,outgoing:l,xstyle:m})})}})}a.displayName=a.name+" [from "+f.id+"]";b=i.memo(a);g["default"]=b}),98);
__d("MWMessageCellKeyCommands.react",["CometComponentWithKeyCommands.react","MWV2MessageRowActionsContext.react","cometGetKeyCommandConfig","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useMemo;function a(a){var b=a.children;a.message;a=b;b=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext();var e=b.forwardMessage,f=b.openReactionsMenu,g=b.removeMessage,h=b.replyToMessage,l=j(function(){return f.current()},[f]),m=j(function(){return h.current()},[h]),n=j(function(){return e.current()},[e]),o=j(function(){return g.current()},[g]);b=k(function(){var a,b=[],c=(a=d("cometGetKeyCommandConfig")).getCometAndGeminiKeyCommandConfig("chats","likeMessage",l);b.push(c);c=a.getCometAndGeminiKeyCommandConfig("chats","replyToMessage",m);b.push(c);c=a.getCometAndGeminiKeyCommandConfig("chats","forwardMessage",n);b.push(c);c=a.getCometAndGeminiKeyCommandConfig("chats","removeMessage",o);b.push(c);return b},[l,m,n,o]);return i.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:b,xstyle:!1,children:a})}a.displayName=a.name+" [from "+f.id+"]";e=a;g.keyCommands=e}),98);
__d("MWCombineThemeConfigs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{dark:Object.assign(a.dark,b.dark),light:Object.assign(a.light,b.light),type:b.type}}f.combine=a}),66);
__d("MWMessageDeliveryStatus",["fbt","I64","LSIntEnum","getFBTSafeGenderFromGenderConst","getMessengerPreciseTimestamp","intlList","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a){if(a.length!==1)return{heads:a,type:"MultipleSeenHeads"};a=a[0];return{head:a,type:"SingleSeenHead"}}function b(a,b){return{delivered:b,heads:a,type:"DeliveredAndRead"}}function e(a){return{count:a,type:"SeenCount"}}function k(a){return a.timestamp>0?h._("__JHASH__i65FoHjBJBT__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender)),h._param("seen time",c("getMessengerPreciseTimestamp")(a.timestamp))]):h._("__JHASH__o0y2JESDXU1__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))])}function l(a,b){if(a.length===0)return"";if(b)return h._("__JHASH__xJFzJjmgrii__JHASH__").toString();b=a.map(function(a){return h._("__JHASH__anoMlIo0TA0__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))])});a=c("intlList")(b,c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA);return h._("__JHASH__rtgGiNEWfHK__JHASH__",[h._param("full name",a)]).toString()}function m(a){a=c("intlSummarizeNumber")(a);return h._("__JHASH___KIWePVuuHb__JHASH__",[h._param("seen count",a)]).toString()}var n={delivered:h._("__JHASH__DGTdcv4yxEO__JHASH__"),error:h._("__JHASH__HWY7OcPbAjW__JHASH__"),loading:h._("__JHASH__ge1hq8iGlfw__JHASH__"),retriableError:h._("__JHASH__VG5ajSXV9DG__JHASH__"),sending:h._("__JHASH__-KPam8KdjJ8__JHASH__"),sent:h._("__JHASH__FdnMQ3ayYbi__JHASH__")};function f(a){switch(a.type){case"Sending":return n.sending;case"Sent":case"Delivered":return n.sent;case"Error":return n.error;case"SingleSeenHead":return k(a.head);case"NoneStatus":case"MultipleSeenHeads":return"";case"DeliveredAndRead":return l(a.heads,a.delivered);case"SeenCount":return m(a.count);case"Loading":return n.loading;case"RetriableError":return n.retriableError}}function o(a){switch(a.type){case"Sending":return n.sending;case"Sent":return n.sent;case"Delivered":return n.delivered;case"Error":return n.error;case"SingleSeenHead":return k(a.head);case"DeliveredAndRead":return l(a.heads,a.delivered);default:return""}}function p(a){if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(1)))return{type:"Sending"};else if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(2))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(6)))return{type:"Sent"};else if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(4))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(5)))return{type:"Error"};else return{type:"NoneStatus"}}function q(a,b,c){var e=p(a.sendStatusV2);if((i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(4))||(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(5))||(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(1)))return e;else if(!c&&(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(2)))return{type:"NoneStatus"};else if((i||(i=d("I64"))).ge(b,a.timestampMs))return{type:"Delivered"};else return e}function r(a){return["SingleSeenHead","Sending","MultipleSeenHeads","Error"].includes(a.type)}g.seenHead=a;g.deliveredAndRead=b;g.seenCount=e;g.getSingleSeenHead=k;g.getSeenCount=m;g.Titles=n;g.getBroadcastStatusTitle=f;g.getStatusTitle=o;g.getFromSendStatus=p;g.getDeliveryStatusForMessageSentByYou=q;g.isAlwaysShownStatus=r}),98);
__d("MWPBaseMessageListRowCountdown.react",["MAWEphemeralMessageTimer.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={moveUpToAccountForReactions:{paddingBottom:"x1hhzuzn",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1c4vz4f",justifyContent:"xl56j7k",marginBottom:"x4ii5y1",marginTop:"xr1yuqi",paddingStart:"xurb0ha",paddingLeft:null,paddingRight:null,paddingEnd:"x1sxyh0",zIndex:"x1vjfegm",$$css:!0}};function a(a){var b=a.ariaHidden;b=b===void 0?!1:b;var d=a.ephemeralDurationInSec,e=a.expirationTimestamp;a=a.hasReactions;return j.jsx("div",{"aria-hidden":b,className:(h||(h=c("stylex")))(k.root,a?k.moveUpToAccountForReactions:!1),children:j.jsx(c("MAWEphemeralMessageTimer.react"),{ephemeralDurationInSec:d,expirationTimestamp:e})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPMessageParsingUtils",["I64","LSBitFlag","LSIntEnum","LSMessageReplySourceTypeV2","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=280,k=3e5;function l(a){return!c("isStringNullOrEmpty")(a.text)}function m(a){a=a.replySourceTypeV2;return a==null?!1:!(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD))}function n(a){a=a.replySourceTypeV2;return a==null?!1:(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD))}function o(a){return((a=a.text)!=null?a:"").length>j}var p=[128,256,4096,4,512];function q(a){return a.isAdminMessage||p.some(function(b){return d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(b),a.displayedContentTypes)})||o(a)}function r(a,b){if(b===void 0)return!0;var c=Math.abs((h||(h=d("I64"))).to_float(a.timestampMs)-h.to_float(b.timestampMs))>k,e=n(a),f=h.equal(a.senderId,b.senderId);if(b.isUnsent||a.isUnsent||m(a)||!f||c||e||q(a))return!0;else return q(b)}function s(a,b){return b==null||r(a,b)}function t(a,b){return b==null||r(b,a)}function a(a,b,c){return c==="below"?l(a)?!0:!s(a,b):!1}function b(a,b,c){if(c==="below")return!t(a,b);else if(t(a,b))return!1;else return l(a)}e={shouldConnectBottom:b,shouldConnectTop:a};g.hasText=l;g.isReplyToSomething=m;g.isForwarded=n;g.isLongText=o;g.shouldBeStandalone=q;g.isInDifferentGroup=r;g.isStartOfGroup=s;g.isEndOfGroup=t;g.MessageWithAttachments=e}),98);
__d("MWPBaseMessageListRow.react",["BaseThemeProvider.react","I64","LSIntEnum","MWCombineThemeConfigs","MWMessageDeliveryStatus","MWPBaseMessageListRowCountdown.react","MWPMessageIsReply","MWPMessageListColumn.react","MWPMessageParsingUtils","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i,n=m.useCallback,o=m.useMemo;function a(a){var b=a.children,c=a.message;a=a.prevMessage;c=d("MWPMessageParsingUtils").isStartOfGroup(c,a);return c?b():null}a.displayName=a.name+" [from "+f.id+"]";function p(a){return(j||(j=d("I64"))).equal(j.and_(a.displayedContentTypes,(k||(k=d("LSIntEnum"))).ofNumber(2048)),j.zero)}var q={container:{display:"x78zum5",$$css:!0},inner:{display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",$$css:!0},innerOutgoing:{flexDirection:"x15zctf7",$$css:!0},multiReact:{zIndex:"x1vjfegm",$$css:!0},multiReactIncoming:{marginStart:"x1liizu2",marginLeft:null,marginRight:null,$$css:!0},multiReactOutgoing:{display:"x78zum5",flexDirection:"x15zctf7",marginEnd:"xw3qccf",marginLeft:null,marginRight:null,marginStart:"x1mh8g0r",$$css:!0},multiReactWrapper:{display:"x78zum5",flexDirection:"xdt5ytf",position:"x1n2onr6",$$css:!0}};function b(a){var b=a.children,e=a.hasReactions,f=a.message,g=a.outgoing,i=a.renderGenAIFeedbackActions,j=a.renderGutterItem,k=a.renderMessageActions,m=a.renderMultiReactions;a=a.renderProfile;var n=c("MWPMessageIsReply")(f),o=f.ephemeralExpirationTs,r=f.ephemeralDurationInSec,s=f.isUnsent,t=d("MWMessageDeliveryStatus").getFromSendStatus(f.sendStatusV2).type==="Sending";m=m&&m();var u=m!=null;a=l.jsxs("div",{className:"x78zum5",role:"none",children:[l.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnProfile,{children:[g?null:a(),e&&!u?l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:18}):null]}),l.jsxs("div",{className:(h||(h=c("stylex")))(q.inner,g?q.innerOutgoing:!1),"data-testid":void 0,role:"none",children:[l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnBubble,{makeSpaceForActions:p(f),paint:!g||n,children:b}),o!=null&&!s?l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:l.jsx(c("MWPBaseMessageListRowCountdown.react"),{ephemeralDurationInSec:r,expirationTimestamp:o,hasReactions:e})}):null,i!=null?l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:t?null:i()}):null,p(f)?l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:t?null:k()}):null,l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnHorizontalSpacer,{})})]}),l.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:[j(),e?l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:18}):null]})]});return u?l.jsxs("div",{className:"x78zum5 xdt5ytf x1n2onr6",role:"none",children:[a,l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:l.jsx("div",{className:(h||(h=c("stylex")))(q.container,q.multiReact,g?q.multiReactOutgoing:q.multiReactIncoming),children:m})})]}):a}b.displayName=b.name+" [from "+f.id+"]";function e(a){var b=a.children,c=a.message,e=a.nextMessage;a=a.showContent;c=d("MWPMessageParsingUtils").isEndOfGroup(c,e);return c||a===!0?b():null}e.displayName=e.name+" [from "+f.id+"]";m={"mwp-reply-background-color":"var(--comment-footer-background)"};var r={"mwp-reply-background-color":"var(--comment-footer-background)"},s={dark:r,light:m,type:"VARIABLES"};function t(a){var b=a.children,e=a.domElementRef;a.message;var f=a.role,g=a.setHovered,i=a.stopHoveringRef,j=a.theme,k=j===void 0?s:j,m=a.xstyle,p=n(function(){return g(function(){return!1})},[g]);return l.jsx(c("BaseThemeProvider.react"),{config:o(function(){return d("MWCombineThemeConfigs").combine(s,k)},[k]),children:function(a,d){return l.jsx("div",{className:(h||(h=c("stylex")))(a,m),onMouseEnter:function(){i.current&&i.current(),g(function(){return!0}),i.current=p},onMouseLeave:function(){if(i.current===p){p();i.current=function(){};return}},ref:e,role:f,style:babelHelpers["extends"]({},d),children:b})}})}t.displayName=t.name+" [from "+f.id+"]";g.MWPBaseMessageListRowBeforeContent=a;g.MWPBaseMessageListRowBody=b;g.MWPBaseMessageListRowFooter=e;g.MWPBaseMessageListRow=t}),98);
__d("MWPMessageAuthor.react",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","MWCMIsCMSubthread","MWPContactContext.react","ReQL","ReQLSuspense","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react")),m=k.useMemo;function n(a){var b=a.children,e=a.contactId,g=(h||(h=c("useReStore")))(),j=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.table("contacts")).getKeyRange(e)},[g,e],f.id+":50");a=m(function(){var a=void 0;return{contact:j,nickname:a}},[j]);d("Int64Hooks").useEffectInt64(function(){c("promiseDone")(g.runInTransaction(function(a){return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:i.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:i.ofNumber(c("LSContactIdType").FBID),contactType:i.ofNumber(c("LSContactType").USER),contactViewerRelationship:i.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:i.ofNumber(c("LSContactGender").UNKNOWN),id:e,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:i.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})},"readwrite"))},[g,e]);return l.jsx(d("MWPContactContext.react").MWPContactContextProvider,{contact:a.contact,nickname:a.nickname,children:b})}n.displayName=n.name+" [from "+f.id+"]";function o(a){var b=a.children,c=a.contact,e=a.nickname;a=m(function(){return{contact:c,nickname:e}},[c,e]);return l.jsx(d("MWPContactContext.react").MWPContactContextProvider,{contact:a.contact,nickname:a.nickname,children:b})}o.displayName=o.name+" [from "+f.id+"]";function a(a){var b,e=a.children,g=a.contactId,k=a.threadKey,m=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(m.table("contacts")).getKeyRange(g)},[g,m],f.id+":125");b=(b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(m.table("participants"),["nickname"]).getKeyRange(k,g)},[g,m,k],f.id+":129"))==null?void 0:b.nickname;var p=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(m.table("threads"),["parentThreadKey","secondaryParentThreadKey","threadType"]).getKeyRange(k).map(function(a){var b=a.parentThreadKey,e=a.secondaryParentThreadKey;a=a.threadType;a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(m.table("contextual_profile_v1"),["profileName"]).getKeyRange(g,c("MWCMIsCMSubthread")(a)&&e!=null?e:b),f.id+":154");return a==null?void 0:a.profileName})},[m,k,g],f.id+":145");p=p!=null?p:b;if(a!=null)if((j||(j=d("I64"))).ge(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT)))return l.jsx(o,{contact:a,nickname:p,children:e});else return l.jsx(n,{contactId:g,children:e});else return l.jsx(n,{contactId:g,children:e})}a.displayName=a.name+" [from "+f.id+"]";a=l.memo(a,function(a,b){if(a!=null&&b!=null&&(j||(j=d("I64"))).equal(a.contactId,b.contactId)&&(j||(j=d("I64"))).equal(a.threadKey,b.threadKey))return a.children===b.children;else return!1});function b(){var a=d("MWPContactContext.react").useMWPContactStableContext();a=a.authorName;return[a]}function e(){var a=d("MWPContactContext.react").useMWPContactFullContext();a=a.contact;var b=a!=null?a.name:void 0;return[b,a]}g.MissingContactProvider=n;g.Provider=o;g.MWPMessageAuthor=a;g.useAuthorName=b;g.useAuthorFullName=e}),98);
__d("MWPMessageListRowWithKeyboardInteractions.react",["fbt","BaseHeadingContextWrapper.react","CometScreenReaderText.react","CometTimestamp.react","FocusInertRegion.react","FocusRegion.react","FocusWithinHandler.react","I64","KeyCommandHandler.react","MDSTextPairing.react","MWEditMessageOverlay.react","MWMessageCellFocusTable.react","MWMessageCellKeyCommands.react","MWMessageTableFocusTable.react","MWPBaseMessageListRow.react","MWPMessageAuthor.react","MWV2MessageListIsRowModalContext.react","MWV2MessageRowActionsContext.react","MWV2MessageRowIsRowFocusedContext.react","MWXPressable.react","ReactDOMComet","emptyFunction","focusScopeQueries","gkx","react","setTimeout","stylex","useCometTheme","useMAWEditMessageData","useMWPEditMessageDeemphasizer","useServerTime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react"));b=j;e=b.forwardRef;var m=b.useCallback,n=b.useEffect,o=b.useId,p=b.useMemo,q=b.useRef,r={cell:{display:"x78zum5",flexDirection:"xdt5ytf",position:"x1n2onr6",$$css:!0},cellFocusVisible:{zIndex:"x1vjfegm",$$css:!0},cellModal:{outline:"x1k66dxp",outlineOffset:"x1g40iwv","@media (-webkit-min-device-pixel-ratio: 0)_outline":"x1bkw7pg",$$css:!0},enterModalButton:{backgroundColor:"x1h0vfkc",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"x152obne",end:"xlr8s2x",left:null,right:null,paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",position:"x10l6tqk",top:"x1qiirwl",transform:"x105ttfm",zIndex:"x1vjfegm",$$css:!0},enterModalButtonVisible:{opacity:"x1hc1fzr",$$css:!0},row:{position:"x1n2onr6",$$css:!0},visuallyHidden:{clip:"xzpqnlu",clipPath:"x1hyvwdk",height:"xjm9jq1",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",width:"x1i1rx1s",$$css:!0}};function s(a){var b=a.key;(b==="ArrowUp"||b==="ArrowDown"||b==="ArrowLeft"||b==="ArrowRight"||b==="PageUp"||b==="PageDown"||b==="Home"||b==="End")&&a.preventDefault()}var t=h._("__JHASH__U5V4JiyTDSI__JHASH__"),u=h._("__JHASH__GoIrDg5lzef__JHASH__"),v=h._("__JHASH__ctLNxPXr8we__JHASH__"),w=e(function(a,b){var d=a.ariaLabel,e=a.focusable,f=a.onPress,g=a.text;a=a.xstyle;var h=c("useCometTheme")("invert"),i=h[0];h=h[1];return l.jsx(i,{children:l.jsx(c("MWXPressable.react"),{"aria-label":d,focusable:e,onPress:function(){return f()},ref:b,xstyle:[h,r.enterModalButton,a],children:l.jsx(c("MDSTextPairing.react"),{body:g,bodyColor:"primary",level:4})})})});function a(a){var b=a.children,e=a.domElementRef,f=a.focusCellOnRender,g=f===void 0?!1:f,j=a.isDialogOpened,x=a.isFocused,y=a.isModal,z=a.message,A=a.messageDomID;f=a.outgoing;var B=a.setFocused,C=a.setHovered,D=a.setIsDialogOpened,E=a.stopHoveringRef;a=a.theme;var F=d("MWV2MessageListIsRowModalContext.react").useMWV2MessageListIsRowModal(),G=q(null),H=o(),I=m(function(){F(function(){return z.messageId}),c("setTimeout")(function(){d("FocusRegion.react").focusRegionById(H,d("focusScopeQueries").tabbableScopeQuery)},0)},[F,z.messageId,H]),J=function(){F(function(){return""});var a=G.current;if(a!=null)return a.focus()},K=c("CometTimestamp.react").getTimestamp(c("useServerTime")(),new Date((k||(k=d("I64"))).to_float(z.timestampMs))),L=d("MWPMessageAuthor.react").useAuthorName();L=L[0];f=f?h._("__JHASH__g90cYI08lR4__JHASH__"):L!=null?L:h._("__JHASH__I4KHPAQ-RAf__JHASH__");var M=o(),N=l.jsx(c("CometScreenReaderText.react"),{id:M,text:h._("__JHASH__BGN2Md9i0L4__JHASH__",[h._param("Stringified timestamp of the incoming message",K),h._param("Name of the author of the incoming message",f)])}),O=o(),P=q(null),Q=c("gkx")("22803"),R=q(c("emptyFunction")),S=q(c("emptyFunction")),T=q(c("emptyFunction")),U=q(c("emptyFunction"));L=p(function(){return{isDialogOpened:j,setFocused:B,setIsDialogOpened:D}},[B,D,j]);K=p(function(){return{forwardMessage:T,openReactionsMenu:R,removeMessage:U,replyToMessage:S}},[R,S]);var V=c("useMAWEditMessageData")()!=null;f=c("useMWPEditMessageDeemphasizer")(z.messageId);var W=function(a){if(x!==a){B(function(){return a});return F(function(){if((a||j)&&y)return z.messageId;else return""})}},X=function(a){x!==a&&B(function(){return a});var b=P.current;if(a&&b!=null){c("setTimeout")(function(){try{return b.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(a){return b.scrollIntoView(!1)}},0);return}};n(function(){if(g){var a;(a=G.current)==null?void 0:a.focus();(a=G.current)==null?void 0:a.scrollIntoView()}},[g]);return l.jsx(c("BaseHeadingContextWrapper.react"),{children:l.jsx(d("MWV2MessageRowIsRowFocusedContext.react").MWV2MessageRowIsRowFocusedContextProvider,{value:L,children:l.jsx(d("MWV2MessageRowActionsContext.react").MWV2MessageRowActionsContextProvider,{value:K,children:l.jsx(d("MWPBaseMessageListRow.react").MWPBaseMessageListRow,{domElementRef:e,message:z,role:"row",setHovered:V?c("emptyFunction"):C,stopHoveringRef:E,theme:a,xstyle:[r.row,f],children:l.jsxs(l.Fragment,{children:[l.jsx(d("MWMessageTableFocusTable.react").FocusTable[1],{children:l.jsx(c("FocusWithinHandler.react"),{onFocusChange:V?void 0:W,onFocusVisibleChange:V?void 0:X,children:function(a,e){a=l.jsx(d("MWMessageTableFocusTable.react").FocusTable[2],{children:l.jsx("div",{className:(i||(i=c("stylex")))(r.cell,y?r.cellModal:!1,e?r.cellFocusVisible:!1),"data-release-focus-from":"CLICK","data-scope":d("MWMessageTableFocusTable.react").scopeID,ref:G,role:"gridcell",tabIndex:V?-1:0,children:l.jsx(c("FocusInertRegion.react"),{disabled:y,focusQuery:d("focusScopeQueries").tabbableScopeQuery,children:y?l.jsxs(l.Fragment,{children:[l.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,autoRestoreFocus:!0,containFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:H,recoverFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:l.jsx(c("KeyCommandHandler.react"),{onKeyDown:s,children:l.jsxs("div",{"aria-describedby":A,"aria-labelledby":M,id:O,role:"dialog",children:[b,y?N:null,l.jsx(w,{ariaLabel:u,focusable:!0,onPress:J,text:h._("__JHASH__PEyi9JodUw1__JHASH__"),xstyle:r.enterModalButtonVisible})]})})}),d("ReactDOMComet").createPortal(l.jsx("div",{"aria-owns":O}),document.body)]}):b})})});return l.jsxs(l.Fragment,{children:[l.jsx(d("MWMessageCellFocusTable.react").keyCommands,{onEnter:y||V?void 0:I,onEscape:y?J:void 0,onSpace:y||V?void 0:I,children:Q?l.jsx(d("MWMessageCellKeyCommands.react").keyCommands,{message:z,children:a}):a}),l.jsx("div",{role:"gridcell",children:l.jsx(w,{ariaLabel:y?h._("__JHASH__C-7ahaHTUI7__JHASH__"):t,focusable:y,onPress:I,ref:P,text:y?h._("__JHASH__C-7ahaHTUI7__JHASH__"):v,xstyle:e&&!y?r.enterModalButtonVisible:r.visuallyHidden})})]})}})}),l.jsx(c("MWEditMessageOverlay.react"),{messageId:z.messageId})]})})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.react",["LSCustomUpdateMuteManagementStoredProcedure","LSFactory","LSIntEnum","MWAdminTextLayout.react","MWXLink.react","ReQL","ReQLSuspense","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j.useCallback;function a(a){var b=a.message,e=a.shouldMute,g=(h||(h=c("useReStore")))(),j=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.admin_message_ctas).getKeyRange(b.threadKey,b.messageId)},[g,b.messageId,b.threadKey],f.id+":32");a=l(function(){if((j==null?void 0:j.targetId)==null)return;var a=j.targetId,f=e?(i||(i=d("LSIntEnum"))).ofNumber(0):(i||(i=d("LSIntEnum"))).ofNumber(1);c("promiseDone")(g.runInTransaction(function(d){return c("LSCustomUpdateMuteManagementStoredProcedure")(c("LSFactory")(d),{gameId:a,mutedUserId:b.threadKey,userActionType:f})},"readwrite"))},[g,b.threadKey,e,j]);a=b.adminMsgCtaTitle!=null?k.jsx(c("MWXLink.react"),{onClick:a,target:"_blank",children:b.adminMsgCtaTitle}):void 0;return k.jsx(c("MWAdminTextLayout.react"),{cta:a,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.react",["I64","LSFactory","LSIntEnum","LSUpdateBotSubscriptionStoredProcedure","MWAdminTextLayout.react","MWXLink.react","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react")),m=k.useCallback;function a(a){var b=a.message,e=a.shouldSubscribe,f=(h||(h=c("useReStore")))(),g=(i||(i=d("I64"))).to_string(b.threadKey),k=m(function(){var a=e?(j||(j=d("LSIntEnum"))).ofNumber(0):(j||(j=d("LSIntEnum"))).ofNumber(1);c("promiseDone")(f.runInTransaction(function(b){return c("LSUpdateBotSubscriptionStoredProcedure")(c("LSFactory")(b),{threadKey:(i||(i=d("I64"))).of_string(g),userActionType:a})},"readwrite"))},[f,g,e]);a=b.adminMsgCtaTitle!=null?l.jsx(c("MWXLink.react"),{onClick:function(){return k()},target:"_blank",children:b.adminMsgCtaTitle}):void 0;return l.jsx(c("MWAdminTextLayout.react"),{cta:a,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgArmadilloEphemeralChangeDuration.react",["MWAdminTextLayout.react","cr:7125","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.message;var d=a.adminMsgCtaTitle;d=d!=null&&b("cr:7125")!=null?i.jsx("div",{className:"xz94kzr x1rg5ohu xo1l8bm",children:i.jsx(b("cr:7125"),{threadKey:a.threadKey,title:d})}):null;return i.jsx(c("MWAdminTextLayout.react"),{cta:d,message:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("XPolarisDirectInboxControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/direct/inbox/",Object.freeze({initial_e2ee_toggle_position:!1,recurring_notification:!1}),["/direct/t/{?thread_key}/","/direct/{?subpage}/{?folder}/"],void 0);b=a;g["default"]=b}),98);
__d("MWV2AdminMsgE2EECutoverRollback.react",["CurrentEnvironment","I64","MWAdminTextLayout.react","MWInboxRouteBuilder","MWXLink.react","ReQL","ReQLSuspense","WALoggerDeferred","XPolarisDirectInboxControllerRouteBuilder","react","react-strict-dom","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate the url, thread is missing in mi_act_mapping table for threadKey ",""]);k=function(){return a};return a}var l=j||d("react"),m={adminTextCta:{color:"xz94kzr",display:"x1rg5ohu",fontWeight:"xk50ysn",$$css:!0}};function a(a){var b=a.message,e=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.mi_act_mapping_table).getKeyRange(b.threadKey).map(function(a){return(i||(i=d("I64"))).to_string(a.jid)})},[e,b.threadKey],f.id+":40");a=a!=null?c("CurrentEnvironment").instagramdotcom?c("XPolarisDirectInboxControllerRouteBuilder").buildExtraURL("/direct/t/{?thread_key}/",{thread_key:a}):d("MWInboxRouteBuilder").buildURL({thread_key:a}):(d("WALoggerDeferred").LOG(k(),(i||(i=d("I64"))).to_string(b.threadKey)),d("MWInboxRouteBuilder").buildHomeURL());var g=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableAscending(e.tables.admin_message_ctas).getKeyRange(b.threadKey,b.messageId,(a=b.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},[e,b],f.id+":65");g=g==null?void 0:g.title;a=g!=null?l.jsx(d("react-strict-dom").html.div,{style:m.adminTextCta,children:l.jsx(c("MWXLink.react"),{href:a,target:"_self",children:g})}):null;return l.jsx(c("MWAdminTextLayout.react"),{cta:a,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgE2EEDescription.react",["fbt","CurrentEnvironment","I64","JSResourceForInteraction","MDSLockSvgIcon.react","MWAdminTextLayout.react","MWXLink.react","ReQL","ReQLSuspense","XInstagramHelpDotComContentControllerRouteBuilder","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||d("react"),m=c("JSResourceForInteraction")("MAWLearnMoreCutoverDialog.react").__setRef("MWV2AdminMsgE2EEDescription.react"),n=h._("__JHASH__8YEBJluoCs5__JHASH__");function a(a){var b,e=a.message,g=(i||(i=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableAscending(g.tables.admin_message_ctas).getKeyRange(e.threadKey,e.messageId,(a=e.adminMsgCtaId)!=null?a:(j||(j=d("I64"))).neg_one)},[g,e],f.id+":52");b=(b=c("XInstagramHelpDotComContentControllerRouteBuilder").buildUri({cms_id:"491565145294150"}).setDomain("help.instagram.com"))==null?void 0:(b=b.setProtocol("https"))==null?void 0:b.toString();var h={},k=c("useMWXLazyDialog")(m),o=k[0];k=function(){return o(h)};a=a==null?void 0:a.title;b=a!=null?c("CurrentEnvironment").instagramdotcom?l.jsx(c("MWXLink.react"),{href:b,target:"_blank",children:n}):l.jsx("div",{className:"xz94kzr x1rg5ohu xk50ysn",children:l.jsx(c("MWXLink.react"),{onClick:k,target:"_blank",children:a})}):null;return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"x1o583il x1rg5ohu x177n6bx x1n2onr6",children:l.jsx(c("MDSLockSvgIcon.react"),{color:"tertiary",size:16})}),l.jsx(c("MWAdminTextLayout.react"),{cta:b,message:e})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgICDC.react",["fbt","MWAdminTextLayout.react","MWXLink.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k="https://www.facebook.com/help/messenger-app/1577627185919537/?helpref=uf_permalink&parent_cms_id=1084673321594605";function a(a){a=a.message;return j.jsx(c("MWAdminTextLayout.react"),{cta:j.jsx(d("react-strict-dom").html.div,{children:j.jsx(c("MWXLink.react"),{href:k,target:"_blank",children:h._("__JHASH__t0_WbzixXKp__JHASH__")})}),message:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWNotificationMessageManageNotificationsLazyDialogTrigger.react",["JSResourceForInteraction","emptyFunction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");var i=c("JSResourceForInteraction")("MWNotificationMessagesManageNotificationsDialog.react").__setRef("MWNotificationMessageManageNotificationsLazyDialogTrigger.react");function a(a){var b=a.isOptOut,d=a.renderer,e=a.targetId;a=a.threadKey;var f={isOptOut:b,targetId:e,threadKey:a};b=c("useMWXLazyDialog")(i);var g=b[0];e=function(){return g(f,c("emptyFunction"))};return d(e)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWNotificationMessageManageNotificationsAdminMsgCta.react",["CometTextWithEntities.react","MWNotificationMessageManageNotificationsLazyDialogTrigger.react","MWXPressable.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.isOptOut,d=a.targetId,e=a.threadKey,f=a.title;a=function(a){return i.jsx(c("MWXPressable.react"),{onPress:function(){return a()},children:i.jsx(c("CometTextWithEntities.react"),{text:f})})};return i.jsx(c("MWNotificationMessageManageNotificationsLazyDialogTrigger.react"),{isOptOut:b,renderer:a,targetId:d,threadKey:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgNotificationMessageManageNotifications.react",["I64","MWAdminTextLayout.react","MWNotificationMessageManageNotificationsAdminMsgCta.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function a(a){var b=a.isOptOut,e=a.message,g=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableAscending(g.tables.admin_message_ctas).getKeyRange(e.threadKey,e.messageId,(a=e.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},[g,e],f.id+":35");var j=e.adminMsgCtaTitle,l=a==null?void 0:a.targetId;a=j!=null&&a!=null&&l!=null?k.jsx("div",{className:"x1rg5ohu x1s688f",children:k.jsx(c("MWNotificationMessageManageNotificationsAdminMsgCta.react"),{isOptOut:b,targetId:l,threadKey:e.threadKey,title:j})}):null;return k.jsx(c("MWAdminTextLayout.react"),{cta:a,message:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3008");b=d("FalcoLoggerInternal").create("p2b_differentiation_privacy_disclosure_open_click_web",a);e=b;g["default"]=e}),98);
__d("MWV2AdminMsgP2BPrivacyDisclosure.react",["I64","JSResourceForInteraction","MWAdminTextLayout.react","MWXLink.react","P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent","ReQL","ReQLSuspense","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react"),l=c("JSResourceForInteraction")("MWPrivacyDisclosureDialog.react").__setRef("MWV2AdminMsgP2BPrivacyDisclosure.react");function a(a){var b=a.message,e=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableAscending(e.tables.admin_message_ctas).getKeyRange(b.threadKey,b.messageId,(a=b.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},[e,b],f.id+":31");var g=c("useMWXLazyDialog")(l),j=g[0];g=a==null?void 0:a.title;a=g!=null?k.jsx(c("MWXLink.react"),{onClick:function(){j({entryPoint:"ADMIN_TEXT",threadKey:b.threadKey},function(){}),c("P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent").log(function(){return{consumer_id:"0",entry_point:"ADMIN_TEXT",page_id:(i||(i=d("I64"))).to_string(b.threadKey)}})},children:g}):null;return k.jsx(c("MWAdminTextLayout.react"),{cta:a,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgPostMessageRemoveActions.react",["C4GFalcoLoggerDeferred","I64","JSResourceForInteraction","MWAdminTextLayout.react","MWXLink.react","ReQL","ReQLSuspense","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i.useCallback,m=c("JSResourceForInteraction")("MWCMAdmodRemoveMessageOtherActionsDialog.react").__setRef("MWV2AdminMsgPostMessageRemoveActions.react");function n(a){var b=a.senderId,e=a.threadKey;a=a.title;var f=c("useMWXLazyDialog")(m),g=f[0];f=l(function(){d("C4GFalcoLoggerDeferred").logC4GEngagementFalcoEvent({action:"tap",event:"message_removed_more_actions_sheet_rendered",surface:"thread_view",thread_id:(j||(j=d("I64"))).to_string(e)}),g({senderId:b,threadKey:e})},[g,b,e]);return k.jsx(c("MWXLink.react"),{color:"highlight",onClick:f,role:"button",children:a})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.message,e=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableAscending(e.tables.admin_message_ctas).getKeyRange(b.threadKey,b.messageId,(a=b.adminMsgCtaId)!=null?a:(j||(j=d("I64"))).neg_one)},[e,b],f.id+":60");var g=a==null?void 0:a.title;a=a==null?void 0:a.actionUrl;var i=null;if(a!=null){a=new URL(a);i=a.searchParams.get("removed_msg_sender_id")}a=i!=null&&g!=null?k.jsx(n,{senderId:i,threadKey:b.threadKey,title:g}):null;return k.jsx(c("MWAdminTextLayout.react"),{cta:a,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgServiceBookingLegalDisclaimer.react",["I64","JSResourceForInteraction","MWAdminTextLayout.react","MWXLink.react","ReQL","ReQLSuspense","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react"),l=c("JSResourceForInteraction")("MWPrivacyDisclosureDialog.react").__setRef("MWV2AdminMsgServiceBookingLegalDisclaimer.react");function a(a){var b=a.message,e=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableAscending(e.tables.admin_message_ctas).getKeyRange(b.threadKey,b.messageId,(a=b.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},[e,b],f.id+":32");var g=c("useMWXLazyDialog")(l),j=g[0];g=a==null?void 0:a.title;a=g!=null?k.jsx(c("MWXLink.react"),{onClick:function(){return j({entryPoint:"ADMIN_TEXT",threadKey:b.threadKey},function(){})},children:g}):null;return k.jsx(c("MWAdminTextLayout.react"),{cta:a,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgShowPinnedMessages.react",["I64","JSResourceForInteraction","MWAdminMsgCtaLink.react","MWAdminTextLayout.react","MWPBumpEntityKey","ReQL","ReQLSuspense","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react"),l=c("JSResourceForInteraction")("MWPinnedMessagesDialog.react").__setRef("MWV2AdminMsgShowPinnedMessages.react");function a(a){var b=a.message,e=(h||(h=c("useReStore")))();a=c("useMWXLazyDialog")(l);var g=a[0];a=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableAscending(e.tables.admin_message_ctas).getKeyRange(b.threadKey,b.messageId,(a=b.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},[e,b],f.id+":32");var j=function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_pinned_messages","see_all_admin_msg_cta");return g({threadKey:b.threadKey},function(){})};a=a==null?void 0:a.title;j=a!=null?k.jsx(c("MWAdminMsgCtaLink.react"),{onClick:j,children:a}):null;return k.jsx(c("MWAdminTextLayout.react"),{cta:j,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgViewMessagesDualThreadCutover.react",["I64","LSFactory","LSIntEnum","LSPlatformWaitForTaskCompletion","LSVerifyThreadRowExistsStoredProcedure","MWAdminTextLayout.react","MWXLink.react","MWXText.react","ReQL","WALoggerDeferred","asyncToGeneratorRuntime","promiseDone","react","useAsyncReStore","useMWNavigation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Dual-thread-cutover] Failed to navitage to open messages thread ",""]);k=function(){return a};return a}var l=h||(h=d("react")),m=h.useCallback;function a(a){var e=a.message,f=c("useAsyncReStore")(),g=c("useMWNavigation")();a=m(function(){c("promiseDone")(f,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,f=(b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table).getKeyRange(e.threadKey))))==null?void 0:b.jid;f&&(yield c("LSPlatformWaitForTaskCompletion")(a,function(a){return c("LSVerifyThreadRowExistsStoredProcedure")(c("LSFactory")(a),{syncGroup:(i||(i=d("LSIntEnum"))).ofNumber(1),threadKey:f,threadType:i.ofNumber(1)})},"readwrite"));b=f?yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(f)):null;b?g.openTabOrInbox({clientThreadKey:b.clientThreadKey,threadKey:b.threadKey,threadType:b.threadType},"preCutoverThread"):void d("WALoggerDeferred").LOG(k(),(j||(j=d("I64"))).to_string(e.threadKey))});return function(b){return a.apply(this,arguments)}}())},[f,e.threadKey,g]);var h=e.adminMsgCtaTitle;a=h!=null?l.jsx(c("MWXLink.react"),{onClick:a,role:"button",children:l.jsx(c("MWXText.react"),{color:"blueLink",type:"body4",children:h})}):null;return l.jsx(c("MWAdminTextLayout.react"),{cta:a,message:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgViewPoll.react",["I64","MWAdminMsgCtaLink.react","MWAdminTextLayout.react","ReQL","ReQLSuspense","justknobx","react","useMWChatPollXMAActionHandler","useMWHasPollsVotingEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j.useCallback;function a(a){var b=a.message,e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableAscending(e.tables.admin_message_ctas).getKeyRange(b.threadKey,b.messageId,(a=b.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},[e,b],f.id+":28");a=c("useMWHasPollsVotingEnabled")(b.threadKey);var j=c("useMWChatPollXMAActionHandler")(),m=l(function(){j(g==null?void 0:g.targetId,g==null?void 0:g.targetTitle)},[g==null?void 0:g.targetId,g==null?void 0:g.targetTitle,j]);if(!c("justknobx")._("1987")||!a||g==null)return k.jsx(c("MWAdminTextLayout.react"),{message:b});a=g==null?void 0:g.title;m=a!=null?k.jsx(c("MWAdminMsgCtaLink.react"),{onClick:m,children:a}):null;return k.jsx(c("MWAdminTextLayout.react"),{cta:m,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgWebUrl.react",["I64","MWAdminTextLayout.react","MWXLink.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function a(a){var b=a.message,e=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableAscending(e.tables.admin_message_ctas).getKeyRange(b.threadKey,b.messageId,(a=b.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},[e,b],f.id+":24");var g=a==null?void 0:a.title;a=a==null?void 0:a.actionUrl;a=g!=null&&a!=null?k.jsx(c("MWXLink.react"),{color:"primary",href:a,target:"_blank",children:g}):null;return k.jsx(c("MWAdminTextLayout.react"),{cta:a,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2SBGProactiveChatMutationUrl.react",["CometRelay","I64","LWICometProactiveChatOptInMutation.react","MWAdminMsgCtaLink.react","MWAdminTextLayout.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function a(a){var b=a.message,e=a.opted_in,g=d("CometRelay").useRelayEnvironment(),j=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableAscending(j.tables.admin_message_ctas).getKeyRange(b.threadKey,b.messageId,(a=b.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},[j,b],f.id+":32");a=(a=a==null?void 0:a.title)!=null?a:"";var l=function(){return d("LWICometProactiveChatOptInMutation.react").commitProactiveChatOptInMutation({entryPoint:"sbg_messenger_xmat",environment:g,optInValue:e,setLoading:function(){},setOptedIn:function(){}})};l=a!=null?k.jsx(c("MWAdminMsgCtaLink.react"),{onClick:l,children:a}):null;return k.jsx(c("MWAdminTextLayout.react"),{cta:l,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatAdminMessage.react",["MWAdminTextLayout.react","MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.react","MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.react","MWV2AdminMsgArmadilloEphemeralChangeDuration.react","MWV2AdminMsgE2EECutoverRollback.react","MWV2AdminMsgE2EEDescription.react","MWV2AdminMsgICDC.react","MWV2AdminMsgNotificationMessageManageNotifications.react","MWV2AdminMsgP2BPrivacyDisclosure.react","MWV2AdminMsgPostMessageRemoveActions.react","MWV2AdminMsgServiceBookingLegalDisclaimer.react","MWV2AdminMsgShowPinnedMessages.react","MWV2AdminMsgViewMessagesDualThreadCutover.react","MWV2AdminMsgViewPoll.react","MWV2AdminMsgWebUrl.react","MWV2SBGProactiveChatMutationUrl.react","MWXText.react","gkx","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={color:{color:"x186z157",fontWeight:"xk50ysn",$$css:!0},container:{paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingStart:"x5ib6vp",paddingLeft:null,paddingRight:null,paddingEnd:"xc73u3c",$$css:!0},containerThatPrecedesAdminMessage:{paddingBottom:"x1a8lsjc",$$css:!0},containerThatProceedsAdminMessage:{paddingTop:"x889kno",$$css:!0},content:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",maxWidth:"x1ekjcvx",textAlign:"x2b8uid",wordBreak:"x13faqbe",$$css:!0}};function k(a){if(a!=null)return a.isAdminMessage;else return!1}function l(a){var b=a.children,c=a.nextMessage;a=a.prevMessage;return i.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[j.container,k(a)?j.containerThatProceedsAdminMessage:!1,k(c)?j.containerThatPrecedesAdminMessage:!1],children:i.jsx(d("react-strict-dom").html.div,{style:j.content,children:b})})}l.displayName=l.name+" [from "+f.id+"]";function m(a){var b=a.message;a.nextMessage;a.prevMessage;switch(b.adminMsgCtaType){case"admin_msg_armadillo_ephemeral_change_duration":return i.jsx(c("MWV2AdminMsgArmadilloEphemeralChangeDuration.react"),{message:b});case"admin_msg_dual_thread_cutover":return i.jsx(c("MWV2AdminMsgViewMessagesDualThreadCutover.react"),{message:b});case"admin_msg_web_url":return i.jsx(c("MWV2AdminMsgWebUrl.react"),{message:b});case"admin_msg_sbg_proactive_chat_opt_in":return i.jsx(c("MWV2SBGProactiveChatMutationUrl.react"),{message:b,opted_in:!0});case"admin_msg_sbg_proactive_chat_opt_out":return i.jsx(c("MWV2SBGProactiveChatMutationUrl.react"),{message:b,opted_in:!1});case"admin_msg_p2b_privacy_disclosure":if(c("gkx")("24144"))return i.jsx(c("MWV2AdminMsgP2BPrivacyDisclosure.react"),{message:b});else break;case"admin_notification_messages_opt_out":return i.jsx(c("MWV2AdminMsgNotificationMessageManageNotifications.react"),{isOptOut:!0,message:b});case"admin_notification_messages_opt_in":return i.jsx(c("MWV2AdminMsgNotificationMessageManageNotifications.react"),{isOptOut:!1,message:b});case"admin_msg_thread_level_cutover":return i.jsx(c("MWV2AdminMsgE2EEDescription.react"),{message:b});case"admin_msg_e2ee_thread":return null;case"admin_msg_cutover_rollback":return i.jsx(c("MWV2AdminMsgE2EECutoverRollback.react"),{message:b});case"xmat_instant_game_bot_message_subscribe":return i.jsx(c("MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.react"),{message:b,shouldSubscribe:!0});case"xmat_instant_game_bot_message_unsubscribe":return i.jsx(c("MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.react"),{message:b,shouldSubscribe:!1});case"admin_msg_view_pin_msgs_v2":return i.jsx(c("MWV2AdminMsgShowPinnedMessages.react"),{message:b});case"xmat_instant_game_custom_update_message_mute":return i.jsx(c("MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.react"),{message:b,shouldMute:!0});case"xmat_instant_game_custom_update_message_unmute":return i.jsx(c("MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.react"),{message:b,shouldMute:!1});case"admin_message_service_booking_legal_disclaimer":return i.jsx(c("MWV2AdminMsgServiceBookingLegalDisclaimer.react"),{message:b});case"admin_msg_admod_post_msg_remove_actions":return i.jsx(c("MWV2AdminMsgPostMessageRemoveActions.react"),{message:b});case"admin_msg_poll_details":return i.jsx(c("MWV2AdminMsgViewPoll.react"),{message:b});case"admin_msg_icdc":return i.jsx(c("MWV2AdminMsgICDC.react"),{message:b})}return i.jsx(c("MWAdminTextLayout.react"),{message:b})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.message,e=a.nextMessage;a=a.prevMessage;return i.jsx(l,{nextMessage:e,prevMessage:a,children:i.jsx(c("MWXText.react"),{color:"tertiary",type:"meta4",children:i.jsx(d("react-strict-dom").html.div,{style:j.color,children:i.jsx(m,{message:b})})})})}a.displayName=a.name+" [from "+f.id+"]";g.isAdminMessage=k;g.MWV2ChatAdminMessageContainer=l;g.MWV2ChatAdminMessage=a}),98);
__d("useMWMessageRowTheme",["MWLSThreadDisplayContext","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();return i(function(){var b=c("gkx")("23219")?"12px":a==="Inbox"?"16px":"8px";return{dark:{"mwp-message-list-profile-start-padding":b},light:{"mwp-message-list-profile-start-padding":b},type:"VARIABLES"}},[a])}g["default"]=a}),98);
__d("MWMessageRowAdminMessage.react",["BaseView.react","MWMessageListAttachmentContainer.react","MWPMessageListColumn.react","MWPMessageListRowWithKeyboardInteractions.react","MWV2ChatAdminMessage.react","MWV2MessageRowSimple.react","react","useMWMessageRowTheme","useMWPEditMessageDeemphasizer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={adminMessageAttachment:{boxSizing:"x9f619",maxWidth:"x4ndzw7",minWidth:"xwj5yc2",paddingBottom:"xdvlbce",paddingStart:"x5ib6vp",paddingLeft:null,paddingRight:null,paddingEnd:"xc73u3c",paddingTop:"x1nn3v0j",$$css:!0},adminMessageContainer:{maxWidth:"x193iq5w",$$css:!0}};function a(a){var b=a.domElementRef,e=a.isDialogOpened,f=a.isFirstMessageInGroup,g=a.isFocused,h=a.isModal,k=a.message,l=a.messageDomID,m=a.nextMessage,n=a.outgoing,o=a.prevMessage,p=a.setFocusedInTransition,q=a.setHoveredInTransition,r=a.setIsDialogOpened;a=a.stopHoveringRef;var s=c("useMWPEditMessageDeemphasizer")(),t=c("useMWMessageRowTheme")();s=i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{centered:!0,children:i.jsxs(c("BaseView.react"),{xstyle:[s,j.adminMessageContainer],children:[i.jsx(d("MWV2ChatAdminMessage.react").MWV2ChatAdminMessage,{message:k,nextMessage:m,prevMessage:o}),i.jsx(c("MWMessageListAttachmentContainer.react"),{connectBottom:!1,connectTop:!1,message:k,outgoing:n,xstyle:j.adminMessageAttachment})]})});if(k.adminMsgCtaType==null)return i.jsx(c("MWV2MessageRowSimple.react"),{children:s});else return i.jsx(c("MWPMessageListRowWithKeyboardInteractions.react"),{domElementRef:f?void 0:b,isDialogOpened:e,isFocused:g,isModal:h,message:k,messageDomID:l,outgoing:n,setFocused:p,setHovered:q,setIsDialogOpened:r,stopHoveringRef:a,theme:t,children:s})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWExtraPinnedMessagePadding.react",["MWPMessageListColumn.react","react","useMWPIsMessagePinned"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.nextMessage;a=c("useMWPIsMessagePinned")(a);return a&&i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:6})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessagePromptPopoverTrigger.react",["I64","JSResourceForInteraction","MWPActor.react","MWShowMessagePromptPopoverContext.react","MWXLazyPopoverTrigger.react","emptyFunction","react","useShouldAllowRollCallForMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useRef,l=c("JSResourceForInteraction")("MWMessagePromptPopover.react").__setRef("MWMessagePromptPopoverTrigger.react");function a(a){var b=a.attachments,e=a.children;a=a.message;b=d("useShouldAllowRollCallForMessage").useShouldAllowRollCallForMessage(a,b);var f=k(!1),g=d("MWPActor.react").useActor(),h=d("MWShowMessagePromptPopoverContext.react").useMWShowMessagePromptPopoverContext();h[0];var m=h[1];return b?j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",popoverProps:{message:a,onClose:c("emptyFunction")},popoverResource:l,position:(i||(i=d("I64"))).equal(g,a.senderId)?"start":"end",children:function(a,b){f.current===!1&&(f.current=!0,m(b));return j.jsx("div",{ref:a,children:e})}}):e}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatReactionsTooltip.react",["fbt","FBLogger","I64","LSAuthorityLevel","LSClearReactionsV2DetailsAndRangeStoredProcedure","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSIssueReactionsV2DetailsUsersListFetchStoredProcedure","LSVerifyContactRowExistsStoredProcedure","MWLSThread","MWPActor.react","Promise","ReQL","ReQLSuspense","intlSummarizeNumber","promiseDone","react","react-strict-dom","useIsReactionsV2Enabled","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=m||(m=d("react"));e=m;var o=e.useEffect,p=e.useMemo,q=9;function r(a){var b=(j||(j=c("useReStore")))(),e=d("ReQLSuspense").useArray(function(){return a==null?d("ReQL").empty():d("ReQL").fromTableAscending(b.tables.contextual_profile_v1.index("associatedEntityIdAndOwner")).getKeyRange(a)},[b,a],f.id+":47"),g=p(function(){var a=new Map();for(var b=e,c=Array.isArray(b),f=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(c){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;var h=g==null?void 0:g.profileName;h!=null&&a.set((l||(l=d("I64"))).to_string(g.ownerId),h)}return a},[e]);return g}function a(a){var b=a.messageId;a.parentThreadKey;var c=a.reactions;a=a.threadKey;var e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),f=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(a);return f?n.jsx(t,{messageId:b,parentThreadKey:e,reactions:c,threadKey:a}):n.jsx(s,{messageId:b,parentThreadKey:e,reactions:c,threadKey:a})}a.displayName=a.name+" [from "+f.id+"]";function s(a){var e=a.messageId,g=a.parentThreadKey,m=a.reactions,s=a.threadKey,t=(j||(j=c("useReStore")))(),u=d("ReQLSuspense").useArray(function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(t.tables.reactions).getKeyRange(s,e),d("ReQL").fromTableAscending(t.tables.contacts))},[t,s,e],f.id+":108"),v=r(g);o(function(){c("promiseDone")(t.runInTransaction(function(a){return(i||(i=b("Promise"))).all(u.map(function(e){e=e[1];if(e!=null)return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:k.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:k.ofNumber(c("LSContactIdType").FBID),contactType:k.ofNumber(c("LSContactType").USER),contactViewerRelationship:k.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:k.ofNumber(c("LSContactGender").UNKNOWN),id:e.id,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:k.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)});else return(i||(i=b("Promise"))).resolve()}))},"readwrite"))},[t,u]);a=p(function(){var a=new Map(u.map(function(a){var b=a[1];b==null&&c("FBLogger")("messenger_web_product").debug("missing contact for reaction tooltip");return[(l||(l=d("I64"))).to_string(a[0].actorId),b!=null?b.name:h._("__JHASH__AaE4hJExM0x__JHASH__")]})),b=m.map(function(b){b=(l||(l=d("I64"))).to_string(b.actorId);if(v.has(b))return v.get(b);b=a.get(b);if(b==null)return"";else return b}).filter(function(a){return a!==""}),e=b.length;b=b.slice(0,q);if(e>q){e=e-q;b.push(h._("__JHASH__KVtJcih6CQz__JHASH__",[h._plural(e),h._param("count",String(e))]))}return b},[v,m,u]);g=a.map(function(a,b){return n.jsx(d("react-strict-dom").html.div,{children:a},String(b))});return n.jsx(d("react-strict-dom").html.div,{children:g})}s.displayName=s.name+" [from "+f.id+"]";function t(a){var b,e=a.messageId,g=a.parentThreadKey;a.reactions;var i=a.threadKey,k=(j||(j=c("useReStore")))();o(function(){c("promiseDone")(k.runInTransaction(function(a){return c("LSClearReactionsV2DetailsAndRangeStoredProcedure")(c("LSFactory")(a))},"readwrite")),c("promiseDone")(k.runInTransaction(function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:e,threadId:i})},"readwrite"))},[k,i,e]);var m=r(g);a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(k.tables.reactions_v2_details).getKeyRange(i,e).map(function(a){var b;return(b=m.get((l||(l=d("I64"))).to_string(a.reactorId)))!=null?b:a.fullName})},[k,m,i,e],f.id+":242");g=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(k.tables.reactions_v2).getKeyRange(i,e)},[k,i,e],f.id+":255");var p=g?g.map(function(a){return a.viewerIsReactor}):[];p=p.length>0?p.reduce(function(a,b){return a||b}):!1;var s=d("MWPActor.react").useActor(),t=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(k.tables.contacts).getKeyRange(s)},[k,s],f.id+":274");g=g?g.map(function(a){return(l||(l=d("I64"))).to_int32(a.count)}).filter(function(a){return a>0}):[];b=(b=(t==null?void 0:t.id)!=null?m.get((l||(l=d("I64"))).to_string(t.id)):null)!=null?b:t==null?void 0:t.name;JSON.stringify(g)===JSON.stringify([1])&&p&&b!=null&&a.length===0?a.push(b):p&&a[0]!=null&&t&&b!=null&&((g=a[0])==null?void 0:g.toString())!==b&&a.unshift(b);p=h._("__JHASH__GTBXwO8BaZr__JHASH__");t=a.slice(0,q);if(a.length>q){g=a.length-q;t.push(h._("__JHASH__KVtJcih6CQz__JHASH__",[h._plural(g),h._param("count",String(c("intlSummarizeNumber")(g)))]).toString())}b=t.length===0?p:t.map(function(a,b){return n.jsx(d("react-strict-dom").html.div,{children:a},String(b))});return n.jsx(d("react-strict-dom").html.div,{children:b})}t.displayName=t.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useIsReactionDialogEnabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return(a=d("MWLSThread").useThread(a,function(a){return d("LSThreadBitOffset").has(184,a)||d("LSMessagingThreadTypeUtil").isSecure(a.threadType)}))!=null?a:!1}g["default"]=a}),98);
__d("MWMessageReactionsContainer.react",["fbt","I64","MWChatReactionEmoji","MWChatReactionsUtils","MWV2ChatReactionsTooltip.react","MWXTooltip.react","intlSummarizeNumber","react","stylex","useIsReactionDialogEnabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||d("react"),m={emoji:{alignItems:"x6s0dn4",backgroundColor:"xsrzb8j",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",lineHeight:"x14ju556",$$css:!0},emojiMargin:{marginEnd:"xcwd3tp",marginLeft:null,marginRight:null,$$css:!0},emojiNum:{color:"xi81zsa",fontSize:"x1ncwhqj",lineHeight:"x14ju556",minWidth:"xdhweic",paddingEnd:"x150jy0e",paddingLeft:null,paddingRight:null,paddingStart:"x1e558r4",textAlign:"x2b8uid",$$css:!0},emojiRow:{alignItems:"x6s0dn4",backgroundColor:"x2bj2ny",borderTopStartRadius:"x1a2cdl4",borderTopEndRadius:"xnhgr82",borderBottomEndRadius:"x1qt0ttw",borderBottomStartRadius:"xgk8upj",boxShadow:"x10vwrwz",display:"x78zum5",justifyContent:"xl56j7k",paddingTop:"x4p5aij",paddingEnd:"x19um543",paddingBottom:"x1j85h84",paddingStart:"x1m6msm",textAlign:"xp4054r",$$css:!0},emojiWithCursor:{cursor:"x1ypdohk",$$css:!0},scaleHeartEmoji:{transform:"xhqu4j4",$$css:!0}};function a(a){var b=a.count,e=a.emojis,f=a.message,g=a.reactions,j=a.reactionsV2,o=a.renderEmojis;a=a.threadKey;f=f.messageId;j=j!=null?j.map(function(a){return(k||(k=d("I64"))).to_int32(a.count)}).reduce(function(a,b){return a+b},0):0;var p=c("useIsReactionDialogEnabled")(a);j=j>1?j:b;var q=j>1;b=e.map(function(a,b){var f=q||b!==e.length-1,g=d("MWChatReactionsUtils").isHeart(a[0]);return l.jsx("div",{className:(i||(i=c("stylex")))(m.emoji,p?m.emojiWithCursor:!1,f?m.emojiMargin:!1),children:l.jsx("div",{className:i(g?m.scaleHeartEmoji:!1),children:o?o(a,16,"messenger_reaction_emoji_"+a[0]):l.jsx(c("MWChatReactionEmoji"),{emoji:a,size:16,testid:void 0})})},String(b))});b=l.jsxs("div",{className:"x6s0dn4 x2bj2ny x1a2cdl4 xnhgr82 x1qt0ttw xgk8upj x10vwrwz x78zum5 xl56j7k x4p5aij x19um543 x1j85h84 x1m6msm xp4054r",role:"none",children:[b,q?l.jsx(n,{reactionCount:j}):null]});return p?l.jsx(c("MWXTooltip.react"),{align:"middle",label:h._("__JHASH__pugXv5G1XoG__JHASH__"),position:"above",tooltip:l.jsx(c("MWV2ChatReactionsTooltip.react"),{messageId:f,reactions:g,threadKey:a}),children:b}):b}a.displayName=a.name+" [from "+f.id+"]";function n(a){a=a.reactionCount;a=c("intlSummarizeNumber")(a);var b=a.length;return l.jsx("div",{className:"xi81zsa x1ncwhqj x14ju556 xdhweic x150jy0e x1e558r4 x2b8uid",role:"none",style:{width:b+"ch"},children:a})}n.displayName=n.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPMessageHasAttachment",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if(!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(1))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(1),(i||(i=d("LSIntEnum"))).ofNumber(8192)))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(128))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(128),(i||(i=d("LSIntEnum"))).ofNumber(8192))))return!(h||(h=d("I64"))).equal(a.displayedContentTypes,h.add((i||(i=d("LSIntEnum"))).ofNumber(1),i.ofNumber(512)));else return!1}g["default"]=a}),98);
__d("MWPBaseMessageContent.react",["EntMessageReplyType","I64","LSIntEnum","MWPMessageHasAttachment","MWPMessageHasXMA","MWPMessageIsReply","MWPMessageListColumn.react","MWPMessageParsingUtils","MWPThreadCapabilitiesContext","gkx","react","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=a.attachmentRenderPosition,e=a.isEmojiOnly,f=a.isFirstMessageInGroup,g=a.isLastMessageInGroup,h=a.isMessagePinned,l=a.isNextMessagePinned,m=a.isSearchPluginAttachment,n=a.message,o=a.nextMessage,p=a.outgoing,q=a.prevMessage,r=a.renderAttachment,s=a.renderEmoji,t=a.renderMessageBubble,u=a.shouldRenderMessageContent;a=a.xmaLayout;var v=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();v=v.disableLinks;var w=c("MWPMessageIsReply")(n),x=d("MWPMessageParsingUtils").hasText(n),y=c("MWPMessageHasXMA")(n);v=c("gkx")("24165")&&v&&y&&n.textHasLinks;var z=n.replyType!=null&&(i||(i=d("I64"))).equal(n.replyType,(j||(j=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").BUMP));z=!z&&y&&b==="below"&&!v&&!m;y=b==="below"?!w&&!f&&!h:!1;m=!g&&!l||(a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT?z:!1);u?f=n.text!=null?e?w?k.jsx("div",{className:"x1n2onr6 x1vjfegm",children:s(n)}):w?null:k.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:[y?k.jsx("div",{className:"x1eb86dx x36qwtl xh8yej3"}):null,k.jsx("div",{className:"x1n2onr6 x1vjfegm",children:s(n)})]}):n.text!==""?k.jsxs(k.Fragment,{children:[y||b==="above"?k.jsx("div",{className:"x1eb86dx x36qwtl xh8yej3"}):null,k.jsxs("div",{className:"x78zum5 xh8yej3",role:"none",children:[p?k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnHorizontalSpacer,{})}):null,t(n,y,m,z,p),p?null:k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnHorizontalSpacer,{})})]})]}):null:null:f=null;var A;c("MWPMessageHasAttachment")(n)&&!v&&(A=r(d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectTop(n,q,b),d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectBottom(n,o,b),x));return k.jsxs(k.Fragment,{children:[b==="above"?A:null,f,b==="below"?A:null]})}a.displayName=a.name+" [from "+f.id+"]";g.MWPBaseMessageContent=a}),98);
__d("MWPBaseMessageContentWithPinnedMessageSupport.react",["MWPBaseMessageContent.react","react","useMWPIsMessagePinned"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a){var b=a.attachmentRenderPosition,e=a.isEmojiOnly,f=a.isFirstMessageInGroup,g=a.isLastMessageInGroup,h=a.isSearchPluginAttachment,k=a.message,l=a.nextMessage,m=a.outgoing,n=a.prevMessage,o=a.renderAttachment,p=a.renderEmoji,q=a.renderMessageBubble,r=a.shouldRenderMessageContent,s=a.xmaLayout,t=c("useMWPIsMessagePinned")(k),u=c("useMWPIsMessagePinned")(l);return j(function(){return i.jsx(d("MWPBaseMessageContent.react").MWPBaseMessageContent,{attachmentRenderPosition:b,isEmojiOnly:e,isFirstMessageInGroup:f,isLastMessageInGroup:g,isMessagePinned:t,isNextMessagePinned:u,isSearchPluginAttachment:h,message:k,nextMessage:l,outgoing:m,prevMessage:n,renderAttachment:o,renderEmoji:p,renderMessageBubble:q,shouldRenderMessageContent:r,xmaLayout:s})},[b,e,f,g,t,u,k,l,m,n,o,p,q,r,s,h])}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageIsEmojiOnly",["EmojiRenderer","EmoticonRenderer","ReStoreVaulting"],(function(a,b,c,d,e,f,g){"use strict";var h=/^[ \r\n\s]*$/;function a(a,b){if(a==null)return!1;var c=d("ReStoreVaulting").maybeUnvault(a);a=d("EmojiRenderer").parse(c).map(function(a){return{length:a.length,offset:a.offset}});b=b?d("EmoticonRenderer").parse(c).map(function(a){return{length:a.chars.length,offset:a.offset}}):[];a=a.concat(b);if(a.length===0)return!1;b=a.sort(function(a,b){return a.offset-b.offset|0});var e={contents:0},f={contents:0};a=b.some(function(a){e.contents===a.offset?(e.contents=e.contents+a.length|0,f.contents=e.contents):f.contents=a.offset;var b=c.substring(e.contents,f.contents);e.contents=a.offset+a.length|0;return h.test(b)===!1});b=e.contents!==c.length&&!h.test(c.substring(f.contents));if(a)return!1;else return!b}g["default"]=a}),98);
__d("MWPBaseMessage.react",["LSBitFlag","LSIntEnum","MWPBaseMessageContentWithPinnedMessageSupport.react","MWPMessageListColumn.react","MWV2MessageIsEmojiOnly","MessengerWebUXLogger","react","react-strict-dom","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k={container:{alignItems:"x1cy8zhl",display:"x78zum5",flexDirection:"xdt5ytf",maxWidth:"x193iq5w",position:"x1n2onr6",userSelect:"x1kxipp6",$$css:!0},outgoing:{alignItems:"xuk3077",$$css:!0},row_container:{display:"x78zum5",width:"xh8yej3",$$css:!0}};function l(a,b){if(d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(128),a.displayedContentTypes))return!0;else return c("MWV2MessageIsEmojiOnly")(a.text,b)}function a(a){var b=a.attachmentRenderPosition;b=b===void 0?"below":b;var e=a.checkEmoticon,f=a.isFirstMessageInGroup,g=a.isLastMessageInGroup,h=a.isSearchPluginAttachment;h=h===void 0?!1:h;var i=a.message,m=a.nextMessage,n=a.outgoing,o=a.prevMessage,p=a.reactions;a.reactionsV2;var q=a.renderAttachment,r=a.renderEmoji,s=a.renderMessageBubble,t=a.renderMessageContainer,u=a.renderMessageFooter,v=a.renderUnsentMessage,w=a.shouldRenderMessageContent;w=w===void 0?!0:w;a=a.xmaLayout;a=a===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:a;var x=c("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"messagelist_message_impression"});if(i.isUnsent)if(v!=null)return j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:v()});else return null;v=l(i,e);e=j.jsx(c("MWPBaseMessageContentWithPinnedMessageSupport.react"),{attachmentRenderPosition:b,isEmojiOnly:v,isFirstMessageInGroup:f,isLastMessageInGroup:g,isSearchPluginAttachment:h,message:i,nextMessage:m,outgoing:n,prevMessage:o,renderAttachment:q,renderEmoji:r,renderMessageBubble:s,shouldRenderMessageContent:w,xmaLayout:a});return j.jsxs(j.Fragment,{children:[j.jsxs(d("react-strict-dom").html.div,{ref:x,role:"none",style:k.row_container,children:[n?j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnHorizontalSpacer,{})}):null,t!=null?t(e,[k.container,n?k.outgoing:!1]):j.jsx(d("react-strict-dom").html.div,{style:[k.container,n?k.outgoing:!1],children:e}),n?null:j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnHorizontalSpacer,{})})]}),j.jsxs(j.Fragment,{children:[v&&p.length>0?j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:5}):null,j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:u()})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPMessageFooter.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.Children,l={container:{backgroundColor:"x1eb86dx",display:"x78zum5",height:"xmix8c7",justifyContent:"x13a6bvl",position:"x1n2onr6",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0},gutter:{flexBasis:"x1ohifd9",flexGrow:"x1c4vz4f",flexShrink:"xs83m0k",$$css:!0},items:{display:"x78zum5",transform:"x11z5cog",$$css:!0}};function a(a){var b=a.children,d=a.itemsXstyle,e=a.outgoing;a=a.xstyle;b=k.toArray(b).filter(Boolean);return b.length===0?null:j.jsxs("div",{className:(h||(h=c("stylex")))(l.container,a),role:"none",children:[b.map(function(a,b){return j.jsx("div",{className:(h||(h=c("stylex")))(l.items,d),role:"none",children:a},""+b)}),e?null:j.jsx("div",{className:"x1ohifd9 x1c4vz4f xs83m0k",role:"none"})]})}a.displayName=a.name+" [from "+f.id+"]";g.MWPMessageFooter=a}),98);
__d("MWPMessageLoggingWrapper.react",["CometHeroInteractionWithDiv.react","MWChatInteraction","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var b=a.children,e=a.messageId,f=a.optimisticMessageId;a=a.xstyle;e=d("MWChatInteraction").get(e);f=d("MWChatInteraction").get(f);e=(e=e)!=null?e:f;if(e==null)return j.jsx("div",{className:(h||(h=c("stylex")))(a),children:b});else return j.jsx(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"MESSAGE_RENDER",interactionUUID:e,pageletName:"Message",xstyle:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMultiReactConstants",[],(function(a,b,c,d,e,f){"use strict";a=3;b=20;c=3;d=9;e=180;var g=2;f.DEFAULT_MAX_REACTION_PREVIEWED_ALLOWED=a;f.CM_MAX_REACTION_EMOJIS_ALLOWED=b;f.PUBLIC_CHANNELS_MAX_REACTIONS_EMOJIS_PREVIEWED_WHEN_COLLAPSED=c;f.SPACING_PER_COUNT_CHARACTER=d;f.REACTIONS_ROW_EXPAND_COLLAPSE_ANIMATION_TOTAL_DURATION=e;f.REACTION_BUTTON_BUBBLE_EASE_FACTOR=g}),66);
__d("MWReactionUtils",["LSMessagingThreadTypeUtil","MWCMThreadTypes.react","ReQL","ReQLSuspense","useIsMultiReactionEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e,g=(h||(h=c("useReStore")))(),i=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(b);e=(e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.threads,["threadSubtype","threadType"]).getKeyRange(b)},[g,b],f.id+":30"))!=null?e:{};var j=e.threadSubtype;e=e.threadType;if(!(e!=null&&d("LSMessagingThreadTypeUtil").isDiscoverableChannel(e))&&!(e!=null&&d("MWCMThreadTypes.react").isBroadcastThread(e))&&!(j!=null&&d("MWCMThreadTypes.react").isIGBroadcastChannelThread(j)))return;if(i)return;a.sort(function(a,b){return a.count===b.count&&a.reactionLiteral!=null&&b.reactionLiteral!=null?a.reactionLiteral.localeCompare(b.reactionLiteral):b.count-a.count})}g.useSortReactionsForBroadcastChat=a}),98);
__d("MWPMessageReactions.react",["fbt","EmojiRenderer","I64","JSResourceForInteraction","LSFactory","LSIssueReactionsV2DetailsUsersListFetchStoredProcedure","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","MWChatReactionsUtils","MWLSThread","MWMultiReactConstants","MWReactionUtils","MWV2MessageRowIsRowFocusedContext.react","MWXPressable.react","ReQL","ReQLSuspense","emptyFunction","gkx","intlList","promiseDone","react","useIsMultiReactionEnabled","useIsReactionDialogEnabled","useIsReactionsV2Enabled","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react")),m=k,n=m.useCallback,o=m.useContext,p=m.useDeferredValue,q=m.useMemo,r=m.useRef,s=m.useState,t=c("gkx")("24166")?d("MWChatReactionsUtils").heartType2:d("MWChatReactionsUtils").heartType1;function a(a){var b=(i||(i=c("useReStore")))(),e=a.messageId,g=a.threadKey;a=p(d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.tables.reactions).getKeyRange(g,e).map(function(a){return d("MWChatReactionsUtils").isHeart(a.reaction)?{actorId:a.actorId,authorityLevel:a.authorityLevel,messageId:a.messageId,reaction:t,threadKey:a.threadKey,timestampMs:a.timestampMs}:a})},[g,e,b],f.id+":64"));return a}function b(a){var b=(i||(i=c("useReStore")))(),e=a.messageId,g=a.threadKey;a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.tables.reactions_v2).getKeyRange(g,e)},[b,g,e],f.id+":89");return a}function e(a){var b=(i||(i=c("useReStore")))(),e=a.messageId,g=a.threadKey;a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.tables.reactions_v2).getKeyRange(g,e).filter(function(a){return(j||(j=d("I64"))).gt(a.count,j.zero)})},[b,g,e],f.id+":103");return a}function u(a,b){a=a!=null?c("intlList")(a.map(function(a){return a.join("")}),c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA):"";return h._("__JHASH__tSgM5wXgT0G__JHASH__",[h._plural(b,"number"),h._param("the comma separated list of emojis used to react on this message",a)])}function v(a){return a.map(function(a,b){b=d("EmojiRenderer").parse(a).map(function(a){return a.emoji});return b.length!==1?[""]:b[0]}).filter(function(a){return a.join("")!==""})}function w(a){var b=a.children,e=a.dialogResource,g=a.message,h=a.onPress;a.outgoing;var k=a.reactions,m=a.reactionsV2;a=a.shouldUseVariant16ForReactionsV2;var p=a===void 0?!1:a,t=g.messageId,w=g.threadKey;a=o(d("MWV2MessageRowIsRowFocusedContext.react").context);var x=a.setFocused,y=a.setIsDialogOpened,z=(i||(i=c("useReStore")))();a=s(!1);var A=a[0],B=a[1];a=function(){B(function(a){return!a})};var C=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(w),D=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(w),E=d("MWLSThread").useThread(w,function(a){return d("LSMessagingThreadTypeUtil").isDiscoverableChannel(a.threadType)}),F=D?d("MWMultiReactConstants").CM_MAX_REACTION_EMOJIS_ALLOWED:3,G=c("useIsReactionDialogEnabled")(w),H=r(new Map()),I=n(function(){C&&c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(z,function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:g.messageId,threadId:w})},"issueReactionsV2DetailsUsersListFetch").then(function(){return H.current.forEach(function(a){return a()})}))},[z,C,g.messageId,w]),J=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(z.tables.reactions_v2).getKeyRange(w,t).filter(function(a){return(j||(j=d("I64"))).gt(a.count,j.zero)}).map(function(a){var b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(z.tables.reaction_v2_types).getKeyRange(a.reactionFbid),f.id+":224");b=p?b==null?void 0:b.reactionLiteralVariant16:b==null?void 0:b.reactionLiteral;return babelHelpers["extends"]({},a,{count:(j||(j=d("I64"))).to_int32(a.count),reactionLiteral:b})})},[z,w,t,p],f.id+":218");d("MWReactionUtils").useSortReactionsForBroadcastChat(J,w);var K=Array.from(new Set(J.map(function(a){return(a=a.reactionLiteral)!=null?a:""})));E=D&&E===!0?K:K.slice(0,F);K=m!=null&&C?v(E):v(Array.from(new Set(k.map(function(a){a=a.reaction;return a}))).slice(0,F));E=m!=null&&C?(j||(j=d("I64"))).to_int32(J.reduce(function(a,b){return(j||(j=d("I64"))).add(a,j.of_int32(b.count))},(j||(j=d("I64"))).zero)):k.length;F=u(K,E);m=r(null);J=q(function(){return e!=null?e:C?c("JSResourceForInteraction")("MWBroadcastChatReactionsDialog.react").__setRef("MWPMessageReactions.react"):c("JSResourceForInteraction")("MWV2ChatReactionsDialog.react").__setRef("MWPMessageReactions.react")},[e,C]);var L=q(function(){return{message:g,onLoadComplete:function(a){H.current.set(a,a);return function(){H.current["delete"](a)}},thread:{threadKey:w}}},[g,w]),M=n(function(){y(function(){return!1}),x(function(){return!0})},[x,y]);J=c("useMWXLazyDialog")(J);var N=J[0],O=n(function(a){y(function(){return!0}),N(babelHelpers["extends"]({},L,{initialTab:a}),M),h==null?void 0:h(),I()},[L,M,h,y,N,I]);J={eventName:"open_message_reactions_dialog",threadKey:w};return D||!G?b(K,E,k,g,w,O,A,a):l.jsx(c("MWXPressable.react"),{"aria-label":F,loggingEvent:J,onPress:function(){return O()},overlayDisabled:!0,ref:m,children:b(K,E,k,g,w,O,!1,c("emptyFunction"))})}w.displayName=w.name+" [from "+f.id+"]";g.useReactions=a;g.useReactionsV2=b;g.useNonZeroCountReactionsV2=e;g.MWPMessageReactions=w}),98);
__d("MWV2ChatBubble.react",["MWPMessageIsReply","MWXMessageBubble.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.message,d=a.xmaLayout,e=a.children,f=a.connectBottom,g=a.connectTop,h=a.outgoing;a=a.precedesXMA;b=c("MWPMessageIsReply")(b);return i.jsx(c("MWXMessageBubble.react"),{align:h?"right":"left",color:h?"outgoing":"incoming",connectBottom:f,connectTop:g,precedesXMA:a,variant:b?"opaque":"default",xmaLayout:d,children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatBubbleContainer.react",["MWChatBubbleEmphasisRing.react","MWV2ChatBubble.react","react","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.hasEmphasisRing;b=b===void 0?!1:b;var e=a.message,f=a.xmaLayout;f=f===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:f;var g=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,["hasEmphasisRing","message","xmaLayout","children"]);g=i.jsx(c("MWV2ChatBubble.react"),babelHelpers["extends"]({children:g,message:e,xmaLayout:f},a));return b?i.jsx(c("MWChatBubbleEmphasisRing.react"),babelHelpers["extends"]({hasXMA:!1},a,{children:g})):g}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatEmojiHotLike.react",["cr:6931","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){if(b("cr:6931")==null)return null;else return i.jsx(b("cr:6931"),{})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatEmoji.react",["CometTextWithEntities.react","I64","LSHotEmojiSize","LSIntEnum","MWChatBubbleEmphasisRing.react","MWChatTextTransform","MWV2ChatEmojiHotLike.react","ReStoreVaulting","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react")),l=h.useMemo;function a(a){var b=a.hasEmphasisRing;b=b===void 0?!1:b;var e=a.isSecureMessage;e=e===void 0?!1:e;a=a.message;var f=l(function(){return d("MWChatTextTransform").epdTextTransformsWithOptions({size:32})},[]),g=a.text;if(g==null)return null;g=d("ReStoreVaulting").maybeUnvault(g);a=a.hotEmojiSize;a=a!=null&&((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)));if(e&&a&&g==="\ud83d\udc4d")return k.jsx(c("MWV2ChatEmojiHotLike.react"),{});e=k.jsx(c("CometTextWithEntities.react"),{text:g,transforms:f,withParagraphs:!0});return b?k.jsx(c("MWChatBubbleEmphasisRing.react"),{connectBottom:!1,connectTop:!1,hasXMA:!1,outgoing:!1,precedesXMA:!1,children:e}):e}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessageProfileRangeTypeUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==="p")return"p";else if(a==="thread"||a==="t")return"t";else if(a==="thread_active"||a==="a")return"a";else if(a==="s")return"s";else if(a==="ai")return"ai";else if(a==="c")return"cc";else if(a==="cu")return"cu";else return"n"}f.ofString=a}),66);
__d("MWV2ChatTextParserUtils",["EmojiRenderer","EmoticonRenderer","I64","LSContactTypeExact","LSIntEnum","MWChatTextFormatting","MWLSContactTypeExactUtils","MessageProfileRangeTypeUtils","ReQL","ReQLSuspense","UnicodeUtils","XCometVanityURLControllerRouteBuilder","getURLRanges","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=new RegExp("/^[ \\r\\n\\s]*$/");function a(a){var b=d("EmojiRenderer").parse(a).map(function(a){return{length:a.length,offset:a.offset}}),e=c("gkx")("24142")?d("EmoticonRenderer").parse(a).map(function(a){return{length:a.chars.length,offset:a.offset}}):[];b=b.concat(e).sort(function(a,b){return a.offset-b.offset|0});if(b.length===0)return!1;var f={contents:0},g={contents:0};e=b.some(function(b){f.contents===b.offset?(f.contents=f.contents+b.length|0,g.contents=f.contents):g.contents=b.offset;var c=a.substring(f.contents,g.contents);f.contents=b.offset+b.length|0;return k.test(c)===!1});b=f.contents!==a.length&&!k.test(a.substring(g.contents));if(e)return!1;else return!b}function b(a){var b=c("getURLRanges")(a),e=[];a=d("MWChatTextFormatting").getFormattingRanges(a);b.forEach(function(a){a={entity:{__typename:"Link",uri:a.entity.url},length:a.length,offset:a.offset};e.push(a)});return e.concat(a)}function l(a){if(c("gkx")("23433"))return"/t/"+a;else return"/messages/t/"+a}function m(a,b){try{a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange((h||(h=d("I64"))).of_string(b)),f.id+":111")}catch(b){a=void 0}if(a==null)return l(b);var e=a.contactTypeExact;if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").FB_USER)))return"https://www.facebook.com"+c("XCometVanityURLControllerRouteBuilder").buildURL({vanity:b});if(!d("MWLSContactTypeExactUtils").isIgContact(e))return l(b);e=a.secondaryName;if(e!=null)return"https://www.instagram.com/"+e+"/";else return l(b)}function e(a,b,c,e,f,g){b=b.split(",");var i=c.split(","),k=e.split(","),n=f.split(",");return b.reduce(function(b,c,e){var f=d("MessageProfileRangeTypeUtils").ofString(n[e]),o=Number(i[e]);e=Number(k[e]);var p=(j||(j=d("UnicodeUtils"))).strlen(g.slice(0,e));p=e-p;e=e-p;f==="t"||f==="a"?b.push({entity:{__typename:"Profile",id:c,uri:l(c)},length:o,offset:e}):f==="p"?b.push({entity:{__typename:"Profile",id:c,uri:m(a,c)},length:o,offset:e}):f==="cc"?b.push({entity:{__typename:"CommunityChannel",threadKey:(h||(h=d("I64"))).of_string(c)},length:o,offset:e}):f==="s"||f==="cu"?b.push({entity:{__typename:"Command"},length:o,offset:e}):f==="ai"&&b.push({entity:{__typename:"Ai"},length:o,offset:e});return b},[])}g.isEmojiOnlyMessage=a;g.findRanges=b;g.findRangesForMentions=e}),98);
__d("MWV2ChatTextUtils",["MWPVisibleMessageContext.react","MWV2ChatTextParserUtils","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useMemo;function k(a,b,c){var e=b.mentionIds,f=b.mentionLengths,g=b.mentionOffsets;b=b.mentionTypes;return e!=null&&f!=null&&g!=null&&b!=null?d("MWV2ChatTextParserUtils").findRangesForMentions(a,e,f,g,b,c):[]}function l(a,b,c){if(a==null)return[];if(a.messageId!==c)return[];var d=b.indexOf(a.contextLine);if(d>-1)return a.highlights.map(function(a){return{entity:{__typename:"Highlight"},length:a.matchLength,offset:a.matchOffset+d}});else return[]}function a(a,b){var e=(h||(h=c("useReStore")))(),f=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),g=f.visibleMessage;return j(function(){return a==null||d("MWV2ChatTextParserUtils").isEmojiOnlyMessage(a)?[]:k(e,{mentionIds:b.mentionIds,mentionLengths:b.mentionLengths,mentionOffsets:b.mentionOffsets,mentionTypes:b.mentionTypes},a).concat(d("MWV2ChatTextParserUtils").findRanges(a)).concat(l(g==null?void 0:g,a,b.messageId))},[a,b.mentionIds,b.mentionLengths,b.mentionOffsets,b.mentionTypes,b.messageId,e,g])}g.useRanges=a}),98);
__d("MWXMessageBaseMessageListText.react",["MWChatTextTransform","MWXMessageTextWithEntities.react","MWXText.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={incoming:{color:"x18lvrbx",$$css:!0},outgoing:{color:"xyk4ms5",$$css:!0},regular:{marginTop:"x1gslohp",marginEnd:"x11i5rnm",marginBottom:"x12nagc",marginStart:"x1mh8g0r",textAlign:"x1yc453h",whiteSpace:"x126k92a",$$css:!0}};function a(a){var b=a.outgoing,e=a.ranges,f=a.renderers,g=a.text,h=a.transforms;a=a.xstyleForText;return g==null?null:i.jsx(c("MWXText.react"),{color:b?"white":"primary",type:"body3",children:i.jsx(d("react-strict-dom").html.div,{dir:"auto",style:[j.regular,b?j.outgoing:j.incoming,a],children:i.jsx(c("MWXMessageTextWithEntities.react"),{ranges:e,renderers:f,text:g,transforms:(b=h)!=null?b:d("MWChatTextTransform").epdTextTransforms,withParagraphs:!1})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMessageForwardedMessageListText.react",["MWChatTextTransform","MWXMessageBaseMessageListText.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={forwardedIncoming:{height:"x5yr21d",marginTop:"x1gslohp",marginEnd:"x11i5rnm",marginBottom:"x12nagc",marginStart:"x1mh8g0r",paddingStart:"x1ye3gou",position:"x1n2onr6",whiteSpace:"x126k92a",wordWrap:"x1vvkbs",$$css:!0},line:{borderTopStartRadius:"x13zp6kq",borderTopEndRadius:"x1mcfq15",borderBottomEndRadius:"xrosliz",borderBottomStartRadius:"x1wb7cse",bottom:"xbfrwjf",start:"x17qophe",left:null,right:null,position:"x10l6tqk",top:"xndqk7f",width:"xfo62xy",$$css:!0},lineIncomingColor:{backgroundColor:"x191yeep",$$css:!0},lineOutgoingColor:{backgroundColor:"x2sf6pc",$$css:!0}};function a(a){var b=a.xstyleForForwarded,e=a.outgoing,f=a.ranges,g=a.renderers,h=a.text;a=a.transforms;return i.jsxs(d("react-strict-dom").html.blockquote,{style:[j.forwardedIncoming,b],children:[i.jsx(d("react-strict-dom").html.div,{style:[j.line,e?j.lineOutgoingColor:j.lineIncomingColor]}),i.jsx(c("MWXMessageBaseMessageListText.react"),{outgoing:e,ranges:f,renderers:g,text:h,transforms:(b=a)!=null?b:d("MWChatTextTransform").epdTextTransforms})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMessageListText.react",["BaseTheme.react","I64","LSIntEnum","LSMessageReplySourceTypeV2","MWBaseTheme","MWChatTextTransform","MWXMessageBaseMessageListText.react","MWXMessageForwardedMessageListText.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");b={"mw-blockquote-border-start-color":"var(--placeholder-text)"};e={"mw-blockquote-border-start-color":"var(--placeholder-text)"};var l={dark:e,light:b,type:"VARIABLES"};function a(a){var b=a.message,e=a.xstyleForForwarded,f=a.outgoing,g=a.ranges,h=a.renderers,m=a.text,n=a.transforms;a=a.xstyleForText;if(m==null)return null;b=b.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(b.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD));var o=f?d("MWBaseTheme").empty:l;return k.jsx(c("BaseTheme.react"),{config:o,role:"none",children:b?k.jsx(c("MWXMessageForwardedMessageListText.react"),{outgoing:f,ranges:g,renderers:h,text:m,transforms:(o=n)!=null?o:d("MWChatTextTransform").epdTextTransforms,xstyleForForwarded:e}):k.jsx(c("MWXMessageBaseMessageListText.react"),{outgoing:f,ranges:g,renderers:h,text:m,transforms:(b=n)!=null?b:d("MWChatTextTransform").epdTextTransforms,xstyleForText:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPCombineTextRenderers",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b={};a.forEach(function(a){if(a==null)return;var c=a[0];a=a[1];var d=b[c];b[c]=d!=null?d.concat([a]):[a]});return b}f["default"]=a}),66);
__d("getMAWLinkEntityRenderer.react",["MWMessageCellFocusTable.react","MWXLink.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.encryptedLink,e=a.target,f=a.testid,g=a.xstyle;return function(a,f){return i.jsx(d("MWMessageCellFocusTable.react").FocusTable[2],{children:i.jsx("span",{role:"gridcell",children:i.jsx(c("MWXLink.react"),{encryptedLink:b,href:f.uri,target:e,testid:void 0,xstyle:g,children:a})})})}}g["default"]=a}),98);
__d("useMWPLinkRendererFactory",["MWPThreadCapabilitiesContext","getMAWLinkEntityRenderer.react","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),e=b.disableLinks;return function(b,d,f,g){return c("gkx")("24165")&&e?void 0:[f,c("getMAWLinkEntityRenderer.react")({encryptedLink:a,target:g,testid:d,xstyle:b})]}}g["default"]=a}),98);
__d("useMWTextRenderers",["CometErrorBoundary.react","GroupsCometJoinChatDialog.entrypoint","I64","MWCMThreadTypes.react","MWChatTextFormatting","MWInboxCommunityThreadsRouteBuilder","MWLSThread","MWMessageCellFocusTable.react","MWNavigationContext","MWXLink.react","react","useCommunityFolder","useMWCMShouldGoToFullScreenChatHook","useMWNavigation","useMWPCombineTextRenderers","useMWPLinkRendererFactory","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;var k=b.useCallback,l=b.useMemo,m={bold:{fontWeight:"x1s688f",$$css:!0},colorForLink:{color:"x1heor9g",$$css:!0},highlight:{backgroundColor:"xacajkf",borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",paddingTop:"x1nn3v0j",paddingEnd:"x4uap5",paddingBottom:"x1120s5i",paddingStart:"xkhd6sd",$$css:!0},underline:{color:"x1heor9g",textDecoration:"x1bvjpef",$$css:!0}};function n(a){var b=a.folder,e=a.node,f=a.thread;a=c("useMWNavigation")();var g=a.openTabOrInbox;a=(a=f.hasPendingInvitation)!=null?a:!1;var h=c("useMWCMShouldGoToFullScreenChatHook")(),k={invited:a,shouldGoToMessenger:h,surface:"unknown"};a={groupID:(i||(i=d("I64"))).to_string(b.fbGroupId),threadID:i.to_string(f.threadKey)};h=c("useMWXEntryPointDialog")(c("GroupsCometJoinChatDialog.entrypoint"),a);var l=h[0],m=function(){return l(k)};return j.jsx(d("MWMessageCellFocusTable.react").FocusTable[2],{children:j.jsx("span",{className:"x1s688f",role:"gridcell",children:j.jsx(c("MWXLink.react"),{onClick:function(){if(d("MWCMThreadTypes.react").isUnjoinedCMThread(f.threadType))return m();else return g({clientThreadKey:f.clientThreadKey,threadKey:f.threadKey,threadType:f.threadType},"mention")},children:e})})})}n.displayName=n.name+" [from "+f.id+"]";function o(a){var b=a.folder,c=a.thread,e=(i||(i=d("I64"))).to_string(b.folderId),f=i.to_string(c.threadKey);b=k(function(){return d("MWInboxCommunityThreadsRouteBuilder").buildURL({folder_id:e,thread_key:f})},[e,f]);return j.jsx(d("MWNavigationContext").Provider,{children:a.children,value:b})}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.communityLinkFallback,e=a.node;a=a.threadKey;a=d("MWLSThread").useThreadExn(a);var f=c("useCommunityFolder")(a);return f!=null?j.jsx(o,{folder:f,thread:a,children:j.jsx(n,{folder:f,node:e,thread:a})}):b}p.displayName=p.name+" [from "+f.id+"]";var q=["Command",function(a){return j.jsx(d("MWMessageCellFocusTable.react").FocusTable[2],{children:j.jsx("span",{className:"x1s688f",role:"gridcell",children:a})})}],r=["Ai",function(a){return j.jsx(d("MWMessageCellFocusTable.react").FocusTable[2],{children:j.jsx("span",{className:"x1s688f",role:"gridcell",children:a})})}],s=["CommunityChannel",function(a,b){var e=j.jsx(d("MWMessageCellFocusTable.react").FocusTable[2],{children:j.jsx("span",{className:"x1s688f",role:"gridcell",children:a})});return j.jsx(c("CometErrorBoundary.react"),{fallback:function(){return e},children:j.jsx(p,{communityLinkFallback:e,node:a,threadKey:b.threadKey})})}];function a(a,b){var e=c("useMWPLinkRendererFactory")(a),f=c("useMWPCombineTextRenderers")(l(function(){return[e([m.underline],"chat_message_regular_link","Link",b),e([m.bold,m.colorForLink],"profile_link","Profile",b),e([m.highlight],"highlight","Highlight",b),q,r,s]},[e,b]));return l(function(){return babelHelpers["extends"]({},f,{MessengerTextFormatting:[d("MWChatTextFormatting").messageRenderer]})},[f])}g["default"]=a}),98);
__d("MWV2ChatText.react",["MWUnvaultedText","MWV2ChatTextUtils","MWXMessageListText.react","react","useMWTextRenderers"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.isSecureMessage,e=a.message;a=a.outgoing;var f=c("useMWTextRenderers")(b),g=e.text;b=d("MWUnvaultedText").useMWUnvaultedText(b,g);g=d("MWV2ChatTextUtils").useRanges(b,e);return b==null?null:i.jsx(c("MWXMessageListText.react"),{message:e,outgoing:a,ranges:g,renderers:f,text:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMAWUnsendContentInSecureThread",["fbt","MWPMessageAuthor.react"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){a=d("MWPMessageAuthor.react").useAuthorName();a=a[0];return a!=null?h._("__JHASH___lYaXtrKDTe__JHASH__",[h._param("first name",a)]):h._("__JHASH__I-2GRtvMpnJ__JHASH__")}g["default"]=a}),98);
__d("MWV2ChatUnsentMessage.react",["fbt","I64","MWCMIsAnyCMThread","MWLSThread","MWV2TombstonedMessage.react","MWXPressable.react","MWXText.react","ReQL","ReQLSuspense","XCometGroupAdminActivitiesControllerRouteBuilder","react","useCommunityFolder","useMAWUnsendContentInSecureThread","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||d("react"),m={linkText:{paddingStart:"x16hj40l",paddingLeft:null,paddingRight:null,paddingEnd:"xsyo7zv",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0}};function n(a){var b=a.attachment,d=a.isSecureMessage;a=a.message;var e=h._("__JHASH__I-2GRtvMpnJ__JHASH__");a=c("useMAWUnsendContentInSecureThread")(a);if(d)d=a;else if(b!=null){a=b.descriptionText;d=a!=null?a:e}else d=e;return l.jsx(c("MWV2TombstonedMessage.react"),{children:d})}n.displayName=n.name+" [from "+f.id+"]";function o(a){a=a.attachment;if(a!=null){a=a.descriptionText;a=a!=null?a:h._("__JHASH__eGohYC1zonu__JHASH__")}else a=h._("__JHASH__eGohYC1zonu__JHASH__");return l.jsx(c("MWV2TombstonedMessage.react"),{children:a})}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.attachment;a=a.thread;a=c("useCommunityFolder")(a);if(b!=null){b=b.cta1Title;b=b!=null?b:h._("__JHASH__8jyfQXNgswL__JHASH__")}else b=h._("__JHASH__8jyfQXNgswL__JHASH__");if(a!=null)return l.jsx(c("MWXPressable.react"),{linkProps:{url:"https://www.facebook.com"+c("XCometGroupAdminActivitiesControllerRouteBuilder").buildURL({idorvanity:(k||(k=d("I64"))).to_string(a.fbGroupId)})},overlayDisabled:!0,xstyle:function(){return[m.linkText]},children:l.jsx(c("MWXText.react"),{color:"blueLink",type:"meta2",children:b})});else return null}p.displayName=p.name+" [from "+f.id+"]";function a(a){var b=a.isSecureMessage,e=a.message;a=a.outgoing;var g=(i||(i=c("useReStore")))(),h=e.messageId,j=e.threadKey,k=d("MWLSThread").useThread(j),m=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.attachments).getKeyRange(j,h)},[g,h,j],f.id+":134");if(m!=null){var q=m.cta1Type;q=q!=null?q==="xma_view_activity_log":!1}else q=!1;return l.jsxs(l.Fragment,{children:[a?l.jsx(o,{attachment:m}):l.jsx(n,{attachment:m,isSecureMessage:b,message:e}),k!=null&&q&&c("MWCMIsAnyCMThread")(k.threadType)?l.jsx(p,{attachment:m,thread:k}):null]})}a.displayName=a.name+" [from "+f.id+"]";g.MWV2ChatUnsentMessage=a}),98);
__d("MWMessageUnsentTimestampText.react",["fbt","I64","getMessengerPreciseTimestamp","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(a){var b=a.timestampMs;a=a.unsentTimestampMs;return k.jsxs("div",{children:[k.jsx("div",{children:h._("__JHASH__L93MxMH-RPL__JHASH__",[h._param("time",c("getMessengerPreciseTimestamp")((j||(j=d("I64"))).to_float(b)))])}),k.jsx("div",{children:c("gkx")("24122")?h._("__JHASH__6L85PWgp0uQ__JHASH__",[h._param("time",c("getMessengerPreciseTimestamp")((j||(j=d("I64"))).to_float(a)))]):h._("__JHASH__exEcskNfDMO__JHASH__",[h._param("time",c("getMessengerPreciseTimestamp")((j||(j=d("I64"))).to_float(a)))])})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageTimestampTooltip.react",["fbt","I64","LSIntEnum","MWMessageUnsentTimestampText.react","MWXTooltip.react","cr:1654","cr:6194","getMessengerPreciseTimestamp","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react")),m=i.useMemo;function n(a){a=a.ts;return l.jsx("div",{children:a!=null?"Uploaded to EB: "+a:null})}n.displayName=n.name+" [from "+f.id+"]";function o(a){a=a.ts;return l.jsx("div",{children:a!=null&&a>0?"Send Latency: "+a.toString()+"ms":null})}o.displayName=o.name+" [from "+f.id+"]";function a(a){var e=a.children,f=a.message,g=b("cr:1654")==null?void 0:b("cr:1654")(f.messageId),i=b("cr:6194")==null?void 0:b("cr:6194")(f.messageId);a=m(function(){var a=f.isUnsent,b=f.unsentTimestampMs;if((j||(j=d("I64"))).equal(f.displayedContentTypes,(k||(k=d("LSIntEnum"))).ofNumber(65536))){var e=h._("__JHASH__OwAZycr4-8G__JHASH__");return[e,e]}if(b!=null&&a)return[l.jsx(c("MWMessageUnsentTimestampText.react"),{timestampMs:f.timestampMs,unsentTimestampMs:b},"first"),h._("__JHASH__8eZEd_EeDsx__JHASH__")];e=h._("__JHASH__GNnexJRNZQN__JHASH__",[h._param("time",c("getMessengerPreciseTimestamp")((j||(j=d("I64"))).to_float(f.timestampMs)))]);return[l.jsxs("div",{children:[l.jsx(o,{ts:g}),l.jsx(n,{ts:i}),l.jsx("div",{children:e})]},"first"),e]},[f,g,i]);var p=a[0];a=a[1];return l.jsx(c("MWXTooltip.react"),{align:"middle",label:a,position:"start",tooltip:p,children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageRowMessageComponent.react",["GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWClickedMessageContext.react","MWMessageListAttachmentContainer.react","MWMessageReactionsContainer.react","MWPBaseMessage.react","MWPMessageFooter.react","MWPMessageLoggingWrapper.react","MWPMessageReactions.react","MWV2ChatBubbleContainer.react","MWV2ChatEmoji.react","MWV2ChatText.react","MWV2ChatUnsentMessage.react","MWV2MessageTimestampTooltip.react","MWXPressable.react","ReQL","asyncToGeneratorRuntime","cr:120","promiseDone","react","useIsMultiReactionEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));a=j.memo;e=a(function(a){var e=a.hasClickState,f=e===void 0?!1:e,g=a.hasMessageEmphasisRing;e=a.isFirstMessageInGroup;var j=a.isLastMessageInGroup,l=a.isSearchPluginAttachment,m=l===void 0?!1:l,n=a.isSecureMessage,o=a.message,p=a.navigateToRouteForMediaViewer,q=a.nextMessage,r=a.offlineAttachmentId,s=a.outgoing,t=a.prevMessage,u=a.reactions,v=a.reactionsV2,w=a.renderAttachment;l=a.threadType;a=c("MWClickedMessageContext.react").useHook();var x=a.clickedMessageId,y=a.fetchMessageSeenCount,z=a.hasError,A=a.setClickedMessageId,B=(h||(h=c("useReStore")))(),C=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(l),D=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(o.threadKey),E=d("Int64Hooks").useCallbackInt64(function(){if(window.getSelection().toString()!=="")return;c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(B.tables.threads).getKeyRange(o.threadKey))),b=a==null?null:yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(B.tables.community_folders).getKeyRange(a.parentThreadKey));a!=null&&b!=null&&d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{mid:o.messageId},community_id:(i||(i=d("I64"))).to_string(b.folderId),event:"render_seen_count",group_id:i.to_string(b.fbGroupId),source:"message_bubble",surface:"thread_view",thread_id:i.to_string(a.threadKey)});if(x===o.messageId&&!z)return A(null);else return y(o.threadKey,o.messageId,b)})())},[B,x,o.messageId,o.threadKey,z,A,y]);return k.jsx(c("MWPBaseMessage.react"),{checkEmoticon:!0,isFirstMessageInGroup:e,isLastMessageInGroup:j,isSearchPluginAttachment:m,message:o,nextMessage:q,outgoing:s,prevMessage:t,reactions:u,reactionsV2:v,renderAttachment:function(a,b,d){if(m)return null;return w!=null&&n?w(o,t,q,s):k.jsx(c("MWMessageListAttachmentContainer.react"),{connectBottom:b,connectTop:a,hasEmphasisRing:g,hasText:d,message:o,navigateToRouteForMediaViewer:p,outgoing:s})},renderEmoji:function(){return k.jsx(c("MWV2ChatEmoji.react"),{hasEmphasisRing:g,isSecureMessage:n,message:o})},renderMessageBubble:function(a,b,d,e){return k.jsx(c("MWV2ChatBubbleContainer.react"),{connectBottom:d,connectTop:b,hasEmphasisRing:g,message:o,outgoing:s,precedesXMA:e,children:k.jsx(c("MWV2ChatText.react"),{isSecureMessage:n,message:o,outgoing:s})})},renderMessageContainer:function(a,d){var e;e=k.jsx(c("MWPMessageLoggingWrapper.react"),{messageId:o.messageId,optimisticMessageId:(e=r)!=null?e:o.offlineThreadingId,xstyle:d,children:C&&b("cr:120")?k.jsx(b("cr:120"),{message:o,children:a}):k.jsx(c("MWV2MessageTimestampTooltip.react"),{message:o,children:a})});if(f)return k.jsx(c("MWXPressable.react"),{onPress:E,overlayDisabled:!0,xstyle:d,children:e});else return e},renderMessageFooter:function(){if(D)return null;var a=v!=null&&v.length>0;return k.jsx(d("MWPMessageFooter.react").MWPMessageFooter,{outgoing:s,children:!a&&u.length<1?null:k.jsx(d("MWPMessageReactions.react").MWPMessageReactions,{message:o,outgoing:s,reactions:u,reactionsV2:a?v:void 0,children:function(b,d,e,f,g){return k.jsx(c("MWMessageReactionsContainer.react"),{count:d,emojis:b,message:f,reactions:e,reactionsV2:a?v:void 0,threadKey:g})}})})},renderUnsentMessage:function(){return k.jsx(c("MWV2MessageTimestampTooltip.react"),{message:o,children:k.jsx(d("MWV2ChatUnsentMessage.react").MWV2ChatUnsentMessage,{isSecureMessage:n,message:o,outgoing:s})})}})});g.MWMessageRowMessageComponent=e}),98);
__d("MWSearchPluginUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=(a=a==null?void 0:(a=a.split("?")[1])==null?void 0:a.split("&"))!=null?a:[];if(a.length===0)return null;var b=[],c=[],d=[],e="",f="",g="";a.forEach(function(a){a=a.split("=");var h=a[0];a=a[1];a=decodeURIComponent(a);h.includes("source_titles")&&b.push(a.replaceAll("+"," "));h.includes("source_sub_titles")&&c.push(a.replaceAll("+"," "));h.includes("source_urls")&&d.push(a);h==="source_query"&&(e=a.replaceAll("+"," "));h==="source_query_url"&&(f=a);h==="header"&&(g=a)});return{header:g,source_query:e,source_query_url:f,source_sub_titles:c,source_titles:b,source_urls:d}}function b(a){return a.cta1Type==="xma_gen_ai_search_plugin_response_search_engine_attribution"&&a.cta2Type==="xma_gen_ai_search_plugin_response_sources"}f.useSearchPluginSources=a;f.isSearchPlugin=b}),66);
__d("MWMessageSearchPluginMustache.react",["BaseView.react","CurrentUser","IGDWebUtils","MWPMessageListColumn.react","MWSearchPluginUtils","MWXPressable.react","MWXText.react","MessengerWebUXLogger","react","useMWPGetAttachmentCTA","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useMemo,l={mustacheContainer:{display:"x78zum5",flexDirection:"x1q0g3np",$$css:!0},root:{marginStart:"x16n37ib",marginLeft:null,marginRight:null,$$css:!0}};function a(a){var b=a.attachment,e=a.botResponseId,f=a.dialogResource,g=a.flowInstanceId;a=b.attachmentCta1Id;b=b.attachmentCta2Id;a=c("useMWPGetAttachmentCTA")(a);b=c("useMWPGetAttachmentCTA")(b);var h=d("MWSearchPluginUtils").useSearchPluginSources(b==null?void 0:b.nativeUrl),m=d("IGDWebUtils").isInstagramWebSupportedApp(Number(c("CurrentUser").getAppID()));f=c("useMWXLazyDialog")(f);var n=f[0];f=m?"highlight":"blueLink";m=m?"bodyLink4":"body4";var o=k(function(){var a;return{extraData:{botResponseId:(a=e)!=null?a:""},flowInstanceId:g}},[e,g]),p=c("MessengerWebUXLogger").useImpressionLoggerRef(babelHelpers["extends"]({eventName:"search_plugin_attachment_rendered"},o)),q=c("MessengerWebUXLogger").useInteractionLogger(),r=j(function(){q==null?void 0:q(babelHelpers["extends"]({eventName:"search_plugin_see_more"},o))},[q,o]),s=j(function(){h!=null&&(q==null?void 0:q(babelHelpers["extends"]({eventName:"search_plugin_see_sources"},o)),n({botResponseId:e,sources:h}))},[e,o,q,n,h]);return i.jsxs(c("BaseView.react"),{ref:p,xstyle:l.root,children:[i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:4}),i.jsxs("div",{className:"x78zum5 x1q0g3np",children:[i.jsx(c("MWXPressable.react"),{linkProps:{url:a==null?void 0:a.actionUrl},onPress:r,overlayDisabled:!0,children:i.jsx(c("MWXText.react"),{color:f,type:m,children:a!=null&&a.title})}),i.jsx(c("MWXPressable.react"),{children:i.jsx(c("MWXText.react"),{color:"primary",type:"bodyLink4",children:"\xa0\xb7\xa0"})}),i.jsx(c("MWXPressable.react"),{onPress:s,overlayDisabled:!0,children:i.jsx(c("MWXText.react"),{color:f,type:m,children:b!=null&&b.title})})]}),i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:4})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMustacheText",["fbt","I64","LSIntEnum","LSMessageTakedownState","MWPMessageListColumn.react","MWXLink.react","MWXText.react","react","stylex","useGroupsCometCMDisabledChatEntryPointDialog","useMWPGetAttachments"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||d("react"),n={outgoing:{alignSelf:"xpvyfi4",$$css:!0},row:{marginBottom:"x12nagc",marginTop:"x1gslohp",$$css:!0}};function o(a){var b=a.attachment;a=a.outgoing;b=b.mustacheText;return b==null||b===""?null:m.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnWithGutters,{shrinkwrap:!0,children:m.jsx("div",{className:(i||(i=c("stylex")))(n.row,a&&n.outgoing),children:m.jsx(c("MWXText.react"),{color:"tertiary",type:"meta4",children:h._("__JHASH__fTQoFWqjgLD__JHASH__",[h._param("quoted text",b)])})})})}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.outgoing,e=a.threadID,f=!0;a=c("useGroupsCometCMDisabledChatEntryPointDialog")({isGeoBlocked:f,threadID:e});var g=a[0];return m.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnWithGutters,{shrinkwrap:!0,children:m.jsx("div",{className:(i||(i=c("stylex")))(n.row,b&&n.outgoing),children:m.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:m.jsx(c("MWXLink.react"),{display:"inline",onClick:function(){return g({isGeoBlocked:f,threadID:e})},children:h._("__JHASH__P-dEPoA1cwy__JHASH__")})})})})}p.displayName=p.name+" [from "+f.id+"]";function a(a){var b,e=a.message;a=a.outgoing;b=(b=c("useMWPGetAttachments")(e))==null?void 0:b[0];var f=e.takedownState!=null&&(j||(j=d("I64"))).equal(e.takedownState,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageTakedownState").GEO_BLOCKED));if(f)return m.jsx(p,{outgoing:a,threadID:(j||(j=d("I64"))).to_string(e.threadKey)});return b!=null?m.jsx(o,{attachment:b,outgoing:a}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPEditMessageHistoryListText.react",["MWChatTextTransform","MWUnvaultedText","MWXMessageTextWithEntities.react","MWXText.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={incoming:{color:"x18lvrbx",$$css:!0},outgoing:{color:"xyk4ms5",$$css:!0},regular:{marginTop:"x1gslohp",marginEnd:"x11i5rnm",marginBottom:"x12nagc",marginStart:"x1mh8g0r",textAlign:"x1yc453h",whiteSpace:"x126k92a",$$css:!0}};function a(a){var b=a.isSecureMessage,e=a.maxLength,f=a.maxLines,g=a.seeLessLinkProps,i=a.seeMoreLinkProps,l=a.text,m=a.truncationStyle,n=a.outgoing,o=a.ranges,p=a.renderers,q=a.transforms;a=a.xstyleForText;b=d("MWUnvaultedText").useMWUnvaultedText(b,l);return j.jsx(c("MWXText.react"),{color:n?"white":"primary",type:"body3",children:j.jsx("div",{className:(h||(h=c("stylex")))(k.regular,a,n?k.outgoing:k.incoming),dir:"auto",children:j.jsx(c("MWXMessageTextWithEntities.react"),{maxLength:e,maxLines:f,ranges:o,renderers:p,seeLessLinkProps:g,seeMoreLinkProps:i,text:b||"",transforms:(l=q)!=null?l:d("MWChatTextTransform").epdTextTransforms,truncationStyle:m,truncationThreshold:2,withParagraphs:!0})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPEditedMessageHistoryEntry.react",["MWPEditMessageHistoryListText.react","MWXMessageBubble.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={inner:{display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",marginBottom:"xjpr12u",minWidth:"xeuugli",opacity:"xbyyjgo",$$css:!0},outgoing:{flexDirection:"x15zctf7",$$css:!0}},l={weight:"semibold"};function a(a){var b=a.isReply,d=a.isSecureMessage,e=a.messageHistoryEntry;a=a.outgoing;return j.jsx("div",{className:(h||(h=c("stylex")))(k.inner,a&&k.outgoing),"data-testid":void 0,role:"none",children:j.jsx(c("MWXMessageBubble.react"),{align:a?"right":"left",color:a?"outgoing":"incoming",connectBottom:!1,connectTop:!1,hasBorder:!a&&b,variant:"opaque",children:j.jsx(c("MWPEditMessageHistoryListText.react"),{isSecureMessage:d,maxLength:300,maxLines:3,outgoing:a,ranges:[],seeLessLinkProps:l,seeMoreLinkProps:l,text:e.messageContent||"",truncationStyle:"see-more-and-less"})})})}a.displayName=a.name+" [from "+f.id+"]";g.MWPEditedMessageHistoryEntry=a}),98);
__d("MWPEditedMessageHistoryList.react",["MWMessageEditContext.react","MWPEditedMessageHistoryEntry.react","ReQL","ReQLSuspense","react","stylex","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j.useMemo,m={base:{backgroundColor:"x1eb86dx",zIndex:"x1vjfegm",$$css:!0},incoming:{display:"x1lliihq",paddingEnd:"x1k62owy",paddingLeft:null,paddingRight:null,paddingStart:"xd06s5i",$$css:!0},outgoing:{display:"x1lliihq",paddingEnd:"x1sxyh0",paddingLeft:null,paddingRight:null,paddingStart:"x6plb61",$$css:!0}};function n(a,b){var e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.tables.edit_message_history.index("originalMsgPkEditTs")).getKeyRange(a)},[e,a],f.id+":55");return l(function(){return b?g.slice(0,-1):g},[g,b])}function a(a){var b=a.isReply,e=a.isSecureMessage,f=a.msgId,g=a.outgoing;a=a.xstyle;f=n(f,e);var h=d("MWMessageEditContext.react").useMWMessageEditContext()||{showEdits:!1};h=h.showEdits;a=k.jsx("div",{className:(i||(i=c("stylex")))(m.base,g?m.outgoing:m.incoming,a),role:"none",children:f.map(function(a,c){return k.jsx(d("MWPEditedMessageHistoryEntry.react").MWPEditedMessageHistoryEntry,{isReply:b,isSecureMessage:e,messageHistoryEntry:a,outgoing:g},c)})});return h?a:null}a.displayName=a.name+" [from "+f.id+"]";g.MWPEditedMessageHistoryList=a}),98);
__d("MWPinnedMessageDropdownButton.react",["fbt","ix","JSResourceForInteraction","MWXLazyPopoverTrigger.react","TetraIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=c("JSResourceForInteraction")("MWPinnedMessageItemHoverDropdownMenu.react").__setRef("MWPinnedMessageDropdownButton.react");function a(a){var b=a.hidden;a=a.message;return!b&&k.jsx("div",{className:"x1a87ojn x10l6tqk xwa60dl",children:k.jsx(c("MWXLazyPopoverTrigger.react"),{popoverProps:{message:a},popoverResource:l,children:function(a,b){return k.jsx(c("TetraIcon.react"),{"aria-label":h._("__JHASH__2-Q8CjJAjMD__JHASH__"),color:"secondary",icon:d("fbicon")._(i("484386"),16),onPress:b,ref:a})}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("usePinnedIconAnimation",["react","useDebouncedValue"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState,l={mountAnimationIncoming:{animationDuration:"x5hsz1j",animationName:"x1ko8byu",animationTimingFunction:"x4hg4is",$$css:!0},mountAnimationOutgoing:{animationDuration:"x5hsz1j",animationName:"x1c78tyx",animationTimingFunction:"x4hg4is",$$css:!0},unmountAnimation:{animationDuration:"x5hsz1j",animationFillMode:"x10e4vud",animationName:"xvma63k",animationTimingFunction:"x4hg4is",$$css:!0}};function a(a,b){var d=k(!1),e=d[0],f=d[1],g=j(a);d=b?l.mountAnimationOutgoing:l.mountAnimationIncoming;i(function(){a!==g.current&&f(!0),g.current=a},[a]);return{mountAnimation:e?d:null,shouldShow:c("useDebouncedValue")(a,200),unmountAnimation:l.unmountAnimation}}g["default"]=a}),98);
__d("MWPinnedMessageOverlay.react",["MDSPinnedMessageIcon.react","react","stylex","useMWPIsMessagePinned","usePinnedIconAnimation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={alignEnd:{end:"xds687c",left:null,right:null,transform:"x7b9nwf",$$css:!0},alignStart:{start:"x17qophe",left:null,right:null,transform:"x1op1vkj",$$css:!0},container:{position:"x10l6tqk",top:"x13vifvy",zIndex:"xhtitgo",$$css:!0},relative:{position:"x1n2onr6",$$css:!0}};function a(a){var b=a.alreadyRenderedPin,d=a.children,e=a.message;a=a.outgoing;e=c("useMWPIsMessagePinned")(e);var f=c("usePinnedIconAnimation")(e,a),g=f.mountAnimation,i=f.shouldShow;f=f.unmountAnimation;return!i||b?j.jsx(j.Fragment,{children:d}):d&&j.jsxs("div",{className:"x1n2onr6",children:[j.jsx("div",{className:(h||(h=c("stylex")))([k.container,a?k.alignEnd:k.alignStart,e?g:f]),children:j.jsx(c("MDSPinnedMessageIcon.react"),{color:"tertiary",size:16})}),d]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWIsXMARoom",["ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("attachments")).getKeyRange(a.threadKey,a.messageId)},[b,a],f.id+":27");return(e==null?void 0:e.defaultCtaType)==="xma_web_url"&&(e==null?void 0:e.attachmentLoggingType)==="xma_open_native_rooms_invite"}g["default"]=a}),98);
__d("MWPinnedMessageRowFooterNUXWrapperRequireNUX.react",["nux:344","react","useMWIsXMARoom","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=function(){return b("nux:344")==null?void 0:b("nux:344")("WEB_MSGR_PINNED_MESSAGES_NUX")};function a(a){var b=a.isLastMessage,d=a.isOutgoing,e=a.isPinnedMessageList;a=a.message;var f=a.textHasLinks;a=c("useMWIsXMARoom")(a);d=!d&&(f||a)&&b&&!e;return!d?null:i.jsx(j,{})}a.displayName=a.name+" [from "+f.id+"]";e=d("withCometPlaceholder").withCometPlaceholder(a);g["default"]=e}),98);
__d("MWPBaseRepliedMessage.react",["I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MWXPressable.react","react","recoverableViolation","useIsRollcallEnabled","useMWJumpToMessage","useRollcallContributionsXMAActionHandler"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react"),l={elevate:{maxWidth:"x193iq5w",position:"x1n2onr6",zIndex:"x1vjfegm",$$css:!0},pressable:{display:"x1lliihq",$$css:!0}};function a(a){var b=a.clickToNavigateToReply;b=b===void 0?!0:b;var e=a.earlyCheckForReplyStatus;e=e===void 0?!1:e;var f=a.isSecureMessage,g=a.message,h=a.outgoing,m=a.renderAttachment,n=a.renderExpiredMessage,o=a.renderGIF,p=a.renderMedia,q=a.renderPost,r=a.renderRemovedMessage,s=a.renderRollcallContribution,t=a.renderSticker,u=a.renderStory,v=a.renderTextMessage,w=a.renderUnavailableMessage;a=a.renderVideo;var x=g.replyAttachmentId,y=g.replyAttachmentType,z=g.replyMessageText;y!=null&&(!e||g.replyStatus!=null&&!(i||(i=d("I64"))).equal(g.replyStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").DELETED)))?((i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO))||(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO)))&&g.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(g.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY))?e=k.jsx(u,{isSecureMessage:f,message:g,outgoing:h}):x!=null?(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER))?e=k.jsx(m,{message:g,outgoing:h}):(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO))?p!=null?e=k.jsx(p,{isSecureMessage:f,message:g,outgoing:h}):e=k.jsx(m,{message:g,outgoing:h}):(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_PHOTO_CONTRIBUTION))||(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_VIDEO_CONTRIBUTION))||(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_TEXT_CONTRIBUTION))?s!=null?e=k.jsx(s,{message:g,outgoing:h}):e=k.jsx(m,{message:g,outgoing:h}):(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").MULTIPHOTO))?p!=null?e=k.jsx(p,{isSecureMessage:f,message:g,outgoing:h}):e=k.jsx(m,{message:g,outgoing:h}):(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO))?a!=null?e=k.jsx(a,{isSecureMessage:f,message:g,outgoing:h}):e=k.jsx(m,{message:g,outgoing:h}):(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF))?o!=null?e=k.jsx(o,{isSecureMessage:f,message:g,outgoing:h}):e=k.jsx(m,{message:g,outgoing:h}):(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER))?t!=null?e=k.jsx(t,{isSecureMessage:f,message:g,outgoing:h}):e=k.jsx(m,{message:g,outgoing:h}):(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").LINK))||(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PERMANENT_RAVEN_PHOTO))||(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PERMANENT_RAVEN_VIDEO))||(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").AUDIO))?e=k.jsx(m,{message:g,outgoing:h}):q!=null?e=k.jsx(q,{message:g,outgoing:h}):e=c("recoverableViolation")("Unknown attachment type: "+(i||(i=d("I64"))).to_string(y),"messenger_comet"):(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER))&&t!=null?e=k.jsx(t,{message:g,outgoing:h}):(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").XMA))&&m!=null?z!=null&&z!==""?e=k.jsx(v,{message:g,outgoing:h,text:z}):e=k.jsx(m,{message:g,outgoing:h}):e=null:x!=null?g.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(g.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS))&&z!=null&&z!==""?e=k.jsx(v,{message:g,outgoing:h,text:z}):p!=null?e=k.jsx(p,{isSecureMessage:f,message:g,outgoing:h}):e=k.jsx(m,{message:g,outgoing:h}):g.replyStatus!=null&&(i||(i=d("I64"))).equal(g.replyStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").DELETED))?r!=null?e=k.jsx(r,{outgoing:h}):e=null:g.replyStatus!=null&&(i||(i=d("I64"))).equal(g.replyStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").EXPIRED))?n!=null?e=k.jsx(n,{outgoing:h}):e=null:g.replyStatus!=null&&(i||(i=d("I64"))).equal(g.replyStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE))?w!=null?e=k.jsx(w,{outgoing:h}):e=null:z!=null&&g.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(g.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE))?z!==""?e=k.jsx(v,{message:g,outgoing:h,text:z}):e=k.jsx(m,{message:g,outgoing:h}):e=null;u=k.jsx("div",{className:"x193iq5w x1n2onr6 x1vjfegm",children:e});var A=g.replySourceTimestampMs,B=g.replySourceId,C=c("useMWJumpToMessage")("Pinned");s=y!=null&&((i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_PHOTO_CONTRIBUTION))||(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_VIDEO_CONTRIBUTION))||(i||(i=d("I64"))).equal(y,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_TEXT_CONTRIBUTION)));var D=d("useRollcallContributionsXMAActionHandler").useRollcallContributionsXMAActionHandler();a=c("useIsRollcallEnabled")(g.threadKey);if(B!=null&&A!=null&&b){o=function(){C(B,A)};if(s&&a){var E=(i||(i=d("I64"))).of_string((q=g.replyAttachmentExtra)!=null?q:"0"),F=g.threadKey,G=(t=g.replySourceId)!=null?t:null;o=function(){D(E,F,G,null)}}return k.jsx(c("MWXPressable.react"),{onPress:o,overlayDisabled:!0,xstyle:function(){return[l.pressable]},children:u})}else return u}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ReplyTo.react",["fbt","CometScreenReaderText.react","MWXMessageBubble.react","MWXText.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={content:{overflowWrap:"x1mzt3pk",paddingBottom:"x1l90r2v",paddingTop:"x1iorvi4",$$css:!0}};function a(a){var b=a.children,d=a.outgoing;a=a.xstyle;a=a===void 0?!1:a;return k.jsxs(c("MWXMessageBubble.react"),{align:d?"right":"left",color:"quoted",connectBottom:!0,connectTop:!1,precedesXMA:!1,children:[k.jsx(c("CometScreenReaderText.react"),{text:h._("__JHASH__pLiiclD1jc1__JHASH__")}),k.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:k.jsx("div",{className:(i||(i=c("stylex")))(l.content,a),"data-testid":void 0,children:b})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesAttachment.react",["fbt","ix","MWV2ReplyTo.react","MWXIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");function a(a){a=a.outgoing;var b=h._("__JHASH__ExfgVu3ZeIV__JHASH__");return k.jsx(c("MWV2ReplyTo.react"),{outgoing:a,children:k.jsxs("div",{className:"x6s0dn4 x78zum5 x1k4tb9n",children:[b,k.jsx("span",{className:"x1lliihq x1i64zmx",children:k.jsx(c("MWXIcon.react"),{color:"secondary",icon:d("fbicon")._(i("537728"),12)})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesExpired.react",["fbt","MWV2ReplyTo.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={root:{fontStyle:"x1k4tb9n",$$css:!0}};function a(a){a=a.outgoing;var b=h._("__JHASH__LRWYiWT4b63__JHASH__");return j.jsx(c("MWV2ReplyTo.react"),{outgoing:a,xstyle:k.root,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesImage.react",["I64","MWLSThreadDisplayContext","MWPStableImage.react","MWPThreadCapabilitiesContext","cr:4509","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react"),l={incoming:{borderBottomStartRadius:"x10y3i5r",$$css:!0},outgoing:{borderBottomEndRadius:"xrt01vj",$$css:!0},root:{borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",display:"x1lliihq",filter:"xin470k",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",width:"x14atkfc",$$css:!0},rootHasSticker:{borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",$$css:!0}};function a(a){var e=a.height,f=a.imageAlt;f=f===void 0?"":f;var g=a.isSticker;g=g===void 0?!1:g;var j=a.outgoing,m=a.src;a=a.width;var n=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();n=n==="ChatTab";var o=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();o=o.blurMediaEnabled;o=c("gkx")("24098")&&o;j=g?!1:j?l.outgoing:l.incoming;f=k.jsx(d("MWPStableImage.react").MWPStableImage,{alt:f,className:(h||(h=c("stylex")))(l.root,g&&l.rootHasSticker,j),height:e!=null?(i||(i=d("I64"))).to_float(e):void 0,maxHeight:100,maxWidth:n?180:300,src:m,width:a!=null?(i||(i=d("I64"))).to_float(a):void 0});return b("cr:4509")!=null&&o&&!g?k.jsx(b("cr:4509"),{mediaType:"Image",overlayDisabled:!0,type:"image",uncoverable:!1,url:m,xstyle:[l.root,j],children:f}):f}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesGIF.react",["fbt","CometPlaceholder.react","I64","LSMediaUrlAttachment","MWRepliesImage.react","MWV2ReplyTo.react","ReQL","ReQLSuspense","cr:6930","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||d("react"),m={italic:{fontStyle:"x1k4tb9n",$$css:!0}};function n(a){var e=a.isSecureMessage;e=e===void 0?!1:e;var g=a.message;a=a.outgoing;var k=(i||(i=c("useReStore")))(),n=d("ReQLSuspense").useFirst(function(){var a,b;a=(a=g.replyAttachmentId)!=null?a:(j||(j=d("I64"))).zero;b=(b=g.replySourceId)!=null?b:"";return d("ReQL").fromTableAscending(k.tables.attachments).getKeyRange(g.threadKey,b,(j||(j=d("I64"))).to_string(a))},[k,g],f.id+":44"),o;n!=null&&(b("cr:6930")==null||!e?o=d("LSMediaUrlAttachment").previewUrl(n):o=b("cr:6930").getAttachmentBlobNonOptional(n.attachmentFbid,"MWRepliesGIF"));if(o!=null&&o!=="")return l.jsx(c("MWRepliesImage.react"),{height:g.replyMediaPreviewHeight,outgoing:a,src:o,width:g.replyMediaPreviewWidth});else return l.jsx(c("MWV2ReplyTo.react"),{outgoing:a,xstyle:m.italic,children:h._("__JHASH__kPmtZiB6viN__JHASH__")})}n.displayName=n.name+" [from "+f.id+"]";function a(a){return l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(n,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("getLSMediaMessageReplyMediaUrl",["LSMediaUrlUtils","rewriteFallbackUrl"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.replyMediaExpirationTimestampMs;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b))return c("rewriteFallbackUrl")(a.replyMediaUrlFallback);else return a.replyMediaUrl}g["default"]=a}),98);
__d("MWRepliesMedia.react",["fbt","ix","CometIcon.react","CometPlaceholder.react","I64","IconSource","MWRepliesImage.react","MWV2ReplyTo.react","ReQL","ReQLSuspense","WAArmadilloXMA.pb","cr:6930","getLSMediaMessageReplyMediaUrl","react","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=l||d("react"),n={FBIcon:{marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",$$css:!0},italic:{fontStyle:"x1k4tb9n",$$css:!0},postBackground:{alignItems:"x6s0dn4",backdropFilter:"x99fzhk",background:"x18aeczl",borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",display:"x78zum5",flexDirection:"xdt5ytf",height:"xpyat2d",justifyContent:"xl56j7k",textAlign:"x2b8uid",width:"x1exxlbk",$$css:!0},storyBackground:{alignItems:"x6s0dn4",backdropFilter:"x1qb2erx",background:"xjw5052",borderTopStartRadius:"xyi19xy",borderTopEndRadius:"x1ccrb07",borderBottomEndRadius:"xtf3nb5",borderBottomStartRadius:"x1pc53ja",display:"x78zum5",flexDirection:"xdt5ytf",height:"x1wkxgih",justifyContent:"xl56j7k",opacity:"x197sbye",textAlign:"x2b8uid",width:"xni59qk",$$css:!0}};function o(a){var e=a.isSecureMessage,g=a.message;a=a.outgoing;var l=h._("__JHASH__bznTdd53oJN__JHASH__"),o=(j||(j=c("useReStore")))(),p=d("ReQLSuspense").useFirst(function(){var a=g.replyAttachmentId,b=g.replySourceId;return b!=null&&a!=null?d("ReQL").fromTableAscending(o.tables.attachments).getKeyRange(g.threadKey,b,(k||(k=d("I64"))).to_string(a)):d("ReQL").empty()},[o,g],f.id+":84"),q=p!=null&&p.hasXma&&e&&p.gatingType===String(d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE);if(p!=null&&p.hasXma&&e){var r;r=(r=p.defaultCtaType)!=null?r:""}else r="";var s=new(c("IconSource"))("FB",i("1423124"),28);if(q)if(r==="xma_montage_share")return m.jsx("div",{className:"x6s0dn4 x1qb2erx xjw5052 xyi19xy x1ccrb07 xtf3nb5 x1pc53ja x78zum5 xdt5ytf x1wkxgih xl56j7k x197sbye x2b8uid xni59qk",children:m.jsx("div",{className:"x14vqqas xq8finb xod5an3 x16n37ib",children:m.jsx(c("CometIcon.react"),{icon:s})})});else return m.jsx("div",{className:"x6s0dn4 x99fzhk x18aeczl x1tlxs6b x1g8br2z x1gn5b1j x230xth x78zum5 xdt5ytf xpyat2d xl56j7k x2b8uid x1exxlbk",children:m.jsx("div",{className:"x14vqqas xq8finb xod5an3 x16n37ib",children:m.jsx(c("CometIcon.react"),{icon:s})})});q=b("cr:6930")!=null&&e?function(a){return p!=null&&p.hasXma?a.replyAttachmentId!=null?b("cr:6930").getInfoUrlXMA(p,"preview"):void 0:a.replyAttachmentId!=null?b("cr:6930").getAttachmentBlobNonOptional((k||(k=d("I64"))).to_string(a.replyAttachmentId),"MWRepliesMedia"):void 0}:c("getLSMediaMessageReplyMediaUrl");r=q(g);return r!=null&&r!==""?m.jsx(c("MWRepliesImage.react"),{height:g.replyMediaPreviewHeight,imageAlt:h._("__JHASH__eNDXc9eUfIy__JHASH__"),outgoing:a,src:r,width:g.replyMediaPreviewWidth}):m.jsx(c("MWV2ReplyTo.react"),{outgoing:a,xstyle:n.italic,children:l})}o.displayName=o.name+" [from "+f.id+"]";function a(a){var b=a.isSecureMessage;b=b===void 0?!1:b;var d=a.message;a=a.outgoing;return m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsx(o,{isSecureMessage:b,message:d,outgoing:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesRemoved.react",["fbt","MWV2ReplyTo.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={root:{fontStyle:"x1k4tb9n",$$css:!0}};function a(a){a=a.outgoing;var b=h._("__JHASH__uG4wbYWD9QU__JHASH__");return j.jsx(c("MWV2ReplyTo.react"),{outgoing:a,xstyle:k.root,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesRollcallContribution.react",["fbt","CometBlurredBackgroundImage.react","CometImageCover.react","CometPlaceholder.react","I64","Int64Hooks","LSFactory","LSIssuePointQueryForRollCallConversionStoredProcedure","MWV2ReplyTo.react","ReQL","ReQLSuspense","cr:2472","getLSMediaMessageReplyMediaUrl","isStringNullOrEmpty","promiseDone","react","stylex","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||d("react"),n=213,o=213,p={blurredImage:{borderBottomStartRadius:"x230xth",borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",$$css:!0},italic:{fontStyle:"x1k4tb9n",$$css:!0},outgoing:{borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x230xth",$$css:!0},unblurredImageContainer:{borderBottomStartRadius:"x230xth",borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",opacity:"x197sbye",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function a(a){return m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsx(q,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";function q(a){var e,g=a.message;a=a.outgoing;var l=c("isStringNullOrEmpty")(g.replyMessageText)?h._("__JHASH__YG4J77RBBDH__JHASH__"):b("cr:2472")==null?g.replyMessageText:b("cr:2472").unvault(g.replyMessageText),q=(i||(i=c("useReStore")))(),r=(k||(k=d("I64"))).of_string((e=g.replyAttachmentExtra)!=null?e:"0"),s=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(q.tables.roll_calls).getKeyRange(r)},[q,r],f.id+":81"),t=g.threadKey;d("Int64Hooks").useEffectInt64(function(){s||c("promiseDone")(q.runInTransaction(function(a){return c("LSIssuePointQueryForRollCallConversionStoredProcedure")(c("LSFactory")(a),{rollCallId:r,threadKey:t})},"readwrite"))},[s,r,t,q]);e=(e=s==null?void 0:s.isBlurred)!=null?e:!1;var u=c("getLSMediaMessageReplyMediaUrl")(g),v=g.replyMediaPreviewHeight!=null?(k||(k=d("I64"))).to_float(g.replyMediaPreviewHeight):0;g=g.replyMediaPreviewWidth!=null?(k||(k=d("I64"))).to_float(g.replyMediaPreviewWidth):0;var w=Math.min(1,n/v),x=Math.min(1,o/g);v=Math.round(v*Math.min(w,x));g=Math.round(g*Math.min(w,x));return!c("isStringNullOrEmpty")(u)?e?m.jsx("div",{style:{height:v,width:g},children:m.jsx(c("CometBlurredBackgroundImage.react"),{src:u,xstyle:[p.blurredImage,a&&p.outgoing]})}):m.jsx("div",{className:(j||(j=c("stylex")))([p.unblurredImageContainer,a&&p.outgoing]),style:{height:v,width:g},children:m.jsx(c("CometImageCover.react"),{alt:"",src:u})}):m.jsx(c("MWV2ReplyTo.react"),{outgoing:a,xstyle:p.italic,children:l})}q.displayName=q.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesSticker.react",["fbt","CometPlaceholder.react","I64","LSMediaUrlAttachment","MWRepliesImage.react","MWV2ReplyTo.react","MWV2Sticker.react","ReQL","ReQLSuspense","cr:2472","cr:6930","cr:6931","getLSMediaMessageReplyMediaUrl","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||d("react"),m={italic:{fontStyle:"x1k4tb9n",$$css:!0},replyHotLikeSticker:{filter:"xin470k",transform:"xst6bnn",$$css:!0},replySticker:{filter:"xin470k",$$css:!0}};function a(a){var e,g=a.isSecureMessage;g=g===void 0?!1:g;var k=a.message;a=a.outgoing;var n=h._("__JHASH__13yhS1gywbZ__JHASH__"),o=(i||(i=c("useReStore")))(),p=d("ReQLSuspense").useFirst(function(){var a=k.replyAttachmentId,b=k.replySourceId;return b!=null&&a!=null?d("ReQL").fromTableAscending(o.tables.attachments).getKeyRange(k.threadKey,b,(j||(j=d("I64"))).to_string(a)):d("ReQL").empty()},[o,k],f.id+":59");e=(e=k.replyMessageText)!=null?e:"";e=(b("cr:2472")!=null?b("cr:2472").unvault(e):e)==="\ud83d\udc4d";if(e)if(b("cr:6931")==null)return null;else return l.jsx(b("cr:6931"),{xstyle:m.replyHotLikeSticker});e=c("getLSMediaMessageReplyMediaUrl")(k);if(e!=null&&p==null)return l.jsx(c("MWRepliesImage.react"),{height:k.replyMediaPreviewHeight,isSticker:!0,outgoing:a,src:e,width:k.replyMediaPreviewWidth});if(p==null)return l.jsx(c("MWV2ReplyTo.react"),{outgoing:a,xstyle:m.italic,children:n});b("cr:6930")==null||!g?e=function(a){return d("LSMediaUrlAttachment").previewUrl(a)}:e=function(a){return b("cr:6930").getAttachmentBlobNonOptional(a.attachmentFbid,"MWRepliesSticker")};return l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MWV2Sticker.react"),{attachment:p,getPreviewUrl:e,scale:.6,xstyle:m.replySticker})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesStory.react",["fbt","CometPlaceholder.react","I64","MWRepliesImage.react","MWXPressable.react","XCometStoriesControllerRouteBuilder","cr:6930","getLSMediaMessageReplyMediaUrl","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(a){return k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(l,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";function l(a){var e=a.isSecureMessage;e=e===void 0?!1:e;var f=a.message;a=a.outgoing;var g=f.replySourceId;g=g!=null?e?g:(g=c("XCometStoriesControllerRouteBuilder").buildUri({card_id:window.btoa("S:_ISC:"+g),view_single:!0}).setDomain("www.facebook.com"))==null?void 0:(g=g.setProtocol("https"))==null?void 0:g.toString():void 0;e=b("cr:6930")!=null&&e?function(a){return a.replyAttachmentId!=null?b("cr:6930").getAttachmentBlobNonOptional((j||(j=d("I64"))).to_string(a.replyAttachmentId),"MWRepliesStory"):null}:c("getLSMediaMessageReplyMediaUrl");e=e(f);return e==null?null:k.jsx(c("MWXPressable.react"),{"aria-label":h._("__JHASH__thxINaLEtLl__JHASH__"),linkProps:g!=null?{url:g}:void 0,overlayDisabled:!0,children:k.jsx(c("MWRepliesImage.react"),{outgoing:a,src:e})})}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesText.react",["MWChatTextFormatting","MWChatTextTransform","MWV2ReplyTo.react","MWXMessageTextWithEntities.react","cr:2472","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a){var e=a.outgoing,f=a.text;a=j(function(){return{MessengerTextFormatting:[d("MWChatTextFormatting").messageRenderer]}},[]);var g=j(function(){return d("MWChatTextFormatting").getFormattingRanges(f)},[f]),h=b("cr:2472")==null?f:b("cr:2472").unvault(f);return i.jsx(c("MWV2ReplyTo.react"),{outgoing:e,children:i.jsx("div",{className:"xi81zsa x126k92a",children:i.jsx(c("MWXMessageTextWithEntities.react"),{maxLength:120,maxLines:3,ranges:g,renderers:a,text:h,transforms:d("MWChatTextTransform").epdTextTransformsNoVault,truncationStyle:"ellipsis-only",withParagraphs:!1})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesUnavailable.react",["fbt","MWV2ReplyTo.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={root:{fontStyle:"x1k4tb9n",$$css:!0}};function a(a){a=a.outgoing;var b=h._("__JHASH__3TzRhHHRgwV__JHASH__");return j.jsx(c("MWV2ReplyTo.react"),{outgoing:a,xstyle:k.root,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesVideo.react",["fbt","ix","CometPlaceholder.react","FDSImage.react","I64","LSMediaUrlAttachment","MWLSThreadDisplayContext","MWPStableImage.react","MWV2ReplyTo.react","ReQL","ReQLSuspense","cr:6930","react","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=l||d("react"),n={italic:{fontStyle:"x1k4tb9n",$$css:!0},playButtonContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"xdt5ytf",height:"x5yr21d",justifyContent:"xl56j7k",position:"x10l6tqk",start:"x17qophe",left:null,right:null,top:"x13vifvy",width:"xh8yej3",$$css:!0},thumbnail:{borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",filter:"xin470k",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},thumbnailContainer:{position:"x1n2onr6",$$css:!0}};function o(a){var e=a.isSecureMessage;e=e===void 0?!1:e;var g=a.message;a=a.outgoing;var l=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();l=l==="ChatTab";var o=(j||(j=c("useReStore")))(),p=d("ReQLSuspense").useFirst(function(){var a,b;a=(a=g.replyAttachmentId)!=null?a:(k||(k=d("I64"))).zero;b=(b=g.replySourceId)!=null?b:"";return d("ReQL").fromTableAscending(o.tables.attachments).getKeyRange(g.threadKey,b,(k||(k=d("I64"))).to_string(a))},[o,g],f.id+":69"),q;p!=null&&(b("cr:6930")==null||!e?q=d("LSMediaUrlAttachment").previewUrl(p):q=b("cr:6930").getAttachmentBlobNonOptional(p.attachmentFbid,"MWRepliesVideo"));if(q==null)return m.jsx(c("MWV2ReplyTo.react"),{outgoing:a,xstyle:n.italic,children:h._("__JHASH__7WGJ1daCkBD__JHASH__")});e=g.replyMediaPreviewHeight!=null?(k||(k=d("I64"))).to_float(g.replyMediaPreviewHeight):void 0;a=g.replyMediaPreviewWidth!=null?(k||(k=d("I64"))).to_float(g.replyMediaPreviewWidth):void 0;var r=100;l=l?180:300;(p==null?void 0:p.previewUrlMimeType)!=null?p=m.jsx(d("MWPStableImage.react").MWPStableImage,{alt:"",className:"x1tlxs6b x1g8br2z x1gn5b1j x230xth xin470k x6ikm8r x10wlt62",height:e,maxHeight:r,maxWidth:l,src:q,width:a}):p=m.jsx("video",{alt:"",className:"x1tlxs6b x1g8br2z x1gn5b1j x230xth xin470k x6ikm8r x10wlt62",height:e!=null&&e>r?"100%":e,src:q,style:{maxHeight:r,maxWidth:l},width:a!=null&&a>l?"100%":a});return m.jsxs("div",{className:"x1n2onr6",children:[p,m.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf x5yr21d xl56j7k x10l6tqk x17qophe x13vifvy xh8yej3",children:m.jsx(c("FDSImage.react"),{src:i("354763")})})]})}o.displayName=o.name+" [from "+f.id+"]";function a(a){return m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsx(o,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliedMessage.react",["MWPBaseRepliedMessage.react","MWRepliesAttachment.react","MWRepliesExpired.react","MWRepliesGIF.react","MWRepliesMedia.react","MWRepliesRemoved.react","MWRepliesRollcallContribution.react","MWRepliesSticker.react","MWRepliesStory.react","MWRepliesText.react","MWRepliesUnavailable.react","MWRepliesVideo.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.isSecureMessage;b=b===void 0?!1:b;var d=a.message;a=a.outgoing;return i.jsx(c("MWPBaseRepliedMessage.react"),{isSecureMessage:b,message:d,outgoing:a,renderAttachment:c("MWRepliesAttachment.react"),renderExpiredMessage:c("MWRepliesExpired.react"),renderGIF:c("MWRepliesGIF.react"),renderMedia:c("MWRepliesMedia.react"),renderRemovedMessage:c("MWRepliesRemoved.react"),renderRollcallContribution:c("MWRepliesRollcallContribution.react"),renderSticker:c("MWRepliesSticker.react"),renderStory:c("MWRepliesStory.react"),renderTextMessage:c("MWRepliesText.react"),renderUnavailableMessage:c("MWRepliesUnavailable.react"),renderVideo:c("MWRepliesVideo.react")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatErrorBubble.react",["fbt","MWV2TombstonedMessage.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={vr:{height:"x36qwtl",width:"xh8yej3",$$css:!0},withBackground:{backgroundColor:"x1eb86dx",$$css:!0},withRepliedMessage:{zIndex:"x1vjfegm",$$css:!0}};function a(a){a=a.isReply;return j.jsxs(d("react-strict-dom").html.div,{style:a?k.withRepliedMessage:k.withBackground,children:[a?null:j.jsx(d("react-strict-dom").html.div,{style:[k.vr,k.withBackground]}),j.jsx(c("MWV2TombstonedMessage.react"),{xstyle:k.withBackground,children:h._("__JHASH__fgvjfNhcDBr__JHASH__")})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageProfilePhotoMenuQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6825449144230575"}),null);
__d("MWV2MessageProfilePhotoMenuQuery$Parameters",["MWV2MessageProfilePhotoMenuQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWV2MessageProfilePhotoMenuQuery_facebookRelayOperation"),metadata:{},name:"MWV2MessageProfilePhotoMenuQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWV2MessageProfilePhotoMenu.entrypoint",["JSResourceForInteraction","MWV2MessageProfilePhotoMenuQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.groupID;a=a.userID;return{queries:{messageProfilePhotoMenuQueryRef:{parameters:c("MWV2MessageProfilePhotoMenuQuery$Parameters"),variables:{groupID:b,userID:a}}}}},root:c("JSResourceForInteraction")("MWV2MessageProfilePhotoMenu.react").__setRef("MWV2MessageProfilePhotoMenu.entrypoint")};g["default"]=a}),98);
__d("MWV2MessageProfilePhotoContent.react",["fbt","CometEntryPointPopoverTrigger.react","CometImageCover.react","I64","LSContactBitOffset","MDSAccountSvgIcon.react","MDSGlimmer.react","MWCMIsAnyCMThread","MWLSThread","MWPActor.react","MWPreloadableQueries","MWV2MessageProfilePhotoMenu.entrypoint","MWXIcon.react","MWXPressable.react","MWXTooltip.react","QE2Logger","ReQLSuspense","SVGIcon","getLSMediaContactProfilePictureUrl","qex","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||d("react"),m=h._("__JHASH__G4Bi2CYTkJR__JHASH__"),n={glimmer:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"x1fgtraw",width:"xgd8bvy",$$css:!0},noProfilePhoto:{width:"xgd8bvy",$$css:!0},profile:{alignItems:"xuk3077",display:"x78zum5",flexShrink:"x2lah0s",height:"x1fgtraw",width:"xgd8bvy",$$css:!0}};function a(a){var b=a.ariaHidden;b=b===void 0?!1:b;var e=a.contact,g=a.isGroupThread,h=a.isLastMessageInGroup,k=a.message;a=a.nickname;var o=d("MWPActor.react").useActor(),p=(i||(i=c("useReStore")))(),q=d("MWLSThread").useThread(k.threadKey),r=q==null?void 0:q.parentThreadKey;q=q==null?void 0:q.threadType;var s=d("ReQLSuspense").useFirst(function(){var a;return d("MWPreloadableQueries").getCommunityFolderQuery(p,(a=r)!=null?a:(j||(j=d("I64"))).zero).map(function(a){return a.fbGroupId})},[p,r],f.id+":79"),t=q?c("MWCMIsAnyCMThread")(q):!1;if(!h)return l.jsx("div",{className:"xgd8bvy"});if(k.takedownState!=null)q=l.jsx(c("MWXTooltip.react"),{align:"middle",position:"start",tooltip:m,children:l.jsx(c("MWXIcon.react"),{alt:m,icon:d("SVGIcon").legacySVGIcon(function(){return l.jsx(c("MDSAccountSvgIcon.react"),{color:"disabled",size:28,viewBox:"6 6 24 24"})})})});else if(e!=null&&c("getLSMediaContactProfilePictureUrl")(e)!==""){var u;h=a!=null?a+" ("+e.name+")":e.name;a=(a=d("LSContactBitOffset").has(77,e))!=null?a:!1;u=(u=d("LSContactBitOffset").has(84,e))!=null?u:!1;var v=l.jsx(c("CometImageCover.react"),{alt:e.name,src:c("getLSMediaContactProfilePictureUrl")(e),style:{borderRadius:"50%"}});q=l.jsx(c("MWXTooltip.react"),{align:"middle",onVisibilityChange:function(a){a&&t&&d("QE2Logger").logExposureForUser("cm_web_group_message_profile_photo_menu")},position:"start",tooltip:h,children:t&&!u&&!a&&c("qex")._("20")?l.jsx(c("CometEntryPointPopoverTrigger.react"),{entryPointParams:{groupID:(j||(j=d("I64"))).to_string((e=s)!=null?e:(j||(j=d("I64"))).zero),userID:(j||(j=d("I64"))).to_string(o)},otherProps:{message:k},popoverEntryPoint:c("MWV2MessageProfilePhotoMenu.entrypoint"),position:"above",children:function(a,b,e,f,h,i){return g?l.jsx(c("MWXPressable.react"),{onHoverIn:f,onHoverOut:h,onPress:function(){d("QE2Logger").logExposureForUser("cm_web_group_message_profile_photo_menu"),b()},onPressIn:i,overlayRadius:"50%",ref:a,xstyle:n.profile,children:v}):v}}):v})}else q=l.jsx(c("MDSGlimmer.react"),{index:1,xstyle:n.glimmer});return l.jsx("div",{"aria-hidden":b,className:"xuk3077 x78zum5 x2lah0s x1fgtraw xgd8bvy",children:q})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageProfilePhoto.react",["MWPContactContext.react","MWV2MessageProfilePhotoContent.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.ariaHidden;b=b===void 0?!1:b;var e=a.isGroupThread,f=a.isLastMessageInGroup;a=a.message;var g=d("MWPContactContext.react").useMWPContactStableContext(),h=g.contact;g=g.nickname;return i.jsx(c("MWV2MessageProfilePhotoContent.react"),{ariaHidden:b,contact:h,isGroupThread:e,isLastMessageInGroup:f,message:a,nickname:g})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ReplyError.react",["fbt","MWV2ReplyTo.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={root:{fontStyle:"x1k4tb9n",$$css:!0}};function a(a){a=a.outgoing;return j.jsx(c("MWV2ReplyTo.react"),{outgoing:a,xstyle:k.root,children:h._("__JHASH__962PS6SI-P2__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("isMWEditedMessage",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.editCount!=null&&(h||(h=d("I64"))).gt(a.editCount,(h||(h=d("I64"))).zero);return b&&!a.isUnsent}g["default"]=a}),98);
__d("useMWIsReplyToAuthor",["I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return a.replySourceTypeV2!=null&&(h||(h=d("I64"))).equal(a.replySourceTypeV2,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").XMA))}g["default"]=a}),98);
__d("MWMessageRowBody.react",["CometErrorBoundary.react","CometPlaceholder.react","I64","JSResourceForInteraction","MWClickedMessageContext.react","MWExtraPinnedMessagePadding.react","MWMessageListLoggingContext","MWMessagePromptPopoverTrigger.react","MWMessageRowActions.react","MWMessageRowMessageComponent.react","MWMessageSearchPluginMustache.react","MWMustacheText","MWPBaseMessageListRow.react","MWPEditedMessageHistoryList.react","MWPMessageIsReply","MWPMessageListColumn.react","MWPMessageParsingUtils","MWPMessageReactions.react","MWPinnedMessageDropdownButton.react","MWPinnedMessageOverlay.react","MWPinnedMessageRowFooterNUXWrapperRequireNUX.react","MWRepliedMessage.react","MWSearchPluginUtils","MWV2ChatErrorBubble.react","MWV2MessageProfilePhoto.react","MWV2ReplyError.react","cr:277","deferredLoadComponent","gkx","isMWEditedMessage","react","requireDeferredForDisplay","stylex","useIsMultiReactionEnabled","useMWIsReplyToAuthor","useMWPGetAttachments","useShowPersistentGenAIFeedbackButtons"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||d("react"),l=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWMessageReactionsContainerV2.react").__setRef("MWMessageRowBody.react")),m={alignEnd:{alignItems:"xuk3077",marginEnd:"x1c0yhlu",marginLeft:null,marginRight:null,$$css:!0},emptyGutterForTextReceipts:{width:"x1xc55vz",$$css:!0},multiReactContainer:{display:"x78zum5",flexDirection:"x1q0g3np",$$css:!0},multiReactContainerOutgoing:{alignSelf:"xpvyfi4",$$css:!0},reply:{alignItems:"x1cy8zhl",display:"x78zum5",flexDirection:"xdt5ytf",$$css:!0},replyMargin:{marginBottom:"x1q5jw98",minHeight:"xvnwnnf",$$css:!0}};function a(a){var e=a.focused,f=a.hasClickState,g=a.hasMessageEmphasisRing,i=a.hovered,n=a.incoming,o=a.isDialogOpened,p=a.isFirstMessageInGroup,q=a.isGroupThread,r=a.isModal,s=a.isPinnedMessageList,t=a.isSecureMessage,u=a.isStandardMessageList,v=a.message,w=a.navigateToRouteForMediaViewer,x=a.nextMessage,y=a.prevMessage,z=a.renderAttachment,A=a.shouldUseReactionsV2,B=a.threadType,C=d("MWPMessageReactions.react").useReactions(v),D=d("MWPMessageReactions.react").useReactionsV2(v),E=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(v.threadKey);a=d("MWMessageListLoggingContext").useFlowInstanceId();var F=c("MWClickedMessageContext.react").useHook();F=F.clickedMessageId;var G=c("MWPMessageIsReply")(v),H=c("isMWEditedMessage")(v),I=x==null,J=s||d("MWPMessageParsingUtils").isEndOfGroup(v,x),K=!n;n=n&&q;var L=c("useMWPGetAttachments")(v),M=L.length>0;M=M&&d("MWSearchPluginUtils").isSearchPlugin(L[0]);var N=c("useShowPersistentGenAIFeedbackButtons")(v.threadKey,v.botResponseId,c("gkx")("26372")),O=E&&D.some(function(a){return(j||(j=d("I64"))).to_int32(a.count)>0}),P=(C.length>0||D.length>0)&&!E,Q=c("useMWIsReplyToAuthor")(v);Q=Q||v.replySourceId==null?!1:v.replyMediaExpirationTimestampMs!=null?(j||(j=d("I64"))).gt(v.replyMediaExpirationTimestampMs,(j||(j=d("I64"))).zero):!0;return k.jsxs(k.Fragment,{children:[p&&!n?k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:2}):null,G&&k.jsx("div",{className:(h||(h=c("stylex")))(m.reply,K?m.alignEnd:!1,Q?m.replyMargin:!1),role:"none",children:k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnWithGutters,{grow:!0,children:k.jsx(c("CometErrorBoundary.react"),{fallback:function(a){return k.jsx(c("MWV2ReplyError.react"),{outgoing:K})},children:u?k.jsx(c("MWPinnedMessageOverlay.react"),{alreadyRenderedPin:!1,message:v,outgoing:K,children:k.jsx(c("MWRepliedMessage.react"),{isSecureMessage:t,message:v,outgoing:K})}):k.jsx(c("MWRepliedMessage.react"),{isSecureMessage:t,message:v,outgoing:K})})})}),H&&c("gkx")("24097")?k.jsx(d("MWPEditedMessageHistoryList.react").MWPEditedMessageHistoryList,{isReply:G,isSecureMessage:t,msgId:v.messageId,outgoing:K}):null,k.jsx(d("MWPBaseMessageListRow.react").MWPBaseMessageListRowBody,{hasReactions:P,message:v,outgoing:K,renderGenAIFeedbackActions:N&&b("cr:277")!=null?function(){return k.jsx(b("cr:277"),{ariaHidden:r===!1,hasReactions:P,message:v,outgoing:K})}:void 0,renderGutterItem:function(){return k.jsx("div",{className:"x1xc55vz",role:"none"})},renderMessageActions:function(){return u?k.jsx(d("MWMessageRowActions.react").MWMessageRowActions,{ariaHidden:r===!1,focused:e||o||r,hasReactions:P,hovered:i,message:v,outgoing:K,shouldHideHoverMenuReact:O,showPersistentGenAiFeedbackActionButtons:N,threadType:B}):s?k.jsx(c("MWPinnedMessageDropdownButton.react"),{hidden:!i&&!e,message:v}):null},renderMultiReactions:function(){if(v.isUnsent)return null;var a=D!=null&&D.length>0;return!E||!a?null:k.jsx("div",{className:(h||(h=c("stylex")))(m.multiReactContainer,K?m.multiReactContainerOutgoing:!1),children:k.jsx(d("MWPMessageReactions.react").MWPMessageReactions,{message:v,outgoing:K,reactions:C,reactionsV2:D,children:function(a,b,d,e,f,g,h,i){return k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(l,{emojis:a,isMultiReactRowExpanded:h,message:e,onOpenDialog:g,outgoing:K,reactionsV2:D,toggleMultiReactionRowExpansion:i})})}})})},renderProfile:function(){return k.jsx(c("MWV2MessageProfilePhoto.react"),{ariaHidden:q?!r:!0,isGroupThread:q,isLastMessageInGroup:J,message:v})},children:k.jsxs(c("CometErrorBoundary.react"),{fallback:function(a){return k.jsx(c("MWV2ChatErrorBubble.react"),{isReply:G})},children:[k.jsx(c("MWMessagePromptPopoverTrigger.react"),{attachments:L,message:v,children:s?k.jsx(d("MWMessageRowMessageComponent.react").MWMessageRowMessageComponent,{hasClickState:f,hasMessageEmphasisRing:g,isFirstMessageInGroup:p,isLastMessageInGroup:J,isSearchPluginAttachment:M,isSecureMessage:t,message:v,nextMessage:x,offlineAttachmentId:L&&L.length>0?L[0].offlineAttachmentId:null,outgoing:K,prevMessage:y,reactions:C,reactionsV2:A?D:void 0,renderAttachment:z,threadType:B}):k.jsx(c("MWPinnedMessageOverlay.react"),{alreadyRenderedPin:G,message:v,outgoing:K,children:k.jsx(d("MWMessageRowMessageComponent.react").MWMessageRowMessageComponent,{hasClickState:f,hasMessageEmphasisRing:g,isFirstMessageInGroup:p,isLastMessageInGroup:J,isSearchPluginAttachment:M,isSecureMessage:t,message:v,navigateToRouteForMediaViewer:w,nextMessage:x,offlineAttachmentId:L&&L.length>0?L[0].offlineAttachmentId:null,outgoing:K,prevMessage:y,reactions:C,reactionsV2:A?D:void 0,renderAttachment:z,threadType:B})})}),M&&k.jsx(c("MWMessageSearchPluginMustache.react"),{attachment:L[0],botResponseId:v.botResponseId,dialogResource:c("JSResourceForInteraction")("MWMessageSearchPluginSourcesDialog.react").__setRef("MWMessageRowBody.react"),flowInstanceId:a.current})]})}),k.jsx(c("MWPinnedMessageRowFooterNUXWrapperRequireNUX.react"),{isLastMessage:I,isOutgoing:K,isPinnedMessageList:s,message:v}),k.jsx(c("MWMustacheText"),{message:v,outgoing:K}),k.jsx(c("MWExtraPinnedMessagePadding.react"),{nextMessage:x}),f&&F===v.messageId?k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:6}):J&&!I?k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:6}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageDeliverySentTimestamp",["fbt","I64"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("I64"))).of_int32(60),k=i.of_int32(60*60),l=i.of_int32(24*60*60),m=i.of_int32(7*24*60*60);function a(a,b){b=(i||(i=d("I64"))).of_float(b.getTime()/1e3);a=i.div(a,i.of_int32(1e3));b=i.sub(b,a);a=h._("__JHASH__FdnMQ3ayYbi__JHASH__");if((i||(i=d("I64"))).lt(b,j))return a;else if((i||(i=d("I64"))).lt(b,k)){var c=(i||(i=d("I64"))).to_string(i.div(b,j));return h._("__JHASH__wurNpoApU1z__JHASH__",[h._param("minutes",c)])}else if((i||(i=d("I64"))).lt(b,l)){c=(i||(i=d("I64"))).to_string(i.div(b,k));return h._("__JHASH__Og6TIDKGh51__JHASH__",[h._param("hours",c)])}else if((i||(i=d("I64"))).lt(b,m)){c=(i||(i=d("I64"))).to_string(i.div(b,l));return h._("__JHASH___ys48wQwNKi__JHASH__",[h._param("days",c)])}else return a}g.getSentTitleWithTimestamp=a}),98);
__d("MWMessageSendingContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;e=b.createContext;var j=b.useContext,k=b.useMemo,l=b.useRef,m=e({findSendingMessage:c("emptyFunction").thatReturnsFalse,trackSendingMessage:c("emptyFunction"),untrackSendingMessage:c("emptyFunction")});function a(a){a=a.children;var b=l(new Set()),c=k(function(){return{findSendingMessage:function(a){return b.current.has(a)},trackSendingMessage:function(a){b.current.add(a)},untrackSendingMessage:function(a){b.current["delete"](a)}}},[b]);return i.jsx(m.Provider,{value:c,children:a})}a.displayName=a.name+" [from "+f.id+"]";d={Provider:a,useHook:function(){return j(m)}};g["default"]=d}),98);
__d("MWStatusText.react",["MWXText.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={alignLeft:{paddingStart:"xtt4iyq",$$css:!0},alignRight:{paddingEnd:"x1sxyh0",$$css:!0},color:{color:"x1xf6ywa",$$css:!0},mask:{backgroundColor:"x1eb86dx",$$css:!0}};function a(a){var b=a.alignLeft;b=b===void 0?!1:b;var e=a.error,f=a.text;a=a.xstyle;return i.jsx(d("react-strict-dom").html.span,{role:"none",style:[b?j.alignLeft:j.alignRight,j.mask,a],children:i.jsx(c("MWXText.react"),{align:b===!0?"start":"end",color:e===!0?"negative":"secondary",testid:void 0,type:"meta4",children:i.jsx(d("react-strict-dom").html.span,{style:j.color,children:f})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageOutgoingStatus.react",["MWMessageDeliverySentTimestamp","MWMessageDeliveryStatus","MWMessageSendingContext.react","MWStatusText.react","clearTimeout","react","react-strict-dom","setTimeout","useServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useMemo,l=b.useRef,m=b.useState,n=3e3,o={mountAnimation:{animationDuration:"x4afe7t",animationName:"x1nuzdyh",animationTimingFunction:"x4hg4is",display:"x1rg5ohu",$$css:!0},statusText:{paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",position:"x1n2onr6",$$css:!0},statusTextRow:{backgroundColor:"x1eb86dx",display:"x78zum5",justifyContent:"x13a6bvl",$$css:!0}};function a(a){var b=a.alignLeft,e=a.isLastMessage,f=a.message,g=a.status,h=a.xstyle;a=m(!1);var p=a[0],q=a[1],r=l(null),s=l(!1);a=c("MWMessageSendingContext.react").useHook();var t=a.findSendingMessage,u=a.trackSendingMessage,v=a.untrackSendingMessage,w=c("useServerTime")();j(function(){v(f.offlineThreadingId);g.type==="Sending"?(u(f.offlineThreadingId),r.current=c("setTimeout")(function(){q(!0)},n)):r.current&&c("clearTimeout")(r.current);return function(){r.current&&c("clearTimeout")(r.current)}},[t,f.offlineThreadingId,g.type,u,v]);a=k(function(){g.type==="Sending"?u(f.offlineThreadingId):t(f.offlineThreadingId)&&(s.current=!0);var a=g.type==="Sending"||s.current;a=[o.statusText,a&&o.mountAnimation,h];switch(g.type){case"Sending":return p?i.jsx(c("MWStatusText.react"),{alignLeft:b,text:d("MWMessageDeliveryStatus").Titles.sending.toString(),xstyle:a}):null;case"Sent":case"Delivered":return e?i.jsx(c("MWStatusText.react"),{alignLeft:b,text:d("MWMessageDeliverySentTimestamp").getSentTitleWithTimestamp(f.timestampMs,w).toString(),xstyle:a}):null;case"Error":return i.jsx(c("MWStatusText.react"),{alignLeft:b,error:!0,text:d("MWMessageDeliveryStatus").Titles.error.toString(),xstyle:a});default:return null}},[b,t,e,f.offlineThreadingId,f.timestampMs,w,p,g.type,u,h]);return i.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[o.statusTextRow],children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatSeenHeadsRow.react",["fbt","JSResourceForInteraction","MDSGlimmer.react","MWLSThreadDisplayContext","MWV2MessageRowIsRowFocusedContext.react","MWXImage.react","MWXPressable.react","MWXTooltip.react","MWXTooltipGroup.react","getFBTSafeGenderFromGenderConst","getMessengerPreciseTimestamp","react","react-strict-dom","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useContext,l=b.useRef,m=5,n=c("JSResourceForInteraction")("MWV2ChatSeenHeadsDialog.react").__setRef("MWV2ChatSeenHeadsRow.react"),o={heads:{display:"x78zum5",flexShrink:"x2lah0s",$$css:!0},img:{borderTopStartRadius:"x1rcc7c0",borderTopEndRadius:"xbtbmw4",borderBottomEndRadius:"x1lie4ck",borderBottomStartRadius:"x16hxpj1",height:"x1v9usgg",paddingEnd:"x19um543",paddingStart:"x1m6msm",verticalAlign:"xxymvpz",width:"x6jxa94",$$css:!0},mask:{backgroundColor:"x1eb86dx",$$css:!0},overflow:{backgroundColor:"x1qhmfi1",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",color:"xi81zsa",fontSize:"x1ncwhqj",fontWeight:"x117nqv4",lineHeight:"x1hkbg2g",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",paddingTop:"xexx8yu",paddingEnd:"x150jy0e",paddingBottom:"x18d9i69",paddingStart:"x1e558r4",textAlign:"x2b8uid",$$css:!0},root:{display:"x78zum5",paddingBottom:"x1120s5i",$$css:!0},spacer:{flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",$$css:!0}};function p(a,b,e,f){if(!e)return[];e=Math.max(Math.floor(b-9),0);a=a.slice(e,b);var g="\n"+h._("__JHASH__8_D_WS90lqj__JHASH__",[h._param("Number of additional views",e,[0])]).toString();a=j.jsxs(d("react-strict-dom").html.ul,{children:[a.reverse().map(function(a,b){return j.jsx(d("react-strict-dom").html.li,{children:a.name},String(b))}),e>0?j.jsx(d("react-strict-dom").html.li,{children:g},"overflow"):null]});e=h._("__JHASH__hpZlVXKj1CE__JHASH__",[h._param("the number of additional viewers",b,[0])]);return[j.jsx(c("MWXTooltip.react"),{align:f==="Inbox"?"middle":"end",forceInlineDisplay:!0,label:e,position:"above",tooltip:a,children:j.jsx(d("react-strict-dom").html.span,{style:o.overflow,children:e})},"overflow")]}function q(a){var b=a.displayContext,d=a.index;a=a.user;var e=a.timestamp>0?h._("__JHASH__i65FoHjBJBT__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender)),h._param("seen time",c("getMessengerPreciseTimestamp")(a.timestamp))]):h._("__JHASH__o0y2JESDXU1__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))]);return j.jsx(c("MWXTooltip.react"),{align:b==="Inbox"?"middle":"end",forceInlineDisplay:!0,position:"above",tooltip:e,children:a.imageSrc===""?j.jsx(c("MDSGlimmer.react"),{index:d,xstyle:o.img}):j.jsx(c("MWXImage.react"),{alt:e,src:a.imageSrc,xstyle:o.img})})}q.displayName=q.name+" [from "+f.id+"]";function r(a,b){var c=a.length,d=c>m;c=Math.max(Math.floor(c-(d?m-1:m)),0);var e=a.slice(c);return[].concat(p(a,c,d,b),e.map(function(a,c){return j.jsx(q,{displayContext:b,index:c,user:a},a.id)}))}function a(a){var b=a.messageSeenBy,e=a.xstyle;a=k(d("MWV2MessageRowIsRowFocusedContext.react").context);var f=a.setFocused,g=a.setIsDialogOpened;a=b.length;var i=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),m=l(null),p={messageSeenBy:b},q=c("useMWXLazyDialog")(n),s=q[0],t=function(){return s(p,function(){g(function(){return!1}),f(function(){return!0})})};return j.jsxs(d("react-strict-dom").html.div,{role:"none",style:[o.root,o.mask],children:[j.jsx(d("react-strict-dom").html.div,{style:o.spacer}),j.jsx(c("MWXPressable.react"),{"aria-label":h._("__JHASH__JhvMDLpCFuF__JHASH__",[h._param("number of participants who have seen this message",String(a))]).toString(),onPress:function(){g(function(){return!0}),t()},overlayDisabled:!0,ref:m,xstyle:function(){return[o.heads,e]},children:j.jsx(c("MWXTooltipGroup.react"),{children:r(b,i)})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageEndOfGroupContentTextOnly.react",["fbt","MWMessageDeliveryStatus","MWStatusText.react","intlSummarizeNumber","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={statusText:{paddingBottom:"xwib8y2",paddingTop:"x1iorvi4",$$css:!0}};function l(a){var b=a.alignLeft,d=a.enableSeenInfo;a=a.num;return!d?j.jsx(j.Fragment,{}):j.jsx(c("MWStatusText.react"),{alignLeft:b,text:h._("__JHASH__SlWkB_YFGR6__JHASH__",[h._param("seenByNumber",c("intlSummarizeNumber")(a))]).toString(),xstyle:k.statusText})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.alignLeft,e=a.enableSeenInfo;e=e===void 0?!0:e;a=a.status;var f=d("MWMessageDeliveryStatus").getBroadcastStatusTitle(a);switch(a.type){case"NoneStatus":return null;case"Error":return j.jsx(c("MWStatusText.react"),{error:!0,text:f.toString(),xstyle:k.statusText});case"SingleSeenHead":return j.jsx(l,{enableSeenInfo:e,num:1});case"MultipleSeenHeads":case"DeliveredAndRead":break;case"SeenCount":return j.jsx(l,{alignLeft:b,enableSeenInfo:e,num:a.count});case"Loading":return j.jsx(c("MWStatusText.react"),{alignLeft:b,text:f.toString(),xstyle:k.statusText});case"RetriableError":return j.jsx(c("MWStatusText.react"),{alignLeft:b,error:!0,text:f.toString(),xstyle:k.statusText});default:return j.jsx(c("MWStatusText.react"),{text:f.toString(),xstyle:k.statusText})}return j.jsx(l,{enableSeenInfo:e,num:a.heads.length})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageEndOfGroupContent.react",["LSMessagingThreadTypeUtil","MWChatSingleSeenHeadRow.react","MWLSThread","MWMessageDeliveryStatus","MWMessageOutgoingStatus.react","MWPMessageListColumn.react","MWV2ChatSeenHeadsRow.react","MWV2MessageEndOfGroupContentTextOnly.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={baseStyle:{marginEnd:"x1emribx",marginTop:"x1gslohp",$$css:!0},lastMessage:{marginBottom:"x12nagc",$$css:!0},nonLastMessage:{marginBottom:"xod5an3",$$css:!0},seenHeads:{marginTop:"x1gslohp",marginEnd:"xw3qccf",marginBottom:"xjpr12u",marginStart:"x1mh8g0r",$$css:!0}};function a(a){var b=a.alignLeft,e=a.enableSeenInfo;e=e===void 0?!0:e;var f=a.hasTextBasedMessageReceipts,g=a.isLastMessage,h=a.isOutgoing,k=a.isTextOnly,l=a.message;a=a.status;var m=d("MWLSThread").useThread(l.threadKey,function(a){return d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)});if(g&&f&&a.type==="NoneStatus")return i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:22});if(k===!0)return i.jsx(c("MWV2MessageEndOfGroupContentTextOnly.react"),{alignLeft:b,enableSeenInfo:e,status:a});if(a.type==="MultipleSeenHeads")return i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:i.jsx(c("MWV2ChatSeenHeadsRow.react"),{messageSeenBy:a.heads,xstyle:[j.seenHeads,f&&(g?j.lastMessage:j.nonLastMessage),f&&j.baseStyle]})});if(f&&a.type==="SeenCount"&&(m===!0&&g))return i.jsx(c("MWV2MessageEndOfGroupContentTextOnly.react"),{alignLeft:b,enableSeenInfo:e,status:a});if(f&&a.type==="SingleSeenHead")return i.jsx(c("MWChatSingleSeenHeadRow.react"),{head:a.head,text:d("MWMessageDeliveryStatus").getSingleSeenHead(a.head),xstyle:[g?j.lastMessage:j.nonLastMessage,j.baseStyle]});if(f&&a.type==="SingleSeenHead")return i.jsx(c("MWChatSingleSeenHeadRow.react"),{head:a.head,text:d("MWMessageDeliveryStatus").getSingleSeenHead(a.head),xstyle:[g?j.lastMessage:j.nonLastMessage,j.baseStyle]});if(h&&f)return i.jsx(c("MWMessageOutgoingStatus.react"),{alignLeft:b,isLastMessage:g,message:l,status:a,xstyle:[g?j.lastMessage:j.nonLastMessage,j.baseStyle]});return h&&f?i.jsx(c("MWMessageOutgoingStatus.react"),{alignLeft:b,isLastMessage:g,message:l,status:a,xstyle:[g?j.lastMessage:j.nonLastMessage,j.baseStyle]}):null}a.displayName=a.name+" [from "+f.id+"]";g.MWV2MessageEndOfGroupContent=a}),98);
__d("MWMessageRowFooter.react",["MWMessageDeliveryStatus","MWPBaseMessageListRow.react","MWV2MessageEndOfGroupContent.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.hasClickState,c=a.incoming,e=a.isBroadcastThread,f=a.isLastMessage,g=a.isStandardMessageList,h=a.message,j=a.nextMessage,k=a.outgoing,l=a.status;return g?i.jsx(d("MWPBaseMessageListRow.react").MWPBaseMessageListRowFooter,{message:h,nextMessage:j,showContent:b||d("MWMessageDeliveryStatus").isAlwaysShownStatus(l),children:function(){return i.jsx(d("MWV2MessageEndOfGroupContent.react").MWV2MessageEndOfGroupContent,{alignLeft:b&&c,hasTextBasedMessageReceipts:!0,isLastMessage:f,isOutgoing:k,isTextOnly:e,message:h,status:l})}}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWHighlyForwardedIndicator.react",["fbt","LSMessagingThreadTypeUtil","MDSForwardStackSvgIcon.react","MWXText.react","coerceMessagingThreadTypeToLSThreadType","react","requireDeferred","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("requireDeferred")("MwbHighlyForwardedIndicatorImpressionFalcoEvent").__setRef("MWHighlyForwardedIndicator.react");function a(a){var b=a.forwardScore,e=a.mid,f=a.threadType;a=function(){k.onReady(function(a){a.log(function(){return{limit:b,mid:f!=null&&d("LSMessagingThreadTypeUtil").isSecure(f)?void 0:e,thread_type:f!=null?c("coerceMessagingThreadTypeToLSThreadType")(f):void 0}})})};a=c("useSinglePartialViewImpression")({onImpressionStart:a});return j.jsxs(j.Fragment,{children:[j.jsx(c("MDSForwardStackSvgIcon.react"),{color:"tertiary",size:16}),j.jsx("span",{className:"x1h0ha7o",children:j.jsx(c("MWXText.react"),{color:"tertiary",ref:a,type:"meta4",children:h._("__JHASH__hxhFsSrRndH__JHASH__")})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPForwardedContent",["fbt","I64","LSIntEnum","MWPMessageAuthor.react","MWPMessageHasAttachment","MessagingAttachmentType","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=(j||d("react")).useMemo;function n(a){if((k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)))return a.defaultCtaType==="xma_web_url";else return!1}function o(a){if((k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return!0;else return(k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))}function p(a,b,e){var g=(i||(i=c("useReStore")))(),j=a.messageId,p=a.threadKey,q=c("MWPMessageHasAttachment")(a),r=d("ReQLSuspense").useFirst(function(){if(q)return d("ReQL").fromTableAscending(g.tables.attachments).getKeyRange(p,j);else return d("ReQL").empty()},[g,j,p,q],f.id+":63");return m(function(){if(b)if(r!=null)if(n(r))return h._("__JHASH___8ZpqsY3Jrg__JHASH__");else if(o(r))return h._("__JHASH__INRUrq18hhv__JHASH__");else if((k||(k=d("I64"))).equal(r.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__Z71bv2q5yoA__JHASH__");else return h._("__JHASH__8h2fNslikTS__JHASH__");else return h._("__JHASH__8h2fNslikTS__JHASH__");else if(r!=null)if(e!=null)if(n(r))return h._("__JHASH__5GN3g82hBzH__JHASH__",[h._param("name",e)]);else if(o(r))return h._("__JHASH__NQwzfDxVOf0__JHASH__",[h._param("name",e)]);else if((k||(k=d("I64"))).equal(r.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__QvgCMGMfMHB__JHASH__",[h._param("name",e)]);else return h._("__JHASH__CmZMizVeMX7__JHASH__");else if(n(r))return h._("__JHASH__QhCmPJ-QbeG__JHASH__");else if(o(r))return h._("__JHASH__vFSMWshNg-J__JHASH__");else if((k||(k=d("I64"))).equal(r.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__U5_TMTE9DWx__JHASH__");else return h._("__JHASH__CmZMizVeMX7__JHASH__");else if(e!=null)return h._("__JHASH__1jGDZrisR_E__JHASH__",[h._param("name",e)]);else return h._("__JHASH__CmZMizVeMX7__JHASH__")},[b,r,e])}function a(a,b){var c=d("MWPMessageAuthor.react").useAuthorName();c=c[0];return p(a,b,c)}g.useTitle=a}),98);
__d("MWXIconForwardAction",["MWXSvgIcon","SVGIcon","cr:9157","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9157")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWForwardedContent.react",["BaseIsDecorativeContext","I64","MWHighlyForwardedIndicator.react","MWPForwardedContent","MWXIconForwardAction","MWXIconStrict.react","MWXRow.react","MWXRowItem.react","MWXText.react","gkx","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k=c("justknobx")._("1649");function a(a){var b=a.message,e=a.outgoing;a=a.threadType;e=d("MWPForwardedContent").useTitle(b,e);var f=b.forwardScore!=null?(i||(i=d("I64"))).to_int32(b.forwardScore):0;f=c("gkx")("24141")&&k!==0&&f>=k;f=f?j.jsx(c("MWHighlyForwardedIndicator.react"),{forwardScore:(i||(i=d("I64"))).to_string((f=b.forwardScore)!=null?f:(i||(i=d("I64"))).zero),mid:b.messageId,threadType:a}):j.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,spacing:4,verticalAlign:"center",children:[j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("BaseIsDecorativeContext").Provider,{value:!0,children:j.jsx(c("MWXIconStrict.react"),{color:"secondary",icon:c("MWXIconForwardAction"),size:12})})}),j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXText.react"),{color:"tertiary",type:"meta4",children:e})})]});return j.jsx("div",{className:"x6s0dn4 x78zum5 xg8j3zb x1nn3v0j",children:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MercuryTimestamp",["fbt","formatDate"],(function(a,b,c,d,e,f,g){a=864e5;var h=6*a,i={getFormatedTimestamp:function(a){var b=a/1e3;return i.getFormattedTimestampByBucket(b,i.getTimeBucket(a))},getAbsoluteTimestamp:function(a){if(a==null)return null;else{a=i.getFormatedTimestamp(a);return a.absolute}},getRelativeTimestamp:function(a){a=i.getFormatedTimestamp(a);return a.relative},getFormattedTimestampByBucket:function(a,c){switch(c){case 0:return{absolute:g._("__JHASH__EpdLnM9AeUo__JHASH__").toString(),relative:b("formatDate")(a,"g:ia")};case 1:return{absolute:b("formatDate")(a,"l"),relative:b("formatDate")(a,"D")};case 3:return{absolute:b("formatDate")(a,"F j"),relative:b("formatDate")(a,"M j")};default:return{absolute:b("formatDate")(a,"F j, Y"),relative:b("formatDate")(a,"n/j/y")}}},getTimeBucket:function(a){a=new Date(a);var b=new Date();b=new Date(b.getFullYear(),b.getMonth(),b.getDate());if(b<a)return 0;else if(b-h<a)return 1;else if(b.getFullYear()===a.getFullYear())return 3;else return 4},getPreciseTimestamp:function(a){return b("formatDate")(new Date(a),i.getPreciseFormat(a))},getPreciseFormat:function(a){a=i.getTimeBucket(a);switch(a){case 0:return"g:ia";case 1:return"l g:ia";case 3:return"F jS, g:ia";case 4:default:return"F j, Y g:i a"}}};e.exports=i}),null);
__d("MWPBaseMessageRowHeaderTimestamp.react",["I64","MercuryTimestamp","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function a(a){var b=a.message,e=a.renderText,f=a.renderTimestamp;a=a.xstyle;return k.jsx("div",{className:(h||(h=c("stylex")))(a),children:e(f(c("MercuryTimestamp").getRelativeTimestamp((i||(i=d("I64"))).to_float(b.timestampMs))))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEditedEyebrowLabel.react",["fbt","BaseMiddot.react","MessengerWebUXLogger","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.hasSeparator;a=a.xstyle;var e=c("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"edit_eyebrow_impression"}),f=h._("__JHASH__Mh0-kan22Pe__JHASH__");return j.jsxs(j.Fragment,{children:[b&&j.jsx(d("react-strict-dom").html.span,{style:a,children:j.jsx(c("BaseMiddot.react"),{})}),j.jsx(d("react-strict-dom").html.span,{"data-testid":void 0,ref:e,children:f})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEditedEyebrow.react",["fbt","BaseMiddot.react","MWEditedEyebrowLabel.react","MWMessageEditContext.react","MWXLink.react","MWXTooltip.react","MessengerWebUXLogger","gkx","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(a){var b=a.hasSeparator;a=a.xstyle;var e=d("MWMessageEditContext.react").useMWMessageEditContext()||{setShowEdits:function(a){},showEdits:!1},f=e.setShowEdits,g=e.showEdits;function i(){f(!g)}e=c("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"edit_eyebrow_impression"});var k=g?h._("__JHASH__WqoEC9S0Sry__JHASH__"):h._("__JHASH__3fxL6sM27ni__JHASH__"),l=g?h._("__JHASH__WqoEC9S0Sry__JHASH__"):h._("__JHASH__0I22sJ_f1hm__JHASH__");return j.jsxs(j.Fragment,{children:[b&&j.jsx(d("react-strict-dom").html.span,{style:a,children:j.jsx(c("BaseMiddot.react"),{})}),j.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,label:l,position:"above",tooltip:l,children:j.jsx(c("MWXLink.react"),{color:"blueLink",onClick:i,ref:e,weight:"medium",children:j.jsxs(d("react-strict-dom").html.span,{"data-testid":void 0,children:[k," "]})})})]})}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b=a.hasSeparator;a=a.xstyle;return c("gkx")("754")?j.jsx(k,{hasSeparator:b,xstyle:a}):j.jsx(c("MWEditedEyebrowLabel.react"),{hasSeparator:b,xstyle:a})}a.displayName=a.name+" [from "+f.id+"]";g.MWEditedEyebrowWithHistory=k;g.MWEditedEyebrow=a}),98);
__d("MWPAccessibleEyebrowsText.react",["fbt","MWPMessageAuthor.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={visuallyHidden:{clip:"xzpqnlu",clipPath:"x1hyvwdk",height:"xjm9jq1",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",width:"x1i1rx1s",$$css:!0}};function a(a){var b=a.message;a=a.outgoing;var c=d("MWPMessageAuthor.react").useAuthorName();c=c[0];var e=a?h._("__JHASH__950lIWTelJN__JHASH__"):h._("__JHASH__uufWL2Zp_42__JHASH__");return!b.isAdminMessage&&j.jsx(d("react-strict-dom").html.span,{style:k.visuallyHidden,children:c!=null&&!a?c:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXHovercardTrigger.react",["BaseHovercardTrigger.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("BaseHovercardTrigger.react")}),98);
__d("useMWCMIsSenderAdModOrChatHost",["I64","Int64Hooks","LSFactory","LSIntEnum","LSIssueCommunityAdminModerationActionsFetchStoredProcedure","MessagingSpecialThreadRole","MessagingSpecialThreadRoleBitOffset","ReQL","ReQLSuspense","asyncToGeneratorRuntime","pageID","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e,g){var k=(j||(j=c("useReStore")))();d("Int64Hooks").useEffectInt64(function(){var f=function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){a!=null&&!(h||(h=d("I64"))).is_zero(a)&&(yield k.runInTransaction(function(b){return c("LSIssueCommunityAdminModerationActionsFetchStoredProcedure")(c("LSFactory")(b),{fbGroupId:a,requestId:c("pageID"),source:(i||(i=d("LSIntEnum"))).ofNumber(14),targetUserId:g,threadId:e})},"readwrite"))});return function(){return f.apply(this,arguments)}}();c("promiseDone")(f())},[k,a,g,e]);var l=d("ReQLSuspense").useFirst(function(){return a!=null?d("ReQL").fromTableAscending(k.table("community_members").index("communityContact")).getKeyRange(a,g,c("pageID")):d("ReQL").empty()},[k,a,g],f.id+":66"),m=(l==null?void 0:l.isAdmin)==null?!1:l.isAdmin,n=(l==null?void 0:l.isModerator)==null?!1:l.isModerator;l=l!=null?d("MessagingSpecialThreadRoleBitOffset").has(c("MessagingSpecialThreadRole").CHAT_HOST,l):!1;return{isAdmin:m,isChatHost:l,isModerator:n}}g["default"]=a}),98);
__d("MWPMessageAdModOrHostText.react",["fbt","BaseMiddot.react","I64","MWCMHostTextHovercard.entrypoint","MWXHovercardTrigger.react","MWXText.react","react","react-strict-dom","useMWCMIsSenderAdModOrChatHost"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function l(a){var b=a.communityId,e=a.senderId,f=a.shouldRenderSenderName;a=a.threadKey;b=c("useMWCMIsSenderAdModOrChatHost")(b,a,e);e=b.isAdmin;var g=b.isChatHost;b=b.isModerator;var i=h._("__JHASH__l4xCpI5VHpV__JHASH__"),j=h._("__JHASH__hz8R4t8GDy7__JHASH__");a=k.jsx(c("MWXHovercardTrigger.react"),{align:"middle",display:"inline-block",popoverEntryPoint:c("MWCMHostTextHovercard.entrypoint"),popoverOtherProps:{onClose:function(){},threadKey:a},popoverProps:{},position:"above",children:function(a){return k.jsx(c("MWXText.react"),{ref:a,type:"meta4",children:h._("__JHASH__bZRJOb_t9fa__JHASH__")})}});return k.jsx(k.Fragment,{children:f&&(e||b||g)&&k.jsxs(k.Fragment,{children:[k.jsx(c("BaseMiddot.react"),{}),k.jsx(d("react-strict-dom").html.span,{"data-testid":void 0,children:e?i:b?j:a})]})})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.communityId,c=a.message;a=a.shouldRenderSenderName;return b==null||(j||(j=d("I64"))).is_zero(b)?null:k.jsx(l,{communityId:b,senderId:c.senderId,shouldRenderSenderName:a,threadKey:c.threadKey})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXIconBadgeCheckmark",["MWXSvgIcon","SVGIcon","cr:9003","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9003")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconBot",["MWXSvgIcon","SVGIcon","cr:9019","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9019")),c("gkx")("23219"));g["default"]=a}),98);
__d("usePinnedTextAnimation",["react","useDebouncedValue"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState,l={mountAnimation:{animationDuration:"x5hsz1j",animationName:"x127lhb5",animationTimingFunction:"x4hg4is",$$css:!0},unmountAnimation:{animationDuration:"x5hsz1j",animationFillMode:"x10e4vud",animationName:"xvma63k",animationTimingFunction:"x4hg4is",$$css:!0}};function a(a){var b=k(!1),d=b[0],e=b[1],f=j(a);i(function(){a!==f.current&&e(!0),f.current=a},[a]);return{mountAnimation:d?l.mountAnimation:null,shouldShow:c("useDebouncedValue")(a,200),unmountAnimation:l.unmountAnimation}}g["default"]=a}),98);
__d("MWPMessageEyebrows.react",["fbt","Actor","I64","LSContactBitOffset","LSMessagingThreadTypeUtil","MWEditedEyebrow.react","MWLSThread","MWMessageDisplayContext.react","MWPAccessibleEyebrowsText.react","MWPContactContext.react","MWPMessageAdModOrHostText.react","MWPMessageAuthor.react","MWPMessageListColumn.react","MWPThreadIsPage.react","MWXIconBadgeCheckmark","MWXIconBot","MWXIconStrict.react","ReQL","ReQLSuspense","isMWEditedMessage","react","react-strict-dom","useMWPIsMessagePinned","usePinnedTextAnimation","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||d("react"),m={alignEnd:{justifyContent:"x13a6bvl",$$css:!0},alignStart:{justifyContent:"x1nhvcw1",$$css:!0},botBadge:{display:"x1rg5ohu",paddingStart:"x1e558r4",position:"x1n2onr6",top:"xs7f9wi",$$css:!0},color:{color:"x186z157",$$css:!0},container:{display:"x78zum5",marginTop:"x1anpbxc",paddingBottom:"x10b6aqq",paddingStart:"x1ye3gou",$$css:!0},separator:{paddingEnd:"x19um543",paddingStart:"x1m6msm",$$css:!0}};function n(a){var b=a.children;a=a.outgoing;return l.jsx(d("react-strict-dom").html.div,{style:[m.container,a?m.alignEnd:m.alignStart],children:b})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.message,e=a.outgoing,g=a.renderPaidPartnerShipText,k=a.renderPinnedText,o=a.renderTextWrapper;a=a.shouldRenderSenderName;var p=d("MWPMessageAuthor.react").useAuthorName();p=p[0];var q=d("MWPContactContext.react").useMWPContactStableContext(),r=q.contact;q=q.nickname;var s=d("Actor").useActor();s=s[0];var t=d("MWMessageDisplayContext.react").useMWMessageDisplayContext(),u=(i||(i=c("useReStore")))(),v=d("MWLSThread").useThread(b.threadKey,function(a){return a.parentThreadKey}),w=d("ReQLSuspense").useFirst(function(){return v?d("ReQL").fromTableAscending(u.tables.community_folders).getKeyRange(v).map(function(a){return a.folderId}):d("ReQL").empty()},[u,v],f.id+":105"),x=c("isMWEditedMessage")(b),y=d("MWPThreadIsPage.react").useIsPage(),z=d("MWLSThread").useThread(b.threadKey,function(a){return a.threadType});z=z!=null&&d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(z);y=y&&!(j||(j=d("I64"))).equal(b.senderId,b.threadKey)&&!e;var A=a||y&&!z,B=r?d("LSContactBitOffset").has(77,r):!1,C=r?d("LSContactBitOffset").has(84,r):!1,D=c("useMWPIsMessagePinned")(b);a=c("usePinnedTextAnimation")(D);var E=a.mountAnimation,F=a.unmountAnimation,G=b.isPaidPartnership===!0;y=A||D||x||G;r=(z=q)!=null?z:h._("__JHASH__4LwiFWKMkVy__JHASH__");a=s===(j||(j=d("I64"))).to_string(b.senderId);q=a?r.toString():p==null?void 0:p.toString();z=h._("__JHASH__G4Bi2CYTkJR__JHASH__");if(!y)return l.jsx(c("MWPAccessibleEyebrowsText.react"),{message:b,outgoing:e});s=function(a){a=l.jsx(n,{outgoing:e,children:o(l.jsxs(d("react-strict-dom").html.span,{style:m.color,children:[A&&a!=null&&l.jsx(d("react-strict-dom").html.span,{"data-testid":void 0,children:a}),l.jsx(c("MWPMessageAdModOrHostText.react"),{communityId:w,message:b,shouldRenderSenderName:A}),D&&l.jsx(d("react-strict-dom").html.span,{style:D?E:F,children:k(b,A)}),x&&l.jsx(d("MWEditedEyebrow.react").MWEditedEyebrow,{hasSeparator:A&&a!=null,xstyle:m.separator}),B===!0?l.jsx(d("react-strict-dom").html.span,{style:m.botBadge,children:l.jsx(c("MWXIconStrict.react"),{color:"secondary",icon:c("MWXIconBot"),size:12})}):null,C&&l.jsx(d("react-strict-dom").html.span,{style:m.botBadge,children:l.jsx(c("MWXIconStrict.react"),{color:"primaryAccent",icon:c("MWXIconBadgeCheckmark"),size:12})}),G&&g!=null&&g(b)]}))});return t==="reportMessages"?l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:a}):l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnWithGutters,{shrinkwrap:!0,children:a})};return b.takedownState!=null?s(z.toString()):s(q)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPBaseMessageRowHeader.react",["BaseHeading.react","BaseRow.react","BaseRowItem.react","LSIntEnum","LSMessageReplySourceTypeV2","MWMessageDisplayContext.react","MWPBaseMessageRowHeaderTimestamp.react","MWPContactContext.react","MWPMessageEyebrows.react","MWPMessageIsReply","MWPMessageListColumn.react","MWPThreadIsPage.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||d("react"),l={alignEnd:{alignItems:"xuk3077",$$css:!0},header:{display:"x78zum5",flexDirection:"xdt5ytf",$$css:!0},timestamp:{marginTop:"x1anpbxc",paddingEnd:"x11eofan",paddingLeft:null,paddingRight:null,$$css:!0},timestampWithSnippet:{marginTop:"x1ok221b",paddingEnd:"x11eofan",paddingLeft:null,paddingRight:null,$$css:!0}};function m(a,b,e,f){var g=a.replySnippet;g=g!=null?g!=="":!1;var h=a.replySourceTypeV2!=null&&(j||(j=d("LSIntEnum"))).toNumber(a.replySourceTypeV2)===c("LSMessageReplySourceTypeV2").FORWARD;if(g)return e(a,f);return!h?null:b(a,f)}function a(a){a._fbGroupId;var b=a.alwaysRenderSenderName;b=b===void 0?!1:b;var e=a.isAnyCMThread;e=e===void 0?!1:e;var f=a.isFirstMessageInGroup,g=a.isGroupThread,i=a.message,j=a.outgoing,n=a.renderForwardSnippet,o=a.renderMessageEyebrows,p=a.renderPaidPartnerShipText,q=a.renderPinnedText,r=a.renderReplySnippet,s=a.renderTextWrapper;a=a.renderTimestamp;var t=c("MWPMessageIsReply")(i);n=m(i,n,r,j);r=d("MWPContactContext.react").useMWPContactStableContext();r=r.nickname;var u=d("MWMessageDisplayContext.react").useMWMessageDisplayContext();r=f&&r!=null&&e;e=b||g&&f&&!j&&!t||r;n!=null?b=k.jsx("div",{className:(h||(h=c("stylex")))(l.header,j?l.alignEnd:!1),role:"none",children:u==="reportMessages"?k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:n}):k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnWithGutters,{shrinkwrap:!0,children:n})}):o!=null?b=o(i,j,s,e):b=k.jsx(d("MWPThreadIsPage.react").Provider,{threadKey:i.threadKey,children:k.jsx(c("MWPMessageEyebrows.react"),{message:i,outgoing:j,renderPaidPartnerShipText:p,renderPinnedText:q,renderTextWrapper:s,shouldRenderSenderName:e})});g=n!=null?l.timestampWithSnippet:l.timestamp;t=a!=null?k.jsx(c("MWPBaseMessageRowHeaderTimestamp.react"),{message:i,renderText:s,renderTimestamp:a,xstyle:g}):null;if(f)return k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:k.jsxs(c("BaseRow.react"),{direction:j?"backward":"forward",children:[k.jsx(c("BaseRowItem.react"),{children:k.jsx(c("BaseHeading.react"),{children:b})}),t!=null?k.jsx(c("BaseRowItem.react"),{children:k.jsx(c("BaseHeading.react"),{children:t})}):null]})});else return b}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPMessagePinnedText.react",["fbt","react","useMWPIsMessagePinned"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.divider;a=a.message;a=c("useMWPIsMessagePinned")(a);var d=h._("__JHASH__hknrqEeMk6h__JHASH__");return a&&j.jsxs(j.Fragment,{children:[b!=null&&j.jsx("span",{className:"x1sdyfia",children:b}),j.jsx("span",{"aria-label":d,children:d})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWReplySnippetContent",["fbt","Actor","I64","MWPMessageAuthor.react","useMWIsReplyToAuthor","useMWPIsMessagePinned"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a,b){var e=c("useMWPIsMessagePinned")(a),f=d("MWPMessageAuthor.react").useAuthorName();f=f[0];var g=d("Actor").useActor();g=g[0];g=g===(i||(i=d("I64"))).to_string(a.senderId);var j=c("useMWIsReplyToAuthor")(a);return!e||g||j?a.replySnippet:b?h._("__JHASH__lpeJtmI6peT__JHASH__").toString():h._("__JHASH__bGQxu-uwmpe__JHASH__",[h._param("name",f)]).toString()}g["default"]=a}),98);
__d("MWReplySnippet.react",["I64","LSIntEnum","LSMessageReplySourceTypeV2","MWEditedEyebrow.react","MWXIconForwardAction","MWXIconReply","MWXIconStrict.react","MWXRow.react","MWXRowItem.react","MWXText.react","isMWEditedMessage","react","useMWReplySnippetContent"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react"),l={separator:{paddingEnd:"x150jy0e",paddingLeft:null,paddingRight:null,paddingStart:"x1e558r4",$$css:!0}};function m(a){a=a.replySourceType;if(a==null)return null;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY)))return k.jsx(c("MWXIconStrict.react"),{color:"secondary",icon:c("MWXIconReply"),size:12});else if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").IG_STORY_SHARE))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_STORY_SHARE)))return k.jsx(c("MWXIconStrict.react"),{color:"secondary",icon:c("MWXIconForwardAction"),size:12});return null}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.message;a=a.outgoing;a=c("useMWReplySnippetContent")(b,a);if(a==null||a.trim().length===0)return null;var e=c("isMWEditedMessage")(b);return k.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,spacing:4,testid:void 0,verticalAlign:"center",children:[k.jsx(c("MWXRowItem.react"),{children:k.jsx(m,{replySourceType:b==null?void 0:b.replySourceTypeV2})}),k.jsxs(c("MWXRowItem.react"),{children:[k.jsx(c("MWXText.react"),{color:"tertiary",type:"meta4",children:a}),e&&k.jsx(d("MWEditedEyebrow.react").MWEditedEyebrow,{hasSeparator:!0,xstyle:l.separator})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageRowHeader.react",["BaseMiddot.react","MWForwardedContent.react","MWPBaseMessageRowHeader.react","MWPMessagePinnedText.react","MWReplySnippet.react","MWXText.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.isCMThread,d=a.isFirstMessageInGroup,e=a.isGroupThread,f=a.isPinnedMessageList,g=a.isStandardMessageList,h=a.message,j=a.outgoing,k=a.threadType;a=function(a){return i.jsx(c("MWXText.react"),{color:"secondary",type:"meta4",children:a})};return i.jsx(c("MWPBaseMessageRowHeader.react"),{alwaysRenderSenderName:f,isAnyCMThread:b,isFirstMessageInGroup:d,isGroupThread:e,message:h,outgoing:j,renderForwardSnippet:function(){return i.jsx(c("MWForwardedContent.react"),{message:h,outgoing:j,threadType:k})},renderPinnedText:function(a,b){return g?i.jsx(c("MWPMessagePinnedText.react"),{divider:b&&i.jsx(c("BaseMiddot.react"),{}),message:h}):null},renderReplySnippet:function(){return i.jsx(c("MWReplySnippet.react"),{message:h,outgoing:j})},renderTextWrapper:function(a){return i.jsx(c("MWXText.react"),{color:"secondary",type:"meta4",children:a})},renderTimestamp:f?a:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageRowMissingMessagesIndicator.react",["CometErrorBoundary.react","I64","MWPMessageListColumn.react","MWV2MessageRowSimple.react","cr:7565","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var e=a.lastEbMessageTime,f=a.message;a=a.nextMessage;f=e!=null&&(i||(i=d("I64"))).gt(e,f.timestampMs)&&(a==null||(i||(i=d("I64"))).lt(e,a.timestampMs));return f===!0&&b("cr:7565")?j.jsx(c("MWV2MessageRowSimple.react"),{children:j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:j.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:j.jsx(b("cr:7565"),{})})})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageRowUnreadMessagesIndicator.react",["MWChatMessageUnreadIndicator.react","MWPMessageListColumn.react","MWV2MessageRowSimple.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.shouldRenderUnreadIndicator;return a===!0?i.jsx(c("MWV2MessageRowSimple.react"),{children:i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:i.jsx(c("MWChatMessageUnreadIndicator.react"),{})})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPMessageRowCalculateStatus.react",["GenderConst","I64","MWClickedMessageContext.react","MWMessageDeliveryStatus","MWPActor.react","MWPThreadCapabilitiesContext","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","gkx","react","useMWIsReadReceiptsDisabledForThread","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;j||(j=d("react"));b=j;var k=b.useEffect,l=b.useState;function a(a){var b=a.children,e=a.isBroadcastChannel,g=e===void 0?!1:e;e=a.isBroadcastThread;var j=a.isLargeGroup,l=a.isSecureGroupThread,m=a.message,n=a.nextMessage,q=d("MWPActor.react").useActor(),r=(h||(h=c("useReStore")))(),s=(i||(i=d("I64"))).equal(q,m.senderId),t=n!=null&&!(i||(i=d("I64"))).equal(q,n.senderId),u=m.isUnsent,v=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();v=v.seenCountV2Enabled;var w=!m.isUnsent&&v,x=n==null;v=c("useMWIsReadReceiptsDisabledForThread")(m.threadKey)&&c("gkx")("24094");var y=c("MWClickedMessageContext.react").useHook(),z=y.clickedMessageId,A=y.fetchMessageSeenCount,B=y.hasError;y=y.isLoading;var C=d("ReQLSuspense").useFirst(function(){return w?d("ReQL").fromTableAscending(r.tables.community_chat_message_seen_count,["seenCount"]).getKeyRange(m.threadKey,m.messageId):d("ReQL").empty()},[r,w,m.threadKey,m.messageId],f.id+":95");k(function(){g===!0&&x&&A(m.threadKey,m.messageId)},[A,m.messageId,m.threadKey,x,g,s]);var D=o(a,function(a){return!x&&a.length===0},[x]),E=p(function(){return d("ReQL").fromTableDescending(r.tables.participants.index("threadKeyReadWatermarkTimestampMs"),["contactId"]).getKeyRange(m.threadKey).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,q)}).take(1)},function(a){return a.length>0},[m.threadKey,q]).length>0,F=p(function(){return d("ReQL").fromTableDescending(r.tables.participants.index("threadKeyReadWatermarkTimestampMs"),["readWatermarkTimestampMs","contactId"]).getKeyRange(m.threadKey).bounds({gte:d("ReQL").key(m.timestampMs)}).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,q)}).take(1)},function(a){return E&&a.length>0},[m.timestampMs,m.threadKey,q,E]),G=F.length>0;F=p(function(){return d("ReQL").fromTableDescending(r.tables.participants.index("threadKeyDeliveredWatermarkTimestampMs"),["contactId"]).getKeyRange(m.threadKey).bounds({gte:d("ReQL").key(m.timestampMs)}).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,q)}).take(1)},function(a){return a.length>0||G},[m.threadKey,m.timestampMs,G,q]).length>0;var H=o(a,function(a){return G&&a.length===0},[G]);if(m.isAdminMessage)return b({type:"NoneStatus"});if(e)if(!w){if(!s||n!=null||u)return b({type:"NoneStatus"})}else{if(z!==m.messageId)return b({type:"NoneStatus"});if(y)return b({type:"Loading"});return B?b({type:"RetriableError"}):C!=null?b(d("MWMessageDeliveryStatus").seenCount((i||(i=d("I64"))).to_int32(C.seenCount))):b({type:"Loading"})}if(!s){if(l||j)return b({type:"NoneStatus"});return g===!0?C!=null?b(d("MWMessageDeliveryStatus").seenCount((i||(i=d("I64"))).to_int32(C.seenCount))):b({type:"NoneStatus"}):D.length>0?a.children(d("MWMessageDeliveryStatus").seenHead(D)):a.children({type:"NoneStatus"})}if(s&&x&&g&&(C!=null&&(i||(i=d("I64"))).to_int32(C.seenCount)>0))return b(d("MWMessageDeliveryStatus").seenCount((i||(i=d("I64"))).to_int32(C.seenCount)));if(t&&l)return b({type:"NoneStatus"});if((i||(i=d("I64"))).equal(m.sendStatusV2,(i||(i=d("I64"))).of_int32(0)))return b({type:"NoneStatus"});if((i||(i=d("I64"))).equal(m.sendStatusV2,(i||(i=d("I64"))).of_int32(4))||(i||(i=d("I64"))).equal(m.sendStatusV2,(i||(i=d("I64"))).of_int32(5)))return b({type:"Error"});if((i||(i=d("I64"))).equal(m.sendStatusV2,(i||(i=d("I64"))).of_int32(1)))return b({type:"Sending"});if((i||(i=d("I64"))).equal(m.sendStatusV2,(i||(i=d("I64"))).of_int32(6)))return b({type:"Sent"});if(j)if(n!=null||u)return b({type:"NoneStatus"});else if((i||(i=d("I64"))).equal(m.sendStatusV2,(i||(i=d("I64"))).of_int32(2)))return b({type:"Delivered"});return G&&!v?H.length>0?b(d("MWMessageDeliveryStatus").seenHead(H)):b({type:"NoneStatus"}):F?b({type:"Delivered"}):b({type:"Sent"})}a.displayName=a.name+" [from "+f.id+"]";var m=10;function n(a){var b=a.message;a=a.nextMessage;var e=(h||(h=c("useReStore")))(),g=(a==null?void 0:a.isAdminMessage)===!0,i=d("ReQLSuspense").useFirst(function(){return g?d("ReQL").fromTableAscending(e.tables.messages.index("messageDisplayOrder"),["isAdminMessage","timestampMs"]).getKeyRange(b.threadKey).bounds({gt:d("ReQL").key(b.primarySortKey)}).take(m).filter(function(a){return!a.isAdminMessage}):d("ReQL").empty()},[e,g,b.primarySortKey,b.threadKey],f.id+":349");return g?i:a}function o(a,b,e){var g=(h||(h=c("useReStore")))(),j=d("MWPActor.react").useActor(),k=a.message,l=n(a);a=c("useMWIsReadReceiptsDisabledForThread")(k.threadKey)&&c("gkx")("24094");b=p(function(){var a=l!=null?{gte:d("ReQL").key(k.timestampMs),lt:d("ReQL").key(l.timestampMs)}:{gte:d("ReQL").key(k.timestampMs)};return d("ReQL").fromTableAscending(g.tables.participants.index("threadKeyReadWatermarkTimestampMs"),["contactId","nickname","readActionTimestampMs"]).getKeyRange(k.threadKey).bounds(a).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,j)}).map(function(a){var b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.contacts,["id","name","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs"]).getKeyRange(a.contactId),f.id+":424");return[a,b]})},b,[g,k.threadKey,k.timestampMs,l==null?void 0:l.timestampMs,l==null,j].concat(e));return a?[]:b.map(function(a){var b,e=a[0];a=a[1];if(a==null)return;return{gender:c("GenderConst").UNKNOWN_SINGULAR,id:(i||(i=d("I64"))).to_string(a.id),imageSrc:c("getLSMediaContactProfilePictureUrl")(a),name:(b=e.nickname)!=null?b:a.name,timestamp:i.to_float(e.readActionTimestampMs)}}).filter(Boolean)}function p(a,b,c){var e=l(void 0),g=e[0];e=e[1];c=d("ReQLSuspense").useArray(function(){return g!=null?d("ReQL").empty():a()},[].concat(c,[g]),f.id+":483");b(c)&&g==null&&e(c);return g!=null?g:c}g["default"]=a}),98);
__d("MWTheme.react",["I64","cr:4128","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h,l=k.createContext,m=k.useContext,n=k.useEffect,o=k.useMemo;function a(a,b){a=a!=null?a:.4;var c=parseInt(b.slice(1,3),16),d=parseInt(b.slice(3,5),16);b=parseInt(b.slice(5,7),16);a=a.toFixed(4);return"rgba("+c+","+d+","+b+","+a+")"}function e(a){return a.type==="solid"?a.color:a.colors[0]}function p(a){return"#"+a.slice(2)}function q(a){a=(i||(i=d("I64"))).to_int32(a);var b=(a&16711680)>>>16,c=(a&65280)>>>8;a=a&255;var e=function(a){return a.toString(16).padStart(2,"0")};return"#"+(e(b)+(e(c)+e(a)))}var r=l({clearTheme:c("emptyFunction"),setTheme:c("emptyFunction"),theme:b("cr:4128")});function s(){return m(r).theme}function t(){var a=m(r),b=a.clearTheme;a=a.setTheme;n(function(){return b},[b]);return[a,b]}function u(a){var b=a.children,d=a.clearTheme,e=a.setTheme,f=a.theme;a=o(function(){var a;return{clearTheme:(a=d)!=null?a:c("emptyFunction"),setTheme:(a=e)!=null?a:c("emptyFunction"),theme:f}},[d,e,f]);return j.jsx(r.Provider,{value:a,children:b})}u.displayName=u.name+" [from "+f.id+"]";function v(a){return a.type==="gradient"}g.defaultTheme=b("cr:4128");g.lighten=a;g.top=e;g.aRGBtoHex=p;g.intToHex=q;g.useTheme=s;g.usePreview=t;g.MWThemeProvider=u;g.isGradient=v}),98);
__d("MWPDateBreak.react",["BaseHeading.react","CometTimestamp.react","MWTheme.react","MWXText.react","formatDate","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={accessibleElem:{clip:"xzpqnlu",clipPath:"x1hyvwdk",height:"xqtp20y",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xnalus7",$$css:!0},emphasized:{color:"x186z157",fontWeight:"xk50ysn",$$css:!0},mask:{backgroundColor:"x1eb86dx",$$css:!0},root:{marginBottom:"xjpr12u",marginTop:"xr9ek0c",textAlign:"x2b8uid",$$css:!0}};function l(a){var b=a.renderTextWrapper;a=a.timestamp;a=j.jsx("span",{className:"x186z157 xk50ysn",children:c("formatDate")(new Date(a),{future:"g:ia",older:"m/d/Y g:ia",thisYear:"M jS, g:ia",today:"g:ia",withinWeek:"D g:ia"})});return b!=null?b(a):a}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.renderTextWrapper;a=a.timestamp;var e=d("MWTheme.react").useTheme();return j.jsxs(c("BaseHeading.react"),{testid:void 0,children:[j.jsx("div",{className:"xzpqnlu x1hyvwdk xqtp20y x6ikm8r x10wlt62 xnalus7",children:j.jsx(c("CometTimestamp.react"),{date:new Date(a)})}),j.jsx("div",{"aria-hidden":!0,className:(h||(h=c("stylex")))(k.root,d("MWTheme.react").isGradient(e)&&k.mask),"data-scope":"date_break",children:j.jsx(c("MWXText.react"),{color:"tertiary",type:"meta4",children:j.jsx(l,{renderTextWrapper:b,timestamp:a})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageStartOfGroupContent.react",["I64","MWPDateBreak.react","MWPMessageListColumn.react","MWV2ChatAdminMessage.react","MWV2MessageRowSimple.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function k(a,b){if(b!=null)return(i||(i=d("I64"))).compare(i.abs(i.sub(a.timestampMs,b.timestampMs)),i.of_string("900000"))>0;else return!0}function l(a){var b=a.domElementRef,e=a.message,f=a.prevMessage;a=a.renderTextWrapper;if(k(e,f))return j.jsx(c("MWV2MessageRowSimple.react"),{domElementRef:b,children:j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:j.jsx(d("MWV2ChatAdminMessage.react").MWV2ChatAdminMessageContainer,{nextMessage:e,prevMessage:f,children:j.jsx(c("MWPDateBreak.react"),{renderTextWrapper:a,timestamp:(i||(i=d("I64"))).to_float(e.timestampMs)})})})});else return null}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.domElementRef,c=a.message,d=a.prevMessage;a=a.renderTextWrapper;return j.jsx(l,{domElementRef:b,message:c,prevMessage:d,renderTextWrapper:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageRow.react",["BaseView.react","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MNLSXMALayoutType","MWCMIsAnyCMThread","MWCMThreadTypes.react","MWMessageDisplayContext.react","MWMessageEditContext.react","MWMessageListAttachmentContainer.react","MWMessageRowAdminMessage.react","MWMessageRowBody.react","MWMessageRowFooter.react","MWMessageRowHeader.react","MWMessageRowMissingMessagesIndicator.react","MWMessageRowUnreadMessagesIndicator.react","MWPActor.react","MWPMessageListColumn.react","MWPMessageListRowWithKeyboardInteractions.react","MWPMessageParsingUtils","MWPMessageRowCalculateStatus.react","MWPThreadCapabilitiesContext","MWShowMessagePromptPopoverContext.react","MWV2MessageRowSimple.react","MWV2MessageStartOfGroupContent.react","cr:3932","cr:7412","react","useMWMessageRowTheme","useMWPEditMessageDeemphasizer","useMWPGetAttachments"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));a=h;e=a.memo;var l=a.startTransition,m=a.useCallback,n=a.useId,o=a.useState,p={adminMessageAttachment:{boxSizing:"x9f619",maxWidth:"x4ndzw7",minWidth:"xwj5yc2",paddingBottom:"xdvlbce",paddingStart:"x5ib6vp",paddingLeft:null,paddingRight:null,paddingEnd:"xc73u3c",paddingTop:"x1nn3v0j",$$css:!0}},q=k.memo(c("MWPMessageRowCalculateStatus.react"));function r(a){var b=a.message,c=a.nextMessage;a=babelHelpers.objectWithoutPropertiesLoose(a,["message","nextMessage"]);return k.jsx(q,babelHelpers["extends"]({message:d("Int64Hooks").usePickInt64(b,["senderId","isUnsent","threadKey","primarySortKey","timestampMs","messageId","isAdminMessage","sendStatusV2"]),nextMessage:d("Int64Hooks").usePickInt64(c,["senderId","timestampMs","isAdminMessage"])},a))}r.displayName=r.name+" [from "+f.id+"]";a=e(function(a){var e=a.domElementRef,f=a.hasMessageEmphasisRing,g=a.isModal,h=a.isSecureMessage,q=a.lastEbMessageTime,s=a.message,t=a.navigateToRouteForMediaViewer,u=a.nextMessage,v=a.prevMessage,w=a.renderAttachment,x=a.shouldRenderUnreadIndicator,y=a.stopHoveringRef,z=a.threadType;a=a.useReactionsV2;var A=a===void 0?!1:a;a=(a=d("MWMessageDisplayContext.react").useMWMessageDisplayContext())!=null?a:"standard";var B=a==="standard",C=a==="pinnedMessages";a=d("MWPActor.react").useActor();var D=C||d("MWPMessageParsingUtils").isStartOfGroup(s,v),E=c("MWCMIsAnyCMThread")(z),F=d("MWCMThreadTypes.react").isBroadcastThread(z),G=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(z),H=d("LSMessagingThreadTypeUtil").isGroup(z),I=d("LSMessagingThreadTypeUtil").isSecure(z),J=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();J=J.seenCountV2Enabled;J=!s.isUnsent&&J;var K=J&&!G&&!d("LSMessagingThreadTypeUtil").isCMSubthread(z),L=!C&&(i||(i=d("I64"))).equal(s.senderId,a),M=u==null,N=!L;J=o(!1);var O=J[0],P=J[1];a=o(!1);var Q=a[0],R=a[1],S=m(function(a){return l(function(){return R(a)})},[R,l]),T=m(function(a){return l(function(){return P(a)})},[P,l]),U=n();J=o(!1);var V=J[0],W=J[1],X=c("useMWMessageRowTheme")(),Y;a=c("useMWPGetAttachments")(s);J=a.length>0&&a[0].xmaLayoutType!=null&&(i||(i=d("I64"))).equal(a[0].xmaLayoutType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").STANDARD_DXMA));a=a.length>0&&a[0].xmaLayoutType!=null&&(i||(i=d("I64"))).equal(a[0].xmaLayoutType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").SHARED_STACK));var Z=c("useMWPEditMessageDeemphasizer")(),$=d("LSMessagingThreadTypeUtil").isCMSubthread(z)&&s.subthreadKey!=null;s.isAdminMessage?Y=k.jsx(c("MWMessageRowAdminMessage.react"),{domElementRef:e,isDialogOpened:V,isFirstMessageInGroup:D,isFocused:O,isModal:g,message:s,messageDomID:U,nextMessage:u,outgoing:L,prevMessage:v,setFocusedInTransition:T,setHoveredInTransition:S,setIsDialogOpened:W,stopHoveringRef:y}):J||a?Y=k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{centered:!0,children:k.jsx(c("MWV2MessageRowSimple.react"),{children:k.jsx(c("BaseView.react"),{xstyle:Z,children:k.jsx(c("MWMessageListAttachmentContainer.react"),{connectBottom:!1,connectTop:!1,message:s,outgoing:L,xstyle:p.adminMessageAttachment})})})}):Y=k.jsx(d("MWShowMessagePromptPopoverContext.react").MWShowMessagePromptPopoverContextProvider,{children:k.jsx(d("MWMessageEditContext.react").MWMessageEditContextProvider,{children:k.jsxs(k.Fragment,{children:[k.jsx(c("MWMessageRowUnreadMessagesIndicator.react"),{shouldRenderUnreadIndicator:x}),D&&B?k.jsx(c("MWV2MessageStartOfGroupContent.react"),{domElementRef:e,message:s,prevMessage:v}):null,k.jsx(r,{isBroadcastChannel:G,isBroadcastThread:F,isLargeGroup:!1,isSecureGroupThread:I&&H,message:s,nextMessage:u,children:function(a){return k.jsxs(c("MWPMessageListRowWithKeyboardInteractions.react"),{domElementRef:D?void 0:e,isDialogOpened:V,isFocused:O,isModal:g,message:s,messageDomID:U,outgoing:L,setFocused:T,setHovered:S,setIsDialogOpened:W,stopHoveringRef:y,theme:X,children:[k.jsx(c("MWMessageRowHeader.react"),{isCMThread:E,isFirstMessageInGroup:D,isGroupThread:H,isPinnedMessageList:C,isStandardMessageList:B,message:s,outgoing:L,threadType:z}),k.jsx(c("MWMessageRowBody.react"),{focused:O,hasClickState:K,hasMessageEmphasisRing:f,hovered:Q,incoming:N,isDialogOpened:V,isFirstMessageInGroup:D,isGroupThread:H,isModal:g,isPinnedMessageList:C,isSecureMessage:h,isStandardMessageList:B,message:s,navigateToRouteForMediaViewer:t,nextMessage:u,prevMessage:v,renderAttachment:w,shouldUseReactionsV2:A,threadType:z}),k.jsx(c("MWMessageRowFooter.react"),{hasClickState:K,incoming:N,isBroadcastThread:F,isLastMessage:M,isStandardMessageList:B,message:s,nextMessage:u,outgoing:L,status:a})]})}}),D&&B&&$&&s.subthreadKey!=null&&b("cr:7412")!=null?k.jsx(b("cr:7412"),{domElementRef:e,message:s,nextMessage:u,subthreadKey:s.subthreadKey}):null]})})});return k.jsxs(k.Fragment,{children:[Y,k.jsx(c("MWMessageRowMissingMessagesIndicator.react"),{lastEbMessageTime:q,message:s,nextMessage:u}),b("cr:3932")==null?null:k.jsx(b("cr:3932"),{})]})});g.MWMessageRow=a}),98);
__d("MWV2MessageActionsVisibility.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useRef;function a(){return i(function(){})}g.useStopHoveringRef=a}),98);
__d("MWCollapsibleAdminMessages.react",["fbt","BaseView.react","MWMessageRow.react","MWPMessageListColumn.react","MWV2ChatAdminMessage.react","MWV2MessageActionsVisibility.react","MWXLink.react","MWXText.react","ODS","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react")),l=i.useState,m={collapsed:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0},expanded:{paddingBottom:"x1120s5i",paddingTop:"xz9dl7a",position:"x1n2onr6",zIndex:"x1vjfegm",$$css:!0}};function a(a){var b=d("MWV2MessageActionsVisibility.react").useStopHoveringRef(),e=a.messages,f=babelHelpers.objectWithoutPropertiesLoose(a,["messages"]);a=l(!1);var g=a[0],i=a[1];return k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{centered:!0,children:k.jsxs(d("MWV2ChatAdminMessage.react").MWV2ChatAdminMessageContainer,{children:[k.jsx(c("MWXText.react"),{type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{color:"highlight",onClick:function(){(j||(j=d("ODS"))).bumpEntityKey(3303,"collapsible_admin_messages",g?"hide_messages":"show_messages"),i(function(a){return!a})},role:"button",children:k.jsx(c("BaseView.react"),{xstyle:g?m.expanded:m.collapsed,children:g?h._("__JHASH__k2cKnwAsyRP__JHASH__"):h._("__JHASH__ZpmrUMcuTWA__JHASH__",[h._param("number of admin udpates",e.length)])})})}),g?e.map(function(a,c){return k.createElement(d("MWMessageRow.react").MWMessageRow,babelHelpers["extends"]({},f,{key:a.messageId,message:a,nextMessage:e[c+1],prevMessage:e[c-1],stopHoveringRef:b}))}):null]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWLSProactiveWarningTables",["MWPreloadableQueries","MWThreadKey.react","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),b=(h||(h=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("MWPreloadableQueries").getThreadBannerQuery(b,a)},[b,a],f.id+":31"),g=d("ReQLSuspense").useFirst(function(){return d("MWPreloadableQueries").getProactiveWarningsForThreadQuery(b,a)},[b,a],f.id+":36");return{banner:e,pwSettings:g}}g["default"]=a}),98);
__d("useMWProactiveWarningPayloadMemo",["I64","Int64Hooks"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.banner,c=a.ignoreDismissTime,e=a.isPWDismissTimeSet,f=a.pwSettings,g=a.threadKey;return d("Int64Hooks").useMemoInt64(function(){if(f==null||b==null)return;var a=f.context,i=f.entryPoint,j=f.storyLocation,k=f.suspectId,l=f.tag,m=b.bannerId,n=b.cta1Title,o=b.cta2Title,p=b.heading,q=b.titleSectionOne;if(!((Boolean(c)||e)&&(h||(h=d("I64"))).equal(m,(h||(h=d("I64"))).of_string("7"))))return;if(k!=null&&a!=null&&j!=null&&i!=null&&l!=null&&p!=null&&o!=null&&n!=null&&q!=null)return{context:a,cta1Title:n,cta2Title:o,description:q,falco_event_data:{data:{entry_point:(h||(h=d("I64"))).to_int32(i),feedback_tags:[l],surface:h.to_int32(j)},impersonatedUser:{id:"0"},otherUser:{id:h.to_string(k)},reportedUser:{id:"0"},thread:{id:h.to_string(g),type:1}},header:p,threadKey:g}},[g,b,f,e,c])}g["default"]=a}),98);
__d("useMWProactiveWarningPayload",["I64","MWThreadKey.react","useMWLSProactiveWarningTables","useMWProactiveWarningPayloadMemo"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),f=c("useMWLSProactiveWarningTables")(),g=f.banner;f=f.pwSettings;b=b!=null&&(h||(h=d("I64"))).equal((b=b.proactiveWarningDismissTime)!=null?b:(h||(h=d("I64"))).zero,(h||(h=d("I64"))).zero);return c("useMWProactiveWarningPayloadMemo")({banner:g,ignoreDismissTime:a,isPWDismissTimeSet:b,pwSettings:f,threadKey:e})}g["default"]=a}),98);
__d("MWComposerXacDisclosureRelayQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5305811016137974"}),null);
__d("MWComposerXacDisclosureRelayQuery.graphql",["MWComposerXacDisclosureRelayQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"nux_id"}],c=[{kind:"Variable",name:"nux_id",variableName:"nux_id"}],d={kind:"InlineFragment",selections:[{args:null,documentName:"MWComposerXacDisclosureRelayQuery",fragmentName:"MWComposerXacDisclosureView_nux",fragmentPropName:"nux",kind:"ModuleImport"}],type:"DefaultNUX",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWComposerXacDisclosureRelayQuery",selections:[{alias:"xacThreadDisclosureNux",args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWComposerXacDisclosureRelayQuery",selections:[{alias:"xacThreadDisclosureNux",args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("MWComposerXacDisclosureRelayQuery_facebookRelayOperation"),metadata:{},name:"MWComposerXacDisclosureRelayQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWComposerXacDisclosureRelay.react",["CometPlaceholder.react","CometRelay","MWComposerXacDisclosureRelayQuery.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=8659;function a(a){var e=a.isThreadInNullState;a=a.size;var f=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWComposerXacDisclosureRelayQuery.graphql"),{nux_id:k}),g=f.xacThreadDisclosureNux;return j.jsx(c("CometPlaceholder.react"),{fallback:null,children:g!=null?j.jsx(d("CometRelay").MatchContainer,{match:g,props:{isThreadInNullState:e,nuxKey:f.xacThreadDisclosureNux,size:a}}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ErrorComposer.react",["fbt","MDSTextPairing.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx("div",{className:"xcrg951 x8cjs6t x13fuv20 x178xt8z x1a8lsjc xl521sm x9mfa4r x889kno",children:j.jsx(c("MDSTextPairing.react"),{headline:h._("__JHASH__viCgEPmOyD5__JHASH__"),headlineColor:"secondary",level:4,meta:j.jsx(c("MWXText.react"),{numberOfLines:2,type:"meta3",children:h._("__JHASH__FrvKCKsD46D__JHASH__")}),reduceEmphasis:!0,textAlign:"center"})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWLSSprocFetchProactiveWarningIfNeeded",["I64","Int64Hooks","LSFactory","LSFetchProactiveWarningsIfNeededStoredProcedure","MWThreadKey.react","promiseDone","useMWLSProactiveWarningTables","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e){var f=(i||(i=c("useReStore")))(),g=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),j=c("useMWLSProactiveWarningTables")(),k=j.banner;j=j.pwSettings;j=k!=null&&j!=null?(h||(h=d("I64"))).equal(k.bannerId,(h||(h=d("I64"))).of_string("7")):!1;a=a&&!j?e?!0:b!=null?(h||(h=d("I64"))).equal((k=b.proactiveWarningDismissTime)!=null?k:(h||(h=d("I64"))).zero,(h||(h=d("I64"))).zero):!1:!1;var l=b!=null&&a;d("Int64Hooks").useEffectInt64(function(){l&&c("promiseDone")(f.runInTransaction(function(a){return c("LSFetchProactiveWarningsIfNeededStoredProcedure")(c("LSFactory")(a),{threadKey:g})},"readwrite"))},[g,a,l,f])}g["default"]=a}),98);
__d("MWXIconPhotoPlus",["MWXSvgIcon","SVGIcon","cr:9249","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9249")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXComposerAttachmentPreview.react",["fbt","MWXCircleButton.react","MWXIconCross","MWXIconDocument","MWXIconPhotoPlus","MWXIconStrict.react","MWXImage.react","MWXPressable.react","MWXText.react","MWXTooltip.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={cancelButton:{end:"xoo4vsp",left:null,right:null,position:"x10l6tqk",top:"x1v4kod4",$$css:!0},card:{marginEnd:"xq8finb",marginLeft:null,marginRight:null,position:"x1n2onr6",$$css:!0},contentWrapper:{backgroundColor:"x1qhmfi1",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xsdox4t",minWidth:"x900493",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},filePreview:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",rowGap:"xp1r0qw",columnGap:"xtqikln",height:"xsdox4t",maxWidth:"x1kbpmyu",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",width:"xezivpi",$$css:!0},imagePreview:{alignItems:"x6s0dn4",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",width:"x1useyqa",$$css:!0},playIcon:{marginStart:"x16hk5td",marginLeft:null,marginRight:null,marginTop:"x7wgvq7",position:"x10l6tqk",start:"xtzzx4i",left:null,right:null,top:"xwa60dl",$$css:!0},progressBar:{borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",bottom:"x1ey2m1c",position:"x10l6tqk",start:"x17qophe",left:null,right:null,width:"xh8yej3",$$css:!0},video:{objectFit:"xl1xv1r",$$css:!0}};function l(a){var b=a.hasError;b=b===void 0?!1:b;a=a.progress;if(a===1||a==null)return null;var c=4;b=b?"var(--negative)":"var(--chat-composer-button-color, var(--accent))";a=Math.ceil(a*100);var d=(c/2).toString();d="M 0,"+d+" L 100,"+d;return j.jsxs("svg",{"aria-hidden":!0,className:"x168nmei x13lgxp2 x30kzoy x9jhf4c x1ey2m1c x10l6tqk x17qophe xh8yej3",preserveAspectRatio:"none",style:{height:c.toString()},viewBox:"0 0 100 "+c.toString(),children:[j.jsx("path",{d:d,stroke:"rgba(0,0,0,.5)",strokeLinecap:"round",strokeWidth:c.toString()}),j.jsx("path",{d:d,stroke:b,strokeLinecap:"round",strokeWidth:(a===0?0:c).toString(),style:{strokeDasharray:"100",strokeDashoffset:(100-a).toString(),transition:"stroke-dashoffset .5s, stroke .5s"}})]})}l.displayName=l.name+" [from "+f.id+"]";function m(a){var b=a.children,e=a.hasError;e=e===void 0?!1:e;var f=a.onCancel;a=a.progress;return j.jsxs(d("react-strict-dom").html.div,{style:k.card,children:[j.jsxs(d("react-strict-dom").html.div,{style:k.contentWrapper,children:[b,j.jsx(l,{hasError:e,progress:a})]}),f!=null&&j.jsx(d("react-strict-dom").html.div,{style:k.cancelButton,children:j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:h._("__JHASH__a2BigkmhfXY__JHASH__"),onPress:f,size:24,type:"overlay"})})]})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.hasError;b=b===void 0?!1:b;var d=a.onCancel,e=a.progress;a=a.src;return j.jsx(m,{hasError:b,onCancel:d,progress:e,children:j.jsx(c("MWXImage.react"),{objectFit:"contain",src:a,xstyle:k.imagePreview})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.hasError;b=b===void 0?!1:b;var e=a.onCancel,f=a.progress;a=a.src;return j.jsxs(m,{hasError:b,onCancel:e,progress:f,children:[j.jsx("video",{className:"xl1xv1r",height:"48",src:a,width:"48"}),j.jsx(d("react-strict-dom").html.div,{style:k.playIcon,children:j.jsx(c("MWXImage.react"),{src:"/images/video/play_24dp.png"})})]})}b.displayName=b.name+" [from "+f.id+"]";function e(a){var b=a.hasError;b=b===void 0?!1:b;var e=a.onCancel,f=a.progress;a=a.title;return j.jsx(m,{hasError:b,onCancel:e,progress:f,children:j.jsx(c("MWXTooltip.react"),{position:"above",tooltip:a,children:j.jsxs(d("react-strict-dom").html.div,{style:k.filePreview,children:[j.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconDocument"),size:20}),j.jsx(c("MWXText.react"),{numberOfLines:2,type:"bodyLink3",children:a})]})})})}e.displayName=e.name+" [from "+f.id+"]";function n(a){a=a.onPress;return j.jsx(m,{children:j.jsx(c("MWXPressable.react"),{onPress:a,xstyle:k.imagePreview,children:j.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconPhotoPlus"),size:24})})})}n.displayName=n.name+" [from "+f.id+"]";g.MWXComposerImageAttachmentPreview=a;g.MWXComposerVideoAttachmentPreview=b;g.MWXComposerFileAttachmentPreview=e;g.MWXComposerAddAttachmentButton=n}),98);
__d("MWXComposerButtonContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({});g["default"]=b}),98);
__d("MWXComposerRow.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={padding12:{paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",$$css:!0},padding4:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},padding6:{paddingTop:"x1yrsyyn",paddingEnd:"xsyo7zv",paddingBottom:"x10b6aqq",paddingStart:"x16hj40l",$$css:!0},row:{alignItems:"xpqajaz",boxSizing:"x9f619",display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",position:"x1n2onr6",width:"xh8yej3",$$css:!0},scrollable:{contain:"x41o525",overflowX:"xw2csxc",overflowY:"x1odjw0f",$$css:!0}};function a(a){var b=a.children,c=a["data-testid"];c=a.padding;c=c===void 0?0:c;var e=a.scrollable;a=a.xStyle;return i.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[j.row,c===12&&j.padding12,c===4&&j.padding4,c===6&&j.padding6,e===!0&&j.scrollable,a],children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerHeader.react",["MWXComposerButtonContext.react","MWXComposerRow.react","MWXText.react","MWXTextPairing.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={body:{alignItems:"x6s0dn4",borderTopColor:"x8cjs6t",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",paddingBottom:"x1120s5i",paddingStart:"xpkgp8e",paddingLeft:null,paddingRight:null,paddingEnd:"xmns6w2",paddingTop:"xz9dl7a",$$css:!0},rightAddon:{marginStart:"x1gryazu",marginLeft:null,marginRight:null,$$css:!0}},k={color:"secondary",size:24};function a(a){var b=a["data-testid"];b=a.headerText;var e=a.rightAddon;a=a.subtext;return i.jsxs(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:j.body,children:[(b!=null||a!=null)&&i.jsx(c("MWXTextPairing.react"),{body:b!=null&&i.jsx(c("MWXText.react"),{type:"body4",children:b}),level:3,meta:a}),e!=null&&i.jsx(c("MWXComposerButtonContext.react").Provider,{value:k,children:i.jsx(d("react-strict-dom").html.div,{style:j.rightAddon,children:e})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerIconButton.react",["MWXCircleButton.react","MWXComposerButtonContext.react","MWXThreadThemeColor","MWXTooltip.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={layoutWrapper:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",$$css:!0},marginBottom:function(a){return[{marginBottom:"xld31j7",$$css:!0},{"--marginBottom":function(a){return typeof a==="number"?a+"px":a!=null?a:"initial"}(a)}]},marginLeft:function(a){return[{marginLeft:"xwmvlbq",marginStart:null,marginEnd:null,$$css:!0},{"--marginLeft":function(a){return typeof a==="number"?a+"px":a!=null?a:"initial"}(a)}]},marginRight:function(a){return[{marginRight:"xy982vn",marginStart:null,marginEnd:null,$$css:!0},{"--marginRight":function(a){return typeof a==="number"?a+"px":a!=null?a:"initial"}(a)}]},marginTop:function(a){return[{marginTop:"x1v67u4u",$$css:!0},{"--marginTop":function(a){return typeof a==="number"?a+"px":a!=null?a:"initial"}(a)}]}};b=i.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.color,f=a.type;f=f===void 0?"deemphasized":f;var g=a.wrapperStyle,h=a.wrapperXStyle,l=babelHelpers.objectWithoutPropertiesLoose(a,["color","type","wrapperStyle","wrapperXStyle"]),m=j(c("MWXComposerButtonContext.react")),n=m.color,o=m.iconRatio;o=o===void 0?"medium":o;var p=m.marginBottom;p=p===void 0?0:p;var q=m.marginLeft;q=q===void 0?0:q;var r=m.marginRight;r=r===void 0?0:r;var s=m.marginTop;s=s===void 0?0:s;m=m.size;m=m===void 0?36:m;return i.jsx(d("react-strict-dom").html.div,{style:[k.marginBottom(p),k.marginLeft(q),k.marginRight(r),k.marginTop(s),k.layoutWrapper,[h,g]],children:i.jsx(c("MWXTooltip.react"),{position:"above",tooltip:a.label,children:i.jsx(c("MWXCircleButton.react"),babelHelpers["extends"]({},l,{color:(q=(p=e)!=null?p:n)!=null?q:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-composer-button-color, var(--accent))"),iconRatio:o,ref:b,size:m,type:f}))})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("MWXComposerInputArea.react",["MWXComposerButtonContext.react","MWXComposerRow.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={colors:{backgroundColor:"x16sw7j7",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",marginEnd:"x1w0mnb",marginLeft:null,marginRight:null,marginStart:"x1mnrxsn",$$css:!0},flexLayout:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"x13qp9f6",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},k={iconRatio:"large",marginBottom:0,marginLeft:0,marginRight:0,marginTop:0,size:28};function a(a){var b=a.children;a=a.header;return i.jsx(c("MWXComposerButtonContext.react").Provider,{value:k,children:i.jsxs(d("react-strict-dom").html.div,{style:[j.colors,j.flexLayout],children:[a,i.jsx(c("MWXComposerRow.react"),{padding:4,children:b})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerTextEditor.react",["CometLexicalContentEditable.react","CometLexicalPlaceholder.react","LexicalComposerContext","LexicalErrorBoundary","LexicalPlainTextPlugin","MWXRowItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback,k={padding:{marginBottom:"x12nagc",marginEnd:"x1w0mnb",marginLeft:null,marginRight:null,marginStart:"x1mnrxsn",marginTop:"x1gslohp",maxHeight:"xctk3hg",minWidth:"x900493",overflowY:"x1odjw0f",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0}};function a(a){var b=a.children,e=a.contentEditableProps;a=a.placeholderText;var f=d("LexicalComposerContext").useLexicalComposerContext(),g=f[0];f=j(function(a){a=a==null?null:a;g.setRootElement(a)},[g]);a=i.jsx(c("CometLexicalPlaceholder.react"),{children:a});f=i.jsx(c("CometLexicalContentEditable.react"),babelHelpers["extends"]({contentEditableRef:f,editor:g,tabIndex:0},e));return i.jsxs(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"center",xstyle:k.padding,children:[i.jsx(d("LexicalPlainTextPlugin").PlainTextPlugin,{ErrorBoundary:c("LexicalErrorBoundary"),contentEditable:f,placeholder:a}),b]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposer.react",["LexicalComposerContext","MWXComposerAttachmentPreview.react","MWXComposerHeader.react","MWXComposerIconButton.react","MWXComposerInputArea.react","MWXComposerRow.react","MWXComposerTextEditor.react","MWXTooltipGroup.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo,k={composer:{backgroundColor:"xt5xv9l",contain:"x6wvzqs",$$css:!0},flexLayout:{alignItems:"xpqajaz",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1c4vz4f",flexShrink:"xs83m0k",minWidth:"x13qp9f6",$$css:!0},padding:{paddingStart:"x1e558r4",paddingLeft:null,paddingRight:null,paddingEnd:"x150jy0e",paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0}};function a(a){var b=a.children,e=a.editor;a=a.header;var f=d("LexicalComposerContext").createLexicalComposerContext(),g=j(function(){return[e,f]},[e,f]);return i.jsx(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:g,children:i.jsx(c("MWXTooltipGroup.react"),{children:i.jsxs(d("react-strict-dom").html.div,{style:[k.composer,k.flexLayout],children:[a,i.jsx(c("MWXComposerRow.react"),{xStyle:k.padding,children:b})]})})})}a.displayName=a.name+" [from "+f.id+"]";a.Button=c("MWXComposerIconButton.react");a.TextEditor=c("MWXComposerTextEditor.react");a.InputArea=c("MWXComposerInputArea.react");a.Header=c("MWXComposerHeader.react");a.Row=c("MWXComposerRow.react");a.Attachments={Add:d("MWXComposerAttachmentPreview.react").MWXComposerAddAttachmentButton,FilePreview:d("MWXComposerAttachmentPreview.react").MWXComposerFileAttachmentPreview,ImagePreview:d("MWXComposerAttachmentPreview.react").MWXComposerImageAttachmentPreview,VideoPreview:d("MWXComposerAttachmentPreview.react").MWXComposerVideoAttachmentPreview};b=a;g["default"]=b}),98);
__d("MWXComposerButtonGroupContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({isMenu:!1});g["default"]=b}),98);
__d("MWXComposerButtonGroupButton.react",["MWXComposerButtonGroupContext.react","MWXComposerIconButton.react","MWXMenuItem.react","MWXThreadThemeColor","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a,b){var e=a.color,f=a.icon,g=a.label,h=a.onPress,k=a.preventClosingMenuOnSelect,l=a.testid;l=babelHelpers.objectWithoutPropertiesLoose(a,["color","icon","label","onPress","preventClosingMenuOnSelect","testid"]);a=j(c("MWXComposerButtonGroupContext.react"));var m=a.isMenu,n=a.styleForButton;a=a.xstyleForButton;if(m){return i.jsx(c("MWXMenuItem.react"),babelHelpers["extends"]({"aria-label":g,icon:f.asMenuItemIcon_ESCAPE_HATCH(),iconColor:(m=e)!=null?m:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-composer-button-color, var(--accent))"),onClick:h,preventClosingMenuOnSelect:k,primaryText:g,ref:b,testid:void 0},l))}return i.jsx(c("MWXComposerIconButton.react"),babelHelpers["extends"]({icon:f,label:g,onPress:h,ref:b,testid:void 0,wrapperStyle:n,wrapperXStyle:a},e!=null?{color:e}:{},l))}a.displayName=a.name+" [from "+f.id+"]";b=i.forwardRef(a);g["default"]=b}),98);
__d("withMWXPopover",["BaseMultiPageViewContext","BasePopoverTrigger.react","CometMenuContext","MWXPopover.react","MWXPopoverLoadingState.react","lazyLoadComponent","react","tracePolicyFromResource","useCometPopoverInteractionTracing","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.useMemo;function a(a){var b=function(b){var e=b.onHoverIn,f=b.onHoverOut,g=b.popover,h=b.popoverPresentationProps,l=b.popoverProps,m=b.preloadTrigger,n=babelHelpers.objectWithoutPropertiesLoose(b,["onHoverIn","onHoverOut","popover","popoverPresentationProps","popoverProps","preloadTrigger"]);b=(b=j(c("CometMenuContext")))!=null?b:{};var o=b.onClose;b=(b=j(c("BaseMultiPageViewContext")))!=null?b:{};var p=b.pushPage,q=k(function(){return d("withCometPlaceholder").withCometPlaceholder(c("lazyLoadComponent")(g),i.jsx(c("MWXPopoverLoadingState.react"),{withArrow:!1}))},[g]);b=c("useCometPopoverInteractionTracing")(c("tracePolicyFromResource")("comet.popover",g),"lazy");h=(h=h)!=null?h:{};var r=h.align;r=r===void 0?"middle":r;var s=h.position;s=s===void 0?"above":s;h=babelHelpers.objectWithoutPropertiesLoose(h,["align","position"]);var t=k(function(){return function(a){return i.jsx(c("MWXPopover.react"),{withArrow:!0,children:i.jsx(q,babelHelpers["extends"]({},a))})}},[q]),u=k(function(){return function(a){return function(b){var c;b=b.onReturn;return i.jsx(q,babelHelpers["extends"]({},a,{onClose:(c=o)!=null?c:b}))}}},[q,o]);return i.jsx(c("BasePopoverTrigger.react"),babelHelpers["extends"]({align:r,position:s},h,{interactionTracker:b,popover:t,popoverPreloadResource:g,popoverProps:l,preloadTrigger:m,children:function(b,c,d,g,h){return i.jsx(a,babelHelpers["extends"]({onHoverIn:function(a){g(a),e==null?void 0:e(a)},onHoverOut:function(a){h(),f==null?void 0:f(a)}},n,{onPress:function(){p!=null&&o!=null?p(u(l)):c();for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];n.onPress==null?void 0:n.onPress.apply(n,b)},preventClosingMenuOnSelect:!0,ref:b}))}}))};return b}g["default"]=a}),98);
__d("MWXComposerButtonGroupPopoverButton.react",["MWXComposerButtonGroupButton.react","react","withMWXPopover"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");a=c("withMWXPopover")(c("MWXComposerButtonGroupButton.react"));b=a;g["default"]=b}),98);
__d("MWXIconFaceHappy",["MWXSvgIcon","SVGIcon","cr:9135","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9135")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXComposerEmojiButton.react",["fbt","JSResourceForInteraction","LexicalComposerContext","MWXComposerButtonGroupPopoverButton.react","MWXIconFaceHappy","Promise","promiseDone","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l=c("JSResourceForInteraction")("cometAddEmojiToComposerForLexical").__setRef("MWXComposerEmojiButton.react");function a(){var a=d("LexicalComposerContext").useLexicalComposerContext(),e=a[0];return k.jsx(c("MWXComposerButtonGroupPopoverButton.react"),{icon:c("MWXIconFaceHappy"),label:h._("__JHASH__450DFbxuM_0__JHASH__"),onPress:function(){l.preload()},popover:c("JSResourceForInteraction")("MWV2ComposerEmojiPickerForJSResource").__setRef("MWXComposerEmojiButton.react"),popoverProps:{onSelect:function(a){return c("promiseDone")(l.load(),function(c){c(a,e,16);return(i||(i=b("Promise"))).resolve()})},withArrow:!1},preloadTrigger:"button",testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMAWGetSendEditActionForSecure",["MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWJobDefinitions","MAWMiActOnActThreadReady","MAWTimedJob","WAJobOrchestratorTypes","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return j(function(b,e,f){if(b==null||e==null)return;var g=d("MAWDbMsg").toMsgId(e);if(g==null)return;c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(a.tables,b,"MWV2ComposerEditContainer.react",function(a,b,c){return d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:g}).then(function(a){if(a!=null)return d("MAWTimedJob").TimedUIJobStarters.waitUntilPersisted(d("MAWJobDefinitions").jobSerializers.sendEditMsg({editMsgContent:{content:f,mentionedJids:[]},originalProtocolMsgId:a},d("MAWExternalId").generateExternalId(),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}))})}))},[a])}g["default"]=a}),98);
__d("useMAWGetSendEditActionforOpen",["LSFactory","LSOptimisticEditMessageStoredProcedure","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return j(function(b,d){return c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticEditMessageStoredProcedure")(c("LSFactory")(a),{messageId:b,text:d})},"readwrite"))},[a])}g["default"]=a}),98);
__d("useMWComposerEmojiTransform",["react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect,j=c("requireDeferred")("getUpgradedCometEmojiComposerHandler").__setRef("useMWComposerEmojiTransform");function a(a){var b=c("useDeferredModuleOnReady")(j);i(function(){return b==null?void 0:b(a,16)},[a,b])}g["default"]=a}),98);
__d("useMWXComposerClearAndSendOnEnter",["Lexical","MLCKeyBindingUtil","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useInsertionEffect,k=b.useLayoutEffect,l=b.useRef;function a(a,b){var e=a.clearReplyState,f=a.editor,g=a.onSend,h=l(b);j(function(){h.current=b},[b]);var m=i(function(){g(h.current),e==null?void 0:e(),f.dispatchCommand(d("Lexical").CLEAR_EDITOR_COMMAND)},[g,e,f]);k(function(){return f.registerCommand(d("Lexical").KEY_ENTER_COMMAND,function(a){if(a!=null&&!a.shiftKey&&!a.altKey&&(!c("gkx")("23402")||d("MLCKeyBindingUtil").hasCommandModifier(a))){a.preventDefault();m();return!0}return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[f,m]);return{onSend:m}}g["default"]=a}),98);
__d("useMWXLexicalEditor",["CometLexicalEmojiNode","Lexical","MessengerLexicalActorNode","cometLexicalBaseTheme","cr:3101","cr:6138","useLexicalInitializeEditor__DEPRECATED","useMWPLexicalClearEditor","useStable"],(function(a,b,c,d,e,f,g){"use strict";e=b("cr:3101")||b("cr:6138");var h=[d("MessengerLexicalActorNode").MessengerLexicalActorNode,e==null?void 0:e.MessengerLexicalCommandNode,d("CometLexicalEmojiNode").EmojiNode];function a(){var a=c("useStable")(function(){return d("Lexical").createEditor({namespace:"MWPEditor",nodes:h.filter(Boolean),onError:function(){},theme:babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{paragraph:"xat24cr xdj266r"})})});c("useMWPLexicalClearEditor")(a);c("useLexicalInitializeEditor__DEPRECATED")(a);return{editor:a}}g.useMWXLexicalEditor=a}),98);
__d("MWV2ComposerEditContainer.react",["fbt","LSMessagingThreadTypeUtil","Lexical","LexicalText","MAWEditMessageContext.react","MAWVault","MWPActor.react","MWXComposer.react","MWXComposerEmojiButton.react","MWXIconCheckmarkCircle","MWXIconCross","ReQL","ReQLSuspense","isStringNullOrEmpty","react","useLogMAWEditMessage","useMAWGetSendEditActionForSecure","useMAWGetSendEditActionforOpen","useMWComposerEmojiTransform","useMWXComposerClearAndSendOnEnter","useMWXLexicalEditor","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useContext,m=b.useEffect,n=b.useMemo,o=b.useState;function a(a){var b=a.editMessageData,e=(i||(i=c("useReStore")))();a=l(d("MAWEditMessageContext.react").Context);var g=a.setEditMessageData,j=d("MWPActor.react").useActor(),p=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.messages).getKeyRange(b==null?void 0:b.threadKey,b==null?void 0:b.timestampMs,b==null?void 0:b.messageId)},[e,b==null?void 0:b.messageId,b==null?void 0:b.threadKey,b==null?void 0:b.timestampMs],f.id+":46"),q=c("useMAWGetSendEditActionforOpen")(),r=c("useMAWGetSendEditActionForSecure")(),s=n(function(){var a;return d("MAWVault").unvault((a=p==null?void 0:p.text)!=null?a:"").trim()},[p==null?void 0:p.text]),t=c("useLogMAWEditMessage")();a=d("useMWXLexicalEditor").useMWXLexicalEditor();var u=a.editor;a=function(){var a=u.getEditorState().read(d("LexicalText").$rootTextContent).trim();if(c("isStringNullOrEmpty")(a)||a===s)return;d("LSMessagingThreadTypeUtil").isSecure(b.threadType)?r(p==null?void 0:p.threadKey,p==null?void 0:p.messageId,a):q(b.messageId,a);t(b.threadType,b.threadKey,b.messageId,j,"EDIT_MESSAGE");g(null)};c("useMWXComposerClearAndSendOnEnter")({clearReplyState:null,editor:u,onSend:a});var v=o(!1),w=v[0],x=v[1];m(function(){return u.registerTextContentListener(function(a){a=a.trim();x(!c("isStringNullOrEmpty")(a)&&a!==s)})},[u,s]);m(function(){u.dispatchCommand(d("Lexical").CLEAR_EDITOR_COMMAND),u.update(function(){return d("Lexical").$insertNodes([d("Lexical").$createTextNode(s)])})},[u,s]);c("useMWComposerEmojiTransform")(u);return k.jsx(c("MWXComposer.react"),{editor:u,header:k.jsx(c("MWXComposer.react").Header,{headerText:h._("__JHASH__36XeYdlCuO8__JHASH__"),rightAddon:k.jsx(c("MWXComposer.react").Button,{icon:c("MWXIconCross"),label:h._("__JHASH__NFQuJJERXoJ__JHASH__"),onPress:function(){g(null)}}),subtext:s}),children:k.jsxs(c("MWXComposer.react").Row,{children:[k.jsx(c("MWXComposer.react").InputArea,{children:k.jsxs(c("MWXComposer.react").Row,{children:[k.jsx(c("MWXComposer.react").TextEditor,{}),k.jsx(c("MWXComposerEmojiButton.react"),{})]})}),k.jsx(c("MWXComposer.react").Button,{disabled:!w,icon:c("MWXIconCheckmarkCircle"),label:h._("__JHASH__645ugDJYeSD__JHASH__"),onPress:a,testid:void 0})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("ReQLSubscribe",["ErrorGuard","ReQL","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){a=a.take(1);var e=(h||(h=c("ErrorGuard"))).guard(b),f=!1,g=null,i=a.subscribe(function(a,b){if(f)return;switch(b.operation){case"delete":(g==null||g.current!==void 0)&&(g={current:void 0},e(g.current));return;case"add":case"put":((a=g)==null?void 0:a.current)!==b.value&&(g={current:b.value},e(g.current))}});c("promiseDone")(d("ReQL").firstAsync(a),function(a){!f&&g==null&&(g={current:a},e(a))});return function(){f||(f=!0,i==null?void 0:i())}}g.subscribeToFirst=a}),98);
__d("MWV2SetupS2SLoggingShared",["I64","LSIntEnum","MWChatInteraction","MWLSLogSend","MWVersion","ReQL","ReQLSubscribe","asyncToGeneratorRuntime","err","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){d("sendToSentQPLLogger").markSendToSentPoint(a,"received_successful_server_ack"),d("sendToSentQPLLogger").markSendToSentSuccess(a),d("MWChatInteraction").remove(d("MWChatInteraction").s2sKey(b))}function k(a,b){d("sendToSentQPLLogger").markSendToSentFail(a,c("err")("fail_to_send_message")),d("MWChatInteraction").remove(d("MWChatInteraction").s2sKey(b))}function l(a){d("sendToSentQPLLogger").markSendToSentPoint(a,"sending_message")}function a(a){var c=a.db,e=a.initiatingSource,f=a.isCommunityEvent,g=a.isMessageRequest,m=a.s2sInstanceKey,n=a.threadType,o=a.traceSendMessageAPI,p={initiatingSource:e,isCommunityEvent:f,isMessageRequest:g,mwVersion:d("MWVersion").v2,threadType:n};return function(a){d("MWLSLogSend").logSentHeroInteraction(o,a,p);d("MWChatInteraction").set(d("MWChatInteraction").s2sKey(a),String(m));d("sendToSentQPLLogger").addSendToSentAnnotations(m,{string:babelHelpers["extends"]({},d("MWLSLogSend").getMessageSendAnnotations(p))});d("sendToSentQPLLogger").addSendToSentAnnotations(m,{bool:{subscription_points_gk:!0}});var e=!1,f=d("ReQL").fromTableAscending(c.tables.messages.index("optimistic")).getKeyRange(a),g=d("ReQLSubscribe").subscribeToFirst(f,function(b){b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2))?(e=!0,j(m,a),g()):b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(4))?(e=!0,k(m,a),g()):b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(1))&&l(m)});window.setTimeout(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!e){var a=(yield d("ReQL").firstAsync(f));e||d("sendToSentQPLLogger").addSendToSentAnnotations(m,{string:{status_after_10s:a?""+(i||(i=d("LSIntEnum"))).toNumber(a.sendStatusV2):"none"}})}}),1e4);window.setTimeout(function(){g()},6e4)}}g["default"]=a}),98);
__d("useMWV2SendOpenMessageImplShared",["ArmadilloDataTraceCheckPoint","I64","Int64Hooks","LSAppendDataTraceAddonStoredProcedure","LSAuthorityLevel","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","MWPActor.react","MWPReplyContext.react","MessagePowerUp","MultipleTabsLogger","asyncToGeneratorRuntime","gkx","react","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useContext;function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e!=null&&c("gkx")("23995")&&(yield c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(i||(i=d("I64"))).minus_one,tags:b}))});return m.apply(this,arguments)}function a(a){var e=a.authorityLevel,f=a.ephemeralDurationInSec,g=a.onOptimisticMessageCreation,h=a.pluginType,m=a.skipUrlPreviewGen,n=a.threadKey,o=a.threadType,p=d("MWPActor.react").useActor();a=k(d("MWPReplyContext.react").MWPReplyContext);var q=a.reply,r=c("useLSMessagingInitiatingSource")();return d("Int64Hooks").useCallbackInt64(function(a){var k=a.afterSend,s=a.attributionAppId,t=a.dataTraceId,u=a.externalAttachmentUrl,v=a.hotEmojiSize,w=a.logSendPoint,x=a.mentionData,y=a.messageText,z=a.messageTypeParams,A=a.optimisticAttachmentPreview,B=a.platformToken,C=a.profileRanges,D=a.richTextFormatType,E=a.s2sInstanceKey,F=a.setupS2SLogging,G=a.source,H=a.stickerID;a=a.transaction;return I(a);function I(a){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=c("LSFactory")(a),I=c("gkx")("24135");yield l(a,(i||(i=d("I64"))).to_string(n),t);a=(yield d("MultipleTabsLogger").hasMultipleTabs());var J=z.hasAttachment,K=z.hasGif,L=z.hasLinks,M=z.hasSticker,N=z.hasText;b=(yield c("LSOptimisticSendMessageV2StoredProcedure")(b,{extraSendMessageParams:d("LSShape").ofRecord({attribution_app_id:s,calculate_denormalizations:!1,data_trace_id:(b=t)!=null?b:void 0,ephemeral_duration_in_sec:f,external_attachment_url:u,hot_emoji_size:v,initiating_source:r,mark_read:i.ge(e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),mention_data:x,multitab_env:a,optimistic_attachment_preview:A,platform_token:B,plugin_type:h,power_up_style:j.ofNumber(c("MessagePowerUp").NONE),qpl_instance_key:E==null?void 0:E.toString(),reply_source_id:q==null?void 0:q.messageId,reply_source_type:q!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,reply_source_type_v2:q!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,rich_text_format_type:D,skip_url_preview_gen:m,source:G,sticker_id:H,text_has_links:L&&I}),mailboxType:j.ofNumber(c("LSMailboxType").MESSENGER),senderId:p,text:y,threadKey:n,threadType:o}));w("create_optimistic_message_success");if(!J){a=b[0];F(a)}g!=null&&g({TAG:0,hasLink:L,hasMention:C!=null&&C.length>0,isGIF:K,isReply:!!(q&&q.messageId!==""),isSticker:M,isText:N,offlineThreadingId:b[0]});I=b[0];k!=null&&k(I);return b});return J.apply(this,arguments)}},[n,f,r,e,h,q,m,p,o,g])}g["default"]=a}),98);
__d("useMWV2SendOpenMessageImpl",["useMWV2SendOpenMessageImplShared"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.ephemeralDurationInSec,d=a.onOptimisticMessageCreation,e=a.pluginType,f=a.skipUrlPreviewGen;a=a.thread;return c("useMWV2SendOpenMessageImplShared")({authorityLevel:a.authorityLevel,ephemeralDurationInSec:b,onOptimisticMessageCreation:d,pluginType:e,skipUrlPreviewGen:f,threadKey:a.threadKey,threadType:a.threadType})}g["default"]=a}),98);
__d("MWPSendMessageLogger",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MWLogSend").__setRef("MWPSendMessageLogger");function a(a,b,c,d,e,f,g,i){h.onReady(function(h){return h.log({actor:c,attachmentFbids:e,attachmentType:g,backend:0,hasReply:i,offlineThreadingId:d,sendType:0,source:f,threadKey:a,threadType:b})})}g.log=a}),98);
__d("MessagingLoggingUtils",["I64","MessagingAttachmentType"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=(h||(h=d("I64"))).to_int32(a);switch(a){case c("MessagingAttachmentType").NONE:return 1;case c("MessagingAttachmentType").STICKER:return 4;case c("MessagingAttachmentType").IMAGE:return 8;case c("MessagingAttachmentType").ANIMATED_IMAGE:return 6;case c("MessagingAttachmentType").VIDEO:return 10;case c("MessagingAttachmentType").AUDIO:return 11;case c("MessagingAttachmentType").FILE:return 9;case c("MessagingAttachmentType").XMA:return 13;case c("MessagingAttachmentType").EPHEMERAL_IMAGE:return 8;case c("MessagingAttachmentType").EPHEMERAL_VIDEO:return 5;case c("MessagingAttachmentType").SELFIE_STICKER:return 22;case c("MessagingAttachmentType").SOUND_BITE:return 23;default:return 1}}g.convertI64ToAttachmentType=a}),98);
__d("MWMediaTraceHandler",["I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSDataTraceType","LSFactory","LSIntEnum","MAWTimeUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){return a.data_trace_meta.add({contextOne:void 0,contextThree:void 0,contextTwo:void 0,foregroundTimestampMs:(h||(h=d("I64"))).zero,initTimestampMs:d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),predefinedId:void 0,shouldFlush:!1,traceId:b,traceType:(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").TASK)})}function a(a,b,e,f){return j(a,b).then(function(){return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").RICH_MEDIA_UPLOAD_START),dataTraceId:b,syncChannel:(h||(h=d("I64"))).neg_one,tags:h.to_string(e)+","+h.to_string(f)})})}g.logMediaSendStart=a}),98);
__d("issueLSMediaSendJobs",["ArmadilloDataTraceCheckPoint","I64","LSAppendDataTraceAddonStoredProcedure","LSFactory","LSGenerateTraceId","LSInsertNewMediaSendStoredProcedure","LSMarkSubJobCompletedV2StoredProcedure","MWConsole","MWMediaTraceHandler","MWPOpenComposerUtils","MessagingLoggingUtils","Promise","asyncToGeneratorRuntime","gkx","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b!=null&&(yield d("MWMediaTraceHandler").logMediaSendStart(a,b,c,(i||(i=d("I64"))).of_int32(e)))});return k.apply(this,arguments)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e!=null&&c("gkx")("23995")&&(yield c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(i||(i=d("I64"))).minus_one,tags:b}))});return m.apply(this,arguments)}function a(a,b,c,d,e){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k){var m=c("LSGenerateTraceId")(),n=k[0];n=d("MessagingLoggingUtils").convertI64ToAttachmentType(n.attachmentType);yield j(a,m,(i||(i=d("I64"))).of_int32(g.length),n);var o=0;n=g.map(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,g){yield c("LSInsertNewMediaSendStoredProcedure")(c("LSFactory")(a),{attachmentType:b.attachment_type,inMessageIndex:(i||(i=d("I64"))).of_int32(g),isSecure:!1,offlineAttachmentId:b.attachment_fbid,offlineThreadingId:f,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1});yield d("MWPOpenComposerUtils").updateMediaStaging(a,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{isSent:!0})});g=k.find(function(a){return a.offlineAttachmentId===b.offline_attachment_id});if(g!=null){var h=g.fbid;h!=null&&(yield c("LSMarkSubJobCompletedV2StoredProcedure")(c("LSFactory")(a),{fbid:h,offlineAttachmentId:b.attachment_fbid}),yield d("MWPOpenComposerUtils").deleteMediaStaging(a,b.attachment_fbid),yield d("MWPOpenComposerUtils").updateAttachment(a,e,f,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{attachmentFbid:(i||(i=d("I64"))).to_string(h)})}),o++)}c("gkx")("24136")&&(yield d("MWPOpenComposerUtils").updateAttachment(a,e,f,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{previewHeight:void 0,previewWidth:void 0})}))});return function(a,b){return g.apply(this,arguments)}}());yield (h||(h=b("Promise"))).allSettled(n);yield d("MWPOpenComposerUtils").resumeSendJob(c("LSFactory")(a),f,m);yield l(a,i.to_string(e),m);yield c("updateAndFlushLSDataTrace")(a,m);return{sentWithAllFilesUploaded:o===g.length}});return n.apply(this,arguments)}g["default"]=a}),98);
__d("issueSendInstamadilloMediaMessageCometTask",["CometTaskFramework","MAWCurrentUser","MWPOpenComposerUtils","Promise","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){c("promiseDone")(c("CometTaskFramework")(d("MAWCurrentUser").getID()).issueTask("igd_send_media_message",{offlineThreadingId:f}));f=e.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield d("MWPOpenComposerUtils").updateMediaStaging(a,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{isSent:!0})})});return function(a){return c.apply(this,arguments)}}());yield (h||(h=b("Promise"))).allSettled(f)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("useMWV2SendOpenStagedMedia",["I64","Int64Hooks","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessagingThreadTypeUtil","LSPendingTasksPluginType","LSShape","LSThreadBitOffset","LSVec","MWConsole","MWPActor.react","MWPComposerMediaUploadUtil","MWPReplyContext.react","MWPSendMessageLogger","MessagingAttachmentType","MessagingLoggingUtils","MessengerWebEventsFalcoEvent","asyncToGeneratorRuntime","issueLSMediaSendJobs","issueSendInstamadilloMediaMessageCometTask","react","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useContext;function a(a,e){var f=d("MWPActor.react").useActor(),g=k(d("MWPReplyContext.react").MWPReplyContext),h=g.reply,l=c("useLSMessagingInitiatingSource")(),m=d("LSThreadBitOffset").has(40,e);return d("Int64Hooks").useCallbackInt64(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var g=b.isFirstMessage;g=g===void 0?!1:g;var k=b.isFirstMessageText,n=b.mediaStagings,o=b.pluginType,p=b.sendFirstMessageSeparately;p=p===void 0?!1:p;var q=b.setupS2SLogging,r=b.source;b=b.transaction;if(n.length===0){d("MWPSendMessageLogger").log(e.threadKey,e.threadType,f,void 0,[],r,c("MessagingAttachmentType").NONE,h!=null);return}var s=n[0];s=d("MessagingLoggingUtils").convertI64ToAttachmentType(s.attachmentType);var t=d("MWPComposerMediaUploadUtil").createPartitionedAttachments(n,m),u=!0;for(var v=0;v<t.length;v++)if(!g||!p||v===0&&g&&!k){var w=t[v],x=(yield c("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(c("LSFactory")(b),{attachments:c("LSVec").ofArray(w.map(d("LSShape").ofRecord)),replySourceId:h==null?void 0:h.messageId,replySourceType:h!=null?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,replySourceTypeV2:h!=null?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,senderId:f,threadKey:e.threadKey,threadType:e.threadType}));x=x[0];v===0&&q(x);yield b.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:l,markThreadRead:!1,messageId:void 0,offlineThreadingId:x,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:void 0,taskId:(j||(j=d("I64"))).of_string(x),threadAttributionSource:r,threadKey:e.threadKey});a==null?void 0:a({TAG:2,numberOfAttachments:w.length,offlineThreadingId:x});if(o!=null&&(i||(i=d("LSIntEnum"))).unwrapIntEnum(o)===c("LSPendingTasksPluginType").IGD_INSTAMADILLO)yield c("issueSendInstamadilloMediaMessageCometTask")(b,w,x);else{var y=(yield c("issueLSMediaSendJobs")(b,e.threadKey,x,w,n));u=u&&y.sentWithAllFilesUploaded}d("MWPSendMessageLogger").log(e.threadKey,e.threadType,f,x,w.map(function(a){return a.attachment_fbid}),r,s,h!=null)}y=(j||(j=d("I64"))).to_string(e.threadKey);x=d("LSMessagingThreadTypeUtil").isGroup(e.threadType)?[y,null]:[null,y];var z=x[0],A=x[1];c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:u?"hit_send_message_with_all_files_uploaded":"hit_send_message_with_files_pending",extra_data:null,other_user_fbid:A,thread_fbid:z}})});return function(a){return g.apply(this,arguments)}}(),[m,e.threadKey,e.threadType,f,h,l,a])}g["default"]=a}),98);
__d("issueLSAudioMediaSendJob",["I64","LSDatabaseSingletonLazyWrapper","LSFactory","LSInsertNewMediaSendStoredProcedure","LSMarkSubJobCompletedV2StoredProcedure","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c,e){if(a==null)return;if(!a.startsWith("blob:"))return;var f={contents:function(){}};f.contents=d("ReQL").fromTableAscending(c.tables.attachments).getKeyRange(e).subscribe(function(c,d){if(d.operation==="put"){c=d.value;if(c.attachmentFbid!==b.toString())return;d=c.playableUrl;d!=null&&!d.startsWith("blob:")&&(f.contents(),URL.revokeObjectURL(a))}})}function a(a,b,c,d,e,f,g,h,i,k,l){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,j,k,l,m,n,o,p){yield c("LSInsertNewMediaSendStoredProcedure")(c("LSFactory")(a),{attachmentType:l.attachment_type,inMessageIndex:(h||(h=d("I64"))).zero,isSecure:!1,offlineAttachmentId:j,offlineThreadingId:k,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1});a=function(a,f){if(f==null)return;var m=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("LSDatabaseSingletonLazyWrapper")());return a.runInTransaction(function(){var m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=c("LSFactory")(b);yield c("LSMarkSubJobCompletedV2StoredProcedure")(b,{fbid:(h||(h=d("I64"))).of_float(f),offlineAttachmentId:j});yield d("MWPOpenComposerUtils").resumeSendJob(b,k,g);i(l.playable_url,f,a,e)});return function(a){return m.apply(this,arguments)}}(),"readwrite")});return function(){return a.apply(this,arguments)}}();c("promiseDone")(m(),function(){o==null?void 0:o(a)})};var q=function(a,b){p==null?void 0:p((b=b.response.getErrorDescriptionString())!=null?b:"unknown_upload_failure",a)};d("MWPComposerMediaUploadUtil").startUpload(n,void 0,a,q,!0,[m.file],[j],void 0,void 0,m.waveformData,void 0,h.to_string(f))});return j.apply(this,arguments)}g["default"]=a}),98);
__d("useMWV2SendOpenVoiceClipImplShared",["I64","Int64Hooks","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSPendingTasksPluginType","LSShape","LSVec","MWMediaTraceHandler","MWPActor.react","MWPComposerMediaUploadUtil","MWPReplyContext.react","MessagingLoggingUtils","OfflineThreadingId","asyncToGeneratorRuntime","issueLSAudioMediaSendJob","issueSendInstamadilloMediaMessageCometTask","react","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useContext;function l(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b!=null&&(yield d("MWMediaTraceHandler").logMediaSendStart(a,b,c,(i||(i=d("I64"))).of_int32(e)))});return m.apply(this,arguments)}function a(a){var e=a.onOptimisticMessageCreation,f=a.onUploadFailure,g=a.onUploadStart,h=a.onUploadSuccess,m=a.sendMessageLogger,n=a.skipUrlPreviewGen,o=a.threadKey,p=a.threadType,q=d("MWPActor.react").useActor();a=k(d("MWPReplyContext.react").MWPReplyContext);var r=a.reply,s=c("useLSMessagingInitiatingSource")();return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.dataTraceId,k=a.pluginType,t=a.setupS2SLogging,u=a.source,v=a.transaction;a=a.voiceClip;var w=c("LSFactory")(v),x=d("OfflineThreadingId").createOfflineThreadingID(),y=d("MWPComposerMediaUploadUtil").getAudioAttachment(x,a.file,a.duration,a.waveformData);yield l(v,b,(i||(i=d("I64"))).one,2);w=(yield c("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(w,{attachments:c("LSVec").ofArray([d("LSShape").ofRecord(y)]),replySourceId:r==null?void 0:r.messageId,replySourceType:r!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,replySourceTypeV2:r!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,senderId:q,threadKey:o,threadType:p}));w=w[0];t(w);yield v.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:s,markThreadRead:!1,messageId:void 0,offlineThreadingId:w,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:n,taskId:i.of_string(w),threadAttributionSource:u,threadKey:o});e!=null&&e({TAG:1,offlineThreadingId:w});k!=null&&(j||(j=d("LSIntEnum"))).unwrapIntEnum(k)===c("LSPendingTasksPluginType").IGD_INSTAMADILLO?yield c("issueSendInstamadilloMediaMessageCometTask")(v,[y],w):yield c("issueLSAudioMediaSendJob")(v,o,q,b,x,w,y,a,g,h,f);m({actor:q,attachmentFbids:[y.attachment_fbid],attachmentType:d("MessagingLoggingUtils").convertI64ToAttachmentType(y.attachment_type),hasReply:r!=null,key:o,offlineThreadingId:w,source:u,type:p})});return function(b){return a.apply(this,arguments)}}(),[q,o,p,r,s,n,e,g,m,h,f])}g["default"]=a}),98);
__d("useMWV2SendOpenVoiceClip",["Int64Hooks","MWPSendMessageLogger","useMWV2SendOpenVoiceClipImplShared"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.onOptimisticMessageCreation,e=a.onUploadFailure,f=a.onUploadStart,g=a.onUploadSuccess,h=a.skipUrlPreviewGen;a=a.thread;var i=d("Int64Hooks").useCallbackInt64(function(a){var b=a.actor,c=a.attachmentFbids,e=a.attachmentType,f=a.hasReply,g=a.key,h=a.offlineThreadingId,i=a.source;a=a.type;b!=null&&d("MWPSendMessageLogger").log(g,a,b,h,c,i,e,f)},[]);return c("useMWV2SendOpenVoiceClipImplShared")({onOptimisticMessageCreation:b,onUploadFailure:e,onUploadStart:f,onUploadSuccess:g,sendMessageLogger:i,skipUrlPreviewGen:h,threadKey:a.threadKey,threadType:a.threadType})}g["default"]=a}),98);
__d("useMWV2SendOpenMessage",["I64","Int64Hooks","LSGenerateTraceId","LSMessagingThreadTypeUtil","LSShape","MWPReplyContext.react","MWSharedMsgLogUtils","MWV2ComposerActionsContext.react","MWV2SetupS2SLoggingShared","ReQL","asyncToGeneratorRuntime","gkx","hasDefaultThreadOneToOneCapability","react","sendToSentQPLLogger","useAsyncReStore","useLSMessagingInitiatingSource","useMWLSDefaultThreadSource","useMWV2SendOpenMessageImpl","useMWV2SendOpenStagedMedia","useMWV2SendOpenVoiceClip"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useContext;function a(a){var e=a.ephemeralDurationInSec,f=a.onOptimisticMessageCreation,g=a.onUploadFailure,h=a.onUploadStart,k=a.onUploadSuccess,l=a.pluginType,m=a.skipUrlPreviewGen,n=a.thread,o=c("useAsyncReStore")();a=j(d("MWPReplyContext.react").MWPReplyContext);var p=a.reply,q=c("useLSMessagingInitiatingSource")(),r=c("useMWLSDefaultThreadSource")(),s=c("useMWV2SendOpenVoiceClip")({onOptimisticMessageCreation:f,onUploadFailure:g,onUploadStart:h,onUploadSuccess:k,skipUrlPreviewGen:m,thread:n}),t=c("useMWV2SendOpenStagedMedia")(f,n),u=c("useMWV2SendOpenMessageImpl")({ephemeralDurationInSec:e,onOptimisticMessageCreation:f,pluginType:l,skipUrlPreviewGen:m,thread:n}),v=d("LSMessagingThreadTypeUtil").isMessageRequest(n);a=j(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext);var w=a.onMessageSendAttempt;return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h,j,k,m,x,y,z,A,B,C,D,E){z===void 0&&(z=!1);A===void 0&&(A=!1);var F=!1;w==null?void 0:w(!0);function G(a){B.addMarkerPoint(a,"AppTiming"),d("sendToSentQPLLogger").markSendToSentPoint(C,a)}var H=r(n.threadKey),I=c("LSGenerateTraceId")(),J={contents:1};D=n.eventStartTimestampMs!=null;var K=n.threadType,L=(yield o),M=c("MWV2SetupS2SLoggingShared")({db:L,initiatingSource:q,isCommunityEvent:D,isMessageRequest:v,s2sInstanceKey:C,threadType:K,traceSendMessageAPI:B});if(c("gkx")("24121")){D=(yield c("hasDefaultThreadOneToOneCapability")(n.threadKey,L));D&&(G("invalid_send_to_default_e2ee"),d("sendToSentQPLLogger").addSendToSentAnnotations(C,{string:{invalid_send_to_default_e2ee_attribution:(i||(i=d("I64"))).to_string(H)}}))}return L.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.media_staging).filter(function(a){return!a.isSent&&(i||(i=d("I64"))).equal(a.threadKey,n.threadKey)}))),o=d("MWSharedMsgLogUtils").getMessageTypeParams(a,g,p,f,j,m,c);d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(B,o,n,q);d("sendToSentQPLLogger").addSendToSentAnnotations(C,yield d("MWSharedMsgLogUtils").getSendToSentAnnotations(n,o,q));if(m!=null){yield s({dataTraceId:I,pluginType:l,setupS2SLogging:M,source:H,transaction:b,voiceClip:m});return}var r=o.hasGif,v=o.hasSticker,w=o.hasText;v?J.contents=4:r&&(J.contents=6);var D=e!=null?d("LSShape").ofRecord({mention_ids:e.map(function(a){return a.id}).join(","),mention_lengths:e.map(function(a){return String(a.length)}).join(","),mention_offsets:e.map(function(a){return String(a.offset)}).join(","),mention_types:e.length!==0?e.map(function(a){return a.type}).join(","):void 0}):void 0;G("before_create_optimistic_message");if(w||v||r){F=!0;if(z===!1||A===!0){yield u({afterSend:y,attributionAppId:h,dataTraceId:I,externalAttachmentUrl:j,hotEmojiSize:g,logSendPoint:G,mentionData:D,messageText:a,messageTypeParams:o,optimisticAttachmentPreview:k,platformToken:x,profileRanges:e,richTextFormatType:E,s2sInstanceKey:C,setupS2SLogging:M,source:H,stickerID:f,transaction:b});if(z===!0)return}}else y!=null&&y();!v&&!r&&(yield t({isFirstMessage:A,isFirstMessageText:F,mediaStagings:c,pluginType:l,sendFirstMessageSeparately:z,setupS2SLogging:M,source:H,transaction:b}))});return function(a){return c.apply(this,arguments)}}(),"readwrite","ui")});return function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a.apply(this,arguments)}}(),[w,r,n,o,q,v,p,s,u,t,l])}g["default"]=a}),98);
__d("useMWV2OnSendOpenMessage",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWOptimisticUpdateContactRelationship","MWCMThreadTypes.react","MWPActor.react","MWPReplyContext.react","MessageRequestsLog","promiseDone","qpl","react","sendToSentQPLLogger","useCometInteractionTracing","useMWV2SendOpenMessage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");var k=b.useContext,l=b.useMemo;function a(a){var b=a.afterSendMessage,e=a.ephemeralDurationInSec,f=a.onOptimisticMessageCreation,g=a.onUploadFailure,j=a.onUploadStart,m=a.onUploadSuccess,n=a.pluginType,o=a.skipUrlPreviewGen,p=a.thread,q=(h||(h=c("useReStore")))(),r=d("MWPActor.react").useActor();a=k(d("MWPReplyContext.react").MWPReplyContext);var s=a.clearReply,t=p.threadSubtype,u=l(function(){return{is_community_event:(p.eventStartTimestampMs!=null).toString(),is_cutover:(!1).toString(),is_secure:(!1).toString(),thread_id:(i||(i=d("I64"))).to_string(p.threadKey),thread_subtype:t&&d("MWCMThreadTypes.react").isIGBroadcastChannelThread(t)?(i||(i=d("I64"))).to_string(t):"",thread_type:i.to_string(p.threadType)}},[p,t]),v=c("useCometInteractionTracing")(c("qpl")._(30605384,"573"),"fast","INTERACTION",void 0,u),w=c("useMWV2SendOpenMessage")({ephemeralDurationInSec:e,onOptimisticMessageCreation:f,onUploadFailure:g,onUploadStart:j,onUploadSuccess:m,pluginType:n,skipUrlPreviewGen:o,thread:p});return d("Int64Hooks").useCallbackInt64(function(a,e,f,g,h,i,j,k,l,m,n,o,t,x){n===void 0&&(n=!1);o===void 0&&(o=!1);var y=d("LSMessagingThreadTypeUtil").isMessageRequest(p);return v(function(t){var v=d("sendToSentQPLLogger").markSendToSentStart();d("sendToSentQPLLogger").addSendToSentAnnotations(v,{string:u});c("promiseDone")(w(a,e,f,g,h,i,j,k,l,m,n,o,t,v,void 0,x),function(){b(),s(p.threadKey,!1),d("MAWOptimisticUpdateContactRelationship").call(p,q,r),y&&d("MessageRequestsLog").logActionConfirmed(p,1)})})},[p,v,u,w,b,s,q,r])}g["default"]=a}),98);
__d("MWV2OpenComposer.react",["GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWPReplyContext.react","MWV2ComposerEditContainer.react","MWV2ComposerReplyView.react","MWV2ComposerView.react","MessengerMSplitFlag","Promise","WebUXLoggingSurfaceContextProvider","asyncToGeneratorRuntime","cr:5001","cr:5118","emptyFunction","gkx","promiseDone","react","useAsyncReStore","useMAWEditMessageData","useMWMediaManager","useMWOnTypingStateChanged","useMWPComposerEditor","useMWV2FileDropzoneRegisterHandler","useMWV2OnSendOpenMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j.useContext,m=c("gkx")("23426");function a(a){var e,f=a.afterSendMessage,g=f===void 0?c("emptyFunction"):f;f=a.isPreviewThread;var j=a.thread,n=c("useAsyncReStore")();a=l(d("MWPReplyContext.react").MWPReplyContext);a=a.reply;var o=b("cr:5001")==null?void 0:b("cr:5001").useMWAdmodOnboardingSuggestedActionsContext(),p=c("useMAWEditMessageData")(),q=c("useMWMediaManager")({thread:j}),r=q.handleFileRemove,s=q.handleFileSelect;q=q.mediaStaging;var t=d("Int64Hooks").useCallbackInt64(function(){var a;g();var e=o==null?void 0:(a=o.showWelcomeMessageSuggestion)==null?void 0:a.source,f=o==null?void 0:(a=o.showWelcomeMessageSuggestion)==null?void 0:a.entryPoint;b("cr:5118")&&(o==null?void 0:(a=o.showWelcomeMessageSuggestion)==null?void 0:a.show)&&(o==null?void 0:(a=o.showWelcomeMessageSuggestion)==null?void 0:a.source)!=null&&c("promiseDone")((h||(h=b("Promise"))).resolve().then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=(yield n);a=(a=j==null?void 0:j.parentThreadKey)!=null?a:(i||(i=d("I64"))).zero;b=(yield b.table("community_folders").get(a));b=(b=b==null?void 0:b.fbGroupId)!=null?b:(i||(i=d("I64"))).zero;d("GroupsCometChatsEngagementLogger").log({action:"tap",community_id:(i||(i=d("I64"))).to_string(a),entry_point:f,event:"admin_send_message_visible_when_message_sent",group_id:i.to_string((a=b)!=null?a:(i||(i=d("I64"))).zero),parent_surface:"thread_view",source:e,surface:"admin_send_message_hint_card"})})));o==null?void 0:o.setShowWelcomeMessageSuggestion({show:!1})},[g,n,o,j==null?void 0:j.parentThreadKey]);t=c("useMWV2OnSendOpenMessage")({afterSendMessage:t,skipUrlPreviewGen:!1,thread:j});var u=c("useMWOnTypingStateChanged")(j);c("useMWV2FileDropzoneRegisterHandler")(s);var v=d("LSMessagingThreadTypeUtil").isAiBotSummoning(j);f=c("useMWPComposerEditor")({isPreviewThread:f,mediaStaging:q,onSendMessage:t,onTypingStateChanged:u,threadKey:j.threadKey});u=f.editor;var w=f.editorElementRef,x=f.hasStuffToSend;f=f.sendMessage;return k.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"open_composer",children:k.jsxs("div",{children:[b("cr:5118")&&(o==null?void 0:(e=o.showWelcomeMessageSuggestion)==null?void 0:e.show)?k.jsx(b("cr:5118"),{threadKey:j.threadKey}):a!=null?k.jsx(d("MWV2ComposerReplyView.react").MWV2ComposerReplyView,{messageId:a.messageId,messageTimestamp:a.timestampMs,thread:j}):null,p!=null&&k.jsx(c("MWV2ComposerEditContainer.react"),{editMessageData:p}),p!=null?null:k.jsx(d("MWV2ComposerView.react").MWV2ComposerView,{editor:u,editorElementRef:w,hasStuffToSend:x,isAiBotMentionsEnabled:v&&m&&!c("MessengerMSplitFlag").is_msplit_account,mediaStaging:q,onAttachmentRemoved:r,onAttachmentsAdded:s,onSendMessage:t,policyProduct:"messaging_lightswitch",sendMessage:f,supportedFileTypes:void 0,surface:"mwp_mwv2_composer",thread:j})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useIsDefaultE2eeOpenThread",["LSMessagingThreadTypeUtil","cr:8061"],(function(a,b,c,d,e,f,g){"use strict";var h=(c=b("cr:8061"))!=null?c:function(a,b){return[!1,!0,null]};function a(a){var b=h(a.threadKey,a.threadType),c=b[0];b[1];b[2];return d("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)&&c}g["default"]=a}),98);
__d("useMWDefaultE2eeComposerConfiguration",["JSResourceForInteraction","lazyLoadComponent","react","useIsDefaultE2eeOpenThread"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWDefaultE2eeThreadBlockedComposer.react").__setRef("useMWDefaultE2eeComposerConfiguration"));function a(a){var b=c("useIsDefaultE2eeOpenThread")(a);if(b)return i.jsx(j,{thread:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("getMWPUnavailableComposerConfiguration",["LSMessagingThreadTypeUtil","MWBlockedComposerLogging","MWChatUnavailableComposer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b,e){if(d("LSMessagingThreadTypeUtil").isOneToOne(b)&&e!=null){b=!e.isPage&&(!e.hasMessageCapability||!e.hasReplyMessageCapability);if(e.blockedSinceTimestampMs==null&&b)return i.jsx(c("MWChatUnavailableComposer.react"),{reason:e.hasMessageCapability?d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED_CANNOT_REPLY:d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED_CANNOT_MESSAGE,thread:{threadKey:a}})}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPReQLUnavailableComposerConfiguration",["I64","LSContactBitOffset","LSContactType","LSIntEnum","LSMessagingThreadTypeUtil","MWPActor.react","ReQL","ReQLSuspense","getMWPUnavailableComposerConfiguration","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;k||d("react");function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=(i||(i=d("I64"))).equal(e,a.threadKey),k=d("ReQLSuspense").useFirst(function(){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(b.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(b.tables.contacts)).filter(function(a){a[0];a=a[1];return g||!(i||(i=d("I64"))).equal(a.id,e)}).map(function(a){a[0];a=a[1];return a}):d("ReQL").empty()},[b,a.threadKey,a.threadType,e,g],f.id+":33");if(k==null)return;return c("getMWPUnavailableComposerConfiguration")(a.threadKey,a.threadType,{blockedSinceTimestampMs:k==null?void 0:k.blockedSinceTimestampMs,hasMessageCapability:d("LSContactBitOffset").has(0,k),hasReplyMessageCapability:d("LSContactBitOffset").has(1,k),isPage:i.equal(k.contactType,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWCutoverComposerConfiguration",["JSResourceForInteraction","LSMessagingThreadTypeUtil","MWBlockedComposerLogging","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration")),k=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWDualThreadCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration"));function a(a,b,c,e,f,g){if((g||f)&&(!d("LSMessagingThreadTypeUtil").isOneToOne(b)||c!=null))return e?i.jsx(k,{otherUser:c,thread:{threadKey:a}}):i.jsx(j,{reason:c!=null?d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_THREAD_ALREADY_CUTOVER:d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_GROUP_THREAD_CUTOVER,thread:{threadKey:a}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWReQLCutoverComposerConfiguration",["LSContactBitOffset","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","ReQL","ReQLSuspense","react","useMWCutoverComposerConfiguration","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i||d("react");function a(a){var b,e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?d("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(a.threadKey):d("ReQL").empty()},[e,a],f.id+":33");b=((b=(b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.messages_ranges_v2__generated).getKeyRange(a.threadKey)},[e,a.threadKey],f.id+":44"))==null?void 0:b.minMessageId)!=null?b:"")==="";var i=g!=null&&d("LSContactBitOffset").has(76,g);i=i&&b;b=d("MAWThreadCutover").useIsCutoverOpenThread(a.threadKey)||d("LSThreadBitOffset").has(128,a);var j=d("MAWThreadCutover").useIsDualThreadCutoverOpenThread(a.threadKey);return c("useMWCutoverComposerConfiguration")(a.threadKey,a.threadType,g,j,b,i)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWComposerGating.react",["LSMessagingThreadTypeUtil","MWPComposerGating.react","MWV2OpenComposer.react","cr:6984","emptyFunction","react","useMAWEditMessageData","useMWDefaultE2eeComposerConfiguration","useMWPBlockedComposerConfiguration","useMWPDisablePageComposerConfiguration","useMWPReQLFeatureLimitsBlockedComposerConfiguration","useMWPReQLNullComposerConfiguration","useMWPReQLUnavailableComposerConfiguration","useMWPRestrictedComposerConfiguration","useMWReQLCutoverComposerConfiguration"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.memo;function k(a){return[c("useMWPReQLNullComposerConfiguration")(a),c("useMWPDisablePageComposerConfiguration")(a),c("useMWPReQLFeatureLimitsBlockedComposerConfiguration")(a),c("useMWReQLCutoverComposerConfiguration")(a),c("useMWPBlockedComposerConfiguration")(a),c("useMWPRestrictedComposerConfiguration")(a),c("useMWPReQLUnavailableComposerConfiguration")(a),c("useMWDefaultE2eeComposerConfiguration")(a)]}function a(a){var e=a.afterSendMessage,f=a.isPreviewThread;a=a.thread;var g=c("useMAWEditMessageData")();g=d("LSMessagingThreadTypeUtil").isSecure(g!=null?g.threadType:a.threadType);if(b("cr:6984")!=null&&g)return i.jsx(b("cr:6984"),{afterSendMessage:e,isPreviewThread:f,thread:a});else return i.jsx(c("MWV2OpenComposer.react"),{afterSendMessage:e,isPreviewThread:f,thread:a})}a.displayName=a.name+" [from "+f.id+"]";var l=j(a);function e(a){var b=a.afterSendMessage,d=b===void 0?c("emptyFunction"):b;a.isMessengerInbox;var e=a.isPreviewThread,f=a.thread;b=k(f);return i.jsx(c("MWPComposerGating.react"),{configurations:b,isMessengerInbox:!1,renderComposer:function(){return i.jsx(l,{afterSendMessage:d,isPreviewThread:e,thread:f})},thread:f})}e.displayName=e.name+" [from "+f.id+"]";function m(a){var b=a.afterSendMessage;a.isMessengerInbox;var d=a.isPreviewThread,e=a.thread;a=k(e);return i.jsx(c("MWPComposerGating.react"),{configurations:a,isMessengerInbox:!0,renderComposer:function(){return i.jsx(l,{afterSendMessage:b,isPreviewThread:d,thread:e})},thread:e})}m.displayName=m.name+" [from "+f.id+"]";g.MWChatComposerGating=e;g.MWInboxComposerGating=m}),98);
__d("MWContextBannerChannelActivationPrompt.react",["fbt","ix","BroadcastChannelQPL","MWXImage.react","MWXTextPairing.react","react","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useCallback;function a(){var a=l(function(){var a;(a=d("BroadcastChannelQPL")).logCreateChannelNavigationToThreadEnd();a.logCCTVJoinNavigationToThreadEnd();a.logCreateChannelToThreadViewQPLSuccess();a.logCCTVJoinSuccess()},[]);a=c("useSinglePartialViewImpression")({onImpressionStart:a});return k.jsxs("div",{className:"x6s0dn4 x78zum5 xdt5ytf xl56j7k x1pdq3kb xkrivgy x4ii5y1 x1gryazu x1lr1uin x2b8uid",ref:a,children:[k.jsx(c("MWXImage.react"),{src:i("196163"),xstyle:m.image}),k.jsx(c("MWXTextPairing.react"),{body:h._("__JHASH__0beiJBlEXW1__JHASH__"),headline:h._("__JHASH__c0b5-Kz1eAl__JHASH__"),level:4,testid:void 0,textAlign:"center"})]})}a.displayName=a.name+" [from "+f.id+"]";var m={banner:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",marginTop:"x1pdq3kb",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",maxWidth:"x1lr1uin",textAlign:"x2b8uid",$$css:!0},image:{marginBottom:"x1hq5gj4",$$css:!0}};g["default"]=a}),98);
__d("MWContextBannerEndToEndEncryptedBanner.react",["fbt","ix","CometColumn.react","CometColumnItem.react","CometIcon.react","CometRow.react","CometRowItem.react","FDSTextWithIcon.react","MWXLink.react","MWXText.react","XMessengerHelpCenterContentControllerRouteBuilder","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={banner:{backgroundColor:"xlhe6ec",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingStart:"x1swvt13",paddingLeft:null,paddingRight:null,paddingEnd:"x1pi30zi",paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0}};function a(){var a;a=(a=c("XMessengerHelpCenterContentControllerRouteBuilder").buildUri({cms_id:"786613221989782"}))==null?void 0:a.toString();return k.jsx(c("CometRow.react"),{align:"center",paddingHorizontal:0,paddingTop:12,children:k.jsx(c("CometRowItem.react"),{children:k.jsxs(c("CometColumn.react"),{spacing:8,verticalAlign:"center",xstyle:l.banner,children:[k.jsx(c("CometColumnItem.react"),{expanding:!0,children:k.jsx(c("MWXText.react"),{align:"center",type:"bodyLink4",children:k.jsx(c("FDSTextWithIcon.react"),{iconBefore:k.jsx(c("CometIcon.react"),{icon:d("fbicon")._(i("1596805"),10),size:10}),children:h._("__JHASH__Kow3rs5K3HC__JHASH__")})})}),k.jsx(c("CometColumnItem.react"),{children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:h._("__JHASH__yxX1nJvmnv5__JHASH__",[h._implicitParam("=m1",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:h._("__JHASH__bPYVQTNBjFa__JHASH__",[h._implicitParam("=m1",k.jsx(c("MWXLink.react"),{href:a,target:"_blank",children:h._("__JHASH__vo_wtcDrjQ6__JHASH__")}))])}))])})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWContextBannerNullstateDescription.react",["I64","LSIntEnum","LSNullstateDescriptionType","MWXText.react","RecoverableViolation.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=a.kind;a=a.text;if((i||(i=d("I64"))).equal(b,(i||(i=d("I64"))).zero)||(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSNullstateDescriptionType").SUBTEXT))||(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSNullstateDescriptionType").TITLE_SMALL_DEFAULT))||(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSNullstateDescriptionType").TITLE_SMALL_SUBTEXT)))return k.jsx("div",{className:"xsag5q8",children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:a})});else return k.jsx(c("RecoverableViolation.react"),{errorMessage:"Unhandled nullstate description",projectName:"messenger_comet"})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPWebWorkerDisconnectedBanner.react",["ix","CometContextualMessage.react","CometImageFromIXValue.react","MAWIssueNewUserVisibleErrors","MWXButtonGroup.react","fbs","promiseDone","react","useMAWGetUserVisibleErrors"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useState;function a(){var a=c("useMAWGetUserVisibleErrors")(),b=a[0],e=a[1];a=l(!1);var f=a[0],g=a[1];a=k(function(){c("promiseDone")(e(),function(){window.location.reload(!0)})},[e]);var i=k(function(){c("promiseDone")(e(),function(){g(!0)})},[g,e]),m=d("MAWIssueNewUserVisibleErrors").errorMsgBodyToFbtMap.get(b==null?void 0:b.errorBodyText),n=d("MAWIssueNewUserVisibleErrors").errorMsgTitleToFbtMap.get(b==null?void 0:b.errorTitleText);return b&&m!=null&&n!=null&&c("CometContextualMessage.react")&&!f?j.jsx("div",{className:"xjf5wm9 xdj266r x11i5rnm xat24cr x1mh8g0r x10l6tqk x17qophe x13vifvy xh8yej3",children:j.jsx(c("CometContextualMessage.react"),{addOnPrimary:j.jsx(c("MWXButtonGroup.react"),{align:"justify",paddingHorizontal:12,primary:{label:c("fbs")._("__JHASH__PnVpnKg9Gg___JHASH__"),onPress:a,testid:"mw-encrypted-backups-in-thread-web-worker-failure-reset"}}),body:m,headline:j.jsx(j.Fragment,{children:n}),headlineAriaLabel:n,icon:j.jsx(c("CometImageFromIXValue.react"),{alt:n,source:h("1351648")}),level:4,onClose:i})}):void 0}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageElementRefList",[],(function(a,b,c,d,e,f){"use strict";function a(){var a=new Map(),b=new Map(),c={contents:void 0};return{get:function(b,d){var e=a.get(b);if(e==null){c.contents=[b,d];return}return d(e)},set:function(d){var e=b.get(d);if(e!=null)return e;e=function(b){if(b==null){a["delete"](d);return}a.set(d,b);if(c.contents!=null&&c.contents[0]===d){var e=c.contents;e[0];e=e[1];e(b);c.contents=void 0;return}};b.set(d,e);return e}}}f["default"]=a}),66);
__d("useMWCurrentVisibleMessage",["FBLogger","I64","Int64Hooks","LSFactory","LSMessagePointQueryStoredProcedure","MWMessageElementRefList","MWPVisibleMessageContext.react","ReQL","ReQLSuspense","promiseDone","react","setTimeout","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");var k=b.useCallback,l=b.useEffect,m=b.useRef,n=b.useState;function a(a,b){var e=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),g=e.visibleMessage,j=m(c("MWMessageElementRefList")()),o=a==null?void 0:a.threadKey,p=a==null?void 0:a.threadType,q=m(),r=(h||(h=c("useReStore")))(),s=d("ReQLSuspense").useFirst(function(){if(o==null)return d("ReQL").empty();if(g==null)return d("ReQL").fromTableDescending(r.tables.messages_ranges_v2__generated).getKeyRange(o);var a=g.timestamp;return d("ReQL").fromTableDescending(r.tables.messages_ranges_v2__generated).getKeyRange(o).bounds({lte:[a]}).filter(function(b){var c=b.maxTimestampMs;b=b.minTimestampMs;return(i||(i=d("I64"))).ge(a,b)&&(i||(i=d("I64"))).le(a,c)})},[o,g,r],f.id+":58");e=n(function(){return s});var t=e[0],u=e[1];l(function(){q.current=void 0,g==null&&b.current!=null&&b.current.scrollToBottom()},[b,g]);var v=k(function(a){var d=b.current;if(d!=null){c("setTimeout")(function(){return d.scrollElementIntoViewIfNeeded(a)},0);return}},[b]),w=k(function(a){if(a!==q.current)return j.current.get(a,function(b){v(b),q.current=a})},[v]);l(function(){s!=null?u(s):g==null&&u(function(){})},[g,s,u]);l(function(){g!=null&&t!=null&&w(g.messageId)},[r,g,t,w]);d("Int64Hooks").useEffectInt64(function(){if(a!=null&&s==null&&g!=null){var b,e=g.messageId;b=(i||(i=d("I64"))).to_int32((b=p)!=null?b:(i||(i=d("I64"))).neg_one);b!==-1&&(b===15||b===16)&&c("FBLogger")("occam").mustfix("useMWCurrentVisibleMessage: incorrect call to MPQ with secure mailbox");c("promiseDone")(r.runInTransaction(function(b){return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(b),{messageId:e,threadKey:a.threadKey,threadType:a.threadType})},"readwrite"))}},[r,g,s,o,p,a]);return{messageElementRefs:j,messageRange:t,visibleMessage:(e=g)!=null?e:void 0}}g["default"]=a}),98);
__d("useMWLSIsViewerThreadAdminUsingThreadKey",["MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("MWPActor.react").useActor(),e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.table("participants")).getKeyRange(a,b)},[e,b,a],f.id+":24");return(g=g==null?void 0:g.isAdmin)!=null?g:!1}g["default"]=a}),98);
__d("useMWV2ConversationScrollerRefs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useMemo,j=b.useRef;function a(){var a=j(null),b=j({type:"Bottom"});return i(function(){return{scrollerRef:a,scrollPositionRef:b}},[])}g["default"]=a}),98);
__d("MWThreadUtilHooks",["LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWLSThread","MWPActor.react","ReQL","ReQLSuspense","useMWCurrentVisibleMessage","useMWLSIsViewerThreadAdminUsingThreadKey","useMWV2ConversationScrollerRefs","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){var b=c("useMWV2ConversationScrollerRefs")();b=c("useMWCurrentVisibleMessage")(a,b.scrollerRef);b=b.messageRange;b=(b=b==null?void 0:b.isLoadingBefore)!=null?b:!1;var e=a.threadKey,g=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(g.tables.messages).getKeyRange(e).filter(function(a){return!a.isAdminMessage})},[g,e],f.id+":37");var i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(g.tables.attachments).getKeyRange(e)},[g,e],f.id+":46");a=a!=null||i!=null;return!(a||b)}function j(a){var b=i(a);return!b?!1:d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)}function a(a){var b=i(a);a=d("MWLSThread").useThread(a.threadKey,function(a){return a.threadSubtype});return!b?!1:d("MWCMThreadTypes.react").isIGBroadcastChannelThread(a)}function b(a){var b=j(a);a=c("useMWLSIsViewerThreadAdminUsingThreadKey")(a.threadKey);return d("MWPActor.react").isAPPlus()&&b&&a}g.useMWIsThreadWithZeroMessage=i;g.useMWIsFBBroadcastChannelWithZeroMessage=j;g.useMWIsIGBroadcastChannelWithZeroMessage=a;g.useMWIsAdminAndFBBroadcastChannelWithZeroMessage=b}),98);
__d("useIsAdmodOnboardingEnabledForThread.react",["LSThreadBitOffset","MWLSThread","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("MWLSThread").useThread(a,function(a){return d("LSThreadBitOffset").has(199,a)});return c("gkx")("24034")&&Boolean(a)}g.useIsAdmodOnboardingEnabledForThread=a}),98);
__d("usePageType",["I64","ReQL","ReQLSuspense","gkx","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){var c;return d("ReQL").fromTableAscending(b.tables.contacts,["pageType"]).getKeyRange((c=a)!=null?c:(h||(h=d("I64"))).zero)},[b,a],f.id+":24");return!c("gkx")("23425")?void 0:(e==null?void 0:e.pageType)!=null?e.pageType:void 0}g["default"]=a}),98);
__d("MWContextBanner.react",["fbt","BaseView.react","CometPlaceholder.react","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","LSPageType","LSThreadBitOffset","LSThreadTitle.react","LSVerificationBadge.react","MAWThreadCutover","MWCMThreadTypes.react","MWContextBannerChannelActivationPrompt.react","MWContextBannerEndToEndEncryptedBanner.react","MWContextBannerNullstateDescription.react","MWEditMessageOverlay.react","MWPWebWorkerDisconnectedBanner.react","MWThreadPicture.react","MWThreadUtilHooks","MWXText.react","ReQL","ReQLSuspense","cr:1607","cr:5777","cr:7232","gkx","isFeatureLimitEnabled","react","stylex","useIsAdmodOnboardingEnabledForThread.react","useIsReadOnlyFeatureLimitedWithThreadType","useMWPEditMessageDeemphasizer","usePageType","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=k||d("react"),o={align:{verticalAlign:"xxymvpz",$$css:!0},container:{paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,paddingEnd:"xn6708d",paddingTop:"x1cnzs8",$$css:!0},image:{display:"x78zum5",justifyContent:"xl56j7k",marginBottom:"xod5an3",$$css:!0},title:{marginBottom:"xod5an3",$$css:!0}};function p(a){var e=a.isBusinessSupport,f=a.isReadOnlyFeatureLimited;a=a.thread;var g=d("useIsAdmodOnboardingEnabledForThread.react").useIsAdmodOnboardingEnabledForThread(a.threadKey),h=d("MWThreadUtilHooks").useMWIsAdminAndFBBroadcastChannelWithZeroMessage(a);if(f||e)return null;if(g&&b("cr:7232")!=null)return n.jsx(b("cr:7232"),{thread:a});if(d("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&(l||(l=d("I64"))).gt(a.authorityLevel,(m||(m=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").SERVER_PARTIAL))&&b("cr:5777")!=null)if(h&&c("gkx")("24139"))return n.jsx(c("MWContextBannerChannelActivationPrompt.react"),{});else return n.jsx(b("cr:5777"),{thread:a});return null}p.displayName=p.name+" [from "+f.id+"]";function a(a){var e=a.threadKey;a=a.threadType;var g=c("useIsReadOnlyFeatureLimitedWithThreadType")(a),k=d("MAWThreadCutover").useIsCutoverSecureThread(e),q=d("LSMessagingThreadTypeUtil").isDiscoverableChannel(a);a=d("MWCMThreadTypes.react").isJoinedCMThread(a);var r=c("useMWPEditMessageDeemphasizer")(),s=(i||(i=c("useReStore")))(),t=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(s.tables.threads,["authorityLevel","isCustomThreadPicture","needsAdminApprovalForNewParticipant","nullstateDescriptionText1","nullstateDescriptionText2","nullstateDescriptionText3","nullstateDescriptionType1","nullstateDescriptionType2","nullstateDescriptionType3","parentThreadKey","threadDescription","threadInviteLink","threadInvitesEnabledV2","threadKey","threadName","threadPictureUrl","threadPictureUrlExpirationTimestampMs","threadPictureUrlFallback","threadType","capabilities","capabilities2","capabilities3","capabilities4"]).getKeyRange(e)},[s,e],f.id+":132"),u=c("usePageType")(t==null?void 0:t.threadKey);if(t==null)return null;var v=d("LSThreadBitOffset").has(47,t);if(v)return null;v=t.nullstateDescriptionText1;var w=t.nullstateDescriptionText2,x=t.nullstateDescriptionText3,y=t.nullstateDescriptionType1,z=t.nullstateDescriptionType2,A=t.nullstateDescriptionType3,B=(l||(l=d("I64"))).equal(t.parentThreadKey,(m||(m=d("LSIntEnum"))).ofNumber(-18)),C=d("LSMessagingThreadTypeUtil").isSecure(t.threadType);g=g&&(!C||c("isFeatureLimitEnabled")());var D=n.jsx("span",{className:"xxymvpz",children:n.jsx(c("CometPlaceholder.react"),{fallback:null,children:n.jsx(c("LSVerificationBadge.react"),{size:"large",threadKey:t.threadKey})})}),E=n.jsx(c("LSThreadTitle.react"),{thread:t,wrapOutput:function(a,b){return b}});return n.jsxs(c("BaseView.react"),{children:[n.jsxs("div",{className:(j||(j=c("stylex")))(o.container,r),"data-testid":void 0,children:[n.jsx("div",{className:"x78zum5 xl56j7k xod5an3",children:n.jsx(c("MWThreadPicture.react"),{badgeSize:14,photoSize:60,threadKey:t.threadKey})}),n.jsx("div",{className:"xod5an3",children:n.jsxs(c("MWXText.react"),{align:"center",numberOfLines:1,type:"headlineEmphasized3",children:[E,!q&&!a&&!c("gkx")("24081")&&D]})}),u!=null&&(l||(l=d("I64"))).equal(u,(m||(m=d("LSIntEnum"))).ofNumber(c("LSPageType").AI))?n.jsx("div",{className:"xod5an3",children:n.jsx(c("MWXText.react"),{align:"center",color:"primary",type:"body4",children:h._("__JHASH__5MDaoXA0f1Z__JHASH__")})}):null,v!=null&&y!=null?n.jsx(c("MWContextBannerNullstateDescription.react"),{kind:y,text:v}):null,w!=null&&z!=null?n.jsx(c("MWContextBannerNullstateDescription.react"),{kind:z,text:w}):null,x!=null&&A!=null?n.jsx(c("MWContextBannerNullstateDescription.react"),{kind:A,text:x}):null,b("cr:1607")!=null&&n.jsx(b("cr:1607"),{threadKey:e}),n.jsx(p,{isBusinessSupport:B,isReadOnlyFeatureLimited:g,thread:t}),C&&!k?n.jsx(c("MWContextBannerEndToEndEncryptedBanner.react"),{}):null,C&&c("MWPWebWorkerDisconnectedBanner.react")?n.jsx(c("MWPWebWorkerDisconnectedBanner.react"),{}):null]}),n.jsx(c("MWEditMessageOverlay.react"),{})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWCMEditChatInfoDialogEntrypoint",["GroupsCometChatEditChatDialog.entrypoint","I64","MWXCardedDialogLoadingState.react","react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a,b){a=c("useMWXEntryPointDialog")(c("GroupsCometChatEditChatDialog.entrypoint"),{threadID:(i||(i=d("I64"))).to_string(a)},void 0,function(){return j.jsx(c("MWXCardedDialogLoadingState.react"),{})});var e=a[0];return function(){return e({enableEditNameOrDescription:!0,entryPoint:b})}}g["default"]=a}),98);
__d("MWContextBannerQuickActionsEditChatInfo.react",["MWXCircleButton.react","react","useMWCMEditChatInfoDialogEntrypoint"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.icon,d=a.label;a=a.threadKey;var e=c("useMWCMEditChatInfoDialogEntrypoint")(a);return i.jsx(c("MWXCircleButton.react"),{icon:b,label:d,onPress:function(){return e()},size:36})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCopyLinkPublicChatQuickAction.react",["fbt","MWPBumpEntityKey","MWVerticalRhythm","MWXCircleButton.react","MWXIconLink","MWXText.react","cometPushToast","react","useCopyText"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useCallback,l=h._("__JHASH__6ygymPD56Yw__JHASH__"),m=h._("__JHASH__NNt0oNKP6tq__JHASH__");function a(a){a=a.threadInviteLink;a=c("useCopyText")({value:a});a[0];a[1];var b=a[2];a=k(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","copy_link"),b(),d("cometPushToast").cometPushSimpleToast(m)},[b]);return j.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconLink"),label:l,onPress:a,size:36}),j.jsx(c("MWVerticalRhythm"),{height:8}),j.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:l})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEditChannelDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6185531621550317"}),null);
__d("MWEditChannelDialogQuery$Parameters",["MWEditChannelDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWEditChannelDialogQuery_facebookRelayOperation"),metadata:{},name:"MWEditChannelDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWEditChannelDialog.entrypoint",["JSResourceForInteraction","MWEditChannelDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.threadID;return{queries:{queryReference:{options:{fetchPolicy:"network-only"},parameters:c("MWEditChannelDialogQuery$Parameters"),variables:{threadID:a}}}}},root:c("JSResourceForInteraction")("MWEditChannelDialog.react").__setRef("MWEditChannelDialog.entrypoint")};g["default"]=a}),98);
__d("MWEditChannelDialogTrigger.react",["I64","MWEditChannelDialog.entrypoint","promiseDone","react","useMWXEntryPointDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;j||d("react");function a(a){var b=a.children,e=a.threadKey,f=(h||(h=c("useReStore")))();a={threadID:(i||(i=d("I64"))).to_string(e)};a=c("useMWXEntryPointDialog")(c("MWEditChannelDialog.entrypoint"),a);var g=a[0];a=function(){c("promiseDone")(f.table("threads").get(e),function(a){if(a==null)return;g({thread:a})})};return b(a)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEditThreadNameDialogTrigger.react",["JSResourceForInteraction","promiseDone","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i||(i=d("react"));var j=i.useRef,k=c("JSResourceForInteraction")("MWV2ThreadNameDialog.react").__setRef("MWEditThreadNameDialogTrigger.react");function a(a){var b=a.children,d=a.threadKey;a=j(null);var e=(h||(h=c("useReStore")))(),f=c("useMWXLazyDialog")(k),g=f[0];f=function(){c("promiseDone")(e.table("threads").get(d),function(a){if(a==null)return;g({thread:a})})};return b(f,a)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWGroupLimitContainer.react",["cr:3409","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){var c=a.children,d=a.groupLimitReachedContent;a=a.thread;a=(a=b("cr:3409")==null?void 0:b("cr:3409")(a.threadKey))!=null?a:[!1,!1];a=a[0];return a?d:c}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxInfoMembersSectionStorageKey",[],(function(a,b,c,d,e,f){"use strict";a="__MWInboxInfoMembersSection.isOpen__";f.storageKey=a}),66);
__d("MWShareThreadQuickActionButton.react",["fbt","MWXCircleButton.react","MWXColumnItem.react","MWXIconShare","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._("__JHASH__zzzD0_ypABg__JHASH__");function a(a){a=a.onPress;return j.jsxs(j.Fragment,{children:[j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconShare"),label:k,onPress:a,size:36})}),j.jsx(c("MWXColumnItem.react"),{paddingTop:8,children:j.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:k})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWSharePublicChatQuickAction.react",["ChannelShareDialogLoggingContext","MWChannelInviteDialog.entrypoint","MWShareThreadQuickActionButton.react","react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.thread;a=c("useMWXEntryPointDialog")(c("MWChannelInviteDialog.entrypoint"),{});var d=a[0];return i.jsx("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:i.jsx(c("MWShareThreadQuickActionButton.react"),{onPress:function(){d({channelThread:b,loggingContext:c("ChannelShareDialogLoggingContext").CONTEXT_BANNER_QUICK_ACTION})}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("canMWAddMemberToGroupThread",["I64","LSIntEnum","LSThreadBitOffset","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){if(b)return!1;b=(h||(h=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(16));b=b&&a.needsAdminApprovalForNewParticipant===!1&&c("gkx")("33037");return d("LSThreadBitOffset").has(27,a)||b}g["default"]=a}),98);
__d("MWContextBannerQuickActions.react",["fbt","CommunityMessagingEnableState","I64","LSCommunityBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWAddMemberToGroupCircleButton.react","MWCMBulkInviteDialog.entrypoint","MWCMIsAnyCMThread","MWCMShortLinkShare.react","MWCMThreadTypes.react","MWCMisStandAloneCommunity","MWContextBannerQuickActionsEditChatInfo.react","MWCopyLinkPublicChatQuickAction.react","MWEditChannelDialogTrigger.react","MWEditThreadNameDialogTrigger.react","MWGroupLimitContainer.react","MWInboxInfoMembersSectionStorageKey","MWInboxPersistedUIState","MWLSGroupMembershipDialog.entrypoint","MWPBumpEntityKey","MWSharePublicChatQuickAction.react","MWVerticalRhythm","MWXCircleButton.react","MWXIconFriendGenericAdd","MWXIconGroup","MWXIconLink","MWXIconPencil","MWXText.react","MessengerWebUXLogger","WebUXLoggingSurfaceContextProvider","canMWAddMemberToGroupThread","emptyFunction","isFeatureLimitEnabled","justknobx","promiseDone","react","useCommunityFolder","useCommunityMembers","useIsReadOnlyFeatureLimitedWithThreadType","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;var m=b.useMemo,n=b.useRef,o=h._("__JHASH__4Z6iwQf0KqP__JHASH__"),p=h._("__JHASH__a3y4zGfm_2Z__JHASH__");function q(a){var b=a.thread;a=n(null);var e=c("useCommunityFolder")(b),f=c("MWCMIsAnyCMThread")(b.threadType),g=c("MWCMisStandAloneCommunity")(e==null?void 0:e.communityType),i=d("MWCMThreadTypes.react").isBroadcastThread(b.threadType),q=d("LSMessagingThreadTypeUtil").isDiscoverableChannel(b.threadType),r=d("LSMessagingThreadTypeUtil").isSecure(b.threadType);r=c("useIsReadOnlyFeatureLimitedWithThreadType")(b.threadType)&&(!r||c("isFeatureLimitEnabled")());var s=d("useCommunityMembers").useClearMemberList(),t=m(function(){if(e!=null&&f)return[e.enableState,d("LSThreadBitOffset").has(120,b),d("LSCommunityBitOffset").has(17,e),e.fbGroupId];else return[void 0,!1,!1,(j||(j=d("I64"))).zero]},[f,e,b]),u=t[0],v=t[1];t=t[2];u=f&&(j||(j=d("I64"))).equal((u=u)!=null?u:(k||(k=d("LSIntEnum"))).ofNumber(c("CommunityMessagingEnableState").ENABLED),(k||(k=d("LSIntEnum"))).ofNumber(c("CommunityMessagingEnableState").DISABLE_REQUESTED));var w=d("MWInboxPersistedUIState").usePersistedUIState(!1,d("MWInboxInfoMembersSectionStorageKey").storageKey),x=w[0];w=c("useMWXEntryPointDialog")(c("MWCMBulkInviteDialog.entrypoint"),{});var y=w[0];w=c("useMWXEntryPointDialog")(c("MWLSGroupMembershipDialog.entrypoint"),{groupID:(j||(j=d("I64"))).to_string((w=e==null?void 0:e.fbGroupId)!=null?w:(j||(j=d("I64"))).zero)});var z=w[0];w=m(function(){return[f?h._("__JHASH__6ygymPD56Yw__JHASH__"):h._("__JHASH__5q5wieIjbh7__JHASH__"),f?h._("__JHASH__um66LGyp2bC__JHASH__"):h._("__JHASH___jI2RJo8mJV__JHASH__"),e!=null&&i?h._("__JHASH__1cAdDa3Rt1T__JHASH__"):h._("__JHASH__1Av2Yy1o2_Y__JHASH__")]},[i,f,e]);var A=w[0],B=w[1];w=w[2];var C=d("LSThreadBitOffset").has(60,b),D=d("LSThreadBitOffset").has(81,b);r=c("canMWAddMemberToGroupThread")(b,r);var E=d("LSThreadBitOffset").has(26,b),F=d("LSThreadBitOffset").has(108,b),G=C&&D,H=c("MessengerWebUXLogger").useInteractionLogger();return l.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"thread_context_banner",children:l.jsxs("ul",{className:"x6s0dn4 x78zum5 xl56j7k xsag5q8 x1y1aw1k",children:[f&&!u?v?l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconFriendGenericAdd"),label:o,onPress:function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","quick_actions_direct_invite");return y({fbThreadId:(j||(j=d("I64"))).to_string(b.threadKey),parentSurface:"thread_view",source:"invite_button",surface:"thread_view"},c("emptyFunction"))},size:36}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:o})]}):l.jsx(c("MWCMShortLinkShare.react"),{thread:b,children:function(a,b){return l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconLink"),label:A,onPress:b,size:36}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:A})]})}}):null,!f&&q&&F&&(j||(j=d("I64"))).equal(b.threadInvitesEnabledV2,(k||(k=d("LSIntEnum"))).ofNumber(1))?l.jsxs(l.Fragment,{children:[b.threadInviteLink!=null&&l.jsx(c("MWSharePublicChatQuickAction.react"),{thread:b}),b.threadInviteLink!=null&&l.jsx(c("MWCopyLinkPublicChatQuickAction.react"),{threadInviteLink:b.threadInviteLink})]}):null,!f&&r?l.jsx(c("MWGroupLimitContainer.react"),{groupLimitReachedContent:null,thread:b,children:l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWAddMemberToGroupCircleButton.react"),{label:A,threadKey:b.threadKey,threadType:b.threadType}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:A})]})}):null,q&&G?l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWEditChannelDialogTrigger.react"),{threadKey:b.threadKey,children:function(a,b){return l.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconPencil"),label:p,onPress:function(){return a()},ref:b,size:36})}}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:p})]}):null,!f&&C&&!G?l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWEditThreadNameDialogTrigger.react"),{threadKey:b.threadKey,children:function(a,d){return l.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconPencil"),label:B,onPress:function(){a(),H==null?void 0:H({eventName:"open_edit_thread_name_dialog",threadKey:b.threadKey,threadType:b.threadType})},ref:d,size:36})}}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:B})]}):null,f&&D&&!u&&t&&!g?l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWContextBannerQuickActionsEditChatInfo.react"),{icon:c("MWXIconPencil"),label:p,threadKey:b.threadKey}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:p})]}):c("justknobx")._("1116")?null:E?l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconGroup"),label:w,onPress:function(){return z({folder:e},function(){f&&!x&&c("promiseDone")(s())})},ref:a,size:36}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:w})]}):null]})})}q.displayName=q.name+" [from "+f.id+"]";function a(a){return l.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"thread_context_banner",children:l.jsx(q,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWExpandReactionsButton.react",["fbt","I64","MWCMThreadTypes.react","MWChatMessageId","MWChatReactionsActionContainer.react","MWMultiReactConstants","MWV2MessageReactionHooks","MWXPressable.react","MWXTooltip.react","emptyFunction","intlSummarizeNumber","react","stylex","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react"));b=j;var m=b.useCallback,n=b.useMemo,o={additionalInlineButton:{display:"x78zum5",flexDirection:"xdt5ytf",height:"xlup9mm",justifyContent:"xl56j7k",width:"x1npj6m0",$$css:!0},emoji:{alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",lineHeight:"x14ju556",marginEnd:"x11i5rnm",marginLeft:null,marginRight:null,$$css:!0},emojiNum:{color:"xi81zsa",fontSize:"x1nxh6w3",fontWeight:"x1s688f",paddingStart:"x1k2j06m",paddingLeft:null,paddingRight:null,paddingEnd:"x10ogl3i",textAlign:"x2b8uid",$$css:!0},emojiRow:{alignItems:"x6s0dn4",backgroundColor:"x1vtvx1t",borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",display:"x78zum5",justifyContent:"xl56j7k",paddingBottom:"x10b6aqq",paddingEnd:"xsyo7zv",paddingLeft:null,paddingRight:null,paddingStart:"xurb0ha",paddingTop:"x1yrsyyn",position:"x1n2onr6",textAlign:"xp4054r",$$css:!0},emojiRowContainer:{borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",marginBottom:"x12nagc",marginEnd:"xw3qccf",marginLeft:null,marginRight:null,$$css:!0}};function a(a){var b=a.isMultiReactExpanded,e=a.isReactionReadOnly,f=a.isSecure,g=a.message,j=a.numOverflowEmojis,p=a.sendReaction,q=a.setIsReactionsRowAnimationInProgress,r=a.threadKey,s=a.threadType,t=a.toggleMultiReactExpanded,u=(k||(k=d("I64"))).to_string(r),v=k.to_string(g.timestampMs);a=n(function(){return d("MWChatMessageId").makeSent(u,g.messageId,v)},[u,g.messageId,v]);s=d("MWCMThreadTypes.react").isBroadcastThread(s);r=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(r);var w=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReactionsV2(g),x=m(function(){t(),q(!0)},[q,t]);return l.jsx(c("MWChatReactionsActionContainer.react"),{alwaysShowEmojiPicker:!0,closeActionsMenu:c("emptyFunction"),disableCustomReactions:r&&s,hasReactionsV2:r,isBroadcastThread:s,isSecure:f,messageID:a,onVisibilityChange:c("emptyFunction"),selectedReactions:(r=w)!=null?r:void 0,sendReaction:p,children:function(a,f,g,k,m){f=h._("__JHASH__S6Ab1Epvc_N__JHASH__");var n=c("intlSummarizeNumber")(j),p="+"+n;n=n.length;g=l.jsx(c("MWXPressable.react"),{"aria-label":f,disabled:e,expanding:!0,onHoverIn:g,onHoverOut:k,onPress:x,onPressIn:m,overlayRadius:"inherit",ref:a,role:"button",testid:void 0,xstyle:o.emojiRowContainer,children:l.jsx("div",{className:"x6s0dn4 x1vtvx1t xdxvlk3 x1fglp x1rp6h8o xg6i1s1 x78zum5 xl56j7k x10b6aqq xsyo7zv xurb0ha x1yrsyyn x1n2onr6 xp4054r",role:"none",children:l.jsx("div",{className:(i||(i=c("stylex")))([].concat(b?[o.emoji,o.additionalInlineButton]:[o.emojiNum])),role:"none",style:{color:"var(--secondary-text)",fontSize:"13px",fontWeight:600,minWidth:n*d("MWMultiReactConstants").SPACING_PER_COUNT_CHARACTER},children:p})})});return e?g:l.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:f,children:g})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXIconMenuItemArrowDown",["MWXSvgIcon","SVGIcon","cr:9362","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:9362")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWJumpToMostRecentMessageButton.react",["fbt","MWPBumpEntityKey","MWPColorUtils","MWXIconMenuItemArrowDown","MWXIconStrict.react","MWXPressable.react","MWXThreadThemeColor","react","useMWPThreadTheme"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={circleButton:{alignItems:"x6s0dn4",backgroundColor:"x1l31dnx",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",boxShadow:"xurzqwv",display:"x78zum5",height:"x1vqgdyp",justifyContent:"xl56j7k",width:"x100vrsf",$$css:!0}};function a(a){var b=a.onPress;a=c("useMWPThreadTheme")();a=a.threadTheme;a=d("MWPColorUtils").int64ToHex(a.fallbackColor);return j.jsx(c("MWXPressable.react"),{"aria-label":h._("__JHASH__mZcaI1xn9AA__JHASH__"),onPress:function(){b(),d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_jump_to_bottom","app_id")},xstyle:k.circleButton,children:j.jsx(c("MWXIconStrict.react"),{color:d("MWXThreadThemeColor").mwxThreadThemeColor(a),icon:c("MWXIconMenuItemArrowDown"),size:20})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMDotMeReferrerContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=e();function a(a){var b=a.children;a=a.referrer;return i.jsx(k.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(k)}g.MWMDotMeReferrerContextProvider=a;g.useMDotMeReferrer=b}),98);
__d("MWPMessageListFocusTable.react",["FocusRegion.react","MWMessageTableFocusTable.react","MWV2MessageListIsRowModalContext.react","emptyFunction","focusScopeQueries","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useMemo;function l(a,b,c){return b["data-scope"]==="date_break"}function a(a){var b=a.ariaLabel,e=a.children,f=a.hasMessages,g=f===void 0?!0:f;f=a.modal;var h=a.onNavigate,m=h===void 0?c("emptyFunction"):h;h=a.setModal;var n=a.wrapX;n=n===void 0?!1:n;a=a.wrapY;a=a===void 0?!1:a;var o=j(function(a){m(a);var b=a.type;switch(b){case"PAGE_DOWN":case"PAGE_UP":break;default:return}b=a.type==="PAGE_DOWN";a.preventDefault();var c=a.currentRowIndex+(b?1:-1)|0,d=!1;while(!d){var e=a.getCell(c,a.currentCellIndex);if(e==null){var f=a.getCell(b?c-1|0:0,a.currentCellIndex);f!=null&&a.focusCell(f);d=!0}else{f=e.scopeRef.current;f=f!=null?f.DO_NOT_USE_queryFirstNode(l):null;f==null?c=b?c+1|0:c-1|0:(a.focusCell(e),d=!0)}}},[]),p=k(function(){return g?i.jsx("div",{"aria-label":b,className:"x1uipg7g xu3j5b3 xol2nv xlauuyb x26u7qi x19p7ews x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62",role:"grid",children:e}):i.jsx("div",{className:"x1uipg7g xu3j5b3 xol2nv xlauuyb x26u7qi x19p7ews x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62",children:e})},[b,e,g]);return i.jsx(d("MWV2MessageListIsRowModalContext.react").MWV2MessageListIsRowModalContextProvider,{value:h,children:i.jsx(d("FocusRegion.react").FocusRegion,{recoverFocusQuery:d("MWMessageTableFocusTable.react").scopeQuery,stopOnFocusWithinPropagation:!1,children:i.jsx(d("MWMessageTableFocusTable.react").FocusTable[0],{allowModifiers:!0,disabled:f!=="",onNavigate:o,tabScopeQuery:d("focusScopeQueries").tabbableScopeQuery,wrapX:n,wrapY:a,children:p})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useFirstUnreadMessage",["I64","MWPActor.react","ReQL","ReQLSuspense","ServerTime","gkx","useReStore","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b,e=c("gkx")("24099"),g=(i||(i=c("useReStore")))(),j=d("MWPActor.react").useActor(),k=c("useStable")(function(){return(h||(h=d("I64"))).of_float(new Date(d("ServerTime").getMillis()).getTime())}),l=(b=(b=d("ReQLSuspense").useFirstWithoutSubscribing(function(){return d("ReQL").fromTableAscending(g.tables.threads).getKeyRange(a)},[g,a],f.id+":43"))==null?void 0:b.lastReadWatermarkTimestampMs)!=null?b:(h||(h=d("I64"))).zero;return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.threads,[]).getKeyRange(a).map(function(b){var c;if(!e)return null;b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.messages,["senderId"]).getKeyRange(a).bounds({gt:d("ReQL").key(l)}).filter(function(a){a=a.senderId;return(h||(h=d("I64"))).equal(a,j)}),f.id+":59")==null;if(!b)return null;b=d("ReQLSuspense").first(d("ReQL").fromTableDescending(g.tables.messages_ranges_v2__generated).getKeyRange(a),f.id+":69");if(b==null)return null;var i=d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(g.tables.messages,["messageId","timestampMs"]).getKeyRange(a).bounds({gte:d("ReQL").key(b.minTimestampMs,b.minMessageId),lte:d("ReQL").key(k,b.maxMessageId)}).bounds({gt:d("ReQL").key(l)}).take(2),f.id+":79");return i.length<=1?null:((c=i[0])==null?void 0:c.messageId)===b.minMessageId?void 0:i[0]})},[j,g,l,k,a,e],f.id+":48")}g["default"]=a}),98);
__d("useMWPAriaLabelForMessageListGrid",["fbt","Int64Hooks","MWPActor.react","MWPGetThreadTitle","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a){var b=d("MWPActor.react").useActor(),e=(i||(i=c("useReStore")))(),g=d("ReQLSuspense").useArray(function(){return a.threadName!=null?d("ReQL").empty():d("ReQL").leftJoin(d("ReQL").fromTableAscending(e.table("participants"),["contactId","nickname"]).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.table("contacts"),["name","rank","contactType","firstName","capabilities","capabilities2"])).take(8)},[e,a.threadKey,a.threadName],f.id+":32");return d("Int64Hooks").useMemoInt64(function(){var c;if(a.threadName!=null)return h._("__JHASH__NOo4A_R8oVU__JHASH__",[h._param("name of conversation",a.threadName)]).toString();c=(c=d("MWPGetThreadTitle").computeThreadTitle(void 0,a.threadType,g,b))!=null?c:"";return h._("__JHASH__KCW8qihKWub__JHASH__",[h._param("participant list",c)]).toString()},[b,g,a.threadName,a.threadType])}g["default"]=a}),98);
__d("MWMessageList",["CometPageletWithDiv.react","I64","Int64Hooks","LSCommunityBitOffset","LSMessageRenderingType","LSMessagingThreadTypeUtil","MWCMIsAnyCMThread","MWClickedMessageContext.react","MWCollapsibleAdminMessages.react","MWInboxThreadMessagesSpinner.react","MWJumpToMostRecentMessageButton.react","MWMessageListLoggingContext","MWMessageRow.react","MWMessageSendingContext.react","MWPMessageListFocusTable.react","MWPThreadCapabilitiesContext","MWPTypingIndicators.react","MWPVisibleMessageContext.react","MWV2ChatAdminMessage.react","MWV2MessageActionsVisibility.react","WebUXLoggingSurfaceContextProvider","cr:2368","cr:3907","gkx","react","useCommunityFolder","useFirstUnreadMessage","useIsReactionsV2Enabled","useMWPAriaLabelForMessageListGrid","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));a=h;e=a.forwardRef;var k=a.useEffect,l=a.useId,m=a.useState;function n(a){return d("MWV2ChatAdminMessage.react").isAdminMessage(a)&&a!=null&&(a.messageRenderingType==null||!(i||(i=d("I64"))).equal(a.messageRenderingType,(i||(i=d("I64"))).of_int32(c("LSMessageRenderingType").NON_COLLAPSIBLE_ADMIN_MESSAGE)))}function o(){return j.jsx(c("MWInboxThreadMessagesSpinner.react"),{})}o.displayName=o.name+" [from "+f.id+"]";function p(a){return j.jsx(c("MWJumpToMostRecentMessageButton.react"),{onPress:a})}p.displayName=p.name+" [from "+f.id+"]";a=e(function(a,e){var f=a.entryPoint,g=a.renderFooter,h=a.renderHeader,q=a.thread,r=d("MWV2MessageActionsVisibility.react").useStopHoveringRef();a=m("");var s=a[0];a=a[1];var t=l(),u=d("LSMessagingThreadTypeUtil").isSecure(q.threadType),v=c("useMWPAriaLabelForMessageListGrid")(q),w=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),x=w.setVisibleMessage,y=w.visibleMessage,z=d("Int64Hooks").useMemoInt64(function(){return q.threadType},[q.threadType]),A=c("useCommunityFolder")(q),B=A!=null?d("LSCommunityBitOffset").has(9,A):!1,C=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(q.threadKey),D=c("useFirstUnreadMessage")(q.threadKey);w=m(!1);var E=w[0],F=w[1];d("Int64Hooks").useEffectInt64(function(){return x(void 0)},[q.threadKey,x]);k(function(){D&&!E&&x(function(a){return(a=a)!=null?a:{contextLine:"",highlights:[],messageId:D.messageId,source:"LastReadWatermark",timestamp:D.timestampMs}})},[D,x,E]);w=d("Int64Hooks").useCallbackInt64(function(){return j.jsxs(j.Fragment,{children:[j.jsx(d("MWPTypingIndicators.react").MWPTypingIndicators,{threadKey:q.threadKey,threadType:z}),g&&g()]})},[g,q.threadKey,z]);var G=new Map();f=j.jsx(b("cr:2368"),{entryPoint:f,onUserScroll:function(){return F(!0)},pageSize:c("gkx")("23432")?3:15,ref:e,renderFooter:w,renderHeader:h,renderJumpToMostRecentMessageButton:p,renderLoadingAnimation:o,renderRow:function(a){var b=a.domElementRef,e=a.message,f=a.nextMessage;a=a.prevMessage;var g=u?(i||(i=d("I64"))).equal(q.threadKey,e.threadKey):!1,h=(D==null?void 0:D.messageId)===e.messageId,k=!n(a)&&!n(f);if((c("MWCMIsAnyCMThread")(q.threadType)||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(q.threadType))&&n(e)&&!k){G.set(e.messageId,e);k=n(a)&&!n(f);if(k){k=Array.from(G.values());G.clear();return j.jsx(c("MWCollapsibleAdminMessages.react"),{domElementRef:b,fbGroupId:A==null?void 0:A.fbGroupId,hasMessageEmphasisRing:y==null?!1:y.messageId===e.messageId&&(y.source==="Reply"||y.source==="Pinned"),isCMAdmin:B,isModal:s===e.messageId,isSecureMessage:g,messages:k,shouldRenderUnreadIndicator:h,threadType:z,useReactionsV2:C})}else return null}return j.jsx(d("MWMessageRow.react").MWMessageRow,{domElementRef:b,fbGroupId:A==null?void 0:A.fbGroupId,hasMessageEmphasisRing:y==null?!1:y.messageId===e.messageId&&(y.source==="Reply"||y.source==="Pinned"),isCMAdmin:B,isModal:s===e.messageId,isSecureMessage:g,message:e,nextMessage:f,prevMessage:a,shouldRenderUnreadIndicator:h,stopHoveringRef:r,threadType:z,useReactionsV2:C})},thread:q});return j.jsx(c("MWMessageSendingContext.react").Provider,{children:j.jsx(c("MWClickedMessageContext.react").Provider,{children:j.jsx(d("CometPageletWithDiv.react").Placeholder,{className:"x78zum5 xdt5ytf x1iyjqo2 x5yr21d",fallback:j.jsx(c("MWInboxThreadMessagesSpinner.react"),{}),name:"MWMessageList",children:j.jsx(d("MWPThreadCapabilitiesContext").Provider,{thread:q,children:j.jsx(c("MWPMessageListFocusTable.react"),{ariaLabel:v,modal:s,setModal:a,children:j.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXSurfaceLoggingContext.Provider,{value:"message_list",children:j.jsx(d("MWMessageListLoggingContext").MWMessageListLoggingContext,{flowInstanceId:c("uuidv4")(),children:b("cr:3907")==null?f:j.jsx(b("cr:3907"),{id:t,children:f})})})})})})})})});g["default"]=a}),98);
__d("MWMessageReaction.react",["BaseContextualLayer.react","I64","MWChatMultiReactionsTooltip.react","MWChatReactionEmoji","MWChatReactionsUtils","MWMultiReactConstants","MWPColorUtils","MWXPopover.react","MWXPressable.react","MWXText.react","gkx","react","stylex","useCometTheme","useFadeEffect","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));b=i;var l=b.useEffect,m=b.useRef,n=b.useState,o={"--card-background":"rgba(0,0,0,0)"},p={animatedEmoji:{animationDuration:"xdz8niu",animationIterationCount:"x1v7wizp",animationName:"x1erype6",animationTimingFunction:"xjmqbfh",opacity:"x1hc1fzr",transform:"xvvkyix",transformOrigin:"x1jpgh95",$$css:!0},emoji:{alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",lineHeight:"x14ju556",marginEnd:"x11i5rnm",marginLeft:null,marginRight:null,$$css:!0},emojiNum:{color:"xi81zsa",fontSize:"x1nxh6w3",fontWeight:"x1s688f",paddingStart:"x1k2j06m",paddingLeft:null,paddingRight:null,paddingEnd:"x10ogl3i",textAlign:"x2b8uid",$$css:!0},emojiRow:{alignItems:"x6s0dn4",backgroundColor:"x1vtvx1t",borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",display:"x78zum5",justifyContent:"xl56j7k",paddingBottom:"x10b6aqq",paddingEnd:"xsyo7zv",paddingLeft:null,paddingRight:null,paddingStart:"xurb0ha",paddingTop:"x1yrsyyn",position:"x1n2onr6",textAlign:"xp4054r",$$css:!0},emojiRowContainer:{borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",marginBottom:"x12nagc",marginEnd:"xw3qccf",marginLeft:null,marginRight:null,$$css:!0},scaleHeartEmoji:{transform:"xhqu4j4",$$css:!0},tooltipContainer:{backgroundColor:"xj5tmjb",borderTopStartRadius:"x1r9drvm",borderTopEndRadius:"x16aqbuh",borderBottomEndRadius:"x9rzwcf",borderBottomStartRadius:"xjkqk3g",boxShadow:"xms15q0",display:"x1lliihq",marginBottom:"xjpr12u",marginTop:"xr9ek0c",maxWidth:"x86nfjv",opacity:"xg01cxk",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",position:"x1n2onr6",transitionDuration:"x1ebt8du",transitionProperty:"x19991ni",transitionTimingFunction:"x1dhq9h",$$css:!0},tooltipContainerVisible:{opacity:"x1hc1fzr",transitionDuration:"xhb22t3",transitionTimingFunction:"xls3em1",$$css:!0}};function a(a){var b=a.emoji,e=a.isReadOnly,f=a.isTooltipShown,g=a.message,i=a.onFocus,q=a.onMouseEnter,r=a.onMouseLeave,s=a.onTooltipCTAPress,t=a.reaction,u=a.sendReaction,v=a.shouldAnimate;a=a.threadKey;var w=c("useCometTheme")("invert"),x=w[0];w=w[1];var y=c("useCometTheme")("light");y[0];y=y[1];var z=d("MWChatReactionsUtils").isHeart(b[0]),A=m(null);f=c("useFadeEffect")(f);var B=f[0],C=f[1];f=f[2];var D=n(!1),E=D[0],F=D[1],G=m(null);l(function(){G.current!=null&&window.clearTimeout(G.current)},[]);l(function(){v&&(F(!0),G.current!=null&&window.clearTimeout(G.current),G.current=window.setTimeout(function(){G.current=null,F(!1)},600))},[v]);D=c("useMWPThreadTheme")();D=D.threadTheme;D=d("MWPColorUtils").int64ToHex(D.fallbackColor);var H=D+"40";H="linear-gradient(0deg, "+H+", "+H+"), #FFFFFF";var I=(j||(j=d("I64"))).to_string(t.count),J=I.length;return k.jsxs("div",{className:(h||(h=c("stylex")))(t.viewerIsReactor?y:null),onFocus:i,onMouseEnter:q,onMouseLeave:r,children:[k.jsx(c("MWXPressable.react"),{disabled:e,onPress:function(){u(b.join(""),t.viewerIsReactor)},overlayRadius:"inherit",ref:A,xstyle:p.emojiRowContainer,children:k.jsxs("div",{className:"x6s0dn4 x1vtvx1t xdxvlk3 x1fglp x1rp6h8o xg6i1s1 x78zum5 xl56j7k x10b6aqq xsyo7zv xurb0ha x1yrsyyn x1n2onr6 xp4054r",style:t.viewerIsReactor?{background:H}:null,children:[k.jsx("div",{className:"x6s0dn4 x14yjl9h xudhj91 x18nykt9 xww2gxu x1ypdohk x14ju556 x11i5rnm",children:k.jsx("div",{className:h(v||E?p.animatedEmoji:!1,z?p.scaleHeartEmoji:!1),children:k.jsx(c("MWChatReactionEmoji"),{emoji:b,size:16,testid:void 0})})}),k.jsx("div",{className:"xi81zsa x1nxh6w3 x1s688f x1k2j06m x10ogl3i x2b8uid","data-testid":void 0,role:"none",style:t.viewerIsReactor?{color:D,minWidth:J*d("MWMultiReactConstants").SPACING_PER_COUNT_CHARACTER}:{minWidth:J*d("MWMultiReactConstants").SPACING_PER_COUNT_CHARACTER},children:I})]})}),!e&&B&&k.jsx(x,{children:k.jsx(c("BaseContextualLayer.react"),{align:"middle",contextRef:A,position:"above",ref:f,children:k.jsx("div",{style:c("gkx")("23219")?null:o,children:k.jsx(c("MWXPopover.react"),{withArrow:c("gkx")("23219"),children:k.jsx("div",{className:(h||(h=c("stylex")))(w,p.tooltipContainer,C&&p.tooltipContainerVisible),role:"tooltip",children:k.jsx(c("MWXText.react"),{color:"primary",type:"body4",children:k.jsx(c("MWChatMultiReactionsTooltip.react"),{messageId:g.messageId,onTooltipCTAPress:function(){return s(t.reactionFbid,b.join(""))},reactionFbid:t.reactionFbid,threadKey:a})})})})})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageReactionsList.react",["I64","LSAuthorityLevel","LSIntEnum","MWMessageReaction.react","MWMultiReactConstants","react","stylex","useStyleXTransition"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useRef,n={animationBase:{opacity:"xg01cxk",transitionDuration:"xbb3pvg",transitionProperty:"xeq7tfg",width:"xnalus7",$$css:!0},animationEnter:{animationDuration:"xllfotl",animationName:"x127lhb5",opacity:"x1hc1fzr",width:"xvni27",$$css:!0},animationLeave:{animationDuration:"x773k2o",animationName:"xvma63k",opacity:"xg01cxk",width:"xnalus7",$$css:!0}};function a(a){var b=a.emojis,e=a.hideTooltip,f=a.isMultiReactExpanded,g=a.isReactionReadOnly,i=a.message,o=a.onTooltipCTAPress,p=a.previousReactionItems,q=a.reactionItemsShown,r=a.reactionsV2,s=a.sendReactionThrottled,t=a.setIsReactionsRowAnimationInProgress,u=a.setShouldAnimate,v=a.shouldAnimate,w=a.showTooltip,x=a.showTooltipImmediately,y=a.threadKey,z=a.tooltipIndex,A=q.length,B=m(A);a=function(){B.current=A,t(!1),f&&u(!1)};var C=function(){B.current=A,t(!1)},D=[];r!=null&&(D=q.map(function(a,f){var h=a.emoji;a=a.reaction;return b[f]==null?null:{element:l.jsx(c("MWMessageReaction.react"),{emoji:h,isReadOnly:g,isTooltipShown:z===f,message:i,onFocus:function(){return x(f)},onMouseEnter:function(){return w(f)},onMouseLeave:e,onTooltipCTAPress:o,reaction:a,sendReaction:s,shouldAnimate:(p==null?void 0:p.find(function(a){return a.emoji.join("")===h.join("")}))==null&&(j||(j=d("I64"))).equal(a.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)),threadKey:y},h),key:b.toString()+f}}));q=c("useStyleXTransition")((r=D)!=null?r:[],function(a){return a!=null?a.key:0},{base:n.animationBase,duration:d("MWMultiReactConstants").REACTIONS_ROW_EXPAND_COLLAPSE_ANIMATION_TOTAL_DURATION,enter:n.animationEnter,leave:n.animationLeave,onEnterComplete:a,onLeaveComplete:C});return v?q.map(function(a){return l.jsx("div",{className:(h||(h=c("stylex")))([a==null?void 0:a.xstyle]),style:babelHelpers["extends"]({},a.style),children:a.item&&a.item.element},a.key)}):D.map(function(a){return a==null?void 0:a.element})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useGetMultiReactOrderedItems",["I64","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useMemo,k=b.useRef;function l(a,b){var c={};a.forEach(function(a){c[a]=!0});var d=a;b.forEach(function(a){a=a.emoji.join("");if(c[a])return;d.push(a)});return d}function m(a,b){b=((b=b)!=null?b:[]).filter(function(a){return(i||(i=d("I64"))).gt(a.count,i.zero)});return b.map(function(b,c){return{emoji:a[c],reaction:b}}).filter(function(a){return a.emoji!=null})}function a(a,b){var c=k(!0),e=k([]),f=j(function(){return m(a,b)},[a,b]),g=j(function(){var a={};f.forEach(function(b){a[b.emoji.join("")]=b});return a},[f]);return j(function(){if(c.current)c.current=!1,e.current=f.sort(function(a,b){return(i||(i=d("I64"))).compare(b.reaction.count,a.reaction.count)}).map(function(a){return a.emoji.join("")});else{var a=e.current.filter(function(a){a=g[a];return a==null?!1:(i||(i=d("I64"))).to_int32(a.reaction.count)>0});e.current=l(a,f)}return e.current.map(function(a){return g[a]}).filter(Boolean)},[g,f])}g["default"]=a}),98);
__d("MWMessageReactionsContainerV2.react",["LSMessagingThreadTypeUtil","MAWPSendOrRemoveReaction.react","MWAddReactionButton.react","MWExpandReactionsButton.react","MWLSThread","MWMessageReactionsList.react","MWMultiReactConstants","ReQL","ReQLSuspense","emptyFunction","justknobx","react","stylex","unrecoverableViolation","useGetMultiReactOrderedItems","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useOnOutsideClick","usePrevious","useReStore","useThrottled"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;var l=b.useCallback,m=b.useRef,n=b.useState,o={wrapper:{alignItems:"x1cy8zhl",display:"x78zum5",flexDirection:"x1q0g3np",flexWrap:"x1a02dak",marginTop:"x1gslohp",$$css:!0},wrapperOutgoing:{alignItems:"xuk3077",justifyContent:"x13a6bvl",$$css:!0}};function a(a){var b,e=a.emojis,g=a.isMultiReactRowExpanded,j=a.message,p=a.onOpenDialog,q=a.outgoing,r=a.reactionsV2,s=a.toggleMultiReactionRowExpansion;a=n(-1);var t=a[0],u=a[1],v=c("justknobx")._("2078");a=n({isReactionsRowAnimationInProgress:!1,shouldAnimate:v});var w=a[0],x=a[1],y=function(a){v&&x(function(b){return babelHelpers["extends"]({},b,{isReactionsRowAnimationInProgress:a})})},z=function(a){v&&x(function(b){return babelHelpers["extends"]({},b,{shouldAnimate:a})})};a=n(!1);var A=a[0],B=a[1];a=j.threadKey;var C=(h||(h=c("useReStore")))(),D=d("MWLSThread").useThread(a),E=d("ReQLSuspense").useFirst(function(){return(D==null?void 0:D.parentThreadKey)?d("ReQL").fromTableAscending(C.tables.community_folders).getKeyRange(D==null?void 0:D.parentThreadKey):d("ReQL").empty()},[C,D==null?void 0:D.parentThreadKey],f.id+":99");b=(b=D)!=null?b:{};b=b.threadType;if(b==null)throw c("unrecoverableViolation")("thread cannot be null when reacting to message","messenger_web_product");var F=d("LSMessagingThreadTypeUtil").isSecure(b),G=d("LSMessagingThreadTypeUtil").isDiscoverableChannel(b),H=c("useOnOutsideClick")(g?function(){A||(z(!0),s&&s(),y(!0))}:null),I=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a),J=d("MAWPSendOrRemoveReaction.react").useSendOrRemoveReaction(j,F,"instant_react"),K=l(function(a,b){return J(j.messageId,a,b?"remove_reaction":"reaction")},[J,j.messageId]),L=c("useThrottled")(function(a,b){K(a,b)},750),M=m(null),N=l(function(a,b){p({reactionFbid:a,reactionType:b}),u(-1)},[p,u]),O=l(function(a){M.current!=null&&(window.clearTimeout(M.current),B(!0)),u(a)},[]),P=l(function(a){if(t===a)return;B(!0);M.current!=null&&window.clearTimeout(M.current);u(-1);M.current=window.setTimeout(function(){u(a)},300)},[t]),Q=l(function(){B(!1),M.current!=null&&window.clearTimeout(M.current),M.current=window.setTimeout(function(){return u(-1)},300)},[]),R=c("useGetMultiReactOrderedItems")(e,r);I=I?G===!0?d("MWMultiReactConstants").PUBLIC_CHANNELS_MAX_REACTIONS_EMOJIS_PREVIEWED_WHEN_COLLAPSED:d("MWMultiReactConstants").CM_MAX_REACTION_EMOJIS_ALLOWED:d("MWMultiReactConstants").DEFAULT_MAX_REACTION_PREVIEWED_ALLOWED;var S=g?R:R.slice(0,I);I=g?[]:R.slice(I);I=I.length;var T=R.length||0;R=c("usePrevious")(R);if(T<1)return null;E=D==null?!1:d("useIsReactionsV2Enabled").isReactionsV2ReadOnly(D,E==null?void 0:E.communityType);var U=!q&&w.isReactionsRowAnimationInProgress;G=!E&&T>0&&(G||T<d("MWMultiReactConstants").CM_MAX_REACTION_EMOJIS_ALLOWED)&&!U;T=I>0&&!U;return k.jsxs("div",{className:(i||(i=c("stylex")))(o.wrapper,q?o.wrapperOutgoing:!1),"data-testid":void 0,ref:H,children:[k.jsx(c("MWMessageReactionsList.react"),{emojis:e,hideTooltip:Q,isMultiReactExpanded:g,isReactionReadOnly:E,message:j,onTooltipCTAPress:N,previousReactionItems:R,reactionItemsShown:S,reactionsV2:r,sendReactionThrottled:L,setIsReactionsRowAnimationInProgress:y,setShouldAnimate:z,shouldAnimate:w.shouldAnimate,showTooltip:P,showTooltipImmediately:O,threadKey:a,tooltipIndex:t}),T?k.jsx(c("MWExpandReactionsButton.react"),{isMultiReactExpanded:g,isReactionReadOnly:E,isSecure:F,message:j,numOverflowEmojis:(U=I)!=null?U:0,sendReaction:K,setIsReactionsRowAnimationInProgress:y,threadKey:a,threadType:b,toggleMultiReactExpanded:(q=s)!=null?q:c("emptyFunction")}):null,G?k.jsx(c("MWAddReactionButton.react"),{isSecure:F,message:j,sendReaction:K,setShouldRowStayExpanded:B,threadKey:a,threadType:b}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPQuickReplies.react",["FBLogger","I64","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","MWChatBusinessQuickReplyList.react","MWPActor.react","MessagePowerUp","Promise","ReQL","ReQLSuspense","promiseDone","react","useLSMessagingSource","useReStore","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||d("react");function n(a){var e=a.lastMessageId,g=a.quickReplyType,l=a.threadKey,n=c("useLSMessagingSource")(),o=(i||(i=c("useReStore")))(),p=d("MWPActor.react").useActor();a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(o.table("quick_reply_ctas")).getKeyRange(l,e).map(function(a){var b=a.type_,d=b==="quick_reply_text"||b==="quick_reply_ad"?"text":b==="quick_reply_phone"?"user_phone_number":b==="quick_reply_email"?"user_email":"";d===""&&c("FBLogger")("messenger_web_product").mustfix("Unexpected quick-reply type: %s, title: %s",b,a.title);return{content_type:d,data:void 0,image_url:a.imageUrl,payload:a.platformToken,title:a.title}}).filter(function(a){return a.content_type!==""})},[o,e,l],f.id+":50");if(a.length>0)return m.jsx(c("MWChatBusinessQuickReplyList.react"),{arrayQR:a,id:(j||(j=d("I64"))).to_string(p),onSend:function(a){var e=d("LSThreadAttributionTypeUtil").getSource(l,n);c("promiseDone")(o.runInTransaction(function(f){var g;g=(g=a.payload)!=null?g:void 0;return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(f),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,mark_read:!0,platform_token:g,power_up_style:(k||(k=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_type:k.ofNumber(c("LSMessageReplySourceType").NONE),reply_source_type_v2:k.ofNumber(c("LSMessageReplySourceTypeV2").NONE),snippet_has_emoji:!1,source:e}),mailboxType:k.ofNumber(c("LSMailboxType").MESSENGER),senderId:p,text:a.title,threadKey:l,threadType:k.ofNumber(1)}).then(function(a){return(h||(h=b("Promise"))).resolve(a)})},"readwrite"))},quickReplyType:g});else return null}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.threadKey,e=(i||(i=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(e.tables.messages).getKeyRange(b)},[e,b],f.id+":138");if(a!=null)return m.jsx(n,{lastMessageId:a.messageId,quickReplyType:a.quickReplyType,threadKey:b});else return null}a.displayName=a.name+" [from "+f.id+"]";e=d("withCometPlaceholder").withCometPlaceholder(a);g["default"]=e}),98);
__d("MWV2ThreadNullstatePill.react",["MWXPressable.react","react","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={dark_mode_legible_text_pill:{alignItems:"x6s0dn4",backgroundColor:"xmd5bsh",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",boxShadow:"x1vnslfi",boxSizing:"x9f619",color:"xi81zsa",display:"x3nfvp2",fontSize:"x6prxxf",fontWeight:"xo1l8bm",justifyContent:"xl56j7k",marginTop:"xr9ek0c",marginEnd:"x1emribx",marginBottom:"xjpr12u",marginStart:"x1i64zmx",overflowWrap:"x1mzt3pk",paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,paddingEnd:"xn6708d",paddingTop:"x123j3cw",paddingBottom:"xs9asl8",wordBreak:"x13faqbe",$$css:!0},pill:{alignItems:"x6s0dn4",backgroundColor:"x1eb86dx",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",boxShadow:"x1vnslfi",boxSizing:"x9f619",color:"xxq4lyh",display:"x3nfvp2",fontSize:"x6prxxf",fontWeight:"xo1l8bm",justifyContent:"xl56j7k",marginTop:"xr9ek0c",marginEnd:"x1emribx",marginBottom:"xjpr12u",marginStart:"x1i64zmx",overflowWrap:"x1mzt3pk",paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,paddingEnd:"xn6708d",paddingTop:"x123j3cw",paddingBottom:"xs9asl8",wordBreak:"x13faqbe",$$css:!0}};function a(a){var b=a.children;a=a.onClick;var d=c("useCurrentDisplayMode")()==="dark";return i.jsx(c("MWXPressable.react"),{onPress:a,overlayDisabled:!0,xstyle:function(){return[d?j.dark_mode_legible_text_pill:j.pill]},children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWV2SendIcebreakerMessage",["I64","Int64Hooks","LSFactory","LSIntEnum","LSMailboxType","LSNullstateCTAType","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","LsBotComposerQuickReplyTappedFalcoEvent","LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent","LsFalcoEventEntryPoint","MWMDotMeReferrerContext.react","MWPActor.react","MessagePowerUp","MessageSendClickFalcoEvent","gkx","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,e,f){var g=(j||(j=c("useReStore")))(),k=d("MWPActor.react").useActor(),l=d("MWMDotMeReferrerContext.react").useMDotMeReferrer();return d("Int64Hooks").useCallbackInt64(function(j,m){var n=d("LSThreadAttributionTypeUtil").getSource(a,e),o=j!=null?(h||(h=d("I64"))).equal(j.ctaType,(i||(i=d("LSIntEnum"))).ofNumber(c("LSNullstateCTAType").GET_STARTED))&&j.ctaId===m.ctaId:!1;j=c("gkx")("6771")&&j!=null&&(h||(h=d("I64"))).equal(j.ctaType,(i||(i=d("LSIntEnum"))).ofNumber(c("LSNullstateCTAType").ICEBREAKER))&&j.ctaId===m.ctaId;var p=o||j?l:void 0;c("promiseDone")(g.runInTransaction(function(e){return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(e),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,initiating_source:(e=f)!=null?e:void 0,mark_read:!0,platform_ref:p,platform_token:m.platformToken,power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),source:n}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:k,text:m.title,threadKey:a,threadType:b})},"readwrite"));var q=(h||(h=d("I64"))).to_string(a);if(o)c("LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent").log(function(){return{page:{id:q}}});else{var r=(j=m.ctaIdentifier)!=null?j:"";c("LsBotComposerQuickReplyTappedFalcoEvent").log(function(){return{display:void 0,page:{id:q},quick_reply:{id:r,type:64}}})}c("MessageSendClickFalcoEvent").log(function(){return{message_send_source:{entry_point:d("LsFalcoEventEntryPoint").icebreaker}}})},[a,e,l,g,k,b,f])}g["default"]=a}),98);
__d("MWPersistentIcebreakers",["I64","Int64Hooks","LsBotComposerQuickReplyDisplayedFalcoEvent","MWV2ThreadNullstatePill.react","ReQL","ReQLSuspense","ServerTime","react","useMWV2SendIcebreakerMessage","useReStore","useStable","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i.useState;function m(a){var b=a.initiatingSource,e=a.lsSource;e=e===void 0?"unknown":e;var f=a.nullstateCtas,g=a.threadKey;a=a.threadType;var h=c("useMWV2SendIcebreakerMessage")(g,a,e,b),i=f.map(function(a){return a.ctaIdentifier});a=l(!1);var m=a[0],n=a[1];e=c("useVisibilityObserver")({onVisible:d("Int64Hooks").useCallbackInt64(function(){if(!m&&i.length>0){n(!0);var a=(j||(j=d("I64"))).to_string(g);c("LsBotComposerQuickReplyDisplayedFalcoEvent").log(function(){return{displayed_quick_reply:{item_ids:i,num_items:i.length,type:60},page:{id:a}}})}},[m,i,g])});return k.jsx("div",{className:"x1n2onr6 xh8yej3 x1eb86dx",ref:e,children:k.jsx("ul",{className:"xuk3077 x1eb86dx x78zum5 xdt5ytf xm7lytj",children:f.map(function(a){if(a.ctaType==="nullstate_icebreaker")return k.jsx("li",{className:"xamitd3 xsag5q8 xn6708d x1ye3gou x2b8uid",children:k.jsx(c("MWV2ThreadNullstatePill.react"),{onClick:function(){return h(void 0,a)},children:a.title})},(j||(j=d("I64"))).to_string(a.ctaId));else return null})})})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=c("useStable")(function(){return d("ServerTime").getMillis()}),e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.threads,["lastActivityTimestampMs"]).getKeyRange(a.threadKey)},[e,a.threadKey],f.id+":129");if(g==null)return null;return a.nullstateCtas.length===0||b-(j||(j=d("I64"))).to_int32(g.lastActivityTimestampMs)<216e5?null:k.jsx(m,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWQuickPromotionThreadViewBanner_eligiblePromotions.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWQuickPromotionThreadViewBanner_eligiblePromotions",selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"3XEtNp"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"MWQuickPromotionThreadViewBanner_eligiblePromotions",fragmentName:"CometQuickPromotionInboxThreadViewBannerRendererStrategy_promotion",fragmentPropName:"promotion",kind:"ModuleImport"}],type:"CometQuickPromotionInboxThreadViewBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"MWQuickPromotionThreadViewBanner_eligiblePromotions",fragmentName:"CometQuickPromotionChatTabNotificationSettingsBannerRendererStrategy_promotion",fragmentPropName:"promotion",kind:"ModuleImport"}],type:"CometQuickPromotionChatTabNotificationSettingsBannerRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"3XEtNp")'}],storageKey:null}],storageKey:null}],type:"ViewerEligibleQuickPromotionsConnection",abstractKey:null};e.exports=a}),null);
__d("MWQuickPromotionThreadViewBanner.react",["CometQuickPromotionLoggerContext.react","CometRelay","MWQuickPromotionThreadViewBanner_eligiblePromotions.graphql","react","useQuickPromotionFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){a=a.eligiblePromotions;a=d("CometRelay").useFragment(h!==void 0?h:h=b("MWQuickPromotionThreadViewBanner_eligiblePromotions.graphql"),a);a=a==null?void 0:(a=a.nodes[0])==null?void 0:(a=a.comet_qp_sections)==null?void 0:a.renderer_strategy;var e=c("useQuickPromotionFalcoEvent")({context_surface_id:8783,context_trigger:"messenger_thread_open"});return a==null?null:j.jsx(c("CometQuickPromotionLoggerContext.react").Provider,{value:e,children:j.jsx(d("CometRelay").MatchContainer,{match:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWQuickPromotionThreadViewBannerContainerQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6578447052222731"}),null);
__d("MWQuickPromotionThreadViewBannerContainerQuery.graphql",["MWQuickPromotionThreadViewBannerContainerQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"community_id"},{defaultValue:null,kind:"LocalArgument",name:"fb_group_id"},{defaultValue:null,kind:"LocalArgument",name:"thread_id"},{defaultValue:null,kind:"LocalArgument",name:"trigger"}],c=[{kind:"Literal",name:"surface_nux_id",value:10999},{kind:"Variable",name:"trigger",variableName:"trigger"},{fields:[{fields:[{kind:"Variable",name:"community_id",variableName:"community_id"},{kind:"Variable",name:"fb_group_id",variableName:"fb_group_id"},{kind:"Variable",name:"thread_id",variableName:"thread_id"}],kind:"ObjectValue",name:"community_messaging_context"}],kind:"ObjectValue",name:"trigger_context_v2"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWQuickPromotionThreadViewBannerContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:c,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWQuickPromotionThreadViewBanner_eligiblePromotions"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWQuickPromotionThreadViewBannerContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:c,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"3XEtNp"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"MWQuickPromotionThreadViewBanner_eligiblePromotions",fragmentName:"CometQuickPromotionInboxThreadViewBannerRendererStrategy_promotion",fragmentPropName:"promotion",kind:"ModuleImport"}],type:"CometQuickPromotionInboxThreadViewBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"MWQuickPromotionThreadViewBanner_eligiblePromotions",fragmentName:"CometQuickPromotionChatTabNotificationSettingsBannerRendererStrategy_promotion",fragmentPropName:"promotion",kind:"ModuleImport"}],type:"CometQuickPromotionChatTabNotificationSettingsBannerRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"3XEtNp")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MWQuickPromotionThreadViewBannerContainerQuery_facebookRelayOperation"),metadata:{},name:"MWQuickPromotionThreadViewBannerContainerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWQuickPromotionThreadViewBannerContainer.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","I64","MWLSThreadDisplayContext","MWQuickPromotionThreadViewBanner.react","MWQuickPromotionThreadViewBannerContainerQuery.graphql","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||d("react"),l="CHAT_TAB_OPEN",m="MESSENGER_THREAD_OPEN";function n(a){switch(a){case"ChatTab":return l;default:return m}}function o(a){var e=a.communityId,f=a.fbGroupId;a=a.threadId;var g=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();g=n(g);e=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWQuickPromotionThreadViewBannerContainerQuery.graphql"),{community_id:e!=null?(j||(j=d("I64"))).to_string(e):null,fb_group_id:f!=null&&!(j||(j=d("I64"))).is_zero(f)?(j||(j=d("I64"))).to_string(f):null,thread_id:(j||(j=d("I64"))).to_string(a),trigger:g});a=e==null?void 0:(f=e.viewer)==null?void 0:f.eligible_promotions;return a==null?null:k.jsx(c("MWQuickPromotionThreadViewBanner.react"),{eligiblePromotions:a})}o.displayName=o.name+" [from "+f.id+"]";function a(a){return k.jsx(c("CometErrorBoundary.react"),{fallback:c("emptyFunction"),children:k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(o,babelHelpers["extends"]({},a))})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWThreadNullstateGreetingAndInstruction.react",["fbt","MWPreloadedText","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useContext;function a(a){var b=a.nullstate;a=a.nullstateCtas;b=b.welcomeText;var d=k(c("MWPreloadedText")),e=h._("__JHASH__zLWQrS74qZX__JHASH__");a=b!==e.toString()&&a.length>0;return d.text!=null||!a&&b==null?null:j.jsxs("div",{className:"xurb0ha x1sxyh0",children:[b!=null&&j.jsx("div",{className:"x1hhzuzn",children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"headline4",children:b})}),a&&j.jsx("div",{className:"x1hhzuzn",children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"headline4",children:e})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWThreadNullstatePrivacyText.react",["fbt","I64","JSResourceForInteraction","LSIntEnum","LSNullstateCTAType","MWPreloadedText","MWXLink.react","MWXText.react","P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent","gkx","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react")),m=i.useContext;function a(a){var b=a.nullstate,e=a.threadKey;a=a.threadTitle;var f=m(c("MWPreloadedText")),g=b.privacyText,i=b.privacyTextCtaTitle,n=b.privacyTextNonWelcomeScreen;a=h._("__JHASH__pMA_7iE0GY1__JHASH__",[h._param("name",a),h._param("= public info link",l.jsx(c("MWXLink.react"),{color:"primary",href:"https://www.facebook.com/help/messenger-app/719578818758231",role:"link",target:"_blank",children:l.jsx(c("MWXText.react"),{type:"body4",children:h._("__JHASH__WAqQCKR95Tr__JHASH__")})}))]);var o=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWPrivacyDisclosureDialog.react").__setRef("MWThreadNullstatePrivacyText.react")),p=o[0];o=l.jsx(c("MWXLink.react"),{color:"primary",onClick:function(){p({entryPoint:"NULL_STATE",threadKey:e},function(){}),c("P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent").log(function(){return{consumer_id:"0",entry_point:"NULL_STATE",page_id:(j||(j=d("I64"))).to_string(e)}})},role:"link",target:"_blank",children:i!=null?l.jsx(c("MWXText.react"),{color:"blueLink",type:"body4",children:i}):null});i=f.text!=null&&!!n;f=i||g!=null?l.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:i?n:g}):null;return l.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:c("gkx")("24144")&&(j||(j=d("I64"))).equal(b.privacyTextCtaType,(k||(k=d("LSIntEnum"))).ofNumber(c("LSNullstateCTAType").PRIVACY_DISCLOSURE))?l.jsxs(l.Fragment,{children:[f," ",o]}):a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ThreadNullstateCTAs.react",["I64","Int64Hooks","LSIntEnum","LSNullstateCTAType","LsBotComposerQuickReplyDisplayedFalcoEvent","MWV2ThreadNullstatePill.react","react","stylex","useMWV2SendIcebreakerMessage","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useState,n={cta_list:{alignItems:"xuk3077",display:"x78zum5",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",$$css:!0},cta_list_item:{alignSelf:"xamitd3",paddingBottom:"xsag5q8",paddingEnd:"xn6708d",paddingLeft:null,paddingRight:null,paddingStart:"x1ye3gou",textAlign:"x2b8uid",$$css:!0},cta_list_item_center:{alignSelf:"xamitd3",paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,paddingEnd:"xn6708d",$$css:!0}};function a(a){var b=a.initiatingSource,e=a.lsSource,f=a.nullstate,g=a.nullstateCtas,i=a.threadKey;a=a.threadType;var o=c("useMWV2SendIcebreakerMessage")(i,a,e,b),p=g.map(function(a){return a.ctaIdentifier}).filter(Boolean);a=m(!1);var q=a[0],r=a[1];e=c("useVisibilityObserver")({onVisible:d("Int64Hooks").useCallbackInt64(function(){if(!q&&p.length>0){r(!0);var a=(j||(j=d("I64"))).to_string(i);c("LsBotComposerQuickReplyDisplayedFalcoEvent").log(function(){return{displayed_quick_reply:{item_ids:p,num_items:String(p.length),type:60},page:{id:a}}})}},[q,p,i])});return l.jsx("ul",{className:"xuk3077 x78zum5 xdt5ytf xl56j7k xdj266r x11i5rnm xat24cr x1mh8g0r",ref:e,children:g.map(function(a){var b=(j||(j=d("I64"))).equal(f.ctaType,(k||(k=d("LSIntEnum"))).ofNumber(c("LSNullstateCTAType").GET_STARTED))&&f.ctaId!=null&&(j||(j=d("I64"))).equal(f.ctaId,a.ctaId);return l.jsx("li",{className:(h||(h=c("stylex")))(n.cta_list_item,b?n.cta_list_item_center:!1),children:l.jsx(c("MWV2ThreadNullstatePill.react"),{onClick:function(){return o(f,a)},children:a.title})},(j||(j=d("I64"))).to_string(a.ctaId))})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ThreadNullstate.react",["CometScrollableArea.react","Int64Hooks","LSThreadTitle.react","MWPreloadedText","MWThreadNullstateGreetingAndInstruction.react","MWThreadNullstatePrivacyText.react","MWV2ThreadNullstateCTAs.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={privacy_text:{paddingBottom:"xx6bls6",paddingStart:"xurb0ha",paddingLeft:null,paddingRight:null,paddingEnd:"x1sxyh0",$$css:!0},privacy_text_offset:{paddingBottom:"xg8j3zb",paddingTop:"x1iorvi4",$$css:!0}};a=i.memo(function(a){var b=a.initiatingSource,d=a.lsSource;d=d===void 0?"unknown":d;var e=a.nullstate,f=a.nullstateCtas,g=a.threadKey,h=a.threadName;a=a.threadType;var l=j(c("MWPreloadedText")),m=e.privacyText;l=i.jsxs("div",{children:[i.jsx(c("MWThreadNullstateGreetingAndInstruction.react"),{nullstate:e,nullstateCtas:f}),l.text!=null?null:i.jsx(c("MWV2ThreadNullstateCTAs.react"),{initiatingSource:b,lsSource:d,nullstate:e,nullstateCtas:f,threadKey:g,threadType:a}),m!=null?i.jsx("div",{className:"xx6bls6 xurb0ha x1sxyh0",children:i.jsx(c("MWThreadNullstatePrivacyText.react"),{nullstate:e,threadKey:g,threadTitle:i.jsx(c("LSThreadTitle.react"),{thread:{threadKey:g,threadName:h,threadType:a},wrapOutput:function(a,b){return b}})})}):null]});return i.jsx(c("CometScrollableArea.react"),{xstyle:k.privacy_text_offset,children:l})},d("Int64Hooks").mostlyShallowEqual);g["default"]=a}),98);
__d("MWOpenThreadDetail.react",["CometDebounce","CometErrorBoundary.react","CometPlaceholder.react","I64","Int64Hooks","LSFactory","LSFetchAdditionalThreadDataStoredProcedure","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMAutoJoinNotifNUX.react","MWCMThreadTypes.react","MWChatUnsendNUX.react","MWChatXACSunsettingBanner.react","MWContextBanner.react","MWLSThreadDisplayContext","MWMessageList","MWPActor.react","MWPMessageListColumn.react","MWPQuickReplies.react","MWPersistentIcebreakers","MWPreloadableQueries","MWQuickPromotionThreadViewBannerContainer.react","MWV2ThreadNullstate.react","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","cr:1598","cr:1600","cr:1690","cr:4723","cr:488","cr:5483","cr:7100","cr:7233","emptyFunction","gkx","logMessengerWebFalcoEvent","promiseDone","react","useCommunityFolder","useIsAdmodOnboardingEnabledForThread.react","useLSMessagingInitiatingSource","useMWReportThreadOpenOnMountAndFocusWithLogger","usePageletMetadata","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||d("react"),n=c("CometDebounce")(c("logMessengerWebFalcoEvent"));function o(a){var b=(k||(k=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("MWPreloadableQueries").threadNullStateQuery(b,a)},[b,a],f.id+":88"),g=d("ReQLSuspense").useArray(function(){return d("MWPreloadableQueries").threadNullStateCtaQuery(b,a)},[b,a],f.id+":95");return[e,g]}function p(a,e){var f=(k||(k=c("useReStore")))();d("Int64Hooks").useEffectInt64(function(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield (h||(h=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableDescending(f.tables.threads).getKeyRange(a)),d("ReQL").firstAsync(d("ReQL").fromTableDescending(f.tables.messages).getKeyRange(a)),d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(f.tables.reactions).getKeyRange(a).take(20))])),g=c[0],j=c[1];c=c[2];if(j==null||g==null)return;c=c.reduce(function(a,b){return(i||(i=d("I64"))).max(a,(a=b.reactionCreationTimestampMs)!=null?a:(i||(i=d("I64"))).zero)},(i||(i=d("I64"))).zero);j=i.max(j.timestampMs,c);c=i.compare(j,g.lastActivityTimestampMs)>-1;n({threadKey:g.threadKey,threadType:g.threadType},"thread_and_message_list_last_activity_mismatch",e,{hasMissingMessage:!c,threadLastActivityTimeMs:i.to_string(g.lastActivityTimestampMs),threadLastMessageTimeMs:i.to_string(j)})})())},[f,e,a])}function a(a){var e,g=a.entryPoint,h=a.messageListRef,l=a.thread,n=(k||(k=c("useReStore")))();a=o(l.threadKey);var q=a[0],r=a[1];a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(n.tables.cm_channel_list.index("threadIdCommunityId"),["channelPrivacy"]).getKeyRange(l.threadKey)},[n,l.threadKey],f.id+":186");e=(e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(n.tables.threads,["lastActivityTimestampMs"]).getKeyRange(l.threadKey).map(function(a){a=a.lastActivityTimestampMs;return!(i||(i=d("I64"))).equal(a,i.zero)})},[n,l.threadKey],f.id+":195"))!=null?e:!1;c("usePageletMetadata")("threadType",(i||(i=d("I64"))).to_string(l.threadType));var s=d("MWPActor.react").isAPPlus(),t=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(l.threadType),u=c("useLSMessagingInitiatingSource")(),v=b("cr:7100")!=null?m.jsx(b("cr:7100"),{thread:l}):null,w=d("MWCMThreadTypes.react").isJoinedCMThread(l.threadType),x=d("LSThreadBitOffset").has(167,l)&&w,y=d("LSThreadBitOffset").has(193,l);d("Int64Hooks").useEffectInt64(function(){x&&c("promiseDone")(n.runInTransaction(function(a){return c("LSFetchAdditionalThreadDataStoredProcedure")(c("LSFactory")(a),{threadKey:l.threadKey})},"readwrite"))},[n,l.threadKey,x]);var z=d("Int64Hooks").useCallbackInt64(function(){return m.jsxs(m.Fragment,{children:[m.jsx(c("MWPQuickReplies.react"),{threadKey:l.threadKey}),m.jsx(c("MWPersistentIcebreakers"),{initiatingSource:u,lsSource:"inboxInThread",nullstateCtas:r,threadKey:l.threadKey,threadType:l.threadType})]})},[l.threadKey,l.threadType,r,u]),A=d("Int64Hooks").useCallbackInt64(function(){return m.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnGrowJustified,{children:[m.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:20}),m.jsx(c("MWContextBanner.react"),{threadKey:l.threadKey,threadType:l.threadType}),m.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:10})]})},[l.threadKey,l.threadType]);p(l.threadKey,g);var B=c("useCommunityFolder")(l),C=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),D=d("useIsAdmodOnboardingEnabledForThread.react").useIsAdmodOnboardingEnabledForThread(l.threadKey);C=C!=null&&C==="ChatTab";a=(a==null?void 0:a.channelPrivacy)!=null&&(i||(i=d("I64"))).equal(a==null?void 0:a.channelPrivacy,(j||(j=d("LSIntEnum"))).ofNumber(2));var E=c("gkx")("23433"),F=c("gkx")("23434"),G=(i||(i=d("I64"))).gt(l.parentThreadKey,(i||(i=d("I64"))).zero)&&(i||(i=d("I64"))).gt(l.threadKey,(i||(i=d("I64"))).zero);C=b("cr:4723")!=null&&!C?m.jsx(b("cr:4723"),{thread:l}):null;var H=b("cr:1690")!=null?m.jsx(b("cr:1690"),{thread:l}):null;y=c("MWChatXACSunsettingBanner.react")!=null&&y?m.jsx(c("MWChatXACSunsettingBanner.react"),{}):null;var I=b("cr:5483")!=null&&w&&!a?m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsx(b("cr:5483"),{folderId:l.parentThreadKey})}):null;E=b("cr:1598")!=null&&w&&a&&E?m.jsx(b("cr:1598"),{groupId:l.parentThreadKey,threadId:l.threadKey}):null;w=b("cr:488")!=null&&w&&a&&F?m.jsx(b("cr:488"),{groupId:l.parentThreadKey,threadId:l.threadKey}):null;a=G?m.jsx(c("MWQuickPromotionThreadViewBannerContainer.react"),{communityId:B==null?void 0:B.folderId,fbGroupId:B==null?void 0:B.fbGroupId,threadId:l.threadKey}):null;F=b("cr:7233")!=null&&D?m.jsx(c("CometErrorBoundary.react"),{fallback:c("emptyFunction"),children:m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsx(b("cr:7233"),{threadKey:l.threadKey})})}):null;G=c("useMWReportThreadOpenOnMountAndFocusWithLogger")(l);return q!=null&&!e?m.jsxs(m.Fragment,{children:[G,a,F,v,m.jsx(c("MWCMAutoJoinNotifNUX.react"),{thread:l}),H,I,E,w,y,C,m.jsx(c("MWContextBanner.react"),{threadKey:l.threadKey,threadType:l.threadType}),m.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:null}),m.jsx(c("MWV2ThreadNullstate.react"),{initiatingSource:u,lsSource:"inboxInThread",nullstate:q,nullstateCtas:r,threadKey:l.threadKey,threadName:l.threadName,threadType:l.threadType})]}):m.jsxs(m.Fragment,{children:[G,a,F,v,m.jsx(c("MWCMAutoJoinNotifNUX.react"),{thread:l}),H,y,I,E,w,m.jsx(c("MWChatUnsendNUX.react"),{senderUnsendNUXEnabled:!0}),C,m.jsx(c("MWMessageList"),{entryPoint:g,ref:h,renderFooter:z,renderHeader:A,thread:l}),s&&t&&b("cr:1600")!=null?m.jsx(b("cr:1600"),{thread:l}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPThreadGradientBackground.react",["BaseTheme.react","MWPColorUtils","gkx","isStringNullOrEmpty","react","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState,l={container:{backgroundPosition:"x1xsqp64",backgroundSize:"x18d0r48",display:"x78zum5",flexBasis:"x1r8uery",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"xmz0i5r",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0}};function m(){var a=k(),b=a[0],e=a[1];a=c("useMWPThreadTheme")();var f=a.backgroundGradientColors,g=a.outgoingGradientColors;a=a.threadTheme;var h=a.backgroundUrl;a=a.fallbackColor;j(function(){if(h==null||!c("gkx")("24125"))return;var a=!1,b=new Image();b.src=h;b.onload=function(){if(a)return;e(h)};return function(){a=!0}},[h]);if(c("gkx")("24125")&&(!c("isStringNullOrEmpty")(h)||f.length>0)){if(h===b&&h!=null)return{backgroundImage:"url("+h+")"};if(f.length>1)return{backgroundImage:d("MWPColorUtils").gradient(f)};else{return{backgroundColor:d("MWPColorUtils").int64ToHex((f=f==null?void 0:(b=f[0])==null?void 0:b.color)!=null?f:a)}}}if(g.length>1)return{backgroundImage:d("MWPColorUtils").gradient(g)}}function a(a){var b;a=a.children;return i.jsx(c("BaseTheme.react"),{style:(b=m())!=null?b:{},xstyle:l.container,children:a})}a.displayName=a.name+" [from "+f.id+"]";g.MWPThreadGradientBackground=a}),98);
__d("MWOpenAndSecureThreadView.react",["I64","LSIntEnum","LSMessagingThreadTypeUtil","MWLSDatabaseLazySync","MWOpenThreadDetail.react","MWPAudioPlaybackThreadContext.react","MWPThreadGradientBackground.react","MessengerWebUXLogger","cr:6982","promiseDone","react","useGroupsCometChatsEngagementImpressionLogger","useIsChatPreviewsEnabled","useIsReactionsV2Enabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));a=k;e=a.memo;var m=a.useEffect;f=e(function(a){var e=a.entryPoint,f=a.messageListRef;a=a.thread;var g=(h||(h=c("useReStore")))(),k=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(a.threadKey),n=c("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"thread_view_impression"}),o=c("useGroupsCometChatsEngagementImpressionLogger")({client_extras:e?{entry_point:e}:void 0,community_id:(i||(i=d("I64"))).to_string(a.parentThreadKey),event:"chat_preview_open",surface:"chat_preview",thread_id:i.to_string(a.threadKey)});m(function(){k&&c("promiseDone")(d("MWLSDatabaseLazySync").sync(g,(j||(j=d("LSIntEnum"))).ofNumber(118)))},[g,k]);var p=d("LSMessagingThreadTypeUtil").isSecure(a.threadType),q=d("useIsChatPreviewsEnabled").useIsChatPreviewsEnabled(a.threadKey);return l.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2",ref:q?o:n,children:l.jsx(d("MWPThreadGradientBackground.react").MWPThreadGradientBackground,{children:l.jsx(d("MWPAudioPlaybackThreadContext.react").MWPAudioPlaybackThreadContextProvider,{threadKey:a.threadKey,children:b("cr:6982")==null||!p?l.jsx(c("MWOpenThreadDetail.react"),{entryPoint:e,messageListRef:f,thread:a}):l.jsx(b("cr:6982"),{entryPoint:e,messageListRef:f,thread:a})})})})});g["default"]=f}),98);
__d("MWPFetchMessagesPage",["FBLogger","LSFactory","LSIntEnum","LSIssueMessagesRangeQueryStoredProcedure","LSMailboxMessagesRangeQueryDirection","LSMessagingThreadTypeUtil","asyncToGeneratorRuntime","gkx","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f,g,i,j,k,l){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,m;b=(yield (b=a.messages_ranges_v2__generated).get.apply(b,g));if(b==null||(f==="before"?b.isLoadingBefore:b.isLoadingAfter))return;m=j==null?null:yield (m=a.messages_ranges_v2__generated).get.apply(m,j);if(j!=null&&(m==null||(f==="before"?m.isLoadingBefore:m.isLoadingAfter)))return;if(f==="before")if(m==null||b.hasMoreBefore){var n=d("LSMessagingThreadTypeUtil").isSecure(i);if(n){if(l!=null)return l(a,b.threadKey,"before",e)}else return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),referenceTimestampMs:b.minTimestampMs,threadKey:b.threadKey})}else{n=d("LSMessagingThreadTypeUtil").isSecure(c("nullthrows")(k));if(n){if(l!=null)return l(a,m.threadKey,"before",e)}else return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),referenceTimestampMs:m.minTimestampMs,threadKey:m.threadKey})}else if(m==null||b.hasMoreAfter){n=d("LSMessagingThreadTypeUtil").isSecure(i);if(n)if(c("gkx")("23927")){if(l!=null)return l(a,b.threadKey,"after",e)}else throw c("FBLogger")("messenger_web_product").mustfix("Not possible to fetch more after for secure messages");else return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").AFTER),referenceTimestampMs:b.minTimestampMs,threadKey:b.threadKey})}else{n=d("LSMessagingThreadTypeUtil").isSecure(c("nullthrows")(k));if(n)if(c("gkx")("23927")){if(l!=null)return l(a,m.threadKey,"after",e)}else throw c("FBLogger")("messenger_web_product").mustfix("Not possible to fetch more after for secure messages");else return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").AFTER),referenceTimestampMs:m.minTimestampMs,threadKey:m.threadKey})}});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui")}g["default"]=a}),98);
__d("MWPFetchMessagesPageV2",["FBLogger","I64","LSFactory","LSIntEnum","LSIssueMessagesRangeQueryStoredProcedure","LSMailboxMessagesRangeQueryDirection","LSMessagingThreadTypeUtil","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c,d,e,f,g,h){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,i,j){var k,l;k=(yield (k=a.tables.messages_ranges_v2__generated).get.apply(k,f));if(k==null)return;l=h&&(yield (l=a.tables.messages_ranges_v2__generated).get.apply(l,h));if(l==null&&h!=null)return;h=d("LSMessagingThreadTypeUtil").isSecure(g);g=i!=null?d("LSMessagingThreadTypeUtil").isSecure(i):!1;if(e==="before")if(l==null||k.hasMoreBefore)if(h)return n(a,b,e,k,j);else return p(a,f,k.threadKey,e);else if(g)return n(a,b,e,l,j);else return p(a,[l.threadKey,l.minTimestampMs,l.minMessageId],l.threadKey,e);else{e;if(l==null||k.hasMoreAfter)if(h)throw c("FBLogger")("messenger_web_product").mustfix("Not possible to fetch more after for secure messages");else return p(a,f,k.threadKey,e);else{g=d("LSMessagingThreadTypeUtil").isSecure(c("nullthrows")(i));if(g)throw c("FBLogger")("messenger_web_product").mustfix("Not possible to fetch more after for secure messages");else return p(a,[l.threadKey,l.minTimestampMs,l.minMessageId],l.threadKey,e)}}});return j.apply(this,arguments)}var k=new Map(),l=new Map();function m(a,b){var e=(h||(h=d("I64"))).to_string(b);return{lock:{after:function(){var b=f();b.after===!0&&c("FBLogger")("messenger_web_product").mustfix("Locking threadLockStatus twice");b.after=!0;a.set(e,b)},before:function(){var b=f();b.before===!0&&c("FBLogger")("messenger_web_product").mustfix("Locking threadLockStatus twice");b.before=!0;a.set(e,b)}},release:{after:function(){var b=f();b.after=!1;a.set(e,b)},before:function(){var b=f();b.before=!1;a.set(e,b)}},state:f()};function f(){var b=a.get(e);b==null&&(b={after:!1,before:!1},a.set(e,b));return b}}function n(a,b,c,d,e){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e){var f=m(k,d.threadKey);if(f.state[c])return;try{f.lock[c]();var g=(yield a.tables.messages.index("messageId").get(d.minMessageId));return yield e.fetchSecureMessagesProtocol(a,d.threadKey,g==null?void 0:g.primarySortKey,d,c,b)}finally{f.release[c]()}});return o.apply(this,arguments)}function p(a,b,c,d){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){f=m(l,f);if(f.state[g])return;try{f.lock[g]();return yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(yield (b=a.messages_ranges_v2__generated).get.apply(b,e));if(!b)return;if(b.isLoadingBefore&&g==="before")return;if(b.isLoadingAfter&&g==="after")return;return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(i||(i=d("LSIntEnum"))).ofNumber(g==="before"?c("LSMailboxMessagesRangeQueryDirection").BEFORE:c("LSMailboxMessagesRangeQueryDirection").AFTER),referenceTimestampMs:b.minTimestampMs,threadKey:b.threadKey})});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui")}finally{f.release[g]()}});return q.apply(this,arguments)}g["default"]=a}),98);
__d("MWPFetchMessagesRangeForMessage",["FBLogger","I64","LSFactory","LSMessagePointQueryStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){return a.runInTransaction(function(a){var g=(h||(h=d("I64"))).to_int32(f);(g===15||g===16)&&c("FBLogger")("occam").mustfix("MWPFetchMessagesRangeForMessage: incorrect call to MPQ with secure mailbox");return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(a),{messageId:e,threadKey:b,threadType:f})},"readwrite","ui")}g["default"]=a}),98);
__d("MWPJumpToMostRecentMessageButtonAnimationWrapper.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useMemo,m=b.useState,n={animateIn:{animationDuration:"x5hsz1j",animationName:"x1j49z95",transform:"x1dufm33",$$css:!0},animateOut:{animationDuration:"x5hsz1j",animationName:"x1j4bph1",transform:"xk9af5f",$$css:!0},animationWrapper:{bottom:"x1ey2m1c",start:"x14yxtea",left:null,right:null,position:"x10l6tqk",zIndex:"x1vjfegm",$$css:!0},root:{height:"xqtp20y",position:"x1n2onr6",width:"xh8yej3",$$css:!0}};function a(a){var b=a.children,d=a.visible;a=m(d);var e=a[0],f=a[1];k(function(){d&&f(!0)},[d,f]);return l(function(){return e?j.jsx("div",{className:"xqtp20y x1n2onr6 xh8yej3",children:j.jsx("div",{className:(h||(h=c("stylex")))([n.animationWrapper,d?n.animateIn:n.animateOut]),onAnimationEnd:function(a){d||f(!1)},children:b})}):null},[d,e,f,b])}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWScrollUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){a.scrollIntoView()}f.scrollElementIntoView=a}),66);
__d("useMWMarkThreadAsReadWhenNewMessagesArrive",["I64","Int64Hooks","MWLSThreadDisplayContext","MWV2IsTabFocusedContext.react","ReQL","ReQLObservable","UserActivity","asyncToGeneratorRuntime","cr:268","emptyFunction","gkx","promiseDone","react","useMWInboxPassiveContext","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||d("react")).useCallback,l=(e=b("cr:268"))!=null?e:c("emptyFunction");function m(a,b,c,d,e){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.table("messages")).getKeyRange(b)));if(h==null)return!1;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("threads")).getKeyRange(b)));if(a==null)return!1;b=g!==void 0?g==="ChatTab"?e:g==="Inbox"&&c("gkx")("24041")?!f.isPassive:!0:!0;e=(j||(j=d("I64"))).gt(h.timestampMs,a.lastActivityTimestampMs)?h.timestampMs:a.lastActivityTimestampMs;g=(j||(j=d("I64"))).gt(e,a.lastReadWatermarkTimestampMs);return c("UserActivity").isOnTab()&&c("UserActivity").isActive()&&b&&g});return n.apply(this,arguments)}function o(a,e){var f=(h||(h=c("useReStore")))(),g=d("MWV2IsTabFocusedContext.react").useIsTabFocused(),i=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),j=c("useMWInboxPassiveContext")();return k(function(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(yield m(f,a,g,j,i))return e()})())},[f,a,g,j,i,e])}function p(a,e,f,g){var i=(h||(h=c("useReStore")))();d("Int64Hooks").useEffectInt64(function(){var c=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=a();typeof b!=="boolean"&&(b=(yield b));if(b&&!e())return f()});return function(){return c.apply(this,arguments)}}();window.addEventListener("focus",c);document.hasFocus()&&void c();var h=d("ReQLObservable").create(i,function(){return d("ReQL").fromTableDescending(i.table("messages")).getKeyRange(g)}).subscribe({next:c});return function(){window.removeEventListener("focus",c),h.unsubscribe()}},[f,a,e,g,i])}function a(a,b,c,d){b=o(a.threadKey,b);l(a);p(c,d,b,a.threadKey);return b}g["default"]=a}),98);
__d("useMWPSafelyMarkThreadAsRead",["I64","Int64Hooks","LSFactory","LSMessagingThreadTypeUtil","LSOptimisticMarkThreadReadV2StoredProcedure","ServerTime","cr:5552","promiseDone","useMAWMarkThreadAsRead","useMWMarkThreadAsReadWhenNewMessagesArrive","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f,g){var j=(i||(i=c("useReStore")))(),k=a.threadKey,l=a.threadType,m=c("useMAWMarkThreadAsRead")(a),n=b("cr:5552")({entryPoint:g,threadKey:k,threadType:l});g=d("Int64Hooks").useCallbackInt64(function(){n==null?void 0:n();if(d("LSMessagingThreadTypeUtil").isSecure(l)){m();return}c("promiseDone")(j.runInTransaction(function(a){return c("LSOptimisticMarkThreadReadV2StoredProcedure")(c("LSFactory")(a),{readWatermarkTimestampMs:(h||(h=d("I64"))).of_float(d("ServerTime").getMillis()),threadKey:k})},"readwrite","ui"))},[j,n,m,k,l]);return c("useMWMarkThreadAsReadWhenNewMessagesArrive")(a,g,e,f)}g["default"]=a}),98);
__d("useMWPMessageListScroll",["MWPVisibleMessageContext.react","MWScrollUtils","Promise","react","requestAnimationFrame","useMWPSafelyMarkThreadAsRead"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.createRef,k=e.useCallback,l=e.useEffect,m=e.useImperativeHandle,n=e.useRef,o=e.useState;function p(a,b,c){var d=a.get(b);d==null&&(d=c(),a.set(b,d));return d}function a(a,e,f,g,i,q,r,s,t,u){var v=n(null),w=n(!1),x=k(function(){if(!u)return;if(q==null||w.current)return;q(!1);w.current=!0},[q,u]);l(function(){var a;if(q==null||w.current)return;if(g!=null&&!g.hasMoreBefore){q(!0);w.current=!0;return}i&&i((a=(a=v.current)==null?void 0:a.getScrollerMeasurements())!=null?a:void 0,g===f);a=(a=v.current)==null?void 0:a.doesContentFillScroll;if(a==null)return;if(a()){q(!1);w.current=!0;return}},[q,g,i,f]);var y=o(!0),z=y[0],A=y[1],B=(g==null?void 0:g.hasMoreAfter)===!1;y=k(function(){return new(h||(h=b("Promise")))(function(a){var b=v.current;b==null?a(!1):c("requestAnimationFrame")(function(){a(b.isAtBottom()&&B)})})},[B]);var C=c("useMWPSafelyMarkThreadAsRead")(t,y,a,e);l(function(){var b;b=(b=v.current)==null?void 0:b.onCloseToBottom;if(b!=null)return b(0,function(b){b&&!a()&&C()})},[C,a]);l(function(){var a;a=(a=v.current)==null?void 0:a.onCloseToBottom;if(a!=null&&r!=null)return a(36,r)},[r]);l(function(){var a;a=(a=v.current)==null?void 0:a.onCloseToBottom;if(a!=null)return a(600,A)},[f==null?void 0:f.minMessageId]);var D=n(new Map());t=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();var E=t.setVisibleMessage;y=t.visibleMessage;var F=y==null?void 0:y.messageId;e=k(function(a){return p(D.current,a,j)},[]);l(function(){var a;if(F==null)return;a=(a=D.current.get(F))==null?void 0:a.current;a!=null&&d("MWScrollUtils").scrollElementIntoView(a)},[F]);var G=k(function(){g===f&&(v.current!=null&&v.current.scrollToBottom()),E(function(){return void 0})},[f,g,E]);m(s,function(){return{getScrollAreaElement:function(){var a;return(a=v.current)==null?void 0:a.getScrollAreaElement()},jumpToMostRecentMessage:function(){G()},restoreScrollPosition:function(){var a;return(a=v.current)==null?void 0:a.restoreScrollPosition()}}},[G]);return[z,v,G,e,x]}g["default"]=a}),98);
__d("MWPBaseMessageList.react",["BaseHeadingContextWrapper.react","Box.react","CometHeroHoldTrigger.react","CometHideableComponentExperiment.react","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSMessageRenderingType","LSMessagingThreadTypeUtil","MAWFetchMoreMessagesWhenEnabled","MWPFetchMessagesPage","MWPFetchMessagesPageV2","MWPFetchMessagesRangeForMessage","MWPJumpToMostRecentMessageButtonAnimationWrapper.react","MWPMessageAuthor.react","MWPVisibleMessageContext.react","ReQL","ReQLPaginatedList.react","ReQLPaginatedList.shared","ReQLSuspense","cr:8795","emptyFunction","gkx","promiseDone","react","useMWPMessageListScroll","useReStore","useShallowEqualState"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),aa=i.useCallback,ba=3,ca=(e=c("MAWFetchMoreMessagesWhenEnabled")==null?void 0:c("MAWFetchMoreMessagesWhenEnabled").useFetchSecureMessages)!=null?e:function(a){return void 0},da=(e=c("MAWFetchMoreMessagesWhenEnabled")==null?void 0:c("MAWFetchMoreMessagesWhenEnabled").useSecureDataStorage)!=null?e:function(){return void 0},m={list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",isolation:"xc8icb0",overflowX:"x6ikm8r",overflowY:"x10wlt62",zIndex:"x1ja2u2z",$$css:!0},spacer:{backgroundColor:"x1eb86dx",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",$$css:!0}},n=(k||(k=d("I64"))).of_string("9999999999999");function o(a){var b=a.isCollapsed,c=a.messageId,e=a.primarySortKey;a=a.secondarySortKey;return d("ReQL").key(e,a,c,b)}function ea(a,b){if(a==null||b==null)return;return(k||(k=d("I64"))).compare(b,a.maxTimestampMs)<=0?a:null}function p(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return a==null||(k||(k=d("I64"))).equal(a.minTimestampMs,(k||(k=d("I64"))).zero)?d("ReQL").empty():d("ReQL").fromTableAscending(b.table("messages"),["isCollapsed","messageId","primarySortKey","secondarySortKey"]).getKeyRange(a.threadKey).bounds({gte:d("ReQL").key(a.minTimestampMs,a.minMessageId)})},[b,a],f.id+":144")}function fa(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return a==null||(k||(k=d("I64"))).equal(a.maxTimestampMs,n)?d("ReQL").empty():d("ReQL").fromTableDescending(b.table("messages"),["isCollapsed","messageId","primarySortKey","secondarySortKey","timestampMs"]).getKeyRange(a.threadKey).bounds({lte:d("ReQL").key(a.maxTimestampMs,a.maxMessageId)})},[b,a],f.id+":170")}e=l.forwardRef(a);function a(a,e){var g,i=a.checkIsThreadManuallySetAsUnread;i=i===void 0?c("emptyFunction").thatReturnsFalse:i;var q=a.entryPoint,ga=a.headerStyle,ha=a.isSufficientContentLoadedAbove,r=a.logScrollerMetadata,s=a.onInitialLoadingCompleted,t=a.onScrollToBottom,ia=a.onUserScroll,u=a.pageSize,ja=a.renderFooter,v=a.renderHeader,w=a.renderHeaderContentSpacer,x=a.renderJumpToMostRecentMessageButton,y=a.renderLoadingAnimation,z=a.renderRow,A=a.secondaryThread,B=a.setScrollTopInResetForBottomAnchor;B=B===void 0?!0:B;var C=a.thread;a=a.triggerRenderingCompleteOnResize;a=a===void 0?!1:a;var D=C.threadKey,E=C.threadType,ka=d("LSMessagingThreadTypeUtil").isSecure(E),F=A==null?void 0:A.threadKey,G=A==null?void 0:A.threadType,H=(h||(h=c("useReStore")))(),I=ca(E),J=da(),K=(g=u)!=null?g:c("gkx")("23432")?3:15,la=b("cr:8795")(H,D,E,K),L=d("Int64Hooks").useCallbackInt64(function(a,b,d){(c("gkx")("243")||c("gkx")("239"))&&J!=null?c("promiseDone")(c("MWPFetchMessagesPageV2")(H,K,d,a,E,b,G,J)):c("promiseDone")(c("MWPFetchMessagesPage")(H,K,d,a,E,b,G,I))},[K,H,G,I,E,J]),M=d("Int64Hooks").useCallbackInt64(function(a){c("promiseDone")(c("MWPFetchMessagesRangeForMessage")(H,D,a,E))},[H,D,E]),N=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(H.table("messages_ranges_v2__generated")).getKeyRange(D)},[H,D],f.id+":301");g=d("ReQLSuspense").useFirst(function(){return F==null?d("ReQL").empty():d("ReQL").fromTableDescending(H.table("messages_ranges_v2__generated")).getKeyRange(F)},[H,F],f.id+":308");var O=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();O=O.visibleMessage;var P=O==null?void 0:O.messageId,Q=O==null?void 0:O.timestamp,R=d("ReQLSuspense").useFirst(function(){return P!=null&&Q!=null?d("ReQL").fromTableAscending(H.table("messages"),["isCollapsed","messageId","primarySortKey","secondarySortKey"]).getKeyRange(D,Q,P):d("ReQL").empty()},[H,D,P,Q],f.id+":323"),S=ea(d("ReQLSuspense").useFirst(function(){return Q!=null?d("ReQL").fromTableDescending(H.table("messages_ranges_v2__generated")).getKeyRange(D).bounds({lte:[Q]}):d("ReQL").empty()},[H,Q,D],f.id+":336"),Q);O=c("useShallowEqualState")({displayMessage:void 0,displayMessagesRange:N});var T=O[0],U=O[1];O=T.displayMessage;T=T.displayMessagesRange;d("Int64Hooks").useEffectInt64(function(){P==null||Q==null?U(function(a){return babelHelpers.extends({},a,{displayMessage:void 0,displayMessagesRange:N})}):S==null?M(P):S.minMessageId===P&&S.hasMoreBefore?L(d("ReQL").key(S.threadKey,S.minTimestampMs,S.minMessageId),null,"before"):S.maxMessageId===P&&S.hasMoreAfter?L(d("ReQL").key(S.threadKey,S.minTimestampMs,S.minMessageId),null,"after"):R!=null&&U(function(a){return babelHelpers.extends({},a,{displayMessage:R,displayMessagesRange:S})})},[N,L,M,U,R,P,Q,S]);var V=p(T),W=fa(T),X=p(g);i=c("useMWPMessageListScroll")(i,q,N,T,r,s,t,e,C,a);q=i[0];r=i[1];s=i[2];var Y=i[3];t=i[4];e=d("Int64Hooks").useMemoInt64(function(){var a=H.table("messages").index("messageDisplayOrder"),b=d("LSMessagingThreadTypeUtil").isCMSubthread(E),e=H.table("messages").index("messageSubthreadKey");function f(a,b){var e=a.getKeyRange(D).filter(function(a){var b=a.isCollapsed;a=a.messageRenderingType;return!b&&!(k||(k=d("I64"))).equal(a,(k||(k=d("I64"))).of_int32(c("LSMessageRenderingType").HIDDEN))});return F==null?b!=null?d("ReQL").union(d("ReQL").prependKey(b.getKeyRange(D),0),d("ReQL").prependKey(e,1)):d("ReQL").prependKey(e,1):d("ReQL").union(d("ReQL").prependKey(a.getKeyRange(F).filter(function(a){a=a.isCollapsed;return!a}),0),d("ReQL").prependKey(e,1))}var g=f(d("ReQL").fromTableAscending(a),b?d("ReQL").fromTableAscending(e):void 0);f=f(d("ReQL").fromTableDescending(a),b?d("ReQL").fromTableDescending(e):void 0);return d("ReQLPaginatedList.shared").fromIterables(g,f)},[H,F,D,E]);a=T!=null&&(k||(k=d("I64"))).equal(T.maxTimestampMs,n);i=T!=null&&(k||(k=d("I64"))).equal(T.minTimestampMs,(k||(k=d("I64"))).zero);var ma=g!=null&&(k||(k=d("I64"))).equal(g.minTimestampMs,(k||(k=d("I64"))).zero),na=aa(function(a,b){var e=b.nextItem;b=b.previousItem;return l.jsx(c("CometHideableComponentExperiment.react"),{callingSurface:"thread_view",disableHidding:!0,children:l.jsx(d("MWPMessageAuthor.react").MWPMessageAuthor,{contactId:a.senderId,threadKey:a.threadKey,children:z({domElementRef:Y(a.messageId),message:a,nextMessage:e,prevMessage:b})})},a.offlineThreadingId)},[Y,z]),Z=(k||(k=d("I64"))).equal(C.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))&&d("LSMessagingThreadTypeUtil").isCMSubthread(C.threadType);if((T==null||V==null&&!i||W==null&&!a)&&!Z){if((k||(k=d("I64"))).equal(C.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)))return l.jsxs(l.Fragment,{children:[l.jsx(c("CometHeroHoldTrigger.react"),{description:"MWChatWaitingForDisplayState-optimisticThread",hold:!0}),v!=null?v():null]});C=T==null?"displayMessagesRangeNull":V==null&&!i?"noMinMessage":W==null&&!a?"noMaxMessage":"other";return l.jsxs(l.Fragment,{children:[l.jsx(c("CometHeroHoldTrigger.react"),{description:"MWChatWaitingForDisplayState-"+C,hold:!0}),y!=null?y():null]})}var $=!Z&&T!=null?d("ReQL").key(T.threadKey,T.minTimestampMs,T.minMessageId):null,oa=g==null?null:d("ReQL").key(g.threadKey,g.minTimestampMs,g.minMessageId);i=O==null?"bottom":[1].concat(o(O));a=V==null?X==null||ma?null:[0].concat(o(X)):[1].concat(o(V));C=W==null?null:[1].concat(o(W));return l.jsxs(c("Box.react"),{xstyle:m.list,children:[l.jsx(c("BaseHeadingContextWrapper.react"),{children:l.jsx(c("ReQLPaginatedList.react"),{bounds:{gte:a,lte:C},data:e,hasReachedBottom:!Z&&T!=null?!T.hasMoreAfter:!0,hasReachedTop:!Z&&T!=null?g==null?!(T.hasMoreBefore||A!=null):!(T.hasMoreBefore||g.hasMoreBefore):!0,headerStyle:ga,holdTriggerElementsCount:ba,imperativeRef:r,initialAnchor:i,initialRenderComplete:t,isSufficientContentLoadedAbove:ha,onPageLoaded:function(a,b,c){if(!ka)return;if(a!=="top")return;la(b,c)},onReachingBottom:!Z&&$!=null?function(){L($,oa,"after")}:c("emptyFunction"),onReachingTop:!Z&&$!=null?function(){L($,oa,"before")}:c("emptyFunction"),onUserScroll:ia,pageSize:u,renderFooter:ja,renderHeader:v,renderHeaderContentSpacer:w!=null?w:function(){return l.jsx(c("Box.react"),{xstyle:m.spacer})},renderItem:na,renderLoadingAnimation:y,setScrollTopInResetForBottomAnchor:B,xstyle:m.list})}),x&&l.jsx(c("MWPJumpToMostRecentMessageButtonAnimationWrapper.react"),{visible:!Z&&T!=null?!q||T.hasMoreAfter:!1,children:x(s)})]})}a.displayName=a.name+" [from "+f.id+"]";a=e;g.default=a}),98);
__d("MWV2ComposerStickerButtonLegacy.react",["JSResourceForInteraction","MWChatComposerIcons","MWV2ComposerStickerCommon","MWXLazyPopoverTrigger.react","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","gkx","react","useMWV2ComposerOnStickerSelect"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("JSResourceForInteraction")("MWChatStickersFlyout.react").__setRef("MWV2ComposerStickerButtonLegacy.react"),k={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},flyoutRoot:{width:"x1fepime",$$css:!0}};function a(a){var b=a.color,e=a.disabled,f=a.onSelectStickerPack,g=a.onSendMessage;a=a.useSecureSend;g=c("useMWV2ComposerOnStickerSelect")(g,a);var h=c("MessengerWebUXLogger").useInteractionLogger();return i.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",disableAutoFlip:!0,popoverProps:{className:"x1fepime",onSelectStickerPack:f,onStickerSelect:g,shouldAlwaysShowAvatarPack:a,shouldHideDefaultPacks:a},popoverResource:j,position:"above",children:function(a,f,g,j,l,m,n){return i.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:d("MWV2ComposerStickerCommon").LABEL,children:i.jsx(c("MWXPressable.react"),{"aria-label":d("MWV2ComposerStickerCommon").LABEL,disabled:e,onHoverIn:j,onHoverOut:l,onPress:function(){f(),h==null?void 0:h({eventName:"composer_open_sticker_picker"})},onPressIn:m,overlayRadius:"50%",ref:a,testid:void 0,xstyle:function(){return[c("gkx")("23219")?k.buttonMDS:k.buttonFDS]},children:i.jsx(d("MWChatComposerIcons").MWChatComposerIconsSticker,{fill:e?void 0:b,size:20})})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerSuggestionView.react",["fbt","ix","GroupsCometChatsEngagementLogger","I64","Int64Hooks","MWAdmodOnboardingSuggestedActionsContext.react","MWXIcon.react","MWXTextPairing.react","Promise","asyncToGeneratorRuntime","cr:6796","fbicon","promiseDone","react","useAsyncReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=k||d("react");function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield b.table("threads").get(a));a=(a=a==null?void 0:a.parentThreadKey)!=null?a:(l||(l=d("I64"))).zero;b=(yield b.table("community_folders").get(a));b=(b=b==null?void 0:b.fbGroupId)!=null?b:(l||(l=d("I64"))).zero;return{communityID:a,fbGroupId:b}});return o.apply(this,arguments)}function a(a){var e,f=a.threadKey,g=c("useAsyncReStore")();a=d("MWAdmodOnboardingSuggestedActionsContext.react").useMWAdmodOnboardingSuggestedActionsContext();var k=a.setShowWelcomeMessageSuggestion,o=a.showWelcomeMessageSuggestion;a=c("useSinglePartialViewImpression")({onImpressionEnd:d("Int64Hooks").useCallbackInt64(function(){return c("promiseDone")((j||(j=b("Promise"))).resolve().then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield g);a=(yield n(f,a));var b=a.communityID;a=a.fbGroupId;var c=o.entryPoint,e=o.source;d("GroupsCometChatsEngagementLogger").log({action:"impression",community_id:(l||(l=d("I64"))).to_string(b),entry_point:c,event:"admin_send_message_hint_card_rendered",group_id:l.to_string((b=a)!=null?b:(l||(l=d("I64"))).zero),parent_surface:"thread_view",source:e,surface:"admin_send_message_hint_card"})})))},[g,o,f])});var p=d("Int64Hooks").useCallbackInt64(function(){var a=o.entryPoint,e=o.source;k({show:!1});c("promiseDone")((j||(j=b("Promise"))).resolve().then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield g);b=(yield n(f,b));var c=b.communityID;b=b.fbGroupId;d("GroupsCometChatsEngagementLogger").log({action:"dismiss",community_id:(l||(l=d("I64"))).to_string(c),entry_point:a,event:"admin_send_message_hint_card_dismissed",group_id:l.to_string((c=b)!=null?c:(l||(l=d("I64"))).zero),parent_surface:"thread_view",source:e,surface:"admin_send_message_hint_card"})})))},[g,k,o,f]);e=(e=b("cr:6796")(!0))==null?void 0:e.backgroundColor;return m.jsxs("div",{className:"x1cy8zhl xcrg951 x8cjs6t x13fuv20 x178xt8z x78zum5 x1qughib xg8j3zb x14uny0o xvpee5o x889kno",ref:a,style:e!=null?{backgroundColor:e}:void 0,children:[m.jsx("div",{className:"xmo9yow",children:m.jsx(c("MWXTextPairing.react"),{body:h._("__JHASH__OnLaish4EIY__JHASH__"),bodyColor:"secondary",headline:h._("__JHASH__ZKh890JQ4An__JHASH__"),headlineColor:"primary",level:4})}),m.jsx(c("MWXIcon.react"),{"aria-label":h._("__JHASH__gaxHiFwvIGk__JHASH__"),color:"primary",icon:d("fbicon")._(i("478231"),12),onPress:p})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXIconLike",["MWXSvgIcon","SVGIcon","cr:9201","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9201")),c("gkx")("23219"));g["default"]=a}),98);
__d("MessagesFilled20.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("path",{d:"M16 7.17a.755.755 0 0 0-1 .715v1.166A3.949 3.949 0 0 1 11.051 13H8.917a.753.753 0 0 0-.45.15l-1.345 1.008a.753.753 0 0 0-.032 1.181A2.933 2.933 0 0 0 8.949 16h2.717l2.534 1.9a.5.5 0 0 0 .3.1.508.508 0 0 0 .224-.053A.5.5 0 0 0 15 17.5V16h.051A2.949 2.949 0 0 0 18 13.051V10a3 3 0 0 0-2-2.83z"}),i.jsx("path",{d:"M11.051 12A2.952 2.952 0 0 0 14 9.051v-3.1A2.952 2.952 0 0 0 11.051 3h-6.1A2.952 2.952 0 0 0 2 5.949v3.1A2.952 2.952 0 0 0 4.949 12H5v1.5a.5.5 0 0 0 .276.447A.508.508 0 0 0 5.5 14a.5.5 0 0 0 .3-.1L8.334 12z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MessengerDefaultTheme",["CurrentEnvironment","I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a={color:c("CurrentEnvironment").messengerdotcom?"#0099FF":"#0084FF",id:(h||(h=d("I64"))).of_string("196241301102133"),label:"Default Blue",type:"solid"};g["default"]=a}),98);
__d("NaviconFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{fillRule:"nonzero",d:"M452.75 1077.5h6.5a.75.75 0 1 0 0-1.5h-6.5a.75.75 0 1 0 0 1.5zm0 3h6.5a.75.75 0 1 0 0-1.5h-6.5a.75.75 0 1 0 0 1.5zm0 3h6.5a.75.75 0 1 0 0-1.5h-6.5a.75.75 0 1 0 0 1.5z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("ReplyFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{children:[i.jsx("path",{d:"M101 936.5c1.903 0 3.847.017 5.811 3.326.053.09.192.048.189-.057-.213-8.03-6-7.769-6-7.769v-2.75c0-.112-.17-.112-.25-.034l-4.712 4.978a.128.128 0 0 0 0 .182l4.712 4.879c.08.078.25.022.25-.091V936.5z",transform:"translate(354.5 145)"}),i.jsx("path",{fillRule:"nonzero",d:"M101.5 937.007c2.344.065 3.445.655 4.881 3.074.318.538 1.136.29 1.119-.326-.096-3.612-1.284-5.961-3.22-7.245a6.126 6.126 0 0 0-2.136-.888 6.042 6.042 0 0 0-.644-.1v-2.272c0-.673-.751-.733-1.1-.39l-4.725 4.99a.624.624 0 0 0 .011.881l4.704 4.87c.395.388 1.11.137 1.11-.437v-2.157zm-4.857-2.724 3.857-4.075v2.315l.527-.024c.207-.004.524.02.912.102a5.134 5.134 0 0 1 1.788.743c1.388.92 2.339 2.508 2.66 4.948-1.422-1.847-2.873-2.292-5.387-2.292h-.5v2.276l-3.857-3.993z",transform:"translate(354.5 145)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("ShareFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{children:[i.jsx("path",{d:"M102 936.5c-1.903 0-3.847.017-5.811 3.326-.053.09-.192.048-.189-.057.213-8.03 6-7.769 6-7.769v-2.75c0-.112.17-.112.25-.034l4.712 4.978c.05.05.05.132 0 .182l-4.712 4.879c-.08.078-.25.022-.25-.091V936.5z",transform:"translate(354.5 145)"}),i.jsx("path",{fillRule:"nonzero",d:"m101.352 937.011-.293.015c-1.954.125-3 .734-4.258 2.755l-.182.299c-.318.539-1.136.291-1.119-.324.096-3.613 1.284-5.962 3.22-7.246a6.126 6.126 0 0 1 2.136-.888c.235-.05.452-.082.644-.1v-2.272c0-.673.751-.733 1.113-.377l4.7 4.966a.625.625 0 0 1 .009.884l-4.722 4.888c-.385.378-1.1.127-1.1-.447v-2.157l-.148.004zm-4.637 1.151c1.39-1.738 2.83-2.162 5.285-2.162h.5v2.276l3.857-3.993-3.857-4.075v2.315l-.521-.023-.08-.001a5.134 5.134 0 0 0-2.627.845c-1.345.891-2.28 2.412-2.628 4.728l-.03.22.1-.13z",transform:"translate(354.5 145)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("ShareIosFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{fillRule:"nonzero",children:[i.jsx("path",{d:"M100.5 535h.475c.29 0 .525.235.525.524v4.952c0 .29-.235.524-.525.524h-4.95a.524.524 0 0 1-.525-.524v-4.952c0-.29.235-.524.525-.524h.475a.5.5 0 0 0 0-1h-.475c-.843 0-1.525.682-1.525 1.524v4.952c0 .842.682 1.524 1.525 1.524h4.95c.843 0 1.525-.682 1.525-1.524v-4.952c0-.842-.682-1.524-1.525-1.524h-.475a.5.5 0 0 0 0 1zm-.354-2.146a.5.5 0 1 0 .708-.708l-2-2a.5.5 0 0 0-.708 0l-2 2a.5.5 0 1 0 .708.708l1.646-1.647 1.646 1.647z",transform:"translate(357.5 543.5)"}),i.jsx("path",{d:"M99 537.5v-6.875a.5.5 0 0 0-1 0v6.875a.5.5 0 0 0 1 0z",transform:"translate(357.5 543.5)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("getRingbackUrl",["URI"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(a==null)return null;a=new(h||(h=c("URI")))(a);a.addQueryData("users_to_ring",[b]);return a.toString()}g["default"]=a}),98);
__d("useMakeRoomRingback",["I64","LSIntEnum","MWThreadKey.react","Promise","RTWebPreCallHooks","ReQL","getRingbackUrl","promiseDone","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=(l||d("react")).useCallback;function a(){var a=d("RTWebPreCallHooks").useJoinMeetupCallback(),e=(i||(i=c("useReStore")))(),f=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();return m(function(g){var i=g.linkUrl;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(f)).then(function(e){if(e!=null){e=(j||(j=d("I64"))).equal(e.threadType,(k||(k=d("LSIntEnum"))).ofNumber(1))?c("getRingbackUrl")(i,(j||(j=d("I64"))).to_string(e.threadKey)):(c("recoverableViolation")("Cannot ring a non user thread","rtc_www"),i);return(h||(h=b("Promise"))).resolve(a(e))}c("recoverableViolation")("Cannot find thread when trying to ring a user","rtc_www");return(h||(h=b("Promise"))).resolve()}),void 0,function(a){c("recoverableViolation")("Error making a ring back","rtc_www",{error:a.Error})})},[a,f,e])}g["default"]=a}),98);
__d("useRegisterMAWThreadEvent",["I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWMiActOnActThreadReady","MAWThreadEvent","Promise","promiseDone","useMWGetOtherUserContact","useMWIsReadReceiptsDisabledForThread","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(a){var e=a.authorityLevel,f=a.threadKey,g=a.threadType,l=(j||(j=d("I64"))).ge(e,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),m=(i||(i=c("useReStore")))(),n=c("useMWIsReadReceiptsDisabledForThread")(a.threadKey),o=c("useMWGetOtherUserContact")(a.threadKey,a.threadType,["capabilities","capabilities2","contactViewerRelationship","blockedByViewerStatus"]);d("Int64Hooks").useEffectInt64(function(){d("LSMessagingThreadTypeUtil").isSecure(g)&&l&&c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(m.tables,f,"useRegisterMAWThreadEvent",function(a,c,e){d("MAWThreadEvent").setThreadEventHandler(e,o,n);return(h||(h=b("Promise"))).resolve()}))},[f,g,l,m,n,o])}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("mlcEditableSubscription",[],(function(a,b,c,d,e,f){"use strict";function a(a){return{initialValueFn:function(){return a.isEditable()},subscribe:function(b){return a.registerEditableListener(b)}}}f["default"]=a}),66);
__d("useCometLexicalSubscription",["react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useLayoutEffect,k=b.useState;function a(a){var b=(h||(h=c("useUnsafeRef_DEPRECATED")))(a.initialValueFn()),d=k(b.current),e=d[0],f=d[1];j(function(){var c=a.initialValueFn,d=a.subscribe;c=c();b.current!==c&&(b.current=c,f(c));return d(function(a){b.current=a,f(a)})},[a]);return e}g["default"]=a}),98);
__d("CometLexicalContentEditable.react",["CometLexicalContentEditableCommands","Lexical","mlcEditableSubscription","react","stylex","useCometLexicalSubscription"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useLayoutEffect,m=b.useMemo,n=b.useState,o={editor:{color:"xzsf02u",outline:"x1a2a7pz",position:"x1n2onr6",textAlign:"x14wi4xw",$$css:!0}};function a(a){var b=a.ariaAutoComplete,e=a.ariaDescribedBy,f=a.ariaExpanded,g=a.ariaLabel,i=a.ariaLabelledBy,p=a.ariaMultiline,q=a.ariaOwneeID,r=a.ariaRequired,s=a.autoCapitalize,t=a.autoComplete,u=a.autoCorrect,v=a.contentEditableRef,w=a.editor,x=a.isInitiallyFocused,y=x===void 0?!1:x;x=a.role;x=x===void 0?"textbox":x;var z=a.spellCheck;z=z===void 0?!1:z;var A=a.tabIndex,B=a.webDriverTestID;B=a.xstyle;a=n(void 0);var C=a[0],D=a[1];a=n(void 0);var E=a[0],F=a[1];a=c("useCometLexicalSubscription")(m(function(){return c("mlcEditableSubscription")(w)},[w]));l(function(){return w.registerCommand(d("CometLexicalContentEditableCommands").COMET_LEXICAL_ARIA_COMMAND,function(a){Object.prototype.hasOwnProperty.call(a,"activeDescendantID")&&D(a.activeDescendantID);Object.prototype.hasOwnProperty.call(a,"controlsID")&&F(a.controlsID);return!1},d("Lexical").COMMAND_PRIORITY_EDITOR)},[w]);k(function(){y&&w.focus(function(){var a=document.activeElement,b=w.getRootElement();(!(b==null?void 0:b.contains(a))||b!=null||a==null)&&(b==null?void 0:b.focus({preventScroll:!0}))})},[w,y]);return j.jsx("div",{"aria-activedescendant":a?C:null,"aria-autocomplete":a?b:null,"aria-controls":a?E:null,"aria-describedby":e,"aria-expanded":a?x==="combobox"?!!f:null:null,"aria-label":g,"aria-labelledby":i,"aria-multiline":p,"aria-owns":a?q:null,"aria-required":r,autoCapitalize:s,autoComplete:t,autoCorrect:u,className:(h||(h=c("stylex")))(o.editor,B)+" "+(a?"notranslate":""),contentEditable:a,"data-testid":void 0,ref:v,role:a?x:null,spellCheck:z,suppressContentEditableWarning:!0,tabIndex:A})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometLexicalDelightNode",["CometLexicalEntityTextNode"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);a.getType=function(){return"delight"};a.clone=function(b){return new a(b.__text,b.__styles,b.__campaignID,b.__delightAsset,b.__key)};a.importJSON=function(a){return i(a.text,a.styles,a.campaignID,a.delightAsset)};var c=a.prototype;c.exportJSON=function(){return babelHelpers["extends"]({},b.prototype.exportJSON.call(this),{campaignID:this.__campaignID,delightAsset:this.__delightAsset,styles:this.__styles,type:"delight",version:1})};function a(a,c,d,e,f){a=b.call(this,a,f)||this;a.__entityType="TextDelightCampaign";a.__styles=c;a.__campaignID=d;a.__delightAsset=e;return a}c.createDOM=function(a){a=b.prototype.createDOM.call(this,a);var c=this.__delightAsset.id,d=this.__styles,e=d.color;d=d["font-weight"];c!=null&&a.setAttribute("data-delight-asset",c);a.setAttribute("data-delight","true");e!=null&&d!=null&&(a.style.color=e,a.style.fontWeight=d);return a};c.getEntity=function(){return{__UFI__:!0,id:this.__campaignID,isWeak:!1,type:this.__entityType}};c.canInsertTextBefore=function(){return!1};c.canInsertTextAfter=function(){return!1};return a}(d("CometLexicalEntityTextNode").CometLexicalEntityTextNode);function i(a,b,c,d){return new h(a,b,c,d)}function a(a){return a instanceof h}g.CometLexicalDelightNode=h;g.$createLexicalDelightNode=i;g.$isLexicalDelightNode=a}),98);
__d("CometLexicalPlaceholder.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={placeholder:{color:"xi81zsa",overflowX:"x6ikm8r",overflowY:"x10wlt62",pointerEvents:"x47corl",position:"x10l6tqk",start:"x17qophe",left:null,right:null,textOverflow:"xlyipyv",top:"x13vifvy",userSelect:"x87ps6o",whiteSpace:"xuxw1ft",width:"xh8yej3",$$css:!0}};function a(a){var b=a.children;a=a.xstyle;return j.jsx("div",{children:b,className:(h||(h=c("stylex")))(k.placeholder,a)})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometUFIComposerPluginsContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({isComposerFocused:!1,openPopoverCount:0,openPopoverCountChange:function(){},setComposerFocusState:function(){}});g["default"]=b}),98);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("Lexical.prod",["Promise"],(function $module_Lexical_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';var _require_closure_Promise;var ba={},ca={},da={},ea={},fa={},ka={},la={},ma={},oa={},pa={},qa={},ra={},sa={},ta={},ua={},va={},wa={},ya={},za={},Aa={},Ba={},Ca={},Da={},Ga={},Ha={},Ia={},Ja={},Ka={},La={},Ma={},Na={},Oa={},Pa={},Qa={},Ra={},Sa={};
function n(a){var b=new URLSearchParams();b.append("code",a);for(var c=1;c<arguments.length;c++){b.append("v",arguments[c]);}throw Error("Minified Lexical error #"+a+"; visit https://lexical.dev/docs/error?"+b+" for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}
var Ta="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Va=Ta&&"documentMode"in document?document.documentMode:null,t=Ta&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Wa=Ta&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Xa=Ta&&"InputEvent"in window&&!Va?"getTargetRanges"in new window.InputEvent("input"):!1,Ya=Ta&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Za=Ta&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&
!window.MSStream,$a=Ta&&/Android/.test(navigator.userAgent),ab=Ta&&/^(?=.*Chrome).*/i.test(navigator.userAgent),bb=Ta&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!ab,cb=Ya||Za||bb?"\u00a0":"\u200b",db=Wa?"\u00a0":cb,eb=/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/,fb=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,
gb={bold:1,code:16,highlight:128,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},hb={directionless:1,unmergeable:2},lb={center:2,end:6,justify:4,left:1,right:3,start:5},mb={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},nb={normal:0,segmented:2,token:1},ob={0:"normal",2:"segmented",1:"token"},pb=!1,qb=0;function rb(a){qb=a.timeStamp;}function sb(a,b,c){return b.__lexicalLineBreak===a||void 0!==a["__lexicalKey_"+c._key];}
function tb(a){return a.getEditorState().read(function(){var b=u();return null!==b?b.clone():null;});}
function ub(a,b,c){pb=!0;var d=100<performance.now()-qb;try{v(a,function(){var e=u()||tb(a);var f=new Map(),g=a.getRootElement(),h=a._editorState,k=a._blockCursorElement;var m=!1,q="";for(var p=0;p<b.length;p++){var l=b[p],r=l.type,w=l.target,A=vb(w,h);if(!(null===A&&w!==g||y(A)))if("characterData"===r){if(l=d&&B(A))a:{l=e;r=w;var x=A;if(C(l)){var z=l.anchor.getNode();if(z.is(x)&&l.format!==z.getFormat()){l=!1;break a;}}l=3===r.nodeType&&x.isAttached();}l&&(x=wb(a._window),r=l=null,null!==x&&x.anchorNode===
w&&(l=x.anchorOffset,r=x.focusOffset),w=w.nodeValue,null!==w&&xb(A,w,l,r,!1));}else if("childList"===r){m=!0;r=l.addedNodes;for(x=0;x<r.length;x++){z=r[x];var aa=yb(z),W=z.parentNode;null==W||z===k||null!==aa||"BR"===z.nodeName&&sb(z,W,a)||(Wa&&(aa=z.innerText||z.nodeValue)&&(q+=aa),W.removeChild(z));}l=l.removedNodes;r=l.length;if(0<r){x=0;for(z=0;z<r;z++){if(W=l[z],"BR"===W.nodeName&&sb(W,w,a)||k===W)w.appendChild(W),x++;}r!==x&&(w===g&&(A=h._nodeMap.get("root")),f.set(w,A));}}}if(0<f.size){for(var _iterator=
f,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref2;if(_isArray){if(_i>=_iterator.length)break;_ref2=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref2=_i.value;}var _ref3=_ref2;var Ua=_ref3[0];var ja=_ref3[1];if(E(ja))for(f=ja.getChildrenKeys(),g=Ua.firstChild,h=0;h<f.length;h++){k=a.getElementByKey(f[h]),null!==k&&(null==g?(Ua.appendChild(k),g=k):g!==k&&Ua.replaceChild(k,g),g=g.nextSibling);}else B(ja)&&ja.markDirty();}}f=c.takeRecords();if(0<f.length){for(g=0;g<f.length;g++){for(k=f[g],h=k.addedNodes,k=k.target,p=0;p<h.length;p++){A=h[p],w=A.parentNode,null==w||"BR"!==A.nodeName||sb(A,k,a)||w.removeChild(A);}}c.takeRecords();}null!==e&&(m&&(e.dirty=!0,zb(e)),Wa&&Ab(a)&&e.insertRawText(q));});}finally{pb=
!1;}}function Bb(a){var b=a._observer;if(null!==b){var c=b.takeRecords();ub(a,c,b);}}function Cb(a){0===qb&&Db(a).addEventListener("textInput",rb,!0);a._observer=new MutationObserver(function(b,c){ub(a,b,c);});}function Eb(a,b){var c=a.__mode,d=a.__format;a=a.__style;var e=b.__mode,f=b.__format;b=b.__style;return(null===c||c===e)&&(null===d||d===f)&&(null===a||a===b);}function Fb(a,b){var c=a.mergeWithSibling(b),d=F()._normalizedNodes;d.add(a.__key);d.add(b.__key);return c;}
function Gb(a){if(""===a.__text&&a.isSimpleText()&&!a.isUnmergeable())a.remove();else{for(var b;null!==(b=a.getPreviousSibling())&&B(b)&&b.isSimpleText()&&!b.isUnmergeable();){if(""===b.__text)b.remove();else{Eb(b,a)&&(a=Fb(b,a));break;}}for(var c;null!==(c=a.getNextSibling())&&B(c)&&c.isSimpleText()&&!c.isUnmergeable();){if(""===c.__text)c.remove();else{Eb(a,c)&&Fb(a,c);break;}}}}function Hb(a){Ib(a.anchor);Ib(a.focus);return a;}
function Ib(a){for(;"element"===a.type;){var b=a.getNode(),c=a.offset;c===b.getChildrenSize()?(b=b.getChildAtIndex(c-1),c=!0):(b=b.getChildAtIndex(c),c=!1);if(B(b)){a.set(b.__key,c?b.getTextContentSize():0,"text");break;}else if(!E(b))break;a.set(b.__key,c?b.getChildrenSize():0,"element");}}var Jb=1,Kb="function"===typeof queueMicrotask?queueMicrotask:function(a){(_require_closure_Promise||(_require_closure_Promise=require("Promise"))).resolve().then(a);};
function Rb(a){var b=document.activeElement;if(null===b)return!1;var c=b.nodeName;return y(vb(a))&&("INPUT"===c||"TEXTAREA"===c||"true"===b.contentEditable&&null==b.__lexicalEditor);}function Sb(a,b,c){var d=a.getRootElement();try{return null!==d&&d.contains(b)&&d.contains(c)&&null!==b&&!Rb(b)&&Tb(b)===a;}catch(e){return!1;}}function Tb(a){for(;null!=a;){var b=a.__lexicalEditor;if(null!=b)return b;a=Ub(a);}return null;}function Vb(a){return a.isToken()||a.isSegmented();}
function Wb(a){for(;null!=a;){if(3===a.nodeType)return a;a=a.firstChild;}return null;}function Xb(a,b,c){var d=gb[b];if(null!==c&&(a&d)===(c&d))return a;a^=d;"subscript"===b?a&=~gb.superscript:"superscript"===b&&(a&=~gb.subscript);return a;}function Yb(a,b){if(null!=b)a.__key=b;else{G();99<Zb&&n(14);b=F();var c=$b(),d=""+Jb++;c._nodeMap.set(d,a);E(a)?b._dirtyElements.set(d,!0):b._dirtyLeaves.add(d);b._cloneNotNeeded.add(d);b._dirtyType=1;a.__key=d;}}
function ac(a){var b=a.getParent();if(null!==b){var e=a.getWritable();b=b.getWritable();var c=a.getPreviousSibling();a=a.getNextSibling();if(null===c){if(null!==a){var d=a.getWritable();b.__first=a.__key;d.__prev=null;}else b.__first=null;}else{d=c.getWritable();if(null!==a){var f=a.getWritable();f.__prev=d.__key;d.__next=f.__key;}else d.__next=null;e.__prev=null;}null===a?null!==c?(a=c.getWritable(),b.__last=c.__key,a.__next=null):b.__last=null:(a=a.getWritable(),null!==c?(c=c.getWritable(),c.__next=
a.__key,a.__prev=c.__key):a.__prev=null,e.__next=null);b.__size--;e.__parent=null;}}function bc(a){99<Zb&&n(14);var b=a.getLatest(),c=b.__parent,d=$b();var e=F(),f=d._nodeMap;d=e._dirtyElements;if(null!==c)a:for(;null!==c;){if(d.has(c))break a;var g=f.get(c);if(void 0===g)break;d.set(c,!1);c=g.__parent;}b=b.__key;e._dirtyType=1;E(a)?d.set(b,!0):e._dirtyLeaves.add(b);}
function H(a){G();var b=F();var c=b._compositionKey;a!==c&&(b._compositionKey=a,null!==c&&(b=I(c),null!==b&&b.getWritable()),null!==a&&(a=I(a),null!==a&&a.getWritable()));}function cc(){return dc()?null:F()._compositionKey;}function I(a,b){a=(b||$b())._nodeMap.get(a);return void 0===a?null:a;}function yb(a,b){var c=F();a=a["__lexicalKey_"+c._key];return void 0!==a?I(a,b):null;}function vb(a,b){for(;null!=a;){var c=yb(a,b);if(null!==c)return c;a=Ub(a);}return null;}
function ec(a){var b=Object.assign({},a._decorators);return a._pendingDecorators=b;}function fc(a){return a.read(function(){return J().getTextContent();});}function gc(a,b){v(a,function(){var c=$b();if(!c.isEmpty())if("root"===b)J().markDirty();else{c=c._nodeMap;for(var _iterator2=c,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref5;if(_isArray2){if(_i2>=_iterator2.length)break;_ref5=_iterator2[_i2++];}else{_i2=_iterator2.next();if(_i2.done)break;_ref5=_i2.value;}var _ref6=_ref5;var d=_ref6[1];d.markDirty();}}},null===a._pendingEditorState?{tag:"history-merge"}:void 0);}function J(){return $b()._nodeMap.get("root");}function zb(a){G();var b=$b();null!==a&&(a.dirty=!0,a.setCachedNodes(null));b._selection=a;}
function hc(a){var b=F(),c;a:{for(c=a;null!=c;){var d=c["__lexicalKey_"+b._key];if(void 0!==d){c=d;break a;}c=Ub(c);}c=null;}return null===c?(b=b.getRootElement(),a===b?I("root"):null):I(c);}function ic(a){return /[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(a);}function jc(a){var b=[];for(;null!==a;){b.push(a),a=a._parentEditor;}return b;}function kc(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);}
function lc(a,b,c){b=wb(b._window);if(null!==b){var d=b.anchorNode,_b=b,e=_b.anchorOffset,f=_b.focusOffset;if(null!==d&&(b=3===d.nodeType?d.nodeValue:null,d=vb(d),null!==b&&B(d))){if(b===cb&&c){var g=c.length;b=c;f=e=g;}null!==b&&xb(d,b,e,f,a);}}}
function xb(a,b,c,d,e){var f=a;if(f.isAttached()&&(e||!f.isDirty())){var m=f.isComposing(),q=b;(m||e)&&b[b.length-1]===cb&&(q=b.slice(0,-1));b=f.getTextContent();if(e||q!==b)if(""===q){if(H(null),Ya||Za||bb)f.remove();else{var p=F();setTimeout(function(){p.update(function(){f.isAttached()&&f.remove();});},20);}}else{e=f.getParent();b=mc();var g=f.getTextContentSize(),h=cc(),k=f.getKey();f.isToken()||null!==h&&k===h&&!m||C(b)&&(null!==e&&!e.canInsertTextBefore()&&0===b.anchor.offset||b.anchor.key===a.__key&&0===b.anchor.offset&&
!f.canInsertTextBefore()&&!m||b.focus.key===a.__key&&b.focus.offset===g&&!f.canInsertTextAfter()&&!m)?f.markDirty():(a=u(),C(a)&&null!==c&&null!==d&&(a.setTextNodeRange(f,c,f,d),f.isSegmented()&&(c=f.getTextContent(),c=K(c),f.replace(c),f=c)),f.setTextContent(q));}}}
function nc(a,b){if(b.isSegmented())return!0;if(!a.isCollapsed())return!1;a=a.anchor.offset;var c=b.getParentOrThrow(),d=b.isToken();return 0===a?((a=!b.canInsertTextBefore()||!c.canInsertTextBefore()||d)||(b=b.getPreviousSibling(),a=(B(b)||E(b)&&b.isInline())&&!b.canInsertTextAfter()),a):a===b.getTextContentSize()?!b.canInsertTextAfter()||!c.canInsertTextAfter()||d:!1;}
function oc(a,b){void 0===a.__lexicalClassNameCache&&(a.__lexicalClassNameCache={});var c=a.__lexicalClassNameCache,d=c[b];if(void 0!==d)return d;a=a[b];return"string"===typeof a?(a=a.split(" "),c[b]=a):a;}function pc(a,b,c,d,e){0!==c.size&&(c=d.__type,d=d.__key,b=b.get(c),void 0===b&&n(33,c),c=b.klass,b=a.get(c),void 0===b&&(b=new Map(),a.set(c,b)),a=b.get(d),c="destroyed"===a&&"created"===e,(void 0===a||c)&&b.set(d,c?"updated":e));}
function qc(a,b,c){var d=a.getParent(),e=c;null!==d&&(b&&0===c?(e=a.getIndexWithinParent(),a=d):b||c!==a.getChildrenSize()||(e=a.getIndexWithinParent()+1,a=d));return a.getChildAtIndex(b?e-1:e);}function rc(a,b){var c=a.offset;if("element"===a.type)return a=a.getNode(),qc(a,b,c);a=a.getNode();return b&&0===c||!b&&c===a.getTextContentSize()?(c=b?a.getPreviousSibling():a.getNextSibling(),null===c?qc(a.getParentOrThrow(),b,a.getIndexWithinParent()+(b?0:1)):c):null;}
function Ab(a){a=(a=Db(a).event)&&a.inputType;return"insertFromPaste"===a||"insertFromPasteAsQuotation"===a;}function sc(a){return!L(a)&&!a.isLastChild()&&!a.isInline();}function tc(a,b){a=a._keyToDOMMap.get(b);void 0===a&&n(75,b);return a;}function Ub(a){a=a.assignedSlot||a.parentElement;return null!==a&&11===a.nodeType?a.host:a;}function uc(a,b){for(a=a.getParent();null!==a;){if(a.is(b))return!0;a=a.getParent();}return!1;}function Db(a){a=a._window;null===a&&n(78);return a;}
function vc(a){for(a=a.getParentOrThrow();null!==a&&!wc(a);){a=a.getParentOrThrow();}return a;}function wc(a){return L(a)||E(a)&&a.isShadowRoot();}function xc(a){a=a.constructor.clone(a);Yb(a,null);return a;}function yc(a){var b=F();var c=a.constructor.getType();b=b._nodes.get(c);void 0===b&&n(97);b=b.replace;return null!==b?(b=b(a),b instanceof a.constructor||n(98),b):a;}function zc(a,b){a=a.getParent();!L(a)||E(b)||y(b)||n(99);}function Ac(a){return(y(a)||E(a)&&!a.canBeEmpty())&&!a.isInline();}
function Bc(a,b,c){c.style.removeProperty("caret-color");b._blockCursorElement=null;b=a.parentElement;null!==b&&b.removeChild(a);}function wb(a){return Ta?(a||window).getSelection():null;}function Cc(a){return 1===a.nodeType;}function Dc(a){if(y(a)&&!a.isInline())return!0;if(!E(a)||wc(a))return!1;var b=a.getFirstChild();b=null===b||Ec(b)||B(b)||b.isInline();return!a.isInline()&&!1!==a.canBeEmpty()&&b;}
function Fc(a,b){for(;null!==a&&null!==a.getParent()&&!b(a);){a=a.getParentOrThrow();}return b(a)?a:null;}function Gc(a,b,c,d,e,f){for(a=a.getFirstChild();null!==a;){var g=a.__key;a.__parent===b&&(E(a)&&Gc(a,g,c,d,e,f),c.has(g)||f["delete"](g),e.push(g));a=a.getNextSibling();}}
function Hc(a,b,c,d){a=a._nodeMap;b=b._nodeMap;var e=[];for(var _iterator3=d,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref8;if(_isArray3){if(_i3>=_iterator3.length)break;_ref8=_iterator3[_i3++];}else{_i3=_iterator3.next();if(_i3.done)break;_ref8=_i3.value;}var _ref10=_ref8;var f=_ref10[0];var g=b.get(f);void 0===g||g.isAttached()||(E(g)&&Gc(g,f,a,b,e,d),a.has(f)||d["delete"](f),e.push(f));}for(var _i4=0;_i4<e.length;_i4++){var _f=e[_i4];b["delete"](_f);}for(var _iterator4=c,_isArray4=Array.isArray(_iterator4),_i5=0,_iterator4=_isArray4?_iterator4:_iterator4[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref9;if(_isArray4){if(_i5>=_iterator4.length)break;_ref9=_iterator4[_i5++];}else{_i5=_iterator4.next();if(_i5.done)break;_ref9=_i5.value;}var _f2=_ref9;d=b.get(_f2),void 0===d||d.isAttached()||(a.has(_f2)||c["delete"](_f2),b["delete"](_f2));}}var M="",N="",Ic="",Jc,O,Kc,Lc=!1,Mc=!1,Nc,Oc=null,Pc,Zc,$c,ad,bd,cd;
function dd(a,b){var c=$c.get(a);if(null!==b){var d=ed(a);d.parentNode===b&&b.removeChild(d);}ad.has(a)||O._keyToDOMMap["delete"](a);E(c)&&(a=fd(c,$c),gd(a,0,a.length-1,null));void 0!==c&&pc(cd,Kc,Nc,c,"destroyed");}function gd(a,b,c,d){for(;b<=c;++b){var e=a[b];void 0!==e&&dd(e,d);}}function hd(a,b){a.setProperty("text-align",b);}
function id(a,b){var c=Jc.theme.indent;if("string"===typeof c){var d=a.classList.contains(c);0<b&&!d?a.classList.add(c):1>b&&d&&a.classList.remove(c);}c=getComputedStyle(a).getPropertyValue("--lexical-indent-base-value")||"40px";a.style.setProperty("padding-inline-start",0===b?"":"calc("+b+" * "+c+")");}function jd(a,b){a=a.style;0===b?hd(a,""):1===b?hd(a,"left"):2===b?hd(a,"center"):3===b?hd(a,"right"):4===b?hd(a,"justify"):5===b?hd(a,"start"):6===b&&hd(a,"end");}
function kd(a,b,c){var d=ad.get(a);void 0===d&&n(60);var e=d.createDOM(Jc,O);var f=O._keyToDOMMap;e["__lexicalKey_"+O._key]=a;f.set(a,e);B(d)?e.setAttribute("data-lexical-text","true"):y(d)&&e.setAttribute("data-lexical-decorator","true");if(E(d)){a=d.__indent;f=d.__size;0!==a&&id(e,a);if(0!==f){--f;a=fd(d,ad);var g=N;N="";ld(a,d,0,f,e,null);md(d,e);N=g;}a=d.__format;0!==a&&jd(e,a);d.isInline()||nd(null,d,e);sc(d)&&(M+="\n\n",Ic+="\n\n");}else f=d.getTextContent(),y(d)?(g=d.decorate(O,Jc),null!==g&&
od(a,g),e.contentEditable="false"):B(d)&&(d.isDirectionless()||(N+=f)),M+=f,Ic+=f;null!==b&&(null!=c?b.insertBefore(e,c):(c=b.__lexicalLineBreak,null!=c?b.insertBefore(e,c):b.appendChild(e)));pc(cd,Kc,Nc,d,"created");return e;}function ld(a,b,c,d,e,f){var g=M;for(M="";c<=d;++c){kd(a[c],e,f);}sc(b)&&(M+="\n\n");e.__lexicalTextContent=M;M=g+M;}function pd(a,b){a=b.get(a);return Ec(a)||y(a)&&a.isInline();}
function nd(a,b,c){a=null!==a&&(0===a.__size||pd(a.__last,$c));b=0===b.__size||pd(b.__last,ad);a?b||(b=c.__lexicalLineBreak,null!=b&&c.removeChild(b),c.__lexicalLineBreak=null):b&&(b=document.createElement("br"),c.__lexicalLineBreak=b,c.appendChild(b));}
function md(a,b){var c=b.__lexicalDir;if(b.__lexicalDirTextContent!==N||c!==Oc){var f=""===N;if(f)var d=Oc;else d=N,d=eb.test(d)?"rtl":fb.test(d)?"ltr":null;if(d!==c){var g=b.classList,h=Jc.theme;var e=null!==c?h[c]:void 0;var k=null!==d?h[d]:void 0;void 0!==e&&("string"===typeof e&&(e=e.split(" "),e=h[c]=e),g.remove.apply(g,e));null===d||f&&"ltr"===d?b.removeAttribute("dir"):(void 0!==k&&("string"===typeof k&&(c=k.split(" "),k=h[d]=c),void 0!==k&&g.add.apply(g,k)),b.dir=d);Mc||(a.getWritable().__dir=d);}Oc=
d;b.__lexicalDirTextContent=N;b.__lexicalDir=d;}}function fd(a,b){var c=[];for(a=a.__first;null!==a;){var d=b.get(a);void 0===d&&n(101);c.push(a);a=d.__next;}return c;}
function qd(a,b){var c=$c.get(a),d=ad.get(a);void 0!==c&&void 0!==d||n(61);var e=Lc||Zc.has(a)||Pc.has(a);var f=tc(O,a);if(c===d&&!e)return E(c)?(d=f.__lexicalTextContent,void 0!==d&&(M+=d,Ic+=d),d=f.__lexicalDirTextContent,void 0!==d&&(N+=d)):(d=c.getTextContent(),B(c)&&!c.isDirectionless()&&(N+=d),Ic+=d,M+=d),f;c!==d&&e&&pc(cd,Kc,Nc,d,"updated");if(d.updateDOM(c,f,Jc))return d=kd(a,null,null),null===b&&n(62),b.replaceChild(d,f),dd(a,null),d;if(E(c)&&E(d)){a=d.__indent;a!==c.__indent&&id(f,a);a=
d.__format;a!==c.__format&&jd(f,a);if(e){a=N;N="";e=M;var g=c.__size,h=d.__size;M="";if(1===g&&1===h){var k=c.__first;b=d.__first;if(k===b)qd(k,f);else{var m=ed(k);b=kd(b,null,null);f.replaceChild(b,m);dd(k,null);}}else{b=fd(c,$c);var q=fd(d,ad);if(0===g)0!==h&&ld(q,d,0,h-1,f,null);else if(0===h)0!==g&&(k=null==f.__lexicalLineBreak,gd(b,0,g-1,k?null:f),k&&(f.textContent=""));else{var p=b;b=q;q=g-1;g=h-1;var r=f.firstChild,w=0;for(h=0;w<=q&&h<=g;){var l=p[w];var A=b[h];if(l===A)r=rd(qd(A,f)),w++,h++;else
{void 0===k&&(k=new Set(p));void 0===m&&(m=new Set(b));var x=m.has(l),z=k.has(A);x?(z?(l=tc(O,A),l===r?r=rd(qd(A,f)):(null!=r?f.insertBefore(l,r):f.appendChild(l),qd(A,f)),w++):kd(A,f,r),h++):(r=rd(ed(l)),dd(l,f),w++);}}k=w>q;m=h>g;k&&!m?(k=b[g+1],k=void 0===k?null:O.getElementByKey(k),ld(b,d,h,g,f,k)):m&&!k&&gd(p,w,q,f);}}sc(d)&&(M+="\n\n");f.__lexicalTextContent=M;M=e+M;md(d,f);N=a;L(d)||d.isInline()||nd(c,d,f);}sc(d)&&(M+="\n\n",Ic+="\n\n");}else c=d.getTextContent(),y(d)?(e=d.decorate(O,Jc),null!==
e&&od(a,e)):B(d)&&!d.isDirectionless()&&(N+=c),M+=c,Ic+=c;!Mc&&L(d)&&d.__cachedText!==Ic&&(d.getWritable().__cachedText=Ic);return f;}function od(a,b){var c=O._pendingDecorators,d=O._decorators;if(null===c){if(d[a]===b)return;c=ec(O);}c[a]=b;}function rd(a){a=a.nextSibling;null!==a&&a===O._blockCursorElement&&(a=a.nextSibling);return a;}function ed(a){var b=bd.get(a);void 0===b&&n(75,a);return b;}
var sd=Object.freeze({}),zd=[["keydown",td],["pointerdown",ud],["compositionstart",vd],["compositionend",wd],["input",xd],["click",yd],["cut",sd],["copy",sd],["dragstart",sd],["dragover",sd],["dragend",sd],["paste",sd],["focus",sd],["blur",sd],["drop",sd]];Xa&&zd.push(["beforeinput",function(a,b){return Ad(a,b);}]);var Bd=0,Cd=0,Dd=0,Ed=null,Fd=0,Gd=!1,Hd=!1,Id=!1,Jd=!1,Kd=[0,"",0,"root",0];
function Ld(a,b,c,d,e){var f=a.anchor,g=a.focus,h=f.getNode();var k=F();var m=wb(k._window),q=null!==m?m.anchorNode:null,p=f.key;k=k.getElementByKey(p);var l=c.length;return p!==g.key||!B(h)||(!e&&(!Xa||Dd<d+50)||h.isDirty()&&2>l||ic(c))&&f.offset!==g.offset&&!h.isComposing()||Vb(h)||h.isDirty()&&1<l||(e||!Xa)&&null!==k&&!h.isComposing()&&q!==Wb(k)||null!==m&&null!==b&&(!b.collapsed||b.startContainer!==m.anchorNode||b.startOffset!==m.anchorOffset)||h.getFormat()!==a.format||h.getStyle()!==a.style||
nc(a,h);}function Md(a,b){return null!==a&&null!==a.nodeValue&&3===a.nodeType&&0!==b&&b!==a.nodeValue.length;}
function Nd(a,b,c){var d=a.anchorNode,e=a.anchorOffset,f=a.focusNode,g=a.focusOffset;if(Gd&&(Gd=!1,Md(d,e)&&Md(f,g)))return;v(b,function(){if(!c)zb(null);else if(Sb(b,d,f)){var h=u();if(C(h)){var k=h.anchor,m=k.getNode();if(h.isCollapsed()){"Range"===a.type&&a.anchorNode===a.focusNode&&(h.dirty=!0);var q=Db(b).event;q=q?q.timeStamp:performance.now();var _Kd=Kd,A=_Kd[0],x=_Kd[1],z=_Kd[2],aa=_Kd[3],W=_Kd[4];var p=J();p=!1===b.isComposing()&&""===p.getTextContent();q<W+200&&k.offset===z&&k.key===aa?(h.format=A,h.style=x):"text"===k.type?(B(m)||n(141),
h.format=m.getFormat(),h.style=m.getStyle()):"element"!==k.type||p||(h.format=0,h.style="");}else{var l=k.key,r=h.focus.key;k=h.getNodes();m=k.length;var w=h.isBackward();q=w?g:e;p=w?e:g;var _A=w?r:l;l=w?l:r;r=255;w=!1;for(var _x=0;_x<m;_x++){var _z=k[_x],_aa=_z.getTextContentSize();if(B(_z)&&0!==_aa&&!(0===_x&&_z.__key===_A&&q===_aa||_x===m-1&&_z.__key===l&&0===p)&&(w=!0,r&=_z.getFormat(),0===r))break;}h.format=w?r:0;}}R(b,ba,void 0);}});}
function yd(a,b){v(b,function(){var c=u();var d=wb(b._window);var e=mc();if(d)if(C(c)){var g=c.anchor;var f=g.getNode();"element"===g.type&&0===g.offset&&c.isCollapsed()&&!L(f)&&1===J().getChildrenSize()&&f.getTopLevelElementOrThrow().isEmpty()&&null!==e&&c.is(e)?(d.removeAllRanges(),c.dirty=!0):3!==a.detail||c.isCollapsed()||(d=c.focus.getNode(),f!==d&&(E(f)?f.select(0):f.getParentOrThrow().select(0)));}else"touch"===a.pointerType&&(f=d.anchorNode,null!==f&&(f=f.nodeType,1===f||3===f))&&(d=Od(e,d,b,a),
zb(d));R(b,ca,a);});}function ud(a,b){var c=a.target;a=a.pointerType;c instanceof Node&&"touch"!==a&&v(b,function(){y(vb(c))||(Hd=!0);});}function Pd(a){if(!a.getTargetRanges)return null;a=a.getTargetRanges();return 0===a.length?null:a[0];}function Qd(a,b){return a!==b||E(a)||E(b)||!a.isToken()||!b.isToken();}
function Ad(a,b){var c=a.inputType,d=Pd(a);"deleteCompositionText"===c||Wa&&Ab(b)||"insertCompositionText"!==c&&v(b,function(){var e=u();if("deleteContentBackward"===c){if(null===e){var f=mc();if(!C(f))return;zb(f.clone());}if(C(e)){$a&&H(e.anchor.key);229===Cd&&a.timeStamp<Bd+30&&b.isComposing()&&e.anchor.key===e.focus.key?(H(null),Bd=0,setTimeout(function(){v(b,function(){H(null);});},30),C(e)&&(f=e.anchor.getNode(),f.markDirty(),e.format=f.getFormat(),B(f)||n(142),e.style=f.getStyle()),1>=e.anchor.getNode().getTextContent().length&&(
a.preventDefault(),R(b,da,!0))):(H(null),a.preventDefault(),R(b,da,!0));return;}}if(C(e)){f=a.data;null!==Ed&&lc(!1,b,Ed);e.dirty&&null===Ed||!e.isCollapsed()||L(e.anchor.getNode())||null===d||e.applyDOMRange(d);Ed=null;var g=e.focus,h=e.anchor.getNode();g=g.getNode();if("insertText"===c||"insertTranspose"===c)"\n"===f?(a.preventDefault(),R(b,ea,!1)):"\n\n"===f?(a.preventDefault(),R(b,fa,void 0)):null==f&&a.dataTransfer?(f=a.dataTransfer.getData("text/plain"),a.preventDefault(),e.insertRawText(f)):
null!=f&&Ld(e,d,f,a.timeStamp,!0)?(a.preventDefault(),R(b,ka,f)):Ed=f,Dd=a.timeStamp;else switch(a.preventDefault(),c){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":R(b,ka,a);break;case"insertFromComposition":H(null);R(b,ka,a);break;case"insertLineBreak":H(null);R(b,ea,!1);break;case"insertParagraph":H(null);Id&&!Za?(Id=!1,R(b,ea,!1)):R(b,fa,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":R(b,la,a);break;case"deleteByComposition":Qd(h,g)&&R(b,
ma,a);break;case"deleteByDrag":case"deleteByCut":R(b,ma,a);break;case"deleteContent":R(b,da,!1);break;case"deleteWordBackward":R(b,oa,!0);break;case"deleteWordForward":R(b,oa,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":R(b,pa,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":R(b,pa,!1);break;case"formatStrikeThrough":R(b,qa,"strikethrough");break;case"formatBold":R(b,qa,"bold");break;case"formatItalic":R(b,qa,"italic");
break;case"formatUnderline":R(b,qa,"underline");break;case"historyUndo":R(b,ra,void 0);break;case"historyRedo":R(b,sa,void 0);}}});}
function xd(a,b){a.stopPropagation();v(b,function(){var c=u(),d=a.data,e=Pd(a);if(null!=d&&C(c)&&Ld(c,e,d,a.timeStamp,!1)){Jd&&(Rd(b,d),Jd=!1);var f=c.anchor,g=f.getNode();e=wb(b._window);if(null===e)return;var h=f.offset;if(f=Xa&&!c.isCollapsed()&&B(g)&&null!==e.anchorNode)g=g.getTextContent().slice(0,h)+d+g.getTextContent().slice(h+c.focus.offset),e=e.anchorNode,f=g===(3===e.nodeType?e.nodeValue:null);f||R(b,ka,d);d=d.length;Wa&&1<d&&"insertCompositionText"===a.inputType&&!b.isComposing()&&(c.anchor.offset-=
d);Ya||Za||bb||!b.isComposing()||(Bd=0,H(null));}else lc(!1,b,null!==d?d:void 0),Jd&&(Rd(b,d||void 0),Jd=!1);G();c=F();Bb(c);});Ed=null;}function vd(a,b){v(b,function(){var c=u();if(C(c)&&!b.isComposing()){var d=c.anchor,e=c.anchor.getNode();H(d.key);(a.timeStamp<Bd+30||"element"===d.type||!c.isCollapsed()||e.getFormat()!==c.format||B(e)&&e.getStyle()!==c.style)&&R(b,ka,db);}});}
function Rd(a,b){var c=a._compositionKey;H(null);if(null!==c&&null!=b){if(""===b){b=I(c);a=Wb(a.getElementByKey(c));null!==a&&null!==a.nodeValue&&B(b)&&xb(b,a.nodeValue,null,null,!0);return;}if("\n"===b[b.length-1]&&(c=u(),C(c))){b=c.focus;c.anchor.set(b.key,b.offset,b.type);R(a,Ba,null);return;}}lc(!0,a,b);}function wd(a,b){Wa?Jd=!0:v(b,function(){Rd(b,a.data);});}
function td(a,b){Bd=a.timeStamp;Cd=a.keyCode;if(!b.isComposing()){var c=a.keyCode,d=a.shiftKey,e=a.ctrlKey,f=a.metaKey,g=a.altKey;if(!R(b,ta,a)){if(39!==c||e||f||g){if(39!==c||g||d||!e&&!f){if(37!==c||e||f||g){if(37!==c||g||d||!e&&!f){if(38!==c||e||f){if(40!==c||e||f){if(13===c&&d)Id=!0,R(b,Ba,a);else if(32===c)R(b,Ca,a);else if(t&&e&&79===c)a.preventDefault(),Id=!0,R(b,ea,!0);else if(13!==c||d){var h=t?g||f?!1:8===c||72===c&&e:e||g||f?!1:8===c;h?8===c?R(b,Da,a):(a.preventDefault(),R(b,da,!0)):27===c?R(b,Ga,
a):(h=t?d||g||f?!1:46===c||68===c&&e:e||g||f?!1:46===c,h?46===c?R(b,Ha,a):(a.preventDefault(),R(b,da,!1)):8===c&&(t?g:e)?(a.preventDefault(),R(b,oa,!0)):46===c&&(t?g:e)?(a.preventDefault(),R(b,oa,!1)):t&&f&&8===c?(a.preventDefault(),R(b,pa,!0)):t&&f&&46===c?(a.preventDefault(),R(b,pa,!1)):66===c&&!g&&(t?f:e)?(a.preventDefault(),R(b,qa,"bold")):85===c&&!g&&(t?f:e)?(a.preventDefault(),R(b,qa,"underline")):73===c&&!g&&(t?f:e)?(a.preventDefault(),R(b,qa,"italic")):9!==c||g||e||f?90===c&&!d&&(t?f:e)?(a.preventDefault(),
R(b,ra,void 0)):(h=t?90===c&&f&&d:89===c&&e||90===c&&e&&d,h?(a.preventDefault(),R(b,sa,void 0)):Sd(b._editorState._selection)?(h=d?!1:67===c?t?f:e:!1,h?(a.preventDefault(),R(b,Na,a)):(h=d?!1:88===c?t?f:e:!1,h?(a.preventDefault(),R(b,Oa,a)):65===c&&(t?f:e)&&(a.preventDefault(),R(b,Pa,a)))):!Wa&&65===c&&(t?f:e)&&(a.preventDefault(),R(b,Pa,a))):R(b,Ia,a));}else Id=!1,R(b,Ba,a);}else R(b,Aa,a);}else R(b,za,a);}else R(b,ya,a);}else R(b,wa,a);}else R(b,va,a);}else R(b,ua,a);(e||d||g||f)&&R(b,Sa,a);}}}
function Td(a){var b=a.__lexicalEventHandles;void 0===b&&(b=[],a.__lexicalEventHandles=b);return b;}var Ud=new Map();
function Vd(a){var b=a.target;var c=wb(null==b?null:9===b.nodeType?b.defaultView:b.ownerDocument.defaultView);if(null!==c){var d=Tb(c.anchorNode);if(null!==d){Hd&&(Hd=!1,v(d,function(){var h=mc(),k=c.anchorNode;null!==k&&(k=k.nodeType,1===k||3===k)&&(h=Od(h,c,d,a),zb(h));}));b=jc(d);b=b[b.length-1];var e=b._key,f=Ud.get(e),g=f||b;g!==d&&Nd(c,g,!1);Nd(c,d,!0);d!==b?Ud.set(e,d):f&&Ud["delete"](e);}}}
function Wd(a,b){0===Fd&&a.ownerDocument.addEventListener("selectionchange",Vd);Fd++;a.__lexicalEditor=b;var c=Td(a);var _loop=function _loop(d){var _zd$d=zd[d],e=_zd$d[0],f=_zd$d[1],g="function"===typeof f?function(h){!0!==h._lexicalHandled&&(h._lexicalHandled=!0,b.isEditable()&&f(h,b));}:function(h){if(!0!==h._lexicalHandled&&(h._lexicalHandled=!0,b.isEditable()))switch(e){case"cut":return R(b,Oa,h);case"copy":return R(b,Na,h);case"paste":return R(b,la,h);case"dragstart":return R(b,Ka,h);case"dragover":return R(b,La,h);case"dragend":return R(b,
Ma,h);case"focus":return R(b,Qa,h);case"blur":return R(b,Ra,h);case"drop":return R(b,Ja,h);}};a.addEventListener(e,g);c.push(function(){a.removeEventListener(e,g);});};for(var d=0;d<zd.length;d++){_loop(d);}}
function Xd(a,b,c){G();var d=a.__key;var e=a.getParent();if(null!==e){var f=u();if(C(f)&&E(a)){var _f3=f,g=_f3.anchor,h=_f3.focus;var k=g.getNode();var m=h.getNode();uc(k,a)&&g.set(a.__key,0,"element");uc(m,a)&&h.set(a.__key,0,"element");}k=f;m=!1;if(C(k)&&b){f=k.anchor;var q=k.focus;f.key===d&&(Yd(f,a,e,a.getPreviousSibling(),a.getNextSibling()),m=!0);q.key===d&&(Yd(q,a,e,a.getPreviousSibling(),a.getNextSibling()),m=!0);}else Sd(k)&&b&&a.isSelected()&&a.selectPrevious();C(k)&&b&&!m?(d=a.getIndexWithinParent(),
ac(a),Zd(k,e,d,-1)):ac(a);c||wc(e)||e.canBeEmpty()||!e.isEmpty()||Xd(e,b);b&&L(e)&&e.isEmpty()&&e.selectEnd();}}var
$d=function(){$d.getType=function getType(){n(64,this.name);};$d.clone=function clone(){n(65,this.name);};function $d(a){this.__type=this.constructor.getType();this.__next=this.__prev=this.__parent=null;Yb(this,a);}var _proto=$d.prototype;_proto.getType=function getType(){return this.__type;};_proto.isInline=function isInline(){n(137,this.constructor.name);};_proto.isAttached=function isAttached(){for(var a=this.__key;null!==a;){if("root"===a)return!0;a=I(a);if(null===a)break;a=a.__parent;}return!1;};_proto.isSelected=function isSelected(a){var _this5=this;a=a||u();if(null==a)return!1;var b=a.getNodes().some(function(c){return c.__key===_this5.__key;});return B(this)?b:C(a)&&"element"===a.anchor.type&&
"element"===a.focus.type&&a.anchor.key===a.focus.key&&a.anchor.offset===a.focus.offset?!1:b;};_proto.getKey=function getKey(){return this.__key;};_proto.getIndexWithinParent=function getIndexWithinParent(){var a=this.getParent();if(null===a)return-1;a=a.getFirstChild();var b=0;for(;null!==a;){if(this.is(a))return b;b++;a=a.getNextSibling();}return-1;};_proto.getParent=function getParent(){var a=this.getLatest().__parent;return null===a?null:I(a);};_proto.getParentOrThrow=function getParentOrThrow(){var a=this.getParent();null===a&&n(66,this.__key);return a;};_proto.getTopLevelElement=function getTopLevelElement(){var a=this;for(;null!==a;){var b=a.getParent();
if(wc(b))return E(a)||n(138),a;a=b;}return null;};_proto.getTopLevelElementOrThrow=function getTopLevelElementOrThrow(){var a=this.getTopLevelElement();null===a&&n(67,this.__key);return a;};_proto.getParents=function getParents(){var a=[],b=this.getParent();for(;null!==b;){a.push(b),b=b.getParent();}return a;};_proto.getParentKeys=function getParentKeys(){var a=[],b=this.getParent();for(;null!==b;){a.push(b.__key),b=b.getParent();}return a;};_proto.getPreviousSibling=function getPreviousSibling(){var a=this.getLatest().__prev;return null===a?null:I(a);};_proto.getPreviousSiblings=function getPreviousSiblings(){var a=[];var b=this.getParent();if(null===b)return a;for(b=b.getFirstChild();null!==
b&&!b.is(this);){a.push(b),b=b.getNextSibling();}return a;};_proto.getNextSibling=function getNextSibling(){var a=this.getLatest().__next;return null===a?null:I(a);};_proto.getNextSiblings=function getNextSiblings(){var a=[],b=this.getNextSibling();for(;null!==b;){a.push(b),b=b.getNextSibling();}return a;};_proto.getCommonAncestor=function getCommonAncestor(a){var b=this.getParents();var c=a.getParents();E(this)&&b.unshift(this);E(a)&&c.unshift(a);a=b.length;var d=c.length;if(0===a||0===d||b[a-1]!==c[d-1])return null;c=new Set(c);for(d=0;d<a;d++){var e=b[d];if(c.has(e))return e;}return null;};_proto.is=function is(a){return null==
a?!1:this.__key===a.__key;};_proto.isBefore=function isBefore(a){if(this===a)return!1;if(a.isParentOf(this))return!0;if(this.isParentOf(a))return!1;var b=this.getCommonAncestor(a);var c=this;for(;;){var d=c.getParentOrThrow();if(d===b){d=c.getIndexWithinParent();break;}c=d;}for(c=a;;){a=c.getParentOrThrow();if(a===b){b=c.getIndexWithinParent();break;}c=a;}return d<b;};_proto.isParentOf=function isParentOf(a){var b=this.__key;if(b===a.__key)return!1;for(;null!==a;){if(a.__key===b)return!0;a=a.getParent();}return!1;};_proto.getNodesBetween=function getNodesBetween(a){var b=this.isBefore(a),c=
[],d=new Set();for(var e=this;null!==e;){var f=e.__key;d.has(f)||(d.add(f),c.push(e));if(e===a)break;f=E(e)?b?e.getFirstChild():e.getLastChild():null;if(null!==f)e=f;else if(f=b?e.getNextSibling():e.getPreviousSibling(),null!==f)e=f;else{e=e.getParentOrThrow();d.has(e.__key)||c.push(e);if(e===a)break;f=e;do{if(null===f&&n(68),e=b?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),null!==f)null!==e||d.has(f.__key)||c.push(f);else break;}while(null===e);}}b||c.reverse();return c;};_proto.isDirty=function isDirty(){var a=
F()._dirtyLeaves;return null!==a&&a.has(this.__key);};_proto.getLatest=function getLatest(){var a=I(this.__key);null===a&&n(113);return a;};_proto.getWritable=function getWritable(){G();var a=$b(),b=F();a=a._nodeMap;var c=this.__key,d=this.getLatest(),e=d.__parent;b=b._cloneNotNeeded;var f=u();null!==f&&f.setCachedNodes(null);if(b.has(c))return bc(d),d;f=d.constructor.clone(d);f.__parent=e;f.__next=d.__next;f.__prev=d.__prev;E(d)&&E(f)?(f.__first=d.__first,f.__last=d.__last,f.__size=d.__size,f.__indent=d.__indent,f.__format=d.__format,f.__dir=d.__dir):B(d)&&
B(f)&&(f.__format=d.__format,f.__style=d.__style,f.__mode=d.__mode,f.__detail=d.__detail);b.add(c);f.__key=c;bc(f);a.set(c,f);return f;};_proto.getTextContent=function getTextContent(){return"";};_proto.getTextContentSize=function getTextContentSize(){return this.getTextContent().length;};_proto.createDOM=function createDOM(){n(70);};_proto.updateDOM=function updateDOM(){n(71);};_proto.exportDOM=function exportDOM(a){return{element:this.createDOM(a._config,a)};};_proto.exportJSON=function exportJSON(){n(72);};$d.importJSON=function importJSON(){n(18,this.name);};$d.transform=function transform(){return null;};_proto.remove=function remove(a){Xd(this,!0,a);};_proto.replace=function replace(a,b){G();var c=u();null!==c&&(c=c.clone());zc(this,a);var d=this.getLatest(),
e=this.__key,f=a.__key,g=a.getWritable();a=this.getParentOrThrow().getWritable();var h=a.__size;ac(g);var k=d.getPreviousSibling(),m=d.getNextSibling(),q=d.__prev,p=d.__next,l=d.__parent;Xd(d,!1,!0);null===k?a.__first=f:k.getWritable().__next=f;g.__prev=q;null===m?a.__last=f:m.getWritable().__prev=f;g.__next=p;g.__parent=l;a.__size=h;b&&(E(this)&&E(g)||n(139),this.getChildren().forEach(function(r){g.append(r);}));C(c)&&(zb(c),b=c.anchor,c=c.focus,b.key===e&&ae(b,g),c.key===e&&ae(c,g));cc()===e&&H(f);return g;};_proto.insertAfter=function insertAfter(a,
b){if(b===void 0){b=!0;}G();zc(this,a);var c=this.getWritable();var d=a.getWritable();var e=d.getParent();var f=u();var g=!1,h=!1;if(null!==e){var k=a.getIndexWithinParent();ac(d);C(f)&&(h=e.__key,g=f.anchor,e=f.focus,g="element"===g.type&&g.key===h&&g.offset===k+1,h="element"===e.type&&e.key===h&&e.offset===k+1);}e=this.getNextSibling();k=this.getParentOrThrow().getWritable();var m=d.__key,q=c.__next;null===e?k.__last=m:e.getWritable().__prev=m;k.__size++;c.__next=m;d.__next=q;d.__prev=c.__key;d.__parent=c.__parent;
b&&C(f)&&(b=this.getIndexWithinParent(),Zd(f,k,b+1),c=k.__key,g&&f.anchor.set(c,b+2,"element"),h&&f.focus.set(c,b+2,"element"));return a;};_proto.insertBefore=function insertBefore(a,b){if(b===void 0){b=!0;}G();zc(this,a);var c=this.getWritable();var d=a.getWritable(),e=d.__key;ac(d);var f=this.getPreviousSibling(),g=this.getParentOrThrow().getWritable(),h=c.__prev,k=this.getIndexWithinParent();null===f?g.__first=e:f.getWritable().__next=e;g.__size++;c.__prev=e;d.__prev=h;d.__next=c.__key;d.__parent=c.__parent;c=u();b&&C(c)&&(b=this.getParentOrThrow(),
Zd(c,b,k));return a;};_proto.isParentRequired=function isParentRequired(){return!1;};_proto.createParentElementNode=function createParentElementNode(){return be();};_proto.selectStart=function selectStart(){return this.selectPrevious();};_proto.selectEnd=function selectEnd(){return this.selectNext(0,0);};_proto.selectPrevious=function selectPrevious(a,b){G();var c=this.getPreviousSibling(),d=this.getParentOrThrow();return null===c?d.select(0,0):E(c)?c.select():B(c)?c.select(a,b):(a=c.getIndexWithinParent()+1,d.select(a,a));};_proto.selectNext=function selectNext(a,b){G();var c=this.getNextSibling(),d=this.getParentOrThrow();return null===c?d.select():E(c)?c.select(0,0):B(c)?c.select(a,b):(a=
c.getIndexWithinParent(),d.select(a,a));};_proto.markDirty=function markDirty(){this.getWritable();};return $d;}();function ce(a,b,c){c=c||b.getParentOrThrow().getLastChild();var d=b;for(b=[b];d!==c;){d.getNextSibling()||n(140),d=d.getNextSibling(),b.push(d);}for(var _iterator5=b,_isArray5=Array.isArray(_iterator5),_i6=0,_iterator5=_isArray5?_iterator5:_iterator5[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref11;if(_isArray5){if(_i6>=_iterator5.length)break;_ref11=_iterator5[_i6++];}else{_i6=_iterator5.next();if(_i6.done)break;_ref11=_i6.value;}var e=_ref11;a=a.insertAfter(e);}}var
de=function(_$d){babelHelpers.inheritsLoose(de,_$d);de.getType=function getType(){return"linebreak";};de.clone=function clone(a){return new de(a.__key);};function de(a){return _$d.call(this,a)||this;}var _proto2=de.prototype;_proto2.getTextContent=function getTextContent(){return"\n";};_proto2.createDOM=function createDOM(){return document.createElement("br");};_proto2.updateDOM=function updateDOM(){return!1;};de.importDOM=function importDOM(){return{br:function br(a){a:{var b=a.parentElement;if(null!==b){var c=b.firstChild;if(c===a||c.nextSibling===a&&ee(c))if(b=b.lastChild,b===a||b.previousSibling===a&&ee(b)){a=!0;break a;}}a=!1;}return a?null:{conversion:fe,priority:0};}};};de.importJSON=function importJSON(){return ge();};_proto2.exportJSON=function exportJSON(){return{type:"linebreak",
version:1};};return de;}($d);function fe(){return{node:ge()};}function ge(){return yc(new de());}function Ec(a){return a instanceof de;}function ee(a){return 3===a.nodeType&&/^( |\t|\r?\n)+$/.test(a.textContent||"");}function he(a,b){return b&16?"code":b&128?"mark":b&32?"sub":b&64?"sup":null;}function ie(a,b){return b&1?"strong":b&2?"em":"span";}
function je(a,b,c,d,e){var _a,_a2,_a3;a=d.classList;d=oc(e,"base");void 0!==d&&(_a=a).add.apply(_a,d);d=oc(e,"underlineStrikethrough");var f=!1,g=b&8&&b&4;var h=c&8&&c&4;void 0!==d&&(h?(f=!0,g||(_a2=a).add.apply(_a2,d)):g&&(_a3=a).remove.apply(_a3,d));for(var k in gb){var _a4,_a5,_a6;h=gb[k],d=oc(e,k),void 0!==d&&(c&h?!f||"underline"!==k&&"strikethrough"!==k?(0===(b&h)||g&&"underline"===k||"strikethrough"===k)&&(_a4=a).add.apply(_a4,d):b&h&&(_a5=a).remove.apply(_a5,d):b&h&&(_a6=a).remove.apply(_a6,d));}}
function ke(a,b,c){var d=b.firstChild;c=c.isComposing();a+=c?cb:"";if(null==d)b.textContent=a;else if(b=d.nodeValue,b!==a)if(c||Wa){c=b.length;var e=a.length,f=0,g=0;for(;f<c&&f<e&&b[f]===a[f];){f++;}for(;g+f<c&&g+f<e&&b[c-g-1]===a[e-g-1];){g++;}a=[f,c-f-g,a.slice(f,e-g)];var _a7=a,h=_a7[0],k=_a7[1],m=_a7[2];0!==k&&d.deleteData(h,k);d.insertData(h,m);}else d.nodeValue=a;}function le(a,b){b=document.createElement(b);b.appendChild(a);return b;}var
me=function(_$d2){babelHelpers.inheritsLoose(me,_$d2);me.getType=function getType(){return"text";};me.clone=function clone(a){return new me(a.__text,a.__key);};function me(a,b){var _this;_this=_$d2.call(this,b)||this;_this.__text=a;_this.__format=0;_this.__style="";_this.__detail=_this.__mode=0;return _this;}var _proto3=me.prototype;_proto3.getFormat=function getFormat(){return this.getLatest().__format;};_proto3.getDetail=function getDetail(){return this.getLatest().__detail;};_proto3.getMode=function getMode(){var a=this.getLatest();return ob[a.__mode];};_proto3.getStyle=function getStyle(){return this.getLatest().__style;};_proto3.isToken=function isToken(){return 1===this.getLatest().__mode;};_proto3.isComposing=function isComposing(){return this.__key===cc();};_proto3.isSegmented=function isSegmented(){return 2===this.getLatest().__mode;};_proto3.isDirectionless=function isDirectionless(){return 0!==(
this.getLatest().__detail&1);};_proto3.isUnmergeable=function isUnmergeable(){return 0!==(this.getLatest().__detail&2);};_proto3.hasFormat=function hasFormat(a){a=gb[a];return 0!==(this.getFormat()&a);};_proto3.isSimpleText=function isSimpleText(){return"text"===this.__type&&0===this.__mode;};_proto3.getTextContent=function getTextContent(){return this.getLatest().__text;};_proto3.getFormatFlags=function getFormatFlags(a,b){var c=this.getLatest().__format;return Xb(c,a,b);};_proto3.canHaveFormat=function canHaveFormat(){return!0;};_proto3.createDOM=function createDOM(a){var b=this.__format,c=he(this,b);var d=ie(this,b),e=document.createElement(null===c?d:c),f=e;this.hasFormat("code")&&e.setAttribute("spellcheck","false");
null!==c&&(f=document.createElement(d),e.appendChild(f));c=f;ke(this.__text,c,this);a=a.theme.text;void 0!==a&&je(d,0,b,c,a);b=this.__style;""!==b&&(e.style.cssText=b);return e;};_proto3.updateDOM=function updateDOM(a,b,c){var d=this.__text;var e=a.__format,f=this.__format,g=he(this,e);var h=he(this,f);var k=ie(this,e);var m=ie(this,f);if((null===g?k:g)!==(null===h?m:h))return!0;if(g===h&&k!==m)return e=b.firstChild,null==e&&n(48),a=g=document.createElement(m),ke(d,a,this),c=c.theme.text,void 0!==c&&je(m,0,f,a,c),b.replaceChild(g,
e),!1;k=b;null!==h&&null!==g&&(k=b.firstChild,null==k&&n(49));ke(d,k,this);c=c.theme.text;void 0!==c&&e!==f&&je(m,e,f,k,c);f=this.__style;a.__style!==f&&(b.style.cssText=f);return!1;};me.importDOM=function importDOM(){return{"#text":function text(){return{conversion:ne,priority:0};},b:function b(){return{conversion:oe,priority:0};},code:function code(){return{conversion:pe,priority:0};},em:function em(){return{conversion:pe,priority:0};},i:function i(){return{conversion:pe,priority:0};},s:function s(){return{conversion:pe,priority:0};},span:function span(){return{conversion:qe,priority:0};},strong:function strong(){return{conversion:pe,priority:0};},
sub:function sub(){return{conversion:pe,priority:0};},sup:function sup(){return{conversion:pe,priority:0};},u:function u(){return{conversion:pe,priority:0};}};};me.importJSON=function importJSON(a){var b=K(a.text);b.setFormat(a.format);b.setDetail(a.detail);b.setMode(a.mode);b.setStyle(a.style);return b;};_proto3.exportDOM=function exportDOM(a){var _$d2$prototype$export=_$d2.prototype.exportDOM.call(this,a);a=_$d2$prototype$export.element;null!==a&&Cc(a)||n(132);a.style.whiteSpace="pre-wrap";this.hasFormat("bold")&&(a=le(a,"b"));this.hasFormat("italic")&&(a=le(a,"i"));this.hasFormat("strikethrough")&&(a=le(a,"s"));this.hasFormat("underline")&&(a=le(a,"u"));
return{element:a};};_proto3.exportJSON=function exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1};};_proto3.selectionTransform=function selectionTransform(){};_proto3.setFormat=function setFormat(a){var b=this.getWritable();b.__format="string"===typeof a?gb[a]:a;return b;};_proto3.setDetail=function setDetail(a){var b=this.getWritable();b.__detail="string"===typeof a?hb[a]:a;return b;};_proto3.setStyle=function setStyle(a){var b=this.getWritable();b.__style=a;return b;};_proto3.toggleFormat=function toggleFormat(a){var b=this.getFormat();a=Xb(b,a,null);return this.setFormat(a);};_proto3.toggleDirectionless=function toggleDirectionless(){var a=
this.getWritable();a.__detail^=1;return a;};_proto3.toggleUnmergeable=function toggleUnmergeable(){var a=this.getWritable();a.__detail^=2;return a;};_proto3.setMode=function setMode(a){a=nb[a];if(this.__mode===a)return this;var b=this.getWritable();b.__mode=a;return b;};_proto3.setTextContent=function setTextContent(a){if(this.__text===a)return this;var b=this.getWritable();b.__text=a;return b;};_proto3.select=function select(a,b){G();var c=u();var d=this.getTextContent();var e=this.__key;"string"===typeof d?(d=d.length,void 0===a&&(a=d),void 0===b&&(b=d)):b=a=0;if(C(c))d=cc(),d!==c.anchor.key&&d!==c.focus.key||H(e),c.setTextNodeRange(this,
a,this,b);else return re(e,a,e,b,"text","text");return c;};_proto3.selectStart=function selectStart(){return this.select(0,0);};_proto3.selectEnd=function selectEnd(){var a=this.getTextContentSize();return this.select(a,a);};_proto3.spliceText=function spliceText(a,b,c,d){var e=this.getWritable(),f=e.__text,g=c.length,h=a;0>h&&(h=g+h,0>h&&(h=0));var k=u();d&&C(k)&&(a+=g,k.setTextNodeRange(e,a,e,a));b=f.slice(0,h)+c+f.slice(h+b);e.__text=b;return e;};_proto3.canInsertTextBefore=function canInsertTextBefore(){return!0;};_proto3.canInsertTextAfter=function canInsertTextAfter(){return!0;};_proto3.splitText=function splitText(){for(var _len=arguments.length,a=new Array(_len),_key=0;_key<_len;_key++){a[_key]=arguments[_key];}G();var b=this.getLatest(),c=b.getTextContent(),d=b.__key,e=cc(),
f=new Set(a);a=[];var g=c.length,h="";for(var k=0;k<g;k++){""!==h&&f.has(k)&&(a.push(h),h=""),h+=c[k];}""!==h&&a.push(h);f=a.length;if(0===f)return[];if(a[0]===c)return[b];var m=a[0];c=b.getParentOrThrow();k=b.getFormat();var q=b.getStyle(),p=b.__detail;g=!1;b.isSegmented()?(h=K(m),h.__format=k,h.__style=q,h.__detail=p,g=!0):(h=b.getWritable(),h.__text=m);b=u();h=[h];m=m.length;for(var w=1;w<f;w++){var l=a[w],r=l.length;l=K(l).getWritable();l.__format=k;l.__style=q;l.__detail=p;var A=l.__key;r=m+r;
if(C(b)){var x=b.anchor,z=b.focus;x.key===d&&"text"===x.type&&x.offset>m&&x.offset<=r&&(x.key=A,x.offset-=m,b.dirty=!0);z.key===d&&"text"===z.type&&z.offset>m&&z.offset<=r&&(z.key=A,z.offset-=m,b.dirty=!0);}e===d&&H(A);m=r;h.push(l);}d=this.getPreviousSibling();e=this.getNextSibling();null!==d&&bc(d);null!==e&&bc(e);d=c.getWritable();e=this.getIndexWithinParent();g?(d.splice(e,0,h),this.remove()):d.splice(e,1,h);C(b)&&Zd(b,c,e,f-1);return h;};_proto3.mergeWithSibling=function mergeWithSibling(a){var b=a===this.getPreviousSibling();b||
a===this.getNextSibling()||n(50);var c=this.__key;var d=a.__key,e=this.__text,f=e.length;cc()===d&&H(c);var g=u();if(C(g)){var h=g.anchor,k=g.focus;null!==h&&h.key===d&&(se(h,b,c,a,f),g.dirty=!0);null!==k&&k.key===d&&(se(k,b,c,a,f),g.dirty=!0);}c=a.__text;this.setTextContent(b?c+e:e+c);b=this.getWritable();a.remove();return b;};_proto3.isTextEntity=function isTextEntity(){return!1;};return me;}($d);
function qe(a){var b="700"===a.style.fontWeight,c="line-through"===a.style.textDecoration,d="italic"===a.style.fontStyle,e="underline"===a.style.textDecoration,f=a.style.verticalAlign;return{forChild:function forChild(g){if(!B(g))return g;b&&g.toggleFormat("bold");c&&g.toggleFormat("strikethrough");d&&g.toggleFormat("italic");e&&g.toggleFormat("underline");"sub"===f&&g.toggleFormat("subscript");"super"===f&&g.toggleFormat("superscript");return g;},node:null};}
function oe(a){var b="normal"===a.style.fontWeight;return{forChild:function forChild(c){B(c)&&!b&&c.toggleFormat("bold");return c;},node:null};}var te=new WeakMap();
function ne(a){null===a.parentElement&&n(129);for(var b=a.textContent||"",c,d=a.parentNode,e=[a];null!==d&&void 0===(c=te.get(d))&&!("PRE"===d.nodeName||1===d.nodeType&&void 0!==d.style&&void 0!==d.style.whiteSpace&&d.style.whiteSpace.startsWith("pre"));){e.push(d),d=d.parentNode;}c=void 0===c?d:c;for(d=0;d<e.length;d++){te.set(e[d],c);}if(null!==c){b=b.split(/(\r?\n|\t)/);a=[];e=b.length;for(c=0;c<e;c++){d=b[c],"\n"===d||"\r\n"===d?a.push(ge()):"\t"===d?a.push(ue()):""!==d&&a.push(K(d));}return{node:a};}b=
b.replace(/\r/g,"").replace(/[ \t\n]+/g," ");if(""===b)return{node:null};if(" "===b[0]){e=a;for(c=!0;null!==e&&null!==(e=ve(e,!1));){if(d=e.textContent||"",0<d.length){/[ \t\n]$/.test(d)&&(b=b.slice(1));c=!1;break;}}c&&(b=b.slice(1));}if(" "===b[b.length-1]){for(e=!0;null!==a&&null!==(a=ve(a,!0));){if(0<(a.textContent||"").replace(/^( |\t|\r?\n)+/,"").length){e=!1;break;}}e&&(b=b.slice(0,b.length-1));}return""===b?{node:null}:{node:K(b)};}
var Fe=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/,"i");function ve(a,b){for(;;){for(var c=void 0;null===(c=b?a.nextSibling:a.previousSibling);){if(a=a.parentElement,null===a)return null;}a=c;if(1===a.nodeType&&(c=a.style.display,""===c&&null===a.nodeName.match(Fe)||""!==c&&!c.startsWith("inline")))return null;for(;null!==(c=b?a.firstChild:a.lastChild);){a=c;}if(3===a.nodeType)return a;if("BR"===a.nodeName)return null;}}
var Ge={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function pe(a){var b=Ge[a.nodeName.toLowerCase()];return void 0===b?{node:null}:{forChild:function forChild(c){B(c)&&!c.hasFormat(b)&&c.toggleFormat(b);return c;},node:null};}function K(a){if(a===void 0){a="";}return yc(new me(a));}function B(a){return a instanceof me;}var
He=function(_me){babelHelpers.inheritsLoose(He,_me);He.getType=function getType(){return"tab";};He.clone=function clone(a){var b=new He(a.__key);b.__text=a.__text;b.__format=a.__format;b.__style=a.__style;return b;};function He(a){var _this2;_this2=_me.call(this,"\t",a)||this;_this2.__detail=2;return _this2;}He.importDOM=function importDOM(){return null;};He.importJSON=function importJSON(a){var b=ue();b.setFormat(a.format);b.setStyle(a.style);return b;};var _proto4=He.prototype;_proto4.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_me.prototype.exportJSON.call(this),{type:"tab",version:1});};_proto4.setTextContent=function setTextContent(){n(126);};_proto4.setDetail=function setDetail(){n(127);};_proto4.setMode=function setMode(){n(128);};_proto4.canInsertTextBefore=function canInsertTextBefore(){return!1;};_proto4.canInsertTextAfter=function canInsertTextAfter(){return!1;};return He;}(me);
function ue(){return yc(new He());}function Ie(a){return a instanceof He;}var
Je=function(){function Je(a,b,c){this._selection=null;this.key=a;this.offset=b;this.type=c;}var _proto5=Je.prototype;_proto5.is=function is(a){return this.key===a.key&&this.offset===a.offset&&this.type===a.type;};_proto5.isBefore=function isBefore(a){var b=this.getNode(),c=a.getNode(),d=this.offset;a=a.offset;if(E(b)){var e=b.getDescendantByIndex(d);b=null!=e?e:b;}E(c)&&(e=c.getDescendantByIndex(a),c=null!=e?e:c);return b===c?d<a:b.isBefore(c);};_proto5.getNode=function getNode(){var a=I(this.key);null===a&&n(20);return a;};_proto5.set=function set(a,b,c){var d=this._selection,e=this.key;this.key=a;this.offset=b;this.type=c;
dc()||(cc()===e&&H(a),null!==d&&(d.setCachedNodes(null),d.dirty=!0));};return Je;}();function Ke(a,b,c){return new Je(a,b,c);}function Le(a,b){var c=b.__key,d=a.offset,e="element";if(B(b))e="text",b=b.getTextContentSize(),d>b&&(d=b);else if(!E(b)){var f=b.getNextSibling();if(B(f))c=f.__key,d=0,e="text";else if(f=b.getParent())c=f.__key,d=b.getIndexWithinParent()+1;}a.set(c,d,e);}function ae(a,b){if(E(b)){var c=b.getLastDescendant();E(c)||B(c)?Le(a,c):Le(a,b);}else Le(a,b);}
function Me(a,b,c,d){var e=a.getNode(),f=e.getChildAtIndex(a.offset),g=K(),h=L(e)?be().append(g):g;g.setFormat(c);g.setStyle(d);null===f?e.append(h):f.insertBefore(h);a.is(b)&&b.set(g.__key,0,"text");a.set(g.__key,0,"text");}function Ne(a,b,c,d){a.key=b;a.offset=c;a.type=d;}var
Oe=function(){function Oe(a){this._cachedNodes=null;this._nodes=a;this.dirty=!1;}var _proto6=Oe.prototype;_proto6.getCachedNodes=function getCachedNodes(){return this._cachedNodes;};_proto6.setCachedNodes=function setCachedNodes(a){this._cachedNodes=a;};_proto6.is=function is(a){if(!Sd(a))return!1;var b=this._nodes,c=a._nodes;return b.size===c.size&&Array.from(b).every(function(d){return c.has(d);});};_proto6.isCollapsed=function isCollapsed(){return!1;};_proto6.isBackward=function isBackward(){return!1;};_proto6.getStartEndPoints=function getStartEndPoints(){return null;};_proto6.add=function add(a){this.dirty=!0;this._nodes.add(a);this._cachedNodes=null;};_proto6["delete"]=function _delete(a){this.dirty=!0;this._nodes["delete"](a);this._cachedNodes=null;};_proto6.clear=function clear(){this.dirty=!0;this._nodes.clear();
this._cachedNodes=null;};_proto6.has=function has(a){return this._nodes.has(a);};_proto6.clone=function clone(){return new Oe(new Set(this._nodes));};_proto6.extract=function extract(){return this.getNodes();};_proto6.insertRawText=function insertRawText(){};_proto6.insertText=function insertText(){};_proto6.insertNodes=function insertNodes(a){var b=this.getNodes(),c=b.length;var d=b[c-1];if(B(d))d=d.select();else{var e=d.getIndexWithinParent()+1;d=d.getParentOrThrow().select(e,e);}d.insertNodes(a);for(a=0;a<c;a++){b[a].remove();}};_proto6.getNodes=function getNodes(){var a=this._cachedNodes;if(null!==a)return a;var b=this._nodes;a=[];for(var _iterator6=b,_isArray6=Array.isArray(_iterator6),_i7=0,_iterator6=_isArray6?_iterator6:_iterator6[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref12;if(_isArray6){if(_i7>=_iterator6.length)break;_ref12=_iterator6[_i7++];}else{_i7=_iterator6.next();if(_i7.done)break;_ref12=_i7.value;}var c=_ref12;b=I(c),null!==b&&a.push(b);}dc()||(this._cachedNodes=
a);return a;};_proto6.getTextContent=function getTextContent(){var a=this.getNodes(),b="";for(var c=0;c<a.length;c++){b+=a[c].getTextContent();}return b;};return Oe;}();function C(a){return a instanceof Pe;}var
Pe=function(){function Pe(a,b,c,d){this.anchor=a;this.focus=b;a._selection=this;b._selection=this;this._cachedNodes=null;this.format=c;this.style=d;this.dirty=!1;}var _proto7=Pe.prototype;_proto7.getCachedNodes=function getCachedNodes(){return this._cachedNodes;};_proto7.setCachedNodes=function setCachedNodes(a){this._cachedNodes=a;};_proto7.is=function is(a){return C(a)?this.anchor.is(a.anchor)&&this.focus.is(a.focus)&&this.format===a.format&&this.style===a.style:!1;};_proto7.isCollapsed=function isCollapsed(){return this.anchor.is(this.focus);};_proto7.getNodes=function getNodes(){var a=this._cachedNodes;if(null!==a)return a;a=this.anchor;var b=this.focus,c=a.isBefore(b),
d=c?a:b;c=c?b:a;a=d.getNode();b=c.getNode();var e=d.offset;d=c.offset;E(a)&&(c=a.getDescendantByIndex(e),a=null!=c?c:a);E(b)&&(c=b.getDescendantByIndex(d),null!==c&&c!==a&&b.getChildAtIndex(d)===c&&(c=c.getPreviousSibling()),b=null!=c?c:b);a=a.is(b)?E(a)&&0<a.getChildrenSize()?[]:[a]:a.getNodesBetween(b);dc()||(this._cachedNodes=a);return a;};_proto7.setTextNodeRange=function setTextNodeRange(a,b,c,d){Ne(this.anchor,a.__key,b,"text");Ne(this.focus,c.__key,d,"text");this._cachedNodes=null;this.dirty=!0;};_proto7.getTextContent=function getTextContent(){var a=this.getNodes();
if(0===a.length)return"";var b=a[0],c=a[a.length-1],d=this.anchor,e=this.focus,f=d.isBefore(e),_Qe=Qe(this),g=_Qe[0],h=_Qe[1],k="",m=!0;for(var q=0;q<a.length;q++){var p=a[q];if(E(p)&&!p.isInline())m||(k+="\n"),m=p.isEmpty()?!1:!0;else if(m=!1,B(p)){var l=p.getTextContent();if(p===b){if(p===c){if("element"!==d.type||"element"!==e.type||e.offset===d.offset)l=g<h?l.slice(g,h):l.slice(h,g);}else l=f?l.slice(g):l.slice(h);}else p===c&&(l=f?l.slice(0,h):l.slice(0,g));k+=l;}else!y(p)&&!Ec(p)||p===c&&this.isCollapsed()||(k+=
p.getTextContent());}return k;};_proto7.applyDOMRange=function applyDOMRange(a){var b=F(),c=b.getEditorState()._selection;a=Re(a.startContainer,a.startOffset,a.endContainer,a.endOffset,b,c);if(null!==a){var _a8=a,d=_a8[0],e=_a8[1];Ne(this.anchor,d.key,d.offset,d.type);Ne(this.focus,e.key,e.offset,e.type);this._cachedNodes=null;}};_proto7.clone=function clone(){var a=this.anchor,b=this.focus;return new Pe(Ke(a.key,a.offset,a.type),Ke(b.key,b.offset,b.type),this.format,this.style);};_proto7.toggleFormat=function toggleFormat(a){this.format=Xb(this.format,a,null);this.dirty=!0;};_proto7.setStyle=function setStyle(a){this.style=a;this.dirty=
!0;};_proto7.hasFormat=function hasFormat(a){return 0!==(this.format&gb[a]);};_proto7.insertRawText=function insertRawText(a){a=a.split(/(\r?\n|\t)/);var b=[],c=a.length;for(var d=0;d<c;d++){var e=a[d];"\n"===e||"\r\n"===e?b.push(ge()):"\t"===e?b.push(ue()):b.push(K(e));}this.insertNodes(b);};_proto7.insertText=function insertText(a){var b=this.anchor,c=this.focus,d=this.isCollapsed()||b.isBefore(c),e=this.format,f=this.style;d&&"element"===b.type?Me(b,c,e,f):d||"element"!==c.type||Me(c,b,e,f);var g=this.getNodes(),h=g.length,k=d?c:b;c=(d?b:c).offset;var m=k.offset;b=g[0];B(b)||n(26);d=b.getTextContent().length;
var q=b.getParentOrThrow(),p=g[h-1];if(this.isCollapsed()&&c===d&&(b.isSegmented()||b.isToken()||!b.canInsertTextAfter()||!q.canInsertTextAfter()&&null===b.getNextSibling())){var l=b.getNextSibling();B(l)&&l.canInsertTextBefore()&&!Vb(l)||(l=K(),l.setFormat(e),q.canInsertTextAfter()?b.insertAfter(l):q.insertAfter(l));l.select(0,0);b=l;if(""!==a){this.insertText(a);return;}}else if(this.isCollapsed()&&0===c&&(b.isSegmented()||b.isToken()||!b.canInsertTextBefore()||!q.canInsertTextBefore()&&null===b.getPreviousSibling())){l=
b.getPreviousSibling();if(!B(l)||Vb(l))l=K(),l.setFormat(e),q.canInsertTextBefore()?b.insertBefore(l):q.insertBefore(l);l.select();b=l;if(""!==a){this.insertText(a);return;}}else if(b.isSegmented()&&c!==d)q=K(b.getTextContent()),q.setFormat(e),b.replace(q),b=q;else if(!(this.isCollapsed()||""===a||(l=p.getParent(),q.canInsertTextBefore()&&q.canInsertTextAfter()&&(!E(l)||l.canInsertTextBefore()&&l.canInsertTextAfter())))){this.insertText("");Se(this.anchor,this.focus,null);this.insertText(a);return;}if(1===
h){if(b.isToken())a=K(a),a.select(),b.replace(a);else{g=b.getFormat();h=b.getStyle();if(c===m&&(g!==e||h!==f)){if(""===b.getTextContent())b.setFormat(e),b.setStyle(f);else{var _b$splitText;g=K(a);g.setFormat(e);g.setStyle(f);g.select();0===c?b.insertBefore(g,!1):((_b$splitText=b.splitText(c),h=_b$splitText[0],_b$splitText),h.insertAfter(g,!1));g.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length);return;}}else if(Ie(b)){a=K(a);a.setFormat(e);a.setStyle(f);a.select();b.replace(a);return;}b=b.spliceText(c,m-c,a,!0);""===b.getTextContent()?b.remove():
"text"===this.anchor.type&&(b.isComposing()?this.anchor.offset-=a.length:(this.format=g,this.style=h));}}else{e=new Set([].concat(b.getParentKeys(),p.getParentKeys()));l=E(b)?b:b.getParentOrThrow();f=E(p)?p:p.getParentOrThrow();q=p;if(!l.is(f)&&f.isInline()){do{q=f,f=f.getParentOrThrow();}while(f.isInline());}if("text"===k.type&&(0!==m||""===p.getTextContent())||"element"===k.type&&p.getIndexWithinParent()<m){if(B(p)&&!p.isToken()&&m!==p.getTextContentSize()){if(p.isSegmented()){var r=K(p.getTextContent());
p.replace(r);p=r;}L(k.getNode())||"text"!==k.type||(p=p.spliceText(0,m,""));e.add(p.__key);}else k=p.getParentOrThrow(),k.canBeEmpty()||1!==k.getChildrenSize()?p.remove():k.remove();}else e.add(p.__key);k=f.getChildren();m=new Set(g);p=l.is(f);l=l.isInline()&&null===b.getNextSibling()?l:b;for(r=k.length-1;0<=r;r--){var w=k[r];if(w.is(b)||E(w)&&w.isParentOf(b))break;w.isAttached()&&(!m.has(w)||w.is(q)?p||l.insertAfter(w,!1):w.remove());}if(!p)for(k=f,f=null;null!==k;){m=k.getChildren();p=m.length;if(0===
p||m[p-1].is(f))e["delete"](k.__key),f=k;k=k.getParent();}b.isToken()?c===d?b.select():(a=K(a),a.select(),b.replace(a)):(b=b.spliceText(c,d-c,a,!0),""===b.getTextContent()?b.remove():b.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length));for(a=1;a<h;a++){b=g[a],e.has(b.__key)||b.remove();}}};_proto7.removeText=function removeText(){this.insertText("");};_proto7.formatText=function formatText(a){if(this.isCollapsed())this.toggleFormat(a),H(null);else{var b=this.getNodes(),c=[];for(var _iterator7=b,_isArray7=Array.isArray(_iterator7),_i8=0,_iterator7=_isArray7?_iterator7:_iterator7[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref13;if(_isArray7){if(_i8>=_iterator7.length)break;_ref13=_iterator7[_i8++];}else{_i8=_iterator7.next();if(_i8.done)break;_ref13=_i8.value;}var d=_ref13;B(d)&&c.push(d);}var e=c.length;if(0===e)this.toggleFormat(a),
H(null);else{d=this.anchor;var f=this.focus,g=this.isBackward();b=g?f:d;d=g?d:f;var h=0,k=c[0];f="element"===b.type?0:b.offset;"text"===b.type&&f===k.getTextContentSize()&&(h=1,k=c[1],f=0);if(null!=k){g=k.getFormatFlags(a,null);var m=e-1,q=c[m];e="text"===d.type?d.offset:q.getTextContentSize();if(k.is(q))f!==e&&(0===f&&e===k.getTextContentSize()?k.setFormat(g):(a=k.splitText(f,e),a=0===f?a[0]:a[1],a.setFormat(g),"text"===b.type&&b.set(a.__key,0,"text"),"text"===d.type&&d.set(a.__key,e-f,"text")),
this.format=g);else{var _k$splitText,_q$splitText;0!==f&&((_k$splitText=k.splitText(f),k=_k$splitText[1],_k$splitText),f=0);k.setFormat(g);var p=q.getFormatFlags(a,g);0<e&&(e!==q.getTextContentSize()&&(_q$splitText=q.splitText(e),q=_q$splitText[0],_q$splitText),q.setFormat(p));for(h+=1;h<m;h++){var l=c[h];if(!l.isToken()){var r=l.getFormatFlags(a,p);l.setFormat(r);}}"text"===b.type&&b.set(k.__key,f,"text");"text"===d.type&&d.set(q.__key,e,"text");this.format=g|p;}}}}};_proto7.insertNodes=function insertNodes(a){if(0!==a.length){if("root"===this.anchor.key){this.insertParagraph();var b=u();C(b)||n(134);return b.insertNodes(a);}b=this.isBackward()?
this.focus:this.anchor;var c=Fc(b.getNode(),Dc);b=a[a.length-1];if("__language"in c&&E(c)){if("__language"in a[0])this.insertText(a[0].getTextContent());else{var d=Te(this);c.splice(d,0,a);b.selectEnd();}}else if(a.some(function(g){return(E(g)||y(g))&&!g.isInline();})){var _e;b=Ue(a);a=b.getLastDescendant();var e=b.getChildren();b=E(c)&&c.isEmpty()?null:this.insertParagraph();d=e[e.length-1];var f=e[0];(function(g){return E(g)&&Dc(g)&&!g.isEmpty()&&E(c)&&(!c.isEmpty()||"__value"in c&&"__checked"in c);})(f)&&(E(c)||n(135),c.append.apply(c,f.getChildren()),
f=e[1]);f&&ce(c,f);e=Fc(a,Dc);b&&E(e)&&("__value"in b&&"__checked"in b||Dc(d))&&((_e=e).append.apply(_e,b.getChildren()),b.remove());E(c)&&c.isEmpty()&&c.remove();a.selectEnd();a=E(c)?c.getLastChild():null;Ec(a)&&e!==c&&a.remove();}else E(c)||n(135),d=Te(this),c.splice(d,0,a),b.selectEnd();}};_proto7.insertParagraph=function insertParagraph(){var _a9;if("root"===this.anchor.key){var a=be();J().splice(this.anchor.offset,0,[a]);a.select();return a;}var b=Te(this);a=Fc(this.anchor.getNode(),Dc);E(a)||n(136);b=(b=a.getChildAtIndex(b))?[b].concat(b.getNextSiblings()):
[];return(a=a.insertNewAfter(this,!1))?((_a9=a).append.apply(_a9,b),a.selectStart(),a):null;};_proto7.insertLineBreak=function insertLineBreak(a){var b=ge();this.insertNodes([b]);a&&(a=b.getParentOrThrow(),b=b.getIndexWithinParent(),a.select(b,b));};_proto7.extract=function extract(){var _f$splitText,_g$splitText;var a=this.getNodes(),b=a.length,c=b-1,d=this.anchor;var e=this.focus;var f=a[0];var g=a[c],_Qe2=Qe(this),h=_Qe2[0],k=_Qe2[1];if(0===b)return[];if(1===b)return B(f)&&!this.isCollapsed()?(a=h>k?k:h,c=f.splitText(a,h>k?h:k),a=0===a?c[0]:c[1],null!=a?[a]:[]):[f];b=d.isBefore(e);B(f)&&(d=b?h:k,d===f.getTextContentSize()?
a.shift():0!==d&&((_f$splitText=f.splitText(d),f=_f$splitText[1],_f$splitText),a[0]=f));B(g)&&(f=g.getTextContent().length,b=b?k:h,0===b?a.pop():b!==f&&((_g$splitText=g.splitText(b),g=_g$splitText[0],_g$splitText),a[c]=g));return a;};_proto7.modify=function modify(a,b,c){var d=this.focus,e=this.anchor,f="move"===a,g=rc(d,b);if(y(g)&&!g.isIsolated())f&&g.isKeyboardSelectable()?(b=Ve(),b.add(g.__key),zb(b)):(a=b?g.getPreviousSibling():g.getNextSibling(),B(a)?(g=a.__key,b=b?a.getTextContent().length:0,d.set(g,b,"text"),f&&e.set(g,b,"text")):(c=g.getParentOrThrow(),E(a)?(c=a.__key,g=b?a.getChildrenSize():0):(
g=g.getIndexWithinParent(),c=c.__key,b||g++),d.set(c,g,"element"),f&&e.set(c,g,"element")));else if(e=F(),d=wb(e._window)){var h=e._blockCursorElement,k=e._rootElement;null===k||null===h||!E(g)||g.isInline()||g.canBeEmpty()||Bc(h,e,k);d.modify(a,b?"backward":"forward",c);if(0<d.rangeCount&&(g=d.getRangeAt(0),e=this.anchor.getNode(),e=L(e)?e:vc(e),this.applyDOMRange(g),this.dirty=!0,!f)){f=this.getNodes();a=[];c=!1;for(h=0;h<f.length;h++){k=f[h],uc(k,e)?a.push(k):c=!0;}c&&0<a.length&&(b?(b=a[0],E(b)?
b.selectStart():b.getParentOrThrow().selectStart()):(b=a[a.length-1],E(b)?b.selectEnd():b.getParentOrThrow().selectEnd()));if(d.anchorNode!==g.startContainer||d.anchorOffset!==g.startOffset)b=this.focus,f=this.anchor,d=f.key,g=f.offset,e=f.type,Ne(f,b.key,b.offset,b.type),Ne(b,d,g,e),this._cachedNodes=null;}}};_proto7.deleteCharacter=function deleteCharacter(a){var b=this.isCollapsed();if(this.isCollapsed()){var c=this.anchor,d=this.focus,e=c.getNode();if(!a&&("element"===c.type&&E(e)&&c.offset===e.getChildrenSize()||"text"===c.type&&
c.offset===e.getTextContentSize())){var f=e.getParent();f=e.getNextSibling()||(null===f?null:f.getNextSibling());if(E(f)&&f.isShadowRoot())return;}f=rc(d,a);if(y(f)&&!f.isIsolated()){f.isKeyboardSelectable()&&E(e)&&0===e.getChildrenSize()?(e.remove(),a=Ve(),a.add(f.__key),zb(a)):(f.remove(),F().dispatchCommand(ba,void 0));return;}if(!a&&E(f)&&E(e)&&e.isEmpty()){e.remove();f.selectStart();return;}this.modify("extend",a,"character");if(!this.isCollapsed()){f="text"===d.type?d.getNode():null;e="text"===
c.type?c.getNode():null;if(null!==f&&f.isSegmented()){if(c=d.offset,d=f.getTextContentSize(),f.is(e)||a&&c!==d||!a&&0!==c){We(f,a,c);return;}}else if(null!==e&&e.isSegmented()&&(c=c.offset,d=e.getTextContentSize(),e.is(f)||a&&0!==c||!a&&c!==d)){We(e,a,c);return;}e=this.anchor;f=this.focus;c=e.getNode();d=f.getNode();if(c===d&&"text"===e.type&&"text"===f.type){var g=e.offset,h=f.offset;var k=g<h;d=k?g:h;h=k?h:g;g=h-1;d!==g&&(c=c.getTextContent().slice(d,h),ic(c)||(a?f.offset=g:e.offset=g));}}else if(a&&
0===c.offset&&("element"===c.type?c.getNode():c.getNode().getParentOrThrow()).collapseAtStart(this))return;}this.removeText();a&&!b&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset&&(a=this.anchor.getNode(),a.isEmpty()&&L(a.getParent())&&0===a.getIndexWithinParent()&&a.collapseAtStart(this));};_proto7.deleteLine=function deleteLine(a){this.isCollapsed()&&("text"===this.anchor.type&&this.modify("extend",a,"lineboundary"),0===(a?this.focus:this.anchor).offset&&this.modify("extend",a,"character"));this.removeText();};_proto7.deleteWord=function deleteWord(a){this.isCollapsed()&&
this.modify("extend",a,"word");this.removeText();};_proto7.isBackward=function isBackward(){return this.focus.isBefore(this.anchor);};_proto7.getStartEndPoints=function getStartEndPoints(){return[this.anchor,this.focus];};return Pe;}();function Sd(a){return a instanceof Oe;}function Xe(a){var b=a.offset;if("text"===a.type)return b;a=a.getNode();return b===a.getChildrenSize()?a.getTextContent().length:0;}function Qe(a){a=a.getStartEndPoints();if(null===a)return[0,0];var _a10=a,b=_a10[0],c=_a10[1];return"element"===b.type&&"element"===c.type&&b.key===c.key&&b.offset===c.offset?[0,0]:[Xe(b),Xe(c)];}
function We(a,b,c){var d=a.getTextContent().split(/(?=\s)/g),e=d.length,f=0,g=0;for(var h=0;h<e;h++){var k=d[h],m=h===e-1;g=f;f+=k.length;if(b&&f===c||f>c||m){d.splice(h,1);m&&(g=void 0);break;}}b=d.join("").trim();""===b?a.remove():(a.setTextContent(b),a.select(g,g));}
function Ye(a,b,c,d){var e=b;if(1===a.nodeType){var h=!1;var f=a.childNodes,g=f.length;e===g&&(h=!0,e=g-1);var k=f[e];g=!1;k===d._blockCursorElement?(k=f[e+1],g=!0):null!==d._blockCursorElement&&e--;d=hc(k);if(B(d))e=h?d.getTextContentSize():0;else{f=hc(a);if(null===f)return null;if(E(f)){a=f.getChildAtIndex(e);if(b=E(a))b=a.getParent(),b=null===c||null===b||!b.canBeEmpty()||b!==c.getNode();b&&(c=h?a.getLastDescendant():a.getFirstDescendant(),null===c?(f=a,e=0):(a=c,f=E(a)?a:a.getParentOrThrow()));
B(a)?(d=a,f=null,e=h?a.getTextContentSize():0):a!==f&&h&&!g&&e++;}else e=f.getIndexWithinParent(),e=0===b&&y(f)&&hc(a)===f?e:e+1,f=f.getParentOrThrow();if(E(f))return Ke(f.__key,e,"element");}}else d=hc(a);return B(d)?Ke(d.__key,e,"text"):null;}
function Ze(a,b,c){var d=a.offset,e=a.getNode();0===d?(d=e.getPreviousSibling(),e=e.getParent(),b)?(c||!b)&&null===d&&E(e)&&e.isInline()&&(b=e.getPreviousSibling(),B(b)&&(a.key=b.__key,a.offset=b.getTextContent().length)):E(d)&&!c&&d.isInline()?(a.key=d.__key,a.offset=d.getChildrenSize(),a.type="element"):B(d)&&(a.key=d.__key,a.offset=d.getTextContent().length):d===e.getTextContent().length&&(d=e.getNextSibling(),e=e.getParent(),b&&E(d)&&d.isInline()?(a.key=d.__key,a.offset=0,a.type="element"):(c||
b)&&null===d&&E(e)&&e.isInline()&&!e.canInsertTextAfter()&&(b=e.getNextSibling(),B(b)&&(a.key=b.__key,a.offset=0)));}function Se(a,b,c){if("text"===a.type&&"text"===b.type){var d=a.isBefore(b);var e=a.is(b);Ze(a,d,e);Ze(b,!d,e);e&&(b.key=a.key,b.offset=a.offset,b.type=a.type);d=F();d.isComposing()&&d._compositionKey!==a.key&&C(c)&&(d=c.anchor,c=c.focus,Ne(a,d.key,d.offset,d.type),Ne(b,c.key,c.offset,c.type));}}
function Re(a,b,c,d,e,f){if(null===a||null===c||!Sb(e,a,c))return null;b=Ye(a,b,C(f)?f.anchor:null,e);if(null===b)return null;d=Ye(c,d,C(f)?f.focus:null,e);if(null===d||"element"===b.type&&"element"===d.type&&(a=hc(a),c=hc(c),y(a)&&y(c)))return null;Se(b,d,f);return[b,d];}function re(a,b,c,d,e,f){var g=$b();a=new Pe(Ke(a,b,e),Ke(c,d,f),0,"");a.dirty=!0;return g._selection=a;}function Ve(){return new Oe(new Set());}
function $e(a){var b=a.getEditorState()._selection,c=wb(a._window);return C(b)||null==b?Od(b,c,a,null):b.clone();}
function Od(a,b,c,d){var e=c._window;if(null===e)return null;var f=(e=d||e.event)?e.type:void 0;d="selectionchange"===f;e=!pb&&(d||"beforeinput"===f||"compositionstart"===f||"compositionend"===f||"click"===f&&e&&3===e.detail||"drop"===f||void 0===f);var g;if(!C(a)||e){if(null===b)return null;e=b.anchorNode;f=b.focusNode;g=b.anchorOffset;b=b.focusOffset;if(d&&C(a)&&!Sb(c,e,f))return a.clone();}else return a.clone();c=Re(e,g,f,b,c,a);if(null===c)return null;var _c=c,h=_c[0],k=_c[1];return new Pe(h,k,C(a)?a.format:
0,C(a)?a.style:"");}function u(){return $b()._selection;}function mc(){return F()._editorState._selection;}
function Zd(a,b,c,d){if(d===void 0){d=1;}var e=a.anchor,f=a.focus,g=e.getNode(),h=f.getNode();if(b.is(g)||b.is(h)){g=b.__key;if(a.isCollapsed()){if(b=e.offset,c<=b&&0<d||c<b&&0>d)c=Math.max(0,b+d),e.set(g,c,"element"),f.set(g,c,"element"),af(a);}else{var m=a.isBackward();h=m?f:e;var k=h.getNode();e=m?e:f;f=e.getNode();b.is(k)&&(k=h.offset,(c<=k&&0<d||c<k&&0>d)&&h.set(g,Math.max(0,k+d),"element"));b.is(f)&&(b=e.offset,(c<=b&&0<d||c<b&&0>d)&&e.set(g,Math.max(0,b+d),"element"));}af(a);}}
function af(a){var b=a.anchor,c=b.offset;var d=a.focus;var e=d.offset,f=b.getNode(),g=d.getNode();if(a.isCollapsed())E(f)&&(g=f.getChildrenSize(),g=(e=c>=g)?f.getChildAtIndex(g-1):f.getChildAtIndex(c),B(g)&&(c=0,e&&(c=g.getTextContentSize()),b.set(g.__key,c,"text"),d.set(g.__key,c,"text")));else{if(E(f)){var h=f.getChildrenSize();c=(a=c>=h)?f.getChildAtIndex(h-1):f.getChildAtIndex(c);B(c)&&(f=0,a&&(f=c.getTextContentSize()),b.set(c.__key,f,"text"));}E(g)&&(c=g.getChildrenSize(),e=(b=e>=c)?g.getChildAtIndex(c-
1):g.getChildAtIndex(e),B(e)&&(g=0,b&&(g=e.getTextContentSize()),d.set(e.__key,g,"text")));}}function bf(a,b){b=b.getEditorState()._selection;a=a._selection;if(C(a)){var c=a.anchor;var d=a.focus,e;"text"===c.type&&(e=c.getNode(),e.selectionTransform(b,a));"text"===d.type&&(c=d.getNode(),e!==c&&c.selectionTransform(b,a));}}
function Yd(a,b,c,d,e){var f=null,g=0,h=null;null!==d?(f=d.__key,B(d)?(g=d.getTextContentSize(),h="text"):E(d)&&(g=d.getChildrenSize(),h="element")):null!==e&&(f=e.__key,B(e)?h="text":E(e)&&(h="element"));null!==f&&null!==h?a.set(f,g,h):(g=b.getIndexWithinParent(),-1===g&&(g=c.getChildrenSize()),a.set(c.__key,g,"element"));}function se(a,b,c,d,e){"text"===a.type?(a.key=c,b||(a.offset+=e)):a.offset>d.getIndexWithinParent()&&--a.offset;}
function Te(a){a.isCollapsed()||a.removeText();var b=a.anchor;a=b.getNode();for(b=b.offset;!Dc(a);){var _cf=cf(a,b);a=_cf[0];b=_cf[1];}return b;}
function cf(a,b){var _b2;var c=a.getParent();if(!c)return c=be(),J().append(c),c.select(),[J(),0];if(B(a)){var d=a.splitText(b);if(0===d.length)return[c,a.getIndexWithinParent()];a=0===b?0:1;a=d[0].getIndexWithinParent()+a;return[c,a];}if(!E(a)||0===b)return[c,a.getIndexWithinParent()];if(d=a.getChildAtIndex(b))b=new Pe(Ke(a.__key,b,"element"),Ke(a.__key,b,"element"),0,""),(b=a.insertNewAfter(b))&&(_b2=b).append.apply(_b2,[d].concat(d.getNextSiblings()));return[c,a.getIndexWithinParent()+1];}
function Ue(a){var b=be(),c=null;for(var d=0;d<a.length;d++){var e=a[d],f=Ec(e);if(f||y(e)&&e.isInline()||E(e)&&e.isInline()||B(e)||e.isParentRequired()){if(null===c&&(c=e.createParentElementNode(),b.append(c),f))continue;null!==c&&c.append(e);}else b.append(e),c=null;}return b;}var S=null,T=null,U=!1,df=!1,Zb=0,ef={characterData:!0,childList:!0,subtree:!0};function dc(){return U||null!==S&&S._readOnly;}function G(){U&&n(13);}function $b(){null===S&&n(15);return S;}
function F(){null===T&&n(16);return T;}function ff(a,b,c){var d=b.__type;var e=a._nodes.get(d);void 0===e&&n(30,d);a=c.get(d);void 0===a&&(a=Array.from(e.transforms),c.set(d,a));c=a.length;for(d=0;d<c&&(a[d](b),b.isAttached());d++){;}}function gf(a,b){b=b._dirtyLeaves;a=a._nodeMap;for(var _iterator8=b,_isArray8=Array.isArray(_iterator8),_i9=0,_iterator8=_isArray8?_iterator8:_iterator8[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref14;if(_isArray8){if(_i9>=_iterator8.length)break;_ref14=_iterator8[_i9++];}else{_i9=_iterator8.next();if(_i9.done)break;_ref14=_i9.value;}var c=_ref14;b=a.get(c),B(b)&&b.isAttached()&&b.isSimpleText()&&!b.isUnmergeable()&&Gb(b);}}
function hf(a,b){var c=b._dirtyLeaves,d=b._dirtyElements;a=a._nodeMap;var e=cc(),f=new Map();var g=c;var h=g.size;for(var k=d,m=k.size;0<h||0<m;){if(0<h){b._dirtyLeaves=new Set();for(var _iterator9=g,_isArray9=Array.isArray(_iterator9),_i10=0,_iterator9=_isArray9?_iterator9:_iterator9[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref15;if(_isArray9){if(_i10>=_iterator9.length)break;_ref15=_iterator9[_i10++];}else{_i10=_iterator9.next();if(_i10.done)break;_ref15=_i10.value;}var q=_ref15;g=a.get(q),B(g)&&g.isAttached()&&g.isSimpleText()&&!g.isUnmergeable()&&Gb(g),void 0!==g&&void 0!==g&&g.__key!==e&&g.isAttached()&&ff(b,g,f),c.add(q);}g=b._dirtyLeaves;h=g.size;if(0<h){Zb++;continue;}}b._dirtyLeaves=new Set();b._dirtyElements=new Map();for(var _iterator10=k,_isArray10=Array.isArray(_iterator10),_i11=0,_iterator10=_isArray10?_iterator10:_iterator10[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref16;if(_isArray10){if(_i11>=_iterator10.length)break;_ref16=_iterator10[_i11++];}else{_i11=_iterator10.next();if(_i11.done)break;_ref16=_i11.value;}var _q=_ref16;if(k=_q[0],m=_q[1],"root"===k||m)g=a.get(k),void 0!==
g&&void 0!==g&&g.__key!==e&&g.isAttached()&&ff(b,g,f),d.set(k,m);}g=b._dirtyLeaves;h=g.size;k=b._dirtyElements;m=k.size;Zb++;}b._dirtyLeaves=c;b._dirtyElements=d;}function jf(a,b){var c=a.type,d=b.get(c);void 0===d&&n(17,c);c=d.klass;a.type!==c.getType()&&n(18,c.name);c=c.importJSON(a);a=a.children;if(E(c)&&Array.isArray(a))for(d=0;d<a.length;d++){var e=jf(a[d],b);c.append(e);}return c;}function kf(a,b){var c=S,d=U,e=T;S=a;U=!0;T=null;try{return b();}finally{S=c,U=d,T=e;}}
function lf(a,b){var c=a._pendingEditorState,d=a._rootElement,e=a._headless||null===d;if(null!==c){var f=a._editorState,g=f._selection,h=c._selection,k=0!==a._dirtyType,m=S,q=U,p=T,l=a._updating,r=a._observer,w=null;a._pendingEditorState=null;a._editorState=c;if(!e&&k&&null!==r){T=a;S=c;U=!1;a._updating=!0;try{var D=a._dirtyType,P=a._dirtyElements,Q=a._dirtyLeaves;r.disconnect();var A=D,x=P,z=Q;N=Ic=M="";Lc=2===A;Oc=null;O=a;Jc=a._config;Kc=a._nodes;Nc=O._listeners.mutation;Pc=x;Zc=z;$c=f._nodeMap;
ad=c._nodeMap;Mc=c._readOnly;bd=new Map(a._keyToDOMMap);var ha=new Map();cd=ha;qd("root",null);cd=bd=Jc=ad=$c=Zc=Pc=Kc=O=void 0;w=ha;}catch(D){D instanceof Error&&a._onError(D);if(df)throw D;mf(a,null,d,c);Cb(a);a._dirtyType=2;df=!0;lf(a,f);df=!1;return;}finally{r.observe(d,ef),a._updating=l,S=m,U=q,T=p;}}c._readOnly||(c._readOnly=!0);var aa=a._dirtyLeaves,W=a._dirtyElements,Ua=a._normalizedNodes,ja=a._updateTags,Qc=a._deferred;k&&(a._dirtyType=0,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set(),a._dirtyElements=
new Map(),a._normalizedNodes=new Set(),a._updateTags=new Set());var we=a._decorators,Lb=a._pendingDecorators||we,yf=c._nodeMap,Rc;for(Rc in Lb){yf.has(Rc)||(Lb===we&&(Lb=ec(a)),delete Lb[Rc]);}var ia=e?null:wb(a._window);if(a._editable&&null!==ia&&(k||null===h||h.dirty)){T=a;S=c;try{null!==r&&r.disconnect();if(k||null===h||h.dirty){var _D=a._blockCursorElement;null!==_D&&Bc(_D,a,d);a:{var _P=ia.anchorNode,_Q=ia.focusNode,_ha=ia.anchorOffset,ib=ia.focusOffset,X=document.activeElement;if(!(ja.has("collaboration")&&
X!==d||null!==X&&Rb(X)))if(C(h)){var jb=h.anchor,Sc=h.focus,xe=jb.key,zf=Sc.key,ye=tc(a,xe),ze=tc(a,zf),Mb=jb.offset,Ae=Sc.offset,Tc=h.format,Uc=h.style,Be=h.isCollapsed(),kb=ye,Nb=ze,Vc=!1;if("text"===jb.type){kb=Wb(ye);var Y=jb.getNode();Vc=Y.getFormat()!==Tc||Y.getStyle()!==Uc;}else C(g)&&"text"===g.anchor.type&&(Vc=!0);"text"===Sc.type&&(Nb=Wb(ze));if(null!==kb&&null!==Nb){if(Be&&(null===g||Vc||C(g)&&(g.format!==Tc||g.style!==Uc))){var Af=performance.now();Kd=[Tc,Uc,Mb,xe,Af];}if(_ha===Mb&&ib===
Ae&&_P===kb&&_Q===Nb&&("Range"!==ia.type||!Be)&&(null!==X&&d.contains(X)||d.focus({preventScroll:!0}),"element"!==jb.type))break a;try{ia.setBaseAndExtent(kb,Mb,Nb,Ae);}catch(Y){}if(!ja.has("skip-scroll-into-view")&&h.isCollapsed()&&null!==d&&d===document.activeElement){var _Y=h instanceof Pe&&"element"===h.anchor.type?kb.childNodes[Mb]||null:0<ia.rangeCount?ia.getRangeAt(0):null;if(null!==_Y){var Z;if(_Y instanceof Text){var V=document.createRange();V.selectNode(_Y);Z=V.getBoundingClientRect();}else Z=_Y.getBoundingClientRect();
var xa=d.ownerDocument,Ea=xa.defaultView;if(null!==Ea)for(var _Z=Z,Wc=_Z.top,Xc=_Z.bottom,Ob,Pb,na=d;null!==na;){var _V=na===xa.body;if(_V)Ob=0,Pb=Db(a).innerHeight;else{var Qb=na.getBoundingClientRect();Ob=Qb.top;Pb=Qb.bottom;}var Fa=0;Wc<Ob?Fa=-(Ob-Wc):Xc>Pb&&(Fa=Xc-Pb);if(0!==Fa)if(_V)Ea.scrollBy(0,Fa);else{var _Qb=na.scrollTop;na.scrollTop+=Fa;var Ce=na.scrollTop-_Qb;Wc-=Ce;Xc-=Ce;}if(_V)break;na=Ub(na);}}}Gd=!0;}}else null!==g&&Sb(a,_P,_Q)&&ia.removeAllRanges();}}a:{var _D2=a._blockCursorElement;if(C(h)&&h.isCollapsed()&&
"element"===h.anchor.type&&d.contains(document.activeElement)){var _P2=h.anchor,_Q2=_P2.getNode(),_ha2=_P2.offset,_ib=_Q2.getChildrenSize(),_X=!1,_Y2=null;if(_ha2===_ib){var _Z2=_Q2.getChildAtIndex(_ha2-1);Ac(_Z2)&&(_X=!0);}else{var _Z3=_Q2.getChildAtIndex(_ha2);if(Ac(_Z3)){var _xa=_Z3.getPreviousSibling();if(null===_xa||Ac(_xa))_X=!0,_Y2=a.getElementByKey(_Z3.__key);}}if(_X){var _Z4=a.getElementByKey(_Q2.__key);if(null===_D2){var _xa2=a._config.theme,_Ea=document.createElement("div");_Ea.contentEditable="false";_Ea.setAttribute("data-lexical-cursor","true");
var _V2=_xa2.blockCursor;if(void 0!==_V2){var _Ea$classList;if("string"===typeof _V2){var _Fa=_V2.split(" ");_V2=_xa2.blockCursor=_Fa;}void 0!==_V2&&(_Ea$classList=_Ea.classList).add.apply(_Ea$classList,_V2);}a._blockCursorElement=_D2=_Ea;}d.style.caretColor="transparent";null===_Y2?_Z4.appendChild(_D2):_Z4.insertBefore(_D2,_Y2);break a;}}null!==_D2&&Bc(_D2,a,d);}null!==r&&r.observe(d,ef);}finally{T=p,S=m;}}if(null!==w){var Bf=w;var _D3=Array.from(a._listeners.mutation),_P3=_D3.length;for(var _Q3=0;_Q3<_P3;_Q3++){var _D3$_Q=_D3[_Q3],_ha3=_D3$_Q[0],_ib2=_D3$_Q[1],_X2=Bf.get(_ib2);void 0!==_X2&&_ha3(_X2,{dirtyLeaves:aa,prevEditorState:f,updateTags:ja});}}C(h)||
null===h||null!==g&&g.is(h)||a.dispatchCommand(ba,void 0);var Yc=a._pendingDecorators;null!==Yc&&(a._decorators=Yc,a._pendingDecorators=null,nf("decorator",a,!0,Yc));var Cf=fc(b||f),De=fc(c);Cf!==De&&nf("textcontent",a,!0,De);nf("update",a,!0,{dirtyElements:W,dirtyLeaves:aa,editorState:c,normalizedNodes:Ua,prevEditorState:b||f,tags:ja});a._deferred=[];if(0!==Qc.length){var _D4=a._updating;a._updating=!0;try{for(var _P4=0;_P4<Qc.length;_P4++){Qc[_P4]();}}finally{a._updating=_D4;}}var Ee=a._updates;if(0!==Ee.length){var _D5=
Ee.shift();if(_D5){var _P5=_D5[0],_Q4=_D5[1];of(a,_P5,_Q4);}}}}function nf(a,b,c){var e=b._updating;b._updating=c;try{var f=Array.from(b._listeners[a]);for(var _len2=arguments.length,d=new Array(_len2>3?_len2-3:0),_key2=3;_key2<_len2;_key2++){d[_key2-3]=arguments[_key2];}for(a=0;a<f.length;a++){f[a].apply(null,d);}}finally{b._updating=e;}}
function R(a,b,c){if(!1===a._updating||T!==a){var f=!1;a.update(function(){f=R(a,b,c);});return f;}var d=jc(a);for(var _f4=4;0<=_f4;_f4--){for(var g=0;g<d.length;g++){var e=d[g]._commands.get(b);if(void 0!==e&&(e=e[_f4],void 0!==e)){e=Array.from(e);var h=e.length;for(var k=0;k<h;k++){if(!0===e[k](c,a))return!0;}}}}return!1;}
function pf(a,b){var c=a._updates;for(b=b||!1;0!==c.length;){var d=c.shift();if(d){var _d=d,e=_d[0],f=_d[1],g=void 0;void 0!==f&&(d=f.onUpdate,g=f.tag,f.skipTransforms&&(b=!0),d&&a._deferred.push(d),g&&a._updateTags.add(g));e();}}return b;}
function of(a,b,c){var d=a._updateTags;var e,f=e=!1;if(void 0!==c){var g=c.onUpdate;e=c.tag;null!=e&&d.add(e);e=c.skipTransforms||!1;f=c.discrete||!1;}g&&a._deferred.push(g);c=a._editorState;g=a._pendingEditorState;var h=!1;if(null===g||g._readOnly)g=a._pendingEditorState=new qf(new Map((g||c)._nodeMap)),h=!0;g._flushSync=f;f=S;var k=U,m=T,q=a._updating;S=g;U=!1;a._updating=!0;T=a;try{h&&(a._headless?null!==c._selection&&(g._selection=c._selection.clone()):g._selection=$e(a));var p=a._compositionKey;
b();e=pf(a,e);bf(g,a);0!==a._dirtyType&&(e?gf(g,a):hf(g,a),pf(a),Hc(c,g,a._dirtyLeaves,a._dirtyElements));p!==a._compositionKey&&(g._flushSync=!0);var l=g._selection;if(C(l)){var r=g._nodeMap,w=l.focus.key;void 0!==r.get(l.anchor.key)&&void 0!==r.get(w)||n(19);}else Sd(l)&&0===l._nodes.size&&(g._selection=null);}catch(p){p instanceof Error&&a._onError(p);a._pendingEditorState=c;a._dirtyType=2;a._cloneNotNeeded.clear();a._dirtyLeaves=new Set();a._dirtyElements.clear();lf(a);return;}finally{S=f,U=k,T=m,
a._updating=q,Zb=0;}0!==a._dirtyType||rf(g,a)?g._flushSync?(g._flushSync=!1,lf(a)):h&&Kb(function(){lf(a);}):(g._flushSync=!1,h&&(d.clear(),a._deferred=[],a._pendingEditorState=null));}function v(a,b,c){a._updating?a._updates.push([b,c]):of(a,b,c);}var sf=function(_$d3){babelHelpers.inheritsLoose(sf,_$d3);function sf(a){return _$d3.call(this,a)||this;}var _proto8=sf.prototype;_proto8.decorate=function decorate(){n(47);};_proto8.isIsolated=function isIsolated(){return!1;};_proto8.isInline=function isInline(){return!0;};_proto8.isKeyboardSelectable=function isKeyboardSelectable(){return!0;};return sf;}($d);function y(a){return a instanceof sf;}var
tf=function(_$d4){babelHelpers.inheritsLoose(tf,_$d4);function tf(a){var _this3;_this3=_$d4.call(this,a)||this;_this3.__last=_this3.__first=null;_this3.__indent=_this3.__format=_this3.__size=0;_this3.__dir=null;return _this3;}var _proto9=tf.prototype;_proto9.getFormat=function getFormat(){return this.getLatest().__format;};_proto9.getFormatType=function getFormatType(){var a=this.getFormat();return mb[a]||"";};_proto9.getIndent=function getIndent(){return this.getLatest().__indent;};_proto9.getChildren=function getChildren(){var a=[],b=this.getFirstChild();for(;null!==b;){a.push(b),b=b.getNextSibling();}return a;};_proto9.getChildrenKeys=function getChildrenKeys(){var a=[],b=this.getFirstChild();for(;null!==b;){a.push(b.__key),b=b.getNextSibling();}return a;};_proto9.getChildrenSize=function getChildrenSize(){return this.getLatest().__size;};_proto9.isEmpty=function isEmpty(){return 0===
this.getChildrenSize();};_proto9.isDirty=function isDirty(){var a=F()._dirtyElements;return null!==a&&a.has(this.__key);};_proto9.isLastChild=function isLastChild(){var a=this.getLatest(),b=this.getParentOrThrow().getLastChild();return null!==b&&b.is(a);};_proto9.getAllTextNodes=function getAllTextNodes(){var a=[],b=this.getFirstChild();for(;null!==b;){B(b)&&a.push(b);if(E(b)){var c=b.getAllTextNodes();a.push.apply(a,c);}b=b.getNextSibling();}return a;};_proto9.getFirstDescendant=function getFirstDescendant(){var a=this.getFirstChild();for(;null!==a;){if(E(a)){var b=a.getFirstChild();if(null!==b){a=b;continue;}}break;}return a;};_proto9.getLastDescendant=function getLastDescendant(){var a=
this.getLastChild();for(;null!==a;){if(E(a)){var b=a.getLastChild();if(null!==b){a=b;continue;}}break;}return a;};_proto9.getDescendantByIndex=function getDescendantByIndex(a){var b=this.getChildren(),c=b.length;if(a>=c)return a=b[c-1],E(a)&&a.getLastDescendant()||a||null;a=b[a];return E(a)&&a.getFirstDescendant()||a||null;};_proto9.getFirstChild=function getFirstChild(){var a=this.getLatest().__first;return null===a?null:I(a);};_proto9.getFirstChildOrThrow=function getFirstChildOrThrow(){var a=this.getFirstChild();null===a&&n(45,this.__key);return a;};_proto9.getLastChild=function getLastChild(){var a=this.getLatest().__last;return null===
a?null:I(a);};_proto9.getLastChildOrThrow=function getLastChildOrThrow(){var a=this.getLastChild();null===a&&n(96,this.__key);return a;};_proto9.getChildAtIndex=function getChildAtIndex(a){var b=this.getChildrenSize();var c;if(a<b/2){c=this.getFirstChild();for(b=0;null!==c&&b<=a;){if(b===a)return c;c=c.getNextSibling();b++;}return null;}c=this.getLastChild();for(--b;null!==c&&b>=a;){if(b===a)return c;c=c.getPreviousSibling();b--;}return null;};_proto9.getTextContent=function getTextContent(){var a="",b=this.getChildren(),c=b.length;for(var d=0;d<c;d++){var e=b[d];a+=e.getTextContent();E(e)&&d!==c-1&&!e.isInline()&&(
a+="\n\n");}return a;};_proto9.getTextContentSize=function getTextContentSize(){var a=0,b=this.getChildren(),c=b.length;for(var d=0;d<c;d++){var e=b[d];a+=e.getTextContentSize();E(e)&&d!==c-1&&!e.isInline()&&(a+=2);}return a;};_proto9.getDirection=function getDirection(){return this.getLatest().__dir;};_proto9.hasFormat=function hasFormat(a){return""!==a?(a=lb[a],0!==(this.getFormat()&a)):!1;};_proto9.select=function select(a,b){G();var c=u(),d=a,e=b;var f=this.getChildrenSize();if(!this.canBeEmpty())if(0===a&&0===b){if(a=this.getFirstChild(),B(a)||E(a))return a.select(0,0);}else if(!(void 0!==a&&a!==f||void 0!==b&&b!==f)&&(
a=this.getLastChild(),B(a)||E(a)))return a.select();void 0===d&&(d=f);void 0===e&&(e=f);f=this.__key;if(C(c))c.anchor.set(f,d,"element"),c.focus.set(f,e,"element"),c.dirty=!0;else return re(f,d,f,e,"element","element");return c;};_proto9.selectStart=function selectStart(){var a=this.getFirstDescendant();return a?a.selectStart():this.select();};_proto9.selectEnd=function selectEnd(){var a=this.getLastDescendant();return a?a.selectEnd():this.select();};_proto9.clear=function clear(){var a=this.getWritable();this.getChildren().forEach(function(b){return b.remove();});return a;};_proto9.append=function append(){for(var _len3=arguments.length,a=new Array(_len3),_key3=0;_key3<_len3;_key3++){a[_key3]=arguments[_key3];}return this.splice(this.getChildrenSize(),
0,a);};_proto9.setDirection=function setDirection(a){var b=this.getWritable();b.__dir=a;return b;};_proto9.setFormat=function setFormat(a){this.getWritable().__format=""!==a?lb[a]:0;return this;};_proto9.setIndent=function setIndent(a){this.getWritable().__indent=a;return this;};_proto9.splice=function splice(a,b,c){var d=c.length,e=this.getChildrenSize(),f=this.getWritable(),g=f.__key;var h=[],k=[];var m=this.getChildAtIndex(a+b),q=null,p=e-b+d;if(0!==a)if(a===e)q=this.getLastChild();else{var l=this.getChildAtIndex(a);null!==l&&(q=l.getPreviousSibling());}if(0<b){var r=null===q?this.getFirstChild():q.getNextSibling();
for(l=0;l<b;l++){null===r&&n(100);var w=r.getNextSibling(),A=r.__key;r=r.getWritable();ac(r);k.push(A);r=w;}}l=q;for(w=0;w<d;w++){A=c[w];null!==l&&A.is(l)&&(q=l=l.getPreviousSibling());r=A.getWritable();r.__parent===g&&p--;ac(r);var x=A.__key;null===l?(f.__first=x,r.__prev=null):(l=l.getWritable(),l.__next=x,r.__prev=l.__key);A.__key===g&&n(76);r.__parent=g;h.push(x);l=A;}a+b===e?null!==l&&(l.getWritable().__next=null,f.__last=l.__key):null!==m&&(a=m.getWritable(),null!==l?(b=l.getWritable(),a.__prev=
l.__key,b.__next=m.__key):a.__prev=null);f.__size=p;if(k.length&&(a=u(),C(a))){k=new Set(k);h=new Set(h);var _a11=a,_x2=_a11.anchor,z=_a11.focus;uf(_x2,k,h)&&Yd(_x2,_x2.getNode(),this,q,m);uf(z,k,h)&&Yd(z,z.getNode(),this,q,m);0!==p||this.canBeEmpty()||wc(this)||this.remove();}return f;};_proto9.exportJSON=function exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1};};_proto9.insertNewAfter=function insertNewAfter(){return null;};_proto9.canIndent=function canIndent(){return!0;};_proto9.collapseAtStart=function collapseAtStart(){return!1;};_proto9.excludeFromCopy=function excludeFromCopy(){return!1;};_proto9.canReplaceWith=function canReplaceWith(){return!0;};_proto9.canInsertAfter=function canInsertAfter(){return!0;};_proto9.canBeEmpty=function canBeEmpty(){return!0;};_proto9.canInsertTextBefore=function canInsertTextBefore(){return!0;};_proto9.canInsertTextAfter=function canInsertTextAfter(){return!0;};_proto9.isInline=function isInline(){return!1;};_proto9.isShadowRoot=function isShadowRoot(){return!1;};_proto9.canMergeWith=function canMergeWith(){return!1;};_proto9.extractWithChild=function extractWithChild(){return!1;};return tf;}($d);
function E(a){return a instanceof tf;}function uf(a,b,c){for(a=a.getNode();a;){var d=a.__key;if(b.has(d)&&!c.has(d))return!0;a=a.getParent();}return!1;}var
vf=function(_tf){babelHelpers.inheritsLoose(vf,_tf);vf.getType=function getType(){return"root";};vf.clone=function clone(){return new vf();};function vf(){var _this4;_this4=_tf.call(this,"root")||this;_this4.__cachedText=null;return _this4;}var _proto10=vf.prototype;_proto10.getTopLevelElementOrThrow=function getTopLevelElementOrThrow(){n(51);};_proto10.getTextContent=function getTextContent(){var a=this.__cachedText;return!dc()&&0!==F()._dirtyType||null===a?_tf.prototype.getTextContent.call(this):a;};_proto10.remove=function remove(){n(52);};_proto10.replace=function replace(){n(53);};_proto10.insertBefore=function insertBefore(){n(54);};_proto10.insertAfter=function insertAfter(){n(55);};_proto10.updateDOM=function updateDOM(){return!1;};_proto10.append=function append(){var _tf$prototype$append;for(var _len4=arguments.length,a=new Array(_len4),_key4=0;_key4<_len4;_key4++){a[_key4]=arguments[_key4];}for(var b=0;b<a.length;b++){var c=a[b];E(c)||y(c)||n(56);}return(_tf$prototype$append=_tf.prototype.append).call.apply(_tf$prototype$append,[this].concat(a));};vf.importJSON=function importJSON(a){var b=J();b.setFormat(a.format);
b.setIndent(a.indent);b.setDirection(a.direction);return b;};_proto10.exportJSON=function exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1};};_proto10.collapseAtStart=function collapseAtStart(){return!0;};return vf;}(tf);function L(a){return a instanceof vf;}function rf(a,b){b=b.getEditorState()._selection;a=a._selection;if(null!==a){if(a.dirty||!a.is(b))return!0;}else if(null!==b)return!0;return!1;}function wf(){return new qf(new Map([["root",new vf()]]));}
function xf(a){var b=a.exportJSON();var c=a.constructor;b.type!==c.getType()&&n(130,c.name);if(E(a)){var d=b.children;Array.isArray(d)||n(59,c.name);a=a.getChildren();for(c=0;c<a.length;c++){var e=xf(a[c]);d.push(e);}}return b;}var
qf=function(){function qf(a,b){this._nodeMap=a;this._selection=b||null;this._readOnly=this._flushSync=!1;}var _proto11=qf.prototype;_proto11.isEmpty=function isEmpty(){return 1===this._nodeMap.size&&null===this._selection;};_proto11.read=function read(a){return kf(this,a);};_proto11.clone=function clone(a){a=new qf(this._nodeMap,void 0===a?this._selection:a);a._readOnly=!0;return a;};_proto11.toJSON=function toJSON(){return kf(this,function(){return{root:xf(J())};});};return qf;}();var
Df=function(_tf2){babelHelpers.inheritsLoose(Df,_tf2);function Df(){return _tf2.apply(this,arguments)||this;}Df.getType=function getType(){return"paragraph";};Df.clone=function clone(a){return new Df(a.__key);};var _proto12=Df.prototype;_proto12.createDOM=function createDOM(a){var _b$classList;var b=document.createElement("p");a=oc(a.theme,"paragraph");void 0!==a&&(_b$classList=b.classList).add.apply(_b$classList,a);return b;};_proto12.updateDOM=function updateDOM(){return!1;};Df.importDOM=function importDOM(){return{p:function p(){return{conversion:Ef,priority:0};}};};_proto12.exportDOM=function exportDOM(a){var _tf2$prototype$export=_tf2.prototype.exportDOM.call(this,a);a=_tf2$prototype$export.element;if(a&&Cc(a)){this.isEmpty()&&a.append(document.createElement("br"));var b=this.getFormatType();a.style.textAlign=b;if(b=this.getDirection())a.dir=b;b=this.getIndent();
0<b&&(a.style.textIndent=20*b+"px");}return{element:a};};Df.importJSON=function importJSON(a){var b=be();b.setFormat(a.format);b.setIndent(a.indent);b.setDirection(a.direction);return b;};_proto12.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_tf2.prototype.exportJSON.call(this),{type:"paragraph",version:1});};_proto12.insertNewAfter=function insertNewAfter(a,b){a=be();var c=this.getDirection();a.setDirection(c);this.insertAfter(a,b);return a;};_proto12.collapseAtStart=function collapseAtStart(){var a=this.getChildren();if(0===a.length||B(a[0])&&""===a[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),
this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0;}return!1;};return Df;}(tf);function Ef(a){var b=be();a.style&&(b.setFormat(a.style.textAlign),a=parseInt(a.style.textIndent,10)/20,0<a&&b.setIndent(a));return{node:b};}function be(){return yc(new Df());}
function mf(a,b,c,d){var e=a._keyToDOMMap;e.clear();a._editorState=wf();a._pendingEditorState=d;a._compositionKey=null;a._dirtyType=0;a._cloneNotNeeded.clear();a._dirtyLeaves=new Set();a._dirtyElements.clear();a._normalizedNodes=new Set();a._updateTags=new Set();a._updates=[];a._blockCursorElement=null;d=a._observer;null!==d&&(d.disconnect(),a._observer=null);null!==b&&(b.textContent="");null!==c&&(c.textContent="",e.set("root",c));}
function Ff(a,b){var c=new Map(),d=new Set(),e=function e(f){Object.keys(f).forEach(function(g){var h=c.get(g);void 0===h&&(h=[],c.set(g,h));h.push(f[g]);});};a.forEach(function(f){f=null!=f.klass.importDOM?f.klass.importDOM.bind(f.klass):null;null==f||d.has(f)||(d.add(f),f=f(),null!==f&&e(f));});b&&e(b);return c;}var
Gf=function(){function Gf(a,b,c,d,e,f,g){this._parentEditor=b;this._rootElement=null;this._editorState=a;this._compositionKey=this._pendingEditorState=null;this._deferred=[];this._keyToDOMMap=new Map();this._updates=[];this._updating=!1;this._listeners={decorator:new Set(),editable:new Set(),mutation:new Map(),root:new Set(),textcontent:new Set(),update:new Set()};this._commands=new Map();this._config=d;this._nodes=c;this._decorators={};this._pendingDecorators=null;this._dirtyType=0;this._cloneNotNeeded=new Set();this._dirtyLeaves=
new Set();this._dirtyElements=new Map();this._normalizedNodes=new Set();this._updateTags=new Set();this._observer=null;this._key=kc();this._onError=e;this._htmlConversions=f;this._editable=g;this._headless=null!==b&&b._headless;this._blockCursorElement=this._window=null;}var _proto13=Gf.prototype;_proto13.isComposing=function isComposing(){return null!=this._compositionKey;};_proto13.registerUpdateListener=function registerUpdateListener(a){var b=this._listeners.update;b.add(a);return function(){b["delete"](a);};};_proto13.registerEditableListener=function registerEditableListener(a){var b=this._listeners.editable;b.add(a);return function(){b["delete"](a);};};_proto13.registerDecoratorListener=function registerDecoratorListener(a){var b=
this._listeners.decorator;b.add(a);return function(){b["delete"](a);};};_proto13.registerTextContentListener=function registerTextContentListener(a){var b=this._listeners.textcontent;b.add(a);return function(){b["delete"](a);};};_proto13.registerRootListener=function registerRootListener(a){var _this6=this;var b=this._listeners.root;a(this._rootElement,null);b.add(a);return function(){a(null,_this6._rootElement);b["delete"](a);};};_proto13.registerCommand=function registerCommand(a,b,c){void 0===c&&n(35);var d=this._commands;d.has(a)||d.set(a,[new Set(),new Set(),new Set(),new Set(),new Set()]);var e=d.get(a);void 0===e&&n(36,String(a));var f=e[c];f.add(b);return function(){f["delete"](b);
e.every(function(g){return 0===g.size;})&&d["delete"](a);};};_proto13.registerMutationListener=function registerMutationListener(a,b){void 0===this._nodes.get(a.getType())&&n(37,a.name);var c=this._listeners.mutation;c.set(b,a);return function(){c["delete"](b);};};_proto13.registerNodeTransformToKlass=function registerNodeTransformToKlass(a,b){var c=a.getType();c=this._nodes.get(c);void 0===c&&n(37,a.name);c.transforms.add(b);return c;};_proto13.registerNodeTransform=function registerNodeTransform(a,b){var c=this.registerNodeTransformToKlass(a,b);var d=[c];c=c.replaceWithKlass;null!=c&&(c=this.registerNodeTransformToKlass(c,b),d.push(c));gc(this,a.getType());return function()
{d.forEach(function(e){return e.transforms["delete"](b);});};};_proto13.hasNode=function hasNode(a){return this._nodes.has(a.getType());};_proto13.hasNodes=function hasNodes(a){return a.every(this.hasNode.bind(this));};_proto13.dispatchCommand=function dispatchCommand(a,b){return R(this,a,b);};_proto13.getDecorators=function getDecorators(){return this._decorators;};_proto13.getRootElement=function getRootElement(){return this._rootElement;};_proto13.getKey=function getKey(){return this._key;};_proto13.setRootElement=function setRootElement(a){var b=this._rootElement;if(a!==b){var _a$classList;var f=oc(this._config.theme,"root");var c=this._pendingEditorState||this._editorState;this._rootElement=a;mf(this,b,a,c);if(null!==b){var _b$classList2;if(!this._config.disableEvents){0!==
Fd&&(Fd--,0===Fd&&b.ownerDocument.removeEventListener("selectionchange",Vd));var d=b.__lexicalEditor;if(null!==d&&void 0!==d){if(null!==d._parentEditor){var e=jc(d);e=e[e.length-1]._key;Ud.get(e)===d&&Ud["delete"](e);}else Ud["delete"](d._key);b.__lexicalEditor=null;}d=Td(b);for(e=0;e<d.length;e++){d[e]();}b.__lexicalEventHandles=[];}null!=f&&(_b$classList2=b.classList).remove.apply(_b$classList2,f);}null!==a?(c=(c=a.ownerDocument)&&c.defaultView||null,d=a.style,d.userSelect="text",d.whiteSpace="pre-wrap",d.wordBreak="break-word",a.setAttribute("data-lexical-editor",
"true"),this._window=c,this._dirtyType=2,Cb(this),this._updateTags.add("history-merge"),lf(this),this._config.disableEvents||Wd(a,this),null!=f&&(_a$classList=a.classList).add.apply(_a$classList,f)):(this._editorState=c,this._window=this._pendingEditorState=null);nf("root",this,!1,a,b);}};_proto13.getElementByKey=function getElementByKey(a){return this._keyToDOMMap.get(a)||null;};_proto13.getEditorState=function getEditorState(){return this._editorState;};_proto13.setEditorState=function setEditorState(a,b){a.isEmpty()&&n(38);Bb(this);var c=this._pendingEditorState,d=this._updateTags;b=void 0!==b?b.tag:null;null===c||c.isEmpty()||(
null!=b&&d.add(b),lf(this));this._pendingEditorState=a;this._dirtyType=2;this._dirtyElements.set("root",!1);this._compositionKey=null;null!=b&&d.add(b);lf(this);};_proto13.parseEditorState=function parseEditorState(a,b){a="string"===typeof a?JSON.parse(a):a;var c=wf(),d=S,e=U,f=T,g=this._dirtyElements,h=this._dirtyLeaves,k=this._cloneNotNeeded,m=this._dirtyType;this._dirtyElements=new Map();this._dirtyLeaves=new Set();this._cloneNotNeeded=new Set();this._dirtyType=0;S=c;U=!1;T=this;try{jf(a.root,this._nodes),b&&b(),c._readOnly=!0;}catch(q){q instanceof
Error&&this._onError(q);}finally{this._dirtyElements=g,this._dirtyLeaves=h,this._cloneNotNeeded=k,this._dirtyType=m,S=d,U=e,T=f;}return c;};_proto13.update=function update(a,b){v(this,a,b);};_proto13.focus=function focus(a,b){if(b===void 0){b={};}var c=this._rootElement;null!==c&&(c.setAttribute("autocapitalize","off"),v(this,function(){var d=u(),e=J();null!==d?d.dirty=!0:0!==e.getChildrenSize()&&("rootStart"===b.defaultSelection?e.selectStart():e.selectEnd());},{onUpdate:function onUpdate(){c.removeAttribute("autocapitalize");a&&a();},tag:"focus"}),null===this._pendingEditorState&&c.removeAttribute("autocapitalize"));};_proto13.blur=function blur(){var a=
this._rootElement;null!==a&&a.blur();a=wb(this._window);null!==a&&a.removeAllRanges();};_proto13.isEditable=function isEditable(){return this._editable;};_proto13.setEditable=function setEditable(a){this._editable!==a&&(this._editable=a,nf("editable",this,!0,a));};_proto13.toJSON=function toJSON(){return{editorState:this._editorState.toJSON()};};return Gf;}();exports.$addUpdateTag=function(a){G();F()._updateTags.add(a);};exports.$applyNodeReplacement=yc;exports.$copyNode=xc;exports.$createLineBreakNode=ge;exports.$createNodeSelection=Ve;exports.$createParagraphNode=be;exports.$createPoint=Ke;
exports.$createRangeSelection=function(){var a=Ke("root",0,"element"),b=Ke("root",0,"element");return new Pe(a,b,0,"");};exports.$createTabNode=ue;exports.$createTextNode=K;exports.$getAdjacentNode=rc;exports.$getCharacterOffsets=Qe;exports.$getEditor=function(){return F();};exports.$getNearestNodeFromDOMNode=vb;exports.$getNearestRootOrShadowRoot=vc;exports.$getNodeByKey=I;exports.$getPreviousSelection=mc;exports.$getRoot=J;exports.$getSelection=u;
exports.$getTextContent=function(){var a=u();return null===a?"":a.getTextContent();};exports.$hasAncestor=uc;exports.$hasUpdateTag=function(a){return F()._updateTags.has(a);};exports.$insertNodes=function(a){var b=u()||mc();null===b&&(b=J().selectEnd());b.insertNodes(a);};exports.$isBlockElementNode=function(a){return E(a)&&!a.isInline();};exports.$isDecoratorNode=y;exports.$isElementNode=E;exports.$isInlineElementOrDecoratorNode=function(a){return E(a)&&a.isInline()||y(a)&&a.isInline();};
exports.$isLeafNode=function(a){return B(a)||Ec(a)||y(a);};exports.$isLineBreakNode=Ec;exports.$isNodeSelection=Sd;exports.$isParagraphNode=function(a){return a instanceof Df;};exports.$isRangeSelection=C;exports.$isRootNode=L;exports.$isRootOrShadowRoot=wc;exports.$isTabNode=Ie;exports.$isTextNode=B;exports.$nodesOfType=function(a){var b=$b();var c=b._readOnly,d=a.getType();b=b._nodeMap;var e=[];for(var _iterator11=b,_isArray11=Array.isArray(_iterator11),_i12=0,_iterator11=_isArray11?_iterator11:_iterator11[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref18;if(_isArray11){if(_i12>=_iterator11.length)break;_ref18=_iterator11[_i12++];}else{_i12=_iterator11.next();if(_i12.done)break;_ref18=_i12.value;}var _ref19=_ref18;var f=_ref19[1];f instanceof a&&f.__type===d&&(c||f.isAttached())&&e.push(f);}return e;};
exports.$normalizeSelection__EXPERIMENTAL=Hb;exports.$parseSerializedNode=function(a){return jf(a,F()._nodes);};exports.$selectAll=function(){var a=J();a=a.select(0,a.getChildrenSize());zb(Hb(a));};exports.$setCompositionKey=H;exports.$setSelection=zb;
exports.$splitNode=function(a,b){var c=a.getChildAtIndex(b);null==c&&(c=a);wc(a)&&n(102);var d=function d(g){var h=g.getParentOrThrow(),k=wc(h),m=g!==c||k?xc(g):g;if(k)return E(g)&&E(m)||n(133),g.insertAfter(m),[g,m,m];var _d3=d(h),q=_d3[0],p=_d3[1],l=_d3[2];g=g.getNextSiblings();l.append.apply(l,[m].concat(g));return[q,p,m];},_d2=d(c),e=_d2[0],f=_d2[1];return[e,f];};exports.BLUR_COMMAND=Ra;exports.CAN_REDO_COMMAND={};exports.CAN_UNDO_COMMAND={};exports.CLEAR_EDITOR_COMMAND={};exports.CLEAR_HISTORY_COMMAND={};exports.CLICK_COMMAND=ca;
exports.COMMAND_PRIORITY_CRITICAL=4;exports.COMMAND_PRIORITY_EDITOR=0;exports.COMMAND_PRIORITY_HIGH=3;exports.COMMAND_PRIORITY_LOW=1;exports.COMMAND_PRIORITY_NORMAL=2;exports.CONTROLLED_TEXT_INSERTION_COMMAND=ka;exports.COPY_COMMAND=Na;exports.CUT_COMMAND=Oa;exports.DELETE_CHARACTER_COMMAND=da;exports.DELETE_LINE_COMMAND=pa;exports.DELETE_WORD_COMMAND=oa;exports.DRAGEND_COMMAND=Ma;exports.DRAGOVER_COMMAND=La;exports.DRAGSTART_COMMAND=Ka;exports.DROP_COMMAND=Ja;exports.DecoratorNode=sf;
exports.ElementNode=tf;exports.FOCUS_COMMAND=Qa;exports.FORMAT_ELEMENT_COMMAND={};exports.FORMAT_TEXT_COMMAND=qa;exports.INDENT_CONTENT_COMMAND={};exports.INSERT_LINE_BREAK_COMMAND=ea;exports.INSERT_PARAGRAPH_COMMAND=fa;exports.INSERT_TAB_COMMAND={};exports.KEY_ARROW_DOWN_COMMAND=Aa;exports.KEY_ARROW_LEFT_COMMAND=wa;exports.KEY_ARROW_RIGHT_COMMAND=ua;exports.KEY_ARROW_UP_COMMAND=za;exports.KEY_BACKSPACE_COMMAND=Da;exports.KEY_DELETE_COMMAND=Ha;exports.KEY_DOWN_COMMAND=ta;
exports.KEY_ENTER_COMMAND=Ba;exports.KEY_ESCAPE_COMMAND=Ga;exports.KEY_MODIFIER_COMMAND=Sa;exports.KEY_SPACE_COMMAND=Ca;exports.KEY_TAB_COMMAND=Ia;exports.LineBreakNode=de;exports.MOVE_TO_END=va;exports.MOVE_TO_START=ya;exports.OUTDENT_CONTENT_COMMAND={};exports.PASTE_COMMAND=la;exports.ParagraphNode=Df;exports.REDO_COMMAND=sa;exports.REMOVE_TEXT_COMMAND=ma;exports.RootNode=vf;exports.SELECTION_CHANGE_COMMAND=ba;exports.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND={};exports.SELECT_ALL_COMMAND=Pa;
exports.TabNode=He;exports.TextNode=me;exports.UNDO_COMMAND=ra;exports.createCommand=function(){return{};};
exports.createEditor=function(a){var b=a||{},c=T,d=b.theme||{};var e=void 0===a?c:b.parentEditor||null,f=b.disableEvents||!1,g=wf(),h=b.namespace||(null!==e?e._config.namespace:kc()),k=b.editorState,m=[vf,me,de,He,Df].concat(b.nodes||[]),_b3=b,q=_b3.onError,p=_b3.html;b=void 0!==b.editable?b.editable:!0;if(void 0===a&&null!==c)a=c._nodes;else for(a=new Map(),c=0;c<m.length;c++){var r=m[c],w=null;var l=null;"function"!==typeof r&&(l=r,r=l.replace,w=l["with"],l=l.withKlass||null);var A=r.getType(),x=r.transform(),z=
new Set();null!==x&&z.add(x);a.set(A,{exportDOM:p&&p["export"]?p["export"].get(r):void 0,klass:r,replace:w,replaceWithKlass:l,transforms:z});}d=new Gf(g,e,a,{disableEvents:f,namespace:h,theme:d},q?q:console.error,Ff(a,p?p["import"]:void 0),b);void 0!==k&&(d._pendingEditorState=k,d._dirtyType=2);return d;};exports.getNearestEditorFromDOMNode=Tb;exports.isCurrentlyReadOnlyMode=dc;exports.isHTMLAnchorElement=function(a){return Cc(a)&&"A"===a.tagName;};exports.isHTMLElement=Cc;
exports.isSelectionCapturedInDecoratorInput=Rb;exports.isSelectionWithinEditor=Sb;}),null);
__d("LexicalClipboard",["cr:862"],(function(a,b,c,d,e,f){e.exports=b("cr:862")}),null);
__d("LexicalHtml",["cr:1497"],(function(a,b,c,d,e,f){e.exports=b("cr:1497")}),null);
__d("LexicalSelection",["cr:2180"],(function(a,b,c,d,e,f){e.exports=b("cr:2180")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalClipboard.prod",["Lexical","LexicalHtml","LexicalSelection","LexicalUtils","Promise","regeneratorRuntime"],(function $module_LexicalClipboard_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';var _require_closure_Promise;function t(a){var b=new URLSearchParams();b.append("code",a);for(var c=1;c<arguments.length;c++){b.append("v",arguments[c]);}throw Error("Minified Lexical error #"+a+"; visit https://lexical.dev/docs/error?"+b+" for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}
var u="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function v(a){var b=require("Lexical").$getSelection();if(null==b)throw Error("Expected valid LexicalSelection");return require("Lexical").$isRangeSelection(b)&&b.isCollapsed()||0===b.getNodes().length?"":require("LexicalHtml").$generateHtmlFromNodes(a,b);}
function w(a){var b=require("Lexical").$getSelection();if(null==b)throw Error("Expected valid LexicalSelection");return require("Lexical").$isRangeSelection(b)&&b.isCollapsed()||0===b.getNodes().length?null:JSON.stringify(x(a,b));}function y(a,b,c){a.dispatchCommand(require("Lexical").SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,{nodes:b,selection:c})||c.insertNodes(b);}
function z(a,b,c,d){if(d===void 0){d=[];}var e=null!==b?c.isSelected(b):!0,h=require("Lexical").$isElementNode(c)&&c.excludeFromCopy("html");var g=c;if(null!==b){var k=require("LexicalSelection").$cloneWithProperties(c);g=k=require("Lexical").$isTextNode(k)&&null!==b?require("LexicalSelection").$sliceSelectedTextNodeContent(b,k):k;}var n=require("Lexical").$isElementNode(g)?g.getChildren():[];var l=g;k=l.exportJSON();var p=l.constructor;k.type!==p.getType()&&t(58,p.name);require("Lexical").$isElementNode(l)&&(Array.isArray(k.children)||t(59,p.name));require("Lexical").$isTextNode(g)&&(g=g.__text,0<g.length?k.text=g:e=!1);for(g=0;g<n.length;g++){l=n[g],
p=z(a,b,l,k.children),!e&&require("Lexical").$isElementNode(c)&&p&&c.extractWithChild(l,b,"clone")&&(e=!0);}if(e&&!h)d.push(k);else if(Array.isArray(k.children))for(a=0;a<k.children.length;a++){d.push(k.children[a]);}return e;}function x(a,b){var c=[],d=require("Lexical").$getRoot().getChildren();for(var e=0;e<d.length;e++){z(a,b,d[e],c);}return{namespace:a._config.namespace,nodes:c};}function A(a){var b=[];for(var c=0;c<a.length;c++){var d=require("Lexical").$parseSerializedNode(a[c]);require("Lexical").$isTextNode(d)&&require("LexicalSelection").$addNodeStyle(d);b.push(d);}return b;}var B=null;
function C(a,b){var c=u?(a._window||window).getSelection():null;if(!c)return!1;var d=c.anchorNode;c=c.focusNode;if(null!==d&&null!==c&&!require("Lexical").isSelectionWithinEditor(a,d,c))return!1;b.preventDefault();b=b.clipboardData;d=require("Lexical").$getSelection();if(null===b||null===d)return!1;c=v(a);a=w(a);var e="";null!==d&&(e=d.getTextContent());null!==c&&b.setData("text/html",c);null!==a&&b.setData("application/x-lexical-editor",a);b.setData("text/plain",e);return!0;}exports.$generateJSONFromSelectedNodes=x;
exports.$generateNodesFromSerializedNodes=A;exports.$getHtmlContent=v;exports.$getLexicalContent=w;exports.$insertDataTransferForPlainText=function(a,b){a=a.getData("text/plain")||a.getData("text/uri-list");null!=a&&b.insertRawText(a);};
exports.$insertDataTransferForRichText=function(a,b,c){var d=a.getData("application/x-lexical-editor");if(d)try{var h=JSON.parse(d);if(h.namespace===c._config.namespace&&Array.isArray(h.nodes)){var g=A(h.nodes);return y(c,g,b);}}catch(h){}if(d=a.getData("text/html"))try{var e=new DOMParser().parseFromString(d,"text/html");var _h=require("LexicalHtml").$generateNodesFromDOM(c,e);return y(c,_h,b);}catch(h){}a=a.getData("text/plain")||a.getData("text/uri-list");if(null!=a)if(require("Lexical").$isRangeSelection(b))for(a=a.split(/(\r?\n|\t)/),
""===a[a.length-1]&&a.pop(),c=0;c<a.length;c++){e=a[c],"\n"===e||"\r\n"===e?b.insertParagraph():"\t"===e?b.insertNodes([require("Lexical").$createTabNode()]):b.insertText(e);}else b.insertRawText(a);};exports.$insertGeneratedNodes=y;
exports.copyToClipboard=function _callee(a,b){var c,d,e,h;return require("regeneratorRuntime").async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(null!==B)){_context.next=2;break;}return _context.abrupt("return",!1);case 2:if(!(null!==b)){_context.next=4;break;}return _context.abrupt("return",new(_require_closure_Promise||(_require_closure_Promise=require("Promise")))(function(g){a.update(function(){g(C(a,b));});}));case 4:c=a.getRootElement();d=null==a._window?window.document:a._window.document,e=u?(a._window||window).getSelection():null;if(!(null===c||null===e)){_context.next=8;break;}return _context.abrupt("return",!1);case 8:h=d.createElement("span");h.style.cssText="position: fixed; top: -1000px;";h.append(d.createTextNode("#"));c.append(h);c=new Range();c.setStart(h,0);c.setEnd(h,1);e.removeAllRanges();e.addRange(c);return _context.abrupt("return",new(_require_closure_Promise||(_require_closure_Promise=require("Promise")))(function(g)
{var k=a.registerCommand(require("Lexical").COPY_COMMAND,function(n){require("LexicalUtils").objectKlassEquals(n,ClipboardEvent)&&(k(),null!==B&&(window.clearTimeout(B),B=null),g(C(a,n)));return!0;},require("Lexical").COMMAND_PRIORITY_CRITICAL);B=window.setTimeout(function(){k();B=null;g(!1);},50);d.execCommand("copy");h.remove();}));case 18:case"end":return _context.stop();}}},null,this);};}),null);
__d("LexicalDragon",["cr:2903"],(function(a,b,c,d,e,f){e.exports=b("cr:2903")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalDragon.prod",["Lexical"],(function $module_LexicalDragon_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';
exports.registerDragonSupport=function(m){var t=window.location.origin,r=function r(l){if(l.origin===t){var h=m.getRootElement();if(document.activeElement===h&&(h=l.data,"string"===typeof h)){try{var a=JSON.parse(h);}catch(k){return;}if(a&&"nuanria_messaging"===a.protocol&&"request"===a.type&&(a=a.payload)&&"makeChanges"===a.functionId&&(a=a.args)){var _a=a,k=_a[0],n=_a[1],p=_a[2],q=_a[3],u=_a[4];m.update(function(){var f=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(f)){var e=f.anchor;var b=e.getNode(),c=0,d=0;require("Lexical").$isTextNode(b)&&0<=k&&0<=n&&(c=k,
d=k+n,f.setTextNodeRange(b,c,b,d));if(c!==d||""!==p)f.insertRawText(p),b=e.getNode();require("Lexical").$isTextNode(b)&&(c=q,d=q+u,e=b.getTextContentSize(),c=c>e?e:c,d=d>e?e:d,f.setTextNodeRange(b,c,b,d));l.stopImmediatePropagation();}});}}}};window.addEventListener("message",r,!0);return function(){window.removeEventListener("message",r,!0);};};}),null);
__d("LexicalErrorBoundary",["cr:2260"],(function(a,b,c,d,e,f){e.exports=b("cr:2260")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalErrorBoundary.prod",["react"],(function $module_LexicalErrorBoundary_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';var _require_closure_react;var h=_require_closure_react||(_require_closure_react=require("react"));function m(b,c){m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,a){g.__proto__=a;return g;};return m(b,c);}function n(b,c){b.prototype=Object.create(c.prototype);b.prototype.constructor=b;m(b,c);}function r(b,c){void 0===b&&(b=[]);void 0===c&&(c=[]);return b.length!==c.length||b.some(function(g,a){return!Object.is(g,c[a]);});}
var t={error:null},u=function(b){function c(){for(var a,d=arguments.length,f=Array(d),e=0;e<d;e++){f[e]=arguments[e];}a=b.call.apply(b,[this].concat(f))||this;a.state=t;a.resetErrorBoundary=function(){for(var k,p=arguments.length,q=Array(p),l=0;l<p;l++){q[l]=arguments[l];}null==a.props.onReset?void 0:(k=a.props).onReset.apply(k,q);a.reset();};return a;}n(c,b);c.getDerivedStateFromError=function(a){return{error:a};};var g=c.prototype;g.reset=function(){this.setState(t);};g.componentDidCatch=function(a,d){var f,
e;null==(f=(e=this.props).onError)?void 0:f.call(e,a,d);};g.componentDidUpdate=function(a,d){var f=this.props.resetKeys;if(null!==this.state.error&&null!==d.error&&r(a.resetKeys,f)){var e,k;null==(e=(k=this.props).onResetKeysChange)?void 0:e.call(k,a.resetKeys,f);this.reset();}};g.render=function(){var a=this.state.error,d=this.props,f=d.fallbackRender,e=d.FallbackComponent;d=d.fallback;if(null!==a){a={error:a,resetErrorBoundary:this.resetErrorBoundary};if(h.isValidElement(d))return d;if("function"===
typeof f)return f(a);if(e)return h.createElement(e,a);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop");}return this.props.children;};return c;}(h.Component);module.exports=function(_ref){var b=_ref.children,c=_ref.onError;return h.createElement(u,{fallback:h.createElement("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"}},"An error was thrown."),onError:c},b);};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalHashtag.prod",["Lexical","LexicalUtils"],(function $module_LexicalHashtag_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';var
e=function(_d$TextNode){babelHelpers.inheritsLoose(e,_d$TextNode);e.getType=function getType(){return"hashtag";};e.clone=function clone(a){return new e(a.__text,a.__key);};function e(a,b){return _d$TextNode.call(this,a,b)||this;}var _proto=e.prototype;_proto.createDOM=function createDOM(a){var b=_d$TextNode.prototype.createDOM.call(this,a);require("LexicalUtils").addClassNamesToElement(b,a.theme.hashtag);return b;};e.importJSON=function importJSON(a){var b=f(a.text);b.setFormat(a.format);b.setDetail(a.detail);b.setMode(a.mode);b.setStyle(a.style);return b;};_proto.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_d$TextNode.prototype.exportJSON.call(this),{type:"hashtag"});};_proto.canInsertTextBefore=function canInsertTextBefore(){return!1;};_proto.isTextEntity=function isTextEntity(){return!0;};return e;}(require("Lexical").TextNode);
function f(a){if(a===void 0){a="";}return require("Lexical").$applyNodeReplacement(new e(a));}exports.$createHashtagNode=f;exports.$isHashtagNode=function(a){return a instanceof e;};exports.HashtagNode=e;}),null);
__d("LexicalHistory",["cr:2904"],(function(a,b,c,d,e,f){e.exports=b("cr:2904")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalHistory.prod",["Lexical","LexicalUtils"],(function $module_LexicalHistory_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';
function y(b,a,l,h,n){if(null===b||0===l.size&&0===h.size&&!n)return 0;var f=a._selection,d=b._selection;if(n)return 1;if(!(require("Lexical").$isRangeSelection(f)&&require("Lexical").$isRangeSelection(d)&&d.isCollapsed()&&f.isCollapsed()))return 0;n=a._nodeMap;var e=[];for(var _iterator=l,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value;}var m=_ref;l=n.get(m),void 0!==l&&e.push(l);}for(var _iterator2=h,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref3;if(_isArray2){if(_i2>=_iterator2.length)break;_ref3=_iterator2[_i2++];}else{_i2=_iterator2.next();if(_i2.done)break;_ref3=_i2.value;}var _ref4=_ref3;var _m=_ref4[0];var p=_ref4[1];p&&(h=n.get(_m),void 0===h||require("Lexical").$isRootNode(h)||e.push(h));}if(0===e.length)return 0;if(1<e.length)return h=a._nodeMap,a=h.get(f.anchor.key),d=h.get(d.anchor.key),a&&d&&!b._nodeMap.has(a.__key)&&require("Lexical").$isTextNode(a)&&
1===a.__text.length&&1===f.anchor.offset?2:0;a=e[0];b=b._nodeMap.get(a.__key);if(!require("Lexical").$isTextNode(b)||!require("Lexical").$isTextNode(a)||b.__mode!==a.__mode)return 0;b=b.__text;a=a.__text;if(b===a)return 0;f=f.anchor;d=d.anchor;if(f.key!==d.key||"text"!==f.type)return 0;f=f.offset;d=d.offset;b=a.length-b.length;return 1===b&&d===f-1?2:-1===b&&d===f+1?3:-1===b&&d===f?4:0;}
function z(b,a){var l=Date.now(),h=0;return function(n,f,d,e,m,p){var r=Date.now();if(p.has("historic"))return h=0,l=r,2;var q=y(n,f,e,m,b.isComposing()),v=function(){var k=null===d||d.editor===b,g=p.has("history-push");if(!g&&k&&p.has("history-merge"))return 0;if(null===n)return 1;var t=f._selection;if(!(0<e.size||0<m.size))return null!==t?0:2;if(!1===g&&0!==q&&q===h&&r<l+a&&k)return 0;if(1===e.size){{g=Array.from(e)[0];k=n._nodeMap.get(g);g=f._nodeMap.get(g);t=n._selection;var u=f._selection,w=!1;require("Lexical").$isRangeSelection(t)&&
require("Lexical").$isRangeSelection(u)&&(w="element"===t.anchor.type&&"element"===t.focus.type&&"text"===u.anchor.type&&"text"===u.focus.type);k=!w&&require("Lexical").$isTextNode(k)&&require("Lexical").$isTextNode(g)?k.__type===g.__type&&k.__text===g.__text&&k.__mode===g.__mode&&k.__detail===g.__detail&&k.__style===g.__style&&k.__format===g.__format&&k.__parent===g.__parent:!1;}if(k)return 0;}return 1;}();l=r;h=q;return v;};}exports.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]};};
exports.registerHistory=function(b,a,l){var _require_Lexical;var h=z(b,l);l=function l(_ref5){var d=_ref5.editorState,e=_ref5.prevEditorState,m=_ref5.dirtyLeaves,p=_ref5.dirtyElements,r=_ref5.tags;var q=a.current,v=a.redoStack,k=a.undoStack,g=null===q?null:q.editorState;if(null===q||d!==g){e=h(e,d,q,m,p,r);if(1===e)0!==v.length&&(a.redoStack=[],b.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!1)),null!==q&&(k.push(babelHelpers["extends"]({},q)),b.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!0));else if(2===e)return;a.current={editor:b,editorState:d};}};var n=require("LexicalUtils").mergeRegister(b.registerCommand((_require_Lexical=require("Lexical")).UNDO_COMMAND,
function(){var d=a.redoStack,e=a.undoStack;if(0!==e.length){var m=a.current,p=e.pop();null!==m&&(d.push(m),b.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!0));0===e.length&&b.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!1);a.current=p||null;p&&p.editor.setEditorState(p.editorState,{tag:"historic"});}return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),b.registerCommand(_require_Lexical.REDO_COMMAND,function(){var d=a.redoStack;var e=a.undoStack;if(0!==d.length){var m=a.current;null!==m&&(e.push(m),b.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!0));e=d.pop();0===d.length&&
b.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!1);a.current=e||null;e&&e.editor.setEditorState(e.editorState,{tag:"historic"});}return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),b.registerCommand(_require_Lexical.CLEAR_EDITOR_COMMAND,function(){a.undoStack=[];a.redoStack=[];a.current=null;return!1;},_require_Lexical.COMMAND_PRIORITY_EDITOR),b.registerCommand(_require_Lexical.CLEAR_HISTORY_COMMAND,function(){a.undoStack=[];a.redoStack=[];a.current=null;b.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!1);b.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!1);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),b.registerUpdateListener(l)),
f=b.registerUpdateListener(l);return function(){n();f();};};}),null);
__d("LexicalHistoryPlugin",["cr:293"],(function(a,b,c,d,e,f){e.exports=b("cr:293")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalHistoryPlugin.prod",["LexicalComposerContext","LexicalHistory","react"],(function $module_LexicalHistoryPlugin_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';var _require_closure_react;var g=_require_closure_react||(_require_closure_react=require("react"));function h(a,b,e){if(e===void 0){e=1E3;}var f=g.useMemo(function(){return b||require("LexicalHistory").createEmptyHistoryState();},[b]);g.useEffect(function(){return require("LexicalHistory").registerHistory(a,f,e);},[e,a,f]);}exports.createEmptyHistoryState=require("LexicalHistory").createEmptyHistoryState;exports.HistoryPlugin=function(_ref){var a=_ref.externalHistoryState;var _c$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),b=_c$useLexicalComposer[0];h(b,a);return null;};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalHtml.prod",["Lexical","LexicalSelection","LexicalUtils"],(function $module_LexicalHtml_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';
function u(c,e,h,a){if(a===void 0){a=null;}var f=null!==a?e.isSelected(a):!0,k=require("Lexical").$isElementNode(e)&&e.excludeFromCopy("html");var d=e;null!==a&&(d=require("LexicalSelection").$cloneWithProperties(e),d=require("Lexical").$isTextNode(d)&&null!==a?require("LexicalSelection").$sliceSelectedTextNodeContent(a,d):d);var g=require("Lexical").$isElementNode(d)?d.getChildren():[];var b=c._nodes.get(d.getType());b=b&&void 0!==b.exportDOM?b.exportDOM(c,d):d.exportDOM(c);var _b=b,l=_b.element,r=_b.after;if(!l)return!1;b=document.createDocumentFragment();for(var n=0;n<g.length;n++){var t=g[n],x=u(c,t,b,a);!f&&require("Lexical").$isElementNode(e)&&
x&&e.extractWithChild(t,a,"html")&&(f=!0);}f&&!k?(require("LexicalUtils").isHTMLElement(l)&&l.append(b),h.append(l),r&&(c=r.call(d,l))&&l.replaceWith(c)):h.append(b);return f;}var v=new Set(["STYLE","SCRIPT"]);
function w(c,e,h,a){var _k;if(h===void 0){h=new Map();}var f=[];if(v.has(c.nodeName))return f;var k=null;var d,_c=c,g=_c.nodeName,b=e._htmlConversions.get(g.toLowerCase());g=null;if(void 0!==b){for(var _iterator=b,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(_isArray){if(_i>=_iterator.length)break;d=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;d=_i.value;}b=d(c),null!==b&&(null===g||(g.priority||0)<(b.priority||0))&&(g=b);}}g=(d=null!==g?g.conversion:null)?d(c):null;d=null;if(null!==g){d=g.after;b=g.node;k=Array.isArray(b)?b[b.length-1]:b;if(null!==k){var _f;for(var _iterator2=h,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++];}else{_i2=_iterator2.next();if(_i2.done)break;_ref2=_i2.value;}var _ref=_ref2;var l=_ref[1];if(k=l(k,a),!k)break;}k&&(_f=f).push.apply(_f,Array.isArray(b)?b:[k]);}null!=g.forChild&&h.set(c.nodeName,g.forChild);}c=c.childNodes;
a=[];for(l=0;l<c.length;l++){var _a;(_a=a).push.apply(_a,w(c[l],e,new Map(h),k));}null!=d&&(a=d(a));null==k?f=f.concat(a):require("Lexical").$isElementNode(k)&&(_k=k).append.apply(_k,a);return f;}
exports.$generateHtmlFromNodes=function(c,e){if("undefined"===typeof document||"undefined"===typeof window&&"undefined"===typeof global.window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");var h=document.createElement("div"),a=require("Lexical").$getRoot().getChildren();for(var f=0;f<a.length;f++){u(c,a[f],h,e);}return h.innerHTML;};
exports.$generateNodesFromDOM=function(c,e){e=e.body?e.body.childNodes:[];var h=[];for(var f=0;f<e.length;f++){var a=e[f];v.has(a.nodeName)||(a=w(a,c),null!==a&&(h=h.concat(a)));}return h;};}),null);
__d("LexicalOverflow",["cr:2908"],(function(a,b,c,d,e,f){e.exports=b("cr:2908")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalOverflow.prod",["Lexical"],(function $module_LexicalOverflow_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';var
d=function(_b$ElementNode){babelHelpers.inheritsLoose(d,_b$ElementNode);d.getType=function getType(){return"overflow";};d.clone=function clone(a){return new d(a.__key);};d.importJSON=function importJSON(){return e();};d.importDOM=function importDOM(){return null;};function d(a){var _this;_this=_b$ElementNode.call(this,a)||this;_this.__type="overflow";return _this;}var _proto=d.prototype;_proto.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_b$ElementNode.prototype.exportJSON.call(this),{type:"overflow"});};_proto.createDOM=function createDOM(a){var c=document.createElement("span");a=a.theme.characterLimit;"string"===typeof a&&(c.className=a);return c;};_proto.updateDOM=function updateDOM(){return!1;};_proto.insertNewAfter=function insertNewAfter(a,c){if(c===void 0){c=!0;}return this.getParentOrThrow().insertNewAfter(a,c);};_proto.excludeFromCopy=function excludeFromCopy(){return!0;};return d;}(require("Lexical").ElementNode);
function e(){return require("Lexical").$applyNodeReplacement(new d());}exports.$createOverflowNode=e;exports.$isOverflowNode=function(a){return a instanceof d;};exports.OverflowNode=d;}),null);
__d("LexicalPlainText",["cr:2909"],(function(a,b,c,d,e,f){e.exports=b("cr:2909")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalPlainText.prod",["Lexical","LexicalClipboard","LexicalSelection","LexicalUtils"],(function $module_LexicalPlainText_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';var k="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,m=k&&"documentMode"in document?document.documentMode:null;k&&/Mac|iPod|iPhone|iPad/.test(navigator.platform);k&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);
var n=k&&"InputEvent"in window&&!m?"getTargetRanges"in new window.InputEvent("input"):!1,p=k&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),q=k&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;k&&/Android/.test(navigator.userAgent);var r=k&&/^(?=.*Chrome).*/i.test(navigator.userAgent),t=k&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!r;
function u(d,b){b.update(function(){if(null!==d){var c=d instanceof KeyboardEvent?null:d.clipboardData,e=require("Lexical").$getSelection();if(null!==e&&null!=c){d.preventDefault();var l=require("LexicalClipboard").$getHtmlContent(b);null!==l&&c.setData("text/html",l);c.setData("text/plain",e.getTextContent());}}});}function v(d,b){d.preventDefault();b.update(function(){var c=require("Lexical").$getSelection(),e=d.clipboardData;null!=e&&require("Lexical").$isRangeSelection(c)&&require("LexicalClipboard").$insertDataTransferForPlainText(e,c);},{tag:"paste"});}
function w(d,b){u(d,b);b.update(function(){var c=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(c)&&c.removeText();});}
exports.registerPlainText=function(d){var _require_Lexical;return require("LexicalUtils").mergeRegister(d.registerCommand((_require_Lexical=require("Lexical")).DELETE_CHARACTER_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;c.deleteCharacter(b);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.DELETE_WORD_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;c.deleteWord(b);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.DELETE_LINE_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;c.deleteLine(b);
return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.CONTROLLED_TEXT_INSERTION_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;if("string"===typeof b)c.insertText(b);else{var e=b.dataTransfer;null!=e?require("LexicalClipboard").$insertDataTransferForPlainText(e,c):(b=b.data)&&c.insertText(b);}return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.REMOVE_TEXT_COMMAND,function(){var b=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(b))return!1;b.removeText();return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.INSERT_LINE_BREAK_COMMAND,
function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;c.insertLineBreak(b);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.INSERT_PARAGRAPH_COMMAND,function(){var b=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(b))return!1;b.insertLineBreak();return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.KEY_ARROW_LEFT_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;var e=b.shiftKey;return require("LexicalSelection").$shouldOverrideDefaultCharacterSelection(c,!0)?(b.preventDefault(),require("LexicalSelection").$moveCharacter(c,
e,!0),!0):!1;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.KEY_ARROW_RIGHT_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;var e=b.shiftKey;return require("LexicalSelection").$shouldOverrideDefaultCharacterSelection(c,!1)?(b.preventDefault(),require("LexicalSelection").$moveCharacter(c,e,!1),!0):!1;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.KEY_BACKSPACE_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;b.preventDefault();return d.dispatchCommand(require("Lexical").DELETE_CHARACTER_COMMAND,!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),
d.registerCommand(_require_Lexical.KEY_DELETE_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;b.preventDefault();return d.dispatchCommand(require("Lexical").DELETE_CHARACTER_COMMAND,!1);},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.KEY_ENTER_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;if(null!==b){if((q||p||t)&&n)return!1;b.preventDefault();}return d.dispatchCommand(require("Lexical").INSERT_LINE_BREAK_COMMAND,!1);},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.SELECT_ALL_COMMAND,function(){require("Lexical").$selectAll();
return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.COPY_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;u(b,d);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.CUT_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;w(b,d);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.PASTE_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;v(b,d);return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.DROP_COMMAND,function(b)
{var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;b.preventDefault();return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),d.registerCommand(_require_Lexical.DRAGSTART_COMMAND,function(b){var c=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(c))return!1;b.preventDefault();return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR));};}),null);
__d("LexicalPlainTextPlugin",["cr:739"],(function(a,b,c,d,e,f){e.exports=b("cr:739")}),null);
__d("useLexicalEditable",["cr:4793"],(function(a,b,c,d,e,f){e.exports=b("cr:4793")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalPlainTextPlugin.prod",["LexicalComposerContext","LexicalDragon","LexicalPlainText","LexicalText","LexicalUtils","ReactDOMComet","react","useLexicalEditable"],(function $module_LexicalPlainTextPlugin_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';var _require_closure_react;var l=_require_closure_react||(_require_closure_react=require("react")),v="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?l.useLayoutEffect:l.useEffect;function w(a){return a.getEditorState().read(require("LexicalText").$canShowPlaceholderCurry(a.isComposing()));}
function x(a){var _l$useState=l.useState(function(){return w(a);}),d=_l$useState[0],c=_l$useState[1];v(function(){function e(){var f=w(a);c(f);}e();return require("LexicalUtils").mergeRegister(a.registerUpdateListener(function(){e();}),a.registerEditableListener(function(){e();}));},[a]);return d;}
function y(a,d){var _l$useState2=l.useState(function(){return a.getDecorators();}),c=_l$useState2[0],e=_l$useState2[1];v(function(){return a.registerDecoratorListener(function(f){require("ReactDOMComet").flushSync(function(){e(f);});});},[a]);l.useEffect(function(){e(a.getDecorators());},[a]);return l.useMemo(function(){var f=[],q=Object.keys(c);for(var h=0;h<q.length;h++){var k=q[h],A=l.createElement(d,{onError:function onError(z){return a._onError(z);}},l.createElement(l.Suspense,{fallback:null},c[k])),r=a.getElementByKey(k);null!==r&&f.push(require("ReactDOMComet").createPortal(A,r,k));}return f;},[d,c,a]);}
function B(a){v(function(){return require("LexicalUtils").mergeRegister(require("LexicalPlainText").registerPlainText(a),require("LexicalDragon").registerDragonSupport(a));},[a]);}function C(_ref){var a=_ref.content;var _b$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),d=_b$useLexicalComposer[0];d=x(d);var c=require("useLexicalEditable")();return d?"function"===typeof a?a(c):a:null;}exports.PlainTextPlugin=function(_ref2){var a=_ref2.contentEditable,d=_ref2.placeholder,c=_ref2.ErrorBoundary;var _b$useLexicalComposer2=require("LexicalComposerContext").useLexicalComposerContext(),e=_b$useLexicalComposer2[0];c=y(e,c);B(e);return l.createElement(l.Fragment,null,a,l.createElement(C,{content:d}),c);};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalSelection.prod",["Lexical"],(function $module_LexicalSelection_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';var v=new Map();function w(a){for(;null!=a;){if(a.nodeType===Node.TEXT_NODE)return a;a=a.firstChild;}return null;}function x(a){var b=a.parentNode;if(null==b)throw Error("Should never happen");return[b,Array.from(b.childNodes).indexOf(a)];}function y(a){var b={};a=a.split(";");for(var _iterator=a,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value;}var c=_ref;if(""!==c){var _c$split=c.split(/:([^]+)/),e=_c$split[0],d=_c$split[1];e&&d&&(b[e.trim()]=d.trim());}}return b;}function z(a){var b=v.get(a);void 0===b&&(b=y(a),v.set(a,b));return b;}
function A(a){var b="";for(var c in a){c&&(b+=c+": "+a[c]+";");}return b;}function B(a,b){var c=z("getStyle"in a?a.getStyle():a.style);b=Object.entries(b).reduce(function(d,_ref2){var g=_ref2[0],h=_ref2[1];h instanceof Function?d[g]=h(c[g]):null===h?delete d[g]:d[g]=h;return d;},babelHelpers["extends"]({},c));var e=A(b);a.setStyle(e);v.set(e,b);}function C(a){for(;null!==a&&!require("Lexical").$isRootOrShadowRoot(a);){var b=a.getLatest(),c=a.getParent();0===b.getChildrenSize()&&a.remove(!0);a=c;}}
function D(a,b,c,e,d){if(d===void 0){d=null;}if(0!==b.length){var g=b[0],h=new Map(),f=[];g=require("Lexical").$isElementNode(g)?g:g.getParentOrThrow();g.isInline()&&(g=g.getParentOrThrow());for(var l=!1;null!==g;){var m=g.getPreviousSibling();if(null!==m){g=m;l=!0;break;}g=g.getParentOrThrow();if(require("Lexical").$isRootOrShadowRoot(g))break;}m=new Set();for(var p=0;p<c;p++){var q=b[p];require("Lexical").$isElementNode(q)&&0===q.getChildrenSize()&&m.add(q.getKey());}var n=new Set();for(p=0;p<c;p++){q=b[p];var r=q.getParent();null!==r&&r.isInline()&&(r=r.getParent());if(null!==
r&&require("Lexical").$isLeafNode(q)&&!n.has(q.getKey())){if(q=r.getKey(),void 0===h.get(q)){(function(){var t=e();t.setFormat(r.getFormatType());t.setIndent(r.getIndent());f.push(t);h.set(q,t);r.getChildren().forEach(function(u){t.append(u);n.add(u.getKey());require("Lexical").$isElementNode(u)&&u.getChildrenKeys().forEach(function(H){return n.add(H);});});C(r);})();}}else if(m.has(q.getKey())){if(!require("Lexical").$isElementNode(q))throw Error("Expected node in emptyElements to be an ElementNode");r=e();r.setFormat(q.getFormatType());r.setIndent(q.getIndent());f.push(r);q.remove(!0);}}if(null!==
d)for(b=0;b<f.length;b++){d.append(f[b]);}b=null;if(require("Lexical").$isRootOrShadowRoot(g)){if(l){if(null!==d)g.insertAfter(d);else for(d=f.length-1;0<=d;d--){g.insertAfter(f[d]);}}else if(l=g.getFirstChild(),require("Lexical").$isElementNode(l)&&(g=l),null===l){if(d)g.append(d);else for(d=0;d<f.length;d++){l=f[d],g.append(l),b=l;}}else if(null!==d)l.insertBefore(d);else for(g=0;g<f.length;g++){d=f[g],l.insertBefore(d),b=d;}}else if(d)g.insertAfter(d);else for(d=f.length-1;0<=d;d--){l=f[d],g.insertAfter(l),b=l;}f=require("Lexical").$getPreviousSelection();require("Lexical").$isRangeSelection(f)&&
f.anchor.getNode().isAttached()&&f.focus.getNode().isAttached()?require("Lexical").$setSelection(f.clone()):null!==b?b.selectEnd():a.dirty=!0;}}function E(a,b,c,e){a.modify(b?"extend":"move",c,e);}function F(a){a=a.anchor.getNode();return"rtl"===(require("Lexical").$isRootNode(a)?a:a.getParentOrThrow()).getDirection();}
function G(a){if(require("Lexical").$isDecoratorNode(a)||!require("Lexical").$isElementNode(a)||require("Lexical").$isRootOrShadowRoot(a))return!1;var b=a.getFirstChild();b=null===b||require("Lexical").$isLineBreakNode(b)||require("Lexical").$isTextNode(b)||b.isInline();return!a.isInline()&&!1!==a.canBeEmpty()&&b;}exports.$addNodeStyle=function(a){a=a.getStyle();var b=y(a);v.set(a,b);};
exports.$cloneWithProperties=function(a){var b=a.constructor.clone(a);b.__parent=a.__parent;b.__next=a.__next;b.__prev=a.__prev;if(require("Lexical").$isElementNode(a)&&require("Lexical").$isElementNode(b))return b.__first=a.__first,b.__last=a.__last,b.__size=a.__size,b.__format=a.__format,b.__indent=a.__indent,b.__dir=a.__dir,b;require("Lexical").$isTextNode(a)&&require("Lexical").$isTextNode(b)&&(b.__format=a.__format,b.__style=a.__style,b.__mode=a.__mode,b.__detail=a.__detail);return b;};
exports.$getSelectionStyleValueForProperty=function(a,b,c){if(c===void 0){c="";}var e=null,d=a.getNodes();var g=a.anchor,h=a.focus,f=a.isBackward();var l=f?h.offset:g.offset;g=f?h.getNode():g.getNode();if(a.isCollapsed()&&""!==a.style&&(a=z(a.style),null!==a&&b in a))return a[b];for(a=0;a<d.length;a++){var m=d[a];if((0===a||0!==l||!m.is(g))&&require("Lexical").$isTextNode(m))if(h=b,f=c,m=m.getStyle(),m=z(m),h=null!==m?m[h]||f:f,null===e)e=h;else if(e!==h){e="";break;}}return null===e?c:e;};
exports.$isAtNodeEnd=function(a){if("text"===a.type)return a.offset===a.getNode().getTextContentSize();var b=a.getNode();if(!require("Lexical").$isElementNode(b))throw Error("isAtNodeEnd: node must be a TextNode or ElementNode");return a.offset===b.getChildrenSize();};exports.$isParentElementRTL=F;exports.$moveCaretSelection=E;exports.$moveCharacter=function(a,b,c){var e=F(a);E(a,b,c?!e:e,"character");};
exports.$patchStyleText=function(a,b){var c=a.getNodes(),e=c.length,d=a.getStartEndPoints();if(null!==d){var _d=d,g=_d[0],h=_d[1];--e;d=c[0];var f=c[e];if(a.isCollapsed()&&require("Lexical").$isRangeSelection(a))B(a,b);else{var l=d.getTextContent().length,m=h.offset,p=g.offset,q=g.isBefore(h),n=q?p:m;a=q?m:p;var r=q?g.type:h.type,t=q?h.type:g.type;q=q?h.key:g.key;if(require("Lexical").$isTextNode(d)&&n===l){var u=d.getNextSibling();require("Lexical").$isTextNode(u)&&(n=p=0,d=u);}if(1===c.length)require("Lexical").$isTextNode(d)&&d.canHaveFormat()&&(n="element"===r?0:p>m?m:p,a=
"element"===t?l:p>m?p:m,n!==a&&(0===n&&a===l?(B(d,b),d.select(n,a)):(c=d.splitText(n,a),c=0===n?c[0]:c[1],B(c,b),c.select(0,a-n))));else for(require("Lexical").$isTextNode(d)&&n<d.getTextContentSize()&&d.canHaveFormat()&&(0!==n&&(d=d.splitText(n)[1],n=0,g.set(d.getKey(),n,"text")),B(d,b)),require("Lexical").$isTextNode(f)&&f.canHaveFormat()&&(n=f.getTextContent().length,f.__key!==q&&0!==a&&(a=n),a!==n&&(_f$splitText=f.splitText(a),f=_f$splitText[0],_f$splitText),0===a&&"element"!==t||B(f,b)),a=1;a<e;a++){var _f$splitText;n=c[a],t=n.getKey(),require("Lexical").$isTextNode(n)&&n.canHaveFormat()&&t!==d.getKey()&&
t!==f.getKey()&&!n.isToken()&&B(n,b);}}}};exports.$selectAll=function(a){var b=a.anchor;a=a.focus;var c=b.getNode().getTopLevelElementOrThrow().getParentOrThrow();var e=c.getFirstDescendant();c=c.getLastDescendant();var d="element",g="element",h=0;require("Lexical").$isTextNode(e)?d="text":require("Lexical").$isElementNode(e)||null===e||(e=e.getParentOrThrow());require("Lexical").$isTextNode(c)?(g="text",h=c.getTextContentSize()):require("Lexical").$isElementNode(c)||null===c||(c=c.getParentOrThrow());e&&c&&(b.set(e.getKey(),0,d),a.set(c.getKey(),h,g));};
exports.$setBlocksType=function(a,b){if(null!==a){var c=a.getStartEndPoints();c=c?c[0]:null;if(null!==c&&"root"===c.key)b=b(),a=require("Lexical").$getRoot(),(c=a.getFirstChild())?c.replace(b,!0):a.append(b);else{a=a.getNodes();if(null!==c){for(c=c.getNode();null!==c&&null!==c.getParent()&&!G(c);){c=c.getParentOrThrow();}c=G(c)?c:null;}else c=!1;c&&-1===a.indexOf(c)&&a.push(c);for(c=0;c<a.length;c++){var e=a[c];if(!G(e))continue;if(!require("Lexical").$isElementNode(e))throw Error("Expected block node to be an ElementNode");var d=b();
d.setFormat(e.getFormatType());d.setIndent(e.getIndent());e.replace(d,!0);}}}};exports.$shouldOverrideDefaultCharacterSelection=function(a,b){a=require("Lexical").$getAdjacentNode(a.focus,b);return require("Lexical").$isDecoratorNode(a)&&!a.isIsolated()||require("Lexical").$isElementNode(a)&&!a.isInline()&&!a.canBeEmpty();};
exports.$sliceSelectedTextNodeContent=function(a,b){var c=a.getStartEndPoints();if(b.isSelected(a)&&!b.isSegmented()&&!b.isToken()&&null!==c){var _c=c,f=_c[0],l=_c[1];c=a.isBackward();var e=f.getNode(),d=l.getNode(),g=b.is(e),h=b.is(d);if(g||h){var _k$$getCharacterOffse=require("Lexical").$getCharacterOffsets(a),m=_k$$getCharacterOffse[0],p=_k$$getCharacterOffse[1];a=e.is(d);g=b.is(c?d:e);d=b.is(c?e:d);e=0;h=void 0;a?(e=m>p?p:m,h=m>p?m:p):g?(e=c?p:m,h=void 0):d&&(c=c?m:p,e=0,h=c);b.__text=b.__text.slice(e,h);}}return b;};
exports.$wrapNodes=function(a,b,c){if(c===void 0){c=null;}var e=a.getStartEndPoints(),d=e?e[0]:null;e=a.getNodes();var g=e.length;if(null!==d&&(0===g||1===g&&"element"===d.type&&0===d.getNode().getChildrenSize())){a="text"===d.type?d.getNode().getParentOrThrow():d.getNode();e=a.getChildren();var f=b();f.setFormat(a.getFormatType());f.setIndent(a.getIndent());e.forEach(function(l){return f.append(l);});c&&(f=c.append(f));a.replace(f);}else{d=null;var h=[];for(var _f=0;_f<g;_f++){var l=e[_f];require("Lexical").$isRootOrShadowRoot(l)?(D(a,h,h.length,b,c),h=
[],d=l):null===d||null!==d&&require("Lexical").$hasAncestor(l,d)?h.push(l):(D(a,h,h.length,b,c),h=[l]);}D(a,h,h.length,b,c);}};
exports.createDOMRange=function(a,b,c,e,d){var _x,_x2;var g=b.getKey(),h=e.getKey(),f=document.createRange(),l=a.getElementByKey(g);a=a.getElementByKey(h);require("Lexical").$isTextNode(b)&&(l=w(l));require("Lexical").$isTextNode(e)&&(a=w(a));if(void 0===b||void 0===e||null===l||null===a)return null;"BR"===l.nodeName&&(_x=x(l),l=_x[0],c=_x[1],_x);"BR"===a.nodeName&&(_x2=x(a),a=_x2[0],d=_x2[1],_x2);b=l.firstChild;l===a&&null!=b&&"BR"===b.nodeName&&0===c&&0===d&&(d=1);try{f.setStart(l,c),f.setEnd(a,d);}catch(m){return null;}!f.collapsed||c===d&&g===h||(f.setStart(a,d),f.setEnd(l,
c));return f;};exports.createRectsFromDOMRange=function(a,b){var c=a.getRootElement();if(null===c)return[];a=c.getBoundingClientRect();c=getComputedStyle(c);c=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight);b=Array.from(b.getClientRects());var e=b.length;b.sort(function(g,h){var f=g.top-h.top;return 3>=Math.abs(f)?g.left-h.left:f;});var d;for(var g=0;g<e;g++){var h=b[g],f=h.width+c===a.width;d&&d.top<=h.top&&d.top+d.height>h.top&&d.left+d.width>h.left||f?(b.splice(g--,1),e--):d=h;}return b;};
exports.getStyleObjectFromCSS=z;
exports.trimTextContentFromAnchor=function(a,b,c){var e=b.getNode();if(require("Lexical").$isElementNode(e)){var d=e.getDescendantByIndex(b.offset);null!==d&&(e=d);}for(;0<c&&null!==e;){require("Lexical").$isElementNode(e)&&(d=e.getLastDescendant(),null!==d&&(e=d));var g=e.getPreviousSibling(),h=0;if(null===g){d=e.getParentOrThrow();for(var f=d.getPreviousSibling();null===f;){d=d.getParent();if(null===d){g=null;break;}f=d.getPreviousSibling();}null!==d&&(h=d.isInline()?0:2,g=f);}f=e.getTextContent();""===f&&require("Lexical").$isElementNode(e)&&!e.isInline()&&(
f="\n\n");d=f.length;if(!require("Lexical").$isTextNode(e)||c>=d)f=e.getParent(),e.remove(),null==f||0!==f.getChildrenSize()||require("Lexical").$isRootNode(f)||f.remove(),c-=d+h,e=g;else{(function(){var _e$splitText,_e$splitText2;var l=e.getKey();h=a.getEditorState().read(function(){var p=require("Lexical").$getNodeByKey(l);return require("Lexical").$isTextNode(p)&&p.isSimpleText()?p.getTextContent():null;});g=d-c;var m=f.slice(0,g);null!==h&&h!==f?(c=require("Lexical").$getPreviousSelection(),d=e,e.isSimpleText()?e.setTextContent(h):(d=require("Lexical").$createTextNode(h),e.replace(d)),require("Lexical").$isRangeSelection(c)&&c.isCollapsed()&&(c=c.anchor.offset,
d.select(c,c))):e.isSimpleText()?(h=b.key===l,f=b.offset,f<c&&(f=d),c=h?f-c:0,d=h?f:g,h&&0===c?((_e$splitText=e.splitText(c,d),c=_e$splitText[0],_e$splitText),c.remove()):((_e$splitText2=e.splitText(c,d),c=_e$splitText2[1],_e$splitText2),c.remove())):(c=require("Lexical").$createTextNode(m),e.replace(c));c=0;})();}}};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalText.prod",["Lexical"],(function $module_LexicalText_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';function r(c,h){if(h===void 0){h=!0;}if(c)return!1;c=t();h&&(c=c.trim());return""===c;}function t(){return require("Lexical").$getRoot().getTextContent();}function u(c){if(!r(c,!1))return!1;c=require("Lexical").$getRoot().getChildren();var h=c.length;if(1<h)return!1;for(var e=0;e<h;e++){var b=c[e];if(require("Lexical").$isDecoratorNode(b))return!1;if(require("Lexical").$isElementNode(b)){if(!require("Lexical").$isParagraphNode(b)||0!==b.__indent)return!1;b=b.getChildren();var n=b.length;for(var q=0;q<n;q++){if(!require("Lexical").$isTextNode(b[e]))return!1;}}}return!0;}
exports.$canShowPlaceholder=u;exports.$canShowPlaceholderCurry=function(c){return function(){return u(c);};};exports.$findTextIntersectionFromCharacters=function(c,h){var b=c.getFirstChild();c=0;a:for(;null!==b;){if(require("Lexical").$isElementNode(b)){var e=b.getFirstChild();if(null!==e){b=e;continue;}}else if(require("Lexical").$isTextNode(b)){e=b.getTextContentSize();if(c+e>h)return{node:b,offset:h-c};c+=e;}e=b.getNextSibling();if(null!==e)b=e;else{for(b=b.getParent();null!==b;){e=b.getNextSibling();if(null!==e){b=e;continue a;}b=b.getParent();}break;}}return null;};
exports.$isRootTextContentEmpty=r;exports.$isRootTextContentEmptyCurry=function(c,h){return function(){return r(c,h);};};exports.$rootTextContent=t;
exports.registerLexicalTextEntity=function(c,h,b,e){var n=function n(a){var d=require("Lexical").$createTextNode(a.getTextContent());d.setFormat(a.getFormat());a.replace(d);},q=c.registerNodeTransform(require("Lexical").TextNode,function(a){if(a.isSimpleText()){var d=a.getPreviousSibling(),l=a.getTextContent(),m=a;if(require("Lexical").$isTextNode(d)){var k=d.getTextContent(),f=h(k+l);if(d instanceof b){if(null===f||0!==d.getLatest().__mode){n(d);return;}f=f.end-k.length;if(0<f){m=l.slice(0,f);m=k+m;d.select();d.setTextContent(m);f===l.length?a.remove():(d=l.slice(f),
a.setTextContent(d));return;}}else if(null===f||f.start<k.length)return;}for(;;){var _m$splitText,_m$splitText2;a=h(l);l=f=null===a?"":l.slice(a.end);if(""===f){if(k=m.getNextSibling(),require("Lexical").$isTextNode(k))if(f=m.getTextContent()+k.getTextContent(),f=h(f),null===f){k instanceof b?n(k):k.markDirty();break;}else if(0!==f.start)break;}else if(k=h(f),null!==k&&0===k.start)break;if(null===a)break;if(0===a.start&&require("Lexical").$isTextNode(d)&&d.isTextEntity())continue;var p=void 0;0===a.start?(_m$splitText=m.splitText(a.end),p=_m$splitText[0],m=_m$splitText[1],_m$splitText):(_m$splitText2=m.splitText(a.start,a.end),p=_m$splitText2[1],m=_m$splitText2[2],_m$splitText2);a=e(p);a.setFormat(p.getFormat());
p.replace(a);if(null==m)break;}}});c=c.registerNodeTransform(b,function(a){var d=a.getTextContent();var l=h(d);null===l||0!==l.start?n(a):d.length>l.end?a.splitText(l.end):(d=a.getPreviousSibling(),require("Lexical").$isTextNode(d)&&d.isTextEntity()&&(n(d),n(a)),d=a.getNextSibling(),require("Lexical").$isTextNode(d)&&d.isTextEntity()&&(n(d),a instanceof b&&n(a)));});return[q,c];};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("LexicalUtils.prod",["Lexical","LexicalSelection","Promise"],(function $module_LexicalUtils_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';var _require_closure_Promise;function C(a){var b=new URLSearchParams();b.append("code",a);for(var c=1;c<arguments.length;c++){b.append("v",arguments[c]);}throw Error("Minified Lexical error #"+a+"; visit https://lexical.dev/docs/error?"+b+" for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}function D(){for(var _len=arguments.length,a=new Array(_len),_key=0;_key<_len;_key++){a[_key]=arguments[_key];}return function(){a.forEach(function(b){return b();});};}var E={attributes:!0,characterData:!0,childList:!0,subtree:!0};
function F(a,b,c){function e(){if(null===g)throw Error("Unexpected null rootDOMNode");if(null===n)throw Error("Unexpected null parentDOMNode");var _g$getBoundingClientR=g.getBoundingClientRect(),p=_g$getBoundingClientR.left,z=_g$getBoundingClientR.top;var q=n;var r=require("LexicalSelection").createRectsFromDOMRange(a,b);t.isConnected||q.append(t);q=!1;for(var x=0;x<r.length;x++){var w=r[x];var u=k[x]||document.createElement("div"),y=u.style;"absolute"!==y.position&&(y.position="absolute",q=!0);var l=w.left-p+"px";y.left!==l&&(y.left=l,q=!0);l=w.top-z+"px";y.top!==l&&(u.style.top=
l,q=!0);l=w.width+"px";y.width!==l&&(u.style.width=l,q=!0);w=w.height+"px";y.height!==w&&(u.style.height=w,q=!0);u.parentNode!==t&&(t.append(u),q=!0);k[x]=u;}for(;k.length>r.length;){k.pop();}q&&c(k);}function d(){g=n=null;null!==m&&m.disconnect();m=null;t.remove();for(var _iterator=k,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value;}var p=_ref;p.remove();}k=[];}function f(){var p=a.getRootElement();if(null===p)return d();var z=p.parentElement;if(!(z instanceof HTMLElement))return d();d();g=p;n=z;m=new MutationObserver(function(q){var r=a.getRootElement(),w=r&&r.parentElement;
if(r!==g||w!==n)return f();for(var _iterator2=q,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++];}else{_i2=_iterator2.next();if(_i2.done)break;_ref2=_i2.value;}var l=_ref2;if(!t.contains(l.target))return e();}});m.observe(z,E);e();}var g=null,n=null,m=null,k=[],t=document.createElement("div"),A=a.registerRootListener(f);return function(){A();d();};}function G(a,b){for(var _iterator3=b,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++];}else{_i3=_iterator3.next();if(_i3.done)break;_ref3=_i3.value;}var c=_ref3;if(a.type.startsWith(c))return!0;}return!1;}var H=function H(a,b){for(;a!==require("Lexical").$getRoot()&&null!=a;){if(b(a))return a;a=a.getParent();}return null;};exports.$splitNode=require("Lexical").$splitNode;exports.isHTMLAnchorElement=require("Lexical").isHTMLAnchorElement;exports.isHTMLElement=require("Lexical").isHTMLElement;
exports.$dfs=function(a,b){var c=[];a=(a||require("Lexical").$getRoot()).getLatest();b=b||(require("Lexical").$isElementNode(a)?a.getLastDescendant():a);for(var e=a,d=0;null!==(e=e.getParent());){d++;}for(e=d;null!==a&&!a.is(b);){if(c.push({depth:e,node:a}),require("Lexical").$isElementNode(a)&&0<a.getChildrenSize())a=a.getFirstChild(),e++;else for(d=null;null===d&&null!==a;){d=a.getNextSibling(),null===d?(a=a.getParent(),e--):a=d;}}null!==a&&a.is(b)&&c.push({depth:e,node:a});return c;};
exports.$filter=function(a,b){var c=[];for(var e=0;e<a.length;e++){var d=b(a[e]);null!==d&&c.push(d);}return c;};exports.$findMatchingParent=H;exports.$getNearestBlockElementAncestorOrThrow=function(a){var b=H(a,function(c){return require("Lexical").$isElementNode(c)&&!c.isInline();});require("Lexical").$isElementNode(b)||C(4,a.__key);return b;};exports.$getNearestNodeOfType=function(a,b){for(;null!=a;){if(a instanceof b)return a;a=a.getParent();}return null;};exports.$insertFirst=function(a,b){var c=a.getFirstChild();null!==c?c.insertBefore(b):a.append(b);};
exports.$insertNodeToNearestRoot=function(a){var b=require("Lexical").$getSelection()||require("Lexical").$getPreviousSelection();if(require("Lexical").$isRangeSelection(b)){var _b=b,c=_b.focus;b=c.getNode();c=c.offset;if(require("Lexical").$isRootOrShadowRoot(b))c=b.getChildAtIndex(c),null==c?b.append(a):c.insertBefore(a),a.selectNext();else{var e,d;require("Lexical").$isTextNode(b)?(e=b.getParentOrThrow(),d=b.getIndexWithinParent(),0<c&&(d+=1,b.splitText(c))):(e=b,d=c);var _B$$splitNode=require("Lexical").$splitNode(e,d);b=_B$$splitNode[1];b.insertBefore(a);b.selectStart();}}else null!=b?(b=b.getNodes(),b[b.length-1].getTopLevelElementOrThrow().insertAfter(a)):
require("Lexical").$getRoot().append(a),b=require("Lexical").$createParagraphNode(),a.insertAfter(b),b.select();return a.getLatest();};exports.$restoreEditorState=function(a,b){var c=new Map(),e=a._pendingEditorState;for(var _iterator4=b._nodeMap,_isArray4=Array.isArray(_iterator4),_i4=0,_iterator4=_isArray4?_iterator4:_iterator4[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref5;if(_isArray4){if(_i4>=_iterator4.length)break;_ref5=_iterator4[_i4++];}else{_i4=_iterator4.next();if(_i4.done)break;_ref5=_i4.value;}var _ref6=_ref5;var d=_ref6[0];var f=_ref6[1];var g=require("LexicalSelection").$cloneWithProperties(f);if(require("Lexical").$isTextNode(g)){if(!require("Lexical").$isTextNode(f))throw Error("Expected node be a TextNode");g.__text=f.__text;}c.set(d,g);}e&&(e._nodeMap=c);a._dirtyType=2;a=b._selection;require("Lexical").$setSelection(null===a?null:a.clone());};
exports.$wrapNodeInElement=function(a,b){b=b();a.replace(b);b.append(a);return b;};exports.addClassNamesToElement=function(a){for(var _len2=arguments.length,b=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){b[_key2-1]=arguments[_key2];}b.forEach(function(c){var _a$classList;"string"===typeof c&&(c=c.split(" ").filter(function(e){return""!==e;}),(_a$classList=a.classList).add.apply(_a$classList,c));});};exports.isMimeType=G;
exports.markSelection=function(a,b){function c(m){m.read(function(){var k=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(k)){var _k=k,t=_k.anchor,A=_k.focus;k=t.getNode();var p=k.getKey(),z=t.offset,q=A.getNode(),r=q.getKey(),w=A.offset,l=a.getElementByKey(p),x=a.getElementByKey(r);p=null===e||null===l||z!==d||p!==e.getKey()||k!==e&&(!(e instanceof require("Lexical").TextNode)||k.updateDOM(e,l,a._config));r=null===f||null===x||w!==g||r!==f.getKey()||q!==f&&(!(f instanceof require("Lexical").TextNode)||q.updateDOM(f,x,a._config));if(p||r){l=a.getElementByKey(t.getNode().getKey());
var u=a.getElementByKey(A.getNode().getKey());if(null!==l&&null!==u&&"SPAN"===l.tagName&&"SPAN"===u.tagName){r=document.createRange();A.isBefore(t)?(p=u,x=A.offset,u=l,l=t.offset):(p=l,x=t.offset,l=A.offset);p=p.firstChild;if(null===p)throw Error("Expected text node to be first child of span");u=u.firstChild;if(null===u)throw Error("Expected text node to be first child of span");r.setStart(p,x);r.setEnd(u,l);n();n=F(a,r,function(y){for(var _iterator5=y,_isArray5=Array.isArray(_iterator5),_i5=0,_iterator5=_isArray5?_iterator5:_iterator5[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref7;if(_isArray5){if(_i5>=_iterator5.length)break;_ref7=_iterator5[_i5++];}else{_i5=_iterator5.next();if(_i5.done)break;_ref7=_i5.value;}var I=_ref7;var v=I.style;"Highlight"!==v.background&&(v.background="Highlight");
"HighlightText"!==v.color&&(v.color="HighlightText");"-1"!==v.zIndex&&(v.zIndex="-1");"none"!==v.pointerEvents&&(v.pointerEvents="none");"-1.5px"!==v.marginTop&&(v.marginTop="-1.5px");"4px"!==v.paddingTop&&(v.paddingTop="4px");"0px"!==v.paddingBottom&&(v.paddingBottom="0px");}void 0!==b&&b(y);});}}e=k;d=z;f=q;g=w;}else g=f=d=e=null,n(),n=function n(){};});}var e=null,d=null,f=null,g=null,n=function n(){};c(a.getEditorState());return D(a.registerUpdateListener(function(_ref8){var m=_ref8.editorState;return c(m);}),n,function(){n();});};
exports.mediaFileReader=function(a,b){var c=a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();return new(_require_closure_Promise||(_require_closure_Promise=require("Promise")))(function(e,d){var f=[],g=function g(){var _c$next=c.next(),n=_c$next.done,m=_c$next.value;if(n)return e(f);var k=new FileReader();k.addEventListener("error",d);k.addEventListener("load",function(){var t=k.result;"string"===typeof t&&f.push({file:m,result:t});g();});G(m,b)?k.readAsDataURL(m):g();};g();});};exports.mergeRegister=D;exports.objectKlassEquals=function(a,b){return null!==a?Object.getPrototypeOf(a).constructor.name===b.name:!1;};
exports.positionNodeOnRange=F;
exports.registerNestedElementResolver=function(a,b,c,e){return a.registerNodeTransform(b,function(d){a:{var f=d.getChildren();for(var g=0;g<f.length;g++){if(f[g]instanceof b){f=null;break a;}}for(f=d;null!==f;){if(g=f,f=f.getParent(),f instanceof b){f={child:g,parent:f};break a;}}f=null;}if(null!==f){var _f=f,n=_f.child,m=_f.parent;if(n.is(d)){e(m,d);d=n.getNextSiblings();f=d.length;m.insertAfter(n);if(0!==f){g=c(m);n.insertAfter(g);for(var k=0;k<f;k++){g.append(d[k]);}}m.canBeEmpty()||0!==m.getChildrenSize()||m.remove();}}});};
exports.removeClassNamesFromElement=function(a){for(var _len3=arguments.length,b=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){b[_key3-1]=arguments[_key3];}b.forEach(function(c){var _a$classList2;"string"===typeof c&&(_a$classList2=a.classList).remove.apply(_a$classList2,c.split(" "));});};}),null);
__d("MLCInstrumentationPluginDeferred__INTERNAL.react",["react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("requireDeferred")("MLCInstrumentationPlugin__INTERNAL.react").__setRef("MLCInstrumentationPluginDeferred__INTERNAL.react");function a(a){var b=c("useDeferredModuleOnReady")(j);return b==null?null:i.jsx(b,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MLCKeyBindingUtil",["UserAgent"],(function(a,b,c,d,e,f,g){"use strict";var h=c("UserAgent").isPlatform("Mac OS X");b=String.fromCodePoint(h?8984:8963);function a(a){return a!==null&&(h?a.metaKey:a.ctrlKey)}g.COMMAND_UNICODE=b;g.hasCommandModifier=a}),98);
__d("cometLexicalBaseTheme",[],(function(a,b,c,d,e,f,g){"use strict";a={ltr:"xdpxx8g",rtl:"x1hr2gdg"};b=a;g["default"]=b}),98);
__d("mlcErrorHandler__INTERNAL",["Lexical"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var d=document.activeElement,e=null;d!=null&&(e={activeElement:d.nodeName,rootSelected:d===b.getRootElement()});d=window.event;var f=null;d!=null&&(f={altKey:d.altKey,ctrlKey:d.ctrlKey,data:d.data,inputType:d.inputType,isComposing:d.isComposing,keyCode:d.keyCode,metaKey:d.metaKey,shiftKey:d.shiftKey,type:d.type});d=null;try{d=h(b.getEditorState())}catch(a){}c(JSON.stringify({activeElement:e,editorState:d,error:a,event:f}))}function h(a){return{nodes:i(a),selection:k(a)}}function i(a){var b=[],c=["key","type","detail","format","mode","children","parent","first","last","size","next","prev"];for(var a=a._nodeMap,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];var g={};for(var h=0;h<c.length;h++){var i=c[h],k="__"+i;k=f[k];if(k==null||j(i,k))continue;g[i]=k}b.push(g)}return b}function j(a,b){var c=new Set(["detail","format"]);if(c.has(a)&&b===0)return!0;return a==="mode"&&b==="normal"?!0:!1}function k(a){a=a._selection;if(!d("Lexical").$isRangeSelection(a))return null;var b=a.anchor;a=a.focus;return{anchor:{key:b.key,offset:b.offset,type:b.type},focus:{key:a.key,offset:a.offset,type:a.type}}}g["default"]=a}),98);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
*
* @fullSyntaxTransform
* @generated
* @noflow
* @nolint
* @oncall lexical_web_text_editor
* @preserve-invariant-messages
* @preserve-whitespace
* @preventMunge
 */__d("useLexicalEditable.prod",["LexicalComposerContext","react"],(function $module_useLexicalEditable_prod(global,require,requireDynamic,requireLazy,module,exports){
'use strict';var _require_closure_react;var k=_require_closure_react||(_require_closure_react=require("react")),l="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?k.useLayoutEffect:k.useEffect;function m(a){var _b$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),c=_b$useLexicalComposer[0],e=k.useMemo(function(){return a(c);},[c,a]),d=k.useRef(e.initialValueFn()),_k$useState=k.useState(d.current),n=_k$useState[0],g=_k$useState[1];l(function(){var p=e.initialValueFn,q=e.subscribe,f=p();d.current!==f&&(d.current=f,g(f));return q(function(h){d.current=h;g(h);});},[e,a]);return n;}
function r(a){return{initialValueFn:function initialValueFn(){return a.isEditable();},subscribe:function subscribe(c){return a.registerEditableListener(c);}};}module.exports=function(){return m(r);};}),null);
__d("useLexicalInitializeEditor__DEPRECATED",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a){i(function(){a.update(function(){var b=d("Lexical").$getRoot();if(b.isEmpty()){var c=d("Lexical").$createParagraphNode();b.append(c);b=document.activeElement;(d("Lexical").$getSelection()!==null||b!==null&&b===a.getRootElement())&&c.select()}})},[a])}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("AdsMessengerContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j=b.createContext({isMessengerInAds:!1});function a(){return i(j)}g.AdsMessengerContext=j;g.useAdsMessengerContext=a}),98);
__d("CanvasToBlobImpl",["BlobFactory"],(function(a,b,c,d,e,f){function a(a,c){a=atob(a.substr(a.indexOf(",")+1));var d=new Uint8Array(a.length);for(var e=0;e<a.length;e++)d[e]=a.charCodeAt(e);return b("BlobFactory").getBlob([d],{type:c})}e.exports={getBlob:a}}),null);
__d("VideoThumbnail_UNTYPED",["invariant"],(function(a,b,c,d,e,f,g){a=function(){"use strict";function a(a){this.$1=a}var b=a.prototype;b.getURL=function(){return this.$1};b.getData=function(){g(0,4844)};a.addTextToCanvasContext=function(a,b,c,d,e,f,g,h,i){a.fillStyle=h;a.textAlign=i;a.font=f+"px "+g;h=i==="center"?d+e/2:d;g=1;i=b.split("\n");for(d=i,b=Array.isArray(d),i=0,d=b?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(b){if(i>=d.length)break;j=d[i++]}else{i=d.next();if(i.done)break;j=i.value}j=j;var k="",l="";j=j.split(" ");for(var j=j,m=Array.isArray(j),n=0,j=m?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=j.length)break;o=j[n++]}else{n=j.next();if(n.done)break;o=n.value}o=o;l+=o;var p=a.measureText(l).width,q=a.measureText(o).width;if(q>e){k.length>0&&(a.fillText(k,h,c+f*g),g++);q="";var r="";for(var s=o,t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var v;if(t){if(u>=s.length)break;v=s[u++]}else{u=s.next();if(u.done)break;v=u.value}v=v;r+=v;var w=a.measureText(r).width;w>e?(a.fillText(q,h,c+f*g),q=v,r=v,g++):q=r}k=q+" ";l=q+" "}else p>e?(a.fillText(k,h,c+f*g),k=o+" ",l=o+" ",g++):(l+=" ",k=l)}a.fillText(k,h,c+f*g);g++}return a};return a}();e.exports=a}),null);
__d("dataURLToBlob",["BlobFactory","CanvasToBlobImpl","CanvasToBlobResource","Promise","WebWorker"],(function(a,b,c,d,e,f,g){var h,i=a.URL||a.webkitURL||{};function e(a,e){if(!i.createObjectURL||!c("BlobFactory").isSupported)return(h||(h=b("Promise"))).reject("Browser doesn't support this feature");if(c("WebWorker").isSupported())return new(h||(h=b("Promise")))(function(b,d){var f=new(c("WebWorker"))(c("CanvasToBlobResource")).setMessageHandler(function(a){b(a),f.terminate()}).setErrorHandler(function(a){d(a.message),f.terminate()}).execute().postMessage({dataURL:a,fileType:e})});else return(h||(h=b("Promise"))).resolve(d("CanvasToBlobImpl").getBlob(a,e))}g["default"]=e}),98);
__d("canvasToBlob",["Promise","dataURLToBlob","promiseDone"],(function(a,b,c,d,e,f,g){var h;function a(a,d,e){return new(h||(h=b("Promise")))(function(b,f){if(a.toBlob)a.toBlob(b,d,e);else{var g=a.toDataURL(d,e);c("promiseDone")(c("dataURLToBlob")(g,d).then(function(a){b(a)},f))}})}g["default"]=a}),98);
__d("CanvasVideoThumbnail",["EventListener","Promise","VideoThumbnail_UNTYPED","canvasToBlob","promiseDone"],(function(a,b,c,d,e,f,g){var h;a=function(a){babelHelpers.inheritsLoose(d,a);function d(b,c,d,e,f,g,h){var i;e===void 0&&(e=null);f===void 0&&(f=null);g===void 0&&(g=0);h===void 0&&(h=0);i=a.call(this,null)||this;i.$CanvasVideoThumbnail$p_1=b;i.$CanvasVideoThumbnail$p_2=c;i.$CanvasVideoThumbnail$p_3=d;i.$CanvasVideoThumbnail$p_4=e;i.$CanvasVideoThumbnail$p_5=f;i.$CanvasVideoThumbnail$p_6=g;i.$CanvasVideoThumbnail$p_7=h;i.$CanvasVideoThumbnail$p_8=i.$CanvasVideoThumbnail$p_1.toDataURL("image/jpeg");return i}var e=d.prototype;e.getCanvas=function(){return this.$CanvasVideoThumbnail$p_1};e.getTime=function(){return this.$CanvasVideoThumbnail$p_3?this.$CanvasVideoThumbnail$p_3:0};e.getURL=function(){this.$CanvasVideoThumbnail$p_8||(this.$CanvasVideoThumbnail$p_8=this.$CanvasVideoThumbnail$p_1.toDataURL("image/jpeg"));return this.$CanvasVideoThumbnail$p_8};e.getData=function(){var a=this,d=document.createElement("canvas"),e=d.getContext("2d"),f=this.$CanvasVideoThumbnail$p_2;return new(h||(h=b("Promise")))(function(b,g){var h=c("EventListener").listen(f,"seeked",function(){h.remove(),a.$CanvasVideoThumbnail$p_9(d,e),c("promiseDone")(c("canvasToBlob")(d,"image/jpeg").then(b,g))});f.currentTime=a.$CanvasVideoThumbnail$p_3})};e.getDataWithText=function(a,d,e,f,g,i,j,k){var l=this,m=document.createElement("canvas"),n=m.getContext("2d"),o=this.$CanvasVideoThumbnail$p_2;return new(h||(h=b("Promise")))(function(b,h){var p=c("EventListener").listen(o,"seeked",function(){p.remove(),n.fillStyle=j,n.textAlign=k,l.$CanvasVideoThumbnail$p_9(m,n),n=c("VideoThumbnail_UNTYPED").addTextToCanvasContext(n,a,d,e,f,g,i,j,k),c("promiseDone")(c("canvasToBlob")(m,"image/jpeg").then(b,h))});o.currentTime=l.$CanvasVideoThumbnail$p_3})};e.$CanvasVideoThumbnail$p_9=function(a,b){var c=this.$CanvasVideoThumbnail$p_2;this.$CanvasVideoThumbnail$p_4||this.$CanvasVideoThumbnail$p_5?(a.width=this.$CanvasVideoThumbnail$p_4?this.$CanvasVideoThumbnail$p_4:c.videoWidth,a.height=this.$CanvasVideoThumbnail$p_5?this.$CanvasVideoThumbnail$p_5:c.videoHeight,this.$CanvasVideoThumbnail$p_10(a,b)):(a.width=c.videoWidth,a.height=c.videoHeight,b.drawImage(c,0,0,a.width,a.height))};e.$CanvasVideoThumbnail$p_10=function(a,b){var c=this.$CanvasVideoThumbnail$p_2,d=this.$CanvasVideoThumbnail$p_6,e=this.$CanvasVideoThumbnail$p_7,f=this.$CanvasVideoThumbnail$p_4?this.$CanvasVideoThumbnail$p_4:a.width,g=this.$CanvasVideoThumbnail$p_5?this.$CanvasVideoThumbnail$p_5:a.height;b.drawImage(c,d,e,f,g,0,0,a.width,a.height)};return d}(c("VideoThumbnail_UNTYPED"));g["default"]=a}),98);
__d("HTMLMediaElementReadyStates",[],(function(a,b,c,d,e,f){a={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};b=a;f["default"]=b}),66);
__d("LSAppendDataTraceAddon.nop",["LSAppendDataTraceAddonStoredProcedure","LSFactory","MetaConfig","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d,e,f,g,i,j){return!c("MetaConfig")._("62")?(h||(h=b("Promise"))).resolve():c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:e,errorMessage:(d=i)!=null?d:"",syncChannel:g,tags:(a=j)!=null?a:""})};g["default"]=a}),98);
__d("LSCommunityThreadCreationStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({FAILURE:2,PENDING:0,SUCCESS:1});f["default"]=a}),66);
__d("LSCreateCommunitySubThread",["LSCreateOfflineThreadingID","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(e){return d[2]=new c.Map(),d[2].set("client_mutation_id",d[1]),d[2].set("community_id",a[0]),d[2].set("parent_message_id",a[2]),d[2].set("parent_thread_id",a[1]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[7]=c.i64.of_float(Date.now()),d[3]=c.i64.add(d[7],c.i64.cast([0,0]))):d[3]=c.i64.cast([0,0]),d[4]=d[2].get("parent_thread_id"),d[2],d[5]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["create_community_sub_thread","_",c.i64.to_string(d[4])].join(""),c.i64.cast([0,665]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[3],c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})},function(a){return e[0]=d[6]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSCreateCommunitySubThreadStoredProcedure",["LSCreateCommunitySubThread","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.communityId;d[1]=b.parentThreadId;d[2]=b.parentMessageId;return c("LSCreateCommunitySubThread").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSDeleteReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(8).fetch([[[a[0],a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.actorId,a[2])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSGetLocalizedReplySnippet",["LSGetThreadParticipantDisplayName","LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(e){return c.i64.eq(a[3],c.i64.cast([0,1]))?c.sequence([function(e){return c.i64.eq(a[1],d[0])?c.sequence([function(e){return c.i64.eq(a[2],d[0])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2421884758]),void 0).then(function(a){return d[4]=a})},function(a){return d[3]=d[4]}]):c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[4]),d[5]),c.localizeV2Async(c.i64.cast([0,2676961947]),d[5]).then(function(a){return d[6]=a})},function(a){return d[3]=d[6]}])},function(a){return d[2]=d[3]}]):c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[1]).then(function(a){return a=a,d[3]=a[0],a})},function(e){return c.i64.eq(a[2],d[0])?c.sequence([function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[3]),d[5]),c.localizeV2Async(c.i64.cast([0,3298086032]),d[5]).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):c.sequence([function(e){return c.i64.eq(a[1],a[2])?c.sequence([function(a){return d[6]=c.createArray(),d[8]=(d[6].push(d[3]),d[6]),c.localizeV2Async(c.i64.cast([0,3873263038]),d[6]).then(function(a){return d[7]=a})},function(a){return d[5]=d[7]}]):c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[7]=c.createArray(),d[9]=(d[7].push(d[3]),d[7]),d[9]=(d[7].push(d[6]),d[7]),c.localizeV2Async(c.i64.cast([0,2616853333]),d[7]).then(function(a){return d[8]=a})},function(a){return d[5]=d[8]}])},function(a){return d[4]=d[5]}])},function(a){return d[2]=d[4]}])},function(a){return d[1]=d[2]}]):c.sequence([function(e){return c.i64.eq(a[1],d[0])?c.sequence([function(e){return c.i64.eq(a[2],d[0])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,4002265907]),void 0).then(function(a){return d[4]=a})},function(a){return d[3]=d[4]}]):c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[4]),d[5]),c.localizeV2Async(c.i64.cast([0,2663996736]),d[5]).then(function(a){return d[6]=a})},function(a){return d[3]=d[6]}])},function(a){return d[2]=d[3]}]):c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[1]).then(function(a){return a=a,d[3]=a[0],a})},function(e){return c.i64.eq(a[2],d[0])?c.sequence([function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[3]),d[5]),c.localizeV2Async(c.i64.cast([0,2868699317]),d[5]).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):c.sequence([function(e){return c.i64.eq(a[1],a[2])?c.sequence([function(a){return d[6]=c.createArray(),d[8]=(d[6].push(d[3]),d[6]),c.localizeV2Async(c.i64.cast([0,2688620547]),d[6]).then(function(a){return d[7]=a})},function(a){return d[5]=d[7]}]):c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[7]=c.createArray(),d[9]=(d[7].push(d[3]),d[7]),d[9]=(d[7].push(d[6]),d[7]),c.localizeV2Async(c.i64.cast([0,3544071775]),d[7]).then(function(a){return d[8]=a})},function(a){return d[5]=d[8]}])},function(a){return d[4]=d[5]}])},function(a){return d[2]=d[4]}])},function(a){return d[1]=d[2]}])},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSGetMessageAttributionParams",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.filter(b.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[void 0,void 0,void 0],c[0]=d[0],c[1]=d[1],c[2]=d[2],d):(b=a.item,d=[b.threadAttributionSource,b.platformRef,b.platformToken],c[0]=d[0],c[1]=d[1],c[2]=d[2],d)})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSInsertOptimisticAttachment",["LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.sequence([function(b){return c.forEach(c.filter(c.db.table(16).fetch([[[a[0],a[2],a[4]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[2]&&b.attachmentFbid===a[4]&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(16).add({threadKey:a[0],messageId:a[2],attachmentFbid:a[4],timestampMs:a[1],offlineAttachmentId:a[3],attachmentType:a[5],filename:a[6],attributionAppId:a[7],hasMedia:a[8],isSharable:!1,hasXma:a[9],authorityLevel:c.i64.cast([0,20])})},function(d){return c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[0],a[2],a[1],void 0,!1,c.i64.eq(a[5],c.i64.cast([0,1]))||c.i64.eq(a[5],c.i64.cast([0,15])))}])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("LSInsertPhase2PendingTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=void 0:(b=a.item,c[0]=b.threadKey)})},function(d){return b.i64.neq(c[0],void 0)?b.sequence([function(d){return c[3]=b.i64.of_float(Date.now()),b.db.table(2).add({taskId:void 0,taskValue:a[0],queueName:[b.i64.to_string(c[0]),"_multi_media"].join(""),context:"4",enqueueTimestampMs:c[3],pluginType:a[1]})},function(a){return c[2]=void 0}]):b.resolve(c[2]=b.i64.cast([0,1002]))},function(a){return d[0]=c[2]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSIssueSendAttachmentMessageTask",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSPredefineTraceForTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_int32(a[5].length),c.i64.gt(d[0],c.i64.cast([0,0]))?c.loopAsync(d[0],function(e){return d[5]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[5],d[5]).then(function(a){return a=a,d[6]=a[0],d[7]=a[1],a})},function(b){return c.forEach(c.filter(c.db.table(16).fetch([[[a[1],a[3]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[3]&&c.i64.eq(b.attachmentIndex,d[5])&&c.i64.eq(b.authorityLevel,c.i64.cast([0,20]))}),function(a){var b=a.update;a.item;return b({attachmentFbid:c.i64.to_string(d[6])})})}])}):c.resolve()},function(b){return c.i64.eq(void 0,c.i64.cast([0,12]))?d[1]=c.i64.cast([0,10]):(a[9]?d[5]=c.i64.cast([0,9]):d[5]=c.i64.cast([0,3]),d[1]=d[5]),c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[2]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[2]=d[5])})},function(e){return c.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),d[2],void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[4]=a[0],a})},function(e){return a[12]!==void 0?c.sequence([function(e){return c.storedProcedure(b("LSPredefineTraceForTask"),a[12],d[4],c.i64.to_string(c.i64.cast([0,46])),a[3])},function(d){return c.storedProcedure(b("LSAppendDataTraceAddon"),a[12],c.i64.cast([0,20]),c.i64.cast([0,1]),void 0,void 0)}]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[4],threadKey:a[1],offlineThreadingId:a[3],threadAttributionSource:a[6],platformRef:a[10],platformToken:a[11],replySourceId:a[7],replySourceType:a[8],sendType:d[1],markThreadRead:!1})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSLocalApplyOptimisticCommunityChatSubThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSGetViewerFBID","LSUpdateMessageSubThreadKey"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.cast([0,16408]),d[1]=c.i64.cast([0,0]),d[2]=c.i64.cast([0,268437504]),d[3]=c.i64.cast([0,0]),d[4]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[4]).then(function(a){return a=a,d[5]=a[0],a})},function(a){return c.localizeV2Async(c.i64.cast([0,261320435]),void 0).then(function(a){return d[6]=a})},function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(b,e){var f=b.done;b=b.value;return f?d[7]=d[6]:(e=b.item,c.sequence([function(b){return d[22]=e.text,d[22]!==void 0?c.resolve(d[21]=d[22]):c.sequence([function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[23]=void 0:(c=b.item,d[23]=c.senderId)})},function(a){return c.localizeV2Async(c.i64.cast([0,1369731110]),void 0).then(function(a){return d[25]=a})},function(b){return c.i64.neq(d[23],void 0)?c.sequence([function(b){return c.db.table(216).fetch([[[d[23],a[0]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[30]=void 0:(c=b.item,d[30]=c.profileName)})},function(a){return c.filter(c.db.table(7).fetch([[[d[23]]]]),function(a){return c.i64.eq(a.id,d[23])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[32]=void 0:(c=b.item,d[36]=c.firstName,d[36]!==void 0?d[35]=d[36]:d[35]=c.name,d[32]=d[35])})},function(a){return d[30]!==void 0?d[34]=d[30]:(d[32]!==void 0?d[35]=d[32]:d[35]=d[25],d[34]=d[35]),d[26]=d[34]}]):c.resolve(d[26]=d[25])},function(b){return c.db.table(16).fetch([[[a[1],a[2]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[27]=void 0:(c=b.item,d[27]=c.attachmentType)})},function(a){return c.i64.eq(d[27],c.i64.cast([0,5]))?c.sequence([function(a){return d[30]=c.createArray(),d[32]=(d[30].push(d[26]),d[30]),c.localizeV2Async(c.i64.cast([0,216075330]),d[30]).then(function(a){return d[31]=a})},function(a){return d[29]=d[31]}]):c.sequence([function(a){return c.i64.eq(d[27],c.i64.cast([0,2]))?c.sequence([function(a){return d[31]=c.createArray(),d[33]=(d[31].push(d[26]),d[31]),c.localizeV2Async(c.i64.cast([0,3093868587]),d[31]).then(function(a){return d[32]=a})},function(a){return d[30]=d[32]}]):c.sequence([function(a){return c.i64.eq(d[27],c.i64.cast([0,4]))?c.sequence([function(a){return d[32]=c.createArray(),d[34]=(d[32].push(d[26]),d[32]),c.localizeV2Async(c.i64.cast([0,1965569930]),d[32]).then(function(a){return d[33]=a})},function(a){return d[31]=d[33]}]):c.sequence([function(a){return c.i64.eq(d[27],c.i64.cast([0,1]))?c.sequence([function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[26]),d[33]),c.localizeV2Async(c.i64.cast([0,3981943156]),d[33]).then(function(a){return d[34]=a})},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.i64.eq(d[27],c.i64.cast([0,3]))?c.sequence([function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[26]),d[34]),c.localizeV2Async(c.i64.cast([0,2071149394]),d[34]).then(function(a){return d[35]=a})},function(a){return d[33]=d[35]}]):c.sequence([function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[26]),d[34]),c.localizeV2Async(c.i64.cast([0,2414298738]),d[34]).then(function(a){return d[35]=a})},function(a){return d[33]=d[35]}])},function(a){return d[32]=d[33]}])},function(a){return d[31]=d[32]}])},function(a){return d[30]=d[31]}])},function(a){return d[29]=d[30]}])},function(a){return d[21]=d[29]}])},function(a){return d[7]=d[21]}]))})},function(b){return d[9]=d[7],c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[void 0,void 0],d[10]=c[0],d[11]=c[1],c):(b=a.item,c=[b.themeFbid,b.customEmoji],d[10]=c[0],d[11]=c[1],c)})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.forEach(c.filter(c.db.table(9).fetch([[[d[5]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:d[5],mailboxType:c.i64.cast([0,0]),threadType:c.i64.cast([0,26]),clientThreadKey:d[5],folderName:"community",parentThreadKey:a[1],lastActivityTimestampMs:c.i64.cast([0,0]),lastReadWatermarkTimestampMs:c.i64.cast([0,0]),snippetHasEmoji:!1,snippetSenderContactId:d[13],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),capabilities:d[0],capabilities2:d[1],capabilities3:d[2],capabilities4:d[3],threadName:d[9],themeFbid:d[10],customEmoji:d[11]})},function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=void 0:(b=a.item,d[14]=b.senderId)})},function(a){return d[16]=c.createArray(),c.i64.neq(d[14],void 0)?d[21]=(d[16].push(d[14]),d[16]):0,c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return c.i64.neq(d[14],d[17])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[22]=(d[16].push(d[21]),d[16])}]):c.resolve()},function(a){return d[18]=c.i64.of_int32(d[16].length),c.i64.gt(d[18],c.i64.cast([0,0]))?c.loopAsync(d[18],function(a){return d[21]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[16],d[21]).then(function(a){return a=a,d[22]=a[0],d[23]=a[1],a})},function(a){return c.forEach(c.filter(c.db.table(14).fetch([[[d[5],d[22]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(a.contactId,d[22])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(a){return c.db.table(14).add({threadKey:d[5],contactId:d[22],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}])}):c.resolve()},function(e){return c.storedProcedure(b("LSUpdateMessageSubThreadKey"),a[2],d[5])},function(a){return c.resolve()},function(b){return d[19]=new c.Map(),d[19].set("client_mutation_id",d[5]),d[19].set("community_id",a[0]),d[19].set("parent_thread_id",a[1]),d[19].set("parent_message_id",a[2]),d[20]=c.toJSON(d[19]),c.db.table(312).put({threadKey:d[5],metadata:d[20]})},function(a){return e[0]=d[5]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSSetMessageViewFlags",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),b.i64.cast([0,0]),b.i64.cast([0,0]),!1,"nonexistent",b.i64.cast([0,20]),void 0,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[0]=e[0],c[1]=e[1],c[2]=e[2],c[3]=e[3],c[4]=e[4],c[5]=e[5],c[6]=e[6],c[7]=e[7],c[8]=e[8],e):(d=a.item,e=[d.timestampMs,d.senderId,d.viewFlags,d.isAdminMessage,d.messageId,d.authorityLevel,d.stickerId,d.primarySortKey,d.secondarySortKey==null?b.i64.cast([-1,4294967295]):d.secondarySortKey],c[0]=e[0],c[1]=e[1],c[2]=e[2],c[3]=e[3],c[4]=e[4],c[5]=e[5],c[6]=e[6],c[7]=e[7],c[8]=e[8],e)})},function(d){return b.sortBy(b.filter(b.db.table(12).fetch([[[a[0],{gt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.gt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.ge(d.secondarySortKey==null?b.i64.cast([-1,4294967295]):d.secondarySortKey,c[8]))}),[["timestampMs","ASC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),b.i64.cast([0,0]),b.i64.cast([0,0]),!1,"nonexistent",b.i64.cast([0,20]),void 0,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[10]=e[0],c[11]=e[1],c[12]=e[2],c[13]=e[3],c[14]=e[4],c[15]=e[5],c[16]=e[6],c[17]=e[7],c[18]=e[8],e):(d=a.item,e=[d.timestampMs,d.senderId,d.viewFlags,d.isAdminMessage,d.messageId,d.authorityLevel,d.stickerId,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[10]=e[0],c[11]=e[1],c[12]=e[2],c[13]=e[3],c[14]=e[4],c[15]=e[5],c[16]=e[6],c[17]=e[7],c[18]=e[8],e)})},function(d){return b.sortBy(b.filter(b.db.table(12).fetchDesc([[[a[0],{lt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.lt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.le(d.secondarySortKey==null?b.i64.cast([-1,4294967295]):d.secondarySortKey,c[8]))}),[["timestampMs","DESC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),b.i64.cast([0,0]),b.i64.cast([0,0]),!1,"nonexistent",b.i64.cast([0,20]),void 0,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[20]=e[0],c[21]=e[1],c[22]=e[2],c[23]=e[3],c[24]=e[4],c[25]=e[5],c[26]=e[6],c[27]=e[7],c[28]=e[8],e):(d=a.item,e=[d.timestampMs,d.senderId,d.viewFlags,d.isAdminMessage,d.messageId,d.authorityLevel,d.stickerId,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[20]=e[0],c[21]=e[1],c[22]=e[2],c[23]=e[3],c[24]=e[4],c[25]=e[5],c[26]=e[6],c[27]=e[7],c[28]=e[8],e)})},function(d){return c[32]=b.i64.or_(b.i64.cast([0,2]),b.i64.or_(!c[3]&&!a[3]?b.i64.cast([0,4]):b.i64.cast([0,0]),b.i64.or_(c[3]?b.i64.cast([0,0]):b.i64.cast([0,1]),b.i64.or_(b.i64.eq(c[5],b.i64.cast([0,60]))||b.i64.eq(c[5],b.i64.cast([0,80]))?b.i64.cast([0,1048576]):b.i64.cast([0,0]),b.i64.neq(c[6],b.i64.cast([85970,924785702]))&&b.i64.neq(c[6],b.i64.cast([85970,1004785694]))&&b.i64.neq(c[6],b.i64.cast([85970,1044785690]))?b.i64.cast([0,0]):b.i64.cast([0,2097152]))))),c[14]!=="nonexistent"?b.sequence([function(d){return c[35]=b.i64.or_(b.i64.and_(c[12],b.i64.cast([-1,4294967280])),b.i64.or_(b.i64.gt(b.i64.sub(c[10],c[0]),b.i64.cast([0,6e5]))?b.i64.cast([0,2]):b.i64.cast([0,0]),b.i64.or_(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),b.i64.cast([0,6e5]))?b.i64.cast([0,8]):b.i64.cast([0,0]),b.i64.or_(!a[3]&&!c[13]&&!(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),b.i64.cast([0,6e5])))?b.i64.cast([0,4]):b.i64.cast([0,0]),b.i64.and_(c[12],b.i64.cast([0,1])))))),c[33]=b.i64.eq(b.i64.and_(c[35],b.i64.cast([0,8])),b.i64.cast([0,8])),c[34]=c[33]?b.i64.or_(c[32],b.i64.cast([0,16])):c[32],b.forEach(b.filter(b.db.table(12).fetch([[[a[0],c[10],c[14]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(d.timestampMs,c[10])&&d.messageId===c[14]}),function(a){var b=a.update;a.item;return b({viewFlags:c[35]})})},function(a){return c[30]=c[33]?b.i64.and_(c[34],b.i64.cast([-1,4294967294])):c[34]}]):b.resolve(c[30]=c[32])},function(d){return c[24]!=="nonexistent"?b.sequence([function(d){return c[35]=b.i64.or_(b.i64.and_(c[30],b.i64.cast([-1,4294967280])),b.i64.or_(b.i64.gt(b.i64.sub(c[0],c[20]),b.i64.cast([0,6e5]))?b.i64.cast([0,2]):b.i64.cast([0,0]),b.i64.or_(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),b.i64.cast([0,6e5]))?b.i64.cast([0,8]):b.i64.cast([0,0]),b.i64.or_(!a[3]&&!c[3]&&!(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),b.i64.cast([0,6e5])))?b.i64.cast([0,4]):b.i64.cast([0,0]),b.i64.and_(c[30],b.i64.cast([0,1])))))),c[33]=b.i64.eq(b.i64.and_(c[35],b.i64.cast([0,8])),b.i64.cast([0,8])),c[34]=c[33]?b.i64.or_(c[22],b.i64.cast([0,16])):c[22],b.forEach(b.filter(b.db.table(12).fetch([[[a[0],c[20],c[24]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(d.timestampMs,c[20])&&d.messageId===c[24]}),function(a){var d=a.update;a.item;return d({viewFlags:c[33]?b.i64.and_(c[34],b.i64.cast([-1,4294967294])):c[34]})})},function(a){return c[31]=c[35]}]):b.resolve(c[31]=c[30])},function(d){return b.forEach(b.filter(b.db.table(12).fetch([[[a[0],c[0],c[4]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(d.timestampMs,c[0])&&d.messageId===c[4]}),function(a){var b=a.update;a.item;return b({viewFlags:c[31]})})}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSLocalApplyOptimisticMessage",["LSCreateOfflineThreadingID","LSGetLocalizedReplySnippet","LSIssueNewError","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),void 0!==void 0?c.resolve(d[1]=void 0):c.sequence([function(a){return c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[1]=c.i64.to_string(d[9])}])},function(e){return d[8]=a[4]==null?a[3]:a[4],c.sequence([function(a){return c.islc(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?d[9]=c.i64.cast([-1,4294967295]):(b=a.item,d[9]=b.lastActivityTimestampMs)})},function(e){return d[11]=c.i64.add(d[9],c.i64.cast([0,1])),d[13]=c.i64.gt(d[0],d[11])?d[0]:d[11],c.db.table(9).fetch([[[a[1]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(b){return function(a){c.logger(a).info(a)}("localApplyOptimisticMessage insert optimistic thread"),c.forEach(c.filter(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,40]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[1],mailboxType:c.i64.cast([0,0]),threadType:a[2],clientThreadKey:a[1],folderName:"inbox",parentThreadKey:c.i64.cast([0,0]),lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,40])})},function(b){return c.i64.eq(a[2],c.i64.cast([0,13]))||c.i64.eq(a[2],c.i64.cast([0,7]))||c.i64.eq(a[2],c.i64.cast([0,1]))?c.sequence([function(b){return c.forEach(c.filter(c.db.table(14).fetch([[[a[1],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[1],contactId:a[1],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}]):c.resolve()},function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=!1:(b=a.item,d[14]=b.errorShouldBeShown)})},function(a){return d[14]===!0?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[16]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[17]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[16],d[17],void 0,void 0)}]):c.resolve()}]):(e.item,c.forEach(c.filter(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(b.threadType,a[2])}),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],snippetText:void 0,snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,additionalThreadContext:void 0})}))})}])},function(e){return c.sequence([function(b){return c.islc(c.filter(c.db.table(12).fetchDesc([[[a[1]]],"messageDisplayOrder"]),function(b){return c.i64.eq(b.threadKey,a[1])&&(c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,60]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,40])))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[33]=c.i64.of_float(Date.now()),d[9]=d[33]):(b=a.item,d[9]=b.primarySortKey)})},function(e){return a[8]!==void 0&&(c.i64.eq(a[9],c.i64.cast([0,1]))||c.i64.eq(a[10],c.i64.cast([0,1])))?c.sequence([function(e){return c.filter(c.db.table(12).fetch([[[a[8]==null?"":a[8]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===(a[8]==null?"":a[8])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(g=[a[8],void 0,void 0,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[33]=g[0],d[34]=g[1],d[35]=g[2],d[36]=g[3],d[37]=g[4],d[38]=g[5],d[39]=g[6],d[40]=g[7],d[41]=g[8],d[42]=g[9],d[43]=g[10],d[44]=g[11],d[45]=g[12],d[46]=g[13],d[47]=g[14],d[48]=g[15],g):(f=e.item,c.sequence([function(e){return d[54]=f.senderId,d[53]=f.stickerId,c.i64.neq(d[53],void 0)?(e=[d[53],c.i64.cast([0,4])],d[56]=e[0],d[57]=e[1],e):(e=[void 0,void 0],d[56]=e[0],d[57]=e[1],e),e=[d[56],d[57]],d[50]=e[0],d[51]=e[1],e,d[55]=f.replyType==null?c.i64.cast([0,0]):f.replyType,c.sequence([function(e){return c.storedProcedure(b("LSGetLocalizedReplySnippet"),a[1],a[0],d[54],d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(b){return d[52]=c.i64.eq(a[10],c.i64.cast([0,1]))?d[56]:""}])},function(b){return b=[a[8],a[9],a[10],c.i64.cast([0,1]),d[52],d[54],f.text,d[50],d[51],void 0,void 0,void 0,void 0,void 0,void 0,d[55]],d[33]=b[0],d[34]=b[1],d[35]=b[2],d[36]=b[3],d[37]=b[4],d[38]=b[5],d[39]=b[6],d[40]=b[7],d[41]=b[8],d[42]=b[9],d[43]=b[10],d[44]=b[11],d[45]=b[12],d[46]=b[13],d[47]=b[14],d[48]=b[15],b}]))})},function(a){return a=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],d[16]=a[5],d[17]=a[6],d[18]=a[7],d[19]=a[8],d[20]=a[9],d[21]=a[10],d[22]=a[11],d[23]=a[12],d[24]=a[13],d[25]=a[14],d[26]=a[15],a}]):c.resolve((a[8]===void 0||c.i64.eq(a[9],c.i64.cast([0,0]))||c.i64.eq(a[10],c.i64.cast([0,0]))?(e=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e):(e=[a[8],a[9],a[10],c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e),e=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=e[0],d[12]=e[1],d[13]=e[2],d[14]=e[3],d[15]=e[4],d[16]=e[5],d[17]=e[6],d[18]=e[7],d[19]=e[8],d[20]=e[9],d[21]=e[10],d[22]=e[11],d[23]=e[12],d[24]=e[13],d[25]=e[14],d[26]=e[15],e))},function(b){return a[13]?d[27]=!1:d[27]=!0,d[27]?(b=[void 0,void 0,void 0,void 0],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b):(d[33]=a[13].get("mention_offsets"),a[13],d[34]=a[13].get("mention_lengths"),a[13],d[35]=a[13].get("mention_ids"),a[13],d[36]=a[13].get("mention_types"),a[13],b=[d[33],d[34],d[35],d[36]],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b),a[11]?d[32]=c.i64.cast([0,3]):d[32]=d[13],c.i64.eq(c.i64.cast([0,20]),c.i64.cast([0,20]))?c.db.table(12).add({threadKey:a[1],messageId:d[1],timestampMs:d[0],offlineThreadingId:d[1],primarySortKey:d[9],secondarySortKey:d[0],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]}):c.sequence([function(a){return c.db.table(12).fetch([[[d[1]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[d[9],d[0],void 0],d[33]=c[0],d[34]=c[1],d[35]=c[2],c):(b=a.item,c=[b.primarySortKey,b.secondarySortKey,b.localDataId],d[33]=c[0],d[34]=c[1],d[35]=c[2],c)})},function(a){return c.forEach(c.filter(c.db.table(12).fetch([[[d[1]]],"optimistic"]),function(a){return a.offlineThreadingId===d[1]&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(12).add({threadKey:a[1],messageId:d[1],timestampMs:d[0],offlineThreadingId:d[1],primarySortKey:d[33],secondarySortKey:d[34],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),localDataId:d[35],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]})}])}])},function(e){return d[2]=c.createArray(),d[3]=(d[2].push("LSMailboxLocalApplyOptimisticMessageStoredProcedure"),d[2]),d[4]=(d[2].push("localApplyOptimisticMessage"),d[2]),d[5]=(d[2].push(a[1]),d[2]),d[6]=(d[2].push(d[1]),d[2]),d[7]=c.toJSON(d[2]),function(a){c.logger(a).info(a)}(d[7]),a[14]?c.sequence([function(e){return c.storedProcedure(b("LSSetMessageViewFlags"),a[1],d[1],d[0],c.i64.eq(a[2],c.i64.cast([0,1])))},function(e){return c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[1],d[1],d[0],a[3],!1,c.i64.neq(a[6],void 0))}]):c.resolve()},function(a){return a=[d[1],d[0]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSLocalApplyOptimisticMessageV2",["LSCreateOfflineThreadingID","LSGetLocalizedReplySnippet","LSIssueNewError","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(e){return d[4]=c.i64.to_string(d[1]),d[3]=a[4]==null?a[3]:a[4],c.sequence([function(b){return d[5]=a[5].get("snippet_has_emoji"),a[5],c.islc(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?d[6]=c.i64.cast([-1,4294967295]):(b=a.item,d[6]=b.lastActivityTimestampMs)})},function(e){return d[8]=c.i64.add(d[6],c.i64.cast([0,1])),d[10]=c.i64.gt(d[0],d[8])?d[0]:d[8],c.db.table(9).fetch([[[a[1]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(b){return function(a){c.logger(a).info(a)}("localApplyOptimisticMessage insert optimistic thread"),c.i64.eq(a[2],c.i64.cast([0,1]))?c.sequence([function(b){return c.filter(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?d[16]=!1:(b=a.item,d[19]=b.capabilities2,c.i64.neq(d[19],void 0)?d[18]=d[19]:d[18]=c.i64.cast([0,0]),d[16]=c.i64.neq(c.i64.and_(d[18],c.i64.cast([0,4096])),c.i64.cast([0,0])))})},function(a){return d[11]=d[16]}]):c.resolve(d[11]=!1)},function(b){return d[11]?d[12]="e2ee_cutover":d[12]="inbox",d[11]?d[13]=c.i64.cast([-1,4294967279]):d[13]=c.i64.cast([0,0]),c.forEach(c.filter(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,40]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[1],mailboxType:c.i64.cast([0,0]),threadType:a[2],clientThreadKey:a[1],folderName:d[12],parentThreadKey:d[13],lastActivityTimestampMs:d[10],lastReadWatermarkTimestampMs:d[10],snippet:d[3],snippetHasEmoji:d[5]==null?!1:d[5],snippetSenderContactId:a[0],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,40])})},function(b){return c.i64.eq(a[2],c.i64.cast([0,13]))||c.i64.eq(a[2],c.i64.cast([0,7]))||c.i64.eq(a[2],c.i64.cast([0,1]))?c.sequence([function(b){return c.forEach(c.filter(c.db.table(14).fetch([[[a[1],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[1],contactId:a[1],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}]):c.resolve()},function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=!1:(b=a.item,d[14]=b.errorShouldBeShown)})},function(a){return d[14]===!0?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[16]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[17]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[16],d[17],void 0,void 0)}]):c.resolve()}]):(e.item,c.forEach(c.filter(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(b.threadType,a[2])}),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:d[10],lastReadWatermarkTimestampMs:d[10],snippet:d[3],snippetHasEmoji:d[5]==null?!1:d[5],snippetSenderContactId:a[0],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,additionalThreadContext:void 0})}))})}])},function(e){return c.sequence([function(b){return c.islc(c.filter(c.db.table(12).fetchDesc([[[a[1]]],"messageDisplayOrder"]),function(b){return c.i64.eq(b.threadKey,a[1])&&(c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,60]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,40])))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[54]=c.i64.of_float(Date.now()),d[5]=d[54]):(b=a.item,d[5]=b.primarySortKey)})},function(e){return d[7]=a[5].get("reply_source_id"),a[5],d[8]=a[5].get("reply_source_type"),a[5],d[9]=a[5].get("reply_source_type_v2"),a[5],d[10]=a[5].get("reply_type"),a[5],d[7]!==void 0&&(c.i64.eq(d[8],c.i64.cast([0,1]))||c.i64.eq(d[9],c.i64.cast([0,1])))?c.sequence([function(e){return c.filter(c.db.table(12).fetch([[[d[7]==null?"":d[7]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===(d[7]==null?"":d[7])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(g=[d[7],void 0,void 0,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[54]=g[0],d[55]=g[1],d[56]=g[2],d[57]=g[3],d[58]=g[4],d[59]=g[5],d[60]=g[6],d[61]=g[7],d[62]=g[8],d[63]=g[9],d[64]=g[10],d[65]=g[11],d[66]=g[12],d[67]=g[13],d[68]=g[14],d[69]=g[15],g):(f=e.item,c.sequence([function(e){return d[75]=f.senderId,d[74]=f.stickerId,c.i64.neq(d[74],void 0)?(e=[d[74],c.i64.cast([0,4])],d[76]=e[0],d[77]=e[1],e):(e=[void 0,void 0],d[76]=e[0],d[77]=e[1],e),e=[d[76],d[77]],d[71]=e[0],d[72]=e[1],e,c.sequence([function(e){return c.storedProcedure(b("LSGetLocalizedReplySnippet"),a[1],a[0],d[75],d[10]==null?c.i64.cast([0,0]):d[10]).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[73]=c.i64.eq(d[9],c.i64.cast([0,1]))?d[76]:""}])},function(a){return a=[d[7],d[8],d[9],c.i64.cast([0,1]),d[73],d[75],f.text,d[71],d[72],void 0,void 0,void 0,void 0,void 0,void 0,d[10]],d[54]=a[0],d[55]=a[1],d[56]=a[2],d[57]=a[3],d[58]=a[4],d[59]=a[5],d[60]=a[6],d[61]=a[7],d[62]=a[8],d[63]=a[9],d[64]=a[10],d[65]=a[11],d[66]=a[12],d[67]=a[13],d[68]=a[14],d[69]=a[15],a}]))})},function(a){return a=[d[54],d[55],d[56],d[57],d[58],d[59],d[60],d[61],d[62],d[63],d[64],d[65],d[66],d[67],d[68],d[69]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],d[16]=a[5],d[17]=a[6],d[18]=a[7],d[19]=a[8],d[20]=a[9],d[21]=a[10],d[22]=a[11],d[23]=a[12],d[24]=a[13],d[25]=a[14],d[26]=a[15],a}]):c.resolve((d[7]===void 0||c.i64.eq(d[8],c.i64.cast([0,0]))||c.i64.eq(d[9],c.i64.cast([0,0]))?(e=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[54]=e[0],d[55]=e[1],d[56]=e[2],d[57]=e[3],d[58]=e[4],d[59]=e[5],d[60]=e[6],d[61]=e[7],d[62]=e[8],d[63]=e[9],d[64]=e[10],d[65]=e[11],d[66]=e[12],d[67]=e[13],d[68]=e[14],d[69]=e[15],e):(e=[d[7],d[8],d[9],c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[54]=e[0],d[55]=e[1],d[56]=e[2],d[57]=e[3],d[58]=e[4],d[59]=e[5],d[60]=e[6],d[61]=e[7],d[62]=e[8],d[63]=e[9],d[64]=e[10],d[65]=e[11],d[66]=e[12],d[67]=e[13],d[68]=e[14],d[69]=e[15],e),e=[d[54],d[55],d[56],d[57],d[58],d[59],d[60],d[61],d[62],d[63],d[64],d[65],d[66],d[67],d[68],d[69]],d[11]=e[0],d[12]=e[1],d[13]=e[2],d[14]=e[3],d[15]=e[4],d[16]=e[5],d[17]=e[6],d[18]=e[7],d[19]=e[8],d[20]=e[9],d[21]=e[10],d[22]=e[11],d[23]=e[12],d[24]=e[13],d[25]=e[14],d[26]=e[15],e))},function(b){return d[27]=a[5].get("mention_data"),a[5],d[27]?d[28]=!1:d[28]=!0,d[28]?(b=[void 0,void 0,void 0,void 0],d[29]=b[0],d[30]=b[1],d[31]=b[2],d[32]=b[3],b):(d[54]=d[27].get("mention_offsets"),d[27],d[55]=d[27].get("mention_lengths"),d[27],d[56]=d[27].get("mention_ids"),d[27],d[57]=d[27].get("mention_types"),d[27],b=[d[54],d[55],d[56],d[57]],d[29]=b[0],d[30]=b[1],d[31]=b[2],d[32]=b[3],b),d[33]=a[5].get("magic_words_data"),a[5],d[33]?d[34]=!1:d[34]=!0,d[34]?(b=[void 0,void 0],d[35]=b[0],d[36]=b[1],b):(d[54]=d[33].get("magic_word_offsets"),d[33],d[55]=d[33].get("magic_word_lengths"),d[33],b=[d[54],d[55]],d[35]=b[0],d[36]=b[1],b),d[53]=c.i64.eq(d[10],c.i64.cast([0,1]))?d[17]:a[3],d[37]=a[5].get("sticker_id"),a[5],d[38]=a[5].get("sticker_alt_text"),a[5],d[39]=a[5].get("hot_emoji_size"),a[5],d[40]=a[5].get("iout"),a[5],d[41]=a[5].get("platform_XMD_encoded"),a[5],d[42]=a[5].get("is_forwarded"),a[5],d[43]=a[5].get("forward_score"),a[5],d[44]=a[5].get("power_up_style"),a[5],d[45]=a[5].get("local_data_id"),a[5],d[46]=a[5].get("command_type"),a[5],d[47]=a[5].get("reply_type"),a[5],d[48]=a[5].get("rich_text_format_type"),a[5],c.i64.eq(d[48],c.i64.cast([0,1]))?d[49]=c.i64.cast([0,3]):d[49]=c.i64.cast([0,0]),d[50]=a[5].get("ephemeral_duration_in_sec"),a[5],d[51]=a[5].get("is_forwarded"),a[5],d[51]?d[52]=c.i64.cast([0,3]):d[52]=d[13],c.i64.eq(c.i64.cast([0,20]),c.i64.cast([0,20]))?c.db.table(12).add({threadKey:a[1],messageId:d[4],timestampMs:d[0],offlineThreadingId:d[4],primarySortKey:d[5],secondarySortKey:d[0],text:d[53],senderId:a[0],stickerId:d[37],hotEmojiSize:d[39],isForwarded:d[42],forwardScore:d[43],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),localDataId:d[45],replyType:d[26],messageRenderingType:d[49],ephemeralDurationInSec:d[50],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[52],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],mentionOffsets:d[29],mentionLengths:d[30],mentionIds:d[31],mentionTypes:d[32]}):c.sequence([function(a){return c.db.table(12).fetch([[[d[4]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[d[5],d[0],d[45]],d[54]=c[0],d[55]=c[1],d[56]=c[2],c):(b=a.item,c=[b.primarySortKey,b.secondarySortKey,b.localDataId],d[54]=c[0],d[55]=c[1],d[56]=c[2],c)})},function(a){return c.forEach(c.filter(c.db.table(12).fetch([[[d[4]]],"optimistic"]),function(a){return a.offlineThreadingId===d[4]&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(12).add({threadKey:a[1],messageId:d[4],timestampMs:d[0],offlineThreadingId:d[4],primarySortKey:d[54],secondarySortKey:d[55],text:d[53],senderId:a[0],stickerId:d[37],hotEmojiSize:d[39],isForwarded:d[42],forwardScore:d[43],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),localDataId:d[56],replyType:d[26],messageRenderingType:d[49],ephemeralDurationInSec:d[50],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[52],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],mentionOffsets:d[29],mentionLengths:d[30],mentionIds:d[31],mentionTypes:d[32]})}])}])},function(e){return d[5]=c.createArray(),d[6]=(d[5].push("LSMailboxLocalApplyOptimisticMessageV2StoredProcedure"),d[5]),d[7]=(d[5].push("localApplyOptimisticMessage"),d[5]),d[8]=(d[5].push(a[1]),d[5]),d[9]=(d[5].push(d[4]),d[5]),d[10]=c.toJSON(d[5]),function(a){c.logger(a).info(a)}(d[10]),d[2]=a[5].get("calculate_denormalizations"),a[5],(d[2]==null?!0:d[2])?c.sequence([function(e){return c.storedProcedure(b("LSSetMessageViewFlags"),a[1],d[4],d[0],c.i64.eq(a[2],c.i64.cast([0,1])))},function(e){return d[5]=a[5].get("sticker_id"),a[5],c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[1],d[4],d[0],a[3],!1,c.i64.neq(d[5],void 0))}]):c.resolve()},function(a){return a=[d[4],d[0]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSLocalCreateOptimisticCommunityChatSubThread",["LSIssueNewTask","LSLocalApplyOptimisticCommunityChatSubThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticCommunityChatSubThread"),a[0],a[1],a[2]).then(function(a){return a=a,d[0]=a[0],a})},function(e){return d[1]=new c.Map(),d[1].set("client_thread_key",d[0]),d[1].set("community_id",a[0]),d[1].set("parent_thread_id",a[1]),d[1].set("parent_message_id",a[2]),d[2]=d[1].get("client_thread_key"),d[1],d[3]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[2]),c.i64.cast([0,749]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure",["LSLocalCreateOptimisticCommunityChatSubThread","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.communityId;d[1]=b.parentThreadId;d[2]=b.parentMessageId;return c("LSLocalCreateOptimisticCommunityChatSubThread").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSMailboxAIBotFeedbackSubmissionStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SUBMITTED:1});f["default"]=a}),66);
__d("LSMarkSubJobCompletedV2",["LSArrayGetObjectAt"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return d[0]=c.createArray(),c.db.table(51).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?0:(b=a.item,d[3]=new c.Map(),d[3].set("offline_attachment_id",b.offlineAttachmentId),d[3].set("offline_threading_id",b.offlineThreadingId),d[3].set("in_message_index",b.inMessageIndex),d[3].set("attachment_type",b.attachmentType),d[3].set("should_transcode",b.shouldTranscode),d[3].set("use_double_phase",b.useDoublePhase),d[3].set("send_by_server",b.sendByServer),d[3].set("is_secure",b.isSecure),d[3].set("state",b.state),d[3].set("fbid",b.fbid),d[3].set("metadata",b.metadata),d[3].set("error",b.error),d[3].set("message_id",b.messageId),d[4]=(d[0].push(d[3]),d[0]))})},function(e){return d[2]=c.i64.of_int32(d[0].length),c.i64.neq(d[2],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[0],c.i64.cast([0,0])).then(function(a){return a=a,d[3]=a[0],d[4]=a[1],a})},function(b){return d[5]=d[3].get("state"),d[3],c.i64.neq(a[1],void 0)?a[2]!==void 0?(c.i64.eq(d[5],c.i64.cast([-1,4294967293]))?(d[7]=c.i64.cast([-1,4294967295]),d[6]=d[7]):(c.i64.eq(d[5],c.i64.cast([0,1]))?d[7]=c.i64.cast([0,2]):(c.i64.eq(d[5],c.i64.cast([0,3]))?d[8]=c.i64.cast([0,4]):(c.i64.eq(d[5],c.i64.cast([0,5]))?d[9]=c.i64.cast([0,6]):(c.i64.eq(d[5],c.i64.cast([0,13]))?d[10]=c.i64.cast([0,14]):(c.i64.eq(d[5],c.i64.cast([0,7]))?d[11]=c.i64.cast([0,8]):(c.i64.eq(d[5],c.i64.cast([0,9]))?d[12]=c.i64.cast([0,10]):(c.i64.eq(d[5],c.i64.cast([0,11]))?d[13]=c.i64.cast([0,12]):d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.forEach(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],messageId:a[2],metadata:a[3]})})):(c.i64.eq(d[5],c.i64.cast([-1,4294967293]))?(d[7]=c.i64.cast([-1,4294967295]),d[6]=d[7]):(c.i64.eq(d[5],c.i64.cast([0,1]))?d[7]=c.i64.cast([0,2]):(c.i64.eq(d[5],c.i64.cast([0,3]))?d[8]=c.i64.cast([0,4]):(c.i64.eq(d[5],c.i64.cast([0,5]))?d[9]=c.i64.cast([0,6]):(c.i64.eq(d[5],c.i64.cast([0,13]))?d[10]=c.i64.cast([0,14]):(c.i64.eq(d[5],c.i64.cast([0,7]))?d[11]=c.i64.cast([0,8]):(c.i64.eq(d[5],c.i64.cast([0,9]))?d[12]=c.i64.cast([0,10]):(c.i64.eq(d[5],c.i64.cast([0,11]))?d[13]=c.i64.cast([0,12]):d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.forEach(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],metadata:a[3]})})):c.i64.neq(a[4],void 0)?(c.i64.eq(d[5],c.i64.cast([-1,4294967293]))?(d[7]=c.i64.cast([-1,4294967295]),d[6]=d[7]):(c.i64.eq(d[5],c.i64.cast([0,1]))?d[7]=c.i64.cast([0,2]):(c.i64.eq(d[5],c.i64.cast([0,3]))?d[8]=c.i64.cast([0,4]):(c.i64.eq(d[5],c.i64.cast([0,5]))?d[9]=c.i64.cast([0,6]):(c.i64.eq(d[5],c.i64.cast([0,13]))?d[10]=c.i64.cast([0,14]):(c.i64.eq(d[5],c.i64.cast([0,7]))?d[11]=c.i64.cast([0,8]):(c.i64.eq(d[5],c.i64.cast([0,9]))?d[12]=c.i64.cast([0,10]):(c.i64.eq(d[5],c.i64.cast([0,11]))?d[13]=c.i64.cast([0,12]):d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.forEach(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],error:a[4]})})):(c.i64.eq(d[5],c.i64.cast([-1,4294967293]))?(d[7]=c.i64.cast([-1,4294967295]),d[6]=d[7]):(c.i64.eq(d[5],c.i64.cast([0,1]))?d[7]=c.i64.cast([0,2]):(c.i64.eq(d[5],c.i64.cast([0,3]))?d[8]=c.i64.cast([0,4]):(c.i64.eq(d[5],c.i64.cast([0,5]))?d[9]=c.i64.cast([0,6]):(c.i64.eq(d[5],c.i64.cast([0,13]))?d[10]=c.i64.cast([0,14]):(c.i64.eq(d[5],c.i64.cast([0,7]))?d[11]=c.i64.cast([0,8]):(c.i64.eq(d[5],c.i64.cast([0,9]))?d[12]=c.i64.cast([0,10]):(c.i64.eq(d[5],c.i64.cast([0,11]))?d[13]=c.i64.cast([0,12]):d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.forEach(c.db.table(51).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({state:d[6]})}))}]):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSMarkSubJobCompletedV2StoredProcedure",["LSMarkSubJobCompletedV2","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.offlineAttachmentId;d[1]=b.fbid;d[2]=b.messageId;d[3]=b.metadata;d[4]=b.error;return c("LSMarkSubJobCompletedV2").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSMediaUrlAttachment",["I64","LSMediaUrlUtils","rewriteFallbackUrl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.previewUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.previewUrlFallback):a.previewUrl}function b(a){var b=a.previewUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.previewUrlFallback):a.previewUrlLarge}function e(a){var b=a.playableUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.playableUrlFallback):a.playableUrl}function f(a){var b=a.imageUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.imageUrlFallback):a.imageUrl}function i(a){var b=a.faviconUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.faviconUrlFallback):a.faviconUrl}function j(a){try{var b=a.listItemContactUrlExpirationTimestampList1;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?c("rewriteFallbackUrl")(a.listItemContactUrlFallbackList1):a.listItemContactUrlList1}catch(b){return a.listItemContactUrlList1}}function k(a){try{var b=a.listItemContactUrlExpirationTimestampList2;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?c("rewriteFallbackUrl")(a.listItemContactUrlFallbackList2):a.listItemContactUrlList2}catch(b){return a.listItemContactUrlList2}}function l(a){try{var b=a.listItemContactUrlExpirationTimestampList3;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?c("rewriteFallbackUrl")(a.listItemContactUrlFallbackList3):a.listItemContactUrlList3}catch(b){return a.listItemContactUrlList3}}function m(a){var b=a.headerImageUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.headerImageUrlFallback):a.headerImageUrl}function n(a){try{var b=a.listItemProfilePictureUrlExpirationTimestamp1;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b)))return c("rewriteFallbackUrl")(a.listItemProfilePictureUrlFallback1);else return a.listItemProfilePictureUrl1}catch(b){return a.listItemProfilePictureUrl1}}function o(a){try{var b=a.listItemProfilePictureUrlExpirationTimestamp2;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?c("rewriteFallbackUrl")(a.listItemProfilePictureUrlFallback2):a.listItemProfilePictureUrl2}catch(b){return a.listItemProfilePictureUrl2}}function p(a){try{var b=a.listItemProfilePictureUrlExpirationTimestamp3;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?c("rewriteFallbackUrl")(a.listItemProfilePictureUrlFallback3):a.listItemProfilePictureUrl3}catch(b){return a.listItemProfilePictureUrl3}}g.previewUrl=a;g.previewUrlLarge=b;g.playableUrl=e;g.imageUrl=f;g.faviconUrl=i;g.listItemContactUrlList1=j;g.listItemContactUrlList2=k;g.listItemContactUrlList3=l;g.headerImageUrl=m;g.listItemProfilePictureUrl1=n;g.listItemProfilePictureUrl2=o;g.listItemProfilePictureUrl3=p}),98);
__d("LSMessageReplySourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,LIGHTWEIGHT_STATUS:6,LIGHTWEIGHT_STATUS_REACTION:7,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18});f["default"]=a}),66);
__d("LSMessageSendToSentQPLInteractionHelper.nop",["Promise","QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,d,e,f){f!=null&&c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),e,{instanceKey:parseInt(f,10)});return(h||(h=b("Promise"))).resolve()}g["default"]=a}),98);
__d("LSUpdateOptimisticAttachmentPreview",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(c){return c.attachmentFbid===a[2]&&b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.authorityLevel,b.i64.cast([0,20]))}),function(b){var c=b.update;b.item;return c({playableUrl:a[3],playableUrlFallback:a[4],playableUrlExpirationTimestampMs:a[5],playableUrlMimeType:a[6],previewUrl:a[7],previewUrlFallback:a[8],previewUrlExpirationTimestampMs:a[9],previewUrlMimeType:a[10],previewWidth:a[11],previewHeight:a[12],imageUrl:void 0,imageUrlFallback:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlMimeType:void 0})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSOptimisticSendAttachmentForward",["LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[1]=a[3]===""?void 0:a[3],d[1]!==void 0?c.sequence([function(b){return c.forEach(c.filter(c.db.table(16).fetch([[[a[1],d[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===d[1]&&c.i64.eq(b.authorityLevel,c.i64.cast([0,20]))}),function(b){var d=b.update;b.item;return d({attachmentFbid:c.i64.to_string(a[7])})})},function(a){return d[0]=d[1]}]):c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[4],a[5],a[6],void 0,void 0,void 0,void 0,c.i64.cast([0,3]),void 0,void 0,void 0,!0).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(e){return c.filter(c.db.table(16).fetch(),function(b){return b.attachmentFbid===c.i64.to_string(a[7])}).next().then(function(e,f){var g=e.done;e=e.value;return g?c.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],d[3],d[2],d[2],c.i64.to_string(a[7]),c.i64.cast([0,2]),void 0,void 0,!0,!1):(f=e.item,c.sequence([function(e){return c.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],d[3],d[2],d[2],c.i64.to_string(a[7]),f.attachmentType,f.filename,f.attributionAppId,!0,!1)},function(e){return c.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[2],c.i64.to_string(a[7]),f.playableUrl,f.playableUrlFallback,f.playableUrlExpirationTimestampMs,f.playableUrlMimeType,f.previewUrl,f.previewUrlFallback,f.previewUrlExpirationTimestampMs,f.previewUrlMimeType,f.previewWidth,f.previewHeight)}]))})},function(a){return d[0]=d[2]}])},function(e){return c.sequence([function(b){return d[2]=c.createArray(),d[6]=(d[2].push(a[7]),d[2]),c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[3]=c.i64.cast([0,1]):(b=a.item,d[7]=b.syncGroup,c.i64.neq(d[7],void 0)?d[6]=d[7]:d[6]=c.i64.cast([0,1]),d[3]=d[6])})},function(e){return c.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),d[3],void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[5]=a[0],a})},function(b){return c.db.table(31).add({taskId:d[5],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:a[8],sendType:c.i64.cast([0,4]),markThreadRead:!1,initiatingSource:a[9]})}])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticSendAttachmentForwardStoredProcedure",["LSOptimisticSendAttachmentForward","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.senderId;d[1]=b.threadKey;d[2]=b.threadType;d[3]=b.offlineThreadingId;d[4]=b.text;d[5]=b.snippet;d[6]=b.snippetHasEmoji;d[7]=b.forwardedAttachmentFbid;d[8]=b.source;d[9]=b.initiatingSource;return c("LSOptimisticSendAttachmentForward").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSOptimisticSendMessageForward",["LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(f){return d.filter(d.db.table(12).fetch([[[a[3],a[4],a[5]]]]),function(b){return d.i64.eq(b.threadKey,a[3])&&d.i64.eq(d.i64.cast([0,0]),d.i64.cast([0,0]))&&d.i64.eq(b.timestampMs,a[4])&&b.messageId===a[5]&&d.i64.eq(b.authorityLevel,d.i64.cast([0,80]))}).next().then(function(f,g){var h=f.done;f=f.value;return h?(e[3]=d.createArray(),e[4]=(e[3].push("optimisticSendMessageForward msg not found"),e[3]),e[5]=(e[3].push(a[5]),e[3]),e[6]=d.toJSON(e[3]),function(a){d.logger(a).mustfix(a)}(e[6]),h=["",d.i64.cast([-1,4294967295])],e[0]=h[0],e[1]=h[1],h):(g=f.item,d.sequence([function(f){return e[11]=g.forwardScore,e[3]=g.text,c("gkx")("24141")?(d.i64.neq(e[11],void 0)?e[12]=d.i64.lt(e[11],d.i64.cast([0,127])):e[12]=!0,d.i64.eq(a[0],g.senderId)||!e[12]?e[13]=e[11]:(d.i64.neq(e[11],void 0)?e[14]=d.i64.add(e[11],d.i64.cast([0,1])):e[14]=d.i64.cast([0,1]),e[13]=e[14]),e[4]=e[13]):e[4]=e[11],d.storedProcedure(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],e[3],void 0,void 0,g.stickerId,g.hotEmojiSize,void 0,void 0,d.i64.cast([0,3]),void 0,e[4],void 0,!0).then(function(a){return a=a,e[5]=a[0],e[6]=a[1],a})},function(c){return d.forEach(d.db.table(16).fetch([[[g.threadKey,g.messageId]]]),function(c){var f=c.item;return d.sequence([function(c){return e[16]=f.attachmentFbid,e[12]=d.createArray(),e[13]=(e[12].push(e[16]),e[12]),e[14]=(e[12].push(e[5]),e[12]),e[15]=d.toJSON(e[12]),d.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],e[6],e[5],e[16],e[15],f.attachmentType,f.filename,void 0,f.hasMedia,f.hasXma)},function(c){return d.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],e[5],e[15],f.playableUrl,f.playableUrlFallback,f.playableUrlExpirationTimestampMs,f.playableUrlMimeType,f.previewUrl,f.previewUrlFallback,f.previewUrlExpirationTimestampMs,f.previewUrlMimeType,f.previewWidth,f.previewHeight)}])})},function(b){return d.db.table(9).fetch([[[a[1]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?e[7]=d.i64.cast([0,1]):(c=b.item,e[13]=c.syncGroup,d.i64.neq(e[13],void 0)?e[12]=e[13]:e[12]=d.i64.cast([0,1]),e[7]=e[12])})},function(c){return d.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),d.i64.to_string(a[1]),d.i64.cast([0,46]),"",void 0,void 0,d.i64.cast([0,0]),d.i64.cast([0,0]),e[7],void 0,d.i64.cast([0,0]),void 0,d.i64.cast([0,0])).then(function(a){return a=a,e[9]=a[0],a})},function(a){return void 0!==void 0?d.storedProcedure(b("LSPredefineTraceForTask"),void 0,e[9],d.i64.to_string(d.i64.cast([0,46])),e[5]):d.resolve()},function(b){return d.db.table(31).add({taskId:e[9],threadKey:a[1],offlineThreadingId:e[5],messageId:a[5],threadAttributionSource:a[6],sendType:d.i64.cast([0,5]),markThreadRead:!1,initiatingSource:a[7]})},function(b){return e[12]=new d.Map(),e[13]=e[12].set("optimisticSendMessageForward",a[1]),e[14]=e[12].set("fwdMsgID",a[5]),e[15]=d.toJSON(e[12]),e[10]=e[15],function(a){d.logger(a).info(a)}(e[10]),b=[e[5],e[9]],e[0]=b[0],e[1]=b[1],b}]))})},function(a){return f[0]=e[0]}])},function(a){return d.resolve(f)}])}d=a;g["default"]=d}),98);
__d("LSOptimisticSendMessageForwardStoredProcedure",["LSOptimisticSendMessageForward","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.senderId;d[1]=b.threadKey;d[2]=b.threadType;d[3]=b.forwardedMsgThreadKey;d[4]=b.forwardedMsgTimestampMs;d[5]=b.forwardedMsgId;d[6]=b.source;d[7]=b.initiatingSource;return c("LSOptimisticSendMessageForward").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSOptimisticSendMessageV2",["LSAppendDataTraceAddon.nop","LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessageV2","LSLogEventAnnotate.nop","LSMessageSendToSentQPLInteractionHelper.nop","LSOptimisticMarkThreadReadV2","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=a[6].get("qpl_instance_key"),a[6],c.storedProcedure(b("LSLocalApplyOptimisticMessageV2"),a[0],a[1],a[2],a[4],a[5],a[6],void 0).then(function(a){return a=a,d[1]=a[0],d[2]=a[1],a})},function(a){return c.resolve()},function(e){return c.sequence([function(e){return d[5]=a[6].get("external_attachment_url"),a[6],d[33]=d[5]===""?void 0:d[5],d[33]!==void 0?c.sequence([function(e){return d[34]=a[6].get("attribution_app_id"),a[6],d[35]=a[6].get("optimistic_attachment_preview"),a[6],c.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_insert_optimistic_gif_start",d[0])},function(e){return c.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],d[2],d[1],d[1],d[1],c.i64.cast([0,3]),d[33],d[34],!0,!1)},function(e){return d[35]?d[36]=!1:d[36]=!0,d[36]?c.resolve():(d[37]=d[35].get("playable_url"),d[35],d[38]=d[35].get("playable_url_fallback"),d[35],d[39]=d[35].get("playable_url_expiration_timestamp_ms"),d[35],d[40]=d[35].get("playable_url_mime_type"),d[35],d[41]=d[35].get("preview_url"),d[35],d[42]=d[35].get("preview_url_fallback"),d[35],d[43]=d[35].get("preview_url_expiration_timestamp_ms"),d[35],d[44]=d[35].get("preview_url_mime_type"),d[35],d[45]=d[35].get("preview_width"),d[35],d[46]=d[35].get("preview_height"),d[35],d[47]=d[35].get("image_url"),d[35],d[48]=d[35].get("image_url_fallback"),d[35],d[49]=d[35].get("image_url_expiration_timestamp_ms"),d[35],d[50]=d[35].get("image_url_mime_type"),d[35],c.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[1],d[1],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46]))},function(a){return c.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_insert_optimistic_gif_end",d[0])},function(a){return d[6]=c.i64.cast([0,7])}]):c.sequence([function(e){return d[34]=a[6].get("sticker_id"),a[6],c.i64.neq(d[34],void 0)?c.sequence([function(e){return c.i64.neq(d[34],c.i64.cast([53057,267535043]))&&c.i64.neq(d[34],c.i64.cast([85970,924785702]))&&c.i64.neq(d[34],c.i64.cast([85970,1004785694]))&&c.i64.neq(d[34],c.i64.cast([85970,1044785690]))?c.sequence([function(e){return d[38]=c.i64.to_string(d[34]),d[36]=a[6].get("optimistic_attachment_preview"),a[6],c.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_insert_optimistic_sticker_start",d[0])},function(e){return c.storedProcedure(b("LSInsertOptimisticAttachment"),a[1],d[2],d[1],c.i64.to_string(d[34]),d[38],c.i64.cast([0,1]),void 0,void 0,!0,!1)},function(e){return d[36]?d[37]=!1:d[37]=!0,d[37]?c.resolve():(d[39]=d[36].get("playable_url"),d[36],d[40]=d[36].get("playable_url_fallback"),d[36],d[41]=d[36].get("playable_url_expiration_timestamp_ms"),d[36],d[42]=d[36].get("playable_url_mime_type"),d[36],d[43]=d[36].get("preview_url"),d[36],d[44]=d[36].get("preview_url_fallback"),d[36],d[45]=d[36].get("preview_url_expiration_timestamp_ms"),d[36],d[46]=d[36].get("preview_url_mime_type"),d[36],d[47]=d[36].get("preview_width"),d[36],d[48]=d[36].get("preview_height"),d[36],d[49]=d[36].get("image_url"),d[36],d[50]=d[36].get("image_url_fallback"),d[36],d[51]=d[36].get("image_url_expiration_timestamp_ms"),d[36],d[52]=d[36].get("image_url_mime_type"),d[36],c.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[1],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]))},function(a){return c.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_insert_optimistic_sticker_end",d[0])}]):c.resolve()},function(a){return d[35]=c.i64.cast([0,2])}]):c.resolve(d[35]=c.i64.cast([0,1]))},function(a){return d[6]=d[35]}])},function(a){return c.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_send_message_v2_task_start",d[0])},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[7]=c.i64.cast([0,1]):(b=a.item,d[35]=b.syncGroup,c.i64.neq(d[35],void 0)?d[34]=d[35]:d[34]=c.i64.cast([0,1]),d[7]=d[34])})},function(e){return d[9]=a[6].get("plugin_type"),a[6],c.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",void 0,void 0,d[9]==null?c.i64.cast([0,0]):d[9],c.i64.cast([0,0]),d[7],void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[10]=a[0],a})},function(a){return c.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_send_message_v2_task_end",d[0])},function(e){return d[11]=a[6].get("data_trace_id"),a[6],d[11]!==void 0?c.sequence([function(a){return c.storedProcedure(b("LSPredefineTraceForTask"),d[11],d[10],c.i64.to_string(c.i64.cast([0,46])),d[1])},function(e){return d[34]=a[6].get("source"),a[6],d[37]=c.i64.to_string(d[34]),d[37]!==void 0?d[35]=d[37]:d[35]=c.i64.to_string(c.i64.cast([0,0])),d[36]=",",c.nativeOperation(b("LSAppendDataTraceAddon.nop"),d[11],c.i64.cast([0,20]),c.i64.cast([0,1]),void 0,[d[35],d[36],c.i64.to_string(d[6]),d[36],c.i64.to_string(a[2])].join(""))}]):c.resolve()},function(b){return d[12]=a[6].get("source"),a[6],d[13]=a[6].get("external_attachment_url"),a[6],d[14]=a[6].get("platform_ref"),a[6],d[15]=a[6].get("platform_token"),a[6],d[16]=a[6].get("reply_source_id"),a[6],d[17]=a[6].get("reply_source_type"),a[6],d[18]=a[6].get("mark_read"),a[6],d[19]=a[6].get("initiating_app_id"),a[6],d[20]=a[6].get("initiating_source"),a[6],d[21]=a[6].get("navigation_chain"),a[6],d[22]=a[6].get("dety_params"),a[6],d[23]=a[6].get("skip_url_preview_gen"),a[6],d[24]=a[6].get("text_has_links"),a[6],d[25]=a[6].get("multitab_env"),a[6],d[26]=a[6].get("rich_text_format_type"),a[6],c.db.table(31).add({taskId:d[10],threadKey:a[1],offlineThreadingId:d[1],threadAttributionSource:d[12],externalAttachmentUrl:d[13],platformRef:d[14],platformToken:d[15],replySourceId:d[16],replySourceType:d[17],sendType:d[6],markThreadRead:d[18]==null?!1:d[18],initiatingSource:d[20],skipUrlPreviewGen:d[23],textHasLinks:d[24],multitabEnv:d[25],richTextFormatType:d[26]})},function(e){return d[34]=a[6].get("mark_read"),a[6],(d[34]==null?!1:d[34])?c.sequence([function(a){return c.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_mark_thread_read_start",d[0])},function(e){return c.storedProcedure(b("LSOptimisticMarkThreadReadV2"),a[1],d[2])},function(a){return c.nativeOperation(b("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_mark_thread_read_end",d[0])}]):c.resolve()},function(e){return d[27]=c.createArray(),d[28]=(d[27].push("optimisticSendMessageV2"),d[27]),d[29]=(d[27].push(a[1]),d[27]),d[30]=(d[27].push(d[1]),d[27]),d[31]=c.toJSON(d[27]),function(a){c.logger(a).info(a)}(d[31]),d[32]=new c.Map(),d[32].set("offline_threading_id",d[1]),d[32].set("task_id",d[10]),d[32].set("task_queue_name",c.i64.to_string(a[1])),d[32].set("task_label",c.i64.to_string(c.i64.cast([0,46]))),c.nativeOperation(b("LSLogEventAnnotate.nop"),c.i64.cast([0,16]),c.i64.cast([0,23]),c.i64.cast([0,0]),d[32])},function(a){return a=[d[1],d[10]],d[3]=a[0],d[4]=a[1],a}])},function(a){return e[0]=d[3]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticSendMessageV2StoredProcedure",["LSOptimisticSendMessageV2","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.senderId;d[1]=b.threadKey;d[2]=b.threadType;d[3]=b.mailboxType;d[4]=b.text;d[5]=b.snippet;d[6]=b.extraSendMessageParams;return c("LSOptimisticSendMessageV2").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSOptimisticUpsertReaction",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTask","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[0]=d[20])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("timestamp_ms",a[1]),d[2].set("message_id",a[2]),d[2].set("actor_id",a[3]),d[2].set("reaction",a[4]),d[2].set("reaction_style",void 0),d[2].set("sync_group",d[0]),d[3]=c.createArray(),d[4]=(d[3].push("reaction"),d[3]),d[5]=d[2].get("message_id"),d[2],d[6]=(d[3].push(d[5]),d[3]),d[7]=c.toJSON(d[3]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[7],c.i64.cast([0,29]))},function(e){return a[4]===""?c.sequence([function(d){return c.storedProcedure(b("LSDeleteReaction"),a[0],a[2],a[3])},function(a){return d[8]=void 0}]):c.sequence([function(e){return a[4]==="\u2764\ufe0f"||a[4]==="\u2764\ufe0f"?d[20]="\u2764":d[20]=a[4],c.storedProcedure(b("LSUpsertReaction"),a[0],a[1],a[2],a[3],d[20],c.i64.cast([0,20]),void 0)},function(a){return d[8]=void 0}])},function(b){return void 0?d[9]=!1:d[9]=!0,d[9]?d[10]=void 0:(d[20]=new c.Map(),d[20].set("feature_tags",void 0),d[21]=new c.Map(),d[21].set("logging_metadata",d[20]),d[22]=c.toJSON(d[21]),d[10]=d[22]),c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[11]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[11]=d[20])})},function(e){return d[13]=new c.Map(),d[13].set("thread_key",a[0]),d[13].set("timestamp_ms",a[1]),d[13].set("message_id",a[2]),d[13].set("actor_id",a[3]),d[13].set("reaction",a[4]),d[13].set("reaction_style",void 0),d[13].set("sync_group",d[11]),d[13].set("send_attribution",a[5]),d[13].set("dataclass_params",d[10]),d[14]=c.createArray(),d[15]=(d[14].push("reaction"),d[14]),d[16]=d[13].get("message_id"),d[13],d[17]=(d[14].push(d[16]),d[14]),d[18]=c.toJSON(d[14]),d[19]=c.toJSON(d[13]),c.storedProcedure(b("LSIssueNewTask"),d[18],c.i64.cast([0,29]),d[19],void 0,void 0,a[6]==null?c.i64.cast([0,0]):a[6],c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticUpsertReactionStoredProcedure",["LSOptimisticUpsertReaction","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.timestampMs;d[2]=b.messageId;d[3]=b.actorId;d[4]=b.reaction;d[5]=b.sendAttribution;d[6]=b.pluginType;return c("LSOptimisticUpsertReaction").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSOptimisticUpsertReactionV2",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTaskWithExtraOperations","LSUpdateOrInsertReactionV2","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.i64.eq(a[8],c.i64.cast([0,2]))?c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[14]=c.i64.cast([0,1]):(b=a.item,d[23]=b.syncGroup,c.i64.neq(d[23],void 0)?d[22]=d[23]:d[22]=c.i64.cast([0,1]),d[14]=d[22])})},function(e){return d[16]=new c.Map(),d[16].set("thread_id",a[1]),d[16].set("message_id",a[2]),d[16].set("message_timestamp",a[3]),d[16].set("actor_id",a[0]),d[16].set("reaction_fbid",a[4]),d[16].set("reaction_style",a[7]),d[16].set("operation",a[8]),d[16].set("viewer_is_reactor",a[6]),d[16].set("current_count",a[5]),d[16].set("reaction_literal",a[9]),d[16].set("sync_group",d[14]),d[17]=c.createArray(),d[18]=(d[17].push("reaction_v2"),d[17]),d[19]=d[16].get("message_id"),d[16],d[20]=(d[17].push(d[19]),d[17]),d[21]=c.toJSON(d[17]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[21],c.i64.cast([0,604]))}]):c.resolve()},function(e){return[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[0]=c.i64.add(a[5],c.i64.cast([-1,4294967295])):d[0]=c.i64.add(a[5],c.i64.cast([0,1])),[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[1]=!1:d[1]=!0,d[2]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpdateOrInsertReactionV2"),a[1],a[2],a[4],a[9],d[0],c.i64.cast([0,20]),d[1],c.i64.cast([0,0]),d[2])},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[3]=void 0:(b=a.item,d[3]=b.threadType)})},function(e){return c.i64.neq(d[3],c.i64.cast([0,23]))?[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?c.i64.eq(a[8],c.i64.cast([0,2]))?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.sequence([function(b){return c.filter(c.db.table(8).fetch([[[a[1],a[2],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]&&c.i64.eq(b.actorId,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=void 0:(b=a.item,d[14]=b.reaction)})},function(e){return a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[16]="\u2764":d[16]=a[9],d[16]===d[14]?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.resolve()):c.resolve()}]):a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[14]="\u2764":d[14]=a[9],d[15]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpsertReaction"),a[1],a[3],a[2],a[0],d[14],c.i64.cast([0,20]),d[15])):c.resolve():c.resolve()},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[5]=c.i64.cast([0,1]):(b=a.item,d[15]=b.syncGroup,c.i64.neq(d[15],void 0)?d[14]=d[15]:d[14]=c.i64.cast([0,1]),d[5]=d[14])})},function(e){return d[7]=new c.Map(),d[7].set("thread_id",a[1]),d[7].set("message_id",a[2]),d[7].set("message_timestamp",a[3]),d[7].set("actor_id",a[0]),d[7].set("reaction_fbid",a[4]),d[7].set("reaction_style",a[7]),d[7].set("current_count",a[5]),d[7].set("viewer_is_reactor",a[6]),d[7].set("operation",a[8]),d[7].set("reaction_literal",a[9]),d[7].set("entry_point",void 0),d[7].set("sync_group",d[5]),d[8]=c.createArray(),d[9]=(d[8].push("reaction_v2"),d[8]),d[10]=d[7].get("message_id"),d[7],d[11]=(d[8].push(d[10]),d[8]),d[12]=c.toJSON(d[8]),d[13]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),d[12],c.i64.cast([0,604]),d[13],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticUpsertReactionV2StoredProcedure",["LSOptimisticUpsertReactionV2","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.actorId;d[1]=b.threadId;d[2]=b.messageId;d[3]=b.messageTimestamp;d[4]=b.reactionFbid;d[5]=b.currentCount;d[6]=b.viewerIsReactor;d[7]=b.reactionStyle;d[8]=b.operation;d[9]=b.reactionLiteral;return c("LSOptimisticUpsertReactionV2").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSRemoveMediaSendJobs",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSRemoveMediaSendJobsStoredProcedure",["LSRemoveMediaSendJobs","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.offlineThreadingId;return c("LSRemoveMediaSendJobs").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSSendPhase1MultiPhotoMessageV2",["LSArrayGetObjectAt","LSGetMessageAttributionParams","LSIssueSendAttachmentMessageTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.createArray(),d[1]=new c.Map(),d[2]=new c.Map(),d[3]=!1,d[4]=c.i64.cast([0,0]),c.forEach(c.sortBy(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[7]=a.fbid,d[4]=c.i64.add(d[4],c.i64.cast([0,1])),c.i64.neq(d[7],void 0)?d[8]=(d[0].push(d[7]),d[0]):0})},function(e){return d[5]=c.i64.of_int32(d[0].length),c.i64.neq(d[5],d[4])||c.i64.eq(d[4],c.i64.cast([0,0]))?c.resolve(d[6]=c.i64.cast([0,10002])):c.sequence([function(b){return c.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[void 0,void 0,void 0,void 0,void 0],d[7]=c[0],d[8]=c[1],d[9]=c[2],d[10]=c[3],d[11]=c[4],c):(b=a.item,c=[b.threadKey,b.senderId,b.text,b.replySourceId,b.replySourceTypeV2],d[7]=c[0],d[8]=c[1],d[9]=c[2],d[10]=c[3],d[11]=c[4],c)})},function(e){return c.i64.eq(d[7],void 0)||c.i64.eq(d[8],void 0)?c.resolve((c.i64.eq(d[7],void 0)?d[14]=c.i64.cast([0,10003]):d[14]=c.i64.cast([0,10004]),d[13]=d[14])):c.sequence([function(a){return c.db.table(9).fetch([[[d[7]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=void 0:(b=a.item,d[14]=b.threadType)})},function(b){return c.filter(c.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[void 0,void 0,void 0,void 0,void 0,void 0],d[16]=c[0],d[17]=c[1],d[18]=c[2],d[19]=c[3],d[20]=c[4],d[21]=c[5],c):(b=a.item,c=[b.platformRef,b.platformToken,b.initiatingSource,void 0,void 0,void 0],d[16]=c[0],d[17]=c[1],d[18]=c[2],d[19]=c[3],d[20]=c[4],d[21]=c[5],c)})},function(e){return c.i64.neq(d[14],void 0)?c.sequence([function(e){return d[24]=d[1].keys(),d[25]=c.i64.of_int32(d[24].length),c.i64.gt(d[25],c.i64.cast([0,0]))?c.loopAsync(d[25],function(e){return d[31]=e,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[24],d[31]).then(function(a){return a=a,d[32]=a[0],d[33]=a[1],a})},function(e){return d[34]=d[2].get(d[32]),d[2],d[35]=c.i64.to_string(d[34]),d[35]!==void 0?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[24],d[31]).then(function(a){return a=a,d[36]=a[0],d[37]=a[1],a})},function(b){return d[38]=d[1].get(d[32]),d[1],c.forEach(c.filter(c.db.table(16).fetch([[[d[7],a[0],d[36]]]]),function(b){return c.i64.eq(b.threadKey,d[7])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[0]&&b.attachmentFbid===d[36]}),function(a){var b=a.update;a.item;return b({attachmentFbid:d[35],originalFileHash:d[38]})})}]):c.resolve()}])}):c.resolve()},function(e){return c.storedProcedure(b("LSGetMessageAttributionParams"),a[0]).then(function(a){return a=a,d[26]=a[0],d[27]=a[1],d[28]=a[2],a})},function(e){return c.i64.neq(d[26],void 0)?d[29]=d[26]:d[29]=c.i64.cast([0,0]),c.storedProcedure(b("LSIssueSendAttachmentMessageTask"),d[8],d[7],d[14],a[0],d[9],d[0],d[29],d[10],d[11],d[3],d[16],d[17],a[1])},function(a){return c.i64.ge(c.i64.cast([0,0]),c.i64.cast([0,0]))?d[30]=void 0:d[30]=c.i64.cast([0,10006]),d[23]=d[30]}]):c.resolve(d[23]=c.i64.cast([0,10005]))},function(a){return d[13]=d[23]}])},function(a){return d[6]=d[13]}])},function(a){return e[0]=d[6]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSResumeMediaSendJob",["LSInsertPhase2PendingTask","LSSendPhase1MultiPhotoMessageV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=new c.Map(),d[1]=new c.Map(),d[1].set("main_job_succeeded",!1),d[1].set("resume_failed",!1),d[1].set("error",void 0),d[1].set("running_sub_job_states",d[0]),d[2]=new c.Map(),d[2].set("should_transcode",!1),d[2].set("use_double_phase",!1),d[2].set("send_by_server",!1),d[2].set("is_secure",!1),d[2].set("should_dedupe",!1),c.sortBy(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?0:(b=a.item,d[2].set("should_transcode",b.shouldTranscode),d[2].set("use_double_phase",b.useDoublePhase),d[2].set("send_by_server",b.sendByServer),d[2].set("is_secure",b.isSecure))})},function(b){return d[4]=new c.Map(),c.forEach(c.sortBy(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[13]=a.offlineAttachmentId,d[11]=a.state,d[12]=a.error,c.i64.eq(d[11],c.i64.cast([-1,4294967293]))?d[10]=!0:(c.i64.eq(d[11],c.i64.cast([0,1]))?d[14]=!0:(c.i64.eq(d[11],c.i64.cast([0,3]))?d[15]=!0:(c.i64.eq(d[11],c.i64.cast([0,5]))?d[16]=!0:(c.i64.eq(d[11],c.i64.cast([0,13]))?d[17]=!0:(c.i64.eq(d[11],c.i64.cast([0,7]))?d[18]=!0:(c.i64.eq(d[11],c.i64.cast([0,9]))?d[19]=!0:(c.i64.eq(d[11],c.i64.cast([0,11]))?d[20]=!0:d[20]=!1,d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),d[10]=d[14]),d[10]?c.resolve(c.i64.eq(d[11],c.i64.cast([0,5]))||c.i64.eq(d[11],c.i64.cast([0,11]))?0:d[4].set(d[13],d[11])):c.i64.neq(d[12],void 0)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[12]))):(c.i64.eq(d[11],c.i64.cast([-1,4294967295]))?d[14]=c.i64.cast([0,5]):(c.i64.eq(d[11],c.i64.cast([-1,4294967294]))?(d[16]=d[2].get("should_transcode"),d[2],d[15]=d[16]?c.i64.cast([0,1]):c.i64.cast([0,3])):(c.i64.eq(d[11],c.i64.cast([0,2]))?d[16]=c.i64.cast([0,3]):(c.i64.eq(d[11],c.i64.cast([0,4]))?(d[18]=d[2].get("send_by_server"),d[2],d[19]=d[2].get("use_double_phase"),d[2],d[17]=d[18]?d[19]?c.i64.cast([0,13]):void 0:c.i64.cast([0,5])):(c.i64.eq(d[11],c.i64.cast([0,6]))?(d[19]=d[2].get("use_double_phase"),d[2],d[18]=d[19]?c.i64.cast([0,13]):void 0):(c.i64.eq(d[11],c.i64.cast([0,14]))?(d[20]=d[2].get("use_double_phase"),d[2],d[21]=d[2].get("should_transcode"),d[2],d[19]=d[20]?d[21]?c.i64.cast([0,7]):c.i64.cast([0,9]):void 0):(c.i64.eq(d[11],c.i64.cast([0,8]))?d[20]=c.i64.cast([0,9]):(c.i64.eq(d[11],c.i64.cast([0,10]))?(d[22]=d[2].get("send_by_server"),d[2],d[21]=d[22]?void 0:c.i64.cast([0,11])):(c.i64.eq(d[11],c.i64.cast([0,12]))?d[22]=void 0:d[22]=void 0,d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),c.i64.neq(d[14],void 0)?c.sequence([function(a){return c.forEach(c.db.table(51).fetch([[[d[13]]]]),function(a){var b=a.update;a.item;return b({state:d[14]})})},function(a){return c.i64.eq(d[14],c.i64.cast([0,5]))||c.i64.eq(d[14],c.i64.cast([0,11]))?0:d[4].set(d[13],d[14])}]):c.resolve())})},function(b){return c.sortBy(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[5]=void 0:(b=a.item,d[5]=b.state)})},function(e){return c.i64.neq(d[5],void 0)?(d[10]=d[2].get("send_by_server"),d[2],d[11]=d[2].get("use_double_phase"),d[2],d[12]=d[2].get("use_double_phase"),d[2],(d[10]?d[11]?c.i64.eq(d[5],c.i64.cast([0,10])):c.i64.eq(d[5],c.i64.cast([0,4])):d[12]?c.i64.eq(d[5],c.i64.cast([0,12])):c.i64.eq(d[5],c.i64.cast([0,6])))?c.resolve(d[1].set("main_job_succeeded",!0)):c.i64.eq(d[5],c.i64.cast([0,5]))?c.sequence([function(b){return d[13]=void 0,c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[15]=a.error,c.i64.eq(d[15],void 0)?(c.i64.neq(a.fbid,void 0)?d[16]=void 0:d[16]=c.i64.cast([0,9]),d[14]=d[16]):d[14]=d[15],c.i64.neq(d[14],void 0)?d[13]=d[14]:0})},function(e){return c.i64.neq(d[13],void 0)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.sequence([function(e){return d[14]=d[2].get("is_secure"),d[2],d[14]?c.sequence([function(b){return d[16]=c.createArray(),d[17]=new c.Map(),d[18]=new c.Map(),d[19]=!1,d[20]=c.i64.cast([0,0]),c.forEach(c.sortBy(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[25]=a.fbid,d[20]=c.i64.add(d[20],c.i64.cast([0,1])),c.i64.neq(d[25],void 0)?d[26]=(d[16].push(d[25]),d[16]):0})},function(b){return d[21]=c.createArray(),c.forEach(c.sortBy(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[25]=a.metadata,d[25]!==void 0?d[26]=(d[21].push(d[25]),d[21]):0})},function(a){return d[22]=c.i64.of_int32(d[16].length),d[23]=c.i64.of_int32(d[21].length),c.i64.neq(d[22],d[20])||c.i64.neq(d[23],d[20])?d[24]=c.i64.cast([0,11]):(function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Started"),function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Completed"),d[24]=void 0),d[15]=d[24]}]):c.sequence([function(e){return c.storedProcedure(b("LSSendPhase1MultiPhotoMessageV2"),a[0],a[2]).then(function(a){return a=a,d[16]=a[0],a})},function(b){return c.i64.eq(d[16],void 0)?c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:c.i64.cast([0,6])})}):c.resolve()},function(a){return d[15]=d[16]}])},function(b){return c.i64.eq(d[15],void 0)?(d[16]=d[2].get("send_by_server"),d[2],d[17]=d[2].get("use_double_phase"),d[2],d[18]=d[2].get("use_double_phase"),d[2],(d[16]?d[17]?c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,10])):c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,4])):d[18]?c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,12])):c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,6])))?c.resolve(d[1].set("main_job_succeeded",!0)):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([-1,4294967295]))?d[19]=c.i64.cast([0,5]):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([-1,4294967294]))?(d[21]=d[2].get("should_transcode"),d[2],d[20]=d[21]?c.i64.cast([0,1]):c.i64.cast([0,3])):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,2]))?d[21]=c.i64.cast([0,3]):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,4]))?(d[23]=d[2].get("send_by_server"),d[2],d[24]=d[2].get("use_double_phase"),d[2],d[22]=d[23]?d[24]?c.i64.cast([0,13]):void 0:c.i64.cast([0,5])):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,6]))?(d[24]=d[2].get("use_double_phase"),d[2],d[23]=d[24]?c.i64.cast([0,13]):void 0):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,14]))?(d[25]=d[2].get("use_double_phase"),d[2],d[26]=d[2].get("should_transcode"),d[2],d[24]=d[25]?d[26]?c.i64.cast([0,7]):c.i64.cast([0,9]):void 0):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,8]))?d[25]=c.i64.cast([0,9]):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,10]))?(d[27]=d[2].get("send_by_server"),d[2],d[26]=d[27]?void 0:c.i64.cast([0,11])):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,12]))?d[27]=void 0:d[27]=void 0,d[26]=d[27]),d[25]=d[26]),d[24]=d[25]),d[23]=d[24]),d[22]=d[23]),d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),c.i64.neq(d[19],void 0)?c.sequence([function(b){return c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:d[19]})})},function(b){return c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}]):c.resolve())):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[15])))}])}]):c.i64.eq(d[5],c.i64.cast([0,11]))?c.sequence([function(b){return d[13]=void 0,c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[14]=a.error,c.i64.neq(d[14],void 0)?d[13]=d[14]:0})},function(a){return c.i64.neq(d[13],void 0)?(d[1].set("resume_failed",!0),d[1].set("error",d[13])):d[1].set("main_job_succeeded",!0)}]):c.i64.eq(d[5],c.i64.cast([0,13]))?c.sequence([function(e){return c.storedProcedure(b("LSInsertPhase2PendingTask"),a[0],a[1]).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.i64.neq(d[13],void 0)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.sequence([function(b){return c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:c.i64.cast([0,14])})})},function(b){return d[1].set("main_job_succeeded",!0),c.forEach(c.filter(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}])}]):c.resolve(0)):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",c.i64.cast([0,11]))))},function(a){return d[7]=d[1].get("main_job_succeeded"),d[1],d[8]=d[1].get("resume_failed"),d[1],d[9]=d[1].get("error"),d[1],a=[d[7],d[8],d[9],d[4]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSResumeMediaSendJobStoredProcedure",["LSResumeMediaSendJob","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.jobId;d[1]=b.pluginType;d[2]=b.dataTraceId;return c("LSResumeMediaSendJob").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSThreadAttributionTypeUtil",["I64","LSIntEnum","LSMessagingThreadAttributionType","LSThreadAttributionStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){b=d("LSThreadAttributionStore").getSource({type:"MWLSEntrypoint",value:b},(h||(h=d("I64"))).to_string(a));if(b.type==="LSThreadAttribution")return b.value;a=b.value;if(a==="communityFriendsDialog"||a==="pagesHomeFriendsDialog"||a==="mutualFriendsDialog"||a==="birthday"||a==="groupMembers"||a==="fundraiserSupportersList"||a==="memories"||a==="feedPoll"||a==="reactorList"||a==="friendsList"||a==="pagesPrivateReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST);else if(a==="inboxPendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_PENDING_REQUESTS);else if(a==="fullscreenChat")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT);else if(a==="sidebarGroupsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_GROUPS);else if(a==="jewel")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_THREAD_LIST);else if(a==="shop")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MINI_SHOP_VIEW_MENU_BUTTON);else if(a==="chatheadsOverflow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_OVERFLOW);else if(a==="hovercard"||a==="feedDynamicHoverCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_DYNAMIC_HOVER_CARD);else if(a==="search"||a==="messengerUniversalSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_UNIVERSAL_SEARCH);else if(a==="story"||a==="storyAggregatedUsers"||a==="storySeenByList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY);else if(a==="timeline"||a==="feedOrganicPost")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST);else if(a==="pageAboutCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_ABOUT_CARD);else if(a==="inboxInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_IN_THREAD);else if(a==="notificationInThreadReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_NOTIFICATION_IN_THREAD_REPLY);else if(a==="archieve")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_ARCHIVED_THREADS);else if(a==="storyViewerSheetRow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY_VIEWER_SHEET_ROW);else if(a==="chatheadsNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_NEW_MESSAGE);else if(a==="event")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_EVENT);else if(a==="jewelSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_SEARCH);else if(a==="inboxSpam"||a==="inboxThreadList"||a==="inboxRestricted")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX);else if(a==="jewelNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NEW_MESSAGE);else if(a==="pendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST);else if(a==="sidebarSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_SEARCH);else if(a==="inboxRemainingThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_REMAINING_THREADS);else if(a==="pagesHeader")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON);else if(a==="inboxRecentThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_RECENT_THREADS);else if(a==="chatheads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS);else if(a==="pageResponsivenessCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_RESPONSIVENESS_CONTEXT_CARD);else if(a==="inboxSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_MESSAGE_SEARCH);else if(a==="jewelNestedFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NESTED_FOLDER);else if(a==="marketplace")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MARKETPLACE_SEND_MESSAGE);else if(a==="feedOrganicPostViewAndMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE);else if(a==="adsCta")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA);else if(a==="chatInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_CHAT_IN_THREAD);else if(a==="payments")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").PAYMENTS);else if(a==="inboxFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_NESTED_FOLDER);else if(a==="inboxArchived")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ARCHIVED_THREADS);else if(a==="inboxActiveContacts")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ACTIVE_CONTACTS);else if(a==="sidebarContactsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_LIST);else if(a==="sidebarCommunityChatsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_COMMUNITY_CHATS);else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").UNKNOWN)}g.getSource=a}),98);
__d("MAWAudioUtils",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var d=URL.createObjectURL(a);return new(h||(h=b("Promise")))(function(a,b){var e=new Audio();e.setAttribute("crossOrigin","anonymous");e.addEventListener("loadedmetadata",function(c){c=c.currentTarget;if(c instanceof HTMLAudioElement){c=c.duration;a(Math.ceil(c))}else b("EventTarget returned for event should be HTMLAudioElement")});e.src=d;e.onabort=function(){b(function(){throw c("err")("Error loading audio from provided URL")})};e.onerror=function(){b(function(){throw c("err")("Wrong blob type")})}})}g.getAudioDurationInSeconds=a}),98);
__d("MAWAudioPreProcess",["MAWAudioUtils","Promise","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start optimistic audio preprocess"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start audio preprocess"]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["MAWAudioPreProcess"]);function c(a){k.LOG(j());return d("MAWAudioUtils").getAudioDurationInSeconds(a).then(function(c){return(h||(h=b("Promise"))).resolve({durations:c,file:a,isPtt:!0,type:"audio"})})}function e(c){var e=a.URL.createObjectURL(c);k.LOG(i());return d("MAWAudioUtils").getAudioDurationInSeconds(c).then(function(a){return(h||(h=b("Promise"))).resolve({durations:a,file:c,isPtt:!0,type:"audio",url:e})})}g.audioPreprocess=c;g.optimisticAudioPreprocess=e}),98);
__d("MAWDocumentPreProcess",["Promise","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start optimistic document preprocess"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start document preprocess"]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["MAWAudioPreProcess"]);function c(a){k.DEV(j());return(h||(h=b("Promise"))).resolve({file:a,filename:a.name,type:"document"})}function e(c){k.DEV(i());var d=a.URL.createObjectURL(c);return(h||(h=b("Promise"))).resolve({file:c,filename:c.name,type:"document",url:d})}g.documentPreprocess=c;g.optimisticDocumentPreprocess=e}),98);
__d("MAWSendVideoToWorker",["MAWMediaWorkerResource","Promise","WALogger","WebWorker"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Clean up media worker"]);i=function(){return a};return a}var j=k();function a(a){var c;return new(h||(h=b("Promise")))(function(b){c=j&&l(j)?k():j,c.setMessageHandler(function(a){b(a)}).execute(),c.postMessage(a)})["finally"](function(){c&&(d("WALogger").LOG(i()),c.terminate(),(!j||!j.isCurrentState("constructed"))&&(j=k()))})}function k(){return new(c("WebWorker"))(c("MAWMediaWorkerResource")).setAllowCrossPageTransition(!0)}function l(a){return a.isCurrentState("preparing")||a.isCurrentState("executing")}g.sendVideoMessageToWorker=a}),98);
__d("VideoFrameBuffer",["HTMLMediaElementReadyStates"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b,c,d,e,f,g){d===void 0&&(d=null),e===void 0&&(e=null),f===void 0&&(f=null),g===void 0&&(g=null),this.$2=b,this.$1=a,this.$3=c||"contain",this.$6=d,this.$7=e,this.$8=f,this.$9=g}var b=a.prototype;b.updateFrameBuffer=function(){this.$4&&(this.$1.width=this.$4,this.$4=null);this.$5&&(this.$1.height=this.$5,this.$5=null);if(this.$2.readyState<c("HTMLMediaElementReadyStates").HAVE_CURRENT_DATA)return;var a=this.$1.clientWidth||this.$1.width,b=this.$1.clientHeight||this.$1.height,d=a,e=b,f=this.$2.videoWidth/this.$2.videoHeight,g=d/e;this.$3==="cover"&&(g*=-1,f*=-1);g>f?d=e*f:g<f&&(e=d/f);g=this.$1.getContext("2d");if(!(g instanceof window.CanvasRenderingContext2D))return;try{if(this.$6||this.$7){g.drawImage(this.$2,(f=this.$8)!=null?f:0,(f=this.$9)!=null?f:0,(f=this.$6)!=null?f:a,(f=this.$7)!=null?f:b,0,0,a,b)}else g.drawImage(this.$2,(a-d)/2,(b-e)/2,d,e)}catch(a){if(a.name!=="NS_ERROR_NOT_AVAILABLE")throw a}};b.getDOMNode=function(){return this.$1};b.updateDimensions=function(a,b){this.$4=a,this.$5=b};return a}();g["default"]=a}),98);
__d("generateVideoThumbnails",["CanvasVideoThumbnail","HTMLMediaElementReadyStates","Promise","VideoFrameBuffer","cr:909281"],(function(a,b,c,d,e,f,g){var h;function a(a,d,e,f,g,m,n,o,p,q){g===void 0&&(g="contain");m===void 0&&(m=0);n===void 0&&(n=null);o===void 0&&(o=null);p===void 0&&(p=null);q===void 0&&(q=null);return new(h||(h=b("Promise")))(function(h,r){var s=document.createElement("canvas"),t=[],u=0,v=a.duration-m;q!=null&&(v=Math.min(v,q));var w=v/f,x=null,y,z=(v=o)!=null?v:i(n,d),A=(v=p)!=null?v:j(n,e),B=k(n,d),C=l(n,e);s.width=(v=z)!=null?v:d;s.height=(v=A)!=null?v:e;var D=new(c("VideoFrameBuffer"))(s,a,g,z,A,B,C);D.updateFrameBuffer();var E=function(){D.updateFrameBuffer();var b=new(c("CanvasVideoThumbnail"))(s,a,m+(u-1)*w,z,A,B,C);t.push(b);(!x||b.getURL().length>x.getURL().length)&&(x=b);G()},F=function(){if(a.readyState>=c("HTMLMediaElementReadyStates").HAVE_CURRENT_DATA)E();else if(b("cr:909281")!==null)var d=b("cr:909281").listen(a,"loadeddata",function(){d.remove(),E()});else a.addEventListener("loadeddata",E,{once:!0})},G=function(){u===0&&(b("cr:909281")!==null?y=b("cr:909281").listen(a,"seeked",F):a.addEventListener("seeked",F)),u<f?(a.currentTime=m+u*w,u++):(b("cr:909281")!==null?y&&y.remove():a.removeEventListener("seeked",F),h({thumbnails:t,selectedThumbnail:x}))};if(a.videoWidth===0||a.videoHeight===0){r();return}G()})}function i(a,b){if(a&&a.spherical){if(a.stereoMode==="left-right")return b/2;if(a.projectionType==="cubemap")return b/3}return null}function j(a,b){return a&&a.spherical&&(a.stereoMode==="top-bottom"||a.projectionType==="cubemap")?b/2:null}function k(a,b){return a&&a.spherical&&a.projectionType==="cubemap"?b/3:0}function l(a,b){return a&&a.spherical&&a.projectionType==="cubemap"?b/2:0}g["default"]=a}),98);
__d("MAWVideoUtils",["MAWImageUtils","Promise","err","generateVideoThumbnails"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e=document.body;if(!e)return new(h||(h=b("Promise")))(function(a,b){return b("Unable to find DOM body, please use this util only in DOM environment.")});var f=document.createElement("video");return new(h||(h=b("Promise")))(function(d,g){f.setAttribute("style","display: none"),f.setAttribute("src",URL.createObjectURL(a)),f.addEventListener("loadedmetadata",function(a){a=a.currentTarget;if(a instanceof HTMLVideoElement){var e=a.duration,i=a.videoHeight;a=a.videoWidth;var j=c("generateVideoThumbnails")(f,a,i,1);d((h||(h=b("Promise"))).all([j,a,i,Math.ceil(e)]))}else g("EventTarget returned for event should be HTMLVideoElement")}),e.appendChild(f)}).then(function(a){var b=a[0],c=a[1],g=a[2],h=a[3];e.removeChild(f);return d("MAWImageUtils").canvasToBlob(b.thumbnails[0].getCanvas(),d("MAWImageUtils").TYPE_JPEG,!0).then(function(a){return a.arrayBuffer().then(function(a){return{duration:h,height:g,jpegThumbnail:a,width:c}})})})["catch"](function(a){e.removeChild(f);throw c("err")(a)})}function e(a){var d=document.body;if(!d)return new(h||(h=b("Promise")))(function(a,b){return b("Unable to find DOM body, please use this util only in DOM environment.")});var e=document.createElement("video");return new(h||(h=b("Promise")))(function(b,c){e.setAttribute("style","display: none"),e.setAttribute("src",URL.createObjectURL(a)),e.addEventListener("loadedmetadata",function(a){a=a.currentTarget;if(a instanceof HTMLVideoElement){var d=a.duration,e=a.videoHeight;a=a.videoWidth;b({duration:Math.ceil(d),height:e,width:a})}else c("EventTarget returned for event should be HTMLVideoElement")}),d.appendChild(e)})["catch"](function(a){d.removeChild(e);throw c("err")(a)})}g.getVideoThumbnailUrlAndSpec=a;g.getVideoThumbnailSpec=e}),98);
__d("MAWVideoPreProcess",["MAWMediaPreProcessQpl","MAWSendVideoToWorker","MAWVideoUtils","Promise","WAMediaWasmWorkerClient","WATagsLogger","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processVideoThroughWasm error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start process video through wasm, file name: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair got error! ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair rejected file (",")"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair got parsing error! ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["trouble parsing file "," (fossil ",") ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["start process video through asm.js, file name: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to preprocess video: ",""]);p=function(){return a};return a}var q=d("WATagsLogger").TAGS(["MAWVideoPreProcess"]),r=typeof self.BigInt==="function";function e(a){return t(a).then(function(a){return(h||(h=b("Promise"))).all([a,d("MAWVideoUtils").getVideoThumbnailUrlAndSpec(a)])}).then(function(a){var c=a[0];a=a[1];return(h||(h=b("Promise"))).resolve({file:c,thumbnailUrlAndSpec:a,type:"video"})})}function f(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=(yield d("MAWVideoUtils").getVideoThumbnailSpec(c)),f=a.URL.createObjectURL(c);return(h||(h=b("Promise"))).resolve({file:c,thumbnailSpec:e,type:"video",url:f})});return s.apply(this,arguments)}function t(a){var b=r,c=d("MAWMediaPreProcessQpl").startMediaPreProcessQpl("video",a);c.addAnnotations({bool:{wamedia_wasm_enabled:b}});b=b?u(a,c):w(a);return b.then(function(a){c.endSuccess({"int":{compressed_file_size:a.size}});return a})["catch"](function(b){q.ERROR(p(),b.toString());c.endFail("unable_to_process_video",{string:{preprocessError:b.toString()}});return a})}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){q.DEV(j(),a.name);var e=(yield a.arrayBuffer());b=(yield d("WAMediaWasmWorkerClient").mp4CheckAndRepairInWorker({eventFlow:b,input:new Uint8Array(e)}));if(!b.success){q.ERROR(i(),b.error);throw c("err")("processVideoThroughWasm error: "+b.error)}e=new File([b.value],a.name,{type:"video/mp4"});return e});return v.apply(this,arguments)}function w(a){q.DEV(o(),a.name);return x(a).then(function(d){if(!d)throw c("err")("invalid file");d=new File([d.file],a.name,{type:d.file.type});return(h||(h=b("Promise"))).resolve(d)})}function x(a){return d("MAWSendVideoToWorker").sendVideoMessageToWorker({asGif:!1,file:a,type:"prep"}).then(function(a){var b=a.error,c=a.file,d=a.filename,e=a.result;a=a.type;switch(a){case"result":return e;case"parsingError":q.ERROR(n(),c,d,String(b));c&&q.ERROR(m(),String(b));q.ERROR(l(),String(b));return void 0}})["catch"](function(a){q.ERROR(k(),String(a));return void 0})}g.videoPreprocess=e;g.optimisticVideoPreprocess=f;g.processVideoThroughWasm=u;g.processVideoThroughAsmJs=w}),98);
__d("MAWMediaPreprocess",["MAWAudioPreProcess","MAWDocumentPreProcess","MAWImagePreProcess","MAWSupportedDocumentTypes","MAWVideoPreProcess","WATagsLogger","cometIsMimeTypeForMedia"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["start optimistic mediaPreprocess, file name: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start mediaPreprocess, file name: ",""]);i=function(){return a};return a}var j=d("WATagsLogger").TAGS(["MAWMediaPreprocess"]);function a(a){j.DEV(i(),a.name);if(a.type==="image/gif"||a.type==="image/webp"||d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a.type))return d("MAWImagePreProcess").imagePreprocess(a,!1);if(d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a.type))return d("MAWVideoPreProcess").videoPreprocess(a);if(a.type.startsWith("audio/"))return d("MAWAudioPreProcess").audioPreprocess(a);return d("MAWSupportedDocumentTypes").isAllowedType(a.name)?d("MAWDocumentPreProcess").documentPreprocess(a):Promise.reject("Unsupported file type")}function b(a){j.DEV(h(),a.name);if(a.type==="image/gif"||a.type==="image/webp"||d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a.type))return d("MAWImagePreProcess").optimisticImagePreprocess(a);if(d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a.type))return d("MAWVideoPreProcess").optimisticVideoPreprocess(a);if(a.type.startsWith("audio/"))return d("MAWAudioPreProcess").optimisticAudioPreprocess(a);return d("MAWSupportedDocumentTypes").isAllowedType(a.name)?d("MAWDocumentPreProcess").optimisticDocumentPreprocess(a):Promise.reject("Unsupported file type")}g.mediaPreprocess=a;g.optimisticMediaPreprocess=b}),98);
__d("MAWMediaManagerUtils",["MAWBridgeFireAndForget","MAWMediaPreprocess","MAWMediaUtils","MAWMiActOnActThreadReady","OfflineThreadingId","Promise","asyncToGeneratorRuntime","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=new Map();function a(a){return(h||(h=b("Promise"))).all(a.map(d("MAWMediaPreprocess").mediaPreprocess)).then(function(a){a=d("OfflineThreadingId").createForItemsInOrder(a);a.forEach(function(a){var b=a[0];a=a[1];i.set(a,b)});return a.map(function(a){var b=a[0];a=a[1];return[b.file,a]})})}function e(a){a=d("OfflineThreadingId").createForItemsInOrder(a);a.forEach(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];var e=d("MAWMediaPreprocess").mediaPreprocess(b),f=null;c("qex")._("874")===!0&&(f=(yield d("MAWMediaPreprocess").optimisticMediaPreprocess(b)));j.set(a,{optimisticMedia:(b=f)!=null?b:void 0,processedMediaPromise:e})});return function(b){return a.apply(this,arguments)}}());return a}function f(a){c("qex")._("460")!==!0&&a.forEach(function(a){i["delete"](a)})}function k(a,e,f){c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(a.tables,e,"MAWMediaManagerUtils",function(a,c,e){a=f.reduce(function(a,b){b[0];b=b[1];b=i.get(b);b!=null&&a.push(b);return a},[]);a.forEach(function(a){switch(a.type){case"image":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,threadId:c,thumbnail:d("MAWMediaUtils").convertJpegThumbnailArrayBufferToFile(a.thumbnailUrlAndSpec.jpegThumbnail)});case"video":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,threadId:c,thumbnail:d("MAWMediaUtils").convertJpegThumbnailArrayBufferToFile(a.thumbnailUrlAndSpec.jpegThumbnail)});case"audio":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,threadId:c,thumbnail:null});case"document":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,threadId:c,thumbnail:null})}});return(h||(h=b("Promise"))).resolve()}))}g.MAWMediaManagerAttachments=i;g.MAWMediaManagerAttachmentsV2=j;g.preprocess_DEPRECATED=a;g.preprocessV2=e;g.clearAttachments=f;g.upload=k}),98);
__d("useIsSecureMessage",["LSMessagingThreadTypeUtil","ReQL","ReQLSuspense"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e;e=(e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("threads"),["threadType"]).getKeyRange(b.threadKey).map(function(a){a=a.threadType;return a})},[a,b.threadKey],f.id+":36"))!=null?e:c.fallbackThreadType;if(e==null){return(c=c.fallbackIsSecure)!=null?c:!1}return d("LSMessagingThreadTypeUtil").isSecure(e)}g["default"]=a}),98);
__d("MessageReactionOperation",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD:1,REMOVE:2,REMOVE_MULTI_REACT:3});f["default"]=a}),66);
__d("MessageReactionStyle",[],(function(a,b,c,d,e,f){a=Object.freeze({BASIC_SUPER_REACT_ANIMATION:1});f["default"]=a}),66);
__d("useIsReactionsV2Enabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","useIsChatPreviewsEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),g=d("ReQLSuspense").useFirst(function(){return e?d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(e):d("ReQL").empty()},[b,e],f.id+":32");return(a=d("MWLSThread").useThread(a,function(a){return i(a,g==null?void 0:g.communityType)}))!=null?a:!1}function i(a,b){if(d("LSThreadBitOffset").has(139,a))return!0;a=d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,b);return a?!0:!1}function b(a,b){var c=d("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a.threadType)||d("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(a.threadType);a=d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,b);return c||a}g.useIsReactionsV2Enabled=a;g.isReactionsV2Enabled=i;g.isReactionsV2ReadOnly=b}),98);
__d("useLSMessagingSource",["MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();switch(a){case"Inbox":return"inboxInThread";case"FullscreenChat":return"fullscreenChat";case"ChatTab":return"chatInThread";default:return"unknown"}}g["default"]=a}),98);
__d("useMWLSDefaultThreadSource",["LSThreadAttributionTypeUtil","react","useLSMessagingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useLSMessagingSource")();return i(function(b){return d("LSThreadAttributionTypeUtil").getSource(b,a)},[a])}g["default"]=a}),98);
__d("useMWPSendOrUnsendReaction",["FBLogger","I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpsertReactionStoredProcedure","LSOptimisticUpsertReactionV2StoredProcedure","MWPActor.react","MessageReactionOperation","MessageReactionStyle","ReQL","asyncToGeneratorRuntime","promiseDone","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useMWLSDefaultThreadSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,e,f,g,h){c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:g,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(c("MessageReactionOperation").ADD),reactionFbid:f,reactionLiteral:h,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!0})},"readwrite"))}function l(a,b,c,d,e,f,g){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,j){yield a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:f,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(j?c("MessageReactionOperation").REMOVE_MULTI_REACT:c("MessageReactionOperation").REMOVE),reactionFbid:g,reactionLiteral:h,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!1})},"readwrite")});return m.apply(this,arguments)}function n(a,b,e,f,g){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("reactions_v2")).getKeyRange(e.threadKey,e.messageId,f)).then(function(c){c!=null?k(a,b,e,f,c.count,g):k(a,b,e,f,(j||(j=d("I64"))).zero,g)}))}function a(a,e){var f=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i=c("useMWLSDefaultThreadSource")(),k=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a.threadKey);return d("Int64Hooks").useCallbackInt64(function(h){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.table("threads")).getKeyRange(a.threadKey)));b=b?d("useIsReactionsV2Enabled").isReactionsV2Enabled(b):!1;if(b){var m=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.table("reaction_v2_types")).filter(function(a){return a.reactionLiteral===h||a.reactionLiteralVariant16===h})));if(m!=null){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.table("reactions_v2")).getKeyRange(a.threadKey,a.messageId).filter(function(a){return(!k||(j||(j=d("I64"))).equal(a.reactionFbid,m.reactionFbid))&&a.viewerIsReactor})));if(b==null)return n(f,g,a,m.reactionFbid,h);var o=(j||(j=d("I64"))).equal(b.reactionFbid,m.reactionFbid);(!k||o)&&(yield l(f,g,a,b.count,b.reactionFbid,h,k));o||(yield n(f,g,a,m.reactionFbid,h))}else c("FBLogger")("messenger_web_product").warn("Reactions v2: trying to send reaction that is not in reaction_v2_types table");return}return f.runInTransaction(function(b){return c("LSOptimisticUpsertReactionStoredProcedure")(c("LSFactory")(b),{actorId:g,messageId:a.messageId,pluginType:e,reaction:h,sendAttribution:i(a.threadKey),threadKey:a.threadKey,timestampMs:(j||(j=d("I64"))).of_float(Date.now())})},"readwrite")})())},[f,a,k,g,e,i])}g["default"]=a}),98);
__d("MAWPSendOrRemoveReaction.react",["I64","Int64Hooks","MWPActor.react","cr:3461","promiseDone","requireDeferred","useIsSecureMessage","useMWPSendOrUnsendReaction","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MWLogMessageAction").__setRef("MAWPSendOrRemoveReaction.react");function a(a,e,f){var g,k=(i||(i=c("useReStore")))(),l=d("MWPActor.react").useActor(),m=(g=b("cr:3461")==null?void 0:b("cr:3461").useSendOrRemoveReaction(a.threadKey,(h||(h=d("I64"))).to_string(a.senderId)))!=null?g:null,n=c("useIsSecureMessage")(k,a,{fallbackIsSecure:e}),o=c("useMWPSendOrUnsendReaction")(a);return d("Int64Hooks").useMemoInt64(function(){return function(b,d,e){if(n&&m!==null)m(b,d);else{o((b=d)!=null?b:"")}j.onReady(function(b){return c("promiseDone")(b.log(k,a.messageId,a.threadKey,f,e,void 0,void 0,void 0,a.senderId,void 0,l))})}},[n,m,o,k,a.messageId,a.threadKey,a.senderId,f,l])}g.useSendOrRemoveReaction=a}),98);
__d("MWCMIsSubthreadContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=c.useMemo,l=e({isSubthread:!1});function a(){return j(l)}function b(a){var b=a.children,c=a.isSubthread;a=k(function(){return{isSubthread:c}},[c]);return i.jsx(l.Provider,{value:a,children:b})}b.displayName=b.name+" [from "+f.id+"]";g.useIsSubthreadContext=a;g.MWCMIsSubthreadContextProvider=b}),98);
__d("MWCMSubthreadChatTabContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=c.useMemo,l=e({pushSubthreadViewPage:null});function a(){return j(l)}function b(a){var b=a.children,c=a.pushSubthreadViewPage;a=k(function(){return{pushSubthreadViewPage:c}},[c]);return i.jsx(l.Provider,{value:a,children:b})}b.displayName=b.name+" [from "+f.id+"]";g.useSubthreadChatTabContext=a;g.MWCMSubthreadChatTabContextProvider=b}),98);
__d("MWCMSubthreadsInboxFocusContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=c.useMemo,l=c.useState,m=e({isSubthreadFocused:!1,setIsSubthreadFocused:function(){}});function a(){return j(m)}function b(a){a=a.children;var b=l(!1),c=b[0],d=b[1];b=k(function(){return{isSubthreadFocused:c,setIsSubthreadFocused:d}},[c,d]);return i.jsx(m.Provider,{value:b,children:a})}b.displayName=b.name+" [from "+f.id+"]";g.useIsSubthreadFocusedContext=a;g.MWCMIsSubthreadFocusedContextProvider=b}),98);
__d("MWMessageActionButton.react",["BaseTheme.react","MWXCircleButton.react","MWXTooltip.react","MessengerWebUXLogger","gkx","react","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback,k={dark:{},light:{},type:"VARIABLES"},l={dark:{"popover-background":"var(--chat-replied-message-background-color, inherit)"},light:{"popover-background":"var(--chat-replied-message-background-color, inherit)"},type:"VARIABLES"};b=i.forwardRef(a);function a(a,b){var d=a.label,e=a.loggingEvent,f=a.onPress;a=babelHelpers.objectWithoutPropertiesLoose(a,["label","loggingEvent","onPress"]);var g=c("MessengerWebUXLogger").useInteractionLogger(),h=j(function(a){f==null?void 0:f(a),e&&(g==null?void 0:g(e))},[g,e,f]),m=c("useMWPThreadTheme")(),n=m.backgroundGradientColors;m=m.threadTheme;m=c("gkx")("24125")&&(Boolean(m.backgroundUrl)||n.length>0);return i.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:d,children:i.jsx(c("BaseTheme.react"),{config:m?l:k,children:i.jsx(c("MWXCircleButton.react"),babelHelpers["extends"]({color:m?"primary":"secondary",label:d,onPress:h,ref:b,size:28,type:m?"overlay":"deemphasized"},a))})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("MWXIconShare",["MWXSvgIcon","SVGIcon","cr:9297","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9297")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWChatForwardDialogQuery$Parameters",["MWChatForwardDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWChatForwardDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatForwardDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWChatForwardDialog.entrypoint",["JSResourceForInteraction","MWChatForwardDialogQuery$Parameters","MWXacGating","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{forwardQueryReference:{parameters:b("MWChatForwardDialogQuery$Parameters"),variables:{scale:d("WebPixelRatio").get(),suppress_xac_groups:!d("MWXacGating").isGroupsEnabled()}}}}},root:c("JSResourceForInteraction")("MWChatForwardDialog.react").__setRef("MWChatForwardDialog.entrypoint")};g["default"]=a}),98);
__d("useMWChatForward",["MWChatForwardDialog.entrypoint","MessengerWebUXLogger","react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useRef;function a(a){var b=a.dropToggle,d=a.forwardDialogType,e=a.fromSecureThread,f=a.messageID,g=a.onClose,h=a.onSend;a=j(null);var k=c("useMWXEntryPointDialog")(c("MWChatForwardDialog.entrypoint"),{}),l=k[0],m=c("MessengerWebUXLogger").useInteractionLogger();k=i(function(){l({dropToggle:b,forwardDialogType:d,fromSecureThread:e,messageID:f,onSend:h},g,m==null?void 0:m("forward_message"))},[l,b,d,e,f,h,g,m]);return{onClick:k,triggerRef:a}}g["default"]=a}),98);
__d("MWChatForwardAction.react",["MWMessageActionButton.react","MWXIconShare","ODS","emptyFunction","react","useMWChatForward"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function k(a){(i||(i=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","forward"),a==null?void 0:a.onClick()}function a(a){var b=a.dropToggle;b=b===void 0?!1:b;var d=a.forwardDialogType;d=d===void 0?"open_":d;var e=a.fromSecureThread,f=a.label,g=a.messageID;a=a.onForward;var h=c("useMWChatForward")({dropToggle:b,forwardDialogType:d,fromSecureThread:e,messageID:g,onClose:c("emptyFunction"),onSend:a});return j.jsx(c("MWMessageActionButton.react"),{icon:c("MWXIconShare"),label:f,loggingEvent:"open_forward_message_dialog",onPress:function(){return k(h)},testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageRowIsRowFocusedContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));b=h;e=b.createContext;var i=b.createElement;d={isDialogOpened:!1,setFocused:c("emptyFunction"),setIsDialogOpened:c("emptyFunction")};var j=e(d);function a(a){var b=a.children;a=a.value;return i(j.Provider,{children:b,value:a})}a.displayName=a.name+" [from "+f.id+"]";g.context=j;g.MWV2MessageRowIsRowFocusedContextProvider=a}),98);
__d("MWChatReactionsActionContainer.react",["JSResourceForInteraction","MWV2MessageRowIsRowFocusedContext.react","MWXLazyPopoverTrigger.react","MWXPopoverLoadingState.react","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useContext,l=b.useState,m={popoverLoading:{minHeight:"x1wiwyrm",minWidth:"x1q6reyq",$$css:!0}};function a(a){var b=a.align;b=b===void 0?"middle":b;var e=a.alwaysShowEmojiPicker;e=e===void 0?!1:e;var f=a.children,g=a.closeActionsMenu,h=a.disableCustomReactions;h=h===void 0?!1:h;var n=a.hasReactionsV2,o=a.isBroadcastChannel,p=a.isBroadcastThread,q=a.isSecure;q=q===void 0?!1:q;var r=a.messageID,s=a.onVisibilityChange,t=a.reactionsPopoverResource,u=a.selectedReactions,v=a.sendReaction,w=k(d("MWV2MessageRowIsRowFocusedContext.react").context);t=(a=t)!=null?a:c("JSResourceForInteraction")("MWChatReactionsMenu.react").__setRef("MWChatReactionsActionContainer.react");a=l(!1);var x=a[0],y=a[1],z=u!=null&&u.length>0&&u[0]||void 0;a=e||x;e=j(function(a){var b=z!=null&&n!==!0&&z===a;v(a,b);return g()},[z,n,v,g]);x=j(function(a){a||y(!1),s(a),w.setFocused(a)},[w,s]);return i.jsx(c("MWXLazyPopoverTrigger.react"),{align:b==="end_"?"end":b,fallback:i.jsx(c("MWXPopoverLoadingState.react"),{withArrow:!1,xstyle:m.popoverLoading}),onVisibilityChange:x,popoverProps:{closeActionsMenu:g,disableCustomReactions:h,isBroadcastChannel:o,isBroadcastThread:p,isSecure:q,messageID:r,onClose:c("emptyFunction"),onSelect:e,selectedReactions:u,setShowEmojiPicker:y,showEmojiPicker:a},popoverResource:t,popoverType:a?"dialog":"menu",position:a?"below":"above",children:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageRowActionsContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;d=e.createContext;var j=e.useContext;e={current:c("emptyFunction")};var k={current:c("emptyFunction")},l={current:c("emptyFunction")};c={current:c("emptyFunction")};e={forwardMessage:e,openReactionsMenu:k,removeMessage:l,replyToMessage:c};var m=d(e);function a(){return j(m)}function b(a){var b=a.children;a=a.value;return i.jsx(m.Provider,{value:a,children:b})}b.displayName=b.name+" [from "+f.id+"]";g.useMessageRowActionsContext=a;g.MWV2MessageRowActionsContextProvider=b}),98);
__d("MWXIconFaceHappyOutline",["MWXSvgIcon","SVGIcon","cr:9132","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9132")),c("gkx")("23219"));g["default"]=a}),98);
__d("MessengerInCallReactionFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M26.5 5a1 1 0 1 1 2 0v2.25c0 .138.112.25.25.25H31a1 1 0 1 1 0 2h-2.25a.25.25 0 0 0-.25.25V12a1 1 0 1 1-2 0V9.75a.25.25 0 0 0-.25-.25H24a1 1 0 1 1 0-2h2.25a.25.25 0 0 0 .25-.25V5z"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M21 7.792a.485.485 0 0 0-.366-.475A11.027 11.027 0 0 0 18 7C11.925 7 7 11.925 7 18s4.925 11 11 11 11-4.925 11-11c0-.908-.11-1.79-.317-2.634a.485.485 0 0 0-.475-.366H27.5a3 3 0 0 1-3-3 .5.5 0 0 0-.5-.5 3 3 0 0 1-3-3v-.708zM14.25 14c-.938 0-1.5.75-1.5 2s.563 2 1.5 2c.938 0 1.5-.75 1.5-2s-.563-2-1.5-2zm7.5 0c-.938 0-1.5.75-1.5 2s.563 2 1.5 2c.938 0 1.5-.75 1.5-2s-.563-2-1.5-2zm1.75 7.5c0 2-2.5 4-5.5 4s-5.5-2-5.5-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MWChatReactionsAction.react",["fbt","MWChatMessageId","MWChatReactionsActionContainer.react","MWMessageActionButton.react","MWV2MessageRowActionsContext.react","MWXIconFaceHappyOutline","MWXSvgIcon","MessengerInCallReactionFilled.svg.react","ODS","SVGIcon","emptyFunction","react","useIsMultiReactionEnabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useCallback,m=b.useEffect;function a(a){var b=h._("__JHASH__czR8vxcW0mN__JHASH__"),e=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext(),f=e.openReactionsMenu,g=l(function(){f.current=c("emptyFunction");return},[f]);m(function(){return g},[g]);e=a.messageID;e=d("MWChatMessageId").getThreadId(e);var i=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(e);return k.jsx(c("MWChatReactionsActionContainer.react"),babelHelpers["extends"]({},a,{children:function(a,e,g,h,l){g=function(){e(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","reaction")};f.current=g;return k.jsx(c("MWMessageActionButton.react"),{icon:i?d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(c("MessengerInCallReactionFilled.svg.react")),!0):c("MWXIconFaceHappyOutline"),label:b,loggingEvent:"click_react_to_message",onHoverIn:h,onHoverOut:l,onPressIn:g,ref:a,testid:void 0})}}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWConsole",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){}g.log=a}),98);
__d("MWFalcoFeatureEventLogger",["I64","LSMessagingThreadTypeUtil","MessengerWebEventsFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f,g){c("gkx")("24170")&&c("MessengerWebEventsFalcoEvent").log(function(){return{entry_point:a,event_name:b,is_secured:d("LSMessagingThreadTypeUtil").isSecure(g),other_user_fbid:e!=null?(h||(h=d("I64"))).to_string(e):null,thread_fbid:(h||(h=d("I64"))).to_string(f)}})}g.logEvent=a}),98);
__d("MWInboxInfoPanelContext.react",["Int64Hooks","MWInboxPersistedUIState","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","cr:124","emptyFunction","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h,k=j.createContext,l=j.useCallback,m=j.useContext,n=j.useRef,o=j.useState,p=(j=b("cr:124"))!=null?j:c("emptyFunction"),q=k({currentSubthreadView:null,footerContentRef:{current:null},isOnMemberRequestsPageRef:{current:!1},pushMemberRequestsPage:c("emptyFunction"),setCurrentSubthreadView:c("emptyFunction"),setPushMemberRequestsPage:c("emptyFunction"),setShouldNavToMemberRequests:c("emptyFunction"),setShowSubthreadList:c("emptyFunction"),setSubthreadKey:c("emptyFunction"),setThreadInfoVisible:c("emptyFunction"),shouldNavToMemberRequests:!1,sourceIsSubthreadNav:{current:!1},subthreadKey:null,threadInfoVisible:!0});function a(){return m(q)}function e(a){a=a.children;var b=d("MWInboxPersistedUIState").usePersistedUIState(!0,"__MWInboxDetail.info__"),e=b[0],f=b[1],g=n(!1);b=o(null);var h=b[0],j=b[1],k=g.current,r=n(c("emptyFunction")),s=r.current,t=n(!1),u=n(null),v=n(!1);b=o(null);var w=b[0],x=b[1];b=l(function(){f(!1),j(null),x(null)},[f]);p(d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL,b);b=m(c("MWResponsiveLayoutContext.react"));var y=b.popCard,z=b.pushCard,A=l(function(a){if(c("gkx")("24056")){a=Boolean(a)===!1?y:z;a(d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL)}},[z,y]),B=l(function(a){a&&(x(null),j(null)),f(a),A(a)},[f,A]),C=l(function(a){f(!1),j(a),A(a)},[f,A]),D=l(function(a){g.current=a},[]),E=l(function(a,b){b===void 0&&(b=!1),a&&(f(!1),j(null)),x(a?"subthreadList":null),v.current=a&&b,A(a)},[f,A]),F=l(function(a){r.current=a},[]);b=d("Int64Hooks").useMemoInt64(function(){return{currentSubthreadView:w,footerContentRef:u,isOnMemberRequestsPageRef:t,pushMemberRequestsPage:s,setCurrentSubthreadView:x,setPushMemberRequestsPage:F,setShouldNavToMemberRequests:D,setShowSubthreadList:E,setSubthreadKey:C,setThreadInfoVisible:B,shouldNavToMemberRequests:k,sourceIsSubthreadNav:v,subthreadKey:h,threadInfoVisible:e}},[e,F,D,E,C,s,B,k,w,h]);return i.jsx(q.Provider,{value:b,children:a})}e.displayName=e.name+" [from "+f.id+"]";g.useMWInboxInfoPanelContext=a;g.MWInboxInfoPanelProvider=e}),98);
__d("useGetForwardSource",["LSIntEnum","LSMessagingThreadAttributionType","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(a!=null)if(a==="Inbox")return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_FORWARD);else if(a==="ChatTab")return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_CHAT_FORWARD);else return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_BROADCAST_FLOW);else return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_BROADCAST_FLOW)}g["default"]=a}),98);
__d("MessagePowerUp",[],(function(a,b,c,d,e,f){a=Object.freeze({AVATAR_LOVE:1e3,AVATAR_ANGER:1001,AVATAR_LAUGH:1002,AVATAR_CRY:1003,NONE:0,LOVE:1,GIFT_WRAP:2,CELEBRATION:3,FIRE:4});f["default"]=a}),66);
__d("WorkChatMessageType",[],(function(a,b,c,d,e,f){"use strict";a="text";b="gif";c="sticker";d="audio";e="file";f.text=a;f.gif=b;f.sticker=c;f.audio=d;f.file=e}),66);
__d("useMWLSSendStickerMessage",["I64","Int64Hooks","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","MWPActor.react","MessagePowerUp","WorkChatMessageType","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,e){var f=(j||(j=c("useReStore")))(),g=d("MWPActor.react").useActor();return d("Int64Hooks").useCallbackInt64(function(j,k,l){c("promiseDone")(f.runInTransaction(function(e){var f;f=d("LSThreadAttributionTypeUtil").getSource(j,(f=a)!=null?f:"unknown");return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(e),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,initiating_source:b,mark_read:!0,optimistic_attachment_preview:d("LSShape").ofRecord({playable_url:void 0,playable_url_expiration_timestamp_ms:void 0,playable_url_fallback:void 0,playable_url_mime_type:void 0,preview_height:(h||(h=d("I64"))).zero,preview_url:l,preview_url_expiration_timestamp_ms:void 0,preview_url_fallback:void 0,preview_url_mime_type:void 0,preview_width:h.zero}),power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_id:void 0,reply_source_type:i.ofNumber(c("LSMessageReplySourceType").MESSAGE),reply_source_type_v2:i.ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE),snippet_has_emoji:!1,source:f,sticker_id:h.of_string(k)}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:g,threadKey:j,threadType:i.ofNumber(1)})},"readwrite").then(function(a){e==null?void 0:e(d("WorkChatMessageType").sticker,1,a[0])}))},[f,g,b,a,e])}g["default"]=a}),98);
__d("MWLSForwardMessage",["I64","Int64Hooks","LSFactory","LSMediaUrlAttachment","LSOptimisticSendAttachmentForwardStoredProcedure","LSOptimisticSendMessageForwardStoredProcedure","MWChatThreadId","MWPActor.react","ODS","Promise","ReQL","promiseDone","useGetForwardSource","useLSMessagingInitiatingSource","useLSMessagingSource","useMWLSSendStickerMessage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(){var a=(k||(k=c("useReStore")))(),e=d("MWPActor.react").useActor(),f=c("useLSMessagingInitiatingSource")(),g=c("useGetForwardSource")(),l=c("useLSMessagingSource")(),m=c("useMWLSSendStickerMessage")(l,f);return d("Int64Hooks").useCallbackInt64(function(k,l,n){if(n.type!=="sent")return;n=n.value;var o=n.timestamp,p=n.messageId,q=n.threadId;(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","send");var r=function(){return a.runInTransaction(function(a){return c("LSOptimisticSendMessageForwardStoredProcedure")(c("LSFactory")(a),{forwardedMsgId:p,forwardedMsgThreadKey:q,forwardedMsgTimestampMs:o,initiatingSource:f,senderId:e,source:g,threadKey:k,threadType:l})},"readwrite").then(function(){})};c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("messages")).getKeyRange(q,o,p)).then(function(c){if(c==null)return r();var e=c.stickerId;if(e!=null)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("attachments")).getKeyRange(q,p)).then(function(a){a=a!=null?d("LSMediaUrlAttachment").previewUrl(a):void 0;m(k,(j||(j=d("I64"))).to_string(e),a);return(h||(h=b("Promise"))).resolve()});else return r()}),function(){return(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","success")},function(){return(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","failure")});return},[a,e,f,g,m])}function e(){var a=(k||(k=c("useReStore")))(),b=d("MWPActor.react").useActor(),e=c("useLSMessagingInitiatingSource")(),f=c("useGetForwardSource")();return d("Int64Hooks").useMemoInt64(function(){return function(g,h,k){(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","send");var l=d("MWChatThreadId").getMessagingThreadType(g),m=d("MWChatThreadId").toThreadKey(g);c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticSendAttachmentForwardStoredProcedure")(c("LSFactory")(a),{forwardedAttachmentFbid:(j||(j=d("I64"))).of_string(h),initiatingSource:e,senderId:b,source:f,threadKey:m,threadType:l})},"readwrite"),function(){return(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","success")},function(){return(i||(i=d("ODS"))).bumpEntityKey(3185,"mw_forward","failure")})}},[a,b,e,f])}g.useForwardMessage=a;g.useForwardAttachment=e}),98);
__d("MWMessageListLoggingContext",["react","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));d=h;var j=d.createContext,k=d.useContext,l=d.useRef,m=j({current:""});function a(a){var b=a.children;a=a.flowInstanceId;a=l(a);return i.jsx(m.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return k(m)}function e(){var a=k(m);(a.current===null||a.current==="")&&(a.current=c("uuidv4")());return a}g.MWMessageListLoggingContext=a;g.useFlowInstanceIdContext=b;g.useFlowInstanceId=e}),98);
__d("MWPBaseMessageListRowActions.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={incoming:{flexDirection:"x1q0g3np",$$css:!0},outgoing:{flexDirection:"x15zctf7",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",rowGap:"xzgd20w",columnGap:"xl5lk40",width:"x1h8dheu",$$css:!0}};function k(a){var b=a.children;a=a.outgoing;return i.jsx(d("react-strict-dom").html.div,{role:"none",style:[j.root,a?j.outgoing:j.incoming],children:b})}k.displayName=k.name+" [from "+f.id+"]";function a(a){a=a.children;return i.jsx(d("react-strict-dom").html.div,{children:a})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.ariaHidden,c=a.children,e=a.hasReactions,f=a.outgoing;a=a.xstyle;return i.jsx(d("react-strict-dom").html.div,{"aria-hidden":(b=b)!=null?b:!1,style:[l.root,e?l.moveUpToAccountForReactions:!1,f?l.outgoing:l.incoming,a!=null?a:!1],children:i.jsx(k,{outgoing:f,children:c})})}b.displayName=b.name+" [from "+f.id+"]";var l={incoming:{paddingStart:"x1t2a60a",$$css:!0},moveUpToAccountForReactions:{paddingBottom:"x1hhzuzn",$$css:!0},outgoing:{paddingEnd:"x1mpkggp",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1h8dheu",zIndex:"x1n327nk",$$css:!0}};g.MWPBaseMessageListRowActionsList=k;g.MWPBaseMessageListRowActionsListItem=a;g.MWPBaseMessageListRowActionsContainer=b}),98);
__d("MWPThreadCapabilitiesContext",["I64","Int64Hooks","LSIntEnum","LSMessageThreadUnsendabilityStatus","LSThreadBitOffset","ThreadStatus","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.createContext,m=e.useContext,n=l({blurMediaEnabled:!1,canUnsendMessage:!1,communityMessagingChannelDescriptionCustomization:!1,communityMessagingChannelInvite:!1,disableLinks:!1,editMessageEnabled:!1,hasLSThreadBitOffset:function(a){return!1},isPaused:!1,localDeleteMessageEnabled:!1,messageForwardEnabled:!1,messageUnsendEnabled:!1,modifyPinnedMessageV2Enabled:!1,reactEnabled:!1,reactionsV2WriteEnabled:!1,replyEnabled:!1,reportMessageToAdminEnabled:!1,rtcVideoCallEnabled:!1,rtcVoiceCallEnabled:!1,seenCountV2Enabled:!1,subThreadCreationEnabled:!1});function a(a){var b=a.children,e=a.customCapabilityCheck,f=a.thread,g=f.capabilities,h=f.capabilities2,l=f.capabilities3,m=f.capabilities4,o=f.threadType,p=d("Int64Hooks").useCallbackInt64(function(a){var b={capabilities:g,capabilities2:h,capabilities3:l,capabilities4:m,threadType:o};return d("LSThreadBitOffset").has(a,b)},[g,h,l,m,o]);a=d("Int64Hooks").useMemoInt64(function(){var a;return{blurMediaEnabled:p(46),canUnsendMessage:f.cannotUnsendReason!=null?(i||(i=d("I64"))).equal(f.cannotUnsendReason,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0,communityMessagingChannelDescriptionCustomization:p(135),communityMessagingChannelInvite:p(120),disableLinks:p(45),editMessageEnabled:p(194),hasLSThreadBitOffset:(a=p)!=null?a:e,isPaused:f.threadStatus!=null&&(i||(i=d("I64"))).equal(f.threadStatus,(i||(i=d("I64"))).of_int32(c("ThreadStatus").PAUSED)),localDeleteMessageEnabled:p(102),messageForwardEnabled:p(103),messageUnsendEnabled:p(122)&&f.cannotUnsendReason!=null?(i||(i=d("I64"))).equal(f.cannotUnsendReason,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!1,modifyPinnedMessageV2Enabled:p(172),reactEnabled:p(18),reactionsV2WriteEnabled:p(169),replyEnabled:p(42),reportMessageToAdminEnabled:p(93),rtcVideoCallEnabled:p(24),rtcVoiceCallEnabled:p(25),seenCountV2Enabled:p(140),subThreadCreationEnabled:p(167)}},[e,p,f.threadStatus,f.cannotUnsendReason]);return k.jsx(n.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return m(n)}g.Provider=a;g.useMWPThreadCapabilitiesContext=b}),98);
__d("MWV2LogMessageClick",["I64","LSMessagingThreadTypeUtil","Promise","ReQL","UserAgentData","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LsMessageClickFalcoEvent").__setRef("MWV2LogMessageClick");function a(a,e,f,g){var k=e.threadKey;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(k)).then(function(a){a!=null&&!d("LSMessagingThreadTypeUtil").isSecure(a.threadType)&&j.onReady(function(a){a.log(function(){var a;return{click:{category:2},click_target:{type:f},extra:JSON.stringify({action:(a=g)!=null?a:void 0,browserName:c("UserAgentData").browserName}),message:{id:e.messageId,sender_id:void 0,sent_time:(i||(i=d("I64"))).to_float(e.timestampMs)},thread:{id:i.to_string(e.threadKey),key:void 0,type:void 0},xma:void 0}})});return(h||(h=b("Promise"))).resolve()}))}g.log=a}),98);
__d("MWV2OnlyGlobalRemoveMessageDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWV2OnlyGlobalRemoveMessageDialog.react").__setRef("MWV2OnlyGlobalRemoveMessageDialog.entrypoint")};g["default"]=a}),98);
__d("MWXIconDots3Vertical",["MWXSvgIcon","SVGIcon","cr:9121","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9121")),c("gkx")("23219"));g["default"]=a}),98);
__d("isFeatureLimitEnabled",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("588")===!0}g["default"]=a}),98);
__d("useMWPCanRemoveMessageGlobally",["I64","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWPThreadCapabilitiesContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),e=b.canUnsendMessage;b=b.isPaused;a=a.cannotUnsendReason!=null?(h||(h=d("I64"))).equal(a.cannotUnsendReason,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0;return e&&a&&!b}g["default"]=a}),98);
__d("useIsRollcallEnabled",["LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=Boolean(d("MWLSThread").useThread(a,function(a){return d("LSThreadBitOffset").has(152,a)}));return a}g["default"]=a}),98);
__d("useShouldAllowRollCallForMessage",["I64","LSIntEnum","MessagingAttachmentType","gkx","isStringNullOrEmpty","useIsRollcallEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=[c("MessagingAttachmentType").IMAGE,c("MessagingAttachmentType").VIDEO];function a(a,b){var e=c("useIsRollcallEnabled")(a.threadKey);if(!e)return!1;return c("gkx")("23420")&&!c("isStringNullOrEmpty")(a.text)?!0:b.some(function(a){var b=(a=a.attachmentType)!=null?a:(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").NONE);return j.some(function(a){return(i||(i=d("I64"))).equal(b,(h||(h=d("LSIntEnum"))).ofNumber(a))})})}g.ATTACHMENT_TYPES_THAT_ALLOW_PROMPTS=j;g.useShouldAllowRollCallForMessage=a}),98);
__d("MWV2ContextualActionsButton.react",["fbt","I64","Int64Hooks","JSResourceForInteraction","LSContactBitOffset","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWMessageActionButton.react","MWPActor.react","MWPThreadCapabilitiesContext","MWV2LogMessageClick","MWV2MessageRowActionsContext.react","MWV2MessageRowIsRowFocusedContext.react","MWV2OnlyGlobalRemoveMessageDialog.entrypoint","MWXDeferredPopoverTrigger.react","MWXIconDots3Vertical","MetaConfig","ReQL","ReQLSuspense","emptyFunction","gkx","isFeatureLimitEnabled","react","requireDeferred","useIsReadOnlyFeatureLimitedWithThreadType","useMWPCanRemoveMessageGlobally","useMWXEntryPointDialog","useMWXLazyDialog","useReStore","useShouldAllowRollCallForMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;var m=b.useCallback,n=b.useContext,o=b.useEffect,p=c("requireDeferred")("MWV2ContextualActionsMenu.react").__setRef("MWV2ContextualActionsButton.react");function a(a){var b=a.attachment,e=a.canRemoveMessageGlobally,g=a.closeActionsMenu,k=a.extraActions,q=a.isSubthreadParentMessage;q=q===void 0?!1:q;var r=a.learnMoreDialogType,s=a.learnMoreOnMessageRemove,t=a.message,u=a.onRemoveMessageLogger,v=a.removeMessageDialogTitle,w=a.setMoreMenuOpen,x=a.showCreateSubthread;x=x===void 0?!1:x;var y=a.showFeedbackOptionsInContextualMenu,z=a.showForwardActionInContextualMenu,A=a.showLearnMoreInContextualMenu,B=a.showReactionInContextualMenu,C=a.showReplyActionInContextualMenu,D=a.threadType,E=(i||(i=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(E.tables.threads,["parentThreadKey","threadKey","threadType","cannotUnsendReason","threadSubtype"]).getKeyRange(t.threadKey)},[E,t.threadKey],f.id+":82");var F=a==null?void 0:a.parentThreadKey,G=h._("__JHASH__I1DdCdLzOkz__JHASH__"),H=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),I=H.localDeleteMessageEnabled,J=H.modifyPinnedMessageV2Enabled;H=H.reportMessageToAdminEnabled;var K=c("useMWPCanRemoveMessageGlobally")(t),L=d("LSMessagingThreadTypeUtil").isSecure(D),M=d("MWCMThreadTypes.react").isJoinedCMThread(D),N=c("useIsReadOnlyFeatureLimitedWithThreadType")(D),O=d("ReQLSuspense").useFirst(function(){if(d("LSMessagingThreadTypeUtil").isCMSubthread(D))if(F==null)return d("ReQL").empty();else return d("ReQL").fromTableAscending(E.tables.participants).getKeyRange(F,t.senderId);else if(M)return d("ReQL").fromTableAscending(E.tables.participants).getKeyRange(t.threadKey,t.senderId);return d("ReQL").empty()},[M,D,F,E,t.senderId,t.threadKey],f.id+":112"),P=d("ReQLSuspense").useFirst(function(){return M?d("ReQL").fromTableAscending(E.tables.contacts,["capabilities","capabilities2"]).getKeyRange(t.senderId):d("ReQL").empty()},[E,M,t.senderId],f.id+":139");N=(!L||c("isFeatureLimitEnabled")())&&N;var Q=!N,R=d("MWPActor.react").useActor();P=P!=null&&((P=d("LSContactBitOffset").has(77,P))!=null?P:!1);var S=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(D);J=J&&!t.isUnsent&&!q&&!d("LSMessagingThreadTypeUtil").isCMSubthread(D)&&(!S||S&&d("MWPActor.react").isAPPlus()&&c("MetaConfig")._("107"));q=t.isUnsent;S=!1;M||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(D)||d("LSMessagingThreadTypeUtil").isCMSubthread(D)?S=!q&&K:L?S=!N:S=I&&Q;q=c("useMWXEntryPointDialog")(c("MWV2OnlyGlobalRemoveMessageDialog.entrypoint"),{});var T=q[0];L=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWV2RemoveMessageDialog.react").__setRef("MWV2ContextualActionsButton.react"));var U=L[0];N=(O==null?void 0:O.isAdmin)===!0;I=t.unsentTimestampMs!=null;Q=(d("MWCMThreadTypes.react").isJoinedCMThread(D)||d("LSMessagingThreadTypeUtil").isCMSubthread(D))&&H&&!N&&!(j||(j=d("I64"))).equal(R,t.senderId)&&!I&&!P;q=(d("MWCMThreadTypes.react").isJoinedCMThread(D)||d("LSMessagingThreadTypeUtil").isCMSubthread(D))&&!(j||(j=d("I64"))).equal(R,t.senderId)&&!I;L=d("useShouldAllowRollCallForMessage").useShouldAllowRollCallForMessage(t,[b].filter(Boolean));O=d("Int64Hooks").useCallbackInt64(function(){var a={canRemoveMessageGlobally:K,message:t,removeLogger:u,threadType:D},b={learnMoreOnMessageRemove:s,message:t},e=(j||(j=d("I64"))).equal(t.senderId,R);if(d("MWCMThreadTypes.react").isJoinedCMThread(D)||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(D)||e&&!c("gkx")("24140")&&!t.isUnsent)return T(b);else return U(a,c("emptyFunction"))},[R,s,t,u,U,T,D,K]);H=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext();var V=H.removeMessage;S?V.current=O:V.current=c("emptyFunction");var W=m(function(){if(c("gkx")("24096")){V.current=c("emptyFunction");return}},[V]);o(function(){return W},[W]);var X=n(d("MWV2MessageRowIsRowFocusedContext.react").context);if(a==null||!(z||C||B||J||y||S||q||L||A||k!=null))return null;N=function(a){w(function(){return a});return X.setFocused(function(){return a})};var Y={eventName:"click_message_contextual_action_button",threadKey:t.threadKey,threadType:D};return l.jsx(c("MWXDeferredPopoverTrigger.react"),{align:"middle",onVisibilityChange:N,popoverProps:{attachment:b,canRemoveMessageGlobally:e&&K,closeActionsMenu:g,extraActions:k,learnMoreDialogType:r,learnMoreOnMessageRemove:s,message:t,onRemoveMessageLogger:u,removeMessageDialogTitle:v,showCreatePrompt:L,showCreateSubthread:x,showFeedbackOptionsInContextualMenu:y,showForwardActionInContextualMenu:z,showLearnMoreInContextualMenu:A,showPinMessageActionInContextualMenu:J,showReactionInContextualMenu:B,showReplyActionInContextualMenu:C,showReportCommunityMessageToAdmin:Q,showReportCommunityMessageToFacebook:q,showUnsendInContextualMenu:S,thread:a},popoverResource:p,popoverType:"menu",position:"above",children:function(a,b){var e=function(){b();return d("MWV2LogMessageClick").log(E,t,48)};return l.jsx(c("MWMessageActionButton.react"),{icon:c("MWXIconDots3Vertical"),label:G,loggingEvent:Y,onPress:e,ref:a,testid:void 0})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWV2ForwardMessage",["$InternalEnum","CometRelay","FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWDbMsg","MAWThreadId","MAWVerifyThreadCutover","MWChatMessageId","MWChatThreadId","MWLSForwardMessage","MWPActor.react","MWQPLMarkers","MWSharedMsgLogUtils","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","cr:338","cr:4950","cr:6918","cr:6938","promiseDone","sendToSentQPLLogger","unrecoverableViolation","useGetForwardSource","useIsSecureMessage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b))}function l(a,b,c){var e;return(e=d("ReQL")).firstAsync(e.mergeJoin(e.fromTableAscending(a.tables.participants).getKeyRange(b),e.fromTableAscending(a.tables.contacts)).filter(function(a){a[0];a=a[1];return!(j||(j=d("I64"))).equal(a.id,c)}))}function m(a,b,c){var e=b.messageId,g=b.threadKey;b=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(a.tables.attachments).getKeyRange(g,e)},[a,e,g],f.id+":91");var h=d("ReQLSuspense").useFirst(function(){return c!=null?d("ReQL").fromTableAscending(a.tables.attachments).getKeyRange(g,e,c):d("ReQL").empty()},[c,a,e,g],f.id+":100"),i=b.length>0?b[0]:void 0;if(c!=null){h=(h=h)!=null?h:i;return h!=null?[h]:[]}return b}var n=b("$InternalEnum")({SecureToOpen:"secure_to_open",OpenToOpen:"open_to_open",SecureToSecure:"secure_to_secure",OpenToSecure:"open_to_secure"});function a(a,e,f){var g=(i||(i=c("useReStore")))(),o=m(g,a,f),p=c("useIsSecureMessage")(g,a,{fallbackThreadType:e}),q=d("MWPActor.react").useActor(),r=!(j||(j=d("I64"))).equal(q,a.senderId),s=d("MWLSForwardMessage").useForwardMessage(),t=d("MWLSForwardMessage").useForwardAttachment(),u=c("useGetForwardSource")(),v=d("MWChatMessageId").makeSent(j.to_string(a.threadKey),a.messageId,j.to_string(a.timestampMs)),w=d("CometRelay").useRelayEnvironment(),x=d("Int64Hooks").useCallbackInt64(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f=d("MWChatThreadId").toThreadKey(e);e=d("MWChatThreadId").getMessagingThreadType(e);var i=(yield d("MAWVerifyThreadCutover").verifyThreadCutover((h||(h=b("Promise"))).resolve(g),f)),j=d("sendToSentQPLLogger").markSendToSentStart(),m=(yield h.all([d("MAWThreadId").isSecureThreadId(g.tables,f),k(g,f),l(g,f,q),d("MAWThreadId").getThreadFromJid(g.tables,f)])),p=m[0],s=m[1],t=m[2];m=m[3];var v=d("MWSharedMsgLogUtils").getMessageTypeParams();m!=null&&c("promiseDone")(d("MWSharedMsgLogUtils").getSendToSentAnnotations(m,v,u),function(a){a.string=babelHelpers["extends"]({},a.string,{attachment_type:"forward",message_type:"forward"}),d("sendToSentQPLLogger").addSendToSentAnnotations(j,a)});m=p||i;try{if(b("cr:6938")!=null&&!m){d("sendToSentQPLLogger").addSendToSentAnnotations(j,{string:{forward_type:n.SecureToOpen}});yield b("cr:6938").forwardMessage(g,f,e,a,r,o[0],q,u);d("sendToSentQPLLogger").markSendToSentSuccess(j);return}v=d("MAWDbMsg").toMsgId(a.messageId);if(v==null)throw c("unrecoverableViolation")("Message does not have an id","messenger_web_product");if(b("cr:338")!=null){d("sendToSentQPLLogger").addSendToSentAnnotations(j,{string:{forward_type:n.SecureToSecure}});b("cr:338").forwardMessage(g,f,v,u,(p=j)!=null?p:void 0);d("sendToSentQPLLogger").markSendToSentSuccess(j);if(b("cr:6918")!=null&&s!=null)return b("cr:6918")(g,s,t,d("LSMessagingThreadTypeUtil").isOneToOne(s.threadType));return}throw c("unrecoverableViolation")("We won't reach to this step, if you are in QE, you should use secure forward","messenger_web_product")}catch(a){d("sendToSentQPLLogger").markSendToSentPoint(j,d("MWQPLMarkers").MESSAGE_SEND_TO_SENT.FAIL_FORWARDING_MESSAGE);d("sendToSentQPLLogger").markSendToSentFail(j,a);c("FBLogger")("messenger_e2ee_web").catching(a).mustfix("MW Fail forwarding a message");throw a}});return function(a){return e.apply(this,arguments)}}(),[g,q,u,a,r,o]),y=d("Int64Hooks").useCallbackInt64(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var i=d("MWChatThreadId").toThreadKey(e),j=d("MWChatThreadId").getMessagingThreadType(e),m=(yield (h||(h=b("Promise"))).all([d("MAWThreadId").isSecureThreadId(g.tables,i),k(g,i),l(g,i,q),d("MAWVerifyThreadCutover").verifyThreadCutover(h.resolve(g),i),d("MAWThreadId").getThreadFromJid(g.tables,i)])),p=m[0],x=m[1],y=m[2],z=m[3];m=m[4];p=p||z;var A=d("sendToSentQPLLogger").markSendToSentStart();z=d("MWSharedMsgLogUtils").getMessageTypeParams();m!=null&&c("promiseDone")(d("MWSharedMsgLogUtils").getSendToSentAnnotations(m,z,u),function(a){a.string=babelHelpers["extends"]({},a.string,{attachment_type:"forward",message_type:"forward"}),d("sendToSentQPLLogger").addSendToSentAnnotations(A,a)});try{if(b("cr:4950")!=null&&p){d("sendToSentQPLLogger").addSendToSentAnnotations(A,{string:{forward_type:n.OpenToSecure}});var B=function(c){return b("cr:4950").forwardMessage(w,g,i,a,r,c,u,(c=A)!=null?c:void 0)};m=function(){o.length===0?B(void 0):o.forEach(function(a){return B(a)})};if(b("cr:6918")!=null&&x!=null){m();d("sendToSentQPLLogger").markSendToSentSuccess(A);return b("cr:6918")(g,x,y,d("LSMessagingThreadTypeUtil").isOneToOne(x.threadType))}else{m();d("sendToSentQPLLogger").markSendToSentSuccess(A);return}}d("sendToSentQPLLogger").addSendToSentAnnotations(A,{string:{forward_type:n.OpenToOpen}});f==null?s(i,j,v):t(e,f);d("sendToSentQPLLogger").markSendToSentSuccess(A);return}catch(a){d("sendToSentQPLLogger").markSendToSentPoint(A,d("MWQPLMarkers").MESSAGE_SEND_TO_SENT.FAIL_FORWARDING_MESSAGE);d("sendToSentQPLLogger").markSendToSentFail(A,a);c("FBLogger")("messenger_e2ee_web").catching(a).mustfix("MW Fail forwarding a message");throw a}});return function(a){return e.apply(this,arguments)}}(),[g,q,u,f,w,a,r,o,s,v,t]);return d("Int64Hooks").useMemoInt64(function(){return p?x:y},[p,x,y])}g["default"]=a}),98);
__d("MWV2ForwardMessageButton.react",["fbt","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","MWChatForwardAction.react","MWChatMessageId","promiseDone","qex","react","useMWV2ForwardMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||d("react");function a(a){var b=a.message,e=a.threadType,f=d("LSMessagingThreadTypeUtil").isSecure(e),g=c("qex")._("205")===!0;g=f?g?"cross_transport":"secure":g?"cross_transport":"open_";var i=d("MWChatMessageId").makeSent((j||(j=d("I64"))).to_string(b.threadKey),b.messageId,j.to_string(b.timestampMs)),m=b.stickerId,n=c("useMWV2ForwardMessage")(b,e);e=!d("LSMessagingThreadTypeUtil").isSecure(e);b=d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(1),b.displayedContentTypes)&&!b.textHasLinks||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(16384),b.displayedContentTypes)||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(2),b.displayedContentTypes)||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(4),b.displayedContentTypes)||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(512),b.displayedContentTypes)||m!=null&&(j||(j=d("I64"))).equal(m,(j||(j=d("I64"))).of_string("369239263222822"))||m!=null&&(j||(j=d("I64"))).equal(m,(j||(j=d("I64"))).of_string("369239343222814"))||m!=null&&(j||(j=d("I64"))).equal(m,(j||(j=d("I64"))).of_string("369239383222810"));m=e&&!b||a.dropForwardE2eeToggle===!0;return l.jsx(c("MWChatForwardAction.react"),{dropToggle:m,forwardDialogType:g,fromSecureThread:f,label:h._("__JHASH__GvPr2MwluxY__JHASH__"),messageID:i,onForward:function(a){return c("promiseDone")(n(a))}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageReactionHooks",["EmojiRenderer","I64","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return a.map(function(a,b){b=d("EmojiRenderer").parse(a).map(function(a){return a.emoji});return b.length!==1?"":b[0].join("")}).filter(function(a){return a!==""})}a={useSelectedReaction:function(a){var b=(i||(i=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("reactions")).getKeyRange(a.threadKey,a.messageId,e)},[e,b,a.messageId,a.threadKey],f.id+":34");if(g!=null)return g.reaction},useSelectedReactionsV2:function(a){var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.table("reactions_v2")).getKeyRange(a.threadKey,a.messageId).filter(function(a){return a.viewerIsReactor&&(h||(h=d("I64"))).gt(a.count,(h||(h=d("I64"))).zero)}).map(function(a){a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(b.table("reaction_v2_types")).getKeyRange(a.reactionFbid),f.id+":59");return[a==null?void 0:a.reactionLiteral,a==null?void 0:a.reactionLiteralVariant16].filter(Boolean)})},[b,a.threadKey,a.messageId],f.id+":50").flat();e=j(e);return e},useSelectedReactionV2:function(a){var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("reactions_v2")).getKeyRange(a.threadKey,a.messageId).filter(function(a){return a.viewerIsReactor})},[b,a.messageId,a.threadKey],f.id+":78");return d("ReQLSuspense").useFirst(function(){return e?d("ReQL").fromTableAscending(b.table("reaction_v2_types")).getKeyRange(e.reactionFbid).map(function(a){return a.reactionLiteral}):d("ReQL").empty()},[b,e],f.id+":86")}};g.MWV2MessageReactionHooks=a}),98);
__d("useMWChatReactionsActionContainerProps.react",["I64","LSMessagingThreadTypeUtil","MAWPSendOrRemoveReaction.react","MWCMThreadTypes.react","MWChatMessageId","MWV2MessageReactionHooks","react","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useCallback,k=b.useMemo;function a(a,b,c,e,f,g){var h=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReaction(a),l=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReactionsV2(a),m=d("LSMessagingThreadTypeUtil").isSecure(c),n=d("MAWPSendOrRemoveReaction.react").useSendOrRemoveReaction(a,m,"reaction_tray"),o=d("MWCMThreadTypes.react").isBroadcastThread(c);c=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(c);var p=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(a.threadKey),q=(i||(i=d("I64"))).to_string(a.threadKey),r=i.to_string(a.timestampMs),s=k(function(){return d("MWChatMessageId").makeSent(q,a.messageId,r)},[q,a.messageId,r]),t=j(function(b,c){e&&e();return n(a.messageId,c?void 0:b,c?"remove_reaction":"reaction")},[e,n,a.messageId]),u=p&&o;return{closeActionsMenu:b,disableCustomReactions:u,hasReactionsV2:p,isBroadcastChannel:c,isBroadcastThread:o,isSecure:m,messageID:s,onVisibilityChange:f,reactionsPopoverResource:g,selectedReactions:p?(b=l)!=null?b:void 0:h!=null?[h]:void 0,sendReaction:t}}g["default"]=a}),98);
__d("useMWV2ShouldDisableReactions.react",["LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","isFeatureLimitEnabled","useIsReactionsV2Enabled","useIsReadOnlyFeatureLimitedWithThreadType","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("LSMessagingThreadTypeUtil").isSecure(a);a=c("useIsReadOnlyFeatureLimitedWithThreadType")(a);e=(!e||c("isFeatureLimitEnabled")())&&a;a=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(b);var g=(h||(h=c("useReStore")))();b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.table("reaction_v2_types"))},[g],f.id+":38")!=null;return e||a&&!b}g["default"]=a}),98);
__d("MWV2MessageReactionButton.react",["MWChatReactionsAction.react","react","useMWChatReactionsActionContainerProps.react","useMWV2ShouldDisableReactions.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.closeActionsMenu,d=a.message,e=a.onReactionsSendLogger,f=a.reactionsPopoverResource,g=a.setReactionsMenuOpen;a=a.threadType;var h=c("useMWV2ShouldDisableReactions.react")(a,d.threadKey);d=c("useMWChatReactionsActionContainerProps.react")(d,b,a,e,g,f);return h?null:i.jsx(c("MWChatReactionsAction.react"),babelHelpers["extends"]({},d))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2OneToOneThreadBlockedContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));c=h;e=c.createContext;var i=c.createElement,j=c.useContext,k=e(!1);function a(){return j(k)}function b(a){var b=a.blocked;a=a.children;return i(k.Provider,{children:a,value:b})}b.displayName=b.name+" [from "+f.id+"]";g.useIsBlocked=a;g.MWV2OneToOneThreadBlockedContext=b}),98);
__d("MWV2MessageListIsRowModalContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;d=e.createContext;var j=e.useContext,k=d(c("emptyFunction"));function a(a){var b=a.children;a=a.value;return i.jsx(k.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(k)}g.MWV2MessageListIsRowModalContext=k;g.MWV2MessageListIsRowModalContextProvider=a;g.useMWV2MessageListIsRowModal=b}),98);
__d("MWXIconReply",["MWXSvgIcon","SVGIcon","cr:9275","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9275")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWV2SetReply.react",["MWPReplyContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(d("MWPReplyContext.react").MWPReplyContext);a=a.setReply;return a}g["default"]=a}),98);
__d("MWV2ReplyButton.react",["fbt","MAWEditMessageContext.react","MWMessageActionButton.react","MWV2MessageListIsRowModalContext.react","MWV2MessageRowActionsContext.react","MWXIconReply","emptyFunction","gkx","react","useMWV2SetReply.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useContext,m=b.useEffect;function a(a){var b=a.message;a=h._("__JHASH__xFCj85w6vra__JHASH__");var e=c("useMWV2SetReply.react")(),f=l(d("MAWEditMessageContext.react").Context),g=f.editMessageData,i=f.setEditMessageData,n=d("MWV2MessageListIsRowModalContext.react").useMWV2MessageListIsRowModal();f=function(){g!=null&&i(null),e({messageId:b.messageId,offlineThreadingId:b.offlineThreadingId,sendStatusV2:b.sendStatusV2,timestampMs:b.timestampMs},b.threadKey),n("")};var o=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext(),p=o.replyToMessage;p.current=f;var q=k(function(){if(c("gkx")("24096")){p.current=c("emptyFunction");return}},[p]);m(function(){return q},[q]);return j.jsx(c("MWMessageActionButton.react"),{icon:c("MWXIconReply"),label:a,loggingEvent:"message_reply",onPress:f,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useGenAIFeedbackSubmissionStatus",["I64","LSIntEnum","LSMailboxAIBotFeedbackSubmissionStatus","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=(j||(j=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){var e;return d("ReQL").fromTableDescending(b.table("ai_bot_feedback_submission_status")).getKeyRange((e=a)!=null?e:"").filter(function(a){return(h||(h=d("I64"))).equal(a.feedbackSubmissionStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxAIBotFeedbackSubmissionStatus").SUBMITTED))}).map(function(a){return a.feedbackSubmissionStatus})},[b,a],f.id+":25");return e}g["default"]=a}),98);
__d("MWPContactContext.react",["react","shallowEqualI64"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useContext,k=e.useMemo,l=e.useRef,m=i.createContext({authorName:void 0,contact:void 0,nickname:void 0}),n=i.createContext({authorName:void 0,contact:void 0,nickname:void 0});function a(){return j(m)}function b(){return j(n)}function c(a){var b=a.children,c=a.contact,d=a.nickname,e=function(){var a;if(d!=null)a=d;else if(c!=null){var b=c.firstName;a=b!=null?b:c.name}else a=void 0;return a}();a=k(function(){return{authorName:e,contact:c,nickname:d}},[d,e,c]);var f=o(c),g=k(function(){return{authorName:e,contact:f,nickname:d}},[d,e,f]);return i.jsx(m.Provider,{value:a,children:i.jsx(n.Provider,{value:g,children:b})})}c.displayName=c.name+" [from "+f.id+"]";function o(a){var b=l();a=a?{capabilities:a.capabilities,capabilities2:a.capabilities2,contactTypeExact:a.contactTypeExact,name:a.name,profilePictureFallbackUrl:a.profilePictureFallbackUrl,profilePictureUrl:a.profilePictureUrl,profilePictureUrlExpirationTimestampMs:a.profilePictureUrlExpirationTimestampMs,secondaryName:a.secondaryName}:void 0;d("shallowEqualI64").shallowEqualI64(b.current,a)||(b.current=a);return b.current}g.useMWPContactFullContext=a;g.useMWPContactStableContext=b;g.MWPContactContextProvider=c}),98);
__d("useIsGenAiFeedbackEnabled",["I64","LSContactTypeExact","LSIntEnum","MWPContactContext.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var e=d("MWPContactContext.react").useMWPContactStableContext();e=e.contact;if(a==null)return!1;return!b?!1:e!=null&&(h||(h=d("I64"))).equal(e.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").GENERATIVE_AI_BOT))}g["default"]=a}),98);
__d("useMWGetOtherUserContact",["I64","LSMessagingThreadTypeUtil","MWPActor.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useMemo;function a(a,b,e){var g=(h||(h=c("useReStore")))(),j=d("MWPActor.react").useActor(),l=(i||(i=d("I64"))).equal(j,a),m=k(function(){return e},[].concat(e));return d("ReQLSuspense").useFirst(function(){return!d("LSMessagingThreadTypeUtil").isOneToOne(b)?d("ReQL").empty():d("ReQL").mergeJoin(d("ReQL").fromTableAscending(g.table("participants"),["contactId"]).getKeyRange(a),d("ReQL").fromTableAscending(g.table("contacts"),e)).filter(function(a){var b=a[0];a[1];return l||!(i||(i=d("I64"))).equal(b.contactId,j)}).map(function(a){a[0];a=a[1];return a})},[b,g,a,l,j,m],f.id+":35")}g["default"]=a}),98);
__d("useMWIsContactRestricted",["LSContactBitOffset"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a!=null&&d("LSContactBitOffset").has(66,a);return a}g["default"]=a}),98);
__d("useMWHasForwardAction",["I64","LSAuthorityLevel","LSBitFlag","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MAWMsg","MWCMIsAnyCMThread","MWCMIsSubthreadContext.react","MWPThreadCapabilitiesContext","MWV2OneToOneThreadBlockedContext.react","MessagingAttachmentType","gkx","isFeatureLimitEnabled","useIsReadOnlyFeatureLimitedWithThreadType","useMWGetOtherUserContact","useMWIsContactRestricted"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e,f){f===void 0&&(f=!1);var g=d("MWCMIsSubthreadContext.react").useIsSubthreadContext();g=g.isSubthread;g=g&&!d("LSMessagingThreadTypeUtil").isCMSubthread(a);var j=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a),k=d("LSMessagingThreadTypeUtil").isSecure(a),l=b.ephemeralDurationInSec;l=l!=null?(h||(h=d("I64"))).gt(l,(h||(h=d("I64"))).zero):!1;var m=c("useIsReadOnlyFeatureLimitedWithThreadType")(a)&&(!k||c("isFeatureLimitEnabled")()),n=(h||(h=d("I64"))).equal(b.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(4096)),o=h.equal(b.displayedContentTypes,i.ofNumber(64)),p=d("MWV2OneToOneThreadBlockedContext.react").useIsBlocked(),q=c("useMWGetOtherUserContact")(b.threadKey,a,d("LSContactBitOffset").contactCapabilityFields);q=c("useMWIsContactRestricted")(q);a=c("MWCMIsAnyCMThread")(a)&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(4));var r=d("LSBitFlag").has(i.ofNumber(2),b.displayedContentTypes),s=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();s=s.messageForwardEnabled;k=(k?!l&&!n&&!o:!0)&&c("gkx")("24093")&&!g&&!p&&!q&&!m&&!b.isUnsent&&!a&&!d("MAWMsg").isPlaceholder(b)&&s&&(!j||j&&c("gkx")("461"))&&!f&&(h||(h=d("I64"))).gt(b.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))&&(e!=null&&(h||(h=d("I64"))).equal(e.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))&&(e.attachmentCta1Id!=null||e.attachmentCta2Id!=null||e.attachmentCta3Id!=null||e.defaultCtaId!=null)?e.isSharable:!0);l=r&&k;return{hasForwardAction:k,shouldShowForwardAction:l}}g["default"]=a}),98);
__d("useMWV2MessageForwardAction",["I64","LSBitFlag","LSIntEnum","MWChatMessageId","MWV2LogMessageClick","MWV2MessageRowIsRowFocusedContext.react","gkx","promiseDone","qex","react","useMWChatForward","useMWV2ForwardMessage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=k||d("react");var l=b.useCallback,m=b.useContext;function a(a,b,e){var f=(h||(h=c("useReStore")))(),g=c("gkx")("20836"),k=!g&&a;g=!g&&c("qex")._("205")===!0;g=k?g?"cross_transport":"secure":g?"cross_transport":"open_";var n=d("MWChatMessageId").makeSent((i||(i=d("I64"))).to_string(b.threadKey),b.messageId,i.to_string(b.timestampMs)),o=c("useMWV2ForwardMessage")(b,e);e=m(d("MWV2MessageRowIsRowFocusedContext.react").context);var p=e.setFocused,q=e.setIsDialogOpened;e=b.stickerId;a=!a;e=d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(1),b.displayedContentTypes)&&!b.textHasLinks||d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(16384),b.displayedContentTypes)||d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(2),b.displayedContentTypes)||d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(4),b.displayedContentTypes)||d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(512),b.displayedContentTypes)||d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(1024),b.displayedContentTypes)||e!=null&&(i||(i=d("I64"))).equal(e,(i||(i=d("I64"))).of_string("369239263222822"))||e!=null&&(i||(i=d("I64"))).equal(e,(i||(i=d("I64"))).of_string("369239343222814"))||e!=null&&(i||(i=d("I64"))).equal(e,(i||(i=d("I64"))).of_string("369239383222810"));var r=c("useMWChatForward")({dropToggle:a&&!e,forwardDialogType:g,fromSecureThread:k,messageID:n,onClose:l(function(){q(function(){return!1}),p(function(){return!0})},[p,q]),onSend:l(function(a){return c("promiseDone")(o(a))},[o])});return function(){d("MWV2LogMessageClick").log(f,b,44),r!=null&&(q(function(){return!0}),r.onClick())}}g["default"]=a}),98);
__d("useShowPersistentGenAIFeedbackButtons",["ReQL","ReQLSuspense","useGenAIFeedbackSubmissionStatus","useIsGenAiFeedbackEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var g=(h||(h=c("useReStore")))();e=c("useIsGenAiFeedbackEnabled")(b,e);var i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(g.tables.messages.index("threadKeyPrimarySortKeySecondarySortKeyBotResponseId"),["botResponseId"]).getKeyRange(a)},[g,a],f.id+":43"),j=c("useGenAIFeedbackSubmissionStatus")(b);return e&&(i==null?void 0:i.botResponseId)===b&&j==null}g["default"]=a}),98);
__d("MWMessageRowActions.react",["$InternalEnum","AdsMessengerContext.react","CometErrorBoundary.react","I64","LSBitFlag","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MNLSXMALayoutType","MWCMIsAnyCMThread","MWCMIsSubthreadContext.react","MWCMThreadTypes.react","MWLSThreadDisplayContext","MWPBaseMessageListRowActions.react","MWPThreadCapabilitiesContext","MWV2ContextualActionsButton.react","MWV2ForwardMessageButton.react","MWV2MessageReactionButton.react","MWV2MessageRowActionsContext.react","MWV2OneToOneThreadBlockedContext.react","MWV2ReplyButton.react","MWXTooltipGroup.react","ReQL","ReQLSuspense","cr:1669","cr:1670","cr:6325","emptyFunction","gkx","isFeatureLimitEnabled","qex","react","useGenAIFeedbackSubmissionStatus","useIsGenAiFeedbackEnabled","useIsReadOnlyFeatureLimitedWithThreadType","useIsSecureMessage","useMWGetOtherUserContact","useMWHasForwardAction","useMWIsContactRestricted","useMWV2MessageForwardAction","useReStore","useShowPersistentGenAIFeedbackButtons"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));e=k;var m=e.useCallback,n=e.useEffect,o=e.useState,p=c("gkx")("26372"),q={shrinkSpaceForFeedbackActions:{maxWidth:"x17jmlyi",$$css:!0}},r=b("$InternalEnum").Mirrored(["AI_STICKERS"]);function s(a){var e,g=a.canRemoveMessageGlobally,k=a.closeActionsMenu,o=a.dropForwardE2eeToggle,q=a.extraActions,s=a.interactedWith,t=a.learnMoreOnMessageRemove,u=a.message,v=a.onReactionsSendLogger,w=a.onRemoveMessageLogger,x=a.outgoing,y=a.reactionsPopoverResource,z=a.removeMessageDialogTitle,A=a.setMoreMenuOpen,B=a.setReactionsMenuOpen,C=a.shouldHideForwardOption,D=a.shouldHideHoverMenuReact;a=a.threadType;var E=d("MWCMIsSubthreadContext.react").useIsSubthreadContext();E=E.isSubthread;var F=d("MWV2OneToOneThreadBlockedContext.react").useIsBlocked(),G=(h||(h=c("useReStore")))();E=E&&u.subthreadKey!=null;var H=c("useMWGetOtherUserContact")(u.threadKey,a,d("LSContactBitOffset").contactCapabilityFields);H=c("useMWIsContactRestricted")(H);var aa=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),I=d("LSMessagingThreadTypeUtil").isSecure(a),J=c("useIsSecureMessage")(G,u,{fallbackThreadType:a});J=I&&!J;var K=!(i||(i=d("I64"))).equal(u.displayedContentTypes,(j||(j=d("LSIntEnum"))).ofNumber(1)),L=c("MWCMIsAnyCMThread")(a)&&(i||(i=d("I64"))).equal(u.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(4)),M=d("ReQLSuspense").useFirst(function(){return K?d("ReQL").fromTableAscending(G.table("attachments")).getKeyRange(u.threadKey,u.messageId):d("ReQL").empty()},[G,u.messageId,u.threadKey,K],f.id+":136");e=i.equal((e=u.displayedContentTypes)!=null?e:(i||(i=d("I64"))).zero,j.ofNumber(128));var N=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),O=N.isPaused,P=N.reactEnabled,Q=N.reactionsV2WriteEnabled,R=N.replyEnabled;N=N.subThreadCreationEnabled;var S=(M==null?void 0:M.xmaLayoutType)!=null&&(i||(i=d("I64"))).equal(M.xmaLayoutType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").THREAD_SHORTCUT)),T=(M==null?void 0:M.mustacheText)!=null&&u.stickerId!=null;T=T?r.AI_STICKERS:null;S=c("gkx")("24095")&&!S&&!u.isUnsent||!K||e;e=c("useMWHasForwardAction")(a,u,M,C);C=e.hasForwardAction;e=e.shouldShowForwardAction;var U=c("useIsReadOnlyFeatureLimitedWithThreadType")(a)&&(!I||c("isFeatureLimitEnabled")());P=!F&&!H&&!u.isUnsent&&!L&&(P||Q)&&(I?c("qex")._("1525")===!0:!0);Q=c("useIsGenAiFeedbackEnabled")(u.botResponseId,p);var V=c("useGenAIFeedbackSubmissionStatus")(u.botResponseId),W=Q&&V==null,X=c("useShowPersistentGenAIFeedbackButtons")(u.threadKey,u.botResponseId,p),Y=d("AdsMessengerContext.react").useAdsMessengerContext(),ba=Y.AdsAIFeedbackButtons,Z=Y.isMessageFromAdsAI;Y=Y.isMessengerInAds;Y=Y&&(Z==null?void 0:Z(u))===!0;Z=X?!1:W;Q=Q&&V!=null;V=!F&&!H&&!L&&R&&!u.isUnsent&&!E&&!U&&!J&&!Y;F=V&&!e&&s&&!X&&!Z;H=s&&P&&!D&&!Y;L=H&&!X&&!Z;R=H&&W;U=d("MWCMThreadTypes.react").isJoinedCMThread(a)&&!O&&N&&!E&&S;J=s&&U&&aa==="Inbox";P=c("useMWV2MessageForwardAction")(I,u,a);D=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext();var $=D.forwardMessage;C&&($.current=P);var ca=m(function(){if(c("gkx")("24096")){$.current=c("emptyFunction");return}},[$]);n(function(){return ca},[ca]);X=u.messageId;H=u.offlineThreadingId;W=u.sendStatusV2;O=u.threadKey;N=u.timestampMs;return l.jsxs(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsList,{outgoing:x,children:[e?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2ForwardMessageButton.react"),{dropForwardE2eeToggle:o,message:u,threadType:a})}):null,L?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2MessageReactionButton.react"),{closeActionsMenu:k,message:u,onReactionsSendLogger:v,reactionsPopoverResource:y,setReactionsMenuOpen:B,threadType:a})}):null,F?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2ReplyButton.react"),{message:{messageId:X,offlineThreadingId:H,sendStatusV2:W,threadKey:O,timestampMs:N}})}):null,J&&b("cr:6325")!=null?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(b("cr:6325"),{message:u})}):null,Z&&b("cr:1670")?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(b("cr:1670"),{message:u})}):null,Z&&b("cr:1669")?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(b("cr:1669"),{message:u})}):null,Y&&ba!=null?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(ba,{message:u})}):null,s?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2ContextualActionsButton.react"),{attachment:M,canRemoveMessageGlobally:g,closeActionsMenu:k,extraActions:q,isSubthreadParentMessage:E,learnMoreDialogType:T,learnMoreOnMessageRemove:t,message:u,onRemoveMessageLogger:w,removeMessageDialogTitle:z,setMoreMenuOpen:A,showCreateSubthread:U&&!J,showFeedbackOptionsInContextualMenu:Q,showForwardActionInContextualMenu:!e&&C,showLearnMoreInContextualMenu:T!==null&&c("gkx")("485"),showReactionInContextualMenu:R,showReplyActionInContextualMenu:!F&&V,threadType:a})}):null]})}s.displayName=s.name+" [from "+f.id+"]";function a(a){var b=a.ariaHidden,e=a.canRemoveMessageGlobally,f=a.dropForwardE2eeToggle,g=a.extraActions,h=a.focused,i=a.hasReactions,k=a.hovered,m=a.learnMoreOnMessageRemove,n=a.message,p=a.onReactionsSendLogger,r=a.onRemoveMessageLogger,t=a.outgoing,u=a.reactionsPopoverResource,v=a.removeMessageDialogTitle,w=a.shouldHideForwardOption;w=w===void 0?!1:w;var x=a.shouldHideHoverMenuReact;x=x===void 0?!1:x;var y=a.showPersistentGenAiFeedbackActionButtons;y=y===void 0?!1:y;a=a.threadType;var z=o(!1),A=z[0];z=z[1];var B=o(!1),C=B[0];B=B[1];var D=d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(2),n.displayedContentTypes);k=k||h||C||A;return l.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:l.jsx(c("MWXTooltipGroup.react"),{children:l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsContainer,{ariaHidden:(h=b)!=null?h:!1,hasReactions:i,outgoing:t,xstyle:y?q.shrinkSpaceForFeedbackActions:void 0,children:k||D?l.jsx(s,{canRemoveMessageGlobally:(C=e)!=null?C:!0,closeActionsMenu:c("emptyFunction"),dropForwardE2eeToggle:f,extraActions:(A=g)!=null?A:null,interactedWith:k,learnMoreOnMessageRemove:m,message:n,onReactionsSendLogger:p,onRemoveMessageLogger:r,outgoing:t,reactionsPopoverResource:u,removeMessageDialogTitle:v,setMoreMenuOpen:B,setReactionsMenuOpen:z,shouldHideForwardOption:w,shouldHideHoverMenuReact:x,threadType:a}):null})})})}a.displayName=a.name+" [from "+f.id+"]";g.LearnMoreDialogType=r;g.MWMessageRowActions=a}),98);
__d("MWPComposerMediaUploadUtil",["FBLogger","I64","LSGetAttachmentType","LSIntEnum","MessagingAttachmentType","ResumableUploadServiceState.enum","URI","asyncToGeneratorRuntime","cr:6057","cr:7187","emptyFunction","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k="messenger_file",l="messenger_audio",m="messenger_image",n="messenger_video",o="file_type",p="image_type",q="video_type",r="audio_type",s="FILE_ATTACHMENT",t="VOICE_MESSAGE",u="target_id";function v(a,b,c,d,e,f,g,h,i,j,k){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d,e,f,g,h,i,j,k,l,m){d===void 0&&(d=c("emptyFunction"));f===void 0&&(f=c("emptyFunction"));g===void 0&&(g=!1);var n="/ajax/mercury/upload.php";j===!0&&(n="/ajax/mercury/chatsupportuser/upload.php");var o=(yield b("cr:6057").load());o=new o({concurrentLimit:3,onUploadFailure:f,onUploadProgress:d,onUploadStart:function(b,c){a&&a(b,c.upload._file.size,c.upload._file.type)},onUploadSuccess:function(a,b){b=b.response.payload.metadata;var d;if(b==null)c("FBLogger")("messenger_browser_clients").warn("Empty payload"),d={};else{b=b[0];b!=null?d=b:(c("FBLogger")("messenger_browser_clients").warn("Empty metadata isChatSupportUser: %s",j),d={})}b=d.fbid;var f=d.video_id,g=d.audio_id,h=d.gif_id;d=d.file_id;g=(b=(f=(b=(b=b)!=null?b:f)!=null?b:g)!=null?f:h)!=null?b:d;e(a,g);if(g==null)throw c("unrecoverableViolation")("Unrecognized file upload success payload","messenger_comet")},retryLimit:1,uploadEndpoint:n});f={};f.data={chat_support_user_id:j===!0&&k!=null?k:void 0,nonce:j===!0&&m!=null?m:void 0,voice_clip:g?!0:void 0,voice_clip_waveform_data:g?JSON.stringify(l):void 0};o.getAsyncFileUploadRequest(h,i,f).send()});return w.apply(this,arguments)}function x(a,e,f,g,i,v){f===void 0&&(f=c("emptyFunction"));if(!b("cr:7187"))return;var w=(j||(j=c("URI"))).getRequestURI().getDomain(),x=/workplace.com/i.test(w)?"workplace.com":/messenger.com/i.test(w)?"messenger.com":"facebook.com";g.forEach(function(g,j){var w=c("LSGetAttachmentType")(g),y=k,z=o,A=s;switch(w){case(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE):y=m;z=p;break;case(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO):y=l;z=r;A=t;break;case(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO):y=n;z=q;break;default:break}w=b("cr:7187").create({consumer:y,customHttpHeaders:new Map([[u,v],[z,A]]),serviceDomain:x});w.addListener((y=c("ResumableUploadServiceState.enum")).START,function(){a&&a(i[j],g.size,g.type)});w.addListener(y.SUCCESS,function(a){e(i[j],a.media_id)});w.addListener(y.FAIL,function(a){f(i[j],{response:a})});w.addListener(y.TRANSPORT_FAILURE,function(a){f(i[j],{response:a})});void w.resume(g)})}function a(a,e,f,g,j,k,l,m,n,o,p,q){e===void 0&&(e=c("emptyFunction"));g===void 0&&(g=c("emptyFunction"));j===void 0&&(j=!1);if(b("cr:7187")&&q!=null&&m!==!0){var r=[],s=[],t=[],u=[];k.forEach(function(a,b){var e=c("LSGetAttachmentType")(a);(i||(i=d("I64"))).equal(e,(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))?(r.push(a),s.push(l[b])):(t.push(a),u.push(l[b]))});r.length>0&&x(a,f,g,r,s,q);t.length>0&&c("promiseDone")(v(a,e,f,g,j,t,u,m,n,o,p))}else c("promiseDone")(v(a,e,f,g,j,k,l,m,n,o,p))}function e(a,b,e,f){return{action_url:void 0,attachment_fbid:a,attachment_index:(i||(i=d("I64"))).zero,attachment_type:(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO),cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:void 0,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:a,original_file_hash:void 0,playable_duration_ms:i.of_float(e*1e3),playable_url:URL.createObjectURL(b),playable_url_mime_type:b.type,preview_height:void 0,preview_url:void 0,preview_url_mime_type:void 0,preview_width:void 0,sampling_frequency_hz:f==null?void 0:f.sampling_freq,source_text:void 0,subtitle_text:void 0,title_text:void 0,waveform_data:f==null?void 0:(a=f.amplitudes)==null?void 0:a.join(","),xma_layout_type:void 0,xmas_template_type:void 0}}function f(a,b){a=a.map(function(a){return{action_url:void 0,attachment_fbid:a.offlineAttachmentId,attachment_index:(i||(i=d("I64"))).zero,attachment_type:a.attachmentType,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:a.filename,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:a.offlineAttachmentId,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:a.previewUrl,playable_url_mime_type:a.mimeType,preview_height:a.previewHeight,preview_url:a.previewUrl,preview_url_mime_type:void 0,preview_width:a.previewWidth,source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0}});var e=[],f=[];a.forEach(function(a){(i||(i=d("I64"))).equal(a.attachment_type,(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))&&!b?f.push(a):e.push([a])});f.length>0&&e.unshift(f);return e.map(function(a){return a.map(function(a,b){return babelHelpers["extends"]({},a,{attachment_index:(i||(i=d("I64"))).of_int32(b)})})})}g.startUpload=a;g.getAudioAttachment=e;g.createPartitionedAttachments=f}),98);
__d("MWPOpenComposerUtils",["I64","LSRemoveMediaSendJobsStoredProcedure","LSResumeMediaSendJobStoredProcedure","MWConsole","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c){return a.media_staging.get(c).then(function(d){if(d!=null)return a.media_staging["delete"](c);else return(i||(i=b("Promise"))).resolve()})}function e(a,c,d){return a.media_staging.get(c).then(function(c){if(c!=null)return a.media_staging.put(d(c));else return(i||(i=b("Promise"))).resolve()})}function f(a,c,d,e,f){return a.attachments.get(c,d,e).then(function(g){if(g!=null)return a.attachments.upsert([c,d,e],f(g));else return(i||(i=b("Promise"))).resolve()})}function j(a,e,f){return c("LSResumeMediaSendJobStoredProcedure")(a,{dataTraceId:(f=f)!=null?f:void 0,jobId:e,pluginType:(h||(h=d("I64"))).zero}).then(function(d){var f=d[0],g=d[1];g=d[2];if(f)return c("LSRemoveMediaSendJobsStoredProcedure")(a,{offlineThreadingId:e});else return(i||(i=b("Promise"))).resolve()})}g.deleteMediaStaging=a;g.updateMediaStaging=e;g.updateAttachment=f;g.resumeSendJob=j}),98);
__d("MWShowMessagePromptPopoverContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;d=e.createContext;var j=e.useContext,k=e.useMemo,l=e.useRef,m=d([{current:c("emptyFunction")},c("emptyFunction")]);function a(){return j(m)}function b(a){a=a.children;var b=l(c("emptyFunction")),d=k(function(){return[b,function(a){b.current=a}]},[]);return i.jsx(m.Provider,{value:d,children:a})}b.displayName=b.name+" [from "+f.id+"]";g.useMWShowMessagePromptPopoverContext=a;g.MWShowMessagePromptPopoverContextProvider=b}),98);
__d("MWXIconMenuItemCautionTriangle",["MWXSvgIcon","SVGIcon","cr:9422","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:9422")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconMenuItemLeave",["MWXSvgIcon","SVGIcon","cr:9526","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:9526")),c("gkx")("23219"));g["default"]=a}),98);
__d("WebUserFlowLoggingDataContextProvider.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;c=b.createContext;var j=b.useMemo,k=b.useRef,l=c({loggingDataRef:{current:{}},setLoggingData:function(){}});function a(a){a=a.children;var b=k({}),c=function(a){b.current=a},d=j(function(){return{loggingDataRef:b,setLoggingData:c}},[]);return i.jsx(l.Provider,{value:d,children:a})}a.displayName=a.name+" [from "+f.id+"]";g.WebUserFlowLoggingDataContext=l;g.WebUserFlowLoggingDataContextProvider=a}),98);
__d("coerceMessagingThreadTypeToLSThreadType",["LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return(h||(h=d("LSIntEnum"))).unwrapIntEnum(a)}g["default"]=a}),98);
__d("getMWOtherUserFBID",["I64","LSMessagingThreadTypeUtil","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,d){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=d("LSMessagingThreadTypeUtil").isOneToOne(e);if(!f)return null;f=d("LSMessagingThreadTypeUtil").isSecure(e);if(!f)return c;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("participants"),["contactId"]).getKeyRange(c).filter(function(a){a=a.contactId;return!(h||(h=d("I64"))).equal(a,b)}).take(1)));return e==null?void 0:e.contactId});return i.apply(this,arguments)}g.getMWOtherUserFBID=a}),98);
__d("threadCreationUtils",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return(h||(h=d("I64"))).equal(a.creationStatus,(i||(i=d("LSIntEnum"))).ofNumber(b))}g.creationStatusEquals=a}),98);
__d("useOpenSubthreadView",["GroupsCometChatsEngagementLogger","I64","MWCMSubthreadChatTabContext.react","MWCMSubthreadsInboxFocusContext.react","MWInboxInfoPanelContext.react"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),b=a.setCurrentSubthreadView,c=a.setSubthreadKey;a=(a=d("MWCMSubthreadChatTabContext.react").useSubthreadChatTabContext())!=null?a:{};var e=a.pushSubthreadViewPage;a=d("MWCMSubthreadsInboxFocusContext.react").useIsSubthreadFocusedContext();var f=a.setIsSubthreadFocused;return function(a,g){g===void 0&&(g=!1),d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_chat_tab:e!=null?"1":"0",is_subthread:"1"},event:"thread_open",parent_surface:"thread_view",source:g===!0?"subthread_creation":"subthread_xma",surface:"subthread_view",thread_id:(h||(h=d("I64"))).to_string(a)}),e!=null?e==null?void 0:e(a):(b("subthreadView"),c(a),f(!0))}}g["default"]=a}),98);
__d("useMWCMCreateSubthread",["fbt","FBLogger","Int64Hooks","LSCommunityThreadCreationStatus","LSCreateCommunitySubThreadStoredProcedure","LSFactory","LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure","LSPlatformWaitForTaskCompletion","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","asyncToGeneratorRuntime","emptyFunction","promiseDone","react","threadCreationUtils","useCommunityFolder","useMWXPushErrorToast","useOpenSubthreadView","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;e=j||d("react");var k=e.useEffect,l=e.useRef,m=e.useState;function a(a){var e=(i||(i=c("useReStore")))(),g=d("MWLSThread").useThreadExn(a.threadKey),j=c("useCommunityFolder")(g),n=l(c("emptyFunction")),o=c("useMWXPushErrorToast")(),p=m(!1),q=p[0],r=p[1],s=c("useOpenSubthreadView")(),t=d("LSThreadBitOffset").has(206,g);k(function(){return function(){n==null?void 0:n.current()}},[]);p=d("Int64Hooks").useCallbackInt64(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(j==null)return;var b=(yield e.runInTransaction(function(b){return c("LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure")(c("LSFactory")(b),{communityId:j.folderId,parentMessageId:a.messageId,parentThreadId:a.threadKey})},"readwrite"));b=b[0];s(b,!0)}),[e,j,a.messageId,a.threadKey,s]);g=d("Int64Hooks").useCallbackInt64(function(){if(t)return;var b=function(a){a=a[0];if(a==null)return g();var b=d("ReQL").fromTableAscending(e.table("thread_creation_status")).getKeyRange(a);a=d("ReQLSuspense").first(b,f.id+":97");a==null||d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").PENDING)?h():i(a);function h(){n.current=b.subscribe(function(a,b){if(b.operation==="delete")return;a=b.value;if(d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").PENDING))return;n.current();i(a)})}function i(a){r(!1);try{var b=a.threadId;if(d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").FAILURE)||b==null)throw c("FBLogger")("cm_web").warn("sidechat creation failed");s(b,!0)}catch(a){g()}}},g=function(){r(!1),o({title:h._("__JHASH__aLKnhppCDUk__JHASH__")})};if(j==null)return;r(!0);c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(e,function(b){return c("LSCreateCommunitySubThreadStoredProcedure")(c("LSFactory")(b),{communityId:j.folderId,parentMessageId:a.messageId,parentThreadId:a.threadKey})},"createSocialChannel"),function(a){return b(a)},g)},[e,j,t,a.messageId,a.threadKey,s,o]);return[t?p:g,q]}g["default"]=a}),98);
__d("useMWEntrypoint",["MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),b="inbox";switch(a){case"ChatTab":b="popup_chat_box";break;case"RoomsSideChat":b="rooms_lobby";break}return b}g["default"]=a}),98);
__d("useMWFalcoFeatureEventLogger",["MWFalcoFeatureEventLogger","MWPActor.react","getMWOtherUserFBID","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(a,b){var e=(h||(h=c("useReStore")))(),f=d("MWPActor.react").useActor();return j(function(c,g){d("getMWOtherUserFBID").getMWOtherUserFBID(e,f,a,b).then(function(e){d("MWFalcoFeatureEventLogger").logEvent(c,g,e,a,b)})["catch"](function(){})},[e,f,a,b])}g["default"]=a}),98);
__d("useMWPIsMessagePinned",["ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useDeferredValue;function a(a){var b=(h||(h=c("useReStore")))();return j(!!d("ReQLSuspense").useFirst(function(){return a!=null?d("ReQL").fromTableAscending(b.table("msg_pinned_messages_v2")).getKeyRange(a.threadKey,a.messageId):d("ReQL").empty()},[b,a],f.id+":29"))}g["default"]=a}),98);
__d("useMWXConfirmationDialog",["fbt","JSResourceForInteraction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||d("react")).useCallback,k=c("JSResourceForInteraction")("MWXConfirmationDialog.react").__setRef("useMWXConfirmationDialog");function a(){var a=c("useMWXLazyDialog")(k),b=a[0];return j(function(a,c,d){var e=a.cancel;e=e===void 0?h._("__JHASH__ko1T7DvDF-J__JHASH__"):e;var f=a.confirm;f=f===void 0?h._("__JHASH__Yske7OqlYXF__JHASH__"):f;a=babelHelpers.objectWithoutPropertiesLoose(a,["cancel","confirm"]);b(babelHelpers["extends"]({cancel:e,confirm:f},a),function(a){return a?c():d==null?void 0:d()})},[b])}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CVCv3DisabledPlayerOrigins",[],(function(a,b,c,d,e,f){a=Object.freeze({BEEPER:"beeper",FB_STORIES:"fb_stories"});f["default"]=a}),66);
__d("CVCv3DisabledPlayerSubOrigins",[],(function(a,b,c,d,e,f){a=Object.freeze({LIVE_BEEPER:"live_beeper"});f["default"]=a}),66);
__d("CvcV3HttpEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1856513");b=d("FalcoLoggerInternal").create("cvc_v3_http_event",a);e=b;g["default"]=e}),98);
__d("CVCv3SubscriptionHelper",["CvcV3HttpEventFalcoEvent","DateConsts","guid"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$1=a;this.$2=c("guid")();this.$3=((a=b)!=null?a:"null")+"::"+((b=d)!=null?b:"null");this.$4=null;this.$5=null}var b=a.prototype;b.isValidSubscription=function(){return!!this.$1};b.makeCVCv3StateUpdate=function(a,b,c,e){var f=null;a!=null&&!Number.isNaN(a)&&b!=null&&!Number.isNaN(b)&&(f={m:e,pf:Math.floor((b-a)*d("DateConsts").MS_PER_SEC),s:c,sa:Math.floor(a*d("DateConsts").MS_PER_SEC)});e={pps:this.$4,ps:f,si:this.$2,so:this.$3,vi:this.$1};this.$4=f;return e};b.makeUnifiedVideoCVCUpdate=function(a,b,c,d,e){a=this.makeCVCv3StateUpdate(a,b,c,d);this.$5!=null&&(a.tk=this.$5);return babelHelpers["extends"]({},a,e)};b.processUnifiedResponse=function(a){a=a;this.$5=a.tk;return a};b.clearAnyPreviousContext=function(){this.$4=null};b.logHttpRequestSuccess=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_success",duration_ms:a!=null?a.toString():null,countable_id:b.$1}})};b.logHttpRequestFailure=function(a,b){var d=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_failed",error_msg:a,duration_ms:b!=null?b.toString():null,countable_id:d.$1}})};b.logHttpRequestTimeout=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_timeout",duration_ms:a!=null?a.toString():null,countable_id:b.$1}})};b.logHttpResponseBad=function(a,b){var d=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_response_bad",error_msg:a,duration_ms:b!=null?b.toString():null,countable_id:d.$1}})};b.logDebugInfo=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:a,countable_id:b.$1}})};return a}();g["default"]=a}),98);
__d("CometTahoeChainingDepthLogging.react",["VideoPlayerHooks","react","useCometTahoeChainingDepth","useRoutePassthroughProps"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useLayoutEffect;function a(){var a=d("useCometTahoeChainingDepth").useChainingDepthContext(),b=a.chainingDepthState,e=a.chainingSessionID,f=(i||(i=d("VideoPlayerHooks"))).useController();a=c("useRoutePassthroughProps")();var g=a==null?void 0:a.chainingSeedVideoId;j(function(){b!=null&&e!=null&&(f.setAdditionalLogData("video_chaining_session_id",e),f.setAdditionalLogData("video_chaining_depth_level",b)),g!=null&&f.setAdditionalLogData("video_chaining_parent_video_id",String(g))},[b,e,f,g]);return null}g["default"]=a}),98);
__d("LiveTraceWwwVideoPlayerFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743810");b=d("FalcoLoggerInternal").create("live_trace_www_video_player",a);e=b;g["default"]=e}),98);
__d("MediaPlaybackCompoundEventUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];a.forEach(function(a){b.push(a.event)});if(b.length)return b;else return null}f.getTMediaPlaybackEventPayloadCollection=a}),66);
__d("MediaPlaybackCompoundFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2074");b=d("FalcoLoggerInternal").create("media_playback_compound",a);e=b;g["default"]=e}),98);
__d("MediaPlaybackCompoundEventLogger",["MediaPlaybackCompoundEventUtils","MediaPlaybackCompoundFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.length?{events:d("MediaPlaybackCompoundEventUtils").getTMediaPlaybackEventPayloadCollection(a),required_metadata:a[0].required_metadata}:null}a={logComet:function(a){var b=h(a);b&&c("MediaPlaybackCompoundFalcoEvent").log(function(){return b})},logCometImmediately:function(a){var b=h(a);b&&c("MediaPlaybackCompoundFalcoEvent").logImmediately(function(){return b})}};b=a;g["default"]=b}),98);
__d("MediaPlaybackCompoundEventStateMachineLogger",["emptyFunction","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=.5;b=c("emptyFunction");d=c("emptyFunction");e=c("emptyFunction");function i(){return{canLogPausedOrFinishedPlaying:!1,canLogPlayingEvent:!0,hasPendingRequestedPlaying:!1,isLoggingScrubbingSequence:!1,lastLoggedCaptionState:null,lastLoggedFullscreenState:!1,lastLoggedSoundOnState:null,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,shouldLogRequestedPlayingForScrub:!1}}function a(a){var b={},d=a.initialLoggingMetaData;d;var e=[],f=i();function g(a){var b,c=a.eventType,g=a.snaplOverrides,h=a.state;a=a.tags;var i=null,j=null,k=(a==null?void 0:a.player_format)!=null?(a==null?void 0:a.player_format)==="full_screen":f.lastLoggedFullscreenState,l=(a==null?void 0:a.captions_displayed)!=null?a==null?void 0:a.captions_displayed:f.lastLoggedCaptionState,m=(a==null?void 0:a.player_sound_on)!=null?a==null?void 0:a.player_sound_on:f.lastLoggedSoundOnState;b=(b=d.coreVideoPlayerMetaData.videoFBID)!=null?b:"-1";var n=d.coreVideoPlayerMetaData.adClientToken==null?"organic":"paid";b={current_watching_module:"",media_id:b,player_origin:d.coreVideoPlayerMetaData.playerOriginOverride,player_suborigin:d.coreVideoPlayerMetaData.subOrigin,tracking_type:n};n="";(g==null?void 0:g.video_time_position)!=null?n=Math.round(g.video_time_position*1e3).toString():h.uncontrolledState.videoElementPlayheadPosition!=null&&(n=Math.round(h.uncontrolledState.videoElementPlayheadPosition*1e3).toString());g={client_time_ms:Date.now().toString(),event_name:c,media_time_ms:n,tag_metadata:{captions_displayed:a==null?void 0:a.captions_displayed,player_format:a==null?void 0:a.player_format,player_sound_on:a==null?void 0:a.player_sound_on}};h={client_high_res_packaging_time_ms:i,event:g,operational_metadata:j,required_metadata:b};e.push(h);f.lastLoggedSoundOnState=m;f.lastLoggedFullscreenState=k;f.lastLoggedCaptionState=l}function j(a){d;if(a.type==="notify_logging_metadata_change"){a=a.payload.loggingMetaData;d=a}}function k(a,c,d){if(a.controlledState.playbackState!==c.controlledState.playbackState&&c.controlledState.playbackState==="ended"&&f.canLogPausedOrFinishedPlaying){g({eventType:"completed",state:c});f.canLogPausedOrFinishedPlaying=!1;return b}else return b}function l(a,c){g({eventType:"requested_playing",snaplOverrides:c,state:a});f.hasPendingRequestedPlaying=!0;f.canLogPausedOrFinishedPlaying=!0;return b}function m(a){if(!f.canLogPausedOrFinishedPlaying)return b;else if(f.hasPendingRequestedPlaying){n(a);f.canLogPausedOrFinishedPlaying=!1;f.hasPendingRequestedPlaying=!1;return b}else{g({eventType:"paused",state:a});f.canLogPausedOrFinishedPlaying=!1;f.hasPendingRequestedPlaying=!1;return b}}function n(a){g({eventType:"cancelled",state:a});return b}function o(a,c,d){if(d.type==="dom_event_play_promise_rejected"&&f.hasPendingRequestedPlaying){a=d.payload.playPromiseRejectionReason;if(a!=null&&a.name==="NotAllowedError"){n(c);return b}else return b}else return b}function p(a,c,d){if((d.type==="controller_play_requested"||d.type==="dom_event_play"&&!f.shouldIgnoreDomPlay)&&a.controlledState.playbackState!==c.controlledState.playbackState){l(c);return b}else return b}function q(a,c,d){var e=c.controlledState.playbackState,g=a.controlledState.playbackState;if(d.type==="controller_scrub_begin_requested"&&!a.controlledState.scrubbing&&e!=="paused"&&e!=="ended"){m(c);f.isLoggingScrubbingSequence=!0;return b}else if(!a.controlledState.seeking&&c.controlledState.seeking&&!f.isLoggingScrubbingSequence&&e!=="paused"&&e!=="ended"&&!f.hasPendingRequestedPlaying){m(c);f.shouldLogRequestedPlayingForScrub=!0;return b}else if(d.type==="controller_scrub_end_requested"&&a.controlledState.scrubbing&&e!=="paused"&&e!=="ended"){l(c,{video_time_position:d.payload.seekTargetPosition});return b}else if(a.controlledState.seeking&&!c.controlledState.seeking){d=c.uncontrolledState.videoElementPlayheadPosition;a=a.controlledState.implementationSeekSourcePosition;a!=null&&d!=null&&Math.abs(a-d)>h&&(f.shouldLogRequestedPlayingForScrub&&e!=="paused"&&e!=="ended"&&l(c),f.isLoggingScrubbingSequence=!1,f.shouldLogRequestedPlayingForScrub=!1,g!=="paused"&&g!=="ended"&&(f.canLogPlayingEvent=!0));return b}else return b}function r(a,c,d){if(a.controlledState.playbackState==="stalling"&&c.controlledState.playbackState==="playing"&&f.canLogPlayingEvent){g({eventType:"started_playing",state:c});f.canLogPlayingEvent=!1;f.hasPendingRequestedPlaying=!1;return b}else return b}function s(a,c,d){if((d.type==="controller_pause_requested"||d.type==="dom_event_pause"&&!f.shouldIgnoreDomPause)&&a.controlledState.playbackState!==c.controlledState.playbackState){m(c);return b}else return b}function t(a,d,e){a=d.controlledState.playbackState;if(a!=="paused"&&a!=="ended"){c("gkx")("24379")&&e.type==="implementation_video_node_unmounted"?m(d):(e.type==="implementation_unmounted"||e.type==="implementation_engine_destroy_requested")&&m(d);return b}else return b}function u(a,c,d){if(d.type!=="notify_fullscreen_changed")return b;a=f.lastLoggedFullscreenState;d=c.uncontrolledState.isFullscreen;if(a!==!0&&d===!0){x(c,!0);return b}else if(a===!0&&d===!1){x(c,!1);return b}else return b}function v(a,c,d){if(d.type!=="controller_muted_requested"&&d.type!=="controller_volume_requested")return b;a=c.controlledState.muted;d=c.controlledState.volume;a=!(a||d===0);d=f.lastLoggedSoundOnState;if(d!==!0&&a===!0){g({eventType:"tags_changed",state:c,tags:{player_sound_on:!0}});return b}else if(d!==!1&&a===!1){g({eventType:"tags_changed",state:c,tags:{player_sound_on:!1}});return b}else return b}function w(a,c,d){if(d.type!=="controller_set_captions_visible_requested")return b;a=f.lastLoggedCaptionState;d=c.controlledState.captionsVisible;if(a!==!0&&d===!0){g({eventType:"tags_changed",state:c,tags:{captions_displayed:!0}});return b}else if(a!==!1&&d===!1){g({eventType:"tags_changed",state:c,tags:{captions_displayed:!1}});return b}else return b}function x(a,b){g({eventType:"tags_changed",state:a,tags:{player_format:b?"full_screen":"unknown"}})}return{consumeLoggerEvents:function(){return e.length>0?e.splice(0):[]},handleStateMachine:function(a,b,c){j(c);var d=b.controlledState.playbackState,e=[u,o,p,q,r,k,s,v,t,w];e.forEach(function(d){d(a,b,c)});(d==="paused"||d==="ended")&&(f.canLogPlayingEvent=!0);c.type==="controller_pause_requested"&&(f.shouldIgnoreDomPause=!0);c.type==="controller_play_requested"&&(f.shouldIgnoreDomPlay=!0);c.type==="dom_event_pause"&&(f.shouldIgnoreDomPause=!1);c.type==="dom_event_play"&&(f.shouldIgnoreDomPlay=!1)}}}g.createMediaPlaybackCompoundEventStateMachineLogger=a}),98);
__d("MediaPlaybackLogFlusher",["MediaPlaybackCompoundEventLogger","emptyFunction","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=c("emptyFunction");b=function(){function a(a){this.$1=a}var b=a.prototype;b.flushLogs=function(){var a=this.$1.consumeLoggerEvents();a.length&&(a[0].required_metadata.tracking_type==="paid"?c("MediaPlaybackCompoundEventLogger").logCometImmediately(a):c("MediaPlaybackCompoundEventLogger").logComet(a))};b.discardLogsWithoutFlushing=function(){var a=this.$1.consumeLoggerEvents()};return a}();g["default"]=b}),98);
__d("Mp4DASHEventMessageBox",[],(function(a,b,c,d,e,f){a=function(){function a(a,b){this.$1=b,this.$2=null,b.getVersion()==0?this.$2={version:0,schemeIdUri:a.readZeroTerminatedString(this.$4(a,b)),value:a.readZeroTerminatedString(this.$4(a,b)),timescale:a.readUint32(),presentationTimeDelta:a.readUint32(),eventDuration:a.readUint32(),id:a.readUint32()}:b.getVersion()==1&&(this.$2={version:1,timescale:a.readUint32(),presentationTime:a.readUint64(),eventDuration:a.readUint32(),id:a.readUint32(),schemeIdUri:a.readZeroTerminatedString(this.$4(a,b)),value:a.readZeroTerminatedString(this.$4(a,b))}),this.$3=new DataView(a.getDataView().buffer,a.getCursor())}var b=a.prototype;b.getFullBox=function(){return this.$1};b.getEmsgFields=function(){return this.$2};b.getMessageData=function(){return this.$3};b.getStartTime=function(){var a=this.$2;if(a==null)return null;switch(a.version){case 0:return null;case 1:return this.$5(a)}};b.getDuration=function(){var a=this.$2;if(a==null)return null;var b=a.eventDuration;a=a.timescale;return a!==0?b/a:b};b.$5=function(a){var b=a.timescale;a=a.presentationTime;return b!==0?a/b:a};b.$4=function(a,b){return b.getBox().getSize()-(a.getCursor()-b.getBox().getStart())};return a}();a.canonicalType="emsg";f["default"]=a}),66);
__d("XVideoUnifiedCVCControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/video/unified_cvc/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("UnifiedVideoCVCSubscription",["CVCv3DisabledPlayerOrigins","CVCv3DisabledPlayerSubOrigins","CVCv3SubscriptionHelper","DateConsts","XVideoUnifiedCVCControllerRouteBuilder","clearTimeout","cometAsyncFetch","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.values(c("CVCv3DisabledPlayerOrigins")),i=Object.values(c("CVCv3DisabledPlayerSubOrigins")),j=10;a=function(){function a(a,b,d,e,f,g){var j=this;this.$1=new(c("CVCv3SubscriptionHelper"))(a,b,d);this.$5=f;this.$6=null;this.$9=null;this.$10=!this.$1.isValidSubscription();this.$3=null;this.$2=null;a=b!=null?h.includes(b):!1;f=d!=null?i.includes(d):!1;!a&&!f&&(this.$3=e,this.$11=g,this.$4=e.subscribe(function(){if(j.$3==null){j.$1.logDebugInfo("empty_video_controller");return}var a=j.$3.getCurrentState();a.playing?j.$12(a):j.$13()}))}var b=a.prototype;b.$12=function(a){if(this.$3==null){this.$1.logDebugInfo("empty_video_controller");return}if(a.playing){if(this.$2==null){a=this.$3.getPlayheadPosition();a>=0&&(this.$2=a)}}else this.$2=null;this.$14(0)};b.stopUnifiedCVC=function(){this.$13()};b.destroy=function(){this.$13(),this.$4!=null&&this.$4.remove(),this.$4=null,this.$3=null};b.$13=function(){c("clearTimeout")(this.$8),c("clearTimeout")(this.$7),this.$8=null,this.$7=null,this.$2=null,this.$1.clearAnyPreviousContext(),this.$9=null};b.$15=function(){c("clearTimeout")(this.$7),this.$7=null};b.$16=function(){this.$9=null,this.$15(),this.$14(0)};b.$14=function(a){var b=this;if(this.$3==null||this.$8!=null||this.$9!=null||this.$10)return;this.$8=c("setTimeout")(function(){b.$8=null;var a=b.$17();if(a==null){b.$1.logDebugInfo("empty_request");return}b.$9=a;var e=Date.now(),f=!1;c("promiseDone")(a,function(c){if(a!==b.$9)return;b.$9=null;if(c!=null){c=b.$1.processUnifiedResponse(c);b.$18(c,e)}else b.$1.logHttpResponseBad("null payload",Date.now()-e)},function(a){f=!0,b.$1.logHttpRequestFailure(a!=null?JSON.stringify(a):null,Date.now()-e)});b.$7=c("setTimeout")(function(){f||b.$1.logHttpRequestTimeout(Date.now()-e),b.$16()},j*d("DateConsts").MS_PER_SEC)},a)};b.$18=function(a,b){this.$15();b=Date.now()-b;a.d!=null?(this.$1.logHttpRequestSuccess(b),this.$11!=null&&this.$11(a.d)):this.$1.logHttpResponseBad("no data field",b);if(a.a!=null){b=a.a.t;switch(b){case"p":b=a.a.pi;b==null&&(b=j);this.$14(b*d("DateConsts").MS_PER_SEC);break;case"s":this.$10=!0;break}}};b.$17=function(){var a=this.$19();if(a==null)return null;a={d:JSON.stringify(a)};return c("cometAsyncFetch")(c("XVideoUnifiedCVCControllerRouteBuilder").buildURL({}),{data:a,method:"POST"})};b.$19=function(){if(this.$3==null)return null;var a={};this.$6!=null&&(a.lc=this.$6);this.$5&&(a.ls=!0);var b=0,c=0;this.$2!=null&&(b=this.$2,c=this.$3.getPlayheadPosition());var d=this.$3.getCurrentState();b=this.$1.makeUnifiedVideoCVCUpdate(b,c,this.$20(d),d.muted,a);return b};b.$20=function(a){if(a.playing||a.seeking)return"playing";else if(a.ended)return"ended";else if(a.paused)return"paused";else return"unknown"};b.testing_setLastStartPosition=function(a){this.$2=a};b.testing_makeUnifiedStateUpdate=function(){return this.$19()};b.testing_handleUnifiedResponse=function(a){return this.$18(a,Date.now())};return a}();g["default"]=a}),98);
__d("VideoLiveTrace",["DataViewReader","LiveTraceWwwVideoPlayerFalcoEvent","Mp4DASHEventMessageBox","Mp4Demuxer","throttle"],(function(a,b,c,d,e,f,g){var h="x-fb-video-livetrace-ids",i="x-fb-video-livetrace-parentsource",j="x-fb-video-livetrace-streamtype",k="x-fb-origin-hit",l="x-fb-edge-hit",m="PLY:WWW:",n=m+"DL:",o=m+"DIS:",p=1e3,q=/[\r\n]+/;a=function(){function a(a,b,d){var e=this;this.$6=[];this.$1=a;this.$2=null;a=d+":"+b.substring(0,5);this.$3=m+a;this.$4=n+a;this.$5=o+a;this.$7=c("throttle")(function(a){return e.$8(a)},p)}var b=a.prototype;b.setStreamType=function(a){this.$2=a};b.$9=function(a,b,d,e,f,g){var h,i=this,j=Date.now(),k=(h=this.$2)!=null?h:0;c("LiveTraceWwwVideoPlayerFalcoEvent").log(function(){return{stream_id:i.$1,stream_type:k,event_name:b,event_severity:f,event_creation_time:j,source:a,trace_id:d,parent_source:e,metadata:g}})};b.onUpdateStatus=function(a){this.$7(a)};b.$8=function(a){a=a.position*1e3;for(var b=this.$6.length-1;b>=0;b--){var c=this.$6[b];if(c.presentationTimestamp>a)continue;if(c.displayTimestamp==null)c.displayTimestamp=Date.now();else continue;this.$9(this.$5,"FRAME",c.traceId,this.$4,"SUCCESS",null)}};b.getAndFlushTracedFrames=function(){var a,b={currentTimeMs:Date.now(),streamId:this.$1},c={dl:[],dis:[]},d=[];this.$6.forEach(function(a){a.hasBeenFlushedAsDownloaded||(c.dl.push({id:a.traceId,timeMs:a.downloadTimestamp}),a.hasBeenFlushedAsDownloaded=!0),a.displayTimestamp!=null?c.dis.push({id:a.traceId,timeMs:a.displayTimestamp}):d.push(a)});this.$6=d;b[(a=this.$2)!=null?a:0]=c;return c.dl.length>0||c.dis.length>0?b:null};b.handleHeadersString=function(a,b){a=a.trim().split(q);this.$10(a.map(function(a){a=a.split(": ");return[a.shift().toLowerCase(),a.shift()]}),b)};b.handleHeaders=function(a,b){this.$10(this.$11(a),b)};b.handleHeadersAndBody=function(a,b,c){this.$12(this.$11(a),b,c)};b.$11=function(a){var b=[];for(var a=a.entries(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b.push(e)}return b};b.$13=function(a){var b=Date.now(),d=new Map(),e=a.reduce(function(a,b){return a+b.byteLength},0),f=new Uint8Array(e),g=0;a.forEach(function(a){f.set(a,g),g+=a.byteLength});e=new(c("Mp4Demuxer"))(new DataView(f.buffer,f.byteOffset,f.byteLength));while(!e.atEnd()){a=e.parseBox();if(a.getType()===c("Mp4DASHEventMessageBox").canonicalType){var h=e.parseCanonicalBox(c("Mp4DASHEventMessageBox"),e.parseFullBox(a));if(h instanceof c("Mp4DASHEventMessageBox")){var i;i=(i=h.getEmsgFields())==null?void 0:i.schemeIdUri;if(i==null?void 0:i.startsWith("livedash:trace:")){i=h.getMessageData();h=new(c("DataViewReader"))(i).readZeroTerminatedString(i.byteLength);try{i=JSON.parse(h);Array.isArray(i)&&i.filter(function(a){return Array.isArray(a)&&a.length===2}).forEach(function(a){var c=a[0];a=a[1];d.set(c,{displayTimestamp:null,downloadTimestamp:b,hasBeenFlushedAsDownloaded:!1,presentationTimestamp:a,traceId:c})})}catch(a){}}}}e.skipBox(a)}return d};b.$14=function(a,b){var c=this,d="null",e=Date.now(),f=new Map(),g="";a.forEach(function(a){var b=a[0].toLowerCase();a=a[1];if(b===h&&a){var m=a.split(",");m.forEach(function(a){a=a.split(":");var b=+a[0];a=+a[1];f.set(b,{displayTimestamp:null,downloadTimestamp:e,hasBeenFlushedAsDownloaded:!1,presentationTimestamp:a,traceId:b})})}b===i&&(g=a);c.$2===null&&b===j&&(c.$2=parseInt(a,10));(b===k||b===l)&&parseInt(a,10)&&(d=b===k?"origin":"edge")});a=b||{};a.hit=d;return g!==""?{tracedFrames:f,eventMetaData:a,parentSource:g,streamType:this.$2}:null};b.$12=function(a,b,c){var d=this.$14(a,c);if(d==null||d.parentSource==="")return;if(b==null?void 0:b.length){a=this.$13(b);a.forEach(function(a,b){d.tracedFrames.set(b,a)})}this.$6=this.$6.concat(Array.from(d.tracedFrames.values()));c=d.tracedFrames.keys();for(b=c,a=Array.isArray(b),c=0,b=a?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(a){if(c>=b.length)break;e=b[c++]}else{c=b.next();if(c.done)break;e=c.value}e=e;this.$9(this.$4,"SEGMENT",e,d.parentSource,"SUCCESS",d.eventMetaData)}};b.$10=function(a,b){this.$12(a,null,b)};b.handleXHR=function(a,b){this.handleHeadersString(a.getAllResponseHeaders(),b)};b.getLiveTraceContext=function(){return this.$2!=null?{streamId:this.$1,streamType:this.$2,sourceId:this.$3}:null};return a}();g["default"]=a}),98);
__d("VideoMimeTypes",[],(function(a,b,c,d,e,f){function a(a,b,c){return a+'; codecs="'+b+", "+c+'"'}e="mp4a.40.2";function b(a){return"avc1.42E0"+a.toString(16).toUpperCase()}function c(a){return"avc1.4D40"+a.toString(16).toUpperCase()}function d(a){return"avc1.6400"+a.toString(16).toUpperCase()}var g="video/mp4";b=a(g,b(30),e);var h=a(g,c(30),e);c=a(g,c(31),e);var i=a(g,d(50),e);a=a(g,d(51),e);g={h264baseline:b,h264main30avc:h,h264main31avc:c,h264high50avc:i,h264high51avc:a};f["default"]=g}),66);
__d("VideoPlayerWwwFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1914651");b=d("FalcoLoggerInternal").create("video_player_www",a);e=b;g["default"]=e}),98);
__d("VideoPlayerWwwLogger",["VideoPlayerWwwFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b,c=a.logData.live_trace_stream_id!==null&&a.logData.live_trace_stream_type!==null;return{access_token:a.logData.access_token,ad_client_token:a.logData.ad_client_token,attribution_id:a.logData.attribution_id,attribution_id_v2:a.logData.attribution_id_v2,attribution_id_v2_root:a.logData.attribution_id_v2_root,audio_only:a.logData.audio_only,audio_representation_id:a.logData.audio_representation_id,autoplay_eligible:a.logData.autoplay_eligible,autoplay_failure_reasons:a.logData.autoplay_failure_reasons,autoplay_setting:a.logData.autoplay_setting,available_qualities:a.logData.available_qualities,broadcaster_origin:a.logData.broadcaster_origin,browser_tab_id:a.logData.browser_tab_id,caption_state:a.logData.caption_state,cast_client_app_id:a.logData.cast_client_app_id,client_latency_setting:a.logData.client_latency_setting,current_playback_speed:a.logData.current_playback_speed,current_viewability_percentage:Number(a.logData.current_viewability_percentage),current_volume:a.logData.current_volume,dash_perf_logging_enabled:a.logData.dash_perf_logging_enabled,data_connection_quality:a.logData.data_connection_quality,debug_reason:a.logData.debug_reason,device_id:a.logData.device_id,device_type:a.logData.device_type,dropped_frame_count:Number(a.logData.dropped_frame_count),error:a.logData.error,error_code:a.logData.error_code,error_description:a.logData.error_description,error_domain:a.logData.error_domain,error_type:a.logData.error_type,error_user_info:a.logData.error_user_info,event_name:a.eventType,event_seq_num:a.logData.event_seq_num,external_log_id:a.logData.external_log_id,external_log_type:a.logData.external_log_id,fb_manifest_identifier:a.logData.fb_manifest_identifier,feed_aggregation_type:a.logData.feed_aggregation_type,feed_position:a.logData.feed_position,frame_events:a.logData.frame_events,ft:a.logData.ft,imf_emsg_id:a.logData.imf_emsg_id,imf_event_type:a.logData.imf_event_type,imf_topic:a.logData.imf_topic,interrupt_count:a.logData.interrupt_count!==null?Number(a.logData.interrupt_count):null,interrupt_time:Number(a.logData.interrupt_time),is_abr_enabled:a.logData.is_abr_enabled,is_fbms:a.logData.is_fbms,is_live_preview:(b=a.logData.is_live_preview)!=null?b:!1,is_live_video_rewound:a.logData.is_live_video_rewound,is_p2p_playback:a.logData.is_p2p_playback,is_pip:a.logData.is_pip,is_predictive_playback:a.logData.is_predictive_playback,is_sound_on:a.logData.is_sound_on,is_stalling:a.logData.is_stalling,is_templated_manifest:a.logData.is_templated_manifest,last_viewability_percentage:Number(a.logData.last_viewability_percentage),live_trace_source_id:a.logData.live_trace_source_id,live_trace_stream_id:c?a.logData.live_trace_stream_id:null,live_trace_stream_type:c?a.logData.live_trace_stream_type:null,mpd_validation_errors:a.logData.mpd_validation_errors,network_connected:a.logData.network_connected,next_representation_id:a.logData.next_representation_id,notification_id:a.logData.notification_id,notification_medium:a.logData.notification_medium,offset_ms:a.logData.offset_ms!=null?String(a.logData.offset_ms):null,permalink_share_id:a.logData.permalink_share_id,playback_caption_format:a.logData.playback_caption_format,playback_caption_locale:a.logData.playback_caption_locale,playback_duration:a.logData.playback_duration,playback_is_broadcast:a.logData.playback_is_broadcast,playback_is_drm:a.logData.playback_is_drm,playback_is_live_streaming:a.logData.playback_is_live_streaming,player_format:a.logData.player_format,player_instance_key:a.logData.player_instance_key,player_mode:a.logData.player_mode,player_origin:a.logData.player_origin,player_state:a.logData.player_state,player_suborigin:a.logData.player_suborigin,player_version:a.logData.player_version,reaction_video_channel_type:a.logData.reaction_video_channel_type,representation_id:a.logData.representation_id,resource_url:a.logData.resource_url,routeTracePolicy:a.routeTracePolicy,seq_num:a.logData.seq_num,source:a.source_VPL_LOGGING_HACK,source_VPL_LOGGING_HACK:a.logData.source_VPL_LOGGING_HACK,srt_job_id:a.logData.srt_job_id,srt_job_tracking_id:a.logData.srt_job_tracking_id,stall_count:Number(a.logData.stall_count),stall_count_200_ms:Number(a.logData.stall_count_200_ms),stall_time:Number(a.logData.stall_time),state:a.logData.state,streaming_format:a.logData.streaming_format,time_ms:a.logData.time_ms,total_frame_count:Number(a.logData.total_frame_count),tracking_data_encrypted:a.logData.tracking_data_encrypted,tracking_nodes:a.logData.tracking_nodes,tv_session_id:a.logData.tv_session_id,v2_heart_beat:a.logData.v2_heart_beat,video_bandwidth:a.logData.video_bandwidth,video_buffer_end_position:a.logData.video_buffer_end_position,video_chaining_depth_level:a.logData.video_chaining_depth_level,video_chaining_parent_video_id:a.logData.video_chaining_parent_video_id,video_chaining_session_id:a.logData.video_chaining_session_id,video_channel_id:a.logData.video_channel_id,video_id:a.logData.video_id,video_last_start_time_position:a.logData.video_last_start_time_position,video_play_reason:a.logData.video_play_reason,video_player_height:Number(a.logData.video_player_height),video_player_width:Number(a.logData.video_player_width),video_time_position:a.logData.video_time_position,vpts:a.logData.vpts,web_client_revision:a.logData.web_client_revision}}a={logComet:function(a){c("VideoPlayerWwwFalcoEvent").log(function(){return h(a)})},logCometImmediately:function(a){c("VideoPlayerWwwFalcoEvent").logImmediately(function(){return h(a)})}};b=a;g["default"]=b}),98);
__d("VideoPlayerBanzaiLogFlusher",["VideoPlayerWwwLogger","emptyFunction","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=c("emptyFunction");b=function(){function a(a){this.$1=a}var b=a.prototype;b.flushLogs=function(){var a=this.$1.consumeLoggerEvents();a.forEach(function(a){var b={event:a.eventType,logData:a.logData,routeTracePolicy:a.routeTracePolicy,source:a.source_VPL_LOGGING_HACK};if(a.source_VPL_LOGGING_HACK==="animated_image_share")return;b=(b=a.logData)==null?void 0:b.ad_client_token;b!=null?c("VideoPlayerWwwLogger").logCometImmediately(a):c("VideoPlayerWwwLogger").logComet(a)})};b.discardLogsWithoutFlushing=function(){var a=this.$1.consumeLoggerEvents()};return a}();g["default"]=b}),98);
__d("VideoPlayerCaptionsDisplayConfigContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({liveCaptionsTextAlignment:null,textSizeMapping:null});g["default"]=b}),98);
__d("VideoPlayerCaptionsDisplay.react",["VideoPlayerCaptionsDisplayConfigContext","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerHooks","react","recoverableViolation","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i.useContext,m={captionsCenterAlign:{justifyContent:"xl56j7k",textAlign:"x2b8uid",$$css:!0},captionsContainer:{bottom:"xfqi8uc",boxSizing:"x9f619",display:"x78zum5",justifyContent:"xl56j7k",position:"x10l6tqk",textAlign:"x2b8uid",transitionDuration:"xu6gjpd",transitionProperty:"x11xpdln",transitionTimingFunction:"x1r7x56h",width:"xh8yej3",$$css:!0},captionsDefault:{backgroundColor:"x18l40ae",color:"x14ctfv",fontSize:"x1lkfr7t",fontWeight:"xk50ysn",lineHeight:"x37zpob",marginTop:"xdj266r",marginEnd:"xv81d3b",marginBottom:"xat24cr",marginStart:"x5jn1jc",paddingTop:"xulzisn",paddingEnd:"x1msn8f2",paddingBottom:"x1uwfbks",paddingStart:"x1qobr7z",$$css:!0},captionsLeftAlign:{justifyContent:"x1nhvcw1",textAlign:"x1yc453h",$$css:!0},captionsRightAlign:{justifyContent:"x13a6bvl",textAlign:"xp4054r",$$css:!0}},n={BIG:"25px",BIGGER:"30px",BIGGEST:"34px",DEFAULT:"17px",MEDIUM:"21px",SMALL:"13px",SMALLEST:"8px"},o={DARK:.75,DEFAULT:.45,LIGHT:.25,OPAQUE:1,TRANSPARENT:0},p={BLACK:"20, 22, 26",BLUE:"0, 0, 255",CYAN:"0, 255, 255",GREEN:"0, 255, 0",MAGENTA:"255, 0, 255",RED:"255, 0, 0",WHITE:"255, 255, 255",YELLOW:"255, 255, 0"};function q(a){switch(a){case"center":return m.captionsCenterAlign;case"left":return m.captionsLeftAlign;case"right":return m.captionsRightAlign;default:c("recoverableViolation")("Unsupported captions text alignment: "+a,"comet_video_player")}}function r(a,b,c){var d={},e=a.captionsBackgroundColor,f=a.captionsBackgroundOpacity,g=a.captionsTextColor;a=a.captionsTextSize;if(e!==null){f=f!==null?o[f]:1;d.backgroundColor="rgba("+p[e]+","+f+")"}g!==null&&(d.color="rgba("+p[g]+")");a!==null&&(d.fontSize=b!=null?babelHelpers["extends"]({},n,b)[a]:n[a]);c&&(d.marginBottom=35);return d}function a(a){var b=a.activeCaptions,e=a.adjustments;a=a.captionDisplayStyle;var f=b==null?void 0:b.rows,g=l(c("VideoPlayerCaptionsDisplayConfigContext")),i=g.liveCaptionsTextAlignment;g=g.textSizeMapping;var n=l(d("VideoPlayerControlsBottomRowAddOnContext").VideoPlayerControlsBottomRowAddOnContext);n=(n==null?void 0:n.getBottomRowAddOn())!=null;var o={};a&&(o=r(a,g,n));a=(j||(j=d("VideoPlayerHooks"))).useIsLive();b=(n=b==null?void 0:(g=b.styles)==null?void 0:g.textAlignment)!=null?n:"center";if(f!=null&&f.length>0){g=f.map(function(a){return a.trim()}).filter(function(a){return!!a});return g.length>0?k.jsx("div",{className:(h||(h=c("stylex")))(m.captionsContainer,q(a?(n=i)!=null?n:b:b)),style:{paddingLeft:e.left,paddingRight:e.right,transform:"translateY("+-e.bottom+"px)"},children:k.jsx("div",{className:"x18l40ae x14ctfv x1lkfr7t xk50ysn x37zpob xdj266r xv81d3b xat24cr x5jn1jc xulzisn x1msn8f2 x1uwfbks x1qobr7z",style:o,children:g.map(function(a,b){return k.jsxs("span",{children:[a,k.jsx("br",{})]},b)})})}):null}return null}a.displayName=a.name+" [from "+f.id+"]";b=k.memo(a);e=b;g["default"]=e}),98);
__d("useVideoPlayerCaptionsDisplayAdjustments",["VideoPlayerHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useMemo;function a(){var a=(i||(i=d("VideoPlayerHooks"))).useVideoPlayerCaptionsReservations();return j(function(){var b={bottom:0,left:0,right:0,top:0};a.length>0&&a.forEach(function(a){b[a.location]+=a.size});return b},[a])}g["default"]=a}),98);
__d("VideoPlayerCaptions.react",["VideoPlayerCaptionsDisplay.react","VideoPlayerHooks","react","useVideoPlayerCaptionsDisplayAdjustments"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(){var a=(i||(i=d("VideoPlayerHooks"))).useActiveCaptions(),b=c("useVideoPlayerCaptionsDisplayAdjustments")(),e=i.useCaptionDisplayStyle();return j.jsx(c("VideoPlayerCaptionsDisplay.react"),{activeCaptions:a,adjustments:b,captionDisplayStyle:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerCaptionsArea.react",["VideoPlayerCaptions.react","VideoPlayerContexts","VideoPlayerHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));b=h;var l=b.useReducer,m=b.useState;function n(a,b){switch(b.type){case"reserve":return a.concat(b.reservation);case"release":return a.filter(function(a){return a!==b.reservation});default:return a}}function a(a){a=a.children;var b=l(n,[]),e=b[0],f=b[1];b=m({release:function(a){f({reservation:a,type:"release"})},reserve:function(a){f({reservation:a,type:"reserve"});return a}});b=b[0];var g=(i||(i=d("VideoPlayerHooks"))).useCaptionsVisible();return k.jsx((j||(j=d("VideoPlayerContexts"))).VideoPlayerCaptionsReservationActionsContext.Provider,{value:b,children:k.jsxs(j.VideoPlayerCaptionsReservationsContext.Provider,{value:e,children:[g?k.jsx(c("VideoPlayerCaptions.react"),{}):null,a]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerCaptionsController",["JSResourceForInteraction","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("VideoPlayerHTML5ApiCea608State").__setRef("VideoPlayerCaptionsController"),i=c("JSResourceForInteraction")("VideoPlayerHTML5ApiWebVttState").__setRef("VideoPlayerCaptionsController");function a(a){var b=a.captionsUrl,d=a.inbandCaptionsExpected,e=a.onCaptionsLoaded,f=null,g=null,j=null,k=null;function l(a){var b=i.load().then(function(c){if(b!==j)return;f=new c({captionsDisplay:null,onCaptionsLoaded:e,onReady:function(b){b.loadFromUrl(a)}})})["catch"](function(a){if(b!==j)return;c("recoverableViolation")("Failed to load the VideoPlayerHTML5ApiWebVttState module: "+a.message,"comet_video_player")});return b}function m(){var a=h.load().then(function(b){if(a!==k)return;g=new b({captionsDisplay:null,onCaptionsLoaded:e,onReady:function(a){a.processQueue()}})})["catch"](function(b){if(a!==k)return;c("recoverableViolation")("Failed to load the VideoPlayerHTML5ApiCea608State module: "+b.message,"comet_video_player")});return a}b!=null?j=l(b):d===!0&&(k=m());return{destroy:function(){f&&(f.destroy(),f=null),g&&(g.destroy(),g=null),j&&(j=null),k&&(k=null)},getCaptionFormat:function(){return f?"webvtt":g?"cea608":null},handleCea608BytesReceived:function(a){g&&g.enqueueBytes(a)},handleTimeUpdate:function(a){if(f){var b;f.source&&f.source.handleTimeUpdate(a);return(b=(b=f)==null?void 0:b.getCurrentScreenRepresentation())!=null?b:null}else if(g){g.source&&g.source.handleTimeUpdate(a);return(a=(b=g)==null?void 0:b.getCurrentScreenRepresentation())!=null?a:null}return null},updateCaptionsUrl:function(a){f&&(f.destroy(),f=null),a!=null&&(j=l(a))},updateInbandCaptionsExpected:function(a){g&&(g.destroy(),g=null),a&&(k=m())}}}g.createCaptionsController=a}),98);
__d("isSSR",["ExecutionEnvironment","XPlatReactEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;a=d("XPlatReactEnvironment").isWeb()&&!(h||(h=c("ExecutionEnvironment"))).canUseDOM;b=a;g["default"]=b}),98);
__d("VideoPlayerConnectionQuality",["isSSR"],(function(a,b,c,d,e,f,g){"use strict";var h={POOR:"POOR",MODERATE:"MODERATE",GOOD:"GOOD",EXCELLENT:"EXCELLENT"},i=[{bandwidth:5e5,connectionQuality:h.POOR},{bandwidth:2e6,connectionQuality:h.MODERATE},{bandwidth:1e7,connectionQuality:h.GOOD}],j=100,k=null,l=null;a=function(a){if(c("isSSR"))return"MODERATE";if(k!==null&&l!==null&&k>=Date.now()-j)return l;a=a();var b=null;if(a!=null)for(var d=0;d<i.length;d++)if(a<i[d].bandwidth){b=i[d].connectionQuality;break}b===null&&(b=h.EXCELLENT);k=Date.now();l=b;return b};g.evaluate=a}),98);
__d("VideoPlayerDebugAutoplayAPI",["cr:1453865","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";d=(a=b("cr:1453865"))!=null?a:{useVideoPlayerDebugAPI:c("emptyFunction").thatReturns(null),useVideoPlayerDebugAPIDefinition:c("emptyFunction"),useVideoPlayerDebugInfo:c("emptyFunction").thatReturns(null)};g["default"]=d}),98);
__d("VideoPlayerDefaultControls_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerDefaultControls_video",selections:[{args:null,kind:"FragmentSpread",name:"VideoPlayerDefaultControlsImplLive_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerDefaultControlsImplNotLive_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("VideoPlayerFullscreenControl.react",["fbt","ix","VideoPlayerControlIcon.react","VideoPlayerHooks","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||d("react");function a(a){var b=a.onPress,e=a.onUserInteraction,f=a.shouldUnmute,g=(k||(k=d("VideoPlayerHooks"))).useController(),j=k.useIsFullscreen(),m=k.useLastMuteReason();a=j?h._("__JHASH__hwf7JoNGQNh__JHASH__"):h._("__JHASH__5hSxdUd3nQi__JHASH__");var n=function(){b&&b(),g.requestSetIsFullscreen(!j),f===!0&&m!=="user_initiated"&&g.setMuted(!1,"product_initiated"),e&&e({name:"video_fullscreen_button",type:"happened"})};return l.jsx(c("VideoPlayerControlIcon.react"),{icon:j?d("fbicon")._(i("517758"),20):d("fbicon")._(i("517763"),20),label:a,onPress:n,tooltip:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useVideoPlayerDefaultControlsVisibility",["VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerUserInteractionCounter","clearTimeout","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useState,l=5e3;function a(a){a=a===void 0?{}:a;var b=a.forceVisible,e=a.forceVisibleOnMount;a.isInteracting;a=d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteractionCounter();var f=a.ongoingInteractionsCount;a=a.onUserInteraction;var g=(i||(i=d("VideoPlayerHooks"))).useEnded(),h=i.useIsHovering(),m=i.usePaused(),n=i.useIsMouseIdle(),o=i.useVideoPlaybackEnded(),p=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsIsStart();d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_pointer_active",h&&!n,a);h=k(e===!0);var q=h[0],r=h[1];j(function(){if(!m&&q){var a=c("setTimeout")(function(){r(!1)},l);return function(){c("clearTimeout")(a)}}},[q,m]);b===!0||b===!1?n=b:p?n=!1:f>0||q?n=!0:m?n=g?o:!0:n=!1;return{isControlsVisible:n,onUserInteraction:a}}g["default"]=a}),98);
__d("VideoPlayerDefaultControls.react",["CometPlaceholder.react","CometRelay","CometWarningScreenContext","VideoPlayerDefaultControlsProperties","VideoPlayerDefaultControls_video.graphql","VideoPlayerFullscreenControl.react","VideoPlayerHooks","cr:1875194","deferredLoadComponent","emptyFunction","react","requireDeferred","useVideoPlayerBigPlayButtonOverlay","useVideoPlayerDefaultControlsVisibility"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||d("react"),l=(e=b("cr:1875194"))!=null?e:c("emptyFunction"),m=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerDefaultControlsImplLive.react").__setRef("VideoPlayerDefaultControls.react")),n=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerDefaultControlsImplNotLive.react").__setRef("VideoPlayerDefaultControls.react"));function a(a){var e,f=a.forceVisible,g=a.forceVisibleOnMount,i=a.mutedButtonVisibility,o=a.pictureInPictureControl,p=a.renderExpandControl,q=a.shouldRenderBigPlayButton,r=a.shouldRenderCaptionsControl,s=a.shouldRenderCostreamControl,t=a.shouldRenderExpandSidePanelControl,u=a.shouldRenderLivePauseControl,v=a.shouldRenderModeratorControl,w=a.shouldRenderQuietModeControl;a.shouldRenderSkipControl;var x=a.shouldRenderWatchAndScrollControl,y=a.shouldUnmuteForBigPlayButton,z=a.skipControl,A=a.subOrigin,B=a.video;a=a.videoTahoeUrl;B=d("CometRelay").useFragment(h!==void 0?h:h=b("VideoPlayerDefaultControls_video.graphql"),B);e=(e=d("CometWarningScreenContext").useIsContentVisible())!=null?e:!1;var C=l();C=C!=null?C.isSilentAtPlayhead:!1;var D=(j||(j=d("VideoPlayerHooks"))).useMuted(),E=j.useIsLive();g=c("useVideoPlayerDefaultControlsVisibility")({forceVisible:f,forceVisibleOnMount:g});var F=g.isControlsVisible;g=g.onUserInteraction;q=c("useVideoPlayerBigPlayButtonOverlay")({forceVisible:q!=null?q:f===!1?!1:void 0,shouldUnmute:y});f=q.bigPlayButtonElement;y=q.bigPlayButtonIsVisible;q=F&&!y&&e;F=i===d("VideoPlayerDefaultControlsProperties").MutedButtonVisibility.SAME_AS_OTHER_CONTROLS?q:(D||q||C)&&!y;e=p!=null?p({onUserInteraction:g}):k.jsx(c("VideoPlayerFullscreenControl.react"),{onUserInteraction:g});i=E?k.jsx(m,{expandControl:e,isControlsVisible:q,isVolumeControlVisible:F,onUserInteraction:g,pictureInPictureControl:o,shouldRenderCaptionsControl:r,shouldRenderCostreamControl:s,shouldRenderExpandSidePanelControl:t,shouldRenderModeratorControl:v,shouldRenderPauseControl:u,shouldRenderQuietModeControl:w,shouldRenderWatchAndScrollControl:x,subOrigin:A,video:B,videoTahoeUrl:a}):k.jsx(n,{expandControl:e,isControlsVisible:q,isVolumeControlVisible:F,onUserInteraction:g,shouldRenderCaptionsControl:r,shouldRenderExpandSidePanelControl:t,shouldRenderQuietModeControl:w,shouldRenderWatchAndScrollControl:x,skipControl:z,subOrigin:A,video:B,videoTahoeUrl:a});return k.jsxs(k.Fragment,{children:[f,k.jsx(c("CometPlaceholder.react"),{fallback:null,children:i})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerEmsgForStateMachine",["deepEquals"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c;return[a.type,a.emsgScheme,(c=a.emsgId)!=null?c:""].concat(b?[(c=a.emsgStartTimeInSec)!=null?c:"",(b=a.emsgDurationInSec)!=null?b:""]:[]).join(":")}function i(a,b){a.set(h(b,!0),b);return a}function a(a,b){return b.reduce(i,new Map(a))}function b(a,b,d){a=b==null?[]:Array.from(a.values()).filter(function(a){var c=a.emsgStartTimeInSec;a=a.emsgDurationInSec||0;return c!=null&&b>=c&&b<c+a}).sort(function(a,b){return(a.emsgStartTimeInSec||0)-(b.emsgStartTimeInSec||0)});a=Array.from(a.reduce(function(a,b){a.set(h(b,!1),b);return a},new Map()).values());return c("deepEquals")(d,a)?d:a}g.makeEmsgBoxDedupKey=h;g.makeUpdatedAllEmsgBoxes=a;g.makeUpdatedActiveEmsgBoxes=b}),98);
__d("VideoPlayerFallbackLearnMoreLink.react",["fbt","CometLink.react","TetraText.react","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=c("gkx")("20836")?"/help/work/1876956335887765/i-cant-view-or-play-videos-on-workplace":"https://www.facebook.com/help/396404120401278/list";return j.jsx(c("TetraText.react"),{color:"primaryOnMedia",type:"headlineEmphasized3",children:j.jsx(c("CometLink.react"),{href:a,target:"_blank",children:h._("__JHASH__GWeGP0j1NWF__JHASH__")})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerFallbackCoverImplWithoutRetry.react",["TetraText.react","VideoPlayerFallbackLearnMoreLink.react","cr:1672302","cr:4149","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={background:{bottom:"x1ey2m1c",end:"xds687c",left:null,right:null,position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},banner:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"xdt5ytf",width:"x3es6ox",$$css:!0},bannerLinkContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"xdt5ytf",marginTop:"xw7yly9",maxWidth:"x193iq5w",$$css:!0},bannerTextContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"xdt5ytf",maxWidth:"x193iq5w",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"xatbrnm",boxSizing:"x9f619",display:"x78zum5",height:"x5yr21d",justifyContent:"xl56j7k",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x889kno",paddingEnd:"x1iji9kk",paddingBottom:"x1a8lsjc",paddingStart:"x1sln4lm",position:"x1n2onr6",width:"xh8yej3",$$css:!0},showOverBackground:{zIndex:"x1vjfegm",$$css:!0}};function a(a){var d=a.background,e=a.debugError,f=a.message,g=a.showDebugWithoutError;g=g===void 0?!0:g;a=a.showLearnMoreLink;a=a===void 0?!0:a;return j.jsxs("div",{className:"x6s0dn4 xatbrnm x9f619 x78zum5 x5yr21d xl56j7k x6ikm8r x10wlt62 x889kno x1iji9kk x1a8lsjc x1sln4lm x1n2onr6 xh8yej3",children:[j.jsxs("div",{className:(h||(h=c("stylex")))([k.banner,d!=null&&k.showOverBackground]),children:[j.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf x193iq5w",children:j.jsx(c("TetraText.react"),{align:"center",color:"primaryOnMedia",type:"bodyLink3",children:f})}),a&&j.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf xw7yly9 x193iq5w",children:j.jsx(c("VideoPlayerFallbackLearnMoreLink.react"),{})}),(e!=null||g)&&j.jsxs(j.Fragment,{children:[b("cr:4149")?j.jsx(b("cr:4149"),{error:e}):null,b("cr:1672302")?j.jsx(b("cr:1672302"),{error:e}):null]})]}),d!=null&&j.jsx("div",{className:"x1ey2m1c xds687c x10l6tqk x17qophe x13vifvy",children:d})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerFallbackCover.react",["fbt","VideoPlayerFallbackCoverImplWithoutRetry.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.background,d=a.debugError,e=a.message,f=a.showDebugWithoutError;a=a.showLearnMoreLink;e=(e=e)!=null?e:h._("__JHASH__dzG08k88Xfs__JHASH__");return j.jsx(c("VideoPlayerFallbackCoverImplWithoutRetry.react"),{background:b,debugError:d,message:e,showDebugWithoutError:f,showLearnMoreLink:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerIMFMetadataContext",["react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j={imfExpectedFromEmsg:!1,specInlineJson:null},k=b.createContext(j);k.displayName="VideoPlayerIMFMetadataContext";e=k.Provider;function a(){var a=i(k);if(a===j)throw c("unrecoverableViolation")("useVideoPlayerIMFMetadata is not called from a component nested under VideoPlayerRelay/VideoPlayerX.","comet_video_player");return a}g.VideoPlayerIMFMetadataContextProvider=e;g.useVideoPlayerIMFMetadataFromContext=a}),98);
__d("VideoPlayerImplementationReactVideoElement.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.alt,c=a.implementationExposedState,d=a.poster,e=a.seoWebCrawlerVideoTracks,f=a.src,g=a.videoElementCallbacks,h=a.videoElementPreloadDisabled,j=a.videoElementRefCallback;a=a.videoPixelsFit;var k=c.hasPlayEverBeenRequested;c=c.isExternalMedia;c=c&&!k?null:f;return i.jsx("video",babelHelpers["extends"]({"aria-label":(k=b)!=null?k:void 0,className:"x1lliihq x5yr21d xh8yej3",controls:!1,muted:!0,playsInline:!0,preload:h===!0?"none":void 0},g,{poster:d,ref:j,src:c,style:a?{objectFit:a.objectFit}:void 0,children:e}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerImplementationErrorNormalization",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.getType(),c=a.getDescription();switch(b){case"OZ_NETWORK":b=(b=(b=a.getExtra())==null?void 0:b.code)!=null?b:"0";b=parseInt(b,10);return b<100||b>599?"NetworkError":"HTTPError";case"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":a=(b=a.getExtra())==null?void 0:b.mimeType;if(a!=null&&a.indexOf("video")>-1)return"VideoDecodeError";else if(a!=null&&a.indexOf("audio")>-1)return"AudioDecodeError";else return"GenericDecodeError";case"OZ_XML_PARSER":case"OZ_MPD_PARSER":case"OZ_REPRESENTATION_PARSER":return"ManifestParseError";case"OZ_DRM_MANAGER":case"OZ_INITIALIZATION":if(/(OZ_XML_PARSER)|(OZ_MPD_PARSER)|(OZ_REPRESENTATION_PARSER)/.test(c))return"ManifestParseError";else return"RuntimeError";case"OZ_JAVASCRIPT_NATIVE":case"OZ_SOURCE_BUFFER":case"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR":case"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR":return"RuntimeError"}return null}function b(a,b){switch(a){case"OZ_XML_PARSER":case"OZ_MPD_PARSER":case"OZ_REPRESENTATION_PARSER":return"ManifestParseError";case"OZ_DRM_MANAGER":case"OZ_INITIALIZATION":if(/(OZ_XML_PARSER)|(OZ_MPD_PARSER)|(OZ_REPRESENTATION_PARSER)/.test(b))return"ManifestParseError";else return"RuntimeError";case"OZ_JAVASCRIPT_NATIVE":case"OZ_SOURCE_BUFFER":case"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR":case"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR":return"RuntimeError";case"BUFFERING_TIMEOUT":return"RuntimeError";default:b=[[["MEDIA_ERR_NETWORK"],"NetworkError"],[["MEDIA_ERR_ABORTED","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_UNKNOWN"],"GenericDecodeError"]];for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];if(f.some(function(b){return a.includes(b)}))return e}}return null}f.getVideoPlayerNormalizedErrorTypeFromOzError=a;f.getErrorTypeFromErrorName=b}),66);
__d("getErrorMessageFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"The fetching process for the media resource was aborted by the user agent at the users request.";case 2:return"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return"The media resource indicated by the src attribute was not suitable."}return null}f["default"]=a}),66);
__d("getErrorNameFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"MEDIA_ERR_UNKNOWN_"+((a=a)!=null?a:"UNDEFINED")}}f["default"]=a}),66);
__d("VideoPlayerImplementationErrors",["VideoPlayerImplementationErrorNormalization","getErrorMessageFromMediaErrorCode","getErrorNameFromMediaErrorCode","getErrorSafe","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b;a=/^([A-Z_]+:)|([A-Z_]+\s+\(0x[0-9A-Fa-f]+\))/.exec(a);a=((b=(b=a==null?void 0:a[1])!=null?b:a==null?void 0:a[2])!=null?b:"").replace(/\s+/,"_").replace(/[^A-Za-z0-9_]/g,"");return a!==""?a:null}function a(a){var b=a.errorLocation,d=a.hostCallError,e=a.videoElementError,f=a.videoElementNetworkState;a=a.videoElementReadyState;var g=e==null?void 0:e.code,h=d!=null&&typeof d.message==="string"?d.message:null;h==null&&(h=e==null?void 0:e.message);h==null&&g!=null&&(h=c("getErrorMessageFromMediaErrorCode")(g));e=c("getErrorNameFromMediaErrorCode")(g);return{createdTimestamp:Date.now(),errorLocation:b,errorMessageFormat:((b=h)!=null?b:"Empty error")+("; code: "+((h=g)!=null?h:"undefined"))+("; readyState: "+a)+("; networkState: "+f),errorMessageParams:[],errorName:e,originalError:d}}function b(a,b){var d=c("getErrorSafe")(a);return{createdTimestamp:Date.now(),errorCode:typeof a==="object"&&a!=null?typeof a.code==="string"?a.code:typeof a.code==="number"?String(a.code):void 0:void 0,errorLocation:b,errorMessageFormat:(a=d.messageFormat)!=null?a:d.message,errorMessageParams:d.messageFormat!=null?(b=d.messageParams)!=null?b:[]:[],errorName:"VideoElementPlayPromiseRejectionReason_"+(d.name||"UnknownError")}}function i(a,b,d,e){e===void 0&&(e=null);b=c("getErrorSafe")(b);return{createdTimestamp:Date.now(),errorCode:null,errorLocation:d,errorMessageFormat:(b.name||"UnknownError")+" "+((d=b.messageFormat)!=null?d:b.message),errorMessageParams:b.messageFormat!=null?(d=b.messageParams)!=null?d:[]:[],errorName:a,stack:b.stack,url:(d=e)!=null?d:null}}function e(a,b){if(d("oz-player/utils/OzErrorUtils").isOzError(a)){var c=a,e=c.getExtra();return{createdTimestamp:Date.now(),errorCode:e.code,errorLocation:b,errorMessageFormat:c.getDescription(),errorMessageParams:[],errorName:c.getType(),errorType:d("VideoPlayerImplementationErrorNormalization").getVideoPlayerNormalizedErrorTypeFromOzError(c),stack:c.stack,url:e.url}}else return i("OZ_JAVASCRIPT_NATIVE",a,b)}function f(a,b){var c=h(a.message);c=c!=null?a.name+"_"+c:a.name;a=a.message;var d=[];return{createdTimestamp:Date.now(),errorLocation:b,errorMessageFormat:a,errorMessageParams:d,errorName:c,errorType:"GenericDecodeError"}}g.getMoreGranularErrorNameFromHTMLVideoElementErrorMessage=h;g.createVideoPlayerErrorFromHTMLVideoElementError=a;g.createVideoPlayerErrorFromVideoElementPlayPromiseRejectionReason=b;g.createVideoPlayerErrorFromGenericError=i;g.createVideoPlayerErrorFromOzImplementationError=e;g.createVideoPlayerErrorFromOzImplementationVideoNodeError=f}),98);
__d("VideoPlayerODS",["ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,b,c){d("Random").coinflip(c)&&(h||(h=d("ODS"))).bumpEntityKey(2079,a,b,c)};g.bumpEntityKey=a}),98);
__d("VideoPlayerImplementationStateMachine",["VideoPlayerEmsgForStateMachine","VideoPlayerImplementationErrors","VideoPlayerODS","gkx","recoverableViolation","shallowEqual","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.bufferingDetected,c=a.seeking;a=a.waitingForDomPlaying;return!b&&!c&&!a}function i(a){var b=a.bufferingDetected,d=a.prevPlaybackState,e=a.seeking;a=a.waitingForDomPlaying;b=h({bufferingDetected:b,seeking:e,waitingForDomPlaying:a});e=d;switch(d){case"stalling":e=b?"playing":"stalling";break;case"ended":case"paused":case"playing":break;default:d;c("recoverableViolation")("unexpected playbackState: "+d,"comet_video_player");break}return e}function j(a){return a.loopCount>0&&a.loopCurrent<a.loopCount||a.loopCount===-1}function k(a,b,e){switch(e.type){case"host_call_pause":case"host_call_play":case"host_call_set_current_time":case"host_call_set_volume":case"host_call_set_muted":case"host_call_set_playback_rate":case"host_call_set_video_quality":case"host_call_set_latency_level":return babelHelpers["extends"]({},a,{hostCallQueue:a.hostCallQueue.concat([e])});case"controller_set_latency_level_requested":case"implementation_set_latency_level_requested":return babelHelpers["extends"]({},a,{latencyLevel:e.payload.latencyLevel,ullIneligibilityReason:e.payload.ullIneligibilityReason});case"controller_override_player_format":return babelHelpers["extends"]({},a,{overriddenPlayerFormat:a.playerFormat,playerFormat:e.payload.playerFormat});case"controller_set_player_format":return babelHelpers["extends"]({},a,{playerFormat:e.payload.playerFormat});case"dom_event_ended":return babelHelpers["extends"]({},a,{playbackState:"ended",waitingForDomPlaying:!1});case"dom_event_pause":if(a.playbackState==="ended")return a;if(b.videoElementEnded===!0)return babelHelpers["extends"]({},a,{playbackState:"ended",waitingForDomPlaying:!1});return a.playbackState==="paused"?a:babelHelpers["extends"]({},a,{playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play":var f=a.playbackState,g=f;switch(f){case"playing":case"stalling":case"ended":case"paused":g="stalling";break;default:f;c("recoverableViolation")("unexpected playbackState: "+f,"comet_video_player");break}f=!0;return babelHelpers["extends"]({},a,{playbackState:g,waitingForDomPlaying:f});case"dom_event_playing":g=a.bufferingDetected;f=a.seeking;var h=!1,k=a.playbackState;return babelHelpers["extends"]({},a,{playbackState:i({bufferingDetected:g,prevPlaybackState:k,seeking:f,waitingForDomPlaying:h}),waitingForDomPlaying:h});case"dom_event_timeupdate":g=d("VideoPlayerEmsgForStateMachine").makeUpdatedActiveEmsgBoxes(a.allEmsgBoxes,b.videoElementPlayheadPosition,a.activeEmsgBoxes);if(a.waitingForDomTimeUpdateAfterSeeked){k=a.bufferingDetected;f=a.seeking;h=!1;var l=a.playbackState;return babelHelpers["extends"]({},a,{activeEmsgBoxes:g,playbackState:i({bufferingDetected:k,prevPlaybackState:l,seeking:f,waitingForDomPlaying:h}),waitingForDomPlaying:h,waitingForDomTimeUpdateAfterSeeked:!1})}return babelHelpers["extends"]({},a,{activeEmsgBoxes:g});case"dom_event_seeking":k=a.playbackState;l=k;switch(k){case"paused":case"ended":break;case"stalling":case"playing":l="stalling";break;default:k,c("recoverableViolation")("unexpected playbackState: "+k,"comet_video_player")}return babelHelpers["extends"]({},a,{playbackState:l,seeking:!0,waitingForDomPlaying:!0});case"dom_event_seeked":f=a.bufferingDetected;h=a.waitingForDomPlaying;g=!1;k=a.playbackState;return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:null,playbackState:i({bufferingDetected:f,prevPlaybackState:k,seeking:g,waitingForDomPlaying:h}),seeking:g,waitingForDomTimeUpdateAfterSeeked:!0});case"dom_event_error":e.payload.videoElementError==null&&d("VideoPlayerODS").bumpEntityKey("comet_video_player","dom_event_error.error_is_nullish",14);return babelHelpers["extends"]({},a,{playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play_promise_created":return babelHelpers["extends"]({},a,{hostCallPlayIDLast:e.payload.hostCallPlayID});case"dom_event_play_promise_resolved":return a.hostCallPlayIDLast!==e.payload.hostCallPlayID?a:babelHelpers["extends"]({},a,{hostCallPlayIDLast:null});case"dom_event_play_promise_rejected":return a.hostCallPlayIDLast!==e.payload.hostCallPlayID?a:babelHelpers["extends"]({},a,{hostCallPlayIDLast:null,playbackState:a.playbackState==="stalling"?"paused":a.playbackState,waitingForDomPlaying:!1});case"implementation_host_call_queue_flushed":return babelHelpers["extends"]({},a,{hostCallQueue:[]});case"implementation_host_call_failed":l=d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromHTMLVideoElementError({errorLocation:e.payload.errorLocation,hostCallError:e.payload.hostCallError,videoElementError:e.payload.videoElementError,videoElementNetworkState:e.payload.videoElementNetworkState,videoElementReadyState:e.payload.videoElementReadyState});return babelHelpers["extends"]({},a,{error:l,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_mounted":return babelHelpers["extends"]({},a,{mountState:"mounted_onscreen"});case"implementation_unmounted":return babelHelpers["extends"]({},a,{mountState:"unmounted"});case"implementation_onscreen":return babelHelpers["extends"]({},a,{mountState:"mounted_onscreen"});case"implementation_offscreen":return babelHelpers["extends"]({},a,{mountState:"mounted_offscreen"});case"implementation_video_node_unmounted":return babelHelpers["extends"]({},a,{hostCallPlayIDLast:null});case"implementation_engine_initialized":k=(f=e.payload.streamingFormat)!=null?f:a.streamingFormat;return babelHelpers["extends"]({},a,{availableAudioTracks:e.payload.availableAudioTracks,availableQualities:e.payload.availableQualities,availableVideoTracks:e.payload.availableVideoTracks,selectedAudioTrackID:e.payload.selectedAudioTrackID,selectedVideoQuality:e.payload.selectedVideoQuality,streamingFormat:k,targetVideoQuality:e.payload.targetVideoQuality,videoProjection:e.payload.videoProjection});case"implementation_engine_representation_blocked":return babelHelpers["extends"]({},a,{availableQualities:e.payload.availableQualities});case"implementation_engine_qualities_changed":g=(h=e.payload.streamingFormat)!=null?h:a.streamingFormat;return babelHelpers["extends"]({},a,{availableAudioTracks:e.payload.availableAudioTracks,availableQualities:e.payload.availableQualities,selectedAudioTrackID:e.payload.selectedAudioTrackID,selectedVideoQuality:e.payload.selectedVideoQuality,streamingFormat:g,targetVideoQuality:e.payload.targetVideoQuality,videoProjection:e.payload.videoProjection});case"implementation_engine_destroyed":return babelHelpers["extends"]({},a,{hostCallPlayIDLast:null});case"implementation_fatal_error":return babelHelpers["extends"]({},a,{error:e.payload.fatalError,hostCallPlayIDLast:null,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_seek_requested":return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:e.payload.seekSourcePosition});case"representation_changed":return babelHelpers["extends"]({},a,{targetVideoQuality:e.payload.targetVideoQuality});case"controller_pause_requested":return a.playbackState==="ended"?a:babelHelpers["extends"]({},a,{lastPausedTimeMs:Date.now(),lastPauseReason:e.payload.reason,lastPlayedTimeMs:0,playbackState:"paused",waitingForDomPlaying:!1,watchTimeMs:a.lastPlayedTimeMs>0?a.watchTimeMs+(Date.now()-a.lastPlayedTimeMs):a.watchTimeMs});case"controller_play_requested":return a.playbackState!=="paused"&&a.playbackState!=="ended"?a:babelHelpers["extends"]({},a,{hasPlayEverBeenRequested:!0,lastPlayedTimeMs:a.lastPlayedTimeMs===0?Date.now():a.lastPlayedTimeMs,lastPlayReason:e.payload.reason,loopCurrent:j(a)?e.payload.reason==="loop_initiated"?a.loopCurrent+1:a.loopCurrent:0,playbackState:"stalling",waitingForDomPlaying:!0});case"controller_seek_requested":return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:(l=b.videoElementPlayheadPosition)!=null?l:a.implementationSeekSourcePosition,seeking:!0,seekTargetPosition:e.payload.seekTargetPosition});case"controller_audio_track_requested":return babelHelpers["extends"]({},a,{selectedAudioTrackID:e.payload.selectedAudioTrackID});case"controller_quality_requested":return babelHelpers["extends"]({},a,{selectedVideoQuality:e.payload.selectedVideoQuality});case"controller_set_caption_display_style_requested":return babelHelpers["extends"]({},a,{captionDisplayStyle:e.payload.captionDisplayStyle});case"controller_set_picture_in_picture_state_requested":return babelHelpers["extends"]({},a,{isDesktopPictureInPicture:e.payload.isInPictureInPictureMode});case"controller_set_caption_format_requested":return babelHelpers["extends"]({},a,{captionFormat:e.payload.captionFormat});case"controller_set_playback_rate":return babelHelpers["extends"]({},a,{targetPlaybackRate:e.payload.playbackRate});case"controller_muted_requested":return babelHelpers["extends"]({},a,{lastMuteReason:e.payload.reason,muted:e.payload.muted});case"controller_volume_requested":return babelHelpers["extends"]({},a,{volume:e.payload.volume});case"controller_scrub_begin_requested":return a.scrubbing?a:babelHelpers["extends"]({},a,{scrubbing:!0,seekTargetPosition:null});case"controller_scrub_end_requested":return!a.scrubbing?a:babelHelpers["extends"]({},a,{implementationSeekSourcePosition:(f=b.videoElementPlayheadPosition)!=null?f:a.implementationSeekSourcePosition,scrubbing:!1,seeking:e.payload.seekTargetPosition!=null,seekTargetPosition:e.payload.seekTargetPosition});case"buffering_begin_requested":k=a.playbackState;h=k;switch(k){case"paused":case"ended":break;case"playing":case"stalling":h="stalling";break;default:k;c("recoverableViolation")("unexpected playbackState: "+k,"comet_video_player");break}g=e.payload.bufferingType;return babelHelpers["extends"]({},a,{bufferingDetected:!0,lastBufferingType:g,playbackState:h});case"buffering_end_requested":l=a.seeking;f=a.waitingForDomPlaying;k=!1;g=a.playbackState;return babelHelpers["extends"]({},a,{bufferingDetected:k,playbackState:i({bufferingDetected:k,prevPlaybackState:g,seeking:l,waitingForDomPlaying:f})});case"controller_set_captions_visible_requested":h=e.payload.captionsVisible;return a.captionsVisible===h?a:babelHelpers["extends"]({},a,{activeCaptions:h?a.activeCaptions:null,captionsLocale:h?a.captionsLocale:null,captionsVisible:h});case"controller_set_active_captions_requested":k=e.payload.activeCaptions;l=(g=k==null?void 0:k.rows)!=null?g:[];f=e.payload.captionsLocale;h=a.activeCaptions;var m=(g=h==null?void 0:h.rows)!=null?g:[];return m.length===l.length&&l.every(function(a,b){return m[b]===a})?a:babelHelpers["extends"]({},a,{activeCaptions:k,captionsLocale:f});case"captions_loaded":return babelHelpers["extends"]({},a,{activeCaptions:a.activeCaptions,captionsLoaded:!0});case"captions_unloaded":return babelHelpers["extends"]({},a,{activeCaptions:null,captionsLoaded:!1,captionsLocale:null});case"inband_captions_autogenerated_changed":h=e.payload.inbandCaptionsAutogenerated;return a.inbandCaptionsAutogenerated===h?a:babelHelpers["extends"]({},a,{inbandCaptionsAutogenerated:h});case"stream_ended":return babelHelpers["extends"]({},a,{streamEnded:!0});case"stream_gone_before_start":return babelHelpers["extends"]({},a,{playbackState:"ended",streamEnded:!0,waitingForDomPlaying:!1});case"stream_interrupted":return babelHelpers["extends"]({},a,{streamInterrupted:!0});case"stream_resumed":return babelHelpers["extends"]({},a,{streamInterrupted:!1});case"seekable_ranges_changed":g=e.payload.seekableRanges;return babelHelpers["extends"]({},a,{seekableRanges:g});case"controller_set_is_live_rewind_active_requested":l=e.payload.isLiveRewindActive;return babelHelpers["extends"]({},a,{isLiveRewindActive:l});case"loop_count_change_requested":k=e.payload.loopCount;return k===a.loopCount?a:babelHelpers["extends"]({},a,{loopCount:k,loopCurrent:0});case"player_dimensions_changed":f=e.payload.dimensions;h=f.height;g=f.width;return g===a.dimensions.width&&h===a.dimensions.height?a:babelHelpers["extends"]({},a,{dimensions:{height:h,width:g}});case"emsg_boxes_parsed":l=d("VideoPlayerEmsgForStateMachine").makeUpdatedAllEmsgBoxes(a.allEmsgBoxes,e.payload.emsgBoxes);k=d("VideoPlayerEmsgForStateMachine").makeUpdatedActiveEmsgBoxes(l,b.videoElementPlayheadPosition,a.activeEmsgBoxes);return babelHelpers["extends"]({},a,{activeEmsgBoxes:k,allEmsgBoxes:l});case"register_emsg_observer":f=new Set(a.emsgObserverTokens);f.add(e.payload.token);return babelHelpers["extends"]({},a,{emsgObserverTokens:f});case"unregister_emsg_observer":h=new Set(a.emsgObserverTokens);h["delete"](e.payload.token);return babelHelpers["extends"]({},a,{emsgObserverTokens:h});default:return a}}function l(a,b,d){var e=b.type!=="dom_seeking";e=e?d:a.uncontrolledState;d=!c("shallowEqual")(e,a.uncontrolledState);b=k(a.controlledState,e,b);var f=!c("shallowEqual")(b,a.controlledState);return d||f?babelHelpers["extends"]({},a,{controlledState:f?b:a.controlledState,uncontrolledState:d?e:a.uncontrolledState}):a}var m,n;function o(a){var b=a.collectUncontrolledState,d=a.debugLogId;d=a.initialState;var e=a.onDispatched,f=a.onFatalError,g=d,h=g,i=0,j=!1,k=!1,m=!0,n=!0;return{dispatch:function(a){if(!n)return;var d=null,g=null;try{++i;if(i>=10)if(!j){j=!0;throw c("unrecoverableViolation")("Video player state machine loop detected","comet_video_player")}else return;var o=h.uncontrolledState;if(m)try{o=b()}catch(a){m=!1,g=a}var p=h;o=l(p,a,o);h=o;e(p,o,a)}catch(a){n=!1,d=a}finally{if(!k&&(d!=null||g!=null)){k=!0;try{f((p=d)!=null?p:g)}catch(a){}}--i}},getCurrentState:function(){return h},getInitialState:function(){return g}}}var p,q;function a(a){var b=a.collectUncontrolledState,c=a.debugLogId,d=a.initialState,e=a.onFatalError,f=a.stateTransitionHandlers;function g(a,b,c){try{var d=!0,e=0;while(d&&e<f.length){var g=f[e];d=g(a,b,c);++e}}finally{}}return o({collectUncontrolledState:b,debugLogId:c,initialState:d,onDispatched:g,onFatalError:e})}function b(a,b){function c(){}function d(a){return a}function e(c){return function(e){var f=d(e.currentTarget);b(f,["reactEvent("+e.type+")"]);a.dispatch(c)}}function f(c){return function(e){var f=d(e.currentTarget);b(f,["reactEvent("+e.type+")"]);a.dispatch(c(e,f))}}return{onAbort:c,onCanPlay:c,onCanPlayThrough:c,onDurationChange:e({type:"dom_event_durationchange"}),onEmptied:c,onEncrypted:c,onEnded:e({type:"dom_event_ended"}),onError:f(function(a,b){return{payload:{videoElementError:b.error,videoElementNetworkState:b.networkState,videoElementReadyState:b.readyState},type:"dom_event_error"}}),onLoadedData:c,onLoadedMetadata:c,onLoadStart:c,onPause:e({type:"dom_event_pause"}),onPlay:e({type:"dom_event_play"}),onPlaying:f(function(a){return{payload:{domEventPerfTimestamp:a.timeStamp},type:"dom_event_playing"}}),onProgress:e({type:"dom_event_progress"}),onRateChange:e({type:"dom_event_ratechange"}),onSeeked:e({type:"dom_event_seeked"}),onSeeking:e({type:"dom_event_seeking"}),onStalled:c,onSuspend:c,onTimeUpdate:e({type:"dom_event_timeupdate"}),onVolumeChange:e({type:"dom_event_volumechange"}),onWaiting:e({type:"dom_event_waiting"})}}g.createVideoPlayerImplementationStateMachine=o;g.createVideoPlayerImplementationStateMachineWithStateTransitionHandlers=a;g.createReactVideoElementCallbacksForStateMachine=b}),98);
__d("VideoPlayerImplementationStateMachineHostCallQueue",["cometUniqueID","emptyFunction","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";b=c("emptyFunction");function h(){return"id-vpdom-"+c("cometUniqueID")()}function i(a){var b=a.engineExtrasAPI,d=a.hostCall,e=a.machine;a=a.videoElementAPI;switch(d.type){case"host_call_play":var f=a.play();f&&(e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID},type:"dom_event_play_promise_created"}),c("promiseDone")(f.then(function(){e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID},type:"dom_event_play_promise_resolved"})},function(a){e.dispatch({payload:{hostCallPlayID:d.payload.hostCallID,playPromiseRejectionReason:a},type:"dom_event_play_promise_rejected"})})));break;case"host_call_pause":a.pause();break;case"host_call_set_playback_rate":a.setPlaybackRate(d.payload.playbackRate);break;case"host_call_set_muted":a.setMuted(d.payload.muted);break;case"host_call_set_volume":a.setVolume(d.payload.volume);break;case"host_call_set_current_time":a.setPlayheadPosition(d.payload.currentTime);break;case"host_call_set_audio_track":b.setUserSelectedAudioTrackID(d.payload.selectedAudioTrackID);break;case"host_call_set_video_quality":b.setUserSelectedVideoQuality(d.payload.selectedVideoQuality);break;case"host_call_set_latency_level":b.setLatencyLevel(d.payload.latencyLevel);break;case"host_call_picture_in_picture":a.requestPictureInPicture();break;case"host_call_exit_picture_in_picture":a.exitPictureInPicture();break;default:d.type;return!1}return!0}function j(a){var b=a.engineExtrasAPI,c=a.hostCall,d=a.machine;a=a.videoElementAPI;if(!a||!b)d.dispatch(c);else{var e=!1;try{e=i({engineExtrasAPI:b,hostCall:c,machine:d,videoElementAPI:a})}catch(b){d.dispatch({payload:{errorLocation:"apply_host_call_catch",hostCall:c,hostCallError:b,videoElementError:a.getError(),videoElementNetworkState:a.getNetworkState(),videoElementReadyState:a.getReadyState()},type:"implementation_host_call_failed"})}e&&d.dispatch({payload:{hostCall:c},type:"implementation_host_call_applied"})}}function k(a){var b=[];function c(){b=b.filter(function(a){return a.type!=="host_call_play"&&a.type!=="host_call_pause"})}function d(a){b=b.filter(function(b){return b.type!==a})}a.forEach(function(a){switch(a.type){case"host_call_play":c();break;case"host_call_pause":c();break;case"host_call_set_playback_rate":d(a.type);break;case"host_call_set_muted":d(a.type);break;case"host_call_set_volume":d(a.type);break;case"host_call_set_current_time":d(a.type);break;case"host_call_set_audio_track":d(a.type);break;case"host_call_set_video_quality":d(a.type);break;case"host_call_set_latency_level":d(a.type);break;case"host_call_picture_in_picture":d(a.type);break;case"host_call_exit_picture_in_picture":d(a.type);break;default:a.type}b=b.concat([a])});return b}function a(a){var b=a.engineExtrasAPI,c=a.machine,d=a.reason,e=a.state,f=a.videoElementAPI;a=[{payload:{hostCallID:h(),reason:d,volume:e.controlledState.volume},type:"host_call_set_volume"},{payload:{hostCallID:h(),muted:e.controlledState.muted,reason:d},type:"host_call_set_muted"},{payload:{hostCallID:h(),reason:d,selectedVideoQuality:e.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"},{payload:{hostCallID:h(),reason:d,selectedAudioTrackID:e.controlledState.selectedAudioTrackID},type:"host_call_set_audio_track"}];d=k(e.controlledState.hostCallQueue.concat(a));d.forEach(function(a){j({engineExtrasAPI:b,hostCall:a,machine:c,videoElementAPI:f})});c.dispatch({payload:{hostCallsFlushed:d},type:"implementation_host_call_queue_flushed"})}g.makeHostCallID=h;g.applyOrQueueHostCall=j;g.flushHostCallQueue=a}),98);
__d("VideoPlayerLoggerPlayerStates",[],(function(a,b,c,d,e,f){a="started";b="unpaused";c={STARTED:a,UNPAUSED:b};f["default"]=c}),66);
__d("VideoPlayerMutedStateChange",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.currMuted,c=a.currVolume,d=a.prevMuted;a=a.prevVolume;b=b||c===0;c=d||a===0;if(c===b)return null;return b?"muted":"unmuted"}f.getVideoPlayerMutedStateChange=a}),66);
__d("getPlayerFormatForLogData",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.isFullscreen;return a===!0?"full_screen":b!=null?b:"inline"}f["default"]=a}),66);
__d("getVideoBrowserTabId",["guid"],(function(a,b,c,d,e,f,g){var h=c("guid")().slice(-8);function a(){return h}g["default"]=a}),98);
__d("VideoPlayerImplementationStateMachineLogger",["CometProductAttribution","ErrorSerializer","NetworkStatus","PlaybackSpeedExperiments","SiteData","VideoMimeTypes","VideoPlayerConnectionQuality","VideoPlayerImplementationErrorNormalization","VideoPlayerLoggerPlayerStates","VideoPlayerMutedStateChange","VideoPlayerStateBasedLoggingEvents","emptyFunction","err","getPlayerFormatForLogData","getVideoBrowserTabId","gkx","justknobx","mapObject","performanceAbsoluteNow","qex","recoverableViolation","removeFromArray"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=6e4,k=(b=c("qex")._("1675"))!=null?b:0,l=1e3,m=null,n=function(a){var b;m=(b=m)!=null?b:document.createElement("video");return!("canPlayType"in m)?"":m.canPlayType(a)};e=c("emptyFunction");f=c("emptyFunction");b=c("emptyFunction");e=c("emptyFunction");var o=(f=d("PlaybackSpeedExperiments").enablePlaybackSpeedLogging())!=null?f:!1;function p(){return{canLogPausedOrFinishedPlaying:!1,canLogPlayingEvent:!0,debugSubscribers:[],dontLogPauseOnUnpausedSeeking:!1,errorRecoveryAttemptState:{currentRecoverableError:null,eventsLogged:0,repeatCount:0},hasLoggedStallData:!1,hasLoggedStartedPlaying:!1,hasPausedOnce:!1,hasPendingRequestedPlaying:!1,initialSuborigin:void 0,inPlayStallCount200ms:0,interruptCount:0,interruptDuration:0,interruptEndTimestamp:0,interruptStartTimestamp:0,isLoggingScrubbingSequence:!1,lastLoggedError:null,lastLoggedFullscreenState:!1,lastLoggedPlaybackSpeed:null,lastLoggedViewabilityPercentage:void 0,lastStartTimePosition:null,lastTrackedAudioRepresentation:null,lastTrackedVideoRepresentation:null,nextHeartbeatTime:null,nextPlayedThreeSecondsPlayheadPosition:null,sequenceNumber:0,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,shouldLogRequestedPlayingForScrub:!1,stallCount:0,stallCount200ms:0,stallCountTotal:0,stallDuration:0,stallDurationTotal:0,stallStartTimestamp:0,startStallCountTotal:0,startStallDurationTotal:0,vplEventSequenceNumber:0,warningState:{eventsLoggedPerKey:new Map(),eventsLoggedTotal:0,eventsMaxLoggedPerKey:function(){try{return Math.max(0,c("justknobx")._("1831")||0)}catch(a){return 0}}(),eventsMaxLoggedTotal:function(){try{return Math.max(0,c("justknobx")._("1832")||0)}catch(a){return 0}}()}}}function q(a,b){return b==="muted"||b==="unmuted"||b==="started_playing"||b==="caption_change"||b==="unpaused"?a.controlledState.captionsVisible?"on":"off":void 0}function a(a){var b=new Map(),e=a.initialLoggingMetaData,f=e,g=[],m=p(),r=new Set(c("VideoPlayerStateBasedLoggingEvents").StateBasedLoggingEventNames),s=!c("gkx")("646");function t(a){m.debugSubscribers.push(a);return function(){c("removeFromArray")(m.debugSubscribers,a)}}function u(a){m.debugSubscribers.forEach(function(b){return b(a)})}function v(a){var b=m.stallStartTimestamp;if(b>0){m.stallCount+=1;m.stallCountTotal+=1;m.hasPendingRequestedPlaying&&(m.startStallCountTotal+=1);a=a-b;b=a>200;m.stallDurationTotal+=a;m.stallDuration+=a;m.stallCount200ms+=b?1:0;m.inPlayStallCount200ms+=b&&!m.hasPendingRequestedPlaying?1:0;m.hasPendingRequestedPlaying&&(m.startStallDurationTotal+=a)}}function w(a,b){a=a.uncontrolledState.videoElementPlayheadPosition==null?null:a.uncontrolledState.videoElementPlayheadPosition;var c=null;switch(b){case"paused":case"cancelled_requested_playing":case"finished_playing":case"heart_beat":case"playback_speed_changed":case"representation_ended":c=m.lastStartTimePosition;break;case"scrubbed":c=a;break;default:break}switch(b){case"paused":case"cancelled_requested_playing":case"finished_playing":case"scrubbed":m.lastStartTimePosition=null;break;case"started_playing":case"unpaused":case"heart_beat":case"playback_speed_changed":case"representation_ended":m.lastStartTimePosition=a;break;default:break}return{video_last_start_time_position:c}}function x(a,b){var c=b.uncontrolledState.clockTimestamp;a=a.controlledState.streamInterrupted;b=b.controlledState.streamInterrupted;!a&&b?m.interruptStartTimestamp=c:a&&!b&&m.interruptStartTimestamp>0&&(m.interruptEndTimestamp=c,m.interruptCount+=1,m.interruptDuration+=m.interruptEndTimestamp-m.interruptStartTimestamp)}function y(a,b,c){var d=b.uncontrolledState.clockTimestamp;a=a.controlledState.playbackState;var e=b.controlledState.playbackState;a!=="stalling"&&e==="stalling"&&(u("stall_start"),m.stallStartTimestamp=d);if(a==="stalling"&&e!=="stalling"){d=0;(c.type==="dom_event_playing"||c.type==="buffering_end_requested")&&c.payload.domEventPerfTimestamp!=null&&(d=Math.max(b.uncontrolledState.perfTimestamp-c.payload.domEventPerfTimestamp,0));v(b.uncontrolledState.clockTimestamp-d);m.stallStartTimestamp=0;u("stall_end")}}function z(a,b,c){a=b.uncontrolledState;b=a.videoElementPlayheadPosition;switch(c){case"unpaused":case"started_playing":m.nextPlayedThreeSecondsPlayheadPosition=((a=b)!=null?a:0)+3;break;case"paused":case"finished_playing":m.nextPlayedThreeSecondsPlayheadPosition=null;break;default:break}}function A(a,b,c){if(m.interruptCount>0&&m.interruptDuration>0){a={interrupt_count:m.interruptCount,interrupt_time:m.interruptDuration};m.interruptCount=0;m.interruptDuration=0;m.interruptStartTimestamp=0;m.interruptEndTimestamp=0;return a}return{interrupt_count:null,interrupt_time:null}}function B(a,b,c){var d={stall_count:null,stall_count_200_ms:null,stall_time:null},e=b.uncontrolledState.clockTimestamp,f=function(){var a={stall_count:m.stallCount,stall_count_200_ms:m.stallCount200ms,stall_time:m.stallDuration};m.stallCount=0;m.stallCount200ms=0;m.stallDuration=0;m.stallStartTimestamp=0;return a};a=a.controlledState.playbackState;var g=b.controlledState.playbackState;a!=="stalling"&&g==="stalling"&&(m.stallStartTimestamp=e);switch(c){case"started_playing":case"unpaused":case"finished_playing":case"paused":case"cancelled_requested_playing":case"playback_speed_changed":case"representation_ended":v(b.uncontrolledState.clockTimestamp);d=f();break;case"heart_beat":b.controlledState.playbackState!=="stalling"&&(v(b.uncontrolledState.clockTimestamp),d=f());break;default:break}return d}function C(a,b,c){a=b.controlledState.playbackState==="paused"&&a.controlledState.playbackState==="stalling";return c>0&&(b.controlledState.playbackState==="stalling"||a)}function D(a,b){a=a.current;var c=null;switch(b){case"finished_playing":case"paused":case"heart_beat":a&&(c=a.getAndFlushTracedFrames());return c!=null?JSON.stringify(c):null;default:return null}}function E(a){a=a.controlledState.playbackState;switch(a){case"playing":case"stalling":return"playing";case"paused":return"paused";case"ended":return"finished";default:a;return"unknown"}}function F(a){switch(a){case"normal":return"normal";case"low":return"low";case"ultra-low":return"ultra_low";default:return null}}function G(){return{state:m.hasLoggedStartedPlaying?c("VideoPlayerLoggerPlayerStates").UNPAUSED:c("VideoPlayerLoggerPlayerStates").STARTED}}function H(a){if((a==null?void 0:a.v2)&&(a==null?void 0:a.v2.length)>0){var b=a==null?void 0:a.v2;b=b[b.length-1];return[b["class"],b.module].map(d("CometProductAttribution").filterEntryValue).join(":")}return(a=a==null?void 0:(b=a.v2)==null?void 0:b.map(function(a){return[a["class"],a.module].map(d("CometProductAttribution").filterEntryValue).join(":")}).join(";"))!=null?a:""}function I(f){var i,j=f.eventType,k=f.logDataOverrides,l=f.prevState,n=f.state;f=w(n,j);f=f.video_last_start_time_position;var p=B(l,n,j),t=p.stall_count,u=p.stall_count_200_ms;p=p.stall_time;var v=A(l,n,j),x=v.interrupt_count;v=v.interrupt_time;var y=D(a.videoLiveTraceRef,j),G=[],I=a.initialLoggingMetaData.coreVideoPlayerMetaData.autoplayGatingResult;I&&G.push(I);I=j==="entered_fs"?!0:j==="exited_fs"?!1:m.lastLoggedFullscreenState;i=c("getPlayerFormatForLogData")({isDesktopPictureInPicture:(i=n.controlledState.isDesktopPictureInPicture)!=null?i:!1,isFullscreen:I},e.coreVideoPlayerMetaData.playerFormat);var J=n.uncontrolledState.viewabilityPercentage,K=Boolean(n.uncontrolledState.isFBIsLiveTemplated),L=Boolean(n.uncontrolledState.isFBWasLive),M=n.uncontrolledState.videoElementPlaybackRate;M=M==null||M===0?m.lastLoggedPlaybackSpeed:M;var N=a.initialLoggingMetaData.productAttribution;if(i==="watch_scroll"&&N&&N.v2){var O,P={0:babelHelpers["extends"]({},N["0"]),v2:[babelHelpers["extends"]({},N.v2[0])]};O=(O=e.productAttribution)==null?void 0:(O=O.v2)==null?void 0:O[0];if(O){var Q=P.v2[0];Q["class"]=O["class"];Q.scope_id=O.scope_id;Q.ts=O.ts}N=P}Q=null;O=null;Q=N!=null?d("CometProductAttribution").minifyProductAttributionV2(N):null;O=N!=null?H(N):null;P=C(l,n,(P=p)!=null?P:0);O={access_token:a.initialLoggingMetaData.accessToken,ad_client_token:e.coreVideoPlayerMetaData.adClientToken,attribution_id:N!=null&&Object.prototype.hasOwnProperty.call(N,"0")?JSON.stringify({0:N["0"]}):null,attribution_id_v2:Q,attribution_id_v2_root:O,audio_only:e.coreVideoPlayerMetaData.audioOnly,audio_representation_id:n.uncontrolledState.audioRepresentationID,autoplay_eligible:a.initialLoggingMetaData.coreVideoPlayerMetaData.canAutoplay==="allow",autoplay_failure_reasons:JSON.stringify(G),autoplay_setting:a.initialLoggingMetaData.coreVideoPlayerMetaData.autoplaySetting,available_qualities:n.controlledState.availableQualities.length,broadcaster_origin:a.initialLoggingMetaData.coreVideoPlayerMetaData.broadcasterOrigin,browser_tab_id:c("getVideoBrowserTabId")(),caption_state:q(n,j),client_latency_setting:F(n.controlledState.latencyLevel),current_playback_speed:o?M:null,current_viewability_percentage:J,dash_perf_logging_enabled:e.coreVideoPlayerMetaData.VideoPlayerShakaPerformanceLoggerClass!=null&&e.coreVideoPlayerMetaData.VideoPlayerShakaPerformanceLoggerClass.isEnabled(),data_connection_quality:d("VideoPlayerConnectionQuality").evaluate(function(){return n.uncontrolledState.estimatedBandwidth}),dropped_frame_count:n.uncontrolledState.videoElementDroppedFrameCount,external_log_id:e.coreVideoPlayerMetaData.externalLogID,external_log_type:e.coreVideoPlayerMetaData.externalLogType,fb_manifest_identifier:n.uncontrolledState.manifestIdentifier,frame_events:y,interrupt_count:x,interrupt_time:v,is_abr_enabled:n.isAbrEnabled,is_fbms:n.uncontrolledState.isFBMS,is_live_video_rewound:n.controlledState.isLiveRewindActive,is_pip:n.controlledState.isDesktopPictureInPicture,is_predictive_playback:n.uncontrolledState.isPredictiveDash,is_sound_on:!n.controlledState.muted,is_stalling:P,is_templated_manifest:K||L,last_viewability_percentage:m.lastLoggedViewabilityPercentage,mpd_validation_errors:n.uncontrolledState.mpdValidationErrors,network_connected:n.uncontrolledState.networkConnected,playback_caption_format:n.controlledState.captionFormat,playback_caption_locale:n.controlledState.captionsLocale,playback_duration:n.uncontrolledState.videoElementDuration,playback_is_broadcast:a.initialLoggingMetaData.coreVideoPlayerMetaData.isVideoBroadcast,playback_is_drm:Boolean(a.initialLoggingMetaData.coreVideoPlayerMetaData.graphQLVideoDRMInfo),playback_is_live_streaming:a.initialLoggingMetaData.coreVideoPlayerMetaData.isLiveStreaming,player_format:i,player_instance_key:e.instanceKey,player_origin:e.coreVideoPlayerMetaData.playerOriginOverride,player_state:E(n),player_suborigin:e.coreVideoPlayerMetaData.subOrigin,player_version:n.playerVersion,representation_id:n.uncontrolledState.videoRepresentationID,source_VPL_LOGGING_HACK:e.coreVideoPlayerMetaData.source_VPL_LOGGING_HACK,stall_count:t,stall_count_200_ms:u,stall_time:p,streaming_format:n.controlledState.streamingFormat,total_frame_count:n.uncontrolledState.videoElementTotalFrameCount,tracking_data_encrypted:a.initialLoggingMetaData.trackingDataEncrypted,tracking_nodes:a.initialLoggingMetaData.trackingNodes,v2_heart_beat:c("gkx")("24377")&&j==="heart_beat"?!0:null,video_bandwidth:n.uncontrolledState.estimatedBandwidth,video_buffer_end_position:n.uncontrolledState.videoElementLastBufferEndPosition,video_id:e.coreVideoPlayerMetaData.videoFBID,video_last_start_time_position:f,video_play_reason:n.controlledState.lastPlayReason,video_player_height:(N=e.dimensions)==null?void 0:N.height,video_player_width:(Q=e.dimensions)==null?void 0:Q.width,video_time_position:n.uncontrolledState.videoElementPlayheadPosition,web_client_revision:c("SiteData").client_revision};G=c("gkx")("24378")&&j==="error_recovery_attempt"?null:r.has(j)?++m.sequenceNumber:null;y={event_seq_num:++m.vplEventSequenceNumber,seq_num:G,time_ms:Date.now(),vpts:(h||(h=c("performanceAbsoluteNow")))()};var R={};b.forEach(function(a,b){R[b]=a});x=e.coreVideoPlayerMetaData.additionalLogData;v=babelHelpers["extends"]({},x,R);P=babelHelpers["extends"]({},v,O,k,y);L=(K=m.initialSuborigin)!=null?K:e.coreVideoPlayerMetaData.subOrigin;t=(i=P.source_VPL_LOGGING_HACK)!=null?i:L;p=(u=e.coreVideoPlayerMetaData.initialTracePolicy)!=null?u:e.coreVideoPlayerMetaData.routeTracePolicy;f={eventType:j,logData:P,routeTracePolicy:p,source_VPL_LOGGING_HACK:t};g.push(f);s&&z(l,n,j);m.initialSuborigin==null&&L!=null&&(m.initialSuborigin=L);m.lastLoggedFullscreenState=I;m.lastLoggedPlaybackSpeed=M;j==="viewability_changed"&&(m.lastLoggedViewabilityPercentage=J)}var J={};function K(a,b,c){I({eventType:"requested_playing",logDataOverrides:babelHelpers["extends"]({},c,G()),prevState:a,state:b});m.hasPendingRequestedPlaying=!0;m.canLogPausedOrFinishedPlaying=!0;return J}function L(a,b,c){if(!m.canLogPausedOrFinishedPlaying)return J;else if(m.hasPendingRequestedPlaying){M(a,b,c);m.canLogPausedOrFinishedPlaying=!1;m.hasPendingRequestedPlaying=!1;return J}else{I({eventType:"paused",logDataOverrides:babelHelpers["extends"]({},c,{error_user_info:JSON.stringify({is_document_hidden:b.uncontrolledState.isDocumentHidden})}),prevState:a,state:b});m.canLogPausedOrFinishedPlaying=!1;m.hasPendingRequestedPlaying=!1;return J}}function M(a,b,c){var d=b.uncontrolledState.liveTraceContext;c=babelHelpers["extends"]({},c,G(),{live_trace_source_id:d?d.sourceId:void 0,live_trace_stream_id:d?d.streamId:void 0,live_trace_stream_type:d?d.streamType:void 0});I({eventType:"cancelled_requested_playing",logDataOverrides:c,prevState:a,state:b});return J}function N(a,b,c){if(c.type==="dom_event_play_promise_rejected"&&c.payload.hostCallPlayID===a.controlledState.hostCallPlayIDLast&&b.controlledState.hostCallPlayIDLast==null&&m.hasPendingRequestedPlaying){c=c.payload.playPromiseRejectionReason;if(c!=null&&c.name==="NotAllowedError"){M(a,b,{debug_reason:"not_allowed"});return J}else if(c!=null&&c.name==="AbortError"){M(a,b,{debug_reason:"aborted"});return J}else return J}else return J}function O(a,b,c){if((c.type==="controller_play_requested"||c.type==="dom_event_play"&&!m.shouldIgnoreDomPlay)&&a.controlledState.playbackState!==b.controlledState.playbackState){c=b.uncontrolledState.liveTraceContext;c=c?{live_trace_source_id:c.sourceId,live_trace_stream_id:c.streamId,live_trace_stream_type:c.streamType}:null;K(a,b,c);return J}else return J}function P(a,b,c){if(a.controlledState.playbackState==="stalling"&&b.controlledState.playbackState==="playing"&&m.canLogPlayingEvent){c=b.uncontrolledState.liveTraceContext;c=c?{live_trace_source_id:c.sourceId,live_trace_stream_id:c.streamId,live_trace_stream_type:c.streamType}:null;I({eventType:m.hasLoggedStartedPlaying?"unpaused":"started_playing",logDataOverrides:c,prevState:a,state:b});m.hasLoggedStartedPlaying=!0;m.canLogPlayingEvent=!1;m.hasPendingRequestedPlaying=!1;return J}else return J}function Q(a,b,c){var d=b.controlledState.playbackState,e=a.controlledState.playbackState;if(c.type==="controller_scrub_begin_requested"&&!a.controlledState.scrubbing&&d!=="paused"&&d!=="ended"){L(a,b);m.isLoggingScrubbingSequence=!0;return J}else if(!a.controlledState.seeking&&b.controlledState.seeking&&!m.isLoggingScrubbingSequence&&d!=="paused"&&d!=="ended"&&!m.hasPendingRequestedPlaying){L(a,b);m.shouldLogRequestedPlayingForScrub=!0;return J}else if(c.type==="controller_scrub_end_requested"&&a.controlledState.scrubbing&&d!=="paused"&&d!=="ended"){K(a,b,{video_time_position:c.payload.seekTargetPosition});return J}else if(a.controlledState.seeking&&!b.controlledState.seeking){m.shouldLogRequestedPlayingForScrub&&d!=="paused"&&d!=="ended"&&K(a,b);I({eventType:"scrubbed",prevState:a,state:b});m.isLoggingScrubbingSequence=!1;m.shouldLogRequestedPlayingForScrub=!1;e!=="paused"&&e!=="ended"&&(m.canLogPlayingEvent=!0);return J}else return J}function R(a,b,c){if(a.controlledState.playbackState!==b.controlledState.playbackState&&b.controlledState.playbackState==="ended"&&m.canLogPausedOrFinishedPlaying){I({eventType:"finished_playing",prevState:a,state:b});m.canLogPausedOrFinishedPlaying=!1;return J}else return J}function S(a,b,c){if((c.type==="controller_pause_requested"||c.type==="dom_event_pause"&&!m.shouldIgnoreDomPause)&&a.controlledState.playbackState!==b.controlledState.playbackState){L(a,b,{debug_reason:"paused"});return J}else return J}function T(a,b,d){var e=b.controlledState.playbackState;if(e!=="paused"&&e!=="ended"){c("gkx")("24379")&&d.type==="implementation_video_node_unmounted"?L(a,a,{debug_reason:"unloaded"}):(d.type==="implementation_unmounted"||d.type==="implementation_engine_destroy_requested")&&L(a,b,{debug_reason:"unloaded"});return J}else return J}function U(a,b,c){if(c.type==="implementation_engine_representation_blocked"){c=c.payload.blockedRepresentationID;I({eventType:"video_playback_fallback",logDataOverrides:{representation_id:c},prevState:a,state:b})}return J}function V(a,b,e){e=b.controlledState.muted;var f=b.controlledState.volume,g=a.controlledState.muted,h=a.controlledState.volume;e=d("VideoPlayerMutedStateChange").getVideoPlayerMutedStateChange({currMuted:e,currVolume:f,prevMuted:g,prevVolume:h});g={current_volume:Math.round(f*100)};switch(e){case"muted":I({eventType:"muted",logDataOverrides:g,prevState:a,state:b});return J;case"unmuted":I({eventType:"unmuted",logDataOverrides:g,prevState:a,state:b});return J;case null:if(h<f){I({eventType:"volume_increase",logDataOverrides:g,prevState:a,state:b});return J}else if(h>f){I({eventType:"volume_decrease",logDataOverrides:g,prevState:a,state:b});return J}else return J;default:e;c("recoverableViolation")('Unexpected mutedStateChange "'+e+'"',"comet_video_player");return J}}function W(a,b,c){c=b.uncontrolledState.videoRepresentationID;var d=m.lastTrackedVideoRepresentation,e=b.uncontrolledState.audioRepresentationID,f=m.lastTrackedAudioRepresentation,g=b.controlledState.playbackState,h=b.controlledState.seeking;!h&&g!=="paused"&&g!=="ended"&&d!=null&&d!==c?(I({eventType:"representation_ended",logDataOverrides:{next_representation_id:c,representation_id:d},prevState:a,state:b}),m.lastTrackedVideoRepresentation=c,u("quality_change")):d==null&&d!==c&&(m.lastTrackedVideoRepresentation=c);!h&&g!=="paused"&&g!=="ended"&&f!=null&&f!==e?(I({eventType:"representation_ended",logDataOverrides:{audio_representation_id:f,next_representation_id:e},prevState:a,state:b}),m.lastTrackedAudioRepresentation=e,u("audio_change")):f==null&&f!==e&&(m.lastTrackedAudioRepresentation=e);return J}function X(a,b){var d=a.controlledState.error;return{currentVideo:{audioStreamId:a.uncontrolledState.audioRepresentationID,dashAudioFormat:void 0,hasHD:void 0,hasRateLimit:void 0,hasSubtitles:a.controlledState.captionsLoaded,isDrm:Boolean(e.coreVideoPlayerMetaData.graphQLVideoDRMInfo),isHD:void 0,isLiveStream:e.coreVideoPlayerMetaData.isLiveStreaming,isRateLimited:void 0,liveManifestUrl:void 0,projection:void 0,resourceUrl:void 0,streamId:a.uncontrolledState.videoRepresentationID,streamType:a.controlledState.streamingFormat,tagHD:void 0,tagSD:void 0,videoID:e.coreVideoPlayerMetaData.videoFBID},player:{canPlayType:(i||(i=c("mapObject")))(c("VideoMimeTypes"),n),dimensions:e.dimensions?{height:e.dimensions.height,width:e.dimensions.width}:null,droppedFrames:a.uncontrolledState.videoElementDroppedFrameCount,initializationTime:void 0,initializationTimestamp:void 0,inPlayStallCount:void 0,inPlayStallTime:void 0,interruptCount:void 0,interruptTime:void 0,lastError:d,loggedError:m.lastLoggedError,stack:d==null?void 0:d.stack,stallCount:m.stallCount,stallTime:m.stallDuration,state:E(a),totalFrames:a.uncontrolledState.videoElementTotalFrameCount,version:a.playerVersion,videoSource:void 0,viewabilityPercentage:a.uncontrolledState.viewabilityPercentage},playerStateMachine:{action:b,state:a}}}function aa(a){var b=a.errorMessageFormat,c=a.errorName;a=a.errorCode==null||a.errorCode===""?c:a.errorCode;c=c+"#"+a+": "+ba(b);return c}function Y(a,b,e,f){a=X(a,b);b=e.errorMessageFormat;var g=e.errorMessageParams,h=e.errorName,i=e.errorType,j=e.url;e=e.errorCode==null||e.errorCode===""?h:e.errorCode;return{error:h,error_code:e,error_description:c("ErrorSerializer").toReadableMessage(c("err").apply(void 0,[b].concat(g))),error_domain:h,error_type:(e=i)!=null?e:d("VideoPlayerImplementationErrorNormalization").getErrorTypeFromErrorName(h,b),error_user_info:JSON.stringify(babelHelpers["extends"]({},a,f)),resource_url:j}}var ba=function(a){return a.replace(/([0-9]{2,})/g,function(a){var b="";while(b.length<a.length)b+="#";return b})};function ca(a,b,d){if(!c("gkx")("24360"))return J;if(d.type==="implementation_warning"){var e,f=d.payload.warningError,g=aa(f),h=m.warningState.eventsLoggedTotal;e=(e=m.warningState.eventsLoggedPerKey.get(g))!=null?e:0;if(h<m.warningState.eventsMaxLoggedTotal&&e<m.warningState.eventsMaxLoggedPerKey){m.warningState.eventsLoggedTotal++;m.warningState.eventsLoggedPerKey.set(g,e+1);g=Y(b,d,f,{warning:{loggedPerKey:e+1,loggedTotal:h+1}});I({eventType:"player_warning",logDataOverrides:babelHelpers["extends"]({},G(),g),prevState:a,state:b})}}return J}function da(a,b,c){var d=b.controlledState.error;if(d!=null&&d!==m.lastLoggedError&&d.errorCode!=="410"){c=Y(b,c,d);I({eventType:"error",logDataOverrides:babelHelpers["extends"]({},G(),c),prevState:a,state:b});m.lastLoggedError=d}return J}function Z(a,b,c){var d=m.errorRecoveryAttemptState.currentRecoverableError;if(d!=null){c=Y(b,c,d);m.errorRecoveryAttemptState.eventsLogged++;m.errorRecoveryAttemptState.repeatCount=0;I({eventType:"error_recovery_attempt",logDataOverrides:babelHelpers["extends"]({},c),prevState:a,state:b})}return J}function ea(a,b,d){if(d.type==="error_recovery_attempt"&&m.errorRecoveryAttemptState.eventsLogged<l){var e=m.errorRecoveryAttemptState.currentRecoverableError,f=d.payload.recoverableError;if(f!=null&&f.errorName==="OZ_NETWORK"&&!c("NetworkStatus").isOnline())return J;m.errorRecoveryAttemptState.currentRecoverableError=f;e==null||e.errorName!==f.errorName||e.errorCode!==f.errorCode?Z(a,b,d):(m.errorRecoveryAttemptState.repeatCount++,m.errorRecoveryAttemptState.repeatCount>k&&Z(a,b,d))}return J}function fa(a,b,c){if(!o)return J;var d=b.uncontrolledState.videoElementPlaybackRate;c.type==="dom_event_ratechange"&&m.lastLoggedPlaybackSpeed!=null&&d!==0&&d!==m.lastLoggedPlaybackSpeed&&I({eventType:"playback_speed_changed",prevState:a,state:b});return J}function ga(a,b,c){c=b.controlledState.playbackState;c==="paused"||c==="ended"?m.nextHeartbeatTime=null:c!=="stalling"&&m.nextHeartbeatTime==null&&(m.nextHeartbeatTime=Date.now()+j);var d=m.nextHeartbeatTime;if(d!=null){var e=Date.now();e>=d&&(c!=="stalling"&&I({eventType:"heart_beat",prevState:a,state:b}),m.nextHeartbeatTime=e+j)}return J}function ha(a,b,c){if(c.type==="implementation_mounted"){I({eventType:"player_loaded",prevState:a,state:b});return J}else return J}function $(a,b,c){I({eventType:c?"entered_fs":"exited_fs",prevState:a,state:b})}function ia(a,b,c){var d=e.coreVideoPlayerMetaData.playerFormat;(f.coreVideoPlayerMetaData.playerFormat!==d||c.type==="controller_override_player_format")&&I({eventType:"player_format_changed",prevState:a,state:b});return J}function ja(a,b,c){if(c.type==="dom_event_timeupdate"){c=m.nextPlayedThreeSecondsPlayheadPosition;if(c!=null){var d=b.uncontrolledState;d=d.videoElementPlayheadPosition;d!=null&&c<=d&&(I({eventType:"played_for_three_seconds",prevState:a,state:b}),m.nextPlayedThreeSecondsPlayheadPosition=null)}}return J}function ka(a,b,c){if(c.type!=="notify_fullscreen_changed")return J;c=m.lastLoggedFullscreenState;var d=b.uncontrolledState.isFullscreen;if(c!==!0&&d===!0){$(a,b,d);return J}else if(c===!0&&d===!1){$(a,b,d);return J}else return J}function la(a,b,d){d=e.coreVideoPlayerMetaData.adClientToken;if((d==null||d==="")&&c("gkx")("24380"))return J;d=b.controlledState.playbackState;var f=m.lastLoggedViewabilityPercentage,g=b.uncontrolledState.viewabilityPercentage;if(d!=="paused"&&d!=="ended"&&f!=null&&f!==g){I({eventType:"viewability_changed",prevState:a,state:b});return J}else return J}function ma(a,b,c){if(c.type==="controller_set_captions_visible_requested"){I({eventType:"caption_change",prevState:a,state:b});return J}else return J}function na(a){f=e;if(a.type==="notify_logging_metadata_change"){a=a.payload.loggingMetaData;e=a}}return{addDebugSubscriber:function(a){return t(a)},consumeLoggerEvents:function(){var a=g.splice(0);return a},getLoggerState:function(){return m},handleStateMachine:function(a,b,c){na(c);var d=b.controlledState.playbackState;y(a,b,c);x(a,b);var e=[ia,ka,la,N,O,Q,P,R,S,U,V,T,ha,ma,W,ca,da,ea,ga,fa].concat(s?[ja]:[]);e.forEach(function(d){d(a,b,c)});(d==="paused"||d==="ended")&&(m.canLogPlayingEvent=!0);c.type==="controller_pause_requested"&&(m.hasPausedOnce=!0,m.shouldIgnoreDomPause=!0);c.type==="controller_play_requested"&&(m.hasPausedOnce=!0,m.shouldIgnoreDomPlay=!0);c.type==="dom_event_pause"&&(m.shouldIgnoreDomPause=!1);c.type==="dom_event_play"&&(m.shouldIgnoreDomPlay=!1,m.lastLoggedViewabilityPercentage=b.uncontrolledState.viewabilityPercentage)},logVPLEvent:function(a){var b=a.eventType,c=a.logDataOverrides;a=a.state;I({eventType:b,logDataOverrides:c,prevState:a,state:a})},setAdditionalLogData:function(a,c){b.set(a,c)}}}g.HEARTBEAT_INTERVAL=j;g.createVideoPlayerImplementationStateMachineLogger=a}),98);
__d("convertToViewabilityPercentage",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a>=.99)return 100;else if(a>=.75)return 75;else if(a>=.5)return 50;else if(a>=.25)return 25;else if(a>=0)return 0;else return-2}f["default"]=a}),66);
__d("VideoPlayerImplementationStateMachineStateUncontrolledState",["NetworkStatus","convertToViewabilityPercentage","gkx","performance"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.engineExtrasAPI,d=a.fullscreenControllerRef,e=a.videoElementAPI,f=a.videoLiveTraceRef;a=a.videoPlayerPassiveViewabilityInfoRef;f=f.current;var g=Date.now(),i=typeof (h||(h=c("performance"))).now==="function"?(h||(h=c("performance"))).now():0;if(e==null){var j;return{audioRepresentationID:void 0,clockTimestamp:g,currentPlayingAudioTrackID:void 0,currentPlayingVideoQuality:void 0,estimatedBandwidth:void 0,isDocumentHidden:document.hidden,isDRM:void 0,isFBIsLiveTemplated:void 0,isFBMS:void 0,isFBWasLive:void 0,isFullscreen:d.current?d.current.getIsFullscreen():void 0,isPredictiveDash:void 0,liveTraceContext:f?(j=f.getLiveTraceContext())!=null?j:void 0:void 0,manifestIdentifier:void 0,mpdValidationErrors:void 0,networkConnected:void 0,perfTimestamp:i,videoElementDebugCurrentSrc:void 0,videoElementDebugSrc:void 0,videoElementDroppedFrameCount:void 0,videoElementDuration:void 0,videoElementEnded:void 0,videoElementError:void 0,videoElementLastBufferEndPosition:void 0,videoElementMuted:void 0,videoElementNetworkState:void 0,videoElementPaused:void 0,videoElementPlaybackRate:void 0,videoElementPlayheadPosition:void 0,videoElementReadyState:void 0,videoElementTotalFrameCount:void 0,videoElementVolume:void 0,videoRepresentationID:void 0,viewabilityPercentage:void 0}}j=e.getPlayheadPosition();a=a&&a.current;a=a&&a.getCurrent();return{audioRepresentationID:b?b.getAudioRepresentationIDAtTime(j):void 0,clockTimestamp:g,currentPlayingAudioTrackID:b?b.getCurrentPlayingAudioTrackID():void 0,currentPlayingVideoQuality:b?b.getCurrentPlayingVideoQuality():void 0,estimatedBandwidth:b?b.getEstimatedBandwidth():void 0,isDocumentHidden:document.hidden,isDRM:b?b.isDrm():void 0,isFBIsLiveTemplated:b?b.isFBIsLiveTemplated():void 0,isFBMS:b?b.isFBMS():void 0,isFBWasLive:b?b.isFBWasLive():void 0,isFullscreen:d.current?d.current.getIsFullscreen():void 0,isPredictiveDash:b?b.isPredictiveDash():void 0,liveTraceContext:f?(g=f.getLiveTraceContext())!=null?g:void 0:void 0,manifestIdentifier:b?b.getManifestIdentifier():void 0,mpdValidationErrors:b?b.getMpdValidationErrors():void 0,networkConnected:c("NetworkStatus").isOnline(),perfTimestamp:i,videoElementDebugCurrentSrc:c("gkx")("24351")?(d=e.getUnderlyingVideoElement())==null?void 0:d.currentSrc:void 0,videoElementDebugSrc:c("gkx")("24351")?(f=e.getUnderlyingVideoElement())==null?void 0:f.src:void 0,videoElementDroppedFrameCount:e.getDroppedFrameCount(),videoElementDuration:e.getDuration(),videoElementEnded:e.getEnded(),videoElementError:e.getError(),videoElementLastBufferEndPosition:e.getLastBufferEndPosition(),videoElementMuted:e.getMuted(),videoElementNetworkState:e.getNetworkState(),videoElementPaused:e.getPaused(),videoElementPlaybackRate:e.getPlaybackRate(),videoElementPlayheadPosition:j,videoElementReadyState:e.getReadyState(),videoElementTotalFrameCount:e.getTotalFrameCount(),videoElementVolume:e.getVolume(),videoRepresentationID:b?b.getVideoRepresentationIDAtTime(j):void 0,viewabilityPercentage:a?c("convertToViewabilityPercentage")(a.visiblePercentage):void 0}}g.createVideoPlayerImplementationStateMachineStateUncontrolledState=a}),98);
__d("VideoPlayerImplementationStateMachineState",["VideoPlayerImplementationStateMachineStateUncontrolledState"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.alwaysShowCaptions,c=a.areCaptionsAutogenerated,e=a.captionDisplayStyle,f=a.dimensions,g=a.isAbrEnabled,h=a.playerVersion;a=a.streamingFormat;var i=!0,j=1,k=d("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:null,fullscreenControllerRef:{current:null},videoElementAPI:null,videoLiveTraceRef:{current:null},videoPlayerPassiveViewabilityInfoRef:{current:null}});return{controlledState:{activeCaptions:null,activeEmsgBoxes:[],allEmsgBoxes:new Map(),availableAudioTracks:[],availableQualities:[],availableVideoTracks:[],bufferingDetected:!1,captionDisplayStyle:e,captionFormat:null,captionsLoaded:!1,captionsLocale:null,captionsVisible:b,dimensions:f,emsgObserverTokens:new Set(),error:null,hasPlayEverBeenRequested:!1,hostCallPlayIDLast:null,hostCallQueue:[],implementationSeekSourcePosition:null,inbandCaptionsAutogenerated:c,isDesktopPictureInPicture:!1,isLiveRewindActive:!1,lastBufferingType:null,lastMuteReason:null,lastPausedTimeMs:0,lastPauseReason:null,lastPlayedTimeMs:0,lastPlayReason:null,latencyLevel:"normal",loopCount:0,loopCurrent:0,mountState:"before_mounted",muted:i,overriddenPlayerFormat:"unknown",playbackState:"paused",playerFormat:"unknown",scrubbing:!1,seekableRanges:null,seeking:!1,seekTargetPosition:null,selectedAudioTrackID:null,selectedVideoQuality:"notselected",streamEnded:!1,streamingFormat:a,streamInterrupted:!1,targetPlaybackRate:1,targetVideoQuality:"",ullIneligibilityReason:null,videoProjection:null,volume:j,waitingForDomPlaying:!1,waitingForDomTimeUpdateAfterSeeked:!1,watchTimeMs:0},isAbrEnabled:g,playerVersion:h,uncontrolledState:k}}g.createVideoPlayerImplementationStateMachineInitialState=a}),98);
__d("useConcurrentAutoplayManagementAPI",["react","removeFromArray"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");var i=e.useId,j=e.useState;function a(){return i()}function k(){var a=[];return{isControllingComponent:function(b){var c=a.length;return a[c-1]===b},registerControllingComponent:function(b){c("removeFromArray")(a,b),a.push(b)},unregisterControllingComponent:function(b){var d=a.length;d>1&&c("removeFromArray")(a,b);return d>1}}}function b(){var a=j(function(){return k()});a=a[0];return a}g.useAutoplayControlID=a;g.createConcurrentAutoplayManagementAPI=k;g.useConcurrentAutoplayManagementAPI=b}),98);
__d("useSEOLoggedOutWebCrawler",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("23157")}g["default"]=a}),98);
__d("VideoPlayerImplementationEngineAPI",["CometEventListener","CometVideoPictureInPictureManagerContext","CometVisualCompletion","CurrentUser","ErrorMetadata","FBLogger","MediaPlaybackCompoundEventStateMachineLogger","MediaPlaybackLogFlusher","PlaybackSpeedExperiments","RunComet","SubscriptionsHandler","VideoLiveTrace","VideoPlayerBanzaiLogFlusher","VideoPlayerCaptionsController","VideoPlayerImplementationReactVideoElement.react","VideoPlayerImplementationStateMachine","VideoPlayerImplementationStateMachineHostCallQueue","VideoPlayerImplementationStateMachineLogger","VideoPlayerImplementationStateMachineState","VideoPlayerImplementationStateMachineStateUncontrolledState","VideoPlayerVideoPixelsFitContext","clearTimeout","cr:2336","cr:355","cr:4596","cr:506","deepEquals","err","gkx","qex","react","recoverableViolation","removeFromArray","setTimeout","unrecoverableViolation","useConcurrentAutoplayManagementAPI","useSEOLoggedOutWebCrawler","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));f=h;var j=f.useEffect,k=f.useRef,l=f.useState,m=function(){function a(a){var b=a.pauseRequestCallbacks,c=a.playRequestCallbacks,d=a.scrubBeginRequestCallbacks;a=a.scrubEndRequestCallbacks;this.$1=c;this.$2=b;this.$3=d;this.$4=a}var b=a.prototype;b.playRequest=function(a){var b=this;this.$1.push(a);return function(){c("removeFromArray")(b.$1,a)}};b.pauseRequest=function(a){var b=this;this.$2.push(a);return function(){c("removeFromArray")(b.$2,a)}};b.scrubBeginRequest=function(a){var b=this;this.$3.push(a);return function(){c("removeFromArray")(b.$3,a)}};b.scrubEndRequest=function(a){var b=this;this.$4.push(a);return function(){c("removeFromArray")(b.$4,a)}};return a}();function n(a){var b=a.concurrentAutoplayManagementAPI,d=a.debugAPI,e=a.exitPictureInPictureImpl,f=a.fullscreenControllerRef,g=a.getCurrentExposedState,h=a.getCurrentIsDesktopPictureInPicture,i=a.getCurrentIsFullscreen,j=a.getCurrentLiveRewindPlayheadPosition,k=a.getCurrentPlayheadPosition,l=a.internal_getCurrentStateMachineState,n=a.loggerAPI,o=a.overridePlayerFormatImpl,p=a.pauseImpl,q=a.playImpl,r=a.registerEmsgObserverImpl,s=a.requestPictureInPictureImpl,t=a.scrubBeginImpl,u=a.scrubEndImpl,v=a.seekImpl,w=a.selectAudioTrackIDImpl,x=a.selectVideoQualityImpl,y=a.setCaptionsDisplayStyleImpl,z=a.setCaptionsUrlImpl,A=a.setCaptionsVisibleImpl,B=a.setIsLiveRewindActiveImpl,C=a.setLatencyLevelImpl,D=a.setMutedImpl,E=a.setPictureInPictureStateImpl,F=a.setPlaybackRateImpl,G=a.setVolumeImpl,H=a.subscribers,I=a.unregisterEmsgObserverImpl,J=a.videoElementAPIRef,K=new Set(),L=!1,M=null,N=[],O=[],P=[],Q=[],R=new m({pauseRequestCallbacks:O,playRequestCallbacks:N,scrubBeginRequestCallbacks:P,scrubEndRequestCallbacks:Q}),S={freeze:function(){if(!g().paused)throw c("unrecoverableViolation")("Video player must be paused before the controller freeze","comet_video_player");var a={};try{var b=!1;K.size===0&&(b=!0,M={exposedState:g(),isFullscreen:i(),liveRewindPlayheadPosition:j(),playheadPosition:k(),stateMachineState:l()});K.add(a);b&&(L=!0,H.forEach(function(a){a()}))}finally{L=!1}return a},isFrozen:function(){return M!=null},unfreeze:function(a){if(!K.has(a))throw c("unrecoverableViolation")("Video player controller unfreeze token not found","comet_video_player");K["delete"](a);K.size===0&&(M=null,H.forEach(function(a){a()}))}},T=babelHelpers["extends"]({},b,S,n,{debugAPI:d,exitPictureInPicture:function(){if(S.isFrozen())return;e()},getCurrentState:function(){return M!=null?M.exposedState:g()},getIsDesktopPictureInPicture:function(){return M!=null?M.isFullscreen:h()},getIsFullscreen:function(){return M!=null?M.isFullscreen:i()},getLiveRewindPlayheadPosition:function(){return M!=null?M.liveRewindPlayheadPosition:j()},getPlayheadPosition:function(){return M!=null?M.playheadPosition:k()},internal_getStateMachineState:function(){return M!=null?M.stateMachineState:l()},internal_getVideoElement:function(){var a=J.current;if(a!=null){a=a.getUnderlyingVideoElement();return a}return null},internal_getVideoPixelsDimensions:function(){var a=J.current;return(a=a==null?void 0:a.getVideoPixelsDimensions())!=null?a:null},observeOn:function(){return R},overridePlayerFormat:function(a){if(S.isFrozen())return;o(a)},pause:function(a){if(S.isFrozen())return;O.forEach(function(b){return b(a)});p(a)},play:function(a){if(S.isFrozen())return;N.forEach(function(b){return b(a)});q(a)},registerEmsgObserver:function(){var a={};r(a);return a},requestPictureInPicture:function(){if(S.isFrozen())return;s()},requestSetIsFullscreen:function(a){if(S.isFrozen())return;var b=f.current;if(b){var c=T.internal_getVideoElement();b.requestSetIsFullscreen(a,c)}},scrollIntoView:function(a){var b=T.internal_getVideoElement();b&&b.scrollIntoView(a)},scrubBegin:function(){if(S.isFrozen())return;P.forEach(function(a){return a()});t()},scrubEnd:function(a){if(S.isFrozen())return;Q.forEach(function(b){return b(a)});u(a)},seek:function(a){if(S.isFrozen())return;v(a)},selectAudioTrackID:function(a){if(S.isFrozen())return;w(a)},selectVideoQuality:function(a){if(S.isFrozen())return;x(a)},setCaptionsDisplayStyle:function(a){if(S.isFrozen())return;y(a)},setCaptionsUrl:function(a){if(S.isFrozen())return;z(a)},setCaptionsVisible:function(a){if(S.isFrozen())return;A(a)},setIsLiveRewindActive:function(a){if(S.isFrozen())return;B(a)},setLatencyLevel:function(a){if(S.isFrozen())return;C(a)},setMuted:function(a,b){if(S.isFrozen())return;D(a,b)},setPictureInPictureState:function(a){if(S.isFrozen())return;E(a)},setPlaybackRate:function(a){if(S.isFrozen())return;F(a)},setVolume:function(a){if(S.isFrozen())return;G(a)},subscribe:function(a){var b=function(){if(S.isFrozen()&&!L)return;a()},d=f.current,e=d?d.subscribe(b):null;H.push(b);return{remove:function(){e&&e.remove(),c("removeFromArray")(H,b)}}},unregisterEmsgObserver:function(a){I(a)},videoElementAPIRef:J});return T}function o(a){var b=a.concurrentAutoplayManagementAPI,d=a.createExposedState,e=a.debugAPI,f=a.fullscreenControllerRef,g=a.logger,h=a.machine,i=a.subscribers,j=a.videoElementAPIRef;a={logVPLEvent_DO_NOT_USE:function(a,b){g.logVPLEvent({eventType:a,logDataOverrides:b,state:h.getCurrentState()})},setAdditionalLogData:function(a,b){g.setAdditionalLogData(a,b)}};return n({concurrentAutoplayManagementAPI:b,debugAPI:e,exitPictureInPictureImpl:function(){h.dispatch({type:"controller_picture_in_picture_exit_requested"})},fullscreenControllerRef:f,getCurrentExposedState:function(){return d(h.getCurrentState())},getCurrentIsDesktopPictureInPicture:function(){var a;return(a=h.getCurrentState().controlledState.isDesktopPictureInPicture)!=null?a:!1},getCurrentIsFullscreen:function(){var a=f.current;return a?a.getIsFullscreen():!1},getCurrentLiveRewindPlayheadPosition:function(){var a=h.getCurrentState();a=a.controlledState;var b=a.isLiveRewindActive,c=a.seekableRanges;a=a.seekTargetPosition;if(!b||a==null)return null;c=(b=c==null?void 0:c.end(0))!=null?b:0;return a-c},getCurrentPlayheadPosition:function(){var a,b=0;return(a=(a=c("gkx")("24348")?(a=j.current)==null?void 0:a.getPlayheadPosition():void 0)!=null?a:h.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?a:b},internal_getCurrentStateMachineState:function(){return h.getCurrentState()},loggerAPI:a,overridePlayerFormatImpl:function(a){h.dispatch({payload:{playerFormat:a},type:"controller_override_player_format"})},pauseImpl:function(a){h.dispatch({payload:{reason:a},type:"controller_pause_requested"})},playImpl:function(a){h.dispatch({payload:{reason:a},type:"controller_play_requested"})},registerEmsgObserverImpl:function(a){h.dispatch({payload:{token:a},type:"register_emsg_observer"})},requestPictureInPictureImpl:function(){h.dispatch({type:"controller_picture_in_picture_requested"})},scrubBeginImpl:function(){h.dispatch({type:"controller_scrub_begin_requested"})},scrubEndImpl:function(a){h.dispatch({payload:{seekTargetPosition:a},type:"controller_scrub_end_requested"})},seekImpl:function(a){h.dispatch({payload:{seekTargetPosition:a},type:"controller_seek_requested"})},selectAudioTrackIDImpl:function(a){h.dispatch({payload:{selectedAudioTrackID:a},type:"controller_audio_track_requested"})},selectVideoQualityImpl:function(a){h.dispatch({payload:{selectedVideoQuality:a},type:"controller_quality_requested"})},setCaptionsDisplayStyleImpl:function(a){h.dispatch({payload:{captionDisplayStyle:a},type:"controller_set_caption_display_style_requested"})},setCaptionsUrlImpl:function(a){h.dispatch({payload:{captionsUrl:a},type:"controller_set_captions_url_requested"})},setCaptionsVisibleImpl:function(a){h.dispatch({payload:{captionsVisible:a},type:"controller_set_captions_visible_requested"})},setIsLiveRewindActiveImpl:function(a){h.dispatch({payload:{isLiveRewindActive:a},type:"controller_set_is_live_rewind_active_requested"})},setLatencyLevelImpl:function(a){h.dispatch({payload:{latencyLevel:a},type:"controller_set_latency_level_requested"})},setMutedImpl:function(a,b){h.dispatch({payload:{muted:a,reason:b},type:"controller_muted_requested"})},setPictureInPictureStateImpl:function(a){h.dispatch({payload:{isInPictureInPictureMode:a},type:"controller_set_picture_in_picture_state_requested"})},setPlaybackRateImpl:function(a){h.dispatch({payload:{playbackRate:a},type:"controller_set_playback_rate"})},setVolumeImpl:function(a){h.dispatch({payload:{volume:a},type:"controller_volume_requested"})},subscribers:i,unregisterEmsgObserverImpl:function(a){h.dispatch({payload:{token:a},type:"unregister_emsg_observer"})},videoElementAPIRef:j})}function p(a){a=a.current;if(a==null)throw c("unrecoverableViolation")("Attempted to access VideoElementAPI while it is not available.","comet_video_player");return a}function q(a){var b=a.alwaysShowCaptions,e=a.areCaptionsAutogenerated,f=a.captionDisplayStyle,g=a.captionsControllerRef,h=a.debugLogId,i=a.dimensions,j=a.engineExtrasAPI,k=a.engineMetadata,l=a.fullscreenControllerRef,m=a.handleFatalError,n=a.handleStateMachine,o=a.videoElementAPIRef,q=a.videoLiveTraceRef,s=a.videoPlayerPassiveViewabilityInfoRef;function t(a){d("VideoPlayerImplementationStateMachineHostCallQueue").applyOrQueueHostCall({engineExtrasAPI:j,hostCall:a,machine:v,videoElementAPI:o.current})}var u=null;a=[function(a,b,d){d.type==="implementation_host_call_applied"&&d.payload.hostCall.type==="host_call_play"&&b.controlledState.lastPlayReason==="autoplay_initiated"?c("CometVisualCompletion").addFirstMarkerPoint("firstVideoAutoplayStalling"):b.controlledState.playbackState!==a.controlledState.playbackState&&b.controlledState.playbackState==="playing"&&b.controlledState.lastPlayReason==="autoplay_initiated"&&c("CometVisualCompletion").addFirstMarkerPoint("firstVideoAutoplayPlaying");return!0},function(a,b,c){n(a,b,c);return!0},function(a,b,c){return!0},function(a,b,c){if(a.controlledState.bufferingDetected===!1&&b.controlledState.bufferingDetected===!0||a.controlledState.bufferingDetected===!0&&b.controlledState.bufferingDetected===!1)if(b.controlledState.bufferingDetected){a=(c=b.controlledState.lastBufferingType)!=null?c:"in_play";c=j.getPerfLoggerProvider();u=c?c.getOperationLogger("buffering").setState("buffering").setType(a).start():null}else!b.controlledState.bufferingDetected&&u!=null&&(u.log(),u=null);return!0},function(a,b,c){return c.type!=="implementation_engine_destroy_requested"?!0:!1},function(a,b,c){if(c.type!=="implementation_engine_initialized")return!0;a=p(o);c=c.type;d("VideoPlayerImplementationStateMachineHostCallQueue").flushHostCallQueue({engineExtrasAPI:j,machine:v,reason:c,state:b,videoElementAPI:a});return!1},function(a,b,c){if(c.type!=="dom_event_ended")return!0;a=b.controlledState;(a.loopCount>0&&a.loopCurrent<a.loopCount||a.loopCount===-1)&&v.dispatch({payload:{reason:"loop_initiated"},type:"controller_play_requested"});return!1},function(a,b,c){if(c.type!=="controller_pause_requested")return!0;a=b.controlledState.playbackState;if(a!=="paused")return!1;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_pause"});return!1},function(a,b,c){if(c.type!=="controller_play_requested")return!0;a=b.controlledState.playbackState;if(a!=="stalling")return!1;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_play"});return!1},function(a,b,c){if(c.type!=="controller_seek_requested")return!0;a=b.controlledState;b=a.seeking;a=a.seekTargetPosition;b&&a!=null&&t({payload:{currentTime:a,hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_set_current_time"});return!1},function(a,b,c){if(c.type!=="controller_muted_requested")return!0;a=b.controlledState.muted;if(a!==c.payload.muted)return!1;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),muted:a,reason:c.type},type:"host_call_set_muted"});return!1},function(a,b,c){if(c.type!=="controller_scrub_begin_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(c.type!=="controller_scrub_end_requested")return!0;a=b.controlledState;b=a.seeking;var e=a.seekTargetPosition;a=a.targetPlaybackRate;b&&e!=null?(t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:a,reason:c.type+":seek"},type:"host_call_set_playback_rate"}),t({payload:{currentTime:e,hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type+":seek"},type:"host_call_set_current_time"})):t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:a,reason:c.type+":cancel"},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(c.type!=="buffering_begin_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(c.type!=="controller_set_playback_rate")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:c.payload.playbackRate,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(c.type!=="buffering_end_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:b.controlledState.targetPlaybackRate,reason:c.type},type:"host_call_set_playback_rate"});return!1},function(a,b,c){if(c.type!=="controller_volume_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type,volume:b.controlledState.volume},type:"host_call_set_volume"});return!1},function(a,b,c){if(c.type!=="controller_audio_track_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type,selectedAudioTrackID:b.controlledState.selectedAudioTrackID},type:"host_call_set_audio_track"});return!1},function(a,b,c){if(c.type!=="controller_quality_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type,selectedVideoQuality:b.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"});return!1},function(a,b,c){if(!(c.type==="controller_set_latency_level_requested"||c.type==="implementation_set_latency_level_requested"))return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),latencyLevel:c.payload.latencyLevel,reason:c.type},type:"host_call_set_latency_level"});return!1},function(a,b,c){if(!(c.type==="dom_event_timeupdate"||c.type==="captions_loaded"))return!0;c=g.current;var e=b.controlledState.captionsVisible,f=o.current;f=f?f.getPlayheadPosition():0;if(d("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&b.controlledState.isLiveRewindActive){var h=b.controlledState.seekableRanges;h=h!=null?(h=h.end(h.length()-1))!=null?h:0:0;f>=h&&v.dispatch({payload:{isLiveRewindActive:!1},type:"controller_set_is_live_rewind_active_requested"})}if(!j.getRepresentationCaptionsExpectedFromManifest()&&c&&e&&b.controlledState.captionsLoaded){h=c.handleTimeUpdate(f);e=c.getCaptionFormat();b=a.controlledState.activeCaptions;c=a.controlledState.captionFormat;e!==c&&v.dispatch({payload:{captionFormat:e},type:"controller_set_caption_format_requested"});r(b,h)&&v.dispatch({payload:{activeCaptions:h,captionsLocale:null},type:"controller_set_active_captions_requested"})}a=q.current;a!=null&&a.onUpdateStatus({position:f});return!1},function(a,b,c){if(c.type!=="cea608_bytes_received")return!0;a=g.current;if(a){b=c.payload;c=b.timescale;b=b.videoBytes;a.handleCea608BytesReceived({timescale:c,videoBytes:b})}return!1},function(a,b,c){if(c.type!=="controller_set_captions_url_requested")return!0;a=g.current;if(a){b=c.payload.captionsUrl;a.updateCaptionsUrl(b)}return!1},function(a,b,c){if(c.type!=="controller_set_is_live_rewind_active_requested")return!0;j.setEnableLiveheadCatchup(!c.payload.isLiveRewindActive);!!d("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&!c.payload.isLiveRewindActive&&v.dispatch({payload:{playbackRate:1},type:"controller_set_playback_rate"});return!1},function(a,b,c){if(c.type!=="controller_picture_in_picture_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_picture_in_picture"});return!1},function(a,b,c){if(c.type!=="controller_picture_in_picture_exit_requested")return!0;t({payload:{hostCallID:d("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:c.type},type:"host_call_exit_picture_in_picture"});return!1}];var v=d("VideoPlayerImplementationStateMachine").createVideoPlayerImplementationStateMachineWithStateTransitionHandlers({collectUncontrolledState:function(){var a=o.current;return d("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:j,fullscreenControllerRef:l,videoElementAPI:a,videoLiveTraceRef:q,videoPlayerPassiveViewabilityInfoRef:s})},debugLogId:h,initialState:d("VideoPlayerImplementationStateMachineState").createVideoPlayerImplementationStateMachineInitialState({alwaysShowCaptions:b,areCaptionsAutogenerated:e,captionDisplayStyle:f,dimensions:i,isAbrEnabled:k.isAbrEnabled,playerVersion:k.playerVersion,streamingFormat:k.streamingFormat}),onFatalError:m,stateTransitionHandlers:a});return v}function r(a,b){if(a===null&&b===null)return!1;if(a===null||b===null)return!0;var c=(b=b.rows)!=null?b:[];a=(b=a.rows)!=null?b:[];return a.length!==c.length||a.some(function(a,b){return a!==c[b]})}function s(a,b,c,d){a!==b.current&&(c.current&&(c.current.remove(),c.current=null),b.current=a),b.current&&!c.current&&(c.current=b.current.subscribe(function(){d.dispatch({type:"notify_fullscreen_changed"})}))}function t(a,b,c,d){a!==b.current&&(c.current&&(c.current.remove(),c.current=null),b.current=a),b.current&&!c.current&&(c.current=b.current.subscribe(function(){d.dispatch({type:"notify_viewability_changed"})}))}function u(a){var b=a.engineMetadata;a=a.state;var c=a.controlledState,d=c.activeCaptions,e=c.activeEmsgBoxes,f=c.availableAudioTracks,g=c.availableQualities,h=c.availableVideoTracks,i=c.captionDisplayStyle,j=c.captionsLoaded,k=c.captionsVisible,l=c.error,m=c.hasPlayEverBeenRequested,n=c.implementationSeekSourcePosition,o=c.inbandCaptionsAutogenerated,p=c.isDesktopPictureInPicture,q=c.isLiveRewindActive,r=c.lastMuteReason,s=c.lastPauseReason,t=c.lastPlayedTimeMs,u=c.lastPlayReason,v=c.latencyLevel,w=c.loopCount,x=c.loopCurrent,y=c.muted,z=c.overriddenPlayerFormat,A=c.playbackState,B=c.seekableRanges,C=c.seeking,D=c.seekTargetPosition,E=c.selectedAudioTrackID,F=c.selectedVideoQuality,G=c.streamingFormat,H=c.streamInterrupted,I=c.targetPlaybackRate,J=c.targetVideoQuality,K=c.ullIneligibilityReason,L=c.videoProjection,M=c.volume;c=c.watchTimeMs;var N=a.uncontrolledState,O=N.currentPlayingAudioTrackID,P=N.currentPlayingVideoQuality,Q=N.isDRM,R=N.isFullscreen,S=N.videoElementDuration,T=N.videoElementLastBufferEndPosition;N=N.videoRepresentationID;var U=A==="ended",V=A==="paused"||U,W=A==="playing",X=A==="inPlayStalling";A=A==="stalling"||X;i={activeCaptions:d,activeEmsgBoxes:e,availableAudioTracks:f,availableVideoQualities:g,availableVideoTracks:h,bufferEnd:(d=T)!=null?d:0,captionDisplayStyle:i,captionsLoaded:j,captionsVisible:k,currentAudioTrackID:(e=O)!=null?e:null,currentVideoQuality:(f=P)!=null?f:"",duration:(g=S)!=null?g:0,ended:U,error:l,hasPlayEverBeenRequested:m,inbandCaptionsAutogenerated:o,inPlayStalling:X,isAbrEnabled:b.isAbrEnabled,isDesktopPictureInPicture:(h=p)!=null?h:!1,isDRM:(T=Q)!=null?T:null,isExternalMedia:b.isExternalMedia,isFullscreen:(d=R)!=null?d:!1,isLiveRewindActive:q,lastMuteReason:r,lastPauseReason:s,lastPlayedTimeMs:t,lastPlayReason:u,latencyLevel:v,loopCount:w,loopCurrent:x,muted:y,overriddenPlayerFormat:z,paused:V,playerVersion:a.playerVersion,playing:W,seekableRanges:B,seeking:C,seekSourcePosition:n,seekTargetPosition:D,selectedAudioTrackID:E,selectedVideoQuality:F,stalling:A,streamingFormat:G,streamInterrupted:H,targetPlaybackRate:I,targetVideoQuality:J,ullIneligibilityReason:K,videoProjection:L,videoRepresentationID:N,volume:M,watchTimeMs:c};return i}function a(a){var e=a.checkInDOM,f=a.createDebugAPI,g=a.createVideoPlayerError,h=a.debugLog,i=a.debugLogId,j=a.destroyEngineParts,k=a.engineExtrasAPI,l=a.engineMetadata,m=a.handleFatalError,n=a.handleVideoElementChanged,p=a.handleVideoInfoChange,r=a.initialProps,v=a.setExposedStateInReact,w=r.loggingMetaData.instanceKey;h=r.loggingMetaData.coreVideoPlayerMetaData;a=h.broadcastId;var x=h.isLiveStreaming;h=h.isLiveTraceEnabled;var y={current:Boolean(x)&&Boolean(h)&&a!=null?new(c("VideoLiveTrace"))(a,w,c("CurrentUser").getAccountID()):null},z=d("VideoPlayerImplementationStateMachineLogger").createVideoPlayerImplementationStateMachineLogger({debugLogId:i,initialLoggingMetaData:r.loggingMetaData,videoLiveTraceRef:y}),A=new(c("VideoPlayerBanzaiLogFlusher"))(z),B=r.enableSNAPL?d("MediaPlaybackCompoundEventStateMachineLogger").createMediaPlaybackCompoundEventStateMachineLogger({debugLogId:i,initialLoggingMetaData:r.loggingMetaData}):null,C=B!=null?new(c("MediaPlaybackLogFlusher"))(B):null,D={current:(x=r.videoPlayerPassiveViewabilityInfo)!=null?x:null},E={current:(h=r.fullscreenController)!=null?h:null},F={current:null};a=d("useConcurrentAutoplayManagementAPI").createConcurrentAutoplayManagementAPI();var G=[],H=function(){G.forEach(function(a){a()}),r.disableLogging?A.discardLogsWithoutFlushing():A.flushLogs(),!r.enableSNAPL?C==null?void 0:C.discardLogsWithoutFlushing():C==null?void 0:C.flushLogs()},I={current:r.onExposedStateChanged},J={current:null},K=null,L={current:{inbandCaptionsAutogeneratedFromManifest:!1,inbandCaptionsExpectedFromManifest:!1,inbandCaptionsExpectedFromProps:r.inbandCaptionsExpected,representationCaptionsExpectedFromManifest:!1,sideLoadCaptionsExpectedFromProps:r.sideLoadCaptionsExpected,sideLoadCaptionsUrlFromProps:(x=r.captionsUrl)!=null?x:null}},M={current:null},N={current:null},O=new(c("SubscriptionsHandler"))(),P=new(c("SubscriptionsHandler"))(),Q="before_mounted";function R(a){if(c("gkx")("24349"))return a.controlledState.mountState==="mounted_onscreen"||a.controlledState.mountState==="mounted_offscreen";else return Q==="mounted"}var S={current:null},T=function(a){a=u({engineMetadata:l,state:a});return a},U={current:null},V={current:null},W=function(a){if(R(a)){if(a===U.current)return;var b=T(a);if(V.current!=null&&c("deepEquals")(V.current,b))return;U.current=a;V.current=b;v(b);a=I.current;a&&a({implementationController:ma,implementationExposedState:b})}};h=function(a,b,c){z.handleStateMachine(a,b,c),B==null?void 0:B.handleStateMachine(a,b,c),W(b),H()};var X=function(a,b){};x=function(a){X(a,"state_machine_fatal_error")};var Y=q({alwaysShowCaptions:Boolean(r.alwaysShowCaptions),areCaptionsAutogenerated:Boolean(r.areCaptionsAutogenerated),captionDisplayStyle:r.captionDisplayStyle,captionsControllerRef:F,debugLogId:i,dimensions:r.dimensions,engineExtrasAPI:k,engineMetadata:l,fullscreenControllerRef:E,handleFatalError:x,handleStateMachine:h,videoElementAPIRef:S,videoLiveTraceRef:y,videoPlayerPassiveViewabilityInfoRef:D}),aa=!1,Z=function(a){var b=J.current!=null,d=S.current!=null;O.release();Y.dispatch({payload:{reason:a,videoElementAPIExisted:d,videoElementExisted:b},type:"implementation_engine_destroy_requested"});try{aa||(aa=!0,j(["destroyEngine("+a+")"]))}catch(g){try{var e=c("FBLogger")("comet_video_player").catching(g),f=r.videoFBID;f!=null&&(e=e.addMetadata("COMET_VIDEO","VIDEO_ID",f));e=e.addMetadata("COMET_VIDEO","VIDEO_IMPLEMENTATION_DEBUG_DATA",JSON.stringify({destroy_reason:a,player_instance_key:w,player_version:l.playerVersion,video_element_api_existed:d,video_element_existed:b}));e.warn("Error thrown by destroyEngineParts: %s",g.message)}catch(a){}}f=F.current;f!=null&&(Y.getCurrentState().controlledState.captionsLoaded&&Y.dispatch({type:"captions_unloaded"}),F.current=null,f.destroy());s(null,E,M,Y);t(null,D,N,Y);Y.dispatch({payload:{reason:a,videoElementAPIExisted:d,videoElementExisted:b},type:"implementation_engine_destroyed"})};X=function(a,b){a=g(a,b);Y.dispatch({payload:{fatalError:a},type:"implementation_fatal_error"});Z("implementation_fatal_error");m(a)};function ba(a){return a.sideLoadCaptionsExpectedFromProps&&a.sideLoadCaptionsUrlFromProps!==null}function ca(a){return a.inbandCaptionsExpectedFromProps&&((a=a.inbandCaptionsExpectedFromManifest)!=null?a:!1)}function da(a){return(a=a.inbandCaptionsAutogeneratedFromManifest)!=null?a:!1}var ea=function(a){var b=ba(a),c=ca(a),e=da(a),f=F.current;e!==da(L.current)&&Y.dispatch({payload:{inbandCaptionsAutogenerated:e},type:"inband_captions_autogenerated_changed"});f!=null?c!==ca(L.current)&&(f.updateInbandCaptionsExpected(c),!c&&Y.getCurrentState().controlledState.captionsLoaded&&Y.dispatch({type:"captions_unloaded"})):(b||c)&&f==null&&(F.current=d("VideoPlayerCaptionsController").createCaptionsController({captionsUrl:b?a.sideLoadCaptionsUrlFromProps:null,inbandCaptionsExpected:c,onCaptionsLoaded:function(){Y.getCurrentState().controlledState.captionsLoaded||Y.dispatch({type:"captions_loaded"})}}));L.current=a},fa=function(a){k!=null&&a&&a.width>0&&a.height>0&&(k.setDimensions(a),Y.dispatch({payload:{dimensions:{height:a.height,width:a.width}},type:"player_dimensions_changed"}))},ga=function(a){a!==Y.getCurrentState().controlledState.loopCount&&Y.dispatch({payload:{loopCount:a},type:"loop_count_change_requested"})},ha=function(a){"srcObject"in a&&(a.srcObject=null),a.removeAttribute("src"),P.release(),P.engage()},ia=function(a,e){if(J.current===a)return;a!=null&&J.current!=null&&J.current!==a&&c("recoverableViolation")("The video element was recreated","comet_video_player");K!=null&&K();var f=J.current;f&&ha(f);J.current=a;b("cr:506")!=null&&a!=null&&(K=b("cr:506")(a,i));a!=null?(P.addSubscriptions(c("CometEventListener").listen(a,"enterpictureinpicture",function(){var a=d("CometVideoPictureInPictureManagerContext").isInPictureInPictureExp();a&&Y.dispatch({payload:{isInPictureInPictureMode:!0},type:"controller_set_picture_in_picture_state_requested"})}),c("CometEventListener").listen(a,"leavepictureinpicture",function(){var a=d("CometVideoPictureInPictureManagerContext").isInPictureInPictureExp();a&&Y.dispatch({payload:{isInPictureInPictureMode:!1},type:"controller_set_picture_in_picture_state_requested"})})),Y.dispatch({type:"implementation_video_node_mounted"}),n(a,[].concat(e,["handleVideoElement(non-null)"]))):(Y.dispatch({type:"implementation_video_node_unmounted"}),n(null,[].concat(e,["handleVideoElement(null)"])))};x=r.loggingMetaData.instanceKey;h=function(a){var b;I.current=a.onExposedStateChanged;if(!R(Y.getCurrentState()))return;s((b=a.fullscreenController)!=null?b:null,E,M,Y);t((b=a.videoPlayerPassiveViewabilityInfo)!=null?b:null,D,N,Y);if(!p(a)){b={inbandCaptionsAutogeneratedFromManifest:L.current.inbandCaptionsAutogeneratedFromManifest,inbandCaptionsExpectedFromManifest:L.current.inbandCaptionsExpectedFromManifest,inbandCaptionsExpectedFromProps:a.inbandCaptionsExpected,representationCaptionsExpectedFromManifest:L.current.representationCaptionsExpectedFromManifest,sideLoadCaptionsExpectedFromProps:a.sideLoadCaptionsExpected,sideLoadCaptionsUrlFromProps:(b=a.captionsUrl)!=null?b:null};ea(b);fa(a.dimensions);ga((b=a.loopCount)!=null?b:0)}Y.dispatch({payload:{loggingMetaData:a.loggingMetaData},type:"notify_logging_metadata_change"})};var $=null;x=function(){var a=Y.getCurrentState().controlledState.mountState;switch(a){case"before_mounted":O.addSubscriptions(d("RunComet").onUnload(function(){Z("page_unload")}));Y.dispatch({type:"implementation_mounted"});n(J.current,["handleReactEffectInit(before_mounted)"]);break;case"mounted_onscreen":break;case"mounted_offscreen":c("clearTimeout")($);$=null;Y.dispatch({type:"implementation_onscreen"});break;case"unmounted":break;default:a}};var ja=function(){var a=function a(){c("clearTimeout")($);$=null;if(Y.getCurrentState().controlledState.mountState==="unmounted")return;var b=e();!b?(Y.dispatch({payload:{reason:"react_effect_cleanup"},type:"implementation_unmounted"}),Z("implementation_unmounted:react_effect_cleanup")):$=c("setTimeout")(a,1e3)},b=Y.getCurrentState().controlledState.mountState;switch(b){case"before_mounted":break;case"mounted_onscreen":Y.dispatch({type:"implementation_offscreen"});a();break;case"mounted_offscreen":a();break;case"unmounted":break}},ka=function(){R(Y.getCurrentState())||(Q="mounted",O.addSubscriptions(d("RunComet").onUnload(function(){Z("page_unload")})),Y.dispatch({type:"implementation_mounted"}),n(J.current,["handleReactMount"]))},la=function(){R(Y.getCurrentState())&&(Q="unmounted",Y.dispatch({payload:{reason:"react_effect_cleanup"},type:"implementation_unmounted"}),Z("implementation_unmounted:react_effect_cleanup"))},ma=o({concurrentAutoplayManagementAPI:a,createExposedState:T,debugAPI:f({getVideoElementAPI:function(){return S.current},logger:z}),fullscreenControllerRef:E,logger:z,machine:Y,subscribers:G,videoElementAPIRef:S});a=d("VideoPlayerImplementationStateMachine").createReactVideoElementCallbacksForStateMachine(Y,ia);f=T(Y.getInitialState());ja={handleReactEffectCleanup:c("gkx")("24349")?ja:la,handleReactEffectInit:c("gkx")("24349")?x:ka,handleReactPropsChanged:h,implementationController:ma,initialExposedState:f,logFlusher:A,machine:Y,notifySubscribers:H,videoElementCallbacks:a,videoElementRefCallback:function(a){ia(a,["videoElementRefCallback"])}};return{engine:ja,getCaptionsInfo:function(){return L.current},getVideoElement:function(){return J.current},getVideoLiveTrace:function(){return y.current},handleCaptionsInfoChange:ea,handleFatalImplementationError:X,logger:z,machine:Y,videoElementAPIRef:S}}function v(a,b){var d,e=c("err").apply(void 0,[a.errorName+": "+a.errorMessageFormat].concat(a.errorMessageParams));e.name=a.errorName;e.errorName=a.errorName;e.type="error";a.stack!=null&&a.stack!==""&&(e.stack=a.stack);var f=new(c("ErrorMetadata"))();f.addEntries(["COMET_VIDEO","ERROR_LOCATION",a.errorLocation],["COMET_VIDEO","ERROR_CODE",(d=a.errorCode)!=null?d:""],["COMET_VIDEO","ERROR_URL",(d=a.url)!=null?d:""]);b!=null&&f.addEntry("COMET_VIDEO","VIDEO_ID",b);d=a.originalError;d!=null&&(typeof d==="string"?f.addEntry("COMET_VIDEO","ORIGINAL_ERROR",d):d instanceof Error&&d.message!=null&&f.addEntry("COMET_VIDEO","ORIGINAL_ERROR",d.message));e.metadata=f;return e}function e(a,d){var e=l(null),f=e[0],g=e[1];e=l(null);var h=e[0],m=e[1];e=a.wrapVideoPixels_EXPERIMENTAL;var n=k(a),o=k(d),p=k(null),q=c("useStable")(function(){return o.current({checkInDOM:function(){var a=document.body,b=p.current;return a!=null&&b!=null&&a.contains(b)},debugLogId:String(n.current.loggingMetaData.instanceKey),handleFatalError:function(a){m(a)},initialProps:n.current,setExposedStateInReact:g})});f=(d=f)!=null?d:q.initialExposedState;d=(d=f.error)!=null?d:h;if(d!=null){h=a.VideoPlayerShakaPerformanceLoggerClass;h&&(c("gkx")("24350")||c("qex")._("1655"))&&h.flushQueuedLogs();throw v(d,n.current.videoFBID)}j(function(){q.handleReactEffectInit();return function(){q.handleReactEffectCleanup()}},[q]);var r=k(null);j(function(){a!==r.current&&q.handleReactPropsChanged(a),r.current=a});h=c("useSEOLoggedOutWebCrawler")();d=a.renderVideoPixelsFit?a.renderVideoPixelsFit(f):null;h=i.jsx(c("VideoPlayerImplementationReactVideoElement.react"),{alt:a.alt,implementationExposedState:f,poster:a.poster,seoWebCrawlerVideoTracks:h&&a.seoWebCrawlerVideoTracks!=null?a.seoWebCrawlerVideoTracks:null,src:h?a.seoWebCrawlerLookasideUrl:null,videoElementCallbacks:h?null:q.videoElementCallbacks,videoElementPreloadDisabled:a.preloadForProgressiveDisabled,videoElementRefCallback:h?null:q.videoElementRefCallback,videoPixelsFit:d});var s=a.renderWithExposedState({implementationController:q.implementationController,implementationExposedState:f});e=i.jsxs(i.Fragment,{children:[c("gkx")("24349")?i.jsx("div",{ref:p,style:{display:"none"}}):null,f.isDRM===!0?b("cr:2336")?i.jsx(b("cr:2336"),{controller:q.implementationController}):b("cr:4596")?i.jsx(b("cr:4596"),{controller:q.implementationController}):null:null,e?e(h):h,b("cr:355")!=null&&f.playerVersion==="comet_nextgendash"?i.jsx(b("cr:355"),{}):null,i.jsx(c("VideoPlayerVideoPixelsFitContext").Provider,{value:d,children:s})]});return{engine:q,exposedState:f,reactVideoComponents:s,reactVideoFrame:h,reactVideoFrameAndComponents:e}}g.internal_createVideoPlayerImplementationControllerImpl=n;g.internal_createVideoPlayerImplementationEngineStateMachineWithEffects=q;g.internal_createVideoPlayerImplementationExposedStateFromStateMachineState=u;g.createVideoPlayerImplementationEngine=a;g.internal_makeExpandedErrorFromVideoPlayerError=v;g.useVideoPlayerImplementationEngine=e}),98);
__d("VideoPlayerOzWWWGlobalConfig",["VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";var h="oz_www_";a={getBool:function(a,b){return d("VideoPlayerShakaGlobalConfig").getBool(h+a,b)},getNumber:function(a,b){return d("VideoPlayerShakaGlobalConfig").getNumber(h+a,b)},getString:function(a,b){return d("VideoPlayerShakaGlobalConfig").getString(h+a,b)}};b=a;g["default"]=b}),98);
__d("VideoPlayerImplementationEngineVideoElementAPI",["Promise","VideoPlaybackQuality","VideoPlayerOzWWWGlobalConfig","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return isNaN(a)?0:a}function j(a){return i(a.duration)}function k(a){var b=[];try{a=a.buffered;for(var c=0;c<a.length;++c)b.push({endTime:a.end(c),startTime:a.start(c)})}catch(a){}return b}function l(a){try{a=a.buffered;if(a.length>0)return a.end(a.length-1)}catch(a){}return 0}function m(a){return i(a.currentTime)}function n(a){try{a=a.buffered;if(a.length>0)return a.start(0)}catch(a){}return 0}function a(a,e){var f=e.enableCrossOriginAnonymous;e=e.isExternalMedia;var g=e!==!0,i=null,o=function(b){if(g)if(b==null||b==="")a.removeAttribute("src");else{var d=a.playbackRate;a.setAttribute("src",b);var e=null;if((c("gkx")("8667")||c("gkx")("33142"))&&f===!0){try{e=new URL(b).origin}catch(a){}e!=null&&location.origin!==e&&a.setAttribute("crossOrigin","anonymous")}a.playbackRate=d}else i=b};return{exitPictureInPicture:function(){window.document.exitPictureInPicture()},getBufferedRanges:function(){return k(a)},getCanPlayPromise:function(){return new(h||(h=b("Promise")))(function(b,c){a.readyState===4?b():a.addEventListener("canplay",function(){return b()})})},getDOMLoadedMetadataPromise:function(){return new(h||(h=b("Promise")))(function(b,c){a.addEventListener("loadedmetadata",function(){return b()})})},getDroppedFrameCount:function(){return d("VideoPlaybackQuality").getDroppedFrames(a)},getDuration:function(){return j(a)},getEnded:function(){return a.ended},getError:function(){return a.error},getLastBufferEndPosition:function(){return l(a)},getMuted:function(){return a.muted},getNetworkState:function(){return a.networkState},getPaused:function(){return a.paused},getPlaybackRate:function(){return a.playbackRate},getPlayheadPosition:function(){return m(a)},getReadyState:function(){return a.readyState},getTotalFrameCount:function(){return d("VideoPlaybackQuality").getTotalFrames(a)},getUnderlyingVideoElement:function(){return a},getVideoPixelsDimensions:function(){if(a.readyState<a.HAVE_CURRENT_DATA)return null;var b=a.videoWidth,c=a.videoHeight;if(b<=0||c<=0)return null;var d=a.offsetWidth,e=a.offsetHeight;if(d<=0||e<=0)return null;b=b/c;c=d/e;c>b?d=e*b:e=d/b;return{height:e,width:d}},getVolume:function(){return a.volume},pause:function(){a.pause()},play:function(){g||(g=!0,o(i),i=null);var c=a.play();c=c&&typeof c.then==="function"?(h||(h=b("Promise"))).resolve(c):null;return c},requestPictureInPicture:function(){typeof a.requestPictureInPicture==="function"&&a.requestPictureInPicture()},setDuration:function(b){a.duration=b},setMuted:function(b){a.muted=b},setPlaybackRate:function(b){a.playbackRate=b},setPlayheadPosition:function(b){var d=b;if(b===0){b=c("VideoPlayerOzWWWGlobalConfig").getNumber("clamp_seek_to_first_buffer_range_epsilon",0);if(b>0){var e=n(a);e>0&&e<=b&&(d=e)}}a.currentTime=d},setSrc:o,setVolume:function(b){a.volume=b}}}g.getDurationFromVideoElement=j;g.getBufferedRangesFromVideoElement=k;g.getLastBufferEndPositionFromVideoElement=l;g.getPlayheadPositionFromVideoElement=m;g.createVideoPlayerImplementationEngineVideoElementAPI=a}),98);
__d("VideoPlayerProgressiveImplementationData",["err"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return/\.mpd(\?|$)/.test(a)}function a(a){var b=a.hdSrc,d=a.hdSrcPreferred,e=a.isExternalMedia;a=a.sdSrc;if(b==null&&a==null){var f=c("err")("both HD and SD browser-native URLs are not available");f.name="VideoImplementationsNoBrowserNativeURLs";return f}if(a==null){f=c("err")("browser-native SD URL is not available");f.name="VideoImplementationsNoBrowserNativeSDURL";return f}f=h(a);var g=b!=null&&h(b);if(f||g){f=c("err")("HD or SD browser-native URL points to a DASH manifest");f.name="VideoImplementationsBrowserNativeURLsPointToDASH";return f}return{hdSrc:b,hdSrcPreferred:d,isExternalMedia:e===!0,sdSrc:a}}g.makeProgressiveImplementationData=a}),98);
__d("VideoPlayerProgressiveImplementationEngineExtrasAPI",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a!==null&&a.indexOf(".m3u8")!==-1}function a(a){var b=a.getPlayingVideoInfo;a=a.setUserSelectedVideoQuality;function d(){var a=b(),c="progressive_SD",d="progressive_HD";return a==null?null:h(a.hdSrc)||h(a.sdSrc)?null:a.hdSrc!=null&&a.playingSrc===a.hdSrc?d:a.sdSrc!=null&&a.playingSrc===a.sdSrc?c:null}return{getApproximateFBLSToPlayerDisplayLatency:function(){return null},getAudioRepresentationIDAtTime:function(a){if(c("gkx")("440"))return d();else return null},getAvailableAudioTracks:function(){var a;return(a=(a=b())==null?void 0:a.availableAudioTracks)!=null?a:[]},getAvailableVideoQualities:function(){var a;return(a=(a=b())==null?void 0:a.availableQualities)!=null?a:[]},getAvailableVideoTracks:function(){var a;return(a=(a=b())==null?void 0:a.availableVideoTracks)!=null?a:[]},getCurrentAudioRepresentation:function(){return null},getCurrentPlayingAudioTrackID:function(){var a;return(a=(a=b())==null?void 0:a.playingAudioTrackID)!=null?a:null},getCurrentPlayingVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.targetQuality)!=null?a:""},getCurrentTargetVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.targetQuality)!=null?a:""},getCurrentVideoRepresentation:function(){return null},getEstimatedBandwidth:function(){return null},getInbandCaptionsAutogeneratedFromManifest:function(){return!1},getInbandCaptionsExpectedFromManifest:function(){return!1},getManifestIdentifier:function(){return null},getMpdValidationErrors:function(){return null},getPerfLoggerProvider:function(){return null},getRepresentationCaptionsExpectedFromManifest:function(){return!1},getStreamType:function(){var a=b();return a==null?"progressive":h(a.hdSrc)||h(a.sdSrc)?"hls":"progressive"},getUserSelectedAudioTrackID:function(){return null},getUserSelectedVideoQuality:function(){var a;return(a=(a=b())==null?void 0:a.selectedQuality)!=null?a:"notselected"},getVideoProjectionType:function(){return"cubemap"},getVideoRepresentationIDAtTime:function(a){if(c("gkx")("440"))return d();else return"oep_hd"},getVideoRepresentations:function(){return null},isDrm:function(){var a;return((a=b())==null?void 0:a.graphQLVideoDRMInfo)!=null},isFBIsLiveTemplated:function(){return!1},isFBMS:function(){return!1},isFBWasLive:function(){return!1},isPredictiveDash:function(){return!1},setDimensions:function(a){},setEnableLiveheadCatchup:function(){},setLatencyLevel:function(){},setUserSelectedAudioTrackID:function(){},setUserSelectedVideoQuality:a}}g.createVideoPlayerProgressiveImplementationEngineExtrasAPI=a}),98);
__d("VideoPlayerProgressiveImplementationEngineUtils",[],(function(a,b,c,d,e,f){"use strict";var g="hd",h="sd";function a(a){var b=[];a.sdSrc!=null&&b.push(h);a.hdSrc!=null&&b.push(g);var c=[],d=[],e=a.hdSrcPreferred&&a.hdSrc!=null?g:h;return babelHelpers["extends"]({},a,{availableAudioTracks:c,availableQualities:b,availableVideoTracks:d,playingAudioTrackID:null,playingQuality:null,playingSrc:null,selectedQuality:e,targetQuality:e,targetSrc:null})}function b(a,b){var c=a.hdSrc,d=a.sdSrc,e,f;b==="notselected"||b==="auto"?(e=d!=null?h:c!=null?g:h,f=d!=null?d:c!=null?c:null):b===g&&c!=null?(e=g,f=c):b===h&&d!=null?(e=h,f=d):(e=h,f=null);f===""&&(f=null);return babelHelpers["extends"]({},a,{selectedQuality:b,targetQuality:e,targetSrc:f})}function c(a,b,c){return babelHelpers["extends"]({},a,{playingQuality:b,playingSrc:c})}f.createResolvedVideoInfoProgressive=a;f.updatePlayingVideoInfoProgressiveWithUserSelectedQuality=b;f.updatePlayingVideoInfoProgressiveWithCurrentPlayingQuality=c}),66);
__d("VideoPlayerProgressiveImplementationEngine",["Promise","UserAgent","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerProgressiveImplementationEngineExtrasAPI","VideoPlayerProgressiveImplementationEngineUtils","cr:1473550","cr:1680308","emptyFunction","err","getErrorNameFromMediaErrorCode","gkx","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("emptyFunction");function j(a,b,c){return d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError("PROGRESSIVE_JAVASCRIPT_NATIVE",a,b,c)}function a(a){var e=a.checkInDOM,f=a.debugLogId,g=a.handleFatalError,k=a.initialProps;a=a.setExposedStateInReact;var l={current:null},m={current:null},n={current:null},o={current:null},p=function(){var a=v(),e=m.current;if(a==null||e==null)return;a.addEventListener("error",function(){var d=a.error,e=d==null?void 0:d.code,f=c("getErrorNameFromMediaErrorCode")(e);if(c("gkx")("10083")){e=d==null?void 0:d.message;var g=e==null||e===""?"Unknown media error":e,i=[],j=a.src;if(j!=="")(h||(h=b("Promise"))).resolve().then(function(){return window.fetch(j)}).then(function(a){var b,c=a.status;b=(b=a.headers.get("Content-Type"))!=null?b:"unknown";g=g+". Fetched video content with Status:"+c+" Content-Type:"+b;if(c<200||c>=300)return a.text().then(function(a){i.push(a.length.toString()),g+=" Body:%s:"+a.substr(0,200)+(a.length>200?"...":"")},function(){})})["catch"](function(a){typeof a==="object"&&a!=null&&typeof a.name==="string"&&typeof a.message==="string"?g=g+". Failed fetching video content with error: "+a.name+" "+a.message:g=g+". Failed fetching video content with unknown error"})["finally"](function(){var a=c("err").apply(void 0,[g].concat(i));a.name=f;x(a,"progressive_implementation_error_with_more_info")});else{e=c("err").apply(void 0,[g].concat(i));e.name=f;x(e,"progressive_implementation_error_with_empty_src")}}else{d=c("err")((e=d==null?void 0:d.message)!=null?e:"");d.name=f;x(d,"progressive_implementation_error")}});try{var f=e.audioOnly,g=e.graphQLVideoDRMInfo,i=e.videoFBID;f===!0&&(a.style.display="none");f=g?(f=g.fairplayCert)!=null?f:null:null;if(b("cr:1680308")&&g&&f!=null&&i!=null){o.current=b("cr:1680308").newIfSupported(f,a,i,g.videoLicenseUriMap);if(o.current==null){f=c("err")("Fairplay not supported");x(f,"progressive_player_fairplay_handler_missing")}else o.current.addListener("error",function(a){a=c("err")(a.error);x(a,"progressive_player_fairplay_handler_error")})}var j=d("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(a,{enableCrossOriginAnonymous:k.enableCrossOriginAnonymous,isExternalMedia:k.isExternalMedia});z.current=j;n.current=e;i=u();w({inbandCaptionsAutogeneratedFromManifest:s.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:s.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:i==null?void 0:i.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:s.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:i==null?void 0:i.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:i==null?void 0:i.sideLoadCaptionsUrlFromProps});y.dispatch({payload:{availableAudioTracks:s.getAvailableAudioTracks(),availableQualities:s.getAvailableVideoQualities(),availableVideoTracks:s.getAvailableVideoTracks(),selectedAudioTrackID:s.getUserSelectedAudioTrackID(),selectedVideoQuality:s.getUserSelectedVideoQuality(),streamingFormat:s.getStreamType(),targetVideoQuality:s.getCurrentTargetVideoQuality(),videoProjection:s.getVideoProjectionType()},type:"implementation_engine_initialized"});g=function(){j.setPlayheadPosition(k.startTimestamp)};c("UserAgent").isBrowser("IE11")?c("promiseDone")(j.getDOMLoadedMetadataPromise().then(g)):g()}catch(a){x(a,"progressive_player_create_exception")}},q=function(a,b){if(b==null)return!0;else if(a.videoFBID!==b.videoFBID){var c=14;d("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.video_fbid_changed",c);return!1}else if(a.hdSrc!==b.hdSrc||a.sdSrc!==b.sdSrc){c=14;d("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.src_changed",c);return!1}else return!1},r=function(a){var b;b={audioOnly:a.audioOnly,graphQLVideoDRMInfo:(b=a.graphQLVideoDRMInfo)!=null?b:null,hdSrc:a.hdSrc===""?null:(b=a.hdSrc)!=null?b:null,hdSrcPreferred:a.hdSrcPreferred,sdSrc:a.sdSrc===""?null:(b=a.sdSrc)!=null?b:null,videoFBID:a.videoFBID};if(!q(b,l.current))return!1;if(b.hdSrc==null&&b.sdSrc==null)throw c("unrecoverableViolation")("Empty hdSrc and sdSrc","comet_video_player");l.current=b;m.current=d("VideoPlayerProgressiveImplementationEngineUtils").createResolvedVideoInfoProgressive(b);p();return!0},s=d("VideoPlayerProgressiveImplementationEngineExtrasAPI").createVideoPlayerProgressiveImplementationEngineExtrasAPI({getPlayingVideoInfo:function(){if(c("gkx")("440")){var a,b=n.current;if(!b)return null;a=(a=z.current)==null?void 0:a.getUnderlyingVideoElement().currentSrc;return babelHelpers["extends"]({},b,{playingSrc:a!=null&&a!==""?a:null})}else return n.current},setUserSelectedVideoQuality:function(a){var b=n.current;if(!b)throw c("unrecoverableViolation")("Attempt to switch quality when playingVideoInfo does not exist","comet_video_player");var e=z.current;if(!e)throw c("unrecoverableViolation")("Attempt to switch quality when videoElementAPI does not exist","comet_video_player");n.current=d("VideoPlayerProgressiveImplementationEngineUtils").updatePlayingVideoInfoProgressiveWithUserSelectedQuality(b,a);b=n.current.targetSrc;e.setSrc(b);if(b!=null){b=(a=y.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?a:0;b>0&&e.setPlayheadPosition(b);y.getCurrentState().controlledState.playbackState==="playing"&&e.play();y.dispatch({payload:{targetVideoQuality:s.getCurrentTargetVideoQuality()},type:"representation_changed"})}}}),t=function(){o.current&&(o.current.destroy(),o.current=null)};e=d("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({checkInDOM:e,createDebugAPI:function(a){var c=a.getVideoElementAPI;a=a.logger;return b("cr:1473550")?b("cr:1473550").createVideoPlayerImplementationDebugAPI({engineExtrasAPI:s,getVideoElementAPI:c,logger:a}):null},createVideoPlayerError:function(a,b){return j(a,b,(a=n.current)==null?void 0:a.targetSrc)},debugLog:i,debugLogId:f,destroyEngineParts:function(){t()},engineExtrasAPI:s,engineMetadata:{isAbrEnabled:!1,isExternalMedia:k.isExternalMedia,playerVersion:"comet_progressive",streamingFormat:"progressive"},handleFatalError:g,handleVideoElementChanged:function(a){a!=null&&p()},handleVideoInfoChange:r,initialProps:k,setExposedStateInReact:a});f=e.engine;var u=e.getCaptionsInfo,v=e.getVideoElement,w=e.handleCaptionsInfoChange,x=e.handleFatalImplementationError,y=e.machine,z=e.videoElementAPIRef;return f}g.createVideoPlayerProgressiveImplementationEngine=a}),98);
__d("VideoPlayerProgressiveImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerProgressiveImplementationEngine","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){a=d("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(a,d("VideoPlayerProgressiveImplementationEngine").createVideoPlayerProgressiveImplementationEngine);a=a.reactVideoFrameAndComponents;return a}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerSpinner.react",["CometLoadingAnimation.react","gkx","react","stylex","useDebouncedValue"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=36,l={spinner:{height:"xc9qbxq",opacity:"x1hc1fzr",position:"x10l6tqk",start:"xtzzx4i",left:null,right:null,top:"xwa60dl",transform:"x11lhmoz",transitionDelay:"x5w5eug",transitionDuration:"x13dflua",transitionProperty:"x19991ni",transitionTimingFunction:"xl405pv",width:"x14qfxbe",$$css:!0},spinnerHidden:{opacity:"xg01cxk",transitionDelay:"x2p8vrm",transitionDuration:"x13dflua",transitionProperty:"x1jl3cmp",transitionTimingFunction:"xl405pv",visibility:"xlshs6z",$$css:!0},spinnerSnappier:{transitionDelay:"x2p8vrm",$$css:!0},spinnerSnappierHidden:{transitionDelay:"x1ahifba",$$css:!0}};function a(a){a=a.isVisible;var b=c("useDebouncedValue")(a,a?200:500);return j.jsx("div",{className:c("gkx")("24333")?(h||(h=c("stylex")))(l.spinner,l.spinnerSnappier,!a&&l.spinnerHidden,!a&&l.spinnerSnappierHidden):(h||(h=c("stylex")))(l.spinner,!a&&l.spinnerHidden),children:j.jsx(c("CometLoadingAnimation.react"),{animationPaused:!b,size:k})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerViewabilityHooks",["VideoPlayerHooks"],(function(a,b,c,d,e,f,g){"use strict";var h;g.useVideoPlayerExtendedPassiveViewabilityInfo=(h||(h=d("VideoPlayerHooks"))).useVideoPlayerExtendedPassiveViewabilityInfo;g.useVideoPlayerPassiveViewabilityInfo=h.useVideoPlayerPassiveViewabilityInfo;g.useVideoPlayerViewabilityInfo=h.useVideoPlayerViewabilityInfo}),98);
__d("WebSessionExtender",["WebSession","clearInterval","cr:913","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h=2e4,i=new Set(),j=null;function a(a,e){e===void 0&&(e="extender"),i.add(a),j==null&&(d("WebSession").extend(Date.now()+h+2e3),j=c("setInterval")(function(){d("WebSession").extend(Date.now()+h+2e3),b("cr:913")&&new(b("cr:913"))().setClientTime(Date.now()).setWebsessionID(d("WebSession").getId()).setReason(e).log()},h))}function e(a){i["delete"](a);a=i.size;a===0&&j!=null&&(c("clearInterval")(j),j=null)}g.subscribe=a;g.unsubscribe=e}),98);
__d("bs_caml_array",[],(function(a,b,c,d,e,f){"use strict";function a(b,c,a){var d=new Array(a),e=0;c=c;while(e<a)d[e]=b[c],e=e+1|0,c=c+1|0;return d}function g(a,b){while(!0){var c=b,d=a;if(!c)return d;b=c.tl;a=c.hd.length+d|0;continue}}function h(a,b,c){while(!0){var d=c,e=b;if(!d)return;var f=d.hd,g=f.length;e=e;var h=0;while(h<g)a[e]=f[h],e=e+1|0,h=h+1|0;c=d.tl;b=e;continue}}function b(a){var b=g(0,a);b=new Array(b);h(b,0,a);return b}function c(a,b,c){if(b<0||b>=a.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error()};a[b]=c}function d(a,b){if(b<0||b>=a.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error()};return a[b]}function e(a,b){var c=new Array(a);for(var d=0;d<a;++d)c[d]=b;return c}function i(a){var b=new Array(a);for(var c=0;c<a;++c)b[c]=0;return b}function j(b,c,d,e,a){if(e<=c){for(var f=0;f<a;++f)d[f+e|0]=b[f+c|0];return}for(f=a-1|0;f>=0;--f)d[f+e|0]=b[f+c|0]}function k(a){return a.slice(0)}f.dup=k;f.sub=a;f.concat=b;f.make=e;f.make_float=i;f.blit=j;f.get=d;f.set=c}),null);
__d("useVideoPlayerUnifiedCVCProvider",["CvcV3HttpEventFalcoEvent","UnifiedVideoCVCSubscription","VideoPlayerHooks","createVideoStateHook","getPlayerFormatForLogData","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect;b=d("createVideoStateHook").createVideoStateHook(null);var k=b.setterHook;e=d("createVideoStateHook").createVideoStateHook(null);var l=e.setterHook;f=e.valueHook;function a(a){var b=a.disableSubscription,e=a.playerFormat,f=a.subOrigin,g=a.videoFBID,h=(i||(i=d("VideoPlayerHooks"))).useIsLive(),m=i.useIsFullscreen(),n=i.useIsDesktopPictureInPicture(),o=i.useController(),p=k(),q=l();j(function(){if(b===!0){c("CvcV3HttpEventFalcoEvent").log(function(){return{countable_id:g,name:"disable_subscription"}});return}var a=new(c("UnifiedVideoCVCSubscription"))(g,c("getPlayerFormatForLogData")({isDesktopPictureInPicture:n,isFullscreen:m},e),f,o,h,function(a){q(a)});p(a);return function(){a.destroy()}},[n,m,h,b,e,q,p,f,o,g])}b=f;g.useVideoPlayerUnifiedCVCProvider=a;g.useVideoPlayerUnifiedCVCData=b}),98);
__d("wrapWithContextProviders",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b){return b.reduceRight(function(a,b){return b(a)},a)}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){return function(c){return i.jsx(a.Provider,{value:b,children:c})}}g.wrapWithContextProviders=a;g.makeRenderProviderFn=b}),98);/*FB_PKG_DELIM*/
__d("LSContactUtils",["I64","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return!(h||(h=d("I64"))).equal(a.blockedByViewerStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))}function b(a){return(a=d("LSContactBitOffset").has(66,a))!=null?a:!1}g.isContactBlocked=a;g.isContactRestricted=b}),98);
__d("MAWArmadilloAppDataTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={};a.internalSpec={externalId:[1,(d=d("WAProtoConst")).TYPES.STRING],author:[2,d.TYPES.STRING],chat:[3,d.TYPES.STRING]};b.internalSpec={fromMe:[1,d.TYPES.BOOL],id:[2,d.TYPES.STRING]};c.internalSpec={key:[1,d.TYPES.MESSAGE,b],ts:[2,d.TYPES.INT64]};e.internalSpec={lastMessageTimestamp:[1,d.TYPES.INT64],lastSystemMessageTimestamp:[2,d.TYPES.INT64],messages:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,c]};f.internalSpec={type:[1,d.TYPES.STRING],chatJid:[2,d.TYPES.STRING],archived:[3,d.TYPES.BOOL],ts:[4,d.TYPES.INT64],messageRange:[5,d.TYPES.MESSAGE,e],read:[6,d.TYPES.BOOL]};h.internalSpec={type:[1,d.TYPES.STRING],protocolMsgId:[2,d.TYPES.MESSAGE,a]};i.internalSpec={chatAction:[1,d.TYPES.MESSAGE,f],messageAction:[2,d.TYPES.MESSAGE,h],__oneofs__:{action:["chatAction","messageAction"]}};j.internalSpec={actions:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i]};k.internalSpec={id:[1,d.TYPES.UINT64],anonId:[2,d.TYPES.BYTES],rootKey:[3,d.TYPES.BYTES],status:[4,d.TYPES.INT32]};l.internalSpec={backupId:[1,d.TYPES.UINT64],serverDataId:[2,d.TYPES.UINT64],epoch:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,k],tempOcmfClientState:[4,d.TYPES.BYTES],mailboxRootKey:[5,d.TYPES.BYTES],obliviousValidationToken:[6,d.TYPES.BYTES]};m.internalSpec={currentIndex:[1,d.TYPES.UINT32],deviceIndexes:[2,d.FLAGS.REPEATED|d.TYPES.UINT32],rawId:[3,d.TYPES.UINT32]};n.internalSpec={keyId:[1,d.TYPES.BYTES],keyData:[2,d.TYPES.BYTES],keyEpoch:[3,d.TYPES.UINT32],timestamp:[4,d.TYPES.INT64],fingerprint:[5,d.TYPES.MESSAGE,m]};o.internalSpec={keys:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,n],orphanKeys:[2,d.FLAGS.REPEATED|d.TYPES.BYTES]};p.internalSpec={keyIds:[1,d.FLAGS.REPEATED|d.TYPES.BYTES]};q.internalSpec={type:[1,d.TYPES.STRING],actions:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i],encryptedBackupsSecrets:[3,d.TYPES.MESSAGE,l],syncKeyShare:[4,d.TYPES.MESSAGE,o],syncKeyRequest:[5,d.TYPES.MESSAGE,p]};r.internalSpec={deviceJid:[1,d.TYPES.STRING],serializedPubKey:[2,d.TYPES.BYTES],baseKey:[3,d.TYPES.BYTES]};s.internalSpec={externalId:[1,d.TYPES.STRING],ts:[2,d.TYPES.INT64],contents:[3,d.TYPES.MESSAGE,q],permittedIdentitiesPerDevice:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,r],ack:[5,d.TYPES.INT32],appDataId:[6,d.TYPES.INT32],recipientDevices:[7,d.FLAGS.REPEATED|d.TYPES.STRING],sendPartial:[8,d.TYPES.BOOL]};g.ProtocolMsgIdSpec=a;g.MetaSyncMessageKeyProtoSpec=b;g.MetaSyncMessageProtoSpec=c;g.MetaSyncMessageRangeProtoSpec=e;g.MetaSyncChatActionProtoSpec=f;g.MetaSyncMessageActionProtoSpec=h;g.MetaSyncActionProtoSpec=i;g.MetaSyncAppDataProtoSpec=j;g.EncryptedBackupsSecretsEpochProtoSpec=k;g.EncryptedBackupsSecretsProtoSpec=l;g.FingerprintProtoSpec=m;g.SyncKeyDataProtoSpec=n;g.SyncKeyShareProtoSpec=o;g.SyncKeyRequestProtoSpec=p;g.AppDataProtoSpec=q;g.IdentitiesPerDeviceProtoSpec=r;g.AppDataTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloAppMetaTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={msgTypeVersion:[1,(c=d("WAProtoConst")).TYPES.INT32],hmacKey:[2,c.TYPES.BYTES],allowSecurityAlert:[3,c.TYPES.BOOL],hotlikeSticker:[4,c.TYPES.BYTES],isBackfilledForOccamadillo:[5,c.TYPES.BOOL],allowSecurityAlertForSelf:[11,c.TYPES.BOOL],hasMigratedFromDexie:[12,c.TYPES.BOOL],restoreMigrationAttempts:[13,c.TYPES.INT32],deviceJid:[14,c.TYPES.STRING],restoreToDexieMigrationComplete:[15,c.TYPES.BOOL]};b.internalSpec={key:[1,c.TYPES.STRING],value:[2,c.TYPES.MESSAGE,a]};g.DbAppMetaValuesProtoSpec=a;g.AppMetaTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloCollectionVersionsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={collection:[1,(b=d("WAProtoConst")).TYPES.STRING],version:[2,b.TYPES.INT32],state:[3,b.TYPES.STRING],finiteFailureStartTime:[4,b.TYPES.INT64],ltHash:[5,b.TYPES.BYTES],isCollectionInMacMismatchFatal:[6,b.TYPES.BOOL],isCollectionLthashInconsistent:[7,b.TYPES.BOOL]};g.CollectionVersionsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloContactsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};a.internalSpec={ephemeralExpirationInSec:[1,(d=d("WAProtoConst")).TYPES.UINT32],ephemeralLastUpdatedOrSetTimestamp:[2,d.TYPES.INT64]};b.internalSpec={syncResponseRetries:[1,d.TYPES.INT32],syncResponseSentTs:[2,d.TYPES.INT64]};c.internalSpec={sequence:[1,d.TYPES.INT64],timestamp:[2,d.TYPES.INT64],devices:[3,d.FLAGS.REPEATED|d.TYPES.BYTES],signingDeviceIndex:[4,d.TYPES.INT64],dirty:[5,d.TYPES.BOOL]};e.internalSpec={timeBucket:[1,d.TYPES.INT64],alert:[2,d.TYPES.BOOL]};f.internalSpec={contactJid:[1,d.TYPES.STRING],dhash:[3,d.TYPES.STRING],nameForSearch:[4,d.TYPES.STRING],ephemeralSetting:[5,d.TYPES.MESSAGE,a],isBlocked:[6,d.TYPES.BOOL],lastSyncTs:[7,d.TYPES.INT64],icdcInfo:[8,d.TYPES.MESSAGE,c],ephemeralSyncResponseBackoffInfo:[9,d.TYPES.MESSAGE,b],icdcFails:[10,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e],relationship:[11,d.TYPES.INT32],isRestricted:[12,d.TYPES.BOOL]};g.EphemeralSettingProtoSpec=a;g.EphemeralSyncResponseBackoffInfoSpec=b;g.ICDCInfoProtoSpec=c;g.ICDCCheckFailSpec=e;g.ContactsTableSchemaProtoSpec=f}),98);
__d("MAWArmadilloDeletedMessagesTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={author:[1,(b=d("WAProtoConst")).TYPES.STRING],chat:[2,b.TYPES.STRING],externalId:[3,b.TYPES.STRING],reason:[4,b.TYPES.STRING]};g.DeletedMessagesTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloDeviceChangeAlertsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={action:[1,(b=d("WAProtoConst")).TYPES.STRING],isArchived:[2,b.TYPES.BOOL],deviceChangeAlertsId:[3,b.TYPES.INT64],location:[4,b.TYPES.STRING],model:[5,b.TYPES.STRING],ts:[6,b.TYPES.INT64],loggedOut:[7,b.TYPES.BOOL],deviceJid:[8,b.TYPES.STRING],identity:[9,b.TYPES.BYTES],platform:[10,b.TYPES.STRING],latitude:[11,b.TYPES.STRING],longitude:[12,b.TYPES.STRING],isConfirmed:[13,b.TYPES.BOOL],isNotified:[14,b.TYPES.BOOL]};g.DeviceChangeAlertsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloDyiBatchTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={BACKUP_RESTORE:0,E2E_DYI:1};b={};b.internalSpec={batchId:[1,(c=d("WAProtoConst")).TYPES.INT32],numMessages:[2,c.TYPES.INT32],oldestTs:[3,c.TYPES.INT64],threadId:[4,c.TYPES.STRING],isThread:[5,c.TYPES.BOOL],numMessagesRestored:[6,c.TYPES.INT32],qplInstanceKeyForThread:[7,c.TYPES.INT64],qplFlowDescriptor:[8,c.TYPES.ENUM,a],qplInstanceKeyE2E:[9,c.TYPES.INT64],numThreadsRestored:[10,c.TYPES.INT64]};g.DYI_BATCH_TABLE_SCHEMA_PROTO_QPL_FLOW_DESCRIPTOR=a;g.DyiBatchTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloEBMsgRangesTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={rangeId:[1,(b=d("WAProtoConst")).TYPES.UINT32],threadJid:[2,b.TYPES.STRING],minMsgExternalId:[3,b.TYPES.STRING],maxMsgExternalId:[4,b.TYPES.STRING],minMsgSortOrderMs:[5,b.TYPES.UINT64],maxMsgSortOrderMs:[6,b.TYPES.UINT64]};g.EBMsgRangesTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloMessagesTableSchema.pb",["MAWArmadilloContactsTableSchema.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={};b={};c={};e={};f={};var i={},j={},k={},l={},m={};a.internalSpec={content:[1,(h=d("WAProtoConst")).TYPES.STRING],adminMsgContent:[2,h.FLAGS.REPEATED|h.TYPES.STRING],adminType:[3,h.TYPES.STRING],obsoleteExpiration:[4,h.TYPES.INT32],obsoleteTs:[5,h.TYPES.INT64],subtype:[6,h.TYPES.STRING],protobuf:[7,h.TYPES.BYTES],screenshotActionType:[8,h.TYPES.INT32],authorName:[9,h.TYPES.STRING],version:[10,h.TYPES.INT32],mentionedJids:[11,h.FLAGS.REPEATED|h.TYPES.STRING]};b.internalSpec={frankingTag:[1,h.TYPES.BYTES],frankingVersion:[2,h.TYPES.INT32],reportingContent:[3,h.TYPES.BYTES],reportingTag:[4,h.TYPES.BYTES],frankingKey:[5,h.TYPES.BYTES]};c.internalSpec={remoteJid:[1,h.TYPES.STRING],content:[2,h.TYPES.MESSAGE,l]};e.internalSpec={duration:[1,h.TYPES.INT32],width:[2,h.TYPES.INT32],height:[3,h.TYPES.INT32],mimetype:[4,h.TYPES.STRING],jpegThumbnail:[5,h.TYPES.BYTES],jpegThumbnailHeight:[6,h.TYPES.INT32],jpegThumbnailWidth:[7,h.TYPES.INT32]};f.internalSpec={width:[1,h.TYPES.UINT32],height:[2,h.TYPES.UINT32],jpegThumbnail:[3,h.TYPES.BYTES],jpegThumbnailHeight:[4,h.TYPES.INT32],jpegThumbnailWidth:[5,h.TYPES.INT32]};i.internalSpec={duration:[1,h.TYPES.INT32],mimetype:[2,h.TYPES.STRING],played:[3,h.TYPES.BOOL]};j.internalSpec={filename:[1,h.TYPES.STRING],mimetype:[2,h.TYPES.STRING]};k.internalSpec={mediaType:[1,h.TYPES.STRING],plaintextHash:[2,h.TYPES.STRING],size:[3,h.TYPES.INT32],ts:[4,h.TYPES.INT64],mediaEntry:[5,h.TYPES.BYTES],validatedVideoInfo:[6,h.TYPES.MESSAGE,e],validatedImageInfo:[7,h.TYPES.MESSAGE,f],validatedAudioInfo:[8,h.TYPES.MESSAGE,i],validatedDocumentFileInfo:[9,h.TYPES.MESSAGE,j]};l.internalSpec={type:[1,h.TYPES.STRING],ts:[2,h.TYPES.INT64],externalId:[3,h.TYPES.STRING],author:[4,h.TYPES.STRING],msgContent:[5,h.TYPES.MESSAGE,a],obsoleteMedia:[6,h.TYPES.MESSAGE,k],msgId:[7,h.TYPES.STRING],mediaId:[8,h.TYPES.INT32],sourceId:[9,h.TYPES.STRING],xmaMessageType:[10,h.TYPES.INT32],specialTextSize:[11,h.TYPES.INT32]};m.internalSpec={type:[1,h.TYPES.STRING],ts:[2,h.TYPES.INT64],externalId:[3,h.TYPES.STRING],msgId:[4,h.TYPES.STRING],author:[5,h.TYPES.STRING],ack:[6,h.TYPES.INT32],resendCount:[7,h.TYPES.INT32],msgContent:[8,h.TYPES.MESSAGE,a],altIndex:[9,h.TYPES.STRING],forwardingScore:[10,h.TYPES.INT32],quote:[11,h.TYPES.MESSAGE,c],messageExpirationTs:[12,h.TYPES.INT64],ephemeralSetting:[13,h.TYPES.MESSAGE,d("MAWArmadilloContactsTableSchema.pb").EphemeralSettingProtoSpec],revokedExternalId:[14,h.TYPES.STRING],isForwarded:[15,h.TYPES.BOOL],originalTs:[17,h.TYPES.INT64],sortOrderMs:[18,h.TYPES.INT64],reportingMeta:[19,h.TYPES.MESSAGE,b],messageDeleteTs:[20,h.TYPES.INT64],ephemeralCounterStarted:[21,h.TYPES.BOOL],quoteExternalId:[22,h.TYPES.STRING],unsendMsgContentDeleteTs:[23,h.TYPES.INT64],rowId:[24,h.TYPES.INT32],thread:[25,h.TYPES.INT32],mediaId:[26,h.TYPES.INT32],ephemeralMsgDisappeared:[27,h.TYPES.BOOL],threadJid:[28,h.TYPES.STRING],xmaId:[29,h.TYPES.INT32],specialTextSize:[30,h.TYPES.INT32],xmaMessageType:[31,h.TYPES.INT32],isExpiredXmaMsg:[32,h.TYPES.BOOL],ravenEphemeralType:[33,h.TYPES.INT32],ravenEphemeralMediaState:[34,h.TYPES.INT32],editCount:[35,h.TYPES.INT32]};g.MsgContentProtoSpec=a;g.ReportingMetaProtoSpec=b;g.DbQuotedMsgProtoSpec=c;g.VideoMsgContentProtoSpec=e;g.ImageMsgContentProtoSpec=f;g.AudioMsgContentProtoSpec=i;g.DocumentFileMsgContentProtoSpec=j;g.QuotedDbMediaProtoSpec=k;g.DbQuotedMsgContentProtoSpec=l;g.MessagesTableSchemaProtoSpec=m}),98);
__d("MAWArmadilloEditMsgHistoryTableSchema.pb",["MAWArmadilloMessagesTableSchema.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={author:[1,(b=d("WAProtoConst")).TYPES.STRING],editMsgHistoryId:[2,b.TYPES.INT32],editTs:[3,b.TYPES.INT64],msgContent:[4,b.TYPES.MESSAGE,d("MAWArmadilloMessagesTableSchema.pb").MsgContentProtoSpec],originalMsgExternalId:[5,b.TYPES.STRING],specialTextSize:[6,b.TYPES.INT32],threadJid:[7,b.TYPES.STRING],editExternalId:[8,b.TYPES.STRING],sendStatus:[9,b.TYPES.INT32]};g.EditMsgHistoryTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloGroupInfoTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={groupJid:[1,(b=d("WAProtoConst")).TYPES.STRING],threadId:[2,b.TYPES.INT32],creator:[3,b.TYPES.STRING],creationTs:[4,b.TYPES.INT64],name:[5,b.TYPES.STRING],nameOwner:[6,b.TYPES.STRING],nameTs:[7,b.TYPES.INT64],msgExpiration:[8,b.TYPES.INT32],participantVersion:[9,b.TYPES.STRING],inviter:[10,b.TYPES.STRING],memberAddMode:[11,b.TYPES.STRING]};g.GroupInfoSchemaProtoSpec=a}),98);
__d("MAWArmadilloGroupInvitesTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={inviterJid:[1,(b=d("WAProtoConst")).TYPES.STRING],invitedParticipantId:[2,b.TYPES.STRING],inviteCode:[3,b.TYPES.STRING],inviteExpirationTs:[4,b.TYPES.INT64],caption:[5,b.TYPES.STRING]};g.GroupInvitesTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloMediaTablesSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={};a.internalSpec={plaintextHash:[1,(d=d("WAProtoConst")).TYPES.STRING],blobData:[2,d.TYPES.BYTES],mimetype:[3,d.TYPES.STRING],hashedPlaintextHash:[4,d.TYPES.STRING],chunkId:[5,d.TYPES.INT32]};b.internalSpec={mediaBackupId:[1,d.TYPES.INT32],mediaId:[2,d.TYPES.INT32],objectId:[3,d.TYPES.STRING],msgId:[4,d.TYPES.STRING],fbid:[5,d.TYPES.STRING]};c.internalSpec={msgId:[1,d.TYPES.STRING],mediaEntryData:[2,d.TYPES.BYTES]};e.internalSpec={duration:[1,d.TYPES.UINT32],width:[2,d.TYPES.UINT32],height:[3,d.TYPES.UINT32],mimetype:[4,d.TYPES.STRING],jpegThumbnail:[5,d.TYPES.BYTES],jpegThumbnailHeight:[6,d.TYPES.UINT32],jpegThumbnailWidth:[7,d.TYPES.UINT32],thumbnailPlaintextHash:[8,d.TYPES.STRING]};f.internalSpec={width:[1,d.TYPES.UINT32],height:[2,d.TYPES.UINT32],jpegThumbnail:[3,d.TYPES.BYTES],jpegThumbnailHeight:[4,d.TYPES.UINT32],jpegThumbnailWidth:[5,d.TYPES.UINT32],thumbnailPlaintextHash:[6,d.TYPES.STRING]};h.internalSpec={duration:[1,d.TYPES.UINT32],mimetype:[2,d.TYPES.STRING],played:[3,d.TYPES.BOOL]};i.internalSpec={filename:[1,d.TYPES.STRING],mimetype:[2,d.TYPES.STRING]};j.internalSpec={mediaType:[1,d.TYPES.STRING],plaintextHash:[2,d.TYPES.STRING],size:[3,d.TYPES.UINT64],mediaEntries:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,c],ts:[5,d.TYPES.INT64],validatedVideoInfo:[6,d.TYPES.MESSAGE,e],validatedImageInfo:[7,d.TYPES.MESSAGE,f],validatedAudioInfo:[8,d.TYPES.MESSAGE,h],hashedPlaintextHash:[9,d.TYPES.STRING],mediaId:[10,d.TYPES.INT32],msgIds:[11,d.FLAGS.REPEATED|d.TYPES.STRING],objectId:[12,d.TYPES.STRING],fbid:[13,d.TYPES.STRING],validatedDocumentFileInfo:[14,d.TYPES.MESSAGE,i]};g.ChunkTableSchemaProtoSpec=a;g.MediaBackupSchemaProtoSpec=b;g.MediaEntriesProtoSpec=c;g.VideoMsgContentProtoSpec=e;g.ImageMsgContentProtoSpec=f;g.AudioMsgContentProtoSpec=h;g.DocumentFileMsgContentProtoSpec=i;g.MediaTableSchemaProtoSpec=j}),98);
__d("MAWArmadilloMetaRowTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={};a.internalSpec={encryptedSerializedCat:[1,(d=d("WAProtoConst")).TYPES.STRING],expirationTimeInSeconds:[2,d.TYPES.INT32]};b.internalSpec={publicKey:[1,d.TYPES.BYTES],privateKey:[2,d.TYPES.BYTES]};c.internalSpec={intValue:[1,d.TYPES.INT32],strValue:[2,d.TYPES.STRING],boolValue:[3,d.TYPES.BOOL],__oneofs__:{value:["intValue","strValue","boolValue"]}};e.internalSpec={name:[1,d.TYPES.STRING],value:[2,d.TYPES.MESSAGE,c]};f.internalSpec={expoKey:[1,d.TYPES.INT32],value:[2,d.TYPES.STRING]};h.internalSpec={abKey:[1,d.TYPES.STRING],abHash:[2,d.TYPES.STRING],lastSyncTime:[3,d.TYPES.INT64],expoKeyStr:[4,d.TYPES.STRING],refresh:[5,d.TYPES.INT64],internalExpoKeys:[6,d.FLAGS.REPEATED|d.TYPES.STRING],propExpoKeys:[7,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f],propValues:[8,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e]};i.internalSpec={key:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],notAfter:[2,d.FLAGS.REQUIRED|d.TYPES.INT32],notBefore:[3,d.FLAGS.REQUIRED|d.TYPES.INT32]};j.internalSpec={leaf:[1,d.TYPES.MESSAGE,i],intermediate:[2,d.TYPES.MESSAGE,i]};k.internalSpec={cat:[1,d.TYPES.MESSAGE,a],deviceUUID:[2,d.TYPES.STRING],regId:[3,d.TYPES.INT32],identityKeyPair:[4,d.TYPES.MESSAGE,b],fbid:[5,d.TYPES.STRING],deviceId:[6,d.TYPES.INT32],lastSignedPrekeyId:[7,d.TYPES.INT32],lastPrekeyId:[8,d.TYPES.INT32],lastPrekeyGenerationId:[9,d.TYPES.INT32],edgeInfo:[10,d.TYPES.BYTES],clockSkew:[11,d.TYPES.INT32],msgrDeviceId:[12,d.TYPES.STRING],abProps:[13,d.TYPES.MESSAGE,h],registrationVersion:[14,d.TYPES.INT32],authKeyPair:[15,d.TYPES.MESSAGE,b],certificateChain:[16,d.TYPES.MESSAGE,j],lastSessionDeviceWasLinkedTo:[17,d.TYPES.STRING],restoreMigrationAttempts:[18,d.TYPES.INT32],__oneofs__:{value:["cat","deviceUUID","regId","identityKeyPair","fbid","deviceId","lastSignedPrekeyId","lastPrekeyId","lastPrekeyGenerationId","edgeInfo","clockSkew","msgrDeviceId","abProps","registrationVersion","authKeyPair","certificateChain","lastSessionDeviceWasLinkedTo","restoreMigrationAttempts"]}};l.internalSpec={key:[1,d.TYPES.STRING],value:[2,d.TYPES.MESSAGE,k]};g.ValidCatProtoSpec=a;g.KeyPairProtoSpec=b;g.AbPropTypeSpec=c;g.AbPropValueSpec=e;g.ExpoKeyMapSpec=f;g.AbPropsConfigSpec=h;g.CertificateDetailsSpec=i;g.CertificateChainSpec=j;g.ValueProtoSpec=k;g.MetaRowTableSchemaProtoSpec=l}),98);
__d("MAWArmadilloMissingKeysTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={deviceId:[1,(c=d("WAProtoConst")).TYPES.INT32],deviceResponse:[2,c.TYPES.BOOL]};b.internalSpec={keyHex:[1,c.TYPES.STRING],keyId:[2,c.TYPES.BYTES],timestamp:[3,c.TYPES.INT64],deviceResponses:[4,c.FLAGS.REPEATED|c.TYPES.MESSAGE,a]};g.DeviceResponseSpec=a;g.MissingKeysTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloParticipantsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={id:[1,(b=d("WAProtoConst")).TYPES.STRING],userJid:[2,b.TYPES.STRING],deliveredWatermarkTs:[3,b.TYPES.INT64],lastReadWatermarkTs:[4,b.TYPES.INT64],type:[5,b.TYPES.STRING],addressable:[6,b.TYPES.BOOL],lastReadActionTs:[7,b.TYPES.INT64],threadId:[9,b.TYPES.INT32],threadJid:[10,b.TYPES.STRING]};g.ParticipantsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloPendingMutationsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={SET:0,REMOVE:1};b={};b.internalSpec={id:[1,(c=d("WAProtoConst")).TYPES.INT32],collection:[2,c.TYPES.STRING],index:[3,c.TYPES.STRING],binarySyncAction:[4,c.TYPES.BYTES],version:[5,c.TYPES.INT32],operation:[6,c.TYPES.ENUM,a],timestamp:[7,c.TYPES.INT64],action:[8,c.TYPES.STRING]};g.SYNCD_MUTATION_SYNCD_OPERATION=a;g.PendingMutationsTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={groupJid:[1,(b=d("WAProtoConst")).TYPES.STRING],senderKeyId:[2,b.TYPES.INT32],rotateSenderKey:[4,b.TYPES.BOOL],senderKeyTs:[5,b.TYPES.INT64],hasSenderKey:[6,b.FLAGS.REPEATED|b.TYPES.STRING]};g.PersonalSenderKeyStatusTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloReactionsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={ack:[1,(b=d("WAProtoConst")).TYPES.INT32],author:[2,b.TYPES.STRING],externalId:[3,b.TYPES.STRING],reactionId:[4,b.TYPES.STRING],reactToExternalId:[5,b.TYPES.STRING],reactToAuthor:[6,b.TYPES.STRING],reactToMsgId:[7,b.TYPES.STRING],threadJid:[8,b.TYPES.STRING],reaction:[9,b.TYPES.STRING],groupingKey:[10,b.TYPES.STRING],ts:[11,b.TYPES.INT64],rowId:[12,b.TYPES.INT32]};g.ReactionsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloReceiptTablesSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={};a.internalSpec={deliveredTs:[1,(d=d("WAProtoConst")).TYPES.INT64],readTs:[2,d.TYPES.INT64]};b.internalSpec={userJid:[1,d.TYPES.STRING],dbUserStatusTs:[2,d.TYPES.MESSAGE,a]};c.internalSpec={deviceJid:[1,d.TYPES.STRING],serializedPubKey:[2,d.TYPES.BYTES],baseKey:[3,d.TYPES.BYTES]};e.internalSpec={deviceJid:[1,d.TYPES.STRING],count:[2,d.TYPES.INT32]};f.internalSpec={msgId:[1,d.TYPES.STRING],statusTsPerUser:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,b],permittedIdentitiesPerDevice:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,c],recipientDevices:[4,d.FLAGS.REPEATED|d.TYPES.STRING],retryCountsPerDevice:[5,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e],waMsgId:[6,d.TYPES.STRING]};h.internalSpec={device:[1,d.TYPES.STRING],ts:[2,d.TYPES.INT64]};i.internalSpec={pendingReceiptId:[1,d.TYPES.STRING],thread:[2,d.TYPES.STRING],externalId:[3,d.TYPES.STRING],author:[4,d.TYPES.STRING],deliveryReceipts:[5,d.FLAGS.REPEATED|d.TYPES.MESSAGE,h],readReceipts:[6,d.FLAGS.REPEATED|d.TYPES.MESSAGE,h]};g.DbUserStatusTsProtoSpec=a;g.StatusTsPerUserProtoSpec=b;g.IdentitiesPerDeviceProtoSpec=c;g.RetryCountPerDeviceProtoSpec=e;g.ReceiptsTableSchemaProtoSpec=f;g.ReceiptsSpec=h;g.PendingReceiptsTableSchemaProtoSpec=i}),98);
__d("MAWArmadilloRetroactiveBackupsStateTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={threadId:[1,d("WAProtoConst").TYPES.INT64],msgId:[2,d("WAProtoConst").TYPES.STRING]};g.RetroactiveBackupsStateTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloSignalTablesSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={};a.internalSpec={deviceJid:[1,(d=d("WAProtoConst")).TYPES.STRING],identity:[2,d.TYPES.BYTES],firstSeenTs:[3,d.TYPES.INT64],deviceName:[4,d.TYPES.STRING],platform:[5,d.TYPES.STRING],userJid:[6,d.TYPES.STRING]};b.internalSpec={keyId:[1,d.TYPES.INT32],encoded:[2,d.TYPES.BYTES],isDeleted:[3,d.TYPES.BOOL]};c.internalSpec={generationId:[1,d.TYPES.INT32],startingId:[2,d.TYPES.INT32],endingId:[3,d.TYPES.INT32],createdTs:[4,d.TYPES.INT64]};e.internalSpec={id:[1,d.TYPES.STRING],session:[2,d.TYPES.BYTES]};f.internalSpec={keyId:[1,d.TYPES.INT32],encoded:[2,d.TYPES.BYTES]};h.internalSpec={id:[1,d.TYPES.STRING],groupJid:[2,d.TYPES.STRING],userJid:[3,d.TYPES.STRING],deviceId:[4,d.TYPES.INT32],record:[5,d.TYPES.BYTES]};g.IdentityTableSchemaProtoSpec=a;g.PrekeyTableSchemaProtoSpec=b;g.PrekeyGenerationTableSchemaProtoSpec=c;g.SessionTableSchemaProtoSpec=e;g.SignedPrekeyTableSchemaProtoSpec=f;g.SenderKeySessionsTableSchemaProtoSpec=h}),98);
__d("MAWArmadilloSyncActionsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={index:[1,(b=d("WAProtoConst")).TYPES.STRING],binarySyncData:[2,b.TYPES.BYTES],actionState:[3,b.TYPES.STRING],version:[4,b.TYPES.INT32],keyId:[5,b.TYPES.BYTES],modelId:[6,b.TYPES.STRING],modelType:[7,b.TYPES.STRING],indexMac:[8,b.TYPES.BYTES],valueMac:[9,b.TYPES.BYTES],collection:[10,b.TYPES.STRING],timestamp:[11,b.TYPES.INT64],action:[12,b.TYPES.STRING]};g.SyncActionsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloSyncKeysTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={currentIndex:[1,(c=d("WAProtoConst")).TYPES.INT32],deviceIndexes:[2,c.FLAGS.REPEATED|c.TYPES.INT32],rawId:[3,c.TYPES.INT64]};b.internalSpec={id:[1,c.TYPES.BYTES],keyId:[2,c.TYPES.BYTES],keyData:[3,c.TYPES.BYTES],keyEpoch:[4,c.TYPES.INT64],timestamp:[5,c.TYPES.INT64],fingerprint:[6,c.TYPES.MESSAGE,a]};g.SyncKeyFingerprintSpec=a;g.SyncKeysTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloTasksTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={taskName:[1,d("WAProtoConst").TYPES.STRING],scheduledTime:[2,d("WAProtoConst").TYPES.INT64]};g.TasksTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloThreadsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={jid:[1,(b=d("WAProtoConst")).TYPES.STRING],threadOrder:[2,b.TYPES.STRING],folder:[4,b.TYPES.INT32],newestMsg:[5,b.TYPES.STRING],oldestMsg:[6,b.TYPES.STRING],lastReadMsg:[7,b.TYPES.STRING],lastReadMsgReceiptSent:[8,b.TYPES.STRING],lastReadMsgTs:[9,b.TYPES.INT64],newestMsgTs:[10,b.TYPES.INT64],muteExpireTimeMs:[11,b.TYPES.INT64],muteCallsExpireTimeMs:[12,b.TYPES.INT64],archived:[13,b.TYPES.BOOL],cannotReplyReason:[14,b.TYPES.STRING],chatId:[15,b.TYPES.INT32],optimisticThreadKey:[16,b.TYPES.STRING],isMigratedLocally:[17,b.TYPES.BOOL],snippetMsg:[18,b.TYPES.STRING],deduplicationKey:[19,b.TYPES.STRING],authoritativeThreadKey:[20,b.TYPES.STRING],snippetMsgTs:[21,b.TYPES.INT64],didInsertDualThreadCutoverAdminMsg:[22,b.TYPES.BOOL]};g.ThreadsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloUnrenderedMessagesTableSchema.pb",["MAWArmadilloContactsTableSchema.pb","MAWArmadilloMessagesTableSchema.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={type:[1,(b=d("WAProtoConst")).TYPES.STRING],ts:[2,b.TYPES.INT64],externalId:[3,b.TYPES.STRING],msgId:[4,b.TYPES.STRING],author:[5,b.TYPES.STRING],ack:[6,b.TYPES.INT32],resendCount:[7,b.TYPES.INT32],ephemeralSetting:[8,b.TYPES.MESSAGE,d("MAWArmadilloContactsTableSchema.pb").EphemeralSettingProtoSpec],messageDeleteForMeTs:[9,b.TYPES.INT64],rowId:[10,b.TYPES.INT32],thread:[11,b.TYPES.INT32],mediaId:[12,b.TYPES.INT32],msgContent:[13,b.TYPES.STRING],threadJid:[14,b.TYPES.STRING],reportingMeta:[15,b.TYPES.MESSAGE,d("MAWArmadilloMessagesTableSchema.pb").ReportingMetaProtoSpec],invitedParticipantUserJid:[16,b.TYPES.STRING],groupName:[17,b.TYPES.STRING],quote:[18,b.TYPES.MESSAGE,d("MAWArmadilloMessagesTableSchema.pb").DbQuotedMsgProtoSpec],xmaMessageType:[19,b.TYPES.INT32],sortOrderMs:[20,b.TYPES.INT64]};g.UnrenderedMessagesTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloXMATableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={associatedMessageId:[1,(c=d("WAProtoConst")).TYPES.STRING],author:[2,c.TYPES.STRING],ctas:[3,c.FLAGS.REPEATED|c.TYPES.MESSAGE,b],defaultCTA:[4,c.TYPES.MESSAGE,b],defaultPreviewMediaId:[5,c.TYPES.INT32],externalId:[6,c.TYPES.STRING],faviconMediaId:[7,c.TYPES.INT32],headerMediaId:[8,c.TYPES.INT32],headerTitle:[9,c.TYPES.STRING],isTombstoned:[10,c.TYPES.BOOL],maxSubtitleNumOfLines:[11,c.TYPES.INT32],maxTitleNumOfLines:[12,c.TYPES.INT32],msgId:[13,c.TYPES.STRING],overlayDescription:[14,c.TYPES.STRING],overlayIconGlyph:[15,c.TYPES.INT32],overlayTitle:[16,c.TYPES.STRING],previewMediaIds:[17,c.FLAGS.REPEATED|c.TYPES.INT32],subtitleText:[18,c.TYPES.STRING],targetExpiringAtSec:[19,c.TYPES.INT64],targetId:[20,c.TYPES.STRING],targetType:[21,c.TYPES.INT32],targetUsername:[22,c.TYPES.STRING],threadJid:[23,c.TYPES.STRING],titleText:[24,c.TYPES.STRING],xmaId:[25,c.TYPES.INT32],xmaLayoutType:[26,c.TYPES.INT32]};b.internalSpec={buttonType:[1,c.TYPES.INT32],title:[2,c.TYPES.STRING],actionUrl:[3,c.TYPES.STRING],nativeUrl:[4,c.TYPES.STRING],ctaType:[5,c.TYPES.STRING]};g.XMATableSchemaProtoSpec=a;g.CTAProtoSpec=b}),98);
__d("MAWDBRestoreConfig",["ReStoreDbConfigStore"],(function(a,b,c,d,e,f,g){"use strict";var h={lockVersion:9,name:d("ReStoreDbConfigStore").DB_CONFIG_KEY};function a(){return{defaultConfig:h,isEqual:function(a){return(a==null?void 0:a.lockVersion)==null?!1:(a==null?void 0:a.lockVersion)===h.lockVersion}}}g.createConfig=a}),98);
__d("MAWDataSyncQueue",["MAWQplProxy","Promise","WALogger","asyncToGeneratorRuntime","qex","qpl","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unhandled exception caught in middleware "," sync: ",""]);i=function(){return a};return a}var j=c("qex")._("853")||1e3;a=c("qex")._("855")||1e3;e=function(){m=!1;return r({isUnloading:!0})};var k=[],l=[],m=!1,n=[],o=function(){var a,b=k.splice(0,k.length);(a=l).push.apply(a,b)},p=function(){return l.splice(0,j)},q=function a(c,e){var f=p();if(f.length===0)return;c.addPoint("processing_batch");return(h||(h=b("Promise"))).all(n.map(function(a,b){return a(f,e)["catch"](function(a){d("WALogger").ERROR(i(),b,a)})})).then(function(){return a(c,e)})},r=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(m)return;m=!0;var b=d("MAWQplProxy").startQplUserFlow(c("qpl")._(1056849784,"272"));b.addPoint("processing_queue",{"int":{queueSize:k.length}});o();try{yield q(b,a),b.endSuccess()}catch(a){b.endFail("handler_failed_execution");throw a}finally{m=!1,k.length>0&&s()}});return function(b){return a.apply(this,arguments)}}(),s=c("throttle")(r,a);f=function(a,b){k.push({type:a,value:b}),s()};a=function(a){n.some(function(b){return b===a})||n.push(a)};var t=function(){n=[]},u=function(){k=[],l=[]},v=function(){return k};g.forceFlushDataSyncQueue=e;g.addSyncItem=f;g.registerDataSyncCallback=a;g.clearDataSyncCallbacks=t;g.clearDataSyncQueue_FOR_TESTING_ONLY=u;g.getDataSyncQueue_FOR_TESTING_ONLY=v}),98);
__d("MAWDataSyncMiddleware",["FBLogger","MAWDataSyncQueue"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(["contacts","groupInfo","messages","participants","threads","reactions","dyiBatch","xma","pendingStanzas"]);function i(a,b){var c=a.table(b);return!h.has(b)?c:babelHelpers["extends"]({},c,{mutate:function(a){return c.mutate(a).then(function(c){if(a.type==="delete"){a.keys.forEach(function(c){d("MAWDataSyncQueue").addSyncItem(a.type,{key:c,tableName:b})});return c}else c.results!=null?c.results.forEach(function(c){d("MAWDataSyncQueue").addSyncItem(a.type,{key:c,tableName:b,values:a.values})}):c.lastResult!=null&&d("MAWDataSyncQueue").addSyncItem(a.type,{key:c.lastResult,tableName:b,values:a.values});return c})}})}function a(){return{create:function(a){try{return babelHelpers["extends"]({},a,{table:function(b){return i(a,b)}})}catch(b){c("FBLogger")("mpf_web_foundations").catching(b).mustfix("Error applying DataSync Middleware, messages made during this session will not be properly synced to registered consumers");return a}},name:"MAWDataSyncMiddleware",stack:"dbcore"}}g.getDataSyncMiddleware=a}),98);
__d("MAWDbAppMeta",[],(function(a,b,c,d,e,f){"use strict";a={allowSecurityAlert:"allowSecurityAlert",allowSecurityAlertForSelf:"allowSecurityAlertForSelf",deviceJid:"deviceJid",hasMigratedFromDexie:"hasMigratedFromDexie",hmacKey:"hmacKey",hotlikeSticker:"hotlikeSticker",isBackfilledForOccamadillo:"isBackfilledForOccamadillo",msgTypeVersion:"msgTypeVersion",restoreMigrationAttempts:"restoreMigrationAttempts",restoreToDexieMigrationComplete:"restoreToDexieMigrationComplete"};f.AppMetaKeysEnum=a}),66);
__d("MAWDbThread",["MAWHexUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+b}g.craftThreadOrder=a}),98);
__d("MAWDexieTable",["Promise","dexie_maw"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return(h||(h=b("Promise"))).resolve(a)}function a(a){return a.reduce(function(a,b,c){return a.then(function(a){return b(c).then(function(b){a.push(b);return a})})},m([]))}function e(a){return c("dexie_maw").Promise.all(a)}function f(a){return c("dexie_maw").Promise.PSD[a]}function j(a,b){c("dexie_maw").Promise.PSD[a]=b}function k(a){c("dexie_maw").Promise.PSD[a]=void 0}var l=function(){function a(a,b,d,e){d===void 0&&(d=!0);e=new(c("dexie_maw"))(a,babelHelpers["extends"]({chromeTransactionDurability:"relaxed"},e));b(e);this.name=a;this.stores=e;d&&this.open()}var b=a.prototype;b.open=function(){this.stores.open()};b.close=function(){this.stores.close()};b.transact=function(a,b,c){var d=this;return i(this.stores.transaction(a,b.map(function(a){return d.stores[a]}),function(){return c()}))};babelHelpers.createClass(a,[{key:"tables",get:function(){return this.stores.tables}}]);return a}();function m(a){return c("dexie_maw").Promise.resolve(a)}function n(a){return c("dexie_maw").waitFor(a)}g.DEXIE_MIN_KEY=d("dexie_maw").Dexie.minKey;g.DEXIE_MAX_KEY=d("dexie_maw").Dexie.maxKey;g.undexify=i;g.dexieSequentialAll=a;g.dexieAll=e;g.getDexiePSDItem=f;g.setDexiePSDItem=j;g.clearDexiePSDItem=k;g.DexieTable=l;g.dexieResolve=m;g.dexieExpensiveAwait=n}),98);
__d("MAWDbSchema.dexie",["MAWDbMsg","MAWDbThread","MAWDbVersionList","MAWDexieTable","MAWFolderTypes","MAWLocalizationType","MAWODSProxy","MAWTimeUtils","MAWWaitForBackendSetup","SignalDbTypes","WAJids","WALogger","WAMsg","WAMsgType","WAOdsEnums","WAStanzaUtils","WATimeUtils","dexie_maw","gkx","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Duplicate waMsgId found for receipt, number of duplicates: ",""]);i=function(){return a};return a}a=function(a){var b=function(a){var b;b=(b=a.quote)==null?void 0:b.content;return a.quoteExternalId!=null&&(b==null?void 0:b.media)!=null};return a.messages.where("quoteExternalId").between(d("WAStanzaUtils").toStanzaId("0"),d("WAStanzaUtils").toStanzaId("["),!0,!0).filter(b).toArray()["catch"](function(){return a.messages.filter(b).toArray()}).then(function(b){var c=new Set(b.map(function(a){a=(a=a.quote)==null?void 0:a.content;return a==null?void 0:(a=a.media)==null?void 0:a.plaintextHash}).filter(Boolean)),d=b.map(function(a){a=a.msgId;return a});return a.media.filter(function(a){a=a.plaintextHash;return c.has(a)}).toArray().then(function(b){var c=new Map(b.map(function(a){var b=a.mediaId;a=a.plaintextHash;return[a,b]}));return a.messages.where("msgId").anyOf(d).modify(function(a){var b;b=(b=a.quote)==null?void 0:b.content;a.quote.content.mediaId=c.get(b.media.plaintextHash);delete a.quote.content.media})})})};b=function(a){return a.groupInfo.toCollection().modify(function(a){typeof a.inviter==="number"&&delete a.inviter})};e=function(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.deviceId).then(function(b){var c;if((b==null?void 0:(c=b.value)==null?void 0:c.deviceId)!=null&&typeof b.value.deviceId!=="number")return a.meta.clear()})};f=function(a){return a.threads.filter(function(a){return d("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(){return!1},user:function(){return a.oldestMsg!=null}})}).toArray().then(function(b){var c=[];b.forEach(function(a){c.push(a.oldestMsg),c.push(a.newestMsg)});return a.messages.where("msgId").anyOf(c.filter(Boolean)).toArray().then(function(c){var e=new Map(),f=[],g=[];c.forEach(function(a){e.set(a.msgId,a)});b.forEach(function(b){var c=e.get(b.oldestMsg),h=e.get(b.newestMsg);(c==null?void 0:c.type)==="Admin"&&(h==null?void 0:h.type)==="Admin"&&(c.msgId===h.msgId?g.push(b.chatId):f.push(b));return d("MAWDexieTable").dexieAll(f.map(function(b){return a.messages.where("thread").equals(b.chatId).toArray()})).then(function(b){b.forEach(function(a){if(a.length===0)return;var b=a[0].thread;a=a.filter(function(a){return a.type!=="Admin"});if(a.length>0)return;g.push(b)});return d("MAWDexieTable").dexieAll([a.threads.bulkDelete(g),a.messages.where("thread").anyOf(g)["delete"]()])})})})})};var j=function(a){return a.unrenderedMessages.toCollection().modify(function(a){if(a.type===d("WAMsgType").MSG_TYPE.DELETE_FOR_ME){var b=a.messageDeleteForMeTs;a.messageDeleteForMeTs=b}})},k=function(a){var b=0,e=0,f=c("dexie_maw").currentTransaction;if(f==null)throw c("unrecoverableViolation")("transaction does not exist","messenger_e2ee_web");f.on("complete",function(){c("promiseDone")(d("MAWWaitForBackendSetup").waitForBackendSetup("DB upgrade to V31").then(function(){b>0&&d("MAWODSProxy").odsBumpEntityKey({amount:b,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING_THREAD_JID,key:"fail"}),e>0&&d("MAWODSProxy").odsBumpEntityKey({amount:e,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING,key:"fail"})}))});f.on("complete",function(){b>0&&d("MAWODSProxy").odsBumpEntityKey({amount:b,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING_THREAD_JID,key:"fail"}),e>0&&d("MAWODSProxy").odsBumpEntityKey({amount:e,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING,key:"fail"})});return a.threads.toArray().then(function(c){var f=c.reduce(function(a,b){b!=null&&a.set(b.chatId,b);return a},new Map());return d("MAWDexieTable").dexieAll([a.messages.toCollection().modify(function(a){if(a!=null){var c=f.get(a.thread);c!=null?a.threadJid=c.jid:b+=1}else e+=1}),a.unrenderedMessages.toCollection().modify(function(a){if(a!=null){var c=f.get(a.thread);c!=null?a.threadJid=c.jid:b+=1}else e+=1})])})},l=function(a){return a.isDualSend.toCollection().modify(function(a){a.version==null&&(a.version=1)})},m=function(a){return a.messages.toCollection().modify(function(a){a.type===d("WAMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION&&(a.altIndex=d("MAWDbMsg").craftE2eeAdminMsgAltIndex(a.thread))})},n=function(a){return a.messages.toCollection().modify(function(a){a.sortOrderMs=d("MAWDbMsg").getSortOrderWithFallback(a)})},o=function(a){return a.threads.toCollection().modify(function(a){a.folder==null&&(a.folder=d("MAWFolderTypes").FOLDER_ID.INBOX)})},p=function(a){return a.messages.toCollection().modify(function(a){a.sortOrderMs=d("MAWDbMsg").getSortOrderWithFallback(a)})},q=function(a){return a.personalSenderKeyStatuses.toCollection().modify(function(a){a.rotateSenderKey=!0,a.hasSenderKey=new Set()})},r=function(a){return a.messages.toCollection().modify(function(a){a.type===d("WAMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&a.sortOrderMs!=null&&a.sortOrderMs>0&&(a.sortOrderMs=0)})},s=function(a){return a.messages.toCollection().modify(function(a){!(a.type===d("WAMsgType").MSG_TYPE.ADMIN&&(a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION))&&a.sortOrderMs!=null&&a.sortOrderMs<1661204086&&(a.sortOrderMs=d("MAWDbMsg").getCanonicalTsFromMsg(a)*1e3)})},t=function(a){return a.threads.filter(function(a){return a.isMigratedLocally===!0&&a.newestMsg!=null}).toArray().then(function(b){var c=b.map(function(a){return a.chatId}),e=new Map();return d("MAWDexieTable").dexieAll(b.map(function(b){return a.messages.where(["thread","sortOrderMs"]).between([b.chatId,0],[b.chatId,Number.MAX_VALUE]).last().then(function(a){a!=null&&e.set(a.thread,a.msgId)})})).then(function(){return a.threads.where("chatId").anyOf(c).modify(function(a){var b=e.get(a.chatId);b!=null&&(a.newestMsg=b)})})})},u=function(a){return a.identity.toCollection().modify(function(a){a.userJid=d("WAJids").extractUserJid(a.deviceJid)})},v=function(a){return a.threads.toCollection().modify(function(a){a.lastReadMsgTs!=null&&a.lastReadMsgTs<d("WATimeUtils").MAX_INT&&(a.lastReadMsgTs=d("MAWTimeUtils").ensureValidMillisTime(a.lastReadMsgTs));if(a.newestMsgTs!=null&&a.newestMsgTs<d("WATimeUtils").MAX_INT){var b=d("MAWTimeUtils").ensureValidMillisTime(a.newestMsgTs);a.newestMsgTs=b;b!=null&&(a.threadOrder=d("MAWDbThread").craftThreadOrder(b,a.jid))}})},w=function(a){return a.messages.toCollection().modify(function(a){a.type===d("WAMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&(a.altIndex=d("MAWDbMsg").craftCutoverAdminMsgAltIndex(a.thread))})},x=function(a){return a.meta.get(d("SignalDbTypes").MetaKeysEnum.fbid).then(function(b){var c;if((b==null?void 0:(c=b.value)==null?void 0:c.fbid)!=null&&b.value.fbid==="0")return a.meta.clear()})},y=function(a){return a.prekey.filter(function(a){return a.isDeleted===!0})["delete"]()},z=function(a){return c("gkx")("23905")?a.meta.clear():d("MAWDexieTable").dexieResolve()},A=function(a){return a.participants.toCollection().modify(function(a){var b;if(a==null||((b=a.userJid)==null?void 0:b.indexOf("@msgr@msgr"))===!1)return;a.id=a.id.replace("@msgr@msgr","@msgr");a.userJid=a.userJid.replace("@msgr@msgr","@msgr")}).then(function(){})},B=function(a){var b=a.threads.filter(function(a){return a.snippetMsg!=null&&a.snippetMsgTs==null});return b.toArray().then(function(c){var e=c.reduce(function(a,b){b!=null&&b.snippetMsg!=null&&a.set(b.jid,b.snippetMsg);return a},new Map());c=Array.from(e.values());return a.messages.where("msgId").anyOf(c).toArray().then(function(a){var c=a.reduce(function(a,b){b!=null&&b.serverTs!=null&&a.set(b.msgId,b.serverTs);return a},new Map());b.modify(function(a){var b=e.get(a.jid);if(b!=null){b=c.get(b);b!=null&&(a.snippetMsgTs=d("WATimeUtils").castUnixTimeToMillisTime(b))}})})})},C=function(a){return a.threads.toArray().then(function(b){return d("MAWDexieTable").dexieAll(b.map(function(b){return a.participants.where("threadId").equals(b.chatId).modify(function(a){a.threadJid=(a=a.threadJid)!=null?a:b.jid})}))})},D=C,E=function(a){var b=[];return a.groupInvites.toArray().then(function(c){var d=c.map(function(a){return a.invitedParticipantId});return a.participants.bulkGet(d).then(function(d){d.forEach(function(a,d){if(a==null){a=c[d];b.push(a)}});var e=d.filter(Boolean);return a.groupInvites.bulkPut(c.map(function(a){var c=e.find(function(b){return b.id===a.invitedParticipantId});if(c!=null){a.inviteeJid=c.userJid;a.threadJid=c.threadJid;return babelHelpers["extends"]({},a,{inviteeJid:c.userJid,threadJid:c.threadJid})}else{b.push(a);return a}}))})}).then(function(){return a.groupInvites.bulkDelete(b.map(function(a){return[a.invitedParticipantId,a.inviterJid]}))})},F=function(a){var b=new Map();return a.receipts.toArray().then(function(c){return d("MAWDexieTable").dexieAll(c.map(function(c){return a.messages.get({msgId:c.msgId}).then(function(e){if(e==null)return a.receipts["delete"](c.msgId).then(function(){});else{var f=d("WAMsg").craftWAMsgIdString({author:e.author,chat:e.threadJid,externalId:e.externalId});if(b.has(f)){var g;g=(g=b.get(f))!=null?g:1;b.set(f,g);d("WALogger").ERROR(i(),g);return a.receipts["delete"](c.msgId).then(function(){})}else{b.set(f,1);return a.receipts.where("msgId").equals(e.msgId).modify(function(a){a.waMsgId=f}).then(function(){})}}})}))})};a=new Map([[(h=d("MAWDbVersionList")).VERSION.V26,a],[h.VERSION.V27,b],[h.VERSION.V28,e],[h.VERSION.V29,f],[h.VERSION.V30,j],[h.VERSION.V31,k],[h.VERSION.V43,l],[h.VERSION.V44,m],[h.VERSION.V45,n],[h.VERSION.V46,o],[h.VERSION.V47,p],[h.VERSION.V53,q],[h.VERSION.V54,r],[h.VERSION.V55,s],[h.VERSION.V56,t],[h.VERSION.V57,u],[h.VERSION.V58,v],[h.VERSION.V60,w],[h.VERSION.V66,x],[h.VERSION.V68,y],[h.VERSION.V71,z],[h.VERSION.V72,A],[h.VERSION.V82,B],[h.VERSION.V85,C],[h.VERSION.V87,D],[h.VERSION.V90,E],[h.VERSION.V91,F]]);g.dbUpgrades=a}),98);
__d("MAWDbSchemaReStoreDexieUtils",["MAWDbSchema","MAWDbSchema.dexie","err","sortBy"],(function(a,b,c,d,e,f,g){"use strict";var h=c("sortBy")(Array.from(new Set([].concat(Array.from(d("MAWDbSchema").dbSchema.keys()),Array.from(d("MAWDbSchema.dexie").dbUpgrades.keys())))).map(function(a){return{schema:d("MAWDbSchema").dbSchema.get(a),upgrade:d("MAWDbSchema.dexie").dbUpgrades.get(a),version:a}}),function(a){a=a.version;return a}),i=function(a,b){return Array.from(a.filter(function(a){return a.version<=b&&a.schema!=null}).reduce(function(a,b){(b=b.schema)==null?void 0:b.forEach(function(b){a.set(b.name,b)});return a},new Map()).values())},j=function(a,b){return i(a,b).reduce(function(a,b){var d=b.autoIncrement,e=b.dexieOnly_primaryKeyUnique,f=b.name,g=b.primaryKey,h=b.removed;f=f.replace(/^e2ee_/,"");if(h===!0){a[f]=null;return a}if(d&&e===!0)throw c("err")("Invalid schema, cannot have both autoincremnet and unique constraints "+JSON.stringify(b));h=d?"++":"";d=e===!0?"&":"";e=""+(g.length>1?"[":"")+g.join("+")+(g.length>1?"]":"");g=Object.values(b.indexes).map(function(a){var b=a.columns,c=!(a.unique===!1),d=b.length>1;a=a.multiEntry_DO_NOT_USE===!0;c=c&&!a?"&":"";a=a?"*":"";c=""+c+a;return""+c+(d?"[":"")+b.join("+")+(d?"]":"")}).join(",");a[f]=[""+h+d+e,g].filter(Boolean).join(",");return a},{})};a=function(a){return j(h,a)};g.MAW_DB_VERSION_CHANGES=h;g.getDexieSchemaForVersion=j;g.getCompleteDexieSchemaForVersion=a}),98);
__d("MAWDbVersion",["MAWCurrentUser","MAWDbSchemaReStoreDexieUtils","MAWGetDbVersion","MAWIndexedDbMetadata","MAWReStoreDbSetup","MAWRestoreRewriteUtils","Promise","WATagsLogger","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Applying "," updates between "," and ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Skipping db upgrade and just applying latest schema"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["version is not set in QE"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["current db version: ",", target db version: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Using OneDB/shim, cannot read DB version"]);m=function(){return a};return a}var n=d("WATagsLogger").TAGS(["DB","VERSION"]);f=d("MAWGetDbVersion").getArmadilloDbVersion();f=d("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(Math.min(d("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES[d("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.length-1].version,f>0?f:Infinity));function o(a,b){var c=b.schema,d=b.upgrade;b=b.version;c!=null&&d!=null?a.version(b).stores(c).upgrade(d):c!=null?a.version(b).stores(c):d!=null?a.version(b).upgrade(d):a.version(b);return b}function p(a,c){if(d("MAWRestoreRewriteUtils").isOneDBEnabled()||c){n.LOG(m());return(h||(h=b("Promise"))).resolve(null)}return new(h||(h=b("Promise")))(function(b){if(!indexedDB){b();return}var c=indexedDB.open(a);c.onsuccess=function(a){a=a.target.result;var c=a==null?void 0:a.version;a==null?void 0:a.close();c!=null?b(c/10):b()};c.onerror=function(){b()}})}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("MAWRestoreRewriteUtils").isOneDBEnabled()||a){a=(yield d("MAWReStoreDbSetup").getDB());return a.getCustomMigrationVersion()}else return(h||(h=b("Promise"))).resolve(null)});return r.apply(this,arguments)}function a(){var a=d("MAWCurrentUser").getID(),b=c("gkx")("23906");if(d("MAWRestoreRewriteUtils").isOneDBEnabled()||b)return q(b);else return p(d("MAWIndexedDbMetadata").dbName(a),!1)}function s(a,b){if(a.upgrade!=null||b.upgrade!=null)return!0;a=Object.keys((a==null?void 0:a.schema)||{});b=Object.keys((b==null?void 0:b.schema)||{});a=[].concat(a,b);b=new Set(a);return b.size!==a.length}function t(a){return a.reduce(function(a,b,c){if(c===0)return[babelHelpers["extends"]({},b,{schema:d("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(b.version)})];c=a[a.length-1];b=babelHelpers["extends"]({},b,{schema:b.schema!=null?d("MAWDbSchemaReStoreDexieUtils").getDexieSchemaForVersion([b],b.version):null});if(s(c,b)){a.push(b);return a}a.splice(a.length-1,1,babelHelpers["extends"]({},c,b,{schema:babelHelpers["extends"]({},c==null?void 0:c.schema,b==null?void 0:b.schema)}));return a},[])}function e(a,b,c){var e=c!=null?c:d("MAWGetDbVersion").getArmadilloDbVersion==null?void 0:d("MAWGetDbVersion").getArmadilloDbVersion();n.LOG(l(),b,e);e==null&&n.WARN(k());c=d("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.filter(function(a){a=a.version;return b==null||a>b}).filter(function(a){a=a.version;return e==null||e>=a});var f=d("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.filter(function(a){a=a.version;return e==null||e>=a});if(c.length===0||c.length===f.length){n.LOG(j());f=d("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES[d("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.length-1].version;f=Math.min(e!=null&&e>0?e:f,f);a.version(f).stores(d("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(f));return f}f=t(c);n.LOG(i(),f.length,c[0].version,c[c.length-1].version);var g=0;f.forEach(function(b){g=Math.max((b=o(a,b))!=null?b:0,(b=g)!=null?b:0)});return g}g.CURRENT_MAW_STORES=f;g.getDexieDbVersion=p;g.getRestoreDbVersion=q;g.getDBVersion=a;g.updateDB=e}),98);
__d("ReStoreIDBFactory",["invariant","Deferred","I64","IndexedDbPolyfills","ReStoreKeyComparer","err","isPromise","nullthrows","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l="e2ee_",m=new MessageChannel(),n=[];m.port1.onmessage=function(){var a=n.pop();a()};function o(a){n.push(a),m.port2.postMessage({})}function p(a){var b=new Map();function c(a){if(typeof a!=="object"||a===null)return a;if(b.has(a))return b.get(a);var d;if(Array.isArray(a)){d=[];b.set(a,d);for(var e of a)d.push(c(e))}else if(a instanceof Set){d=new Set();b.set(a,d);for(e of a)d.add(c(e))}else if(a instanceof Map){d=new Map();b.set(a,d);for(e of a){var f=e[0],g=e[1];d.set(c(f),c(g))}}else if(a instanceof ArrayBuffer)d=new ArrayBuffer(a.byteLength),new Uint8Array(d).set(new Uint8Array(a));else if(a instanceof Uint8Array){f=c(a.buffer);d=new Uint8Array(f,a.byteOffset,a.length)}else d={};b.set(a,d);for(g of Object.keys(a))d[g]=c(a[g]);return d}return c(a)}function q(a,b){function d(b){if(b.done)return b.value;if(!(k||(k=c("isPromise")))(b.value))throw c("unrecoverableViolation")("expected promise","messenger_web_product");return b.value.then(function(b){return d(a.next(b))})}return d(a.next(b))}function* r(a){return(k||(k=c("isPromise")))(a)?yield a:a}function s(a,b){a=[].concat(a);b!==-1&&(a[b]=(i||(i=d("I64"))).to_float(c("nullthrows")(i.cast(a[b]),"Expected autoincrementing field to be an I64")));return a.length===1?a[0]:a}function t(a,b){a=Array.isArray(a)?a:[a];return a.map(function(a,c){if(a===-Infinity)return void 0;if(Array.isArray(a)&&a.length===0)return(j||(j=d("ReStoreKeyComparer"))).MAX_KEY;if(Array.isArray(a)&&a.length===1&&Array.isArray(a[0])&&a[0].length===0)return(j||(j=d("ReStoreKeyComparer"))).MAX_KEY;return c===b&&typeof a==="number"?(i||(i=d("I64"))).of_float(a):a})}function u(a,b,e){var f=a.indexes,g=a.primaryKeyIds;g=e==null?g:f[e];f=g.map(function(f){if(b[f]!==void 0||e!=null){var g=b[f];if(a.autoIncrement&&f===a.primaryKeyIds[0]){g=(i||(i=d("I64"))).cast(g);if(g==null)throw c("unrecoverableViolation")("expected auto-incrementing field to be an i64","messenger_web_product");g=i.to_float(g)}return g}throw c("unrecoverableViolation")("primary key must be defined on object","messenger_web_product")});return f.length===1?f[0]:f}var v=function(){function a(a){this.$1=a}var b=a.prototype;b.continue=function(a){this.$1(a)};b.advance=function(a){for(var b=0;b<a;b++)this.continue()};return a}(),w=function(){function a(a,b,c,d){this.$1=a,this.$2=b,this.$3=c,this.$4=d}var b=a.prototype;b.openCursor=function(a,b){var c=this;return A(a,b,function(a){return a[c.$3].index(c.$1)},this.$4,this.$2,this.$1)};b.count=function(a){var b=this.$2.autoIncrement?this.$2.indexes[this.$1].indexOf(this.$2.primaryKeyIds[0]):-1,c=this;return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),function(d){return q(function*(){var e=new WeakMap();e=(yield* r(d[c.$3].index(c.$1).keys(e,"asc",z(a,b))));var f=0,g=(yield* r(e.next()));while(!g.done)f++,g=(yield* r(e.next()));return f}())})};babelHelpers.createClass(a,[{key:"keyPath",get:function(){return this.$2.indexes[this.$1].length===1?this.$2.indexes[this.$1][0]:this.$2.indexes[this.$1]}},{key:"name",get:function(){return this.$1}}]);return a}();function x(a,b){if(b==null)return a;var e=c("nullthrows")((i||(i=d("I64"))).cast(a[b]),"expected auto-increment field to be an I64");a[b]=i.to_float(e);return a}function y(a,b){if(b==null||a[b]==null)return babelHelpers.extends({},a);typeof a[b]==="number"||h(0,72542);a[b]=(i||(i=d("I64"))).of_float(a[b]);return a}function z(a,b){var c;a!=null&&(c={},a.lower!==void 0&&(a.lowerOpen?c.gt=t(a.lower,b):c.gte=t(a.lower,b)),a.upper!==void 0&&(a.upperOpen?c.lt=t(a.upper,b):c.lte=t(a.upper,b)));return c}function A(a,b,e,f,g,h){var i=g.autoIncrement?h==null?0:g.indexes[h].indexOf(g.primaryKeyIds[0]):-1,k=g.autoIncrement?g.primaryKeyIds[0]:null,l="asc";if(b==="prev")l="desc";else if(b!==void 0&&b!=="next")throw c("err")("Unsupported direction:"+b);var m=new WeakMap(),n=new(d("IndexedDbPolyfills").IDBRequest)(),o,w=new v(y);n.result=w;function y(b){var c;b!=null&&(c=t(b,i));f(n,function(b){return q(function*(){var f;o=(f=o)!=null?f:e(b).entries(m,l,z(a,i));var h=o,n=(yield* r(h.next(c)));f=function*(){var a=n.value[0];for(var b=0;b<a.length;b++){var c=a.slice(0,b);if(l==="asc"){if(a[b]==null){if(b===a.length-1)n=(yield* r(h.next()));else{var e=[].concat(c,[void 0,(j||(j=d("ReStoreKeyComparer"))).MAX_KEY]);n=(yield* r(h.next(e)))}if(n.done)return"break|outer";a=n.value[0];if(!c.every(function(b,c){return(j||(j=d("ReStoreKeyComparer"))).compareValue(b,a[c])===0}))return"continue|outer"}}else if(a[b]==null){n=(yield* r(h.next(c)));return"continue|outer"}}return"break"};outer:while(!n.done){var q=(yield* f());switch(q){case"break|outer":break outer;case"continue|outer":continue outer;case"break":break outer}}if(!n.done){q=s(n.value[0],i);w.primaryKey=u(g,n.value[1]);w.key=q;w.value=x(p(n.value[1]),k);return w}}())})}y();return n}var B=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=this.$1.getTableData().tableNames[this.$2],this.$4=c}var b=a.prototype;b.index=function(a){return new w(a,this.$3,this.$2,this.$4)};b.get=function(a){var b=this;return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),function(c){return q(function*(){var d;d=(yield* r((d=c[b.$2]).get.apply(d,t(a,b.$3.autoIncrement?0:-1))));return d==null?d:x(p(d),b.$3.autoIncrement?b.$3.primaryKeyIds[0]:null)}())})};b.clear=function(){var a=this;return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),async function(b){var c=b[a.$2].entries(new WeakMap()),d=await c.next();while(!d.done){var e;await (e=b[a.$2]).delete.apply(e,d.value[0]);d=await c.next()}})};b.put=function(a,b){var c=this,e=y(p(a),this.$3.autoIncrement?this.$3.primaryKeyIds[0]:null);b==null||h(0,72438);return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),async function(a){await a[c.$2].put(e);return u(c.$1.getTableData().tableNames[c.$2],e)})};b.add=function(a,b){var c=this,e=y(p(a),this.$3.autoIncrement?this.$3.primaryKeyIds[0]:null);b==null||h(0,72437);return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),async function(a){await a[c.$2].add(e);return u(c.$1.getTableData().tableNames[c.$2],e)})};b.delete=function(a){var b=this;return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),async function(c){if(a instanceof IDBKeyRange){var d=new WeakMap(),e=b.$3.autoIncrement?0:-1;d=await c[b.$2].entries(d,"asc",z(a,e));e=await d.next();while(!e.done){var f;await (f=c[b.$2]).delete.apply(f,e.value[0]);e=await d.next()}}else{await (f=c[b.$2]).delete.apply(f,t(a,b.$3.autoIncrement?0:-1))}return void 0})};b.openCursor=function(a,b){var c=this;return A(a,b,function(a){return a[c.$2]},this.$4,this.$3)};b.count=function(a){var b=this.$3.autoIncrement?0:-1,c=this;return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),function(d){return q(function*(){var e=new WeakMap();e=(yield* r(d[c.$2].keys(e,"asc",z(a,b))));var f=0,g=(yield* r(e.next()));while(!g.done)f++,g=(yield* r(e.next()));return f}())})};b.createIndex=function(a,b){};b.deleteIndex=function(a){};babelHelpers.createClass(a,[{key:"indexNames",get:function(){return Object.keys(this.$3.indexes)}},{key:"name",get:function(){return this.$2.substr(l.length)}},{key:"autoIncrement",get:function(){return this.$3.autoIncrement}},{key:"keyPath",get:function(){return this.$3.primaryKeyIds.length===1?this.$3.primaryKeyIds[0]:this.$3.primaryKeyIds}}]);return a}(),C=function(b){babelHelpers.inheritsLoose(a,b);function a(a,d,e,f){var g;g=b.call(this)||this;g.$ReStoreIDBTransaction5=[];g.$ReStoreIDBTransaction6=new(c("Deferred"))();g.state="active";g.oncomplete=null;g.onerror=null;g.$ReStoreIDBTransaction1=a;g.$ReStoreIDBTransaction4=d;g.$ReStoreIDBTransaction3=e;g.$ReStoreIDBTransaction2=f;c("promiseDone")(g.$ReStoreIDBTransaction1.runInTransaction(function(a){g.$ReStoreIDBTransaction6.resolve(a);return new Promise(function(b,d){var e=async function e(){var f=[].concat(g.$ReStoreIDBTransaction5);if(g.state==="finished"){d();throw c("err")("Transaction aborted")}if(!f.length){g.state="committing";return b()}try{g.state="inactive";var h=[];for(var i of f){i[0];var j=i[1];try{j=j(a);j={status:"fulfilled",value:(k||(k=c("isPromise")))(j)?await j:j}}catch(a){j={reason:a,status:"rejected"}}h.push(j)}g.state="active";g.$ReStoreIDBTransaction5=[];for(j=0;j<h.length;j++){i=h[j];var l=f[j];l=l[0];i.status==="fulfilled"?(l.result=i.value,l.emit("success",{target:l})):(l.error=i.reason,l.emit("error",{target:l}))}}catch(a){return d(a)}o(function(){return void e()})};o(function(){return void e()})})},f==="versionchange"?"readwrite":f),function(){g.state="finished",g.emit("complete"),g.$ReStoreIDBTransaction6=new(c("Deferred"))()},function(){g.state="finished",g.emit("error"),g.$ReStoreIDBTransaction6=new(c("Deferred"))()});return g}var e=a.prototype;e.objectStore=function(a){var b=this;if(!this.$ReStoreIDBTransaction3.has(a))throw c("err")("Invalid object store name "+a);return new B(this.$ReStoreIDBTransaction1,l+a,function(a,d){if(b.state!=="active")throw c("err")("Cannot make request against inactive transaction.");b.$ReStoreIDBTransaction5.push([a,d]);return a})};e.abort=function(){this.state="finished"};e.enqueueAdditionalWork=function(a){this.$ReStoreIDBTransaction5.push([new(d("IndexedDbPolyfills").IDBRequest)(),a])};babelHelpers.createClass(a,[{key:"db",get:function(){return this.$ReStoreIDBTransaction4}},{key:"transaction",get:function(){return this.$ReStoreIDBTransaction6.getPromise()}}]);return a}(d("IndexedDbPolyfills").IDBRequest),D=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.transaction=function(a,b,c){return new C(this.$1,this,new Set(Array.isArray(a)?a:[a]),b)};b.createObjectStore=function(a){return{createIndex:function(a,b,c){}}};b.deleteObjectStore=function(a){};b.close=function(){this.$1.closeDb==null?void 0:this.$1.closeDb()};babelHelpers.createClass(a,[{key:"objectStoreNames",get:function(){var a=Object.keys(this.$1.getTableData().tableNames).filter(function(a){return a.startsWith(l)}).map(function(a){return a.substr(l.length)});a.contains=function(b){return a.find(function(a){return a===b})!=null};return a}},{key:"name",get:function(){return this.$2}}]);return a}();b=function(){function a(a){this.$1=a}var b=a.prototype;b.open=function(a,b){var c=new(d("IndexedDbPolyfills").IDBRequest)();c.result=new D(this.$1,a);o(function(){return c.emit("success")});return c};b.cmp=function(a,b){return indexedDB.cmp(a,b)};return a}();e=function(){function b(){}b.bound=function(c,d,e,f){if(Array.isArray(c)&&c[0]===void 0)return b.upperBound(d,f);return Array.isArray(d)&&d[0]===void 0?b.lowerBound(c,e):a.IDBKeyRange.bound(c,d,e,f)};b.lowerBound=function(b,c){if(Array.isArray(b)&&b[0]===null)return null;return Array.isArray(b)&&b[0]===void 0?null:a.IDBKeyRange.lowerBound(b,c)};b.upperBound=function(b,c){if(Array.isArray(b)&&b[0]===null)return null;return Array.isArray(b)&&b[0]===void 0?null:a.IDBKeyRange.upperBound(b,c)};return b}();self.setImmediate2=o;g.structuredClone=p;g.ReStoreIDBTransaction=C;g.ReStoreIDBDatabase=D;g.ReStoreIDBFactory=b;g.ReStoreIDBKeyRange=e}),98);
__d("createReStoreIndexedDbPersistenceWithoutLocks",["ClientConsistency","CurrentMessengerUser","Deferred","ExecutionEnvironment","FBLogger","LSPlatformErrorChannel","LSPlatformLsInitLog","MAWCryptoConsts","MAWExceededStorageQuota","MAWKeychainNaClCrypto","MWEARKeychainV3","MessengerLogHistory","ReStoreBinaryEncoding","ReStoreDbClosedError","ReStoreDbConfigStore","ReStoreDbVersionChange","ReStoreDecryptionFailure","ReStoreErrorAction","ReStorePersistence","err","gkx","pageID","promiseDone","promiseFromRequest","tweetnacl","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=4096,j=d("CurrentMessengerUser").getIDorEIMU(),k=d("MessengerLogHistory").getInstance("db_init"),l=new Set([d("ReStoreDbConfigStore").CONFIG_STORE_NAME]),m=new(d("ReStoreBinaryEncoding").Encoder)(),n=new(d("ReStoreBinaryEncoding").Decoder)();function o(a,b){if(a==null)return null;var e=new Uint8Array(a);try{e=e[1];var f=d("MWEARKeychainV3").getDbEncryptionKey(e);f=f.key;var g=3;a=d("tweetnacl").secretbox.open(new Uint8Array(a,g+d("tweetnacl").secretbox.nonceLength),new Uint8Array(a,g,d("tweetnacl").secretbox.nonceLength),new Uint8Array(f));if(a==null){throw new(d("MAWKeychainNaClCrypto").EARDecryptionError)("Encrypted ReStore-no-locks was unable to decrypt an entity. Attempting to use key version : "+((g=e)!=null?g:"non-provided")+".")}return n.decode(a)}catch(a){c("LSPlatformErrorChannel").emit(new(d("ReStoreDecryptionFailure").ReStoreDecryptionFailure)(a.message,b));throw new(d("ReStoreDecryptionFailure").ReStoreDecryptionFailure)(a.message,b)}}function p(a,b){if(a==null)return a;try{var e=d("MWEARKeychainV3").getDbEncryptionKey(),f=e.key;e=e.version;e=new Uint8Array([0,e,d("MAWCryptoConsts").CIPHER_ID]);var g=d("tweetnacl").randomBytes(d("tweetnacl").secretbox.nonceLength);a=d("tweetnacl").secretbox(m.encode(a),g,new Uint8Array(f));f=new Uint8Array(e.length+g.length+a.length);f.set(e);f.set(g,e.length);f.set(a,e.length+g.length);return f.buffer}catch(a){throw c("err")(a.message+" - Encrypted LSDB was unable to encrypt an entity for table "+b)}}function q(a){for(a of a.values())if(a.size!==0)return!1;return!0}function r(a,b){var c=[];a=new Set(a);for(var d of a)b.objectStoreNames.contains(d)||c.push(d);d=[];for(var e=0;e<b.objectStoreNames.length;e++){var f=b.objectStoreNames[e];!a.has(f)&&!l.has(f)&&d.push(f)}if(c.length!==0||d.length!==0)return[c,d]}function s(a,b){if(b==null){k.debug("Schema doesn't have changes to apply");return}k.debug("Schema has changes to apply");var c=b[0];b=b[1];c.forEach(function(b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{autoIncrement:!0})});b.forEach(function(b){a.objectStoreNames.contains(b)&&a.deleteObjectStore(b)})}function t(a,b,e,f){function g(a){e(a.target),k.debug("DB onversionchange TABID="+c("pageID")),c("FBLogger")("mpf_web_foundations").info("[pdb] onversionchange inWorker=%s",String((h||(h=c("ExecutionEnvironment"))).isInWorker)),d("LSPlatformLsInitLog").fail("version_change"),c("LSPlatformErrorChannel").emit(new(d("ReStoreDbVersionChange").ReStoreDbVersionChange)())}return new Promise(function(e,h){var i=indexedDB.open(a,f);i.onupgradeneeded=function(a){a=a.target;var c=a.result;a=a.transaction;b(c,a)};i.onerror=function(a){d("LSPlatformLsInitLog").fail("failed_to_open_pdb"),h(c("unrecoverableViolation")("Failed to open db","messenger_web_product",{error:a.target.error}))};i.onsuccess=function(a){a=a.target.result;a.addEventListener("versionchange",g);e(a)}})}async function u(a,b,e,f){function g(a){d("LSPlatformLsInitLog").addAnnotations({bool:{dbEmpty:!0}});d("ReStoreDbConfigStore").createDbConfig(a,f.defaultConfig);for(var c of b)a.createObjectStore(c,{autoIncrement:!0})}d("LSPlatformLsInitLog").addPoint("idb_open_start");var i=await t(a,g,e);d("LSPlatformLsInitLog").addPoint("idb_open_end");var j=i.transaction(d("ReStoreDbConfigStore").CONFIG_STORE_NAME,"readonly");j=await Promise.all([d("ReStoreDbConfigStore").detectConfigMismatch(j,f),d("ReStoreDbConfigStore").readCorruptionFailuresFromConfig(j).then(function(a){return(a=a==null?void 0:a.value)!=null?a:0})]);var l=j[0];j=j[1];var m=j>0;m&&(c("FBLogger")("mpf_web_foundations").info("[pdb] opening corrupted db failures=%s inWorker=%s",String(j),String((h||(h=c("ExecutionEnvironment"))).isInWorker)),k.debug("DB corrupted, deleting db"));l&&k.debug("DB config mismatch, deleting db");d("LSPlatformLsInitLog").addAnnotations({bool:{configMismatch:l,dbCorruptionOccured:m}});if(l||m){i.close();(j=d("LSPlatformLsInitLog")).addPoint("delete_db_start");await c("promiseFromRequest")(indexedDB.deleteDatabase(a));j.addPoint("delete_db_end");j.addPoint("reopen_db_start");i=await t(a,g,e);j.addPoint("reopen_db_end")}else{var n=r(b,i);n!=null&&(k.debug("Schema mismatch, bumping db version"),i.close(),d("LSPlatformLsInitLog").addPoint("mismatch_start"),i=await t(a,function(a){return s(a,n)},e,i.version+1),d("LSPlatformLsInitLog").addPoint("mismatch_end"))}return i}function a(a,b,e){var f=j+"-"+a,g=!0,h,l=[],m=null,n=Promise.resolve();k.debug("PDB is ON");d("LSPlatformLsInitLog").addPoint("init_idb_start");var r=new Map(),s=new Promise(function(d,f){c("promiseDone")(n=n.then(async function(){try{var c=await u(a,b,v,e);d(c)}catch(a){f(a)}}),function(a){},function(a){return c("FBLogger")("mpf_web_foundations").catching(a).warn("[pdb] dbLock idbPromise issue")})});c("promiseDone")(s.then(function(){d("LSPlatformLsInitLog").addPoint("init_idb_end")}));function v(a){a.close(),g=!1}function w(a,b,c){c=a.transaction(c!=null&&c.length>0?c:a.objectStoreNames,b,{durability:"relaxed"});d("MAWExceededStorageQuota").listenToQuotaExceededError(c);return c}function x(a){var b=r.get(a);b==null&&(b=new Map(),r.set(a,b));return b}function y(){if(m)return;m=new Promise(async function(a){var b;try{var d=async function(){if(h==null){var a;b=(a=b)!=null?a:await s;var d=w(b,l.some(function(a){return a.writemode==="readwrite"||a.expectingWrite})?"readwrite":"readonly");d.onabort=function(){h===d&&(h=null)};h=d}var e=h;a=[];for(var f of l){if(f.writemode==="readwrite"){e.mode==="readwrite"&&a.push(f);h=null;break}a.push(f)}l.splice(0,a.length);a.length&&await Promise.all(a.map(function(a){a=a.thunk;return a(e)}));c("gkx")("116")&&!l.length&&h!=null&&await c("promiseFromRequest")(h.objectStore(h.objectStoreNames[0]).get(""))};while(l.length)await d();(d=h)==null?void 0:d.commit==null?void 0:d.commit()}finally{h=null,a(),m=null}})}function z(a,b,c){c===void 0&&(c=!1);return new Promise(function(d,e){l.push({expectingWrite:c,thunk:async function(b){var c;try{c=await a(b)}catch(a){e(a);return}d(c)},writemode:b}),y()})}function A(){if(!g)return;c("promiseDone")(s,async function(a){var b;a=w(a,"readwrite");b=(b=(b=await d("ReStoreDbConfigStore").readCorruptionFailuresFromConfig(a))==null?void 0:b.value)!=null?b:0;await d("ReStoreDbConfigStore").writeCorruptionFailuresToConfig(a,b)})}function B(){c("promiseDone")(s,function(a){v(a)})}function C(){if(!g)throw new(c("ReStoreDbClosedError"))()}async function D(a){await s;C();var b=c("ClientConsistency").getAdditionalRevisions();b.size>0&&(c("FBLogger")("mpf_web_foundations").info("[pdb] js mismatch detected"),d("ReStoreErrorAction").softRefresh());return new Promise(function(b,d){c("promiseDone")(n=n.then(async function(){try{var c=await a();b(c)}catch(a){d(a)}}),function(a){},function(a){return c("FBLogger")("mpf_web_foundations").catching(a).warn("[pdb] dbLock runExclusively issue")})})}return{clearCache:function(){r.clear()},close:B,flush:async function(b,e){e=e.upgrade;if(!g)return;async function f(a){var c=new Promise(function(b,c){a.oncomplete=function(a){b(a.target.result)},a.onerror=a.onabort=function(a){r.clear(),c(a)}}),e=!1;for(var f of b){var g=f[0],h=f[1],i=a.objectStore(g);for(h of h){var j=h[0],k=h[1],l;if(k===d("ReStorePersistence").sentinelDeleted)l=i.delete(j);else{k=p(k,g);l=i.put(k,j)}l.onerror=function(){return e=!0}}}e?a.abort():a.commit!=null&&a.commit();await c}function i(){Array.from(b).forEach(function(a){var b=a[0];a=a[1];var c=x(b);Array.from(a).forEach(function(a){var b=a[0];a=a[1];a===d("ReStorePersistence").sentinelDeleted?c.delete(b):c.set(b,a)})})}if(q(b))return;var j=await s;if(e===!0){c("FBLogger")("mpf_web_foundations").info("[pdb] Updating IDB version, fromVersion: %s, non-empty tables: %s",j.version,Array.from(b.entries()).filter(function(a){a[0];a=a[1];return a.size>0}).map(function(a){a=a[0];return a}).sort().toString());await m;(e=h)==null?void 0:e.abort();j.close();r.clear();s=async function(){var b=new(c("Deferred"))(),d=await t(a,function(a,d){i(),c("promiseDone")(f(d),function(){b.resolve()},function(){b.reject()})},v,j.version+1);await b.getPromise();return d}();await s;return}if(b.size===0)return;i();e=Array.from(b.keys());e.push(d("ReStoreDbConfigStore").CONFIG_STORE_NAME);await f(w(j,"readwrite",e))},get:function(a,b,d){var e=x(b);if(e.has(d))return e.get(d);else{if(!g)return new Promise(function(){});var f=z(function(a){return c("promiseFromRequest")(a.objectStore(b).get(d))},"readonly").then(function(a){var c=e.get(d);if(c!==f)return c;c=o(a,b);e.set(d,c);return c});e.set(d,f);return f}},isClosed:function(){return!g},logError:function(a,b,d,e){if(d==="dbCorruption"){b==="readwrite"&&A();throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Got unexpected undefined in pdb, mode: %s, table: %s, id: %s, deletedInThisTxn: %s",b,a,(d=e==null?void 0:e.id)!=null?d:"",(b=e==null?void 0:e.deletedInThisTxn)!=null?b:"")}},queueCommitWork:function(a){return a()},runExclusively:D,shouldApplySync:function(){return!1},shouldInline:function(a,b){return d("ReStoreBinaryEncoding").estimateSize(b)<i},shouldSync:function(a,b){return!1},types:["indexeddb"],uniqueId:f}}a.schemaDiff=r;a.applyChanges=s;g.default=a}),98);
__d("MAWRestoreSchemaIndexedDB",["IndexedDbPolyfills","MAWCurrentUser","MAWDBRestoreConfig","MAWDbSchema.restore","MAWDbVersion","MAWGetDbVersion","MAWIndexedDbMetadata","MAWQplProxy","Promise","ReStore","ReStoreIDBFactory","ReStoreMetadata","WATagsLogger","asyncToGeneratorRuntime","createReStoreIndexedDbPersistenceWithoutLocks","dexie_maw","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Updating shimmed DB from "," to ",""]);i=function(){return a};return a}var j,k=d("WATagsLogger").TAGS(["DBInit","DBSetup","ReStore"]),l={};function a(){if(j==null){var a=d("ReStoreMetadata").getBuildTableData(l)([d("MAWDbSchema.restore").clientSchema.map(function(a,b){return babelHelpers["extends"]({},a,{id:(b+1).toString()})})]),e=d("MAWGetDbVersion").getArmadilloDbVersion();j=c("ReStore")(c("createReStoreIndexedDbPersistenceWithoutLocks")(d("MAWIndexedDbMetadata").restoreDbName2(d("MAWCurrentUser").getID()),Object.keys(a.tableNames),d("MAWDBRestoreConfig").createConfig()),a,void 0,{migration:function(a,f){var g;d("MAWQplProxy").sendQPLIntAnnotationThroughBridge(c("qpl")._(1056839232,"112"),"dbVersion",(g=a)!=null?g:0);return new(h||(h=b("Promise")))(function(g,l){var m={open:function(){var c=new(d("IndexedDbPolyfills").IDBRequest)(),i=new(d("ReStoreIDBFactory").ReStoreIDBDatabase)(j,""),k=new(d("ReStoreIDBFactory").ReStoreIDBTransaction)(babelHelpers["extends"]({},j,{runInTransaction:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;try{b=(yield a(f))}catch(a){l(a);throw a}g();return b});function c(b){return a.apply(this,arguments)}return c}()}),i,new Set(i.objectStoreNames),"versionchange");c.result=i;c.transaction=k;void b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).resolve(),c.emit("upgradeneeded",{newVersion:e,oldVersion:a,target:{result:i,transaction:k}})})();return c}};m=new(c("dexie_maw"))("",{IDBKeyRange:d("ReStoreIDBFactory").ReStoreIDBKeyRange,chromeTransactionDurability:"relaxed",enableDataSyncMiddleware:!0,indexedDB:m,shimEnabled:!0});k.LOG(i(),a,e);var n=d("MAWDbVersion").updateDB(m,a,e);d("MAWQplProxy").sendQPLBoolAnnotationThroughBridge(c("qpl")._(1056839232,"112"),"dbUpgradeNeeded",a!==n);m.open()})},targetVersion:e})}return j}function e(){var a;(a=j)==null?void 0:a.closeDb==null?void 0:a.closeDb();j=null}g.createDB=a;g.closeDB=e}),98);
__d("MAWReStoreDbSetup",["MAWRestoreSchemaIndexedDB","asyncToGeneratorRuntime","cr:8810","err","gkx"],(function(a,b,c,d,e,f,g){"use strict";f=c("gkx")("23906")?d("MAWRestoreSchemaIndexedDB").createDB:null;var h=(d=f)!=null?d:b("cr:8810")==null?void 0:b("cr:8810").createDB,i;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield i);a==null?void 0:a.closeDb==null?void 0:a.closeDb();i=null});return j.apply(this,arguments)}function e(){if(h==null)throw c("err")("Unexpected invocation of OneDB");i==null&&(i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield h());yield a.runInTransaction(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){}),"readwrite");return a})());return i}g.closeDB=a;g.getDB=e}),98);
__d("MAWIDbSetupQpl",["MAWQplProxy","qpl"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWQplProxy").startQplUserFlow(c("qpl")._(1056836116,"905"));b=a;g["default"]=b}),98);
__d("MAWDexieError",[],(function(a,b,c,d,e,f){"use strict";a="ModifyError";b="BulkError";c="OpenFailedError";d="VersionChangeError";e="SchemaError";var g="UpgradeError",h="InvalidTableError",i="MissingAPIError",j="NoSuchDatabaseError",k="InvalidArgumentError",l="SubTransactionError",m="UnsupportedError",n="InternalError",o="DatabaseClosedError",p="PrematureCommitError",q="ForeignAwaitError",r="UnknownError",s="ConstraintError",t="DataError",u="TransactionInactiveError",v="ReadOnlyError",w="VersionError",x="NotFoundError",y="InvalidStateError",z="InvalidAccessError",A="AbortError",B="TimeoutError",C="QuotaExceededError",D="SyntaxError",E="DataCloneError";A={AbortError:A,BulkError:b,ConstraintError:s,DatabaseClosedError:o,DataCloneError:E,DataError:t,ForeignAwaitError:q,InternalError:n,InvalidAccessError:z,InvalidArgumentError:k,InvalidStateError:y,InvalidTableError:h,MissingAPIError:i,ModifyError:a,NoSuchDatabaseError:j,NotFoundError:x,OpenFailedError:c,PrematureCommitError:p,QuotaExceededError:C,ReadOnlyError:v,SchemaError:e,SubTransactionError:l,SyntaxError:D,TimeoutError:B,TransactionInactiveError:u,UnknownError:r,UnsupportedError:m,UpgradeError:g,VersionChangeError:d,VersionError:w};f.DEXIE_ERROR=A}),66);
__d("MAWIDbSetupQplEventListener",["MAWDexieError"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null;function j(a){var b=new Set(Object.keys(d("MAWDexieError").DEXIE_ERROR));b.has(a.reason)&&h!=null&&(h.endFail(a.reason),i!=null&&(i(),i=null))}b=function(b,c){h=b,i=c,a.addEventListener("unhandledrejection",j)};g.trackDbSetupFailure=b}),98);
__d("MAWIndexedDb",["Deferred","FBLogger","MAWBridge","MAWCurrentUser","MAWDataSyncMiddleware","MAWDbMutationMiddleware","MAWDbSchema","MAWDbVersion","MAWDexieTable","MAWIDbSetupQpl","MAWIDbSetupQplEventListener","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWQplProxy","MAWRestoreRewriteUtils","MAWTransactor","Promise","WATagsLogger","WAWorkerGlobalScope","asyncToGeneratorRuntime","cr:4773","dexie_maw","err","gkx","promiseDone","qpl","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["DB is null"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["DB setup complete, marking as ready"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["DB Open blocked"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["actual version: ",", current: ",", requested: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Current version: ",". Shim: ",". 1DB: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Starting DB Setup"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[afterTransaction] afterTransactionForThreadEvent called outside of dexie transaction"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[afterTransaction] called outside of dexie transaction"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[afterTransactionEffect] called outside of dexie transaction"]);q=function(){return a};return a}var r=null,s=null,t=new(c("Deferred"))(),u=!1,v=!1,w=d("WATagsLogger").TAGS(["DB"]);function x(){t=null,u=!1}function a(){return v}function e(a,b,c){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){b=b===void 0?{enableDataSyncMiddleware:!0}:b;var f=b.enableDataSyncMiddleware,g=b.shimEnabled,h=g===void 0?!1:g;g=babelHelpers.objectWithoutPropertiesLoose(b,["enableDataSyncMiddleware","shimEnabled"]);v=!0;b=d("MAWCurrentUser").getID();if(r!=null)return;if(u){var o;return(o=t)==null?void 0:o.getPromise()}w.LOG(n());u=!0;t=(o=t)!=null?o:new(c("Deferred"))();d("MAWIDbSetupQplEventListener").trackDbSetupFailure(c("MAWIDbSetupQpl"),function(){var a;(a=t)==null?void 0:a.reject();x()});s=d("MAWIndexedDbMetadata").dbName(b);var p=(yield d("MAWDbVersion").getDexieDbVersion(s,h));if(!h){w.LOG(m(),p,h,d("MAWRestoreRewriteUtils").isOneDBEnabled());d("MAWQplProxy").sendQPLIntAnnotationThroughBridge(c("qpl")._(1056839232,"112"),"dbVersion",(o=p)!=null?o:0);d("MAWQplProxy").sendQPLIntAnnotationThroughBridge(c("qpl")._(1056839232,"112"),"useSentBytesCache",c("gkx")("33008")?1:0)}r=new(d("MAWDexieTable").DexieTable)(s,function(b){f&&b.use(d("MAWDataSyncMiddleware").getDataSyncMiddleware());!h&&a!=null&&b.use(d("MAWDbMutationMiddleware").getMAWDbMutationMiddleware(a));h&&b.use(d("MAWDbMutationMiddleware").getMAWVaultMiddleware());var g=d("MAWDbVersion").updateDB(b,p,e);h||(d("MAWQplProxy").sendQPLBoolAnnotationThroughBridge(c("qpl")._(1056839232,"112"),"dbUpgradeNeeded",p!==g),w.LOG(l(),g,p,e),c("MAWIDbSetupQpl").addPoint("database_version_upgraded ",{"int":{dbVersion:g}}));b.on("blocked",function(){w.ERROR(k())});b.on("ready",function(a){var b;w.LOG(j());(b=t)==null?void 0:b.resolve();x();if(a==null){w.ERROR(i());return}c("MAWIDbSetupQpl").endSuccess({"int":{dbVersion:g}})});b.on("versionchange",function(){var a=g!=null?g-1:0;c("MAWIDbSetupQpl").addPoint("database_version_upgraded ",{"int":{prev_db_version:a}});(a=d("WAWorkerGlobalScope").workerGlobalScope.location)==null?void 0:a.reload==null?void 0:a.reload()})},void 0,g);return(b=t)==null?void 0:b.getPromise()});return y.apply(this,arguments)}function z(a){if(r==null){throw c("err")('IndexDB has not been initialized before executing "'+((a=a)!=null?a:"unnamed")+'"')}return r}function A(a){if(r!=null&&!u)return(h||(h=b("Promise"))).resolve(r);t=t||new(c("Deferred"))();return t.getPromise().then(function(){return z(a)})}function f(){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield A());a!=null&&(a.close(),r=null);x()});return B.apply(this,arguments)}function C(a){r=a,x()}var D=new WeakMap(),E=new WeakMap();function F(a){var b=c("dexie_maw").currentTransaction;if(b==null){w.ERROR(q());throw c("unrecoverableViolation")("afterTransactionEffect called outside of dexie transaction","messenger_e2ee_web")}if(typeof a!=="function")return;var d=D.get(b)||[];d.push(a);D.set(b,d);d.length===1&&b.on("complete",function(){var a=D.get(b)||[];a.forEach(function(a){a()});D["delete"](b)})}function G(a){if(c("dexie_maw").currentTransaction==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("Cannot use afterTransactionRestore outside of a MAW transaction");b("cr:4773")!=null&&b("cr:4773").handleEventWithRestore(c("dexie_maw").currentTransaction.idbtrans,a)}function H(a){var b=c("dexie_maw").currentTransaction;if(b==null){w.ERROR(p());throw c("unrecoverableViolation")("afterTransaction called outside of dexie transaction","messenger_e2ee_web")}var e=E.get(b);if(e!=null)e.push(a);else{var f=[a];E.set(b,f);b.on("complete",function(){E["delete"](b),d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:f})})}}function I(a){b("cr:4773")!=null?G(a):H(a)}function J(a,b){var e=c("dexie_maw").currentTransaction;if(e==null){w.ERROR(o());throw c("unrecoverableViolation")("afterTransactionForThreadEvent called outside of dexie transaction","messenger_e2ee_web")}e.on("complete",function(){d("MAWBridge").getBridge().fireAndForget("threadEvent",b,a)})}function K(){r!=null&&(r.close(),r=null)}function L(a){K();var b=s;b===null&&a!=null&&(b=d("MAWIndexedDbMetadata").dbName(a));c("promiseDone")(d("MAWIndexedDBDeletion").deleteDB(b,"maw"))}g.TABLES_TO_ENCRYPT=d("MAWDbSchema").TABLES_TO_ENCRYPT;g.makeMsgrTransactor=d("MAWTransactor").makeMsgrTransactor;g.makeSignalTransactor=d("MAWTransactor").makeSignalTransactor;g.makeMsgrAndSignalTransactor=d("MAWTransactor").makeMsgrAndSignalTransactor;g.willSetupDB=a;g.makeDB=e;g.getDBExn=z;g.getDB=A;g.closeDB=f;g.setDB_INTERNAL_USE_ONLY=C;g.afterTransactionEffect=F;g.afterTransaction=I;g.afterTransactionThreadEvent=J;g.closeDb=K;g.deleteDb=L}),98);
__d("MAWDexieCastToPromise",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){return(g||(g=b("Promise"))).resolve(a)}function c(a){return a}f.dexieCastToPromise=a;f.promiseCastToDexiePromise_I_KNOW_WHAT_I_AM_DOING=c}),66);
__d("MAWLLAMigrationUtils",["MAWRestoreDbState","gkx","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";b=c("justknobx")._("652");var h=1/Math.max(b,10);e=1/(b/10);f=1/(5*b);b=1/(10*b);var i=new Map([["setClockSkew",b],["getRoutingInfo",f],["unknown",b],["writeOutgoingMsg",e],["processFutureProofMsgs",e],["markThreadAsReadUpTo",e],["handleMediaDownload",e],["getMsgForREquestReuploadMedia",e],["createGroup",e],["createGroups",e],["BulkProcessFutureProofMsgs",e],["getAllMessageIdsAndRangesForThread",e]]),j=new Set(["uploadMsgBackupGetMsgs","updateBackupEntFbid","saveXMAMediaAndMetadata","saveRTCXMAMediaAndMetadata","writeRetroactiveBackupsState","getBackupThreads","uploadMessagesForThread","constructEchoMessage","updateBackupEntFbidInMediaBackup","restoreUpdateThread","restoreUpdateMessages","restoreUpdateNextInChatMsgId","handleEncryptedBackupsSecret","restoreInsertMsgsToDb","getMsgsByProtocolMsgIds","restoreGetMsg","restoreMaybeGetOldestNonAdminMessage","restoreGetMediaForXMAByObjectIds","restoreWriteXMAsToDb","restoreWriteReactionsToDb","restoreGetThread","restoreDeleteMessages","getChunkOfTheDownloadedFile","updateMediaWithDownloadedChunkBlob","invokeRestoreAccessCheckSprocToDownloadAttachment","restoreLinkMedias","getChunksByHash","bulkGetRetroactiveMedia","updateRetroactiveBackupsStore","getRetryItems","housekeepUploadRetryTable","getMsgsEB"]);function a(a,b,e){b===void 0&&(b=!1);e===void 0&&(e={});var f=i.get(a)||h;return a==="debug"||a==="test"?[]:c("gkx")("23956")&&Math.random()<f?[j.has(a)?c("qpl")._(521475322,"1350"):c("qpl")._(1056839327,"560"),babelHelpers["extends"]({bool:{isUsingShim:d("MAWRestoreDbState").isUsingShim(),newLLA:b},string:{transactor:a}},e)]:[]}g.getTransactorQPLParam=a}),98);
__d("WAPromiseQueue",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a){a===void 0&&(a=-1),this.$1=(g||(g=b("Promise"))).resolve(),this.$3=0,this.$2=a}var c=a.prototype;c.wait=function(){return this.$1};c.enqueueHandlers=function(a,b,c){var d=this;this.$3++;b=this.$1.then(function(){return a}).then(b,c);c=b.then();this.$1=h(b,this.$2)["finally"](function(){d.$3--});return c};c.enqueue=function(a){var b=this;this.$3++;a=this.$1.then(a);var c=a.then();this.$1=h(a,this.$2)["finally"](function(){b.$3--});return c};c.size=function(){return this.$3};return a}();c=function(){function a(a){a===void 0&&(a=-1),this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitIfPending=function(a){return this.$1.get(a)};c.wait=function(a){return this.$1.get(a)||(g||(g=b("Promise"))).resolve()};c.enqueueHandlers=function(a,b,c,d){c=this.wait(a).then(function(){return b}).then(c,d);return this.$3(a,c)};c.enqueue=function(a,b){b=this.wait(a).then(b);return this.$3(a,b)};c.$3=function(a,b){var c=this,d=b.then(),e,f=function(){c.$1.get(a)===e&&c.$1["delete"](a)};e=h(b,this.$2).then(f,f);this.$1.set(a,e);return d};return a}();function h(a,c){if(c>=0)return new(g||(g=b("Promise")))(function(b){var d=function(){return void b()};a.then(d,d);setTimeout(d,c)});else return a.then(i,i)}function i(){}f.PromiseQueue=a;f.PromiseQueueMap=c}),66);
__d("MAWTransactor",["Deferred","FBLogger","MAWDexieCastToPromise","MAWDexieTable","MAWErrorObject","MAWExceededStorageQuota","MAWIndexedDb","MAWLLAMigrationUtils","MAWQplProxy","MAWTransactionMode","WAPromiseQueue","asyncToGeneratorRuntime","dexie_maw"],(function(a,b,c,d,e,f,g){"use strict";var h=["MWPTransactor"],i=c("FBLogger")("messenger_e2ee_web"),j=1,k=new(d("WAPromiseQueue").PromiseQueue)(),l=new Map();function m(a,b,e,f,g){e!=null&&c("dexie_maw").currentTransaction!=null&&e.endFail("invoked_in_nested_transaction");if(c("dexie_maw").currentTransaction!=null)throw i.mustfixThrow("makeMsgrTransactor %s cannot be called within another transaction",f);return d("MAWIndexedDb").getDB().then(function(c){return c.transact(a,b,g)})}function n(a,b,e,f,g){e=d("MAWDexieTable").getDexiePSDItem("transactionId");if(e==null)throw i.mustfixThrow("BulkTransactor cannot be called without a transaction id with transaction: %s",f);var h=l.get(e)||[],j=new(c("Deferred"))();h.push({fn:g,mode:a,promise:j,stores:b,transactorName:f});l.set(e,h);return j.getPromise()}function o(a,b,c,e,f){var g=d("MAWDexieTable").getDexiePSDItem("transactor");return g==="bulk"?n(a,b,c,e,f):m(a,b,c,e,f)}function p(a){var b=[].concat(l.get(a)||[]);l["delete"](a);if(b.length===0)return d("MAWDexieTable").dexieResolve();i.debug("Bulking %s db operations together",b.length);a=b.some(function(a){a=a.mode;return a===d("MAWTransactionMode").READWRITE})?d("MAWTransactionMode").READWRITE:d("MAWTransactionMode").READONLY;var c=Array.from(new Set(b.flatMap(function(a){a=a.stores;return a}))),e=d("MAWIndexedDb").getDBExn("BulkTransaction");return d("MAWDexieCastToPromise").promiseCastToDexiePromise_I_KNOW_WHAT_I_AM_DOING(e.transact(a,c,function(){return b.reduce(function(a,b){var c=b.fn,e=b.promise,f=b.transactorName;return a.then(function(){return c()}).then(function(a){e.resolve(a)})["catch"](function(a){e.reject(a);d("MAWExceededStorageQuota").checkQuotaExceededError(a);throw v(d("MAWErrorObject").getErrorObject(a)).mustfixThrow("Error completing bulk operation %s",f)})},d("MAWDexieTable").dexieResolve())}).then(function(){d("MAWDexieTable").clearDexiePSDItem("transactionId"),i.debug("Finished bulk transaction")}))}function a(a){return k.enqueue(function(){if(c("dexie_maw").currentTransaction!=null)throw i.mustfixThrow("runInBulkTransaction cannot be called within another transaction");if(d("MAWDexieTable").getDexiePSDItem("transactionId")!=null)throw i.mustfixThrow("Several transactions are trying to be executed at the same time: %s",d("MAWDexieTable").getDexiePSDItem("transactionId"));i.debug("Running in bulk transaction");return d("MAWDexieCastToPromise").dexieCastToPromise(d("MAWDexieTable").dexieResolve().then(function(){var b=j++;d("MAWDexieTable").setDexiePSDItem("transactor","bulk");d("MAWDexieTable").setDexiePSDItem("transactionId",b);var c=a();d("MAWDexieTable").clearDexiePSDItem("transactor");return p(b).then(function(){return d("MAWDexieCastToPromise").promiseCastToDexiePromise_I_KNOW_WHAT_I_AM_DOING(c)})["finally"](function(){d("MAWDexieTable").clearDexiePSDItem("transactionId")})}))})["catch"](function(a){throw v(d("MAWErrorObject").getErrorObject(a)).mustfixThrow("Uncaught exception in runInBulkTransactor")})}function q(a){a=d("MAWLLAMigrationUtils").getTransactorQPLParam(a);a=a.length===2?a:[null,void 0];var b=a[0];a=a[1];return b!=null?d("MAWQplProxy").startQplUserFlow(b,a):null}function e(a,b,c){return s(a,b,c)}function f(a,b,c){return s(a,b,c)}function r(a,b,c){return s(a,b,c)}function s(a,b,c){var e=Object.keys(a),f=e.some(function(b){return a[b]===d("MAWTransactionMode").READWRITE})?d("MAWTransactionMode").READWRITE:d("MAWTransactionMode").READONLY;return function(){for(var a=arguments.length,g=new Array(a),i=0;i<a;i++)g[i]=arguments[i];var j=q(b);return d("MAWIndexedDb").getDB(b).then(function(a){return o(f,e,j,b,function(){d("MAWDexieTable").setDexiePSDItem("transactorQPLEvent",j);var f=j!=null?a.stores[e[0]].get("").then(function(){var a=d("MAWDexieTable").getDexiePSDItem("transactor");j==null?void 0:j.addPoint("transaction_opened",{bool:{isBulkTransaction:a==="bulk"}});j==null?void 0:j.addPoint("transactor_execution_start")}):d("MAWDexieTable").dexieResolve();return f.then(function(){return c(a.stores).apply(void 0,g)}).then(function(a){j==null?void 0:j.addPoint("transactor_execution_end");j==null?void 0:j.endSuccess();return a})["catch"](function(a){d("MAWExceededStorageQuota").checkQuotaExceededError(a);j==null?void 0:j.endFail("transaction_fail");a=d("MAWErrorObject").getErrorObject(a);throw v(a).mustfixThrow("[%s] Error performing %s transaction",h.join("|"),(a=b)!=null?a:"")})})})["catch"](function(a){d("MAWExceededStorageQuota").checkQuotaExceededError(a);j==null?void 0:j.endFail("transaction_fail");a=d("MAWErrorObject").getErrorObject(a);throw v(a).mustfixThrow("[%s] Error performing %s transaction",h.join("|"),(a=b)!=null?a:"")})}}function t(a,b,c,d){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=a+"_"+e,g=q(f),i=(yield d("MAWIndexedDb").getDB(f));return i.transact(b,[a],function(){var b=g!=null?i.stores[a].get("").then(function(){g==null?void 0:g.addPoint("transaction_opened",{bool:{isBulkTransaction:!1}}),g==null?void 0:g.addPoint("transactor_execution_start")}):d("MAWDexieTable").dexieResolve();return b.then(function(){return c(i.stores[a])})}).then(function(a){g==null?void 0:g.addPoint("transactor_execution_end");g==null?void 0:g.endSuccess();return a})["catch"](function(a){d("MAWExceededStorageQuota").checkQuotaExceededError(a);g==null?void 0:g.endFail("transaction_fail");a=d("MAWErrorObject").getErrorObject(a);throw v(a).mustfixThrow("[%s] Error performing %s transaction",h.join("|"),f)})});return u.apply(this,arguments)}function v(a){if(a)return i.catching(a);else return i}function w(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(c("dexie_maw").currentTransaction==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("Cannot use runInLSDB outside of a MAW transaction");var b=c("dexie_maw").currentTransaction.idbtrans;b=(yield b.transaction);return a(b)});return x.apply(this,arguments)}g.runInBulkTransaction=a;g.makeMsgrTransactor=e;g.makeSignalTransactor=f;g.makeMsgrAndSignalTransactor=r;g.persistedQueueTransactor=t;g.runInLSDB=w}),98);
__d("isEncryptionAtRestEnabled",["isInstamadillo","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(c("qex")._("507")===!0)return!0;else return c("isInstamadillo")()}g["default"]=a}),98);
__d("MAWDbMiddlewareMutations",["MAWDbObjEncryption","MAWVaultDb","MAWVaultDefinitions","gkx","isEncryptionAtRestEnabled"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){if(!c("gkx")("23909")&&!(c("isEncryptionAtRestEnabled")()||c("gkx")("23910")))return a;a=babelHelpers["extends"]({},a);a=d("MAWVaultDb").unvaultDbRow(a,b,d("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS);a=d("MAWDbObjEncryption").encryptDbObj(a,b,e);return a}function b(a,b){return!c("gkx")("23909")?a:d("MAWVaultDb").unvaultDbRow(babelHelpers["extends"]({},a),b,d("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS)}function e(a,b,e){a=d("MAWDbObjEncryption").decryptDbObj(babelHelpers["extends"]({},a),b,e);return!c("gkx")("23909")?a:d("MAWVaultDb").vaultDbRow(a,b,d("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS)}function f(a,b){if(a==null)return void 0;return!c("gkx")("23909")?a:d("MAWVaultDb").vaultDbRow(a,b,d("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS)}g.mutateValue=a;g.mutateVaultedValue=b;g.getValue=e;g.getVaultedValue=f}),98);
__d("MAWDbMutationMiddleware",["FBLogger","MAWDbMiddlewareMutations"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return{create:function(b){return babelHelpers["extends"]({},b,{table:function(e){var f=b.table(e);try{return babelHelpers["extends"]({},f,{get:function(b){return f.get(b).then(function(b){return b==null?void 0:d("MAWDbMiddlewareMutations").getValue(b,e,a)})},getMany:function(b){return f.getMany(b).then(function(b){return b.map(function(b){return b==null?void 0:d("MAWDbMiddlewareMutations").getValue(b,e,a)})})},mutate:function(b){var c=null;switch(b.type){case"add":case"put":c=b.values.map(function(b){return d("MAWDbMiddlewareMutations").mutateValue(b,e,a)});break;case"delete":break;case"deleteRange":break}if(b.type==="delete"||b.type==="deleteRange"||c==null)return f.mutate(b);b.values=c;return f.mutate(b).then(function(a){return a})},openCursor:function(b){return f.openCursor(b).then(function(b){return b==null||b.value==null?b:h(b,e,a)})},query:function(b){return f.query(b).then(function(b){if(b.result.length===0||typeof b.result[0]!=="object")return b;var c=b.result.map(function(b){return d("MAWDbMiddlewareMutations").getValue(b,e,a)});b.result=c;return b})}})}catch(a){c("FBLogger")("mpf_web_foundations").catching(a).mustfix("Error applying MAWDbMiddleware");return f}}})},name:"MAWDbMutationMiddleware",stack:"dbcore"}}function b(){return{create:function(a){return babelHelpers["extends"]({},a,{table:function(b){var e=a.table(b);try{return babelHelpers["extends"]({},e,{get:function(a){return e.get(a).then(function(a){return d("MAWDbMiddlewareMutations").getVaultedValue(a,b)})},getMany:function(a){return e.getMany(a).then(function(a){return a.map(function(a){return d("MAWDbMiddlewareMutations").getVaultedValue(a,b)})})},mutate:function(a){if(a.type==="delete"||a.type==="deleteRange")return e.mutate(a);a.values=a.values.map(function(a){return d("MAWDbMiddlewareMutations").mutateVaultedValue(a,b)});return e.mutate(a)},openCursor:function(a){return e.openCursor(a).then(function(a){return a==null||a.value==null?a:i(a,b)})},query:function(a){return e.query(a).then(function(a){return a.result.length===0||typeof a.result[0]!=="object"?a:babelHelpers["extends"]({},a,{result:a.result.map(function(a){return d("MAWDbMiddlewareMutations").getVaultedValue(a,b)})})})}})}catch(a){c("FBLogger")("mpf_web_foundations").catching(a).mustfix("Error applying MAWDbMiddleware");return e}}})},name:"getMAWVaultMiddleware",stack:"dbcore"}}function h(a,b,c){var e;return Object.create(a,{"continue":{get:function(){return a["continue"]}},continuePrimaryKey:{get:function(){return a.continuePrimaryKey}},key:{get:function(){return a.key}},primaryKey:{get:function(){return a.primaryKey}},start:{value:function(f){return a.start(function(){e=d("MAWDbMiddlewareMutations").getValue(a.value,b,c);try{a.value=e}catch(a){}f()})}},value:{get:function(){return e}}})}function i(a,b){var c;return Object.create(a,{"continue":{get:function(){return a["continue"]}},continuePrimaryKey:{get:function(){return a.continuePrimaryKey}},key:{get:function(){return a.key}},primaryKey:{get:function(){return a.primaryKey}},start:{value:function(e){return a.start(function(){c=d("MAWDbMiddlewareMutations").getVaultedValue(a.value,b);try{a.value=c}catch(a){}e()})}},value:{get:function(){return c}}})}g.getMAWDbMutationMiddleware=a;g.getMAWVaultMiddleware=b}),98);
__d("MAWXMACTAUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.actionUrl,c=a.buttonType,d=a.nativeUrl;a=a.title;return{actionUrl:b,buttonType:c,nativeUrl:d,title:a}}function b(a){var b=a.actionUrl,c=a.buttonType,d=a.nativeUrl;a=a.title;return{actionUrl:b,buttonType:c,nativeUrl:d,title:a}}f.toMAWCTAEncode=a;f.fromMAWCTAEncode=b}),66);
__d("WAServerSync.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({SET:0,REMOVE:1});c={};e={};f={};b={};var h={},i={},j={},k={},l={},m={},n={};c.internalSpec={version:[1,(d=d("WAProtoConst")).TYPES.UINT64]};e.internalSpec={code:[1,d.TYPES.UINT64],text:[2,d.TYPES.STRING]};f.internalSpec={blob:[1,d.TYPES.BYTES]};b.internalSpec={blob:[1,d.TYPES.BYTES]};h.internalSpec={id:[1,d.TYPES.BYTES]};i.internalSpec={index:[1,d.TYPES.MESSAGE,f],value:[2,d.TYPES.MESSAGE,b],keyId:[3,d.TYPES.MESSAGE,h]};j.internalSpec={mediaKey:[1,d.TYPES.BYTES],directPath:[2,d.TYPES.STRING],handle:[3,d.TYPES.STRING],fileSizeBytes:[4,d.TYPES.UINT64],fileSha256:[5,d.TYPES.BYTES],fileEncSha256:[6,d.TYPES.BYTES]};k.internalSpec={version:[1,d.TYPES.MESSAGE,c],records:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i],mac:[3,d.TYPES.BYTES],keyId:[4,d.TYPES.MESSAGE,h]};l.internalSpec={mutations:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m]};m.internalSpec={operation:[1,d.TYPES.ENUM,a],record:[2,d.TYPES.MESSAGE,i]};n.internalSpec={version:[1,d.TYPES.MESSAGE,c],mutations:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m],externalMutations:[3,d.TYPES.MESSAGE,j],snapshotMac:[4,d.TYPES.BYTES],patchMac:[5,d.TYPES.BYTES],keyId:[6,d.TYPES.MESSAGE,h],exitCode:[7,d.TYPES.MESSAGE,e],deviceIndex:[8,d.TYPES.UINT32],clientDebugData:[9,d.TYPES.BYTES]};g.SyncdMutation$SyncdOperation=a;g.SyncdVersionSpec=c;g.ExitCodeSpec=e;g.SyncdIndexSpec=f;g.SyncdValueSpec=b;g.KeyIdSpec=h;g.SyncdRecordSpec=i;g.ExternalBlobReferenceSpec=j;g.SyncdSnapshotSpec=k;g.SyncdMutationsSpec=l;g.SyncdMutationSpec=m;g.SyncdPatchSpec=n}),98);
__d("MAWDbObjDecode",["MAWArmadilloAppDataTableSchema.pb","MAWArmadilloAppMetaTableSchema.pb","MAWArmadilloCollectionVersionsTableSchema.pb","MAWArmadilloContactsTableSchema.pb","MAWArmadilloDeletedMessagesTableSchema.pb","MAWArmadilloDeviceChangeAlertsTableSchema.pb","MAWArmadilloDyiBatchTableSchema.pb","MAWArmadilloEBMsgRangesTableSchema.pb","MAWArmadilloEditMsgHistoryTableSchema.pb","MAWArmadilloGroupInfoTableSchema.pb","MAWArmadilloGroupInvitesTableSchema.pb","MAWArmadilloMediaTablesSchema.pb","MAWArmadilloMessagesTableSchema.pb","MAWArmadilloMetaRowTableSchema.pb","MAWArmadilloMissingKeysTableSchema.pb","MAWArmadilloParticipantsTableSchema.pb","MAWArmadilloPendingMutationsTableSchema.pb","MAWArmadilloPersonalSenderKeyStatusTableSchema.pb","MAWArmadilloReactionsTableSchema.pb","MAWArmadilloReceiptTablesSchema.pb","MAWArmadilloRetroactiveBackupsStateTableSchema.pb","MAWArmadilloSignalTablesSchema.pb","MAWArmadilloSyncActionsTableSchema.pb","MAWArmadilloSyncKeysTableSchema.pb","MAWArmadilloTasksTableSchema.pb","MAWArmadilloThreadsTableSchema.pb","MAWArmadilloUnrenderedMessagesTableSchema.pb","MAWArmadilloXMATableSchema.pb","MAWMsgType","MAWXMACTAUtil","WAServerSync.pb","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){var h={appData:function(a){return J(a)},appMeta:function(a){return K(a)},browserEncryptionMeta:function(a){throw c("err")("unexpected table for decryption")},chunk:function(a){return L(a)},collectionVersions:function(a){return V(a)},contacts:function(a){return E(a)},danglingQueue:function(a){throw c("err")("unexpected table for decryption")},deletedMessages:function(a){return n(a)},deviceChangeAlerts:function(a){return i(a)},dualSendMedia:function(a){throw c("err")("unexpected table for decryption")},dyiBatch:function(a){return P(a)},ebMsgRanges:function(a){return Q(a)},ebRestoreQueue:function(a){throw c("err")("unexpected table for decryption")},ebUploadQueue:function(a){throw c("err")("unexpected table for decryption")},editMsgHistory:function(a){return Y(a)},existingUsers:function(a){throw c("err")("unexpected table for decryption")},ftsBackloggedMessages:function(a){throw c("err")("unexpected table for decryption")},ftsEncryptionMeta:function(a){throw c("err")("unexpected table for decryption")},ftsIndexV3:function(a){throw c("err")("unexpected table for decryption")},groupInfo:function(a){return q(a)},groupInvites:function(a){return G(a)},historySyncQRCodeData:function(a){throw c("err")("unexpected table for decryption")},historySyncQRCodeSecretKey:function(a){throw c("err")("unexpected table for decryption")},identity:function(a){return t(a)},isDualSend:function(a){throw c("err")("unexpected table for decryption")},jobs:function(a){throw c("err")("unexpected table for decryption")},media:function(a){return N(a)},mediaBackup:function(a){return M(a)},messages:function(a){return m(a)},meta:function(a){return s(a)},missingKeys:function(a){return T(a)},participants:function(a){return F(a)},pendingMessageStanzaQueue:function(a){throw c("err")("unexpected table for decryption")},pendingMutations:function(a){return U(a)},pendingReceipts:function(a){return C(a)},pendingStanzas:function(a){throw c("err")("unexpected table for decryption")},personalSenderKeyStatuses:function(a){return I(a)},prekey:function(a){return u(a)},prekeyGeneration:function(a){return v(a)},reactions:function(a){return O(a)},receipts:function(a){return B(a)},retroactiveBackupsState:function(a){return R(a)},senderKeySessions:function(a){return y(a)},sentBytesCache:function(a){throw c("err")("unexpected table for decryption")},session:function(a){return w(a)},signedPrekey:function(a){return x(a)},staleQueue:function(a){throw c("err")("unexpected table for decryption")},stanzaQueue:function(a){throw c("err")("unexpected table for decryption")},syncActions:function(a){return S(a)},syncKeys:function(a){return W(a)},tasks:function(a){return H(a)},threads:function(a){return D(a)},unrenderedMessages:function(a){return o(a)},uploadRetryStatus:function(a){throw c("err")("unexpected table for decryption")},xma:function(a){return X(a)}};function a(a,b){if(Object.prototype.hasOwnProperty.call(h,b))b=h[b](a);else throw c("err")("not a valid table name");return b}function i(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloDeviceChangeAlertsTableSchema.pb").DeviceChangeAlertsTableSchemaProtoSpec,a);return{action:a.action,deviceJid:a.deviceJid,identity:a.identity,isArchived:a.isArchived,latitude:a.latitude,location:a.location,loggedOut:a.loggedOut,longitude:a.longitude,model:a.model,platform:a.platform,ts:a.ts}}function j(a){a=a.quote;var b;if(a!=null){if(a.content==null)throw c("err")("QuotedMsgContent missing upon decoding");var d=a.content,e=d.author,f=d.externalId,g=d.mediaId,h=d.msgContent,i=d.msgId,j=d.sourceId,k=d.specialTextSize,l=d.ts,m=d.type;d=d.xmaMessageType;b={content:babelHelpers["extends"]({},a.content,{author:e,externalId:f,mediaId:g,msgContent:h,msgId:i,sourceId:j,specialTextSize:k,ts:l,type:m,xmaMessageType:d}),remoteJid:a.remoteJid}}return b}function k(a){if(a==null)return a;else return new Uint8Array(a)}function l(a){if(a==null||a.length===0)return new Set();else return new Set(a)}function m(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMessagesTableSchema.pb").MessagesTableSchemaProtoSpec,a);var b=a.msgContent;if(a.type===d("MAWMsgType").MSG_TYPE.FUTUREPROOF){if(b==null)throw c("err")("MsgContent missing upon decoding futureproof message");b.subtype=b.subtype}var e=j(a),f=p(a.reportingMeta);return babelHelpers["extends"]({},a,{msgContent:b,quote:e,reportingMeta:f})}function n(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloDeletedMessagesTableSchema.pb").DeletedMessagesTableSchemaProtoSpec,a);return babelHelpers["extends"]({},a)}function o(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloUnrenderedMessagesTableSchema.pb").UnrenderedMessagesTableSchemaProtoSpec,a);var b=j(a),c=p(a.reportingMeta);return babelHelpers["extends"]({},a,{quote:b,reportingMeta:c})}function p(a){if(a==null)return;return{frankingKey:a.frankingKey!=null?new Uint8Array(a.frankingKey):a.frankingKey,frankingTag:a.frankingTag!=null?new Uint8Array(a.frankingTag):a.frankingTag,frankingVersion:a.frankingVersion,reportingContent:a.reportingContent,reportingTag:a.reportingTag!=null?new Uint8Array(a.reportingTag):a.reportingTag}}function q(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloGroupInfoTableSchema.pb").GroupInfoSchemaProtoSpec,a);return{creationTs:a.creationTs,creator:a.creator,inviter:a.inviter,memberAddMode:a.memberAddMode,msgExpiration:a.msgExpiration,name:a.name,nameOwner:a.nameOwner,nameTs:a.nameTs,participantVersion:a.participantVersion}}function r(a,b){var d;a=a;if(a==null)d=a;else{var e=a.privateKey;a=a.publicKey;if(e==null||a==null)throw c("err")("Decoding "+b+" private or public key missing");d={privateKey:new Uint8Array(e),publicKey:new Uint8Array(a)}}return d}function s(a){var b,c,e,f;a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMetaRowTableSchema.pb").MetaRowTableSchemaProtoSpec,a);b=(b=a.value)==null?void 0:b.cat;if(b==null)b=b;else{var g;b={encrypted_serialized_cat:(g=a.value)==null?void 0:(g=g.cat)==null?void 0:g.encryptedSerializedCat,expiration_time_in_seconds:(g=a.value)==null?void 0:(g=g.cat)==null?void 0:g.expirationTimeInSeconds}}g=(g=a.value)==null?void 0:g.edgeInfo;g=k(g);c=r((c=a.value)==null?void 0:c.identityKeyPair,"identityKeyPair");e=r((e=a.value)==null?void 0:e.authKeyPair,"authKeyPair");return{value:{abProps:(f=a.value)==null?void 0:f.abProps,authKeyPair:e,cat:b,certificateChain:(f=a.value)==null?void 0:f.certificateChain,clockSkew:(e=a.value)==null?void 0:e.clockSkew,deviceId:(b=a.value)==null?void 0:b.deviceId,deviceUUID:(f=a.value)==null?void 0:f.deviceUUID,edgeInfo:g,fbid:(e=a.value)==null?void 0:e.fbid,identityKeyPair:c,lastPrekeyGenerationId:(b=a.value)==null?void 0:b.lastPrekeyGenerationId,lastPrekeyId:(f=a.value)==null?void 0:f.lastPrekeyId,lastSessionDeviceWasLinkedTo:(g=a.value)==null?void 0:g.lastSessionDeviceWasLinkedTo,lastSignedPrekeyId:(e=a.value)==null?void 0:e.lastSignedPrekeyId,regId:(c=a.value)==null?void 0:c.regId,registrationVersion:(b=a.value)==null?void 0:b.registrationVersion,restoreMigrationAttempts:(f=a.value)==null?void 0:f.restoreMigrationAttempts}}}function t(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").IdentityTableSchemaProtoSpec,a);var b=a.identity,c=a.firstSeenTs;b=k(b);return{deviceName:a.deviceName,firstSeenTs:c,identity:b,platform:a.platform}}function u(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").PrekeyTableSchemaProtoSpec,a);var b=a.encoded;b=k(b);return{encoded:b,isDeleted:a.isDeleted}}function v(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").PrekeyGenerationTableSchemaProtoSpec,a)}function w(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SessionTableSchemaProtoSpec,a);a=a.session;a=k(a);return{session:a}}function x(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SignedPrekeyTableSchemaProtoSpec,a);a=a.encoded;a=k(a);return{encoded:a}}function y(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SenderKeySessionsTableSchemaProtoSpec,a);var b=a.record;b=k(b);return{deviceId:a.deviceId,record:b}}function z(a){if(a.length===0)return null;else return new Map(a.map(function(a){var b=a.deviceJid;if(b==null||a.serializedPubKey==null)throw c("err")("Expected deviceJid or serializedPubKey are missing ");var d=new Uint8Array(a.serializedPubKey);a=k(a.baseKey);a={baseKey:a,pubKey:d};return[b,a]}))}function A(a){if(a==null)return null;else return new Map(a.map(function(a){if(a.deviceJid==null)throw c("err")("Expected deviceJID is missing ");return[a.deviceJid,(a=a.count)!=null?a:0]}))}function B(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloReceiptTablesSchema.pb").ReceiptsTableSchemaProtoSpec,a);var b,e=a.statusTsPerUser;e==null?b=new Map():b=new Map(e.map(function(a){if(a.userJid==null||a.dbUserStatusTs==null)throw c("err")("Expected userJid or dbUserStatus are missing ");return[a.userJid,a.dbUserStatusTs]}));e=a.recipientDevices;e=l(e);return{permittedIdentitiesPerDevice:z(a.permittedIdentitiesPerDevice),recipientDevices:e,retryCountsPerDevice:A(a.retryCountsPerDevice),statusTsPerUser:b}}function C(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloReceiptTablesSchema.pb").PendingReceiptsTableSchemaProtoSpec,a)}function D(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloThreadsTableSchema.pb").ThreadsTableSchemaProtoSpec,a);return{archived:a.archived,cannotReplyReason:a.cannotReplyReason,didInsertDualThreadCutoverAdminMsg:a.didInsertDualThreadCutoverAdminMsg,folder:a.folder,isMigratedLocally:a.isMigratedLocally,lastReadMsg:a.lastReadMsg,lastReadMsgReceiptSent:a.lastReadMsgReceiptSent,lastReadMsgTs:a.lastReadMsgTs,muteCallsExpireTimeMs:a.muteCallsExpireTimeMs,muteExpireTimeMs:a.muteExpireTimeMs,newestMsg:a.newestMsg,newestMsgTs:a.newestMsgTs,oldestMsg:a.oldestMsg,optimisticThreadKey:a.optimisticThreadKey,snippetMsg:a.snippetMsg,snippetMsgTs:a.snippetMsgTs}}function E(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloContactsTableSchema.pb").ContactsTableSchemaProtoSpec,a);var b=a.icdcInfo,c;b!=null&&(c={devices:b.devices.map(function(a){return new Uint8Array(a)}),dirty:b.dirty,sequence:b.sequence,signingDeviceIndex:b.signingDeviceIndex,timestamp:b.timestamp});return{dhash:a.dhash,ephemeralSetting:a.ephemeralSetting,ephemeralSyncResponseBackoffInfo:a.ephemeralSyncResponseBackoffInfo,icdcFails:a.icdcFails,icdcInfo:c,isBlocked:a.isBlocked,isRestricted:a.isRestricted,lastSyncTs:a.lastSyncTs,nameForSearch:a.nameForSearch,relationship:a.relationship}}function F(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloParticipantsTableSchema.pb").ParticipantsTableSchemaProtoSpec,a)}function G(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloGroupInvitesTableSchema.pb").GroupInvitesTableSchemaProtoSpec,a)}function H(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloTasksTableSchema.pb").TasksTableSchemaProtoSpec,a)}function I(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb").PersonalSenderKeyStatusTableSchemaProtoSpec,a);var b=a.hasSenderKey;b=l(b);return{hasSenderKey:b,rotateSenderKey:a.rotateSenderKey,senderKeyId:a.senderKeyId,senderKeyTs:a.senderKeyTs}}function J(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloAppDataTableSchema.pb").AppDataTableSchemaProtoSpec,a);return{ack:a.ack,contents:a.contents,permittedIdentitiesPerDevice:z(a.permittedIdentitiesPerDevice),recipientDevices:new Set(a.recipientDevices),sendPartial:a.sendPartial,ts:a.ts}}function K(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloAppMetaTableSchema.pb").AppMetaTableSchemaProtoSpec,a)}function L(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").ChunkTableSchemaProtoSpec,a)}function M(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").MediaBackupSchemaProtoSpec,a)}function N(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").MediaTableSchemaProtoSpec,a);var b,e=a.mediaEntries;e==null?b=new Map():b=new Map(e.map(function(a){if(a.msgId==null||a.mediaEntryData==null)throw c("err")("Expected msgId or mediaEntryData are missing ");return[a.msgId,new Uint8Array(a.mediaEntryData)]}));return{mediaEntries:b,mediaType:a.mediaType,plaintextHash:a.plaintextHash,size:a.size,ts:a.ts,validatedAudioInfo:a.validatedAudioInfo,validatedDocumentFileInfo:a.validatedDocumentFileInfo,validatedImageInfo:a.validatedImageInfo,validatedVideoInfo:a.validatedVideoInfo}}function O(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloReactionsTableSchema.pb").ReactionsTableSchemaProtoSpec,a);return{ack:a.ack,author:a.author,groupingKey:a.groupingKey,reaction:a.reaction,reactToAuthor:a.reactToAuthor,ts:a.ts}}function P(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloDyiBatchTableSchema.pb").DyiBatchTableSchemaProtoSpec,a);return{isThread:a.isThread,numMessages:a.numMessages,numMessagesRestored:a.numMessagesRestored,numThreadsRestored:a.numThreadsRestored,oldestTs:a.oldestTs,qplFlowDescriptor:a.qplFlowDescriptor,qplInstanceKeyE2E:a.qplInstanceKeyE2E,qplInstanceKeyForThread:a.qplInstanceKeyForThread,threadId:a.threadId}}function Q(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloEBMsgRangesTableSchema.pb").EBMsgRangesTableSchemaProtoSpec,a);return{maxMsgExternalId:a.maxMsgExternalId,maxMsgSortOrderMs:a.maxMsgSortOrderMs,minMsgExternalId:a.minMsgExternalId,minMsgSortOrderMs:a.minMsgSortOrderMs}}function R(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloRetroactiveBackupsStateTableSchema.pb").RetroactiveBackupsStateTableSchemaProtoSpec,a);return{msgId:a.msgId}}function S(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSyncActionsTableSchema.pb").SyncActionsTableSchemaProtoSpec,a);return{binarySyncData:a.binarySyncData,keyId:a.keyId,timestamp:a.timestamp,valueMac:a.valueMac,version:a.version}}function T(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMissingKeysTableSchema.pb").MissingKeysTableSchemaProtoSpec,a);var b;a.deviceResponses==null?b=new Map():b=new Map(a.deviceResponses.map(function(a){if(a.deviceId==null)throw c("err")("Expected deviceId is missing");else return[a.deviceId,a.deviceResponse]}));return{deviceResponses:b,keyId:a.keyId,timestamp:a.timestamp}}function U(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloPendingMutationsTableSchema.pb").PendingMutationsTableSchemaProtoSpec,a);var b;switch(a.operation){case d("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.SET:b=d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET;break;case d("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.REMOVE:b=d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE;break;default:throw c("err")("operation missing when decoding PendingMutation")}return{binarySyncAction:a.binarySyncAction,operation:b,timestamp:a.timestamp,version:a.version}}function V(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloCollectionVersionsTableSchema.pb").CollectionVersionsTableSchemaProtoSpec,a);return{finiteFailureStartTime:a.finiteFailureStartTime,isCollectionInMacMismatchFatal:a.isCollectionInMacMismatchFatal,isCollectionLthashInconsistent:a.isCollectionLthashInconsistent,ltHash:a.ltHash,state:a.state,version:a.version}}function W(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSyncKeysTableSchema.pb").SyncKeysTableSchemaProtoSpec,a);return{fingerprint:a.fingerprint,keyData:a.keyData,timestamp:a.timestamp}}function X(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloXMATableSchema.pb").XMATableSchemaProtoSpec,a);return{author:a.author,ctas:a.ctas.map(function(a){return d("MAWXMACTAUtil").fromMAWCTAEncode(a)}),defaultCTA:a.defaultCTA==null?a.defaultCTA:d("MAWXMACTAUtil").fromMAWCTAEncode(a.defaultCTA),headerTitle:a.headerTitle,isTombstoned:a.isTombstoned,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines,maxTitleNumOfLines:a.maxTitleNumOfLines,msgId:a.msgId,overlayDescription:a.overlayDescription,overlayIconGlyph:a.overlayIconGlyph,overlayTitle:a.overlayTitle,previewMediaIds:a.previewMediaIds,subtitleText:a.subtitleText,targetId:a.targetId,targetType:a.targetType,targetUsername:a.targetUsername,threadJid:a.threadJid,titleText:a.titleText,xmaLayoutType:a.xmaLayoutType}}function Y(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloEditMsgHistoryTableSchema.pb").EditMsgHistoryTableSchemaProtoSpec,a);return{author:a.author,editExternalId:a.editExternalId,editTs:a.editTs,msgContent:a.msgContent,sendStatus:a.sendStatus,specialTextSize:a.specialTextSize}}g.decodeDbObj=a}),98);
__d("WASyncdKeyTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}function c(a){return a}function d(a){return a}f.toSyncKeyId=a;f.fromSyncKeyId=b;f.toSyncKeyData=c;f.fromSyncKeyData=d}),66);
__d("MAWDbObjEncode",["MAWArmadilloAppDataTableSchema.pb","MAWArmadilloAppMetaTableSchema.pb","MAWArmadilloContactsTableSchema.pb","MAWArmadilloDeletedMessagesTableSchema.pb","MAWArmadilloDeviceChangeAlertsTableSchema.pb","MAWArmadilloDyiBatchTableSchema.pb","MAWArmadilloEBMsgRangesTableSchema.pb","MAWArmadilloEditMsgHistoryTableSchema.pb","MAWArmadilloGroupInfoTableSchema.pb","MAWArmadilloGroupInvitesTableSchema.pb","MAWArmadilloMediaTablesSchema.pb","MAWArmadilloMessagesTableSchema.pb","MAWArmadilloMetaRowTableSchema.pb","MAWArmadilloParticipantsTableSchema.pb","MAWArmadilloPersonalSenderKeyStatusTableSchema.pb","MAWArmadilloReactionsTableSchema.pb","MAWArmadilloReceiptTablesSchema.pb","MAWArmadilloRetroactiveBackupsStateTableSchema.pb","MAWArmadilloSignalTablesSchema.pb","MAWArmadilloTasksTableSchema.pb","MAWArmadilloThreadsTableSchema.pb","MAWArmadilloUnrenderedMessagesTableSchema.pb","MAWArmadilloXMATableSchema.pb","MAWMsgType","MAWXMACTAUtil","WASyncdKeyTypes","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h={appData:C,appMeta:D,browserEncryptionMeta:b,chunk:E,contacts:x,danglingQueue:b,deletedMessages:i,deviceChangeAlerts:a,dualSendMedia:b,dyiBatch:I,ebMsgRanges:J,ebRestoreQueue:b,ebUploadQueue:b,editMsgHistory:M,existingUsers:b,ftsBackloggedMessages:b,ftsEncryptionMeta:b,ftsIndexV3:b,groupInfo:k,groupInvites:z,historySyncQRCodeData:b,historySyncQRCodeSecretKey:b,identity:m,isDualSend:b,jobs:b,media:G,mediaBackup:F,messages:f,meta:l,participants:y,pendingMessageStanzaQueue:b,pendingReceipts:v,pendingStanzas:b,personalSenderKeyStatuses:B,prekey:n,prekeyGeneration:o,reactions:H,receipts:u,retroactiveBackupsState:K,senderKeySessions:r,sentBytesCache:b,session:p,signedPrekey:q,staleQueue:b,stanzaQueue:b,tasks:A,threads:w,unrenderedMessages:j,uploadRetryStatus:b,xma:L};function a(a){a={action:a.action,deviceJid:a.deviceJid,identity:a.identity,isArchived:a.isArchived,latitude:a.latitude,location:a.location,loggedOut:a.loggedOut,longitude:a.longitude,model:a.model,platform:a.platform,ts:a.ts};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloDeviceChangeAlertsTableSchema.pb").DeviceChangeAlertsTableSchemaProtoSpec,a).readByteArray()}}function b(a){throw c("err")("unexpected table for encryption")}function e(a,b){if(Object.prototype.hasOwnProperty.call(h,b))b=h[b](a);else throw c("err")("not a valid table name");return b}function f(a){a.altIndex;a.externalId;a.messageDeleteTs;a.messageExpirationTs;a.msgId;a.quoteExternalId;a.revokedExternalId;a.rowId;a.serverTs;a.sortOrderMs;a.threadJid;a.unsendMsgContentDeleteTs;a=babelHelpers.objectWithoutPropertiesLoose(a,["altIndex","externalId","messageDeleteTs","messageExpirationTs","msgId","quoteExternalId","revokedExternalId","rowId","serverTs","sortOrderMs","threadJid","unsendMsgContentDeleteTs"]);a=a;var b;if(a.quote==null)b=a.quote;else{var c;c={author:a.quote.content.author,externalId:(c=a.quote)==null?void 0:c.content.externalId,mediaId:a.quote.content.mediaId,msgContent:a.quote.content.msgContent,msgId:a.quote.content.msgId,sourceId:a.quote.content.sourceId,specialTextSize:a.quote.content.specialTextSize,ts:a.quote.content.ts,type:a.quote.content.type,xmaMessageType:a.quote.content.xmaMessageType};c={content:c,remoteJid:a.quote.remoteJid};b=c}c=a.msgContent;a.type===d("MAWMsgType").MSG_TYPE.FUTUREPROOF&&(c={protobuf:a.msgContent.protobuf,subtype:a.msgContent.subtype});var e=a.ravenEphemeralType,f=a.ravenEphemeralMediaState;e=e!=null?e:null;f=f!=null?f:null;c={ack:a.ack,author:a.author,editCount:a.editCount,ephemeralCounterStarted:a.ephemeralCounterStarted,ephemeralMsgDisappeared:a.ephemeralMsgDisappeared,ephemeralSetting:a.ephemeralSetting,forwardingScore:a.forwardingScore,isExpiredXmaMsg:a.isExpiredXmaMsg,isForwarded:a.isForwarded,mediaId:a.mediaId,msgContent:c,originalTs:a.originalTs,quote:b,ravenEphemeralMediaState:f,ravenEphemeralType:e,reportingMeta:a.reportingMeta,resendCount:a.resendCount,specialTextSize:a.specialTextSize,ts:a.ts,type:a.type,xmaMessageType:a.xmaMessageType};return{encodedFields:c,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMessagesTableSchema.pb").MessagesTableSchemaProtoSpec,c).readByteArray()}}function i(a){a.author;a.chat;a.externalId;a.rowId;a=babelHelpers.objectWithoutPropertiesLoose(a,["author","chat","externalId","rowId"]);a={reason:String(a.reason)};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloDeletedMessagesTableSchema.pb").DeletedMessagesTableSchemaProtoSpec,a).readByteArray()}}function j(a){var b;if(a.quote==null)b=a.quote;else{var c;c={author:a.quote.content.author,externalId:(c=a.quote)==null?void 0:c.content.externalId,mediaId:a.quote.content.mediaId,msgContent:a.quote.content.msgContent,msgId:a.quote.content.msgId,sourceId:a.quote.content.sourceId,ts:a.quote.content.ts,type:a.quote.content.type,xmaMessageType:a.quote.content.xmaMessageType};c={content:c,remoteJid:a.quote.remoteJid};b=c}c={ack:a.ack,author:a.author,ephemeralSetting:a.ephemeralSetting,groupName:a.groupName,invitedParticipantUserJid:a.invitedParticipantUserJid,mediaId:a.mediaId,msgContent:a.msgContent,quote:b,reportingMeta:a.reportingMeta,resendCount:a.resendCount,ts:a.ts,type:a.type,xmaMessageType:a.xmaMessageType};return{encodedFields:c,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloUnrenderedMessagesTableSchema.pb").UnrenderedMessagesTableSchemaProtoSpec,c).readByteArray()}}function k(a){a={creationTs:a.creationTs,creator:a.creator,inviter:a.inviter,memberAddMode:a.memberAddMode,msgExpiration:a.msgExpiration,name:a.name,nameOwner:a.nameOwner,nameTs:a.nameTs,participantVersion:a.participantVersion};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloGroupInfoTableSchema.pb").GroupInfoSchemaProtoSpec,a).readByteArray()}}function l(a){var b=a.value.cat==null?a.value.cat:{encryptedSerializedCat:a.value.cat.encrypted_serialized_cat,expirationTimeInSeconds:a.value.cat.expiration_time_in_seconds};b={value:{abProps:a.value.abProps,authKeyPair:a.value.authKeyPair,cat:b,certificateChain:a.value.certificateChain,clockSkew:a.value.clockSkew,deviceId:a.value.deviceId,deviceUUID:a.value.deviceUUID,edgeInfo:a.value.edgeInfo,fbid:a.value.fbid,identityKeyPair:a.value.identityKeyPair,lastPrekeyGenerationId:a.value.lastPrekeyGenerationId,lastPrekeyId:a.value.lastPrekeyId,lastSessionDeviceWasLinkedTo:a.value.lastSessionDeviceWasLinkedTo,lastSignedPrekeyId:a.value.lastSignedPrekeyId,regId:a.value.regId,registrationVersion:a.value.registrationVersion}};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMetaRowTableSchema.pb").MetaRowTableSchemaProtoSpec,b).readByteArray()}}function m(a){a={deviceName:a.deviceName,firstSeenTs:a.firstSeenTs,identity:a.identity,platform:a.platform};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").IdentityTableSchemaProtoSpec,a).readByteArray()}}function n(a){a={encoded:a.encoded,isDeleted:a.isDeleted};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").PrekeyTableSchemaProtoSpec,a).readByteArray()}}function o(a){a={createdTs:a.createdTs,endingId:a.endingId,startingId:a.startingId};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").PrekeyGenerationTableSchemaProtoSpec,a).readByteArray()}}function p(a){a={session:a.session};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SessionTableSchemaProtoSpec,a).readByteArray()}}function q(a){a={encoded:a.encoded};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SignedPrekeyTableSchemaProtoSpec,a).readByteArray()}}function r(a){a={deviceId:a.deviceId,record:a.record};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SenderKeySessionsTableSchemaProtoSpec,a).readByteArray()}}function s(a){if(a==null)return a;else return Array.from(a,function(a){var b=a[0];a=a[1];return{baseKey:a.baseKey,deviceJid:b,serializedPubKey:a.pubKey}})}function t(a){if(a==null)return null;else return Array.from(a,function(a){var b=a[0];a=a[1];return{count:a,deviceJid:b}})}function u(a){var b=Array.from(a.statusTsPerUser,function(a){var b=a[0];a=a[1];return{dbUserStatusTs:a,userJid:b}}),c=Array.from(a.recipientDevices);c={permittedIdentitiesPerDevice:s(a.permittedIdentitiesPerDevice),recipientDevices:c,retryCountsPerDevice:t(a.retryCountsPerDevice),statusTsPerUser:b};return{encodedFields:c,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloReceiptTablesSchema.pb").ReceiptsTableSchemaProtoSpec,c).readByteArray()}}function v(a){a={author:a.author,deliveryReceipts:a.deliveryReceipts,externalId:a.externalId,readReceipts:a.readReceipts,thread:a.thread};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloReceiptTablesSchema.pb").PendingReceiptsTableSchemaProtoSpec,a).readByteArray()}}function w(a){a={archived:a.archived,cannotReplyReason:a.cannotReplyReason,didInsertDualThreadCutoverAdminMsg:a.didInsertDualThreadCutoverAdminMsg,folder:a.folder,isMigratedLocally:a.isMigratedLocally,lastReadMsg:a.lastReadMsg,lastReadMsgReceiptSent:a.lastReadMsgReceiptSent,lastReadMsgTs:a.lastReadMsgTs,muteExpireTimeMs:a.muteExpireTimeMs,newestMsg:a.newestMsg,newestMsgTs:a.newestMsgTs,oldestMsg:a.oldestMsg,optimisticThreadKey:a.optimisticThreadKey,snippetMsg:a.snippetMsg,snippetMsgTs:a.snippetMsgTs};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloThreadsTableSchema.pb").ThreadsTableSchemaProtoSpec,a).readByteArray()}}function x(a){a={dhash:a.dhash,ephemeralSetting:a.ephemeralSetting,ephemeralSyncResponseBackoffInfo:a.ephemeralSyncResponseBackoffInfo,icdcFails:a.icdcFails,icdcInfo:a.icdcInfo,lastSyncTs:a.lastSyncTs,nameForSearch:a.nameForSearch};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloContactsTableSchema.pb").ContactsTableSchemaProtoSpec,a).readByteArray()}}function y(a){a={addressable:a.addressable,deliveredWatermarkTs:a.deliveredWatermarkTs,lastReadActionTs:a.lastReadActionTs,lastReadWatermarkTs:a.lastReadWatermarkTs,type:a.type};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloParticipantsTableSchema.pb").ParticipantsTableSchemaProtoSpec,a).readByteArray()}}function z(a){a={caption:a.caption,inviteCode:a.inviteCode,inviteExpirationTs:a.inviteExpirationTs};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloGroupInvitesTableSchema.pb").GroupInvitesTableSchemaProtoSpec,a).readByteArray()}}function A(a){a={scheduledTime:a.scheduledTime};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloTasksTableSchema.pb").TasksTableSchemaProtoSpec,a).readByteArray()}}function B(a){var b=Array.from(a.hasSenderKey);b={hasSenderKey:b,rotateSenderKey:a.rotateSenderKey,senderKeyId:a.senderKeyId,senderKeyTs:a.senderKeyTs};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb").PersonalSenderKeyStatusTableSchemaProtoSpec,b).readByteArray()}}function C(a){var b;switch(a.contents.type){case"meta_sync":var e=[];for(var f=a.contents.actions,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;i.chatAction?e.push({chatAction:i.chatAction}):i.messageAction&&e.push({messageAction:i.messageAction})}b={actions:e,type:"meta_sync"};break;case"backups_secrets":b={encryptedBackupsSecrets:a.contents.encryptedBackupsSecrets,type:"backups_secrets"};break;case"sync_key_share":b={syncKeyShare:{keys:a.contents.syncKeyShare.keys,orphanKeys:(i=a.contents.syncKeyShare)==null?void 0:(h=i.orphanKeys)==null?void 0:h.map(d("WASyncdKeyTypes").fromSyncKeyId)},type:"sync_key_share"};break;case"sync_key_request":b={syncKeyRequest:{keyIds:a.contents.syncKeyRequest.keyIds.map(d("WASyncdKeyTypes").fromSyncKeyId)},type:"sync_key_request"};break;default:a.contents.type;throw c("err")("Unknown appdata type: "+a.contents.type)}g={ack:a.ack,contents:b,permittedIdentitiesPerDevice:s(a.permittedIdentitiesPerDevice),recipientDevices:Array.from(a.recipientDevices),sendPartial:a.sendPartial,ts:a.ts};return{encodedFields:g,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloAppDataTableSchema.pb").AppDataTableSchemaProtoSpec,g).readByteArray()}}function D(a){a={value:a.value};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloAppMetaTableSchema.pb").AppMetaTableSchemaProtoSpec,a).readByteArray()}}function E(a){a={blobData:a.blobData,mimetype:a.mimetype,plaintextHash:a.plaintextHash};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").ChunkTableSchemaProtoSpec,a).readByteArray()}}function F(a){a={fbid:a.fbid};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").MediaBackupSchemaProtoSpec,a).readByteArray()}}function G(a){var b=Array.from(a.mediaEntries,function(a){var b=a[0];a=a[1];return{mediaEntryData:a,msgId:b}});b={mediaEntries:b,mediaType:a.mediaType,plaintextHash:a.plaintextHash,size:a.size,ts:a.ts,validatedAudioInfo:a.validatedAudioInfo,validatedDocumentFileInfo:a.validatedDocumentFileInfo,validatedImageInfo:a.validatedImageInfo,validatedVideoInfo:a.validatedVideoInfo};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").MediaTableSchemaProtoSpec,b).readByteArray()}}function H(a){a={ack:a.ack,author:a.author,groupingKey:a.groupingKey,reaction:a.reaction,reactToAuthor:a.reactToAuthor,ts:a.ts};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloReactionsTableSchema.pb").ReactionsTableSchemaProtoSpec,a).readByteArray()}}function I(a){a={isThread:a.isThread,numMessages:a.numMessages,numMessagesRestored:a.numMessagesRestored,numThreadsRestored:a.numThreadsRestored,oldestTs:a.oldestTs,qplFlowDescriptor:a.qplFlowDescriptor,qplInstanceKeyE2E:a.qplInstanceKeyE2E,qplInstanceKeyForThread:a.qplInstanceKeyForThread,threadId:a.threadId};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloDyiBatchTableSchema.pb").DyiBatchTableSchemaProtoSpec,a).readByteArray()}}function J(a){a={maxMsgExternalId:a.maxMsgExternalId,maxMsgSortOrderMs:a.maxMsgSortOrderMs,minMsgExternalId:a.minMsgExternalId,minMsgSortOrderMs:a.minMsgSortOrderMs};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloEBMsgRangesTableSchema.pb").EBMsgRangesTableSchemaProtoSpec,a).readByteArray()}}function K(a){a={msgId:a.msgId};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloRetroactiveBackupsStateTableSchema.pb").RetroactiveBackupsStateTableSchemaProtoSpec,a).readByteArray()}}function L(a){var b=a.ctas==null?[]:a.ctas.map(function(a){return d("MAWXMACTAUtil").toMAWCTAEncode(a)});b={author:a.author,ctas:b,defaultCTA:a.defaultCTA==null?a.defaultCTA:d("MAWXMACTAUtil").toMAWCTAEncode(a.defaultCTA),headerTitle:a.headerTitle,isTombstoned:a.isTombstoned,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines,maxTitleNumOfLines:a.maxTitleNumOfLines,msgId:a.msgId,overlayDescription:a.overlayDescription,overlayIconGlyph:a.overlayIconGlyph,overlayTitle:a.overlayTitle,previewMediaIds:a.previewMediaIds,subtitleText:a.subtitleText,targetId:a.targetId,targetType:a.targetType,targetUsername:a.targetUsername,threadJid:a.threadJid,titleText:a.titleText,xmaLayoutType:a.xmaLayoutType};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloXMATableSchema.pb").XMATableSchemaProtoSpec,b).readByteArray()}}function M(a){a={author:a.author,editExternalId:a.editExternalId,editTs:a.editTs,msgContent:a.msgContent,sendStatus:a.sendStatus,specialTextSize:a.specialTextSize};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloEditMsgHistoryTableSchema.pb").EditMsgHistoryTableSchemaProtoSpec,a).readByteArray()}}g.encodeDbObj=e}),98);
__d("MAWDbObjEncryption",["MAWBridge","MAWCryptoConsts","MAWDbObjDecode","MAWDbObjEncode","MAWIndexedDb","MAWKeychainCrypto","MAWKeychainNaClCrypto","MAWKeychainUtil","MAWQplProxy","MWEARKeychainV3Errors","err","gkx","isEncryptionAtRestEnabled","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=1/1e3,i="_encryptedContent";function a(a,b,e){if(!(c("isEncryptionAtRestEnabled")()||c("gkx")("23910")===!0)||!d("MAWIndexedDb").TABLES_TO_ENCRYPT.includes(b))return a;var f=Math.random()<h;f=f?d("MAWQplProxy").startQplUserFlow(c("qpl")._(25300256,"115")):null;try{var g=babelHelpers["extends"]({},a);e=e();var j=e.key;e=e.version;e=d("MAWKeychainUtil").makeAAD(e,d("MAWCryptoConsts").CIPHER_ID);var k=d("MAWDbObjEncode").encodeDbObj(a,b),l=k.encodedFields;k=k.proto;Object.keys(l).forEach(function(b){Object.prototype.hasOwnProperty.call(a,b)&&delete g[b]});l=d("MAWKeychainNaClCrypto").encrypt(j,k,e);g[i]=l;f==null?void 0:f.endSuccess();return g}catch(a){f==null?void 0:f.endFail("ear_encrypt_fail");throw c("err")(a.message+" - Encrypted dexie was unable to encrypt an entity for table "+b)}}function b(a,b,e){if(!d("MAWIndexedDb").TABLES_TO_ENCRYPT.includes(b)||!Object.prototype.hasOwnProperty.call(a,i))return a;var f=Math.random()<h;f=f?d("MAWQplProxy").startQplUserFlow(c("qpl")._(25313004,"118")):null;try{var g=a[i];a=babelHelpers["extends"]({},a);var j=d("MAWKeychainCrypto").getKeyVersionFromCipherDataString(g);e=e(j);e=e.key;var k={};e=d("MAWKeychainNaClCrypto").decrypt(e,g,j);var l=d("MAWDbObjDecode").decodeDbObj(e,b);Object.keys(l).forEach(function(a){k[a]=l[a]});delete a[i];g=babelHelpers["extends"]({},a,k);f==null?void 0:f.endSuccess();return g}catch(a){f==null?void 0:f.endFail("ear_decrypt_fail");(a instanceof d("MAWKeychainNaClCrypto").EARDecryptionError||a instanceof d("MWEARKeychainV3Errors").EARKeychainNotFoundError)&&(d("MAWIndexedDb").deleteDb(),c("gkx")("23931")&&d("MAWBridge").getBridge().fireAndForget("event","earDecryptionFailure",{tableName:b}));throw c("err")(a.message+" - Encrypted dexie was unable to decrypt an entity for table "+b)}}g.ENCRYPTED_COLUMN_NAME=i;g.encryptDbObj=a;g.decryptDbObj=b}),98);
__d("MAWDbMsgTypeVersionTxns",["MAWDbAppMeta","MAWDexieTable"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a.appMeta.get({key:d("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion}).then(function(a){return a==null?void 0:a.value.msgTypeVersion})}function b(a,b){return a.appMeta.add({key:d("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion,value:{msgTypeVersion:b}})}function c(a,b){return a.appMeta.put({key:d("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion,value:{msgTypeVersion:b}})}function e(a,b){return a.appMeta.add({key:d("MAWDbAppMeta").AppMetaKeysEnum.hmacKey,value:{hmacKey:b}})}function f(a){return a.appMeta.get({key:d("MAWDbAppMeta").AppMetaKeysEnum.hmacKey}).then(function(a){return a==null?void 0:a.value.hmacKey})}function i(a,b){return a.appMeta.get({key:b})}function j(a,b){return a.appMeta.put({key:d("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert,value:{allowSecurityAlert:b}}).then(function(){})}function k(a,b){return a.appMeta.put({key:d("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlertForSelf,value:{allowSecurityAlertForSelf:b}}).then(function(){})}function l(a){return i(a,d("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert).then(function(a){return(a=a==null?void 0:a.value.allowSecurityAlert)!=null?a:!1})}function m(a){return i(a,d("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlertForSelf).then(function(a){return(a=a==null?void 0:a.value.allowSecurityAlertForSelf)!=null?a:!0})}function n(a,b){return a.appMeta.add({key:d("MAWDbAppMeta").AppMetaKeysEnum.hotlikeSticker,value:{hotlikeSticker:b}})}function o(a){return d("MAWDexieTable").dexieAll([m(a),l(a)]).then(function(a){var b=a[0];a=a[1];return{allowSecurityAlertForContact:a,allowSecurityAlertForSelf:b}})}g.MSG_TYPE_VERSION=(h=d("MAWDbAppMeta")).AppMetaKeysEnum.msgTypeVersion;g.ALLOW_SECURITY_ALERT_FOR_CONTACT=h.AppMetaKeysEnum.allowSecurityAlert;g.ALLOW_SECURITY_ALERT_FOR_SELF=h.AppMetaKeysEnum.allowSecurityAlertForSelf;g.HOT_LIKE=h.AppMetaKeysEnum.hotlikeSticker;g.getMsgTypeVersion=a;g.addMsgTypeVersion=b;g.updateMsgTypeVersion=c;g.addHMACKey=e;g.getHMACKey=f;g.getAppMetaValue=i;g.updateSecurityAlertValueForContact=j;g.updateSecurityAlertValueForSelf=k;g.getSecuritySettingForContact=l;g.getSecuritySettingForSelf=m;g.addHotLike=n;g.maybeBulkGetSecuritySetting=o}),98);
__d("MAWHMACKey",["MAWCryptoConsts","MAWDbMsgTypeVersionTxns","MAWIndexedDb","MAWKeychainUtil","MAWSubtleCrypto","MAWTransactionMode","WABase64","tweetnacl-auth"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES);return i(a).then(function(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.exportKey("raw",a)})}function a(a,b){a=new TextEncoder().encode(a);b=new Uint8Array(b);a=c("tweetnacl-auth")(a,b);return d("WABase64").encodeB64UrlSafe(a)}function b(){return h().then(function(a){return d("MAWIndexedDb").makeMsgrTransactor({appMeta:d("MAWTransactionMode").READWRITE},"generateAndInsertHMACKey",function(b){return function(){return d("MAWDbMsgTypeVersionTxns").getHMACKey(b).then(function(c){return c!=null?c:d("MAWDbMsgTypeVersionTxns").addHMACKey(b,a).then(function(){return a})})}})()})}function i(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",a,{hash:"SHA-256",name:"HMAC"},!0,["sign"])}g.genHMACKey=h;g.hmacTweetNaCl=a;g.generateAndInsertHMACKey=b}),98);
__d("WAConcurrentIterate",["Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d){var e=[],f=[],h=0,i=function(){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!(h<a)){e.next=8;break}d=h;h++;e.next=5;return b("regeneratorRuntime").awrap(c(d));case 5:f[d]=e.sent;e.next=0;break;case 8:case"end":return e.stop()}},null,this)};d=Math.min(a,d);for(var j=0;j<d;j++)e.push(i());return(g||(g=b("Promise"))).all(e).then(function(){return f})}f.concurrentIterate=a}),66);
__d("WAMediaCryptoSidecar",["WAConcurrentIterate","WACryptoHmac"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a==="video"}function b(a){return a}var h=16,i=10,j=64*1024;function c(a,b,c){c===void 0&&(c=1);var e=b.buffer.byteLength;e=Math.ceil((e-h)/j);var f=new Uint8Array(i*e);return d("WAConcurrentIterate").concurrentIterate(e,function(c){var e=c*j,g=e+h+j;e=b.subarray(e,g);return d("WACryptoHmac").sign(a,e).then(function(a){a=new Uint8Array(a,0,i);f.set(a,c*i)})},c).then(function(){return f.buffer})}g.shouldHaveStreamingSidecar=a;g.castToStreamingSidecar=b;g.calculateStreamingSidecar=c}),98);
__d("WAMediaEntryData.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};a.internalSpec={fileSha256:[1,(e=d("WAProtoConst")).TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64],serverMediaType:[6,e.TYPES.STRING],uploadToken:[7,e.TYPES.BYTES],validatedTimestamp:[8,e.TYPES.BYTES],sidecar:[9,e.TYPES.BYTES],objectId:[10,e.TYPES.STRING],fbid:[11,e.TYPES.STRING],downloadableThumbnail:[12,e.TYPES.MESSAGE,c],handle:[13,e.TYPES.STRING],filename:[14,e.TYPES.STRING],progressiveJpegDetails:[15,e.TYPES.MESSAGE,b]};b.internalSpec={scanLengths:[1,e.FLAGS.REPEATED|e.TYPES.UINT32],sidecar:[2,e.TYPES.BYTES]};c.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING]};g.MediaEntrySpec=a;g.MediaEntry$ProgressiveJpegDetailsSpec=b;g.MediaEntry$DownloadableThumbnailSpec=c}),98);
__d("WAProgressiveJpegMarkers",[],(function(a,b,c,d,e,f){"use strict";a=255;b=0;c={SOF0:192,SOF1:193,SOF2:194,SOF3:195,DHT:196,SOF5:197,SOF6:198,SOF7:199,JPG:200,SOF9:201,SOF10:202,SOF11:203,SOF13:205,SOF14:206,SOF15:207,RST0:208,RST1:209,RST2:210,RST3:211,RST4:212,RST5:213,RST6:214,RST7:215,SOI:216,EOI:217,SOS:218,DQT:219,DRI:221,APP0:224,APP1:225,APP2:226,APP3:227,APP4:228,APP5:229,APP6:230,APP7:231,APP8:232,APP9:233,APP10:234,APP11:235,APP12:236,APP13:237,APP14:238,APP15:239,COM:254,TEM:1};d=[b,c.RST0,c.RST1,c.RST2,c.RST3,c.RST4,c.RST5,c.RST6,c.RST7];f.MARKER_PREFIX=a;f.MARKER_ESCAPE_BYTE=b;f.MARKERS=c;f.SOS_STREAM=d}),66);
__d("WAProgressiveJpegGetScanOffsets",["WAProgressiveJpegMarkers","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Non-progressive JPEG marker found"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Ending marker found before end of image"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Scan found at offset ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Not a JPEG image"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["starting"]);l=function(){return a};return a}var m=d("WATagsLogger").TAGS(["media","progressiveJpegUtils"]);function a(a){m.DEV(l());if(!n(a)){m.DEV(k());return[]}var b=[],c=2,e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA",f=null,g=0,r=!1,s=!1,t=!1;function u(){t=!1,m.DEV(j(),c-1),b.push(c-1)}while(c<a.byteLength){f=a[c];if(r){m.ERROR(i());return[]}switch(e){case"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA":f===d("WAProgressiveJpegMarkers").MARKER_PREFIX&&(e="READ_MARKER_SECOND_BYTE");break;case"READ_MARKER_SECOND_BYTE":if(f===d("WAProgressiveJpegMarkers").MARKER_PREFIX)e="READ_MARKER_SECOND_BYTE";else if(f===d("WAProgressiveJpegMarkers").MARKER_ESCAPE_BYTE)e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";else if(f===d("WAProgressiveJpegMarkers").MARKERS.EOI)r=!0,t&&u();else if(!s&&p(f)){m.LOG(h());return[]}else o(f)?(s=!0,e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA"):(t&&u(),f===d("WAProgressiveJpegMarkers").MARKERS.SOS&&(t=!0),q(f)?e="READ_SIZE_FIRST_BYTE":e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA");break;case"READ_SIZE_FIRST_BYTE":e="READ_SIZE_SECOND_BYTE";break;case"READ_SIZE_SECOND_BYTE":c+=g*256;c+=f;c-=2;e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";break}c+=1;g=f}return b}function n(a){if(a.byteLength<=2)return!1;if(a[0]!==d("WAProgressiveJpegMarkers").MARKER_PREFIX)return!1;return a[1]!==d("WAProgressiveJpegMarkers").MARKERS.SOF2&&a[1]!==d("WAProgressiveJpegMarkers").MARKERS.SOI?!1:!0}function o(a){return a===d("WAProgressiveJpegMarkers").MARKERS.SOF2||a===d("WAProgressiveJpegMarkers").MARKERS.SOF6||a===d("WAProgressiveJpegMarkers").MARKERS.SOF10||a===d("WAProgressiveJpegMarkers").MARKERS.SOF14}function p(a){return a===d("WAProgressiveJpegMarkers").MARKERS.SOF0||a===d("WAProgressiveJpegMarkers").MARKERS.SOF1||a===d("WAProgressiveJpegMarkers").MARKERS.SOF3||a===d("WAProgressiveJpegMarkers").MARKERS.SOF5||a===d("WAProgressiveJpegMarkers").MARKERS.SOF7||a===d("WAProgressiveJpegMarkers").MARKERS.JPG||a===d("WAProgressiveJpegMarkers").MARKERS.SOF9||a===d("WAProgressiveJpegMarkers").MARKERS.SOF11||a===d("WAProgressiveJpegMarkers").MARKERS.SOF13||a===d("WAProgressiveJpegMarkers").MARKERS.SOF15}function q(a){if(a===d("WAProgressiveJpegMarkers").MARKERS.TEM)return!1;return a>=d("WAProgressiveJpegMarkers").MARKERS.RST0&&a<=d("WAProgressiveJpegMarkers").MARKERS.RST7?!1:a!==d("WAProgressiveJpegMarkers").MARKERS.EOI&&a!==d("WAProgressiveJpegMarkers").MARKERS.SOI}g.getProgressiveJpegScanOffsets=a}),98);
__d("WAProgressiveJpegGetScanLengths",["WAProgressiveJpegGetScanOffsets"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("WAProgressiveJpegGetScanOffsets").getProgressiveJpegScanOffsets(a);return h(a)}function b(a){return a}function h(a){var b=[],c=0;for(var d=0;d<a.length;d++){var e=a[d];b.push(e-c);c=e}return b}g.getProgressiveJpegScanLengths=a;g.asProgressiveJpegScanLength=b}),98);
__d("WAServerMediaType",["WAAssertUnreachable"],(function(a,b,c,d,e,f,g){"use strict";d=["image","sticker","ptt","audio","document","video","gif","ppic","md-app-state","md-msg-hist","kyc-id","template","thumbnail-image","thumbnail-video","thumbnail-gif","thumbnail-document","thumbnail-link","payment-bg-image","novi-video","novi-image","product","product-catalog-image","xma-image","biz-cover-photo","preview","newsletter-audio","newsletter-document","newsletter-image","newsletter-gif","newsletter-ptt","newsletter-sticker","newsletter-thumbnail-link","newsletter-video"];function a(a){switch(a){case"image":case"sticker":case"ptt":case"audio":case"document":case"video":case"gif":case"ppic":case"md-app-state":case"md-msg-hist":case"kyc-id":case"thumbnail-image":case"thumbnail-video":case"thumbnail-gif":case"thumbnail-document":case"thumbnail-link":case"payment-bg-image":case"novi-video":case"novi-image":case"template":case"product":case"product-catalog-image":case"xma-image":case"biz-cover-photo":case"preview":case"newsletter-audio":case"newsletter-document":case"newsletter-image":case"newsletter-gif":case"newsletter-ptt":case"newsletter-sticker":case"newsletter-thumbnail-link":case"newsletter-video":return a;default:return null}}function b(a){switch(a){case"Image":return"image";case"Video":return"video";case"Ptt":return"ptt";case"Gif":return"gif";case"Sticker":return"sticker";case"DocumentFile":return"document";case"Text":case"Futureproof":case"Ciphertext":case"Unavailable":case"ExpiredEphemeral":case"Admin":case"Revoked":case"DeleteForMe":case"EphemeralSettingAdmin":case"EphemeralSyncResponse":case"EphemeralSettingChangeFromCurrentDevice":case"AlertICDC":case"GroupInvite":case"SenderKeyDistribution":case"Reaction":case"EditAction":return null;default:return c("WAAssertUnreachable")(a)}}g.SERVER_MEDIA=d;g.castToServerMediaType=a;g.getMediaType=b}),98);
__d("WAMediaUtils",["Promise","WABase64","WACryptoDependencies","WAErr","WALongInt","WAMediaCryptoSidecar","WAMediaEntryData.pb","WAProgressiveJpegGetScanLengths","WAServerMediaType","WATimeUtils","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=new Uint8Array(32);d("WACryptoDependencies").getCrypto().getRandomValues(a);return a.buffer}function j(a){return a}function a(){return i()}function k(a){return a}function e(a,b){return d("WABase64").encodeB64UrlSafe(a,b)}function f(a){return a}function l(a){return a}function m(a){return a}function n(a){return a}function o(a,b){a=d("decodeProtobuf").decodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,b);b=a.fileSha256;var c=a.mediaKey,e=a.fileEncSha256,f=a.directPath,g=a.mediaKeyTimestamp,h=a.sidecar,i=a.objectId,j=a.fbid,k=a.serverMediaType,l=a.downloadableThumbnail,m=a.filename;a=a.progressiveJpegDetails;return{fileSha256:b,mediaKey:c,fileEncSha256:e,directPath:f,mediaKeyTimestamp:g==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(g)),sidecar:h&&d("WAMediaCryptoSidecar").castToStreamingSidecar(h),objectId:i,fbid:j,downloadableThumbnail:l&&w(l),serverMediaType:k,filename:m,progressiveJpegDetails:a&&x(a)}}function p(a,b,c,e,f,g,h,i,j,k,l){a=d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,{fileSha256:a,fileEncSha256:b,mediaKey:c,directPath:e,mediaKeyTimestamp:f,serverMediaType:g,objectId:h,fbid:i,downloadableThumbnail:j,filename:k,progressiveJpegDetails:l});return a.readByteArray()}function q(a){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArray()}function r(a){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArray()}function s(a,b){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers["extends"]({},a,{directPath:b})).readByteArray()}function t(a,b){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers["extends"]({},a,{downloadableThumbnail:babelHelpers["extends"]({},a.downloadableThumbnail,{directPath:b})})).readByteArray()}function u(a,b){a=babelHelpers["extends"]({},a,{fbid:b});return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArray()}function v(a,b){a=babelHelpers["extends"]({},a,{objectId:b});return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArray()}function w(a){if(a==null)return null;a.$$unknownFieldCount;var b=babelHelpers.objectWithoutPropertiesLoose(a,["$$unknownFieldCount"]);return babelHelpers["extends"]({},b,{mediaKey:a.mediaKey&&j(a.mediaKey),mediaKeyTimestamp:a.mediaKeyTimestamp==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(a.mediaKeyTimestamp))})}function x(a){if(a==null)return null;return a.scanLengths==null||a.sidecar==null?null:{sidecar:a.sidecar,scanLengths:a.scanLengths.map(function(a){return d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(d("WALongInt").numberOrThrowIfTooLarge(a))})}}function y(a){a=d("decodeProtobuf").decodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a);var b=a.serverMediaType,c=a.mediaKey,e=a.mediaKeyTimestamp,f=a.uploadToken,g=a.downloadableThumbnail,h=a.progressiveJpegDetails;a=babelHelpers.objectWithoutPropertiesLoose(a,["serverMediaType","mediaKey","mediaKeyTimestamp","uploadToken","downloadableThumbnail","progressiveJpegDetails"]);var i=null;h!=null&&h.scanLengths!=null&&h.sidecar!=null&&(i={sidecar:h.sidecar,scanLengths:h.scanLengths.map(function(a){return d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(d("WALongInt").numberOrThrowIfTooLarge(a))})});return babelHelpers["extends"]({},a,{serverMediaType:b==null?null:d("WAServerMediaType").castToServerMediaType(b),mediaKey:c&&j(c),mediaKeyTimestamp:e==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(e)),uploadToken:f&&k(f),progressiveJpegDetails:i,downloadableThumbnail:g&&w(g)})}function z(a){return"arrayBuffer"in a&&typeof a.arrayBuffer==="function"?a.arrayBuffer():new(h||(h=b("Promise")))(function(b,d){var e=new FileReader();e.onload=function(){var a=e.result;a instanceof ArrayBuffer?b(a):d(c("WAErr")("blobToArrayBuffer got error becaues result is not ArrayBuffer"))};e.onerror=function(){var a;a=((a=e.error)==null?void 0:a.name)||"unknown";d(c("WAErr")("blobToArrayBuffer got error got error "+a))};e.readAsArrayBuffer(a)})}function A(a){var b="image/jpeg";switch(a){case"image":b="image/jpeg";break;case"ptt":b="audio/wav";break;case"video":b="video/mp4";break;case"gif":b="image/gif";break;case"sticker":b="image/webp";break;case"preview":b="image/jpeg";break;case"document":b="application/pdf";break;case"xma-image":b="image/jpeg";break;default:throw c("WAErr")("Unsupported server media type: "+a)}return b}g.createMediaKey=i;g.castToMediaKey=j;g.createUploadToken=a;g.castToUploadToken=k;g.toPlaintextHash=e;g.stringToPlaintextHash=f;g.toHashedPlaintextHash=l;g.stringToDeliveryObjectId=m;g.stringToBackupEntFbid=n;g.mediaEntryDataToRawData=o;g.rawDataToMediaEntry=p;g.encodeMediaEntryForUpload=q;g.encodeMediaEntryForDownload=r;g.encodeMediaEntryWithUpdatedPath=s;g.encodeMediaEntryDownloadableThumbnailWithUpdatedPath=t;g.encodeMediaEntryWithUpdatedFbid=u;g.encodeMediaEntryWithUpdatedObjectId=v;g.convertMediaDownloadableThumbnailToDownloadableThumbnail=w;g.decodeMediaEntryData=y;g.blobToArrayBuffer=z;g.getMimeTypeFromServerMediaType=A}),98);
__d("MAWMediaUtils",["MAWDbMedia","MAWGlobals","MAWHMACKey","WAMediaUtils","WATimeUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b="media");switch(a){case d("MAWDbMedia").MEDIA_TYPE.IMAGE:return b==="xma-media"?"xma-image":"image";case d("MAWDbMedia").MEDIA_TYPE.VIDEO:return"video";case d("MAWDbMedia").MEDIA_TYPE.PTT:return"ptt";case d("MAWDbMedia").MEDIA_TYPE.GIF:return"gif";case d("MAWDbMedia").MEDIA_TYPE.STICKER:return"sticker";case d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return"document";default:throw c("err")("get a wrong media file with type "+a)}}function h(a){try{return d("WAMediaUtils").blobToArrayBuffer(a).then(i)}catch(a){throw c("err")("Got "+a+" when convert the blob to Uint8Array")}}function i(a){return self.crypto.subtle.digest("SHA-256",a).then(function(a){return new Uint8Array(a)})}function e(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield h(a));a=d("WAMediaUtils").toPlaintextHash(a);var b=k(a);return[a,b]});return j.apply(this,arguments)}function k(a){var b=d("MAWGlobals").getHMACKey();return d("WAMediaUtils").toHashedPlaintextHash(d("MAWHMACKey").hmacTweetNaCl(a,b))}function f(a){var b="preview-"+d("WATimeUtils").unixTime().toString()+".jpeg";return l(a,b,"image/jpeg")}function l(a,b,c){return new File([new Blob([new Uint8Array(a)],{type:c})],b,{type:c})}g.getServerMediaTypeFromMediaType=a;g.hashBlob=h;g.hashArrayBuffer=i;g.genBlobHashes=e;g.genHMACPlaintextHash=k;g.convertJpegThumbnailArrayBufferToFile=f}),98);
__d("MAWSupportedDocumentTypes",[],(function(a,b,c,d,e,f){"use strict";var g=["apk","pyc","7z","z","gz","xz","rar","zip","zipx","ace","arc","zpaq","quad","balz","cab","arj","lzh","uue","bz","bz2","bzip2","jar","iso","tar","ade","adp","air","app","application","bas","bat","chm","cmd","com","command","cpl","crt","dll","dmg","dpkg","exe","hlp","hta","inf","ins","isp","jnlp","js","jse","lib","lnk","lua","mde","msc","msi","msp","mst","ocx","pcd","pif","pkg","ps1","reg","scr","sct","sh","shb","shs","sys","term","url","vb","vbe","vbs","vxd","webarchive","wsc","wsf","wsh","xbap"];function a(a){if(a==null)return!1;a=a.includes(".")?a.split(".").pop():null;return a!=null&&!g.includes(a)}f.isAllowedType=a}),66);
__d("isContentSearchEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("24161")}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CometAccessibilityAnnouncementForDynamicContent.react",["CometAccessibilityAnnouncement.react","DocumentTranslationStatusProvider.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("DocumentTranslationStatusProvider.react").useTranslationKeyForTextParent();return i.createElement(c("CometAccessibilityAnnouncement.react"),babelHelpers["extends"]({},a,{key:b}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometMarketplaceConfirmMarkAsPaidDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5436864742990701"}),null);
__d("CometMarketplaceConfirmMarkAsPaidDialogQuery$Parameters",["CometMarketplaceConfirmMarkAsPaidDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometMarketplaceConfirmMarkAsPaidDialogQuery_facebookRelayOperation"),metadata:{},name:"CometMarketplaceConfirmMarkAsPaidDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometMarketplaceConfirmMarkAsPaidDialog.entrypoint",["CometMarketplaceConfirmMarkAsPaidDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{cometMarketplaceConfirmMarkAsPaidDialogQueryReference:{parameters:c("CometMarketplaceConfirmMarkAsPaidDialogQuery$Parameters"),variables:{thread_id:a.threadId}}}}},root:c("JSResourceForInteraction")("CometMarketplaceConfirmMarkAsPaidDialog.react").__setRef("CometMarketplaceConfirmMarkAsPaidDialog.entrypoint")};g["default"]=a}),98);
__d("CometMarketplaceInboxLabelChatDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5046975135324826"}),null);
__d("CometMarketplaceInboxLabelChatDialogQuery$Parameters",["CometMarketplaceInboxLabelChatDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometMarketplaceInboxLabelChatDialogQuery_facebookRelayOperation"),metadata:{},name:"CometMarketplaceInboxLabelChatDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometMarketplaceInboxLabelChatDialog.entrypoint",["CometMarketplaceInboxLabelChatDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{cometMarketplaceInboxLabelChatDialogQueryReference:{parameters:c("CometMarketplaceInboxLabelChatDialogQuery$Parameters"),variables:{id:a.thread_id}}}}},root:c("JSResourceForInteraction")("CometMarketplaceInboxLabelChatDialog.react").__setRef("CometMarketplaceInboxLabelChatDialog.entrypoint")};g["default"]=a}),98);
__d("LSInsertAnonymousTaskContext",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(311).add({taskId:a[0],projectName:a[1]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSAnonymizedMsgrE2EEXmaReceiverFetchDispatch",["LSInsertAnonymousTaskContext","LSIssueNewTaskUsingSyncChannel","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("pk",a[0]),d[0].set("content_ref",a[1]),d[1]=d[0].get("pk"),d[0],d[4]=["LSMailboxAnonymizedMsgrE2EEXmaReceiverFetchSyncAction",".",c.i64.to_string(d[1])].join(""),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskUsingSyncChannel"),d[4],c.i64.cast([0,765]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,2]),!1,c.i64.cast([0,0])).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskInsertion"),d[3])},function(a){return c.storedProcedure(b("LSInsertAnonymousTaskContext"),d[3],"LS_MsgrXmaReceiverFetch")}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSAnonymizedMsgrE2EEXmaReceiverFetchDispatchStoredProcedure",["LSAnonymizedMsgrE2EEXmaReceiverFetchDispatch","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.pk;d[1]=b.contentRef;return c("LSAnonymizedMsgrE2EEXmaReceiverFetchDispatch").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSExecuteCTA",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.filter(c.db.table(119).fetch(),function(b){return c.i64.eq(b.ctaId,a[0])}).next().then(function(a,e){var f=a.done;a=a.value;return f?0:(e=a.item,d[0]=new c.Map(),d[0].set("banner_id",e.bannerId),d[0].set("cta_type",e.ctaType),d[0].set("context_id",e.contextId),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"in_thread_banner_execute_cta_queue",c.i64.cast([0,73]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0])))})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSExecuteCTAStoredProcedure",["LSExecuteCTA","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.ctaId;return c("LSExecuteCTA").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSFetchBannersStoredProcedure",["LSFetchBanners","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSFetchBanners").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSInitiateThreadMigration",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return a[3]!==void 0?(d[0]=new c.Map(),d[0].set("open_message_thread_key",a[0]),d[0].set("armadillo_thread_key",a[1]),d[0].set("trace_id",a[3]),d[0].set("should_copy_messages",a[2]),d[1]=d[0].get("open_message_thread_key"),d[0],d[2]=d[0].get("armadillo_thread_key"),d[0],d[3]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),[c.i64.to_string(d[1]),"_",c.i64.to_string(d[2])].join(""),c.i64.cast([0,436]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):(d[0]=new c.Map(),d[0].set("open_message_thread_key",a[0]),d[0].set("armadillo_thread_key",a[1]),d[0].set("should_copy_messages",a[2]),d[1]=d[0].get("open_message_thread_key"),d[0],d[2]=d[0].get("armadillo_thread_key"),d[0],d[3]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),[c.i64.to_string(d[1]),"_",c.i64.to_string(d[2])].join(""),c.i64.cast([0,436]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0])))},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSInitiateThreadMigrationStoredProcedure",["LSInitiateThreadMigration","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.openMessageThreadKey;d[1]=b.armadilloThreadKey;d[2]=b.shouldCopyMessages;d[3]=b.traceId;return c("LSInitiateThreadMigration").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSMessageContentType",[],(function(a,b,c,d,e,f){a=Object.freeze({TEXT:1,MEDIA_PREVIEW:2,AUDIO_CLIP:4,XMA_FALLBACK:8,LWA_WAVE:16,ADMIN:32,FILE_ATTACHMENT:64,GLYPH:128,TOMBSTONE:256,STORY_REPLY:512,SINGLE_XMA:1024,HSCROLL_XMA:2048,STICKER:4096,FORWARD_INDICATOR:8192,ANIMATED_IMAGE:16384,NULL_STATE:32768,ENCRYPTION_PLACEHOLDER:65536,FUTUREPROOF_PLACEHOLDER:131072,UNAVAILABLE_PLACEHOLDER:262144});f["default"]=a}),66);
__d("LSRequestAdContextFromThreadKey",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"ctm_ad_context",c.i64.cast([0,235]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSRequestAdContextFromThreadKeyStoredProcedure",["LSRequestAdContextFromThreadKey","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSRequestAdContextFromThreadKey").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSServerMutationCta",["LSIssueNewError","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=!1:(b=a.item,d[0]=b.errorShouldBeShown)})},function(a){return d[0]===!0?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[4]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[5]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[4],d[5],void 0,void 0)}]):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("marketplace_cta_type",a[1]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),"marketplace_server_mutation_cta",c.i64.cast([0,279]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSServerMutationCtaStoredProcedure",["LSServerMutationCta","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.marketplaceCtaType;return c("LSServerMutationCta").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LsBotComposerQuickReplyTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743837");b=d("FalcoLoggerInternal").create("ls_bot_composer_quick_reply_tapped",a);e=b;g["default"]=e}),98);
__d("LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743846");b=d("FalcoLoggerInternal").create("ls_business_welcome_page_get_started_button_tapped",a);e=b;g["default"]=e}),98);
__d("MAWChatFile.react",["MAWFilePressable.react","MDSTextPairing.react","MWChatFilePreview.react","MWInboxInfoSharedContentQPLLogger","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={content:{color:"xzsf02u",flexGrow:"x1iyjqo2",fontWeight:"x1s688f",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",wordBreak:"x13faqbe",$$css:!0},fileSize:{paddingTop:"x889kno",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",userSelect:"x87ps6o",$$css:!0}};function l(){d("MWInboxInfoSharedContentQPLLogger").logOpenSharedContentFromThread("files")}function a(a){var b=a.file;return j.jsx(c("MAWFilePressable.react"),{entrypoint:"chat_file_v4",file:b,onPress:l,testid:void 0,children:function(a){var d=a.filename;a=a.size;return j.jsxs("div",{className:(h||(h=c("stylex")))(k.root,!1),children:[j.jsx(c("MWChatFilePreview.react"),{attachment:b,withPreview:!1}),j.jsxs("div",{className:"xzsf02u x1iyjqo2 x1s688f xz9dl7a xn6708d xsag5q8 x1ye3gou x13faqbe",children:[j.jsx(c("MDSTextPairing.react"),{headline:d,headlineLineLimit:3,level:4}),j.jsx("div",{className:"x889kno",children:j.jsx(c("MDSTextPairing.react"),{body:a,bodyColor:"secondary",bodyLineLimit:1,level:4})})]})]})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWCutoverEncryptedBackupsBanner.react",["CometErrorBoundary.react","cr:7563","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.isShown;return i.jsx(i.Fragment,{children:a&&b("cr:7563")?i.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:i.jsx(b("cr:7563"),{})}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWEncryptionPlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__C8O2a78lb6C__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWFutureproofPlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__4rmC_sX93Dk__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWInThreadBannerNuxReqCondWrapper.react",["CometErrorBoundary.react","cr:4958","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.threadKey;return b("cr:4958")&&i.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:i.jsx(b("cr:4958"),{threadKey:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureAudioAttachmentContent.react",["MWAudioPlayer.react","MWPMessageIsReply","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.dbAttachment,e=a.getPlayableUrl,f=a.message;a=a.outgoing;return i.jsx(d("MWAudioPlayer.react").MWAudioPlayer,{attachment:b,getPlayableUrl:e,isReply:c("MWPMessageIsReply")(f),outgoing:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureFileAttachmentContent.react",["MAWChatFile.react","MWXMessageBubble.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectBottom,d=a.connectTop,e=a.dbAttachment;a=a.outgoing;return i.jsx(c("MWXMessageBubble.react"),{align:a?"right":"left",color:"incoming",connectBottom:b,connectTop:d,style:{padding:0},children:i.jsx(c("MAWChatFile.react"),{file:e})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatImagePlaceholder.react",["CometObjectFitContainer.react","MDSGlimmer.react","MWPStableImage.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={glimmer:{display:"x1lliihq",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function a(a){var b=a.height;a=a.width;if(a==null)return null;if(b==null)return null;var e=a/b;return j.jsx(d("MWPStableImage.react").MWPStableImageContainer,{aspectRatio:e,className:(h||(h=c("stylex")))(!1),height:b,maxHeight:200,maxWidth:480,width:a,children:j.jsx(c("CometObjectFitContainer.react"),{contentAspectRatio:e,objectFitMode:"CONTAINER_WIDTH_BASED_ASPECT_RATIO",children:j.jsx(c("MDSGlimmer.react"),{index:1,xstyle:k.glimmer})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureImageAttachmentContent.react",["CometPlaceholder.react","MWV2ChatImage.react","MWV2ChatImagePlaceholder.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectTop,d=a.dbAttachment,e=a.getPlayableUrl,f=a.getPreviewUrl,g=a.mediaRenderQpl,h=a.message,j=a.outgoing,k=a.previewHeight;a=a.previewWidth;return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2ChatImagePlaceholder.react"),{height:k,width:a}),children:i.jsx(c("MWV2ChatImage.react"),{attachment:d,connectTop:b,getPlayableUrl:e,getPreviewUrl:f,mediaRenderQpl:g,message:h,navigateToRouteForMediaViewer:!1,outgoing:j})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureStickerAttachmentContent.react",["MWV2Sticker.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.dbAttachment;a=a.getPreviewUrl;return i.jsx(c("MWV2Sticker.react"),{attachment:b,getPreviewUrl:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureVideoAttachmentContent.react",["CometPlaceholder.react","MWV2ChatImagePlaceholder.react","MWV2ChatVideo.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectTop,d=a.dbAttachment,e=a.getPreviewUrl,f=a.mediaRenderQpl,g=a.message,h=a.outgoing,j=a.previewHeight;a=a.previewWidth;return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2ChatImagePlaceholder.react"),{height:j,width:a}),children:i.jsx(c("MWV2ChatVideo.react"),{attachment:d,connectTop:b,getPreviewUrl:e,mediaRenderQpl:f,message:g,navigateToRouteForMediaViewer:!1,outgoing:h})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("constructAttachmentFromXmaDataclass",["fbt","I64","LSIntEnum","MNXMAPreviewImageDecorationType"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=h._("__JHASH__rtAku5xCKsP__JHASH__"),l=function(a){switch(a){case"XMA_OPEN_NATIVE":return"xma_open_native";case"XMA_WEB_URL":return"xma_web_url";default:return"fallback"}},m=function(a){var b;if(a==null)return{};var c=a==null?void 0:a.image;return{headerImageUrl:(b=c==null?void 0:c.url)!=null?b:void 0,headerImageUrlExpirationTimestampMs:(c==null?void 0:c.expiration_timestamp_ms)!=null?(i||(i=d("I64"))).of_string(c==null?void 0:c.expiration_timestamp_ms):void 0,headerImageUrlFallback:(b=c==null?void 0:c.url_fallback)!=null?b:void 0,headerImageUrlMimeType:(b=c==null?void 0:c.mime_type)!=null?b:void 0,headerSubtitleText:(c=a==null?void 0:a.subtitle)!=null?c:void 0,headerTitle:(b=a==null?void 0:a.title)!=null?b:void 0}},n=function(a){if(a==null)return;switch(a){case"COLLAGE":case"INSTAGRAM_ICON":case"LIVE":case"MESSENGER_ICON":case"VIDEO":case"YOUTUBE_SHORTS":case"YOUTUBE_VIDEO":return(j||(j=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType")[a]);default:return(j||(j=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").DEFAULT)}},o=function(a){var b;if(a==null)return{};var c=a==null?void 0:a.preview;return{maxSubtitleNumOfLines:(a==null?void 0:a.max_subtitle_num_lines)!=null?(i||(i=d("I64"))).of_int32(a==null?void 0:a.max_subtitle_num_lines):void 0,maxTitleNumOfLines:(a==null?void 0:a.max_title_num_lines)!=null?(i||(i=d("I64"))).of_int32(a==null?void 0:a.max_title_num_lines):void 0,previewHeight:(c==null?void 0:c.height)!=null?(i||(i=d("I64"))).of_int32(c==null?void 0:c.height):void 0,previewImageDecorationType:n(c==null?void 0:c.image_decoration_type),previewUrl:(b=c==null?void 0:(b=c.media)==null?void 0:b.url)!=null?b:void 0,previewUrlExpirationTimestampMs:(c==null?void 0:(b=c.media)==null?void 0:b.expiration_timestamp_ms)!=null?(i||(i=d("I64"))).of_string(c==null?void 0:(b=c.media)==null?void 0:b.expiration_timestamp_ms):void 0,previewUrlFallback:(b=c==null?void 0:(b=c.media)==null?void 0:b.url_fallback)!=null?b:void 0,previewUrlMimeType:(b=c==null?void 0:(b=c.media)==null?void 0:b.mime_type)!=null?b:void 0,previewWidth:(c==null?void 0:c.width)!=null?(i||(i=d("I64"))).of_int32(c==null?void 0:c.width):void 0,subtitleText:(b=a==null?void 0:a.subtitle)!=null?b:void 0,titleText:(c=a==null?void 0:a.title)!=null?c:void 0}},p=function(a,b,c){var e=["default_cta","cta_1","cta_2","cta_3"].reduce(function(e,f,g){if(a[f]!=null){var h;g=babelHelpers["extends"]({},c,{actionUrl:(h=(h=(h=a[f])==null?void 0:h.action_url)!=null?h:(h=a[f])==null?void 0:h.native_url)!=null?h:void 0,attachmentIndex:(i||(i=d("I64"))).zero,ctaId:i.add(b,i.of_int32(g+1)),nativeUrl:(g=(g=(h=a[f])==null?void 0:h.native_url)!=null?g:(h=a[f])==null?void 0:h.action_url)!=null?g:void 0,title:(g=(h=a[f])==null?void 0:h.title)!=null?g:k.toString(),type_:l((h=a[f])==null?void 0:h.cta_type)});e[f]=g}return e},{cta_1:void 0,cta_2:void 0,cta_3:void 0,default_cta:void 0});return e},q=function(a){return a==null?{}:{defaultCtaId:a==null?void 0:a.ctaId,defaultCtaTitle:a==null?void 0:a.title,defaultCtaType:a==null?void 0:a.type_}},r=function(a,b){var c;return a==null?{}:(c={},c["attachmentCta"+b+"Id"]=a==null?void 0:a.ctaId,c["cta"+b+"Title"]=a==null?void 0:a.title,c["cta"+b+"Type"]=a==null?void 0:a.type_,c)};a=function(a,b,c){if((a==null?void 0:a.content)==null)return null;a=a.content;if(a.__typename==="XMSGXmaSingleContent"){var d=p(a,b,c);b=babelHelpers["extends"]({},q(d==null?void 0:d.default_cta),r(d==null?void 0:d.cta_1,1),r(d==null?void 0:d.cta_2,2),r(d==null?void 0:d.cta_3,3),m(a.header),o(a.body));c=Object.keys(d).filter(function(a){return d[a]!=null}).map(function(a){return d[a]});return[b,c]}return null};b=a;g["default"]=b}),98);
__d("useReceiverFetchXMA",["FBLogger","I64","LSAnonymizedMsgrE2EEXmaReceiverFetchDispatchStoredProcedure","LSFactory","MAWReceiverFetchQPLLogger","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","constructAttachmentFromXmaDataclass","gkx","promiseDone","react","useJSON","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(j||d("react")).useEffect,m=c("gkx")("23991"),n=new Map();function o(a){try{a=JSON.parse(a);return JSON.stringify(a.fetch_params)}catch(a){c("FBLogger")("messenger_e2ee_web").mustfix("Error retrieving fetch_params from the contentRef");return""}}function p(a,b){if((a==null?void 0:a.contentRef)!=null){var e={contentRef:o(a==null?void 0:a.contentRef),pk:a.pk};d("MAWReceiverFetchQPLLogger").logFetchStart((k||(k=d("I64"))).to_string(a.pk));c("promiseDone")(b.runInTransaction(function(a){return c("LSAnonymizedMsgrE2EEXmaReceiverFetchDispatchStoredProcedure")(c("LSFactory")(a),e)},"readwrite"))}}function q(a,e,f,g){c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var h=(yield (i||(i=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(f.threadKey,f.messageId)),d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.attachment_ctas))])),j=h[0];h=h[1];h=h!=null?(k||(k=d("I64"))).add(h.ctaId,(k||(k=d("I64"))).one):(k||(k=d("I64"))).one;if((j==null?void 0:j.attachmentFbid)!=null){h=(h=c("constructAttachmentFromXmaDataclass")(g,h,{attachmentFbid:j==null?void 0:j.attachmentFbid,attachmentIndex:(k||(k=d("I64"))).zero,messageId:f.messageId,threadKey:f.threadKey}))!=null?h:[];var l=h[0];h=h[1];h=(h=h==null?void 0:h.map(function(b){if(b!=null)return a.attachment_ctas.add(b)}).filter(Boolean))!=null?h:[];yield (i||(i=b("Promise"))).all(h);yield a.attachments.put(babelHelpers["extends"]({},j,l,{xmaContentType:void 0}));d("MAWReceiverFetchQPLLogger").logFetchSuccess(e);n["delete"](e)}});return function(b){return a.apply(this,arguments)}}(),"readwrite"))}function a(a,b){var e,g=(h||(h=c("useReStore")))(),i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.client_xmas).getKeyRange((k||(k=d("I64"))).of_string(a))},[a,g],f.id+":129");l(function(){if(!m)return;if((i==null?void 0:i.xmaDataclass)==null&&!n.has(a)){n.set(a,"PENDING");try{p(i,g)}catch(b){d("MAWReceiverFetchQPLLogger").logFetchFailure(a,b.message),c("FBLogger")("maw_receiver_fetch").mustfix("Error parsing content ref")}}},[g,a,i]);var j=c("useJSON")((e=i==null?void 0:i.xmaDataclass)!=null?e:"{}");l(function(){(j==null?void 0:j.content)!=null&&n.get(a)==="PENDING"&&m&&(d("MAWReceiverFetchQPLLogger").logLoadCompleted(a),q(g,a,b,j))},[j,a,g,b])}g["default"]=a}),98);
__d("MAWSecureAttachment.react",["I64","LSAuthorityLevel","LSIntEnum","MAWAttachmentBlob.react","MAWGetAttachmentThumbnailBlob","MAWSecureAudioAttachmentContent.react","MAWSecureFileAttachmentContent.react","MAWSecureImageAttachmentContent.react","MAWSecureStickerAttachmentContent.react","MAWSecureVideoAttachmentContent.react","MWPMessageListAttachmentContainer.react","MWV2ChatImagePlaceholder.react","MWXMAAttachment.react","MessagingAttachmentType","ReQL","ReQLSuspense","react","useReStore","useReceiverFetchXMA"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useEffect;function n(a){var b=a.dbAttachment,e=a.connectBottom,f=a.connectTop,g=a.mediaRenderQpl,h=a.message;a=a.outgoing;var i=b.attachmentFbid,m=b.attachmentType,n=b.authorityLevel,o=b.previewHeight!=null?(j||(j=d("I64"))).to_float(b.previewHeight):b.previewHeightLarge!=null?(j||(j=d("I64"))).to_float(b.previewHeightLarge):void 0,p=b.previewWidth!=null?(j||(j=d("I64"))).to_float(b.previewWidth):b.previewWidthLarge!=null?(j||(j=d("I64"))).to_float(b.previewWidthLarge):void 0;switch(!0){case i===(j||(j=d("I64"))).to_string((j||(j=d("I64"))).max_int)&&(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)):return l.jsx(c("MWV2ChatImagePlaceholder.react"),{height:o,width:p});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)):return l.jsx(c("MAWSecureImageAttachmentContent.react"),{connectTop:f,dbAttachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,getPreviewUrl:c("MAWGetAttachmentThumbnailBlob"),mediaRenderQpl:g,message:h,outgoing:a,previewHeight:o,previewWidth:p});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)):return l.jsx(c("MAWSecureVideoAttachmentContent.react"),{connectTop:f,dbAttachment:b,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:g,message:h,outgoing:a,previewHeight:o,previewWidth:p});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)):return l.jsx(c("MAWSecureAudioAttachmentContent.react"),{dbAttachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,message:h,outgoing:a});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)):return l.jsx(c("MAWSecureImageAttachmentContent.react"),{connectTop:f,dbAttachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:g,message:h,outgoing:a,previewHeight:o,previewWidth:p});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)):return l.jsx(c("MAWSecureStickerAttachmentContent.react"),{dbAttachment:b,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)):return l.jsx(d("MWXMAAttachment.react").MWXMAAttachment,{attachment:b,connectBottom:e,connectTop:f,getFaviconUrlXMA:function(a,b){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"favicon")},getHeaderUrlXMA:function(a){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"header")},getPlayableUrl:function(a,b){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"preview")},getPreviewUrlXMA:function(a,b){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"preview")},outgoing:a});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)):return l.jsx(c("MAWSecureFileAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,outgoing:a});default:return"Unsupported attachment type"}}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.connectBottom,e=a.connectTop,g=a.mediaRenderQpl,i=a.message,o=a.outgoing,p=(h||(h=c("useReStore")))();a=i.authorityLevel;var q=i.messageId,r=i.threadKey,s=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(p.table("attachments")).getKeyRange(r,q)},[p,q,r,a],f.id+":198");c("useReceiverFetchXMA")((a=s==null?void 0:s.attachmentFbid)!=null?a:"",i);m(function(){g==null?void 0:g.addAnnotations({bool:{has_db_attachment:s!=null,is_outgoing:o}})},[g,o,s]);return s==null?null:l.jsx(c("MWPMessageListAttachmentContainer.react"),{connectTop:e,message:i,paint:(j||(j=d("I64"))).equal(s.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))?!1:void 0,children:l.jsx(n,{connectBottom:b,connectTop:e,dbAttachment:s,mediaRenderQpl:g,message:i,outgoing:o})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWUnavailablePlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__M9fzIhDqITQ__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWUnavailableStoryPlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__pGZ-I0iz-G0__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecurePlaceholder.react",["CometPlaceholder.react","I64","LSIntEnum","MAWEncryptionPlaceholder.react","MAWFutureproofPlaceholder.react","MAWUnavailablePlaceholder.react","MAWUnavailableStoryPlaceholder.react","MWPMessageListColumn.react","ReQL","ReQLSuspense","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||d("react");function m(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.attachments).getKeyRange(a.threadKey,a.messageId)},[b,a.threadKey,a.messageId],f.id+":30")}function n(a){a=a.message;a=a;a=m(a);if(a==null)return null;a=a.defaultCtaType;if(a==="xma_montage_share")return l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWUnavailableStoryPlaceholder.react"),{})});c("recoverableViolation")("Unexpected case where message is tombstone type but the attachment is not xma montage share","messenger_e2ee_web");return l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWUnavailablePlaceholder.react"),{})})}n.displayName=n.name+" [from "+f.id+"]";function a(a){a=a.message;var b=a.displayedContentTypes,e=null;(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(65536))?e=l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWEncryptionPlaceholder.react"),{})}):(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(131072))?e=l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWFutureproofPlaceholder.react"),{})}):(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(262144))?e=l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWUnavailablePlaceholder.react"),{})}):(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(256))&&(e=l.jsx(n,{message:a}));return l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMediaRenderQpl",["I64","LSIntEnum","LSMessageContentType","QPLUserFlow","Random","objectEntries","qpl","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useEffect,l=b.useMemo,m=b.useRef,n=c("qpl")._(25302828,"2195");function a(a){var b=m(),d=m();k(function(){return function(){b.current!=null&&d.current!==b.current&&c("QPLUserFlow").endCancel(n,{instanceKey:b.current})}},[]);var e=l(function(){if(!o(a))return null;var e=p();b.current=e;c("QPLUserFlow").start(n,{annotations:{string:{content_type:r(a),transport_key:a.transportKey}},cancelOnUnload:!0,instanceKey:e});return{addAnnotations:function(a){c("QPLUserFlow").addAnnotations(n,a,{instanceKey:e})},addPoint:function(a,b){b&&c("QPLUserFlow").addAnnotations(n,b,{instanceKey:e}),c("QPLUserFlow").addPoint(n,a,{instanceKey:e})},endFail:function(a,b){c("QPLUserFlow").endFailure(n,a,{annotations:b,instanceKey:e}),d.current=e},endSuccess:function(a){c("QPLUserFlow").endSuccess(n,{annotations:a,instanceKey:e}),d.current=e},markError:function(a,b,d){return c("QPLUserFlow").markError(n,a,{debugInfo:b,error:d,instanceKey:e})}}},[]);return e}function o(a){a=a.displayedContentTypes;return(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(2))}function p(){return Date.now()+Math.round(d("Random").random()*1e4)}var q=c("objectEntries")(c("LSMessageContentType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function r(a){a=(i||(i=d("I64"))).to_float(a.displayedContentTypes);return(a=q.get(a))!=null?a:"UNKNOWN"}g["default"]=a}),98);
__d("MAWSecureAttachmentRenderer.react",["CometPlaceholder.react","MAWMsg","MAWSecureAttachment.react","MAWSecurePlaceholder.react","MWPMessageParsingUtils","react","useMediaRenderQpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback;function k(a,b,e,f,g){b=d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectTop(a,b,"below");e=d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectBottom(a,e,"below");return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:d("MAWMsg").isMediaMsg(a)||d("MAWMsg").isXMAMsg(a)?i.jsx(c("MAWSecureAttachment.react"),{connectBottom:e,connectTop:b,mediaRenderQpl:g,message:a,outgoing:f}):i.jsx(c("MAWSecurePlaceholder.react"),{message:a})})}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b=c("useMediaRenderQpl")(a);a=j(function(a,c,d,e){return k(a,c,d,e,b)},[b]);return a}g.render=k;g.useRenderAttachmentWithQpl=a}),98);
__d("MAWMessageListRow.react",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWSecureAttachmentRenderer.react","MWMessageRow.react","MWPVisibleMessageContext.react","MWV2MessageActionsVisibility.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var b=a.domElementRef,c=a.lastEbMessageTime,e=a.modal,f=a.row,g=a.thread;a=d("MWV2MessageActionsVisibility.react").useStopHoveringRef();var h=d("LSMessagingThreadTypeUtil").isSecure(g.threadType),k=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();k=k.visibleMessage;var l=f.message;h=h?(i||(i=d("I64"))).equal(g.threadKey,l.threadKey):!1;var m=!1;if(k!=null){var n=k.messageId;switch(k.source){case"Reply":case"Pinned":m=n===l.messageId;break;default:m=!1}}k=d("MAWSecureAttachmentRenderer.react").useRenderAttachmentWithQpl(l);n={domElementRef:b,hasMessageEmphasisRing:m,isModal:e===l.messageId,isSecureMessage:h,lastEbMessageTime:c,message:l,nextMessage:f.nextMessage,prevMessage:f.prevMessage,renderAttachment:k,stopHoveringRef:a,threadType:d("Int64Hooks").useMemoInt64(function(){return g.threadType},[g.threadType])};return j.jsx(d("MWMessageRow.react").MWMessageRow,babelHelpers["extends"]({},n))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useThreadLastMessageTimeMs",["ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(b.tables.messages).getKeyRange(a).map(function(a){return a.timestampMs})},[b,a],f.id+":26")}g["default"]=a}),98);
__d("MAWMessageList.react",["BaseTheme.react","CometErrorBoundary.react","CometPageletWithDiv.react","CometScreenReaderText.react","I64","MAWMessageListRow.react","MWBaseTheme","MWContextBanner.react","MWInboxThreadMessagesSpinner.react","MWPMessageListColumn.react","MWPMessageListFocusTable.react","MWPThreadCapabilitiesContext","MWPTypingIndicators.react","MWV2MessageRowSimple.react","ReQL","ReQLSuspense","cr:2368","cr:3907","cr:7567","cr:844","gkx","qex","react","useMAWOfflineQueueLoadingIndicator","useMWMessageRowTheme","useMWPAriaLabelForMessageListGrid","useReStore","useThreadLastMessageTimeMs","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j,m=l.useId,n=l.useState;function a(a){var b=a.theme;b=b===void 0?d("MWBaseTheme").empty:b;var e=a.threadKey;a=a.threadType;var f=d("MWPTypingIndicators.react").useTypingParticipants(e),g=d("MWPTypingIndicators.react").useAccessibilityText(f);if(f.length>0)return k.jsx(c("BaseTheme.react"),{config:b,children:k.jsx(c("MWV2MessageRowSimple.react"),{children:k.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:[k.jsx("div",{"aria-live":"polite",children:k.jsx(c("CometScreenReaderText.react"),{text:g})}),k.jsx(d("MWPTypingIndicators.react").MWPTypingIndicators,{threadKey:e,threadType:a})]})})});else return null}a.displayName=a.name+" [from "+f.id+"]";var o=d("withCometPlaceholder").withCometPlaceholder(a);l=k.forwardRef(e);function e(a,e){var g=a.cutoverOpenThread,j=a.entryPoint,l=a.onScrollToBottom,p=a.thread,q=(h||(h=c("useReStore")))(),r=c("useThreadLastMessageTimeMs")(p.threadKey);a=(a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(q.tables.threads,["lastActivityTimestampMs"]).getKeyRange(p.threadKey).map(function(a){a=a.lastActivityTimestampMs;return r!=null?(i||(i=d("I64"))).lt(r,a):!0})},[q,r,p.threadKey],f.id+":128"))!=null?a:!1;var s=c("useMWPAriaLabelForMessageListGrid")(p),t=c("useMWMessageRowTheme")(),u=n(""),v=u[0];u=u[1];var w=m(),x=c("useMAWOfflineQueueLoadingIndicator")(!1,p),y=!x&&a&&!((x=c("qex")._("97"))!=null?x:!1),z=b("cr:844")==null?void 0:b("cr:844")(p.threadKey);a=k.jsx(b("cr:2368"),{entryPoint:j,onScrollToBottom:l,pageSize:c("gkx")("23432")?3:15,ref:e,renderFooter:function(){return k.jsxs(k.Fragment,{children:[k.jsx(o,{theme:t,threadKey:p.threadKey,threadType:p.threadType}),y&&b("cr:7567")?k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:k.jsx(b("cr:7567"),{})}):null]})},renderHeader:function(){return k.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnGrowJustified,{children:[k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:20}),k.jsx(c("MWContextBanner.react"),{threadKey:p.threadKey,threadType:p.threadType}),k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:10})]})},renderLoadingAnimation:function(){return k.jsx(c("MWInboxThreadMessagesSpinner.react"),{})},renderRow:function(a){var b=a.domElementRef,d=a.message,e=a.nextMessage;a=a.prevMessage;return k.jsx(c("MAWMessageListRow.react"),{domElementRef:b,lastEbMessageTime:z,modal:v,row:{message:d,nextMessage:e,prevMessage:a},thread:p})},secondaryThread:g,thread:p});return k.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x5yr21d","data-testid":void 0,id:w,children:k.jsx(d("CometPageletWithDiv.react").Placeholder,{className:"x78zum5 xdt5ytf x1iyjqo2 x5yr21d",fallback:null,name:"MWV2MessageList",children:k.jsx(d("MWPThreadCapabilitiesContext").Provider,{thread:p,children:k.jsx(c("MWPMessageListFocusTable.react"),{ariaLabel:s,modal:v,setModal:u,children:b("cr:3907")==null?a:k.jsx(b("cr:3907"),{id:w,children:a})})})})})}e.displayName=e.name+" [from "+f.id+"]";a=l;g["default"]=a}),98);
__d("MWPOneToOneThreadBlockedContext.react",["I64","Int64Hooks","LSContactBlockedByViewerStatus","LSIntEnum","MWV2OneToOneThreadBlockedContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=a.children,e=a.participants,f=a.thread;a=d("Int64Hooks").useMemoInt64(function(){if(!((i||(i=d("I64"))).equal(f.threadType,(j||(j=d("LSIntEnum"))).ofNumber(1))||(i||(i=d("I64"))).equal(f.threadType,(j||(j=d("LSIntEnum"))).ofNumber(15))))return!1;var a={contents:!1};e.forEach(function(b,e,f){if(!(i||(i=d("I64"))).equal(b[1].blockedByViewerStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))){a.contents=!0;return}});return a.contents},[f.threadType,e]);return k.jsx(d("MWV2OneToOneThreadBlockedContext.react").MWV2OneToOneThreadBlockedContext,{blocked:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2SeenHead.react",["GenderConst","I64","LSIntEnum","MWMessageDeliveryStatus","getLSMediaContactProfilePictureUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b,e=a[0];a=a[1];return{gender:c("GenderConst").NOT_A_PERSON,id:(h||(h=d("I64"))).to_string(a.id),imageSrc:c("getLSMediaContactProfilePictureUrl")(a),name:(b=e.nickname)!=null?b:a.name,timestamp:h.to_float(e.readActionTimestampMs)}}function a(a,b){var c={contents:(h||(h=d("I64"))).zero};a.forEach(function(a,e,f){e=a[0];if(!(h||(h=d("I64"))).equal(e.contactId,b)&&(h||(h=d("I64"))).gt(e.deliveredWatermarkTimestampMs,c.contents)){c.contents=e.deliveredWatermarkTimestampMs;return}});return c.contents}function b(a){return new Set([(h||(h=d("I64"))).to_string(a)])}function e(a,b,c,e,f,g){var k=[];b.forEach(function(b,e,f){if(c.has(e)||a.isAdminMessage)return;if(!(h||(h=d("I64"))).equal(a.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2)))return;f=b[0];var l=(h||(h=d("I64"))).equal(a.senderId,f.contactId);f=h.le(a.timestampMs,f.readWatermarkTimestampMs);if(l||f){k.push(j(b));if(!g){c.add(e);return}else return}});var l=k.length===0&&c.size===1;if(k.length<=0)if((h||(h=d("I64"))).equal(a.senderId,f))return d("MWMessageDeliveryStatus").getDeliveryStatusForMessageSentByYou(a,e,l);else return{type:"NoneStatus"};if(!g)if(k.length>1)return{heads:k,type:"MultipleSeenHeads"};else return{head:k[0],type:"SingleSeenHead"};f=k.length===b.size-1;return{delivered:f,heads:k,type:"DeliveredAndRead"}}g.calculateMaxDeliveredTimestamp=a;g.makeExistingSeenHeads=b;g.deliveryStatusForMessage=e}),98);
__d("MWPBaseMessageList_DEPRECATED",["BaseHeadingContextWrapper.react","CometHideableComponentExperiment.react","LSMessagingThreadTypeUtil","MWPActor.react","MWPMessageAuthor.react","MWPOneToOneThreadBlockedContext.react","MWV2SeenHead.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.children,e=a.messages,f=a.participants,g=a.renderRow;a=a.thread;var h=d("MWPActor.react").useActor(),j=d("MWV2SeenHead.react").calculateMaxDeliveredTimestamp(f,h),k=d("MWV2SeenHead.react").makeExistingSeenHeads(h),l=d("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&d("LSMessagingThreadTypeUtil").isSecure(a.threadType),m=[];for(var n=e.length-1|0;n>=0;--n){var o=n===0?void 0:e[n-1|0],p=n>=(e.length-1|0)?void 0:e[n+1|0],q=e[n],r=d("MWV2SeenHead.react").deliveryStatusForMessage(q,f,k,j,h,l);m.push(i.jsx(c("CometHideableComponentExperiment.react"),{callingSurface:"thread_view",disableHidding:!0,children:i.jsx(d("MWPMessageAuthor.react").MWPMessageAuthor,{contactId:q.senderId,threadKey:q.threadKey,children:g({message:q,nextMessage:p,prevMessage:o,status:r})})},q.messageId))}if(m.length===0)return null;else return i.jsx(c("BaseHeadingContextWrapper.react"),{children:i.jsx("div",{className:"x1ja2u2z",children:i.jsx(c("MWPOneToOneThreadBlockedContext.react"),{participants:f,thread:a,children:b(m.reverse())})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWMessageList_DEPRECATED.react",["BaseTheme.react","CometErrorBoundary.react","CometPageletWithDiv.react","CometScreenReaderText.react","I64","Int64Hooks","MAWLoadingStateOutstandingOfflineQueueSelector","MAWMessageListRow.react","MAWStateContext.react","MWBaseTheme","MWPBaseMessageList_DEPRECATED","MWPMessageListColumn.react","MWPMessageListFocusTable.react","MWPThreadCapabilitiesContext","MWPTypingIndicators.react","MWV2MessageRowSimple.react","ReQL","ReQLSuspense","cr:3907","cr:7567","cr:844","qex","react","useMWMessageRowTheme","useMWPAriaLabelForMessageListGrid","useReStore","useThreadLastMessageTimeMs","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i,m=l.useEffect,n=l.useId,o=l.useState;function p(a,b){return new Map(d("ReQLSuspense").useArray(function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(b.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(b.tables.contacts)).map(function(a){var b=a[0];a=a[1];return[(j||(j=d("I64"))).to_string(a.id),[b,a]]})},[b,a.threadKey],f.id+":82"))}function q(a,b){m(function(){var c;if((a==null?void 0:(c=a.scrollPositionRef.current)==null?void 0:c.type)==="Bottom"&&b.length>0){c=a.scrollerRef.current;c==null?void 0:c.scrollToBottom()}},[b,a])}function a(a){var b=a.scrollerRefs,e=a.theme;e=e===void 0?d("MWBaseTheme").empty:e;var f=a.threadKey;a=a.threadType;var g=d("MWPTypingIndicators.react").useTypingParticipants(f),h=d("MWPTypingIndicators.react").useAccessibilityText(g);q(b,g);if(g.length>0)return k.jsx(c("BaseTheme.react"),{config:e,children:k.jsx(c("MWV2MessageRowSimple.react"),{children:k.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:[k.jsx("div",{"aria-live":"polite",children:k.jsx(c("CometScreenReaderText.react"),{text:h})}),k.jsx(d("MWPTypingIndicators.react").MWPTypingIndicators,{threadKey:f,threadType:a})]})})});else return null}a.displayName=a.name+" [from "+f.id+"]";var r=d("withCometPlaceholder").withCometPlaceholder(a);function e(a){var e=a.messageElementRefs,g=a.messages,i=a.scrollerRefs,l=a.thread,m=(h||(h=c("useReStore")))();a=p(l,m);var q=c("useMWPAriaLabelForMessageListGrid")(l),s=c("useMWMessageRowTheme")(),t=o(""),u=t[0],v=t[1],w=n(),x=d("Int64Hooks").useMemoInt64(function(){return l.threadType},[l.threadType]),y=c("useThreadLastMessageTimeMs")(l.threadKey);t=(t=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(m.tables.threads,["lastActivityTimestampMs"]).getKeyRange(l.threadKey).map(function(a){a=a.lastActivityTimestampMs;return y!=null?(j||(j=d("I64"))).lt(y,a):!0})},[m,y,l.threadKey],f.id+":178"))!=null?t:!1;var z=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateOutstandingOfflineQueueSelector").outstandingOfflineQueueSelector()),A=b("cr:844")==null?void 0:b("cr:844")(l.threadKey);t=!z&&t&&!((z=c("qex")._("97"))!=null?z:!1);return k.jsxs(k.Fragment,{children:[k.jsx(c("MWPBaseMessageList_DEPRECATED"),{messages:g,participants:a,renderRow:function(a){var b=a.message,d=a.nextMessage;a=a.prevMessage;return k.jsx(c("MAWMessageListRow.react"),{domElementRef:e.set(b.messageId),lastEbMessageTime:A,modal:u,row:{message:b,nextMessage:d,prevMessage:a},thread:l})},thread:l,children:function(a){a=k.jsxs(k.Fragment,{children:[a,k.jsx(r,{scrollerRefs:i,theme:s,threadKey:l.threadKey,threadType:x})]});return k.jsx("div",{"data-testid":void 0,id:w,children:k.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWV2MessageList",children:k.jsx(d("MWPThreadCapabilitiesContext").Provider,{thread:l,children:k.jsx(c("MWPMessageListFocusTable.react"),{ariaLabel:q,modal:u,setModal:v,children:b("cr:3907")==null?a:k.jsx(b("cr:3907"),{id:w,children:a})})})})})}}),t&&b("cr:7567")?k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:k.jsx(b("cr:7567"),{})}):null]})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("useSecureThreadDetailGetDevices",["I64","MAWJids","MAWJobDefinitions","MAWTimedJob","ReQL","ReQLSuspense","WAJobOrchestratorTypes","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useRef;function a(a,b){var e=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.table("participants"),["contactId"]).getKeyRange(a.threadKey).filter(function(b){return!(i||(i=d("I64"))).equal(b.contactId,a.threadKey)}).map(function(a){return d("MAWJids").toUserJid((i||(i=d("I64"))).to_string(a.contactId))})},[b,a.threadKey],f.id+":30"),g=k(new Set());j(function(){var a=g.current.size!==e.length||!e.every(function(a){return g.current.has(a)});if(!a&&e.length>2)return;a=new Set(e);g.current=a;c("promiseDone")(d("MAWTimedJob").TimedUIJobStarters.fireAndForget(d("MAWJobDefinitions").createStartJobInfo("getDevices",{ignoreDhash:!1,reason:"details-participants-changed",scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW},users:a})))},[e])}g["default"]=a}),98);
__d("MAWSecureThreadDetail.react",["CometPlaceholder.react","ComponentMountUnmountSubspanLogger.react","I64","LSAuthorityLevel","LSIntEnum","MAWArmadilloLinkContext.react","MAWMessageList.react","cr:5983","react","useReStore","useSecureThreadDetailGetDevices"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react")),m=k.useState;function a(a){var e=a.cutoverOpenThread,f=a.entryPoint,g=a.messageListRef;a=a.thread;var k=(h||(h=c("useReStore")))();c("useSecureThreadDetailGetDevices")(a,k);k=m(!0);var n=k[0],o=k[1];k=e!=null&&(i||(i=d("I64"))).equal(e.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE));return l.jsxs(l.Fragment,{children:[l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MAWCutoverEncryptedBackupsBanner",children:b("cr:5983")!=null&&k&&l.jsx(b("cr:5983"),{isShown:!n})}),l.jsxs(d("MAWArmadilloLinkContext.react").MAWArmadilloLinkProvider,{children:[l.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MAWSecureThreadDetail"}),l.jsx(c("MAWMessageList.react"),{cutoverOpenThread:e,entryPoint:f,onScrollToBottom:function(a){return o(a)},ref:g,thread:a})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("isEventSupported",["fbjs/lib/ExecutionEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;c("fbjs/lib/ExecutionEnvironment").canUseDOM&&(h=document.implementation&&document.implementation.hasFeature("","")!==!0);function a(a,b){if(!c("fbjs/lib/ExecutionEnvironment").canUseDOM||b===!0&&!("addEventListener"in document))return!1;b="on"+a;var d=b in document;if(!d){var e=document.createElement("div");e.setAttribute(b,"return;");d=typeof e.getAttribute(b)==="function"}!d&&h&&a==="wheel"&&(d=document.implementation.hasFeature("Events.wheel","3.0"));return d}g["default"]=a}),98);
__d("MWChatConversationScroller.react",["BaseScrollableAreaContext","CometThrottle","ExecutionEnvironment","emptyFunction","isEventSupported","react","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;e=b.forwardRef;var k=b.useCallback,l=b.useContext,m=b.useEffect,n=b.useImperativeHandle,o=b.useLayoutEffect,p=b.useMemo,q=b.useRef;function r(a,b){a=a!=null?a:20;if(b==null)return!1;else return b.scrollTop+b.clientHeight>=b.scrollHeight-a}function s(a,b){a=a!=null?a:20;if(b==null)return!1;else return b.scrollTop<=a}var t=(h||(h=c("ExecutionEnvironment"))).canUseDOM?document.body.style.overscrollBehavior==null&&((d=document.body)==null?void 0:d.style.scrollBoundaryBehavior)==null:!1;function a(a,b){var d=a.boundingClientRectRef,e=a.children,f=a.dispatch,g=a.hasMoreAfter,h=a.onScroll,i=h===void 0?c("emptyFunction"):h,u=a.scrollPositionRef,v=q(f),w=q(null),x=k(function(a){w.current=a;if(d!=null){d.current=a!=null?a.getBoundingClientRect():void 0;return}},[d]);m(function(){v.current=f});var y=function(a,b){b=w.current;if(b!=null){b.scrollTop=a;return}},z=function(a){a===void 0&&(a=!1);var b=w.current;if(b!=null)return y(b.scrollHeight,a)},A=function(a,b){var c=w.current;if(c!=null)return y(c.scrollHeight-(a+c.clientHeight),b)},B=q(!1);B.current=g;var C=function(){var a=u.current,b=w.current;b=b!=null?b.scrollHeight-(b.scrollTop+b.clientHeight):void 0;var c=r(void 0,w.current),d=s(void 0,w.current);u.current=c?B.current?{type:"Island"}:{type:"Bottom"}:b!=null?d?{type:"Top",value:b}:{type:"Between",value:b}:{type:"Bottom"};c=u.current;d=0;var e=0;switch(a.type){case"Bottom":d=1;break;case"Top":case"Between":e=2;break;case"Island":break}if(e===2)switch(c.type){case"Top":d=1;break;case"Between":break;case"Bottom":case"Island":v.current("ScrollToBottom");break}if(d===1){e=0;switch(a.type){case"Top":break;case"Bottom":case"Between":e=2;break}e===2&&c.type==="Top"&&v.current("ScrollToTop")}return i(b)},D=function(a){if(t){var b=a.deltaY>0,c=a.deltaY<0;(b&&r(0,w.current)||c&&s(0,w.current))&&a.preventDefault()}return C()},E=function(a){var b=c("isEventSupported")("mousewheel")?"mousewheel":c("isEventSupported")("wheel")?"wheel":"DOMMouseScroll",d=function(b,c){a.addEventListener(b,c,{passive:!0});return function(){return a.removeEventListener(b,c,{passive:!0})}},e=function(){return a.addEventListener(b,D,{passive:!t})},f=function(){return a.removeEventListener(b,D,{passive:!t})},g=d("mouseenter",e),h=d("mouseleave",f);e=c("CometThrottle")(C,50,{trailing:!0});var i=d("scroll",e),j=d("mouseup",C),k=d("mousedown",C);return function(){f();i();g();h();k();return j()}};m(function(){var a=w.current;if(a==null)return;var b=E(a);return function(){return b()}},[]);o(function(){var a=w.current;!(a==null)&&a.clientHeight>0&&Math.abs(a.clientHeight-a.scrollHeight)<20&&v.current("ContentDoesNotFillContainer")});c("useLayoutEffect_SAFE_FOR_SSR")(function(){var a=u.current;switch(a.type){case"Bottom":z();break;case"Top":A(a.value,!1);break;case"Between":case"Island":break}});c("useLayoutEffect_SAFE_FOR_SSR")(function(){var a=u.current;switch(a.type){case"Bottom":z();break;case"Top":case"Between":A(a.value,!1);break;case"Island":break}},[]);var F=l(c("BaseScrollableAreaContext")),G=p(function(){return{getDOMNode:function(){return w.current}}},[]);h=p(function(){return F.concat([G])},[G,F]);n(b,function(){return{getScroller:function(){return x},isContainerFilled:function(){var a=w.current;if(a==null)return!0;else return!(a.clientHeight>0&&Math.abs(a.clientHeight-a.scrollHeight)<20)},scrollElementIntoViewIfNeeded:function(a){var b=w.current;if(b==null)return;var c=a.getBoundingClientRect();b=b.getBoundingClientRect();c=c.top;b=b.top;if(c<=b){a.scrollIntoView();return}},scrollToBottom:function(){u.current={type:"Bottom"};return z()},scrollToElement:function(a,b){var c=w.current;if(c==null)return;a.scrollIntoView();a=a.getBoundingClientRect();var d=c.getBoundingClientRect();a=a.top;d=d.top;if(a<=d){c.scrollBy(0,-b|0);return C()}},scrollToPosition:A}},[]);return j.jsx(c("BaseScrollableAreaContext").Provider,{children:j.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x1odjw0f xish69e x16qrkmw","data-release-focus-from":"CLICK",ref:x,tabIndex:-1,children:e}),value:h})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("MWV2MessageScroller.react",["LSIntEnum","LSMailboxMessagesRangeQueryDirection","MWChatConversationScroller.react","emptyFunction","react","useMWMarkThreadAsReadWhenNewMessagesArrive"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useCallback;function a(a){var b=a.children,e=a.fetchMore,f=a.hasMoreAfter,g=a.hasMoreBefore,h=a.markThreadAsRead,l=a.onScroll;l=l===void 0?c("emptyFunction"):l;var m=a.scrollerRefs;a=a.thread;h=h;var n=k(function(){var a;return((a=m.scrollPositionRef.current)==null?void 0:a.type)==="Bottom"},[m]),o=k(function(){return!1}),p=c("useMWMarkThreadAsReadWhenNewMessagesArrive")(a,h,n,o);return j.jsx(c("MWChatConversationScroller.react"),{dispatch:function(a){switch(a){case"ContentDoesNotFillContainer":if(g)return e((i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE));else return;case"ScrollToBottom":if(f)return e((i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").AFTER));else return p();case"ScrollToTop":return e((i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE))}},hasMoreAfter:f,onScroll:l,ref:m.scrollerRef,scrollPositionRef:m.scrollPositionRef,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWChatLoadMoreItemsIncrementally",["I64","LSIntEnum","LSMailboxMessagesRangeQueryDirection","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useCallback,l=b.useMemo,m=b.useRef,n=b.useState,o={contents:void 0};function p(){if(o.contents==null){var a;o.contents=((a=window.document.documentElement)==null?void 0:a.style.overflowAnchor)!=null}return(a=o.contents)!=null?a:!1}function a(a,b,e,f,g,h){a=a!=null?a:!1;var o=b!=null?b:!0;b=e!=null?e:{type:"Bottom"};e=a||!p();var q=f.length,r;switch(b.type){case"Top":case"Between":r=b.value>=200;break;case"Bottom":case"Island":r=!1;break}a=n(function(){if(r)return q;return o?window.screen.availHeight<1200?20:40:10});var s=a[0],t=a[1];b=l(function(){return f.slice(-s)},[f,s]);var u=m(s);a=k(function(a){if(!(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE)))throw c("unrecoverableViolation")("Message fetch direction must be 'before'","messenger_web_product");if(u.current+15<=q){u.current+=15;return t(function(){return u.current})}else{g((j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE));if(u.current<q+15){u.current=q+15;return t(function(){return u.current})}}},[g,q,t]);return e?[f,g,h]:[b,a,h||s<q]}g["default"]=a}),98);
__d("MAWSecureThreadDetail_DEPRECATED.react",["CometHeroHoldTrigger.react","CometPageletWithDiv.react","CometPlaceholder.react","ComponentMountUnmountSubspanLogger.react","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWArmadilloLinkContext.react","MAWFetchMoreMessages","MAWMessageList_DEPRECATED.react","MWContextBanner.react","MWInboxThreadMessagesSpinner.react","MWPMessageListColumn.react","MWV2MessageScroller.react","ReQL","ReQLSuspense","cr:5983","emptyFunction","logMessengerWebFalcoEvent","react","useMAWMarkThreadAsRead","useMWChatLoadMoreItemsIncrementally","useMWCurrentVisibleMessage","useMWV2ConversationScrollerRefs","useReStore","useSecureThreadDetailGetDevices"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react"));e=i;var m=e.useCallback,n=e.useImperativeHandle,o=e.useMemo,p=e.useState,q=3;function r(a,b){var c=(k||(k=d("I64"))).compare(a.primarySortKey,b.primarySortKey);if(c!==0)return c;c=k.compare((c=a.secondarySortKey)!=null?c:(k||(k=d("I64"))).zero,(c=b.secondarySortKey)!=null?c:(k||(k=d("I64"))).zero);return c!==0?c:k.compare(a.timestampMs,b.timestampMs)}function s(a,b){var e=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){var f=d("ReQL").fromTableAscending(e.tables.messages.index("messageDisplayOrder")).getKeyRange(b.threadKey);if(a!=null)return f.bounds({gte:d("ReQL").key(a.minTimestampMs),lte:d("ReQL").key(a.maxTimestampMs)});else if((k||(k=d("I64"))).lt(b.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))||d("LSMessagingThreadTypeUtil").isSecure(b.threadType))return f;return d("ReQL").empty()},[e,a,b.authorityLevel,b.threadKey,b.threadType],f.id+":91")}function t(a,b){var e=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){if(b==null)return d("ReQL").empty();var f=d("ReQL").fromTableAscending(e.tables.messages).getKeyRange(b.threadKey);if(a!=null)return d("ReQL").fromTableAscending(e.tables.messages).getKeyRange(b.threadKey).bounds({gte:d("ReQL").key(a.minTimestampMs),lte:d("ReQL").key(a.maxTimestampMs)});else if((k||(k=d("I64"))).lt(b.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))||d("LSMessagingThreadTypeUtil").isSecure(b.threadType))return f;return d("ReQL").empty()},[e,b,a],f.id+":125")}function u(a,b){var c=(k||(k=d("I64"))).compare(a.primarySortKey,b.primarySortKey);if(c!==0)return c;c=a.secondarySortKey;var e=b.secondarySortKey;if(c==null)if(e!=null)return-1;else return(k||(k=d("I64"))).compare(a.timestampMs,b.timestampMs);if(e==null)return 1;c=k.compare(c,e);return c!==0?c:k.compare(a.timestampMs,b.timestampMs)}function v(a,b,e,f,g){var h=s(a,e),i=t(b,f);d("Int64Hooks").useEffectInt64(function(){if(f!=null&&i.length===0){var a=f.threadKey,b=f.threadType;c("logMessengerWebFalcoEvent")({threadKey:a,threadType:b},"no_open_messages_in_cutover_thread",g,{cutoverThreadKey:(k||(k=d("I64"))).to_string(e.threadKey),reason:"no_messages_fetched_for_open"})}},[g,i.length,f,e.threadKey]);return o(function(){if(a!=null&&!a.hasMoreBefore)return i.sort(u).concat(h.sort(r));else return h.sort(r)},[a,h,i])}function a(a){var e,f=a.cutoverOpenThread,g=a.entryPoint,i=a.messageListRef;a=a.thread;var j=c("useMWV2ConversationScrollerRefs")(),k=(h||(h=c("useReStore")))(),o=m(function(){var a;return((a=j.scrollPositionRef.current)==null?void 0:a.value)===void 0&&((a=j.scrollPositionRef.current)==null?void 0:a.type)==="Bottom"},[j]),r=d("MAWFetchMoreMessages").useFetchCutoverMessages(a.threadKey,f==null?void 0:f.threadKey,a.threadType),s=c("useMWCurrentVisibleMessage")(a,j.scrollerRef),t=s.messageRange,u=c("useMWCurrentVisibleMessage")(f,j.scrollerRef);u=u.messageRange;e=(e=t==null?void 0:t.hasMoreAfter)!=null?e:!1;var w=p(!1),x=w[0],y=w[1];r=c("useMWChatLoadMoreItemsIncrementally")(e,void 0,void 0,v(t,u,a,f,g),r,(w=t==null?void 0:t.hasMoreBefore)!=null?w:!1);w=r[0];var z=r[1];r=r[2];c("useSecureThreadDetailGetDevices")(a,k);n(i,function(){return{getScrollAreaElement:c("emptyFunction"),jumpToMostRecentMessage:c("emptyFunction"),restoreScrollPosition:function(){var a=j.scrollerRef.current,b=j.scrollPositionRef.current;if(a!=null&&b!=null)switch(b.type){case"Bottom":a.scrollToBottom();break;case"Top":case"Between":a.scrollToPosition(b.value,!1);break;case"Island":break}}}},[j.scrollPositionRef,j.scrollerRef]);k=t==null||t.isLoadingBefore;i=f!=null&&(u==null||u.isLoadingBefore);t=w.length>=q;return l.jsxs(l.Fragment,{children:[l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MAWCutoverEncryptedBackupsBanner",children:b("cr:5983")!=null&&f&&l.jsxs(l.Fragment,{children:[l.jsx(b("cr:5983"),{isShown:x}),l.jsx(c("CometHeroHoldTrigger.react"),{description:"MAWCutoverLoadingMessages",hold:i&&!t})]})}),l.jsxs(d("MAWArmadilloLinkContext.react").MAWArmadilloLinkProvider,{children:[l.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MAWSecureThreadDetail"}),l.jsxs(c("MWV2MessageScroller.react"),{fetchMore:z,hasMoreAfter:e,hasMoreBefore:r,markThreadAsRead:c("useMAWMarkThreadAsRead")(a,g),onScroll:function(){y(!o())},scrollerRefs:j,thread:a,children:[l.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:[l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:20}),l.jsx(c("CometHeroHoldTrigger.react"),{description:"MAWLoadingMessages",hold:k&&!t}),r?l.jsx(c("MWInboxThreadMessagesSpinner.react"),{}):l.jsx(c("MWContextBanner.react"),{threadKey:a.threadKey,threadType:a.threadType}),l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:10})]}),l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:null}),l.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MAWMessageList",children:l.jsx(c("MAWMessageList_DEPRECATED.react"),{messageElementRefs:s.messageElementRefs.current,messages:w,scrollerRefs:j,thread:a})}),e?l.jsx(c("MWInboxThreadMessagesSpinner.react"),{}):null]})]})]})}a.displayName=a.name+" [from "+f.id+"]";e=l.memo(a);g.messageSortOrder=r;g.useMessagesUnsorted=s;g.useMessagesWithMaybeCutover=v;g.MAWSecureThreadDetail_DEPRECATED=e}),98);
__d("MWFailChatTabOpenQPLEvent",["MWGetChatTabOpenQPLEventTrace"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("MWGetChatTabOpenQPLEventTrace")(a,function(a){a.failTrace(b,!0)})}g["default"]=a}),98);
__d("useMAWMaybeResetEphemeralSettings",["Int64Hooks","MAWEphemeralGatingUtil","MAWGetEphemeralSettings","MAWMiActOnActThreadReady","Promise","WALoggerDeferred","promiseDone","react","updateEphemeralDuration","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[reset ephemeral settings]: fail to reset settings for chatJid ",", previous settings was ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[reset ephemeral settings]: success to reset settings for chatJid ",", previous settings was ",""]);k=function(){return a};return a}var l=(i||d("react")).useRef,m=0;function a(a){var b=c("useAsyncReStore")(),e=l(null);d("Int64Hooks").useEffectInt64(function(){(e.current==null||e.current!==a)&&(e.current=a,d("MAWEphemeralGatingUtil").isResetEphemeralSettingsEnabled()&&c("promiseDone")(b,function(b){return c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(b.tables,a,"useMAWResetEphemeralSettings",function(b,c,d){return n(a,d)}))}))},[a,b])}function n(a,e){var f=d("MAWEphemeralGatingUtil").getExpirationOptions();return e!=null?d("MAWGetEphemeralSettings").getEphemeralSetting(e,a).then(function(b){b&&b.ephemeralExpirationInSec>0&&!f.includes(b.ephemeralExpirationInSec)&&c("promiseDone")(c("updateEphemeralDuration")(e,m,!0,function(){void d("WALoggerDeferred").LOG(k(),e,b.ephemeralExpirationInSec)},function(){void d("WALoggerDeferred").LOG(j(),e,b.ephemeralExpirationInSec)},a))}):(h||(h=b("Promise"))).resolve()}g["default"]=a}),98);
__d("MAWSecureThreadDetailWrapper.react",["CometErrorBoundary.react","CometHeroHoldTrigger.react","FBLogger","I64","Int64Hooks","LSAuthorityLevel","LSFactory","LSInitiateThreadMigrationStoredProcedure","LSIntEnum","MAWSecureThreadDetail_DEPRECATED.react","MAWThreadCutover","MWFailChatTabOpenQPLEvent","MemoryUtils","QPLUserFlow","WAHex","cr:1957","cr:3200","cr:4646","emptyFunction","logMessengerWebFalcoEvent","qpl","react","useAsyncReStore","useMAWMaybeResetEphemeralSettings"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.useCallback,m=e.useEffect,n=e.useRef,o=e.useState,p=(e=b("cr:3200"))!=null?e:c("emptyFunction"),q=(e=b("cr:4646"))!=null?e:c("emptyFunction");function r(a,b){var e=(i||(i=d("I64"))).to_int32(a);d("Int64Hooks").useEffectInt64(function(){c("QPLUserFlow").start(c("qpl")._(25306607,"1883"),{annotations:{string:{entryPoint:b,thread_id:(i||(i=d("I64"))).to_string(a)}},instanceKey:e})},[b,e,a]);var f=l(function(a){c("QPLUserFlow").addPoint(c("qpl")._(25306607,"1883"),a,{instanceKey:e})},[e]),g=l(function(a){c("QPLUserFlow").endSuccess(c("qpl")._(25306607,"1883"),{annotations:{string:{is_cutover:String(a)}},instanceKey:e})},[e]),h=l(function(a){c("QPLUserFlow").addAnnotations(c("qpl")._(25306607,"1883"),{string:a},{instanceKey:e})},[e]),j=l(function(a){c("QPLUserFlow").addAnnotations(c("qpl")._(25306607,"1883"),{"int":a},{instanceKey:e})},[e]),k=l(function(a,b){c("QPLUserFlow").endFailure(c("qpl")._(25306607,"1883"),a,{annotations:{string:{is_cutover:String(b)}},instanceKey:e})},[e]);return{addQplAnnotations:h,addQPLAnnotationsInt:j,addQplPoint:f,qplEndFailure:k,qplEndSuccess:g}}function s(a,b){if(a==null)return"not_cutover_thread";return b!=null?a.showOpenMessageHistory===!1?"dual_thread_cutover":"show":"loading"}function a(a){var e=a.entryPoint,f=a.messageListRef,g=a.thread;a=r(g.threadKey,e);var h=a.addQplAnnotations,u=a.addQPLAnnotationsInt,v=a.addQplPoint,w=a.qplEndFailure,x=a.qplEndSuccess;c("useMAWMaybeResetEphemeralSettings")(g.threadKey);p(g.threadKey);var y=n(""),z=l(function(a){switch(a){case"loading":return;case"show":h({showOpenHistory:"show"});x(!0);return;case"hide":h({showOpenHistory:"hide"});x(!0);return;case"not_cutover_thread":x(!1);return;case"dual_thread_cutover":x(!1);return;case"error":w(y.current,!0);return;default:a;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable showOpenMsgHistoryState: %s",a)}},[h,w,x]),A=c("useAsyncReStore")(),B=l(function(a,b){return A.then(function(e){return e.runInTransaction(function(e){return c("LSInitiateThreadMigrationStoredProcedure")(c("LSFactory")(e),{armadilloThreadKey:b,openMessageThreadKey:a,shouldCopyMessages:!1,traceId:d("WAHex").randomHex(8)})},"readwrite")})},[A]),C=d("MAWThreadCutover").useGetCutoverMapping(g.threadKey),D=d("MAWThreadCutover").useCutoverOpenThread(g.threadKey);q(g.threadKey);a=o(s(C,D));var E=a[0],F=a[1];d("Int64Hooks").useEffectInt64(function(){z(E);if(E==="show"||E==="hide")return;if(C==null)return;if(D!=null&&C.showOpenMessageHistory!==!1)return F("show")},[C,D,z,E]);var G=n(!1);m(function(){if((C==null?void 0:C.armadilloThreadId)==null||(C==null?void 0:C.openThreadId)==null)return;if(G.current===!0)return;G.current=!0;v("thread_migration_initiating_start");var a=d("MemoryUtils").getCurrentMemory();a=a.usedJSHeapSize;u({usedJSHeapSizeStart:a});h();B(C.openThreadId,C.armadilloThreadId).then(function(){G.current=!1;v("thread_migration_initiating_end");var a=d("MemoryUtils").getCurrentMemory();a=a.usedJSHeapSize;u({usedJSHeapSizeEnd:a})})["catch"](function(a){G.current=!1,y.current="fail_to_init_thread_migration",F("error"),c("FBLogger")("messenger_e2ee_web").catching(a).mustfix("fail_to_init_thread_migration"),w(y.current,!0)})},[u,h,v,C==null?void 0:C.armadilloThreadId,C==null?void 0:C.openThreadId,B,w,x]);var H=D!=null;d("Int64Hooks").useEffectInt64(function(){if(y.current==="")return;if(E!=="hide"){var a;c("logMessengerWebFalcoEvent")({threadKey:g.threadKey,threadType:g.threadType},"no_open_messages_in_cutover_thread",e,{cutoverThreadKey:(i||(i=d("I64"))).to_string((a=C==null?void 0:C.openThreadId)!=null?a:(i||(i=d("I64"))).neg_one),hasCutoverOpenThread:H.toString(),reason:y.current,showOpenMsgHistoryState:E})}z(E)},[C,e,E,H,g.threadKey,g.threadType,z]);a=D!=null&&(i||(i=d("I64"))).equal(D.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE));var I=(E==="show"||C!=null)&&(D==null||!a),J="";E==="loading"?J="openMsgHistory":I&&(D==null?J="cutoverOpenThread":a||(J="authorityLevel"));return k.jsx(t,{message:"Error while loading secure thread messages",threadKey:g.threadKey,children:k.jsxs(k.Fragment,{children:[k.jsx(c("CometHeroHoldTrigger.react"),{description:"MAWCutoverShowHistoryDetermination-"+J,hold:E==="loading"||I}),b("cr:1957")!=null?k.jsx(b("cr:1957"),{cutoverOpenThread:E==="show"?D:void 0,entryPoint:e,messageListRef:f,thread:g}):k.jsx(d("MAWSecureThreadDetail_DEPRECATED.react").MAWSecureThreadDetail_DEPRECATED,{cutoverOpenThread:E==="show"?D:void 0,entryPoint:e,messageListRef:f,thread:g})]})})}a.displayName=a.name+" [from "+f.id+"]";function t(a){var b=a.children,d=a.message,e=a.threadKey;return k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},onError:function(a){c("MWFailChatTabOpenQPLEvent")(e,a.toString()),c("FBLogger")("messenger_web_product").catching(a).mustfix(d+": %s",a.toString())},children:b})}t.displayName=t.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCMSubThreadChatTabWithSubthread.react",["BaseMultiStepContainer.react","CometPlaceholder.react","MWCMSubthreadChatTabContext.react","MWV2ChatTabLoadingWithGlimmers.react","MWV2TabContainer","cr:4346","cr:8674","deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback,k=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWCMSubthreadThreadViewChatTab.react").__setRef("MWCMSubThreadChatTabWithSubthread.react"));function l(a,b){return j(function(d){a(function(a){var e=a.onReturn;return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2ChatTabLoadingWithGlimmers.react"),{tab:b}),children:i.jsx(k,{onReturn:function(){e()},tab:b,threadKey:d})})})},[a,b])}function m(a){var b=a.children,c=a.pushPage;a=a.tab;c=l(c,a);return i.jsx(d("MWCMSubthreadChatTabContext.react").MWCMSubthreadChatTabContextProvider,{pushSubthreadViewPage:c,children:b})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var d=a.children,e=a.tab,f=a.thread,g=f.threadKey,h=f.threadType;return i.jsx("div",{className:"xgqcy7u x1lq5wgf x2c8kfy x17adc0v xhvchuf x1jx94hy x1rgmuzj xbbk1sx",children:i.jsx(c("BaseMultiStepContainer.react"),{disableFocusContainment:!1,disableInitialAutoFocus:!1,fallback:i.jsx(c("MWV2ChatTabLoadingWithGlimmers.react"),{tab:e}),fitContentWidth:!0,children:function(a){return i.jsx(m,{pushPage:a,tab:e,children:i.jsxs(c("MWV2TabContainer"),{style:{boxShadow:"none",margin:0},tab:e,threadKey:f.threadKey,children:[b("cr:4346")!=null?i.jsx(b("cr:4346"),{pushPage:a,tab:e,thread:f}):null,b("cr:8674")!=null?i.jsx(b("cr:8674"),{pushPage:a,tab:e,threadKey:g,threadType:h}):null,d]})})}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPChatConnectionStatusCard.react",["fbt","I64","LSIntEnum","LSInternetConnectionState","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||d("react");function n(a){var b=a.connectionStatus;a=a.renderWrapper;if(b==="Connected")return null;else if(b==="Disconnected")return a(h._("__JHASH__vs4VWaH-KyB__JHASH__"));else if(b==="Connecting")return a(h._("__JHASH__t43xAFuvvRz__JHASH__"));else return null}n.displayName=n.name+" [from "+f.id+"]";function a(a){a=a.renderWrapper;var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(b.tables.connectivity_status).map(function(a){return(j||(j=d("I64"))).equal(a.internetConnectionState,(k||(k=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED))?"Connected":"Disconnected"})},[b],f.id+":59");return m.jsx(n,{connectionStatus:(e=e)!=null?e:"Connected",renderWrapper:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatConnectionStatusCard.react",["MWPChatConnectionStatusCard.react","MWXText.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){return i.jsx("div",{className:"xwwskcc x1q0q8m5 xso031l x1lliihq xz9dl7a xsag5q8 x2b8uid",children:i.jsx(c("MWXText.react"),{type:"meta4",children:a})})}j.displayName=j.name+" [from "+f.id+"]";function a(){return i.jsx(c("MWPChatConnectionStatusCard.react"),{renderWrapper:j})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatInthreadBannerIcon.react",["MWXIconStrict.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.icon;return a==null?null:i.jsx("div",{className:"x6s0dn4 x4tc44c x14yjl9h xudhj91 x18nykt9 xww2gxu x78zum5 xl56j7k x1yrsyyn xsyo7zv x10b6aqq x16hj40l",children:i.jsx(c("MWXIconStrict.react"),{color:"white",icon:a.icon,size:12})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatInthreadIconParser.react",["MWPXMAIconParser","MWXIconFriendGenericAdd","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case"friend-woman-add":return c("MWXIconFriendGenericAdd");default:c("recoverableViolation")("Unknown XMA Icon: "+a,"messenger_web_product");return}}function a(a){a=d("MWPXMAIconParser").parse(a);if(a==null)return;if(typeof a==="string")return a;var b=a.color;a=a.icon;a=h(a);if(a!=null)return{color:b,icon:a}}g.parse=a}),98);
__d("MWChatInThreadBanner.react",["CometProfilePhoto.react","MWChatInthreadBannerIcon.react","MWChatInthreadIconParser.react","MWLSThreadDisplayContext","MWXIconChevronRight","MWXIconStrict.react","MWXPressable.react","MWXRow.react","MWXRowItem.react","MWXText.react","MWXTextPairing.react","TetraButton.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={bannerIcon:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},container:{backgroundColor:"xfpmyvw",position:"x1n2onr6",$$css:!0},grow:{flexGrow:"x1iyjqo2",$$css:!0},image:{marginEnd:"x11i5rnm",marginLeft:null,marginRight:null,$$css:!0},infoLabel:{backgroundColor:"x1qhmfi1",borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x4p5aij",paddingEnd:"x150jy0e",paddingBottom:"x1j85h84",paddingStart:"x1e558r4",textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",$$css:!0},linkBanner:{width:"xh8yej3",$$css:!0},sheet:{borderBottomColor:"x80vd3b",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",$$css:!0},sheetInner:{paddingBottom:"x1a8lsjc",width:"xh8yej3",$$css:!0},withTopDivider:{borderTopColor:"x1l1xfun",borderEndColor:"xv160w3",borderBottomColor:"xwwskcc",borderStartColor:"xsb8bxb",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0}};function k(a){var b=a.action;a=a.button;var d=a.ctaTitle;switch(b.type){case"link":return i.jsx(c("MWXRowItem.react"),{xstyle:j.grow,children:i.jsx(c("TetraButton.react"),{label:d,linkProps:{url:b.url},type:"secondary"})});case"action":return i.jsx(c("MWXRowItem.react"),{xstyle:j.grow,children:i.jsx(c("TetraButton.react"),{label:d,onPress:b.onPress,ref:b.contextRef,type:"secondary"})});case"popover":return i.jsx(c("MWXRowItem.react"),{xstyle:j.grow,children:b.popoverTrigger(function(a,b){return i.jsx(c("TetraButton.react"),{label:d,onPress:function(){return b()},ref:a,type:"secondary"})})});case"unimplemented":c("recoverableViolation")("In thread banner cta not implemented, CTA type: "+a.ctaType+" CTA Title: "+a.ctaTitle,"messenger_web_product");return null}}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b,e,f=a.banner,g=a.ctaParser;a=a.impressionRef;b=d("MWChatInthreadIconParser.react").parse((b=f.banner.iconUrl)!=null?b:"");var h=f.banner.chevronCtaType!=null,l=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();l=l==="Inbox";b=b!=null?typeof b==="string"?i.jsx(c("MWXRowItem.react"),{expanding:!1,children:i.jsx("div",{className:"x11i5rnm",children:i.jsx(c("CometProfilePhoto.react"),{shape:"circle",size:24,source:{uri:b}})})}):i.jsx(c("MWXRowItem.react"),{expanding:!1,children:i.jsx("div",{className:[j.grow,"x78zum5 xdt5ytf x1iyjqo2 xl56j7k"],children:i.jsx(c("MWChatInthreadBannerIcon.react"),{icon:b})})}):null;e=i.jsx(c("MWXRowItem.react"),{expanding:!0,children:i.jsx(c("MWXTextPairing.react"),{body:((e=f.banner.titleSectionOne)!=null?e:"")+((e=f.banner.titleSectionTwo)!=null?e:""),bodyLineLimit:1,level:4,meta:f.banner.heading,metaLineLimit:1,metaLocation:"above"})});var m=f.banner.infoLabel!=null?i.jsx(c("MWXRowItem.react"),{children:i.jsx(c("MWXText.react"),{type:"meta1",children:i.jsx("span",{className:"x1qhmfi1 x1lcm9me x1yr5g0i xrt01vj x10y3i5r x6ikm8r x10wlt62 x4p5aij x150jy0e x1j85h84 x1e558r4 xlyipyv xuxw1ft",children:f.banner.infoLabel})})}):null,n=f.leftButton,o=f.rightButton,p;if(n!=null&&o!=null)p=i.jsxs(c("MWXRow.react"),{paddingTop:8,spacing:4,wrap:"forward",children:[i.jsx(k,{action:g(f,n),button:n}),i.jsx(k,{action:g(f,o),button:o})]});else{n=(n=n)!=null?n:o;n!=null&&(p=i.jsx(c("MWXRow.react"),{paddingTop:8,children:i.jsx(k,{action:g(f,n),button:n})}))}o=h?i.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:i.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconChevronRight"),size:12})}):null;var q=i.jsxs("div",{className:"x1a8lsjc xh8yej3",children:[i.jsxs(c("MWXRow.react"),{paddingTop:10,children:[b,e,m,o]}),p]});n=f.bannerAction!=null?g(f,f.bannerAction):void 0;var r;if(n!=null)switch(n.type){case"link":r=i.jsx(c("MWXPressable.react"),{expanding:!0,linkProps:{target:"_blank",url:n.url},xstyle:function(){return[j.linkBanner]},children:q});break;case"action":r=i.jsx(c("MWXPressable.react"),{expanding:!0,onPress:n.onPress,ref:n.contextRef,children:q});break;case"popover":r=n.popoverTrigger(function(a,b){return i.jsx(c("MWXPressable.react"),{expanding:!0,onPress:function(){return b()},ref:a,children:q})});break;case"unimplemented":e=(b=(h=f.bannerAction)==null?void 0:h.ctaType)!=null?b:"";e!=="member_requests_view"&&c("recoverableViolation")("In thread banner cta not implemented: "+e,"messenger_web_product");r=q;break}else r=q;return i.jsx("div",{className:["xfpmyvw x1n2onr6",l?"x1l1xfun xv160w3 xwwskcc xsb8bxb x13fuv20 x178xt8z":null],ref:a,children:i.jsx("div",{className:"x80vd3b x1q0q8m5 xso031l",children:r})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useInThreadBannerWithCta",["I64","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a,b){return b!=null?a.get((i||(i=d("I64"))).to_string(b)):null};function k(a,b,c){return{banner:a,bannerAction:j(b,a.bannerCtaId),leftButton:j(b,a.cta1Id),overflowMenuActions:(c!=null?[c.cta1Id,c.cta2Id,c.cta3Id,c.cta4Id,c.cta5Id]:[]).map(function(a){return j(b,a)}).filter(Boolean),rightButton:j(b,a.cta2Id)}}function a(a,b){var e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.in_thread_banner_overflow_menu).getKeyRange(b,a.bannerId)},[e,b,a.bannerId],f.id+":67"),j=new Map(d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.tables.in_thread_banner_ctas).getKeyRange(a.bannerId).map(function(a){return[(i||(i=d("I64"))).to_string(a.ctaId),a]})},[e,a.bannerId],f.id+":74"));return k(a,j,g)}g.createBanner=k;g.useInThreadBannerWithCta=a}),98);
__d("useMWLSEnsureAdContextExists",["LSFactory","LSRequestAdContextFromThreadKeyStoredProcedure","MWThreadKey.react","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect;function a(){var a=(h||(h=c("useReStore")))(),b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();j(function(){c("promiseDone")(a.runInTransaction(function(a){return c("LSRequestAdContextFromThreadKeyStoredProcedure")(c("LSFactory")(a),{threadKey:b})},"readwrite"))},[b,a])}g["default"]=a}),98);
__d("useMWLSEnsureInThreadBannerExists",["LSFactory","LSFetchBannersStoredProcedure","MWThreadKey.react","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect;function a(){var a=(h||(h=c("useReStore")))(),b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();j(function(){var d=a.runInTransaction(function(a){return c("LSFetchBannersStoredProcedure")(c("LSFactory")(a),{threadKey:b})},"readwrite");c("promiseDone")(d)},[b,a])}g["default"]=a}),98);
__d("useMWCMMemberRequestsCtaParser.react",["GroupsCometChatsEngagementLogger","I64","MWCMMemberRequestsDialog.entrypoint","MWInboxInfoPanelContext.react","MWLSThreadDisplayContext","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),b=a.isOnMemberRequestsPageRef,e=a.pushMemberRequestsPage,f=a.setShouldNavToMemberRequests,g=a.setThreadInfoVisible,i=a.threadInfoVisible;a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();var j=a==="ChatTab";a=c("useMWXEntryPointDialog")(c("MWCMMemberRequestsDialog.entrypoint"),{});var k=a[0],l=function(a){k({parentSurface:"request_to_join_activity_banner",threadKey:a})};return function(a,c){var k=function(){d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{member_join_request_enabled:"1"},event:"request_to_join_banner",source:"request_to_join_activity_banner",surface:"thread_view",thread_id:(h||(h=d("I64"))).to_string(a.banner.threadKey)})};if(c.ctaType!=="cm_thread_member_requests_view")return{type:"unimplemented"};return j?{onPress:function(){k(),l(a.banner.threadKey)},type:"action"}:{onPress:function(){k();if(b.current===!0)return;i===!0?e("request_to_join_activity_banner"):(f(!0),g(!0))},type:"action"}}}g["default"]=a}),98);
__d("useMWLSAdContextCtaParser",["JSResourceForInteraction","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWCTMAdContextDialog.react").__setRef("useMWLSAdContextCtaParser")),b=a[0];return function(a,c){return c.ctaType!=="ads_context"?{type:"unimplemented"}:{onPress:function(){return b({adId:c.ctaId,threadKey:a.banner.threadKey})},type:"action"}}}g["default"]=a}),98);
__d("useMWLSExecuteInThreadBannerCta",["LSExecuteCTAStoredProcedure","LSFactory","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return j(function(b){c("promiseDone")(a.runInTransaction(function(a){return c("LSExecuteCTAStoredProcedure")(c("LSFactory")(a),{ctaId:b})},"readwrite"))},[a])}g["default"]=a}),98);
__d("useMWLSMarketplaceServerMutationCta",["LSFactory","LSServerMutationCtaStoredProcedure","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return j(function(b,d){c("promiseDone")(a.runInTransaction(function(a){return c("LSServerMutationCtaStoredProcedure")(c("LSFactory")(a),{marketplaceCtaType:d,threadKey:b})},"readwrite"))},[a])}g["default"]=a}),98);
__d("useMWLSMarketplaceCtaParser",["CometMarketplaceConfirmMarkAsPaidDialog.entrypoint","CometMarketplaceCreateDiscountedPriceDialog.entrypoint","CometMarketplaceInboxLabelChatDialog.entrypoint","CometMarketplaceLogger","FBLogger","I64","JSResourceForInteraction","MWPActor.react","MWThreadKey.react","MWXLazyPopoverTrigger.react","ReQL","ReQLSuspense","react","recoverableViolation","useMWLSExecuteInThreadBannerCta","useMWLSMarketplaceServerMutationCta","useMWXEntryPointDialog","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j.useMemo;b=["marketplace_mark_as_available","marketplace_mark_as_pending","marketplace_mark_as_sold","marketplace_mark_as_sold_scaled","marketplace_mark_as_sold_with_txn_survey","marketplace_mark_as_sold_with_txn_survey_scaled","marketplace_mark_as_sold_with_select_buyer","marketplace_mark_as_sold_with_select_buyer_scaled"];var m=new Set(b);e=new Set(b.concat(["marketplace_rate_buyer","marketplace_scaled_rate_buyer","marketplace_rate_seller","marketplace_scaled_rate_seller","marketplace_report_buyer","marketplace_report_seller","marketplace_see_details","marketplace_request_payment","marketplace_send_payment","marketplace_find_similar","marketplace_more_options","marketplace_p2m_request_payment","marketplace_xma_call_function","marketplace_label_chat","marketplace_mark_as_paid","marketplace_view_profile","marketplace_create_discount","marketplace_server_mutation","marketplace_banner_open_native"]));function n(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.participants,["contactId"]).getKeyRange(a).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,e)}).map(function(a){return(i||(i=d("I64"))).to_string(a.contactId)})},[e,a,b],f.id+":81")}function a(){var a=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),b=c("useMWLSMarketplaceServerMutationCta")(),e=c("useMWLSExecuteInThreadBannerCta")(),f=n(a),g=c("useMWXLazyDialog")(c("JSResourceForInteraction")("CometFRX_DEPRECATED.react").__setRef("useMWLSMarketplaceCtaParser")),h=g[0],j=(i||(i=d("I64"))).to_string(a);g=c("useMWXEntryPointDialog")(c("CometMarketplaceInboxLabelChatDialog.entrypoint"),{thread_id:j});var o=g[0];a=c("useMWXEntryPointDialog")(c("CometMarketplaceConfirmMarkAsPaidDialog.entrypoint"),{threadId:j});var p=a[0];g=c("useMWXEntryPointDialog")(c("CometMarketplaceCreateDiscountedPriceDialog.entrypoint"),{threadId:j});var q=g[0];return l(function(){var a=function a(g,l){var n=l.ctaId,r=l.ctaType,s=l.deeplinkUrl,t=l.webviewUrl;if(r==="marketplace_see_details"||r==="marketplace_banner_open_native"){var u;u=(u=t)!=null?u:s;if(u!=null)return{type:"link",url:u};c("recoverableViolation")("Marketplace see details cta without url","messenger_web_product")}if(r==="marketplace_view_profile"){u=(u=t)!=null?u:s;if(u!=null)return{type:"link",url:u};c("recoverableViolation")("Marketplace view profile cta without url","messenger_web_product")}if(r==="marketplace_scaled_rate_seller"&&t!=null)return{type:"link",url:t};if(r==="marketplace_more_options"&&g.overflowMenuActions.length>0)return{popoverTrigger:function(b){return k.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{ctaParser:function(b){return a(g,b)},menu:g.overflowMenuActions},popoverResource:c("JSResourceForInteraction")("MWLSMarketplacePopoverMenu.react").__setRef("useMWLSMarketplaceCtaParser"),children:b})},type:"popover"};if(r==="marketplace_report_buyer"||r==="marketplace_report_seller"){if(f!=null)return{onPress:function(){return h({entryPoint:"REPORT_BUTTON",id:f,location:r==="marketplace_report_buyer"?"marketplace_messenger_report_buyer":"marketplace_messenger_report_seller"},function(){})},type:"action"};c("recoverableViolation")("Haven't implemented report buyer/seller for threads with more than 1 person","messenger_web_product")}if(m.has(r))return{onPress:function(){return e(n)},type:"action"};if(r==="marketplace_label_chat")return{onPress:function(){return o({threadID:j},function(){return e(n)})},type:"action"};if(r==="marketplace_mark_as_paid")return{onPress:function(){return p({threadID:j},function(){return e(n)})},type:"action"};if(r==="marketplace_create_discount")return{onPress:function(){d("CometMarketplaceLogger").logClick("create_discount","messenger_thread_view");return q({},function(){return e(n)})},type:"action"};if(r==="marketplace_server_mutation"){s=l.actionContentBlob;var v="";if(s!=null){t=((u=JSON.parse(s))!=null?u:{}).marketplace_cta_type;typeof t==="string"?v=t:c("FBLogger")("messenger_web_product").mustfix("blob marketplace_cta_type is not a valid string type")}return{onPress:function(){return b((i||(i=d("I64"))).of_string(j),v)},type:"action"}}return{type:"unimplemented"}};return a},[e,b,f,h,q,o,p,j])}g.marketplaceCta=e;g.useMWLSMarketplaceCtaParser=a}),98);
__d("useMWLSInThreadBannerCtaParser",["useMWCMMemberRequestsCtaParser.react","useMWLSAdContextCtaParser","useMWLSMarketplaceCtaParser"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("useMWLSMarketplaceCtaParser").useMWLSMarketplaceCtaParser(),b=c("useMWLSAdContextCtaParser")(),e=c("useMWCMMemberRequestsCtaParser.react")();return function(c,f){var g=f.ctaType;if(d("useMWLSMarketplaceCtaParser").marketplaceCta.has(g))return a(c,f);else if(g==="ads_context")return b(c,f);else if(g==="cm_thread_member_requests_view")return e(c,f);return{type:"unimplemented"}}}g["default"]=a}),98);
__d("MWLSInThreadBannerComponent.react",["GroupsCometChatsEngagementLogger","I64","MWChatInThreadBanner.react","ReQL","ReQLSuspense","react","useInThreadBannerWithCta","useMWLSEnsureAdContextExists","useMWLSEnsureInThreadBannerExists","useMWLSInThreadBannerCtaParser","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function l(a){var b=a.banner,e=a.impressionRef;a=a.threadKey;b=d("useInThreadBannerWithCta").useInThreadBannerWithCta(b,a);a=c("useMWLSInThreadBannerCtaParser")();return k.jsx(c("MWChatInThreadBanner.react"),{banner:b,ctaParser:a,impressionRef:e})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.threadKey;c("useMWLSEnsureInThreadBannerExists")();c("useMWLSEnsureAdContextExists")();var e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.in_thread_banner).getKeyRange(b)},[e,b],f.id+":56");a=g==null?void 0:g.cta1Type;var j=g==null?void 0:g.cta2Type,m=c("useSinglePartialViewImpression")({onImpressionStart:function(){(g==null?void 0:g.bannerCtaType)==="cm_thread_member_requests_view"&&d("GroupsCometChatsEngagementLogger").log({action:"impression",client_extras:{member_join_request_enabled:"1"},event:"request_to_join_banner",source:"request_to_join_activity_banner",surface:"thread_view",thread_id:(i||(i=d("I64"))).to_string(b)})}});return g==null||a==="proactive_warning_affirmative"||a==="proactive_warning_negative"||j==="proactive_warning_affirmative"||j==="proactive_warning_negative"?null:k.jsx(l,{banner:g,impressionRef:m,threadKey:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatTabInThreadBanner.react",["CometErrorBoundary.react","CometPlaceholder.react","LSMessagingThreadTypeUtil","MWLSInThreadBannerComponent.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.thread;if(d("LSMessagingThreadTypeUtil").isSecure(a.threadType)||d("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType))return null;else return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:i.jsx(c("MWLSInThreadBannerComponent.react"),{threadKey:a.threadKey})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUnsendNUXReceiverBanner.react",["fbt","ix","FDSSkittleIcon.react","JSResourceForInteraction","MDSRow.react","MDSRowItem.react","MWXText.react","TetraButton.react","fbicon","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=c("JSResourceForInteraction")("MWChatUnsendNUXInterstitialDialog.react").__setRef("MWChatUnsendNUXReceiverBanner.react"),m={button:{flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",$$css:!0},card:{backgroundColor:"xcrg951",boxShadow:"x7m3og9",position:"x10l6tqk",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0},imageRow:{paddingTop:"x1nn3v0j",$$css:!0}};function a(a){var b,e=a.onDismiss,f=a.onView;a=h._("__JHASH__7PesNdiLm6N__JHASH__");var g=h._("__JHASH__jjSY-Fh1rGw__JHASH__"),j={},n=c("useMWXLazyDialog")(l),o=n[0],p=function(){return o(j,function(){})};return k.jsxs("div",{className:"xcrg951 x7m3og9 x10l6tqk xh8yej3 x1vjfegm",children:[k.jsxs(n=c("MDSRow.react"),{paddingHorizontal:12,paddingTop:12,children:[k.jsx(b=c("MDSRowItem.react"),{xstyle:m.imageRow,children:k.jsx(c("FDSSkittleIcon.react"),{color:"gray",icon:d("fbicon")._(i("685851"),16),size:36})}),k.jsxs(b,{expanding:!0,children:[k.jsx(n,{paddingHorizontal:0,paddingTop:0,children:k.jsx(b,{children:k.jsx(c("MWXText.react"),{color:"primary",type:"headline4",children:a})})}),k.jsx(n,{paddingHorizontal:0,paddingTop:8,children:k.jsx(b,{children:k.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:g})})})]})]}),k.jsxs(n,{paddingHorizontal:12,paddingTop:8,paddingVertical:12,wrap:"forward",children:[k.jsx(b,{xstyle:m.button,children:k.jsx(c("TetraButton.react"),{label:h._("__JHASH__W_KwwnBzw9K__JHASH__"),onPress:function(){p();return f()},type:"secondary"})}),k.jsx(b,{xstyle:m.button,children:k.jsx(c("TetraButton.react"),{label:h._("__JHASH__CqytfJoYvSJ__JHASH__"),onPress:e,type:"secondary"})})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("isMessageUnsentInLastTenSeconds",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return Date.now()-(h||(h=d("I64"))).to_float((a=a.unsentTimestampMs)!=null?a:(h||(h=d("I64"))).zero)<=1e4}g["default"]=a}),98);
__d("useMessengerUnsendNUXQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4823686477743600"}),null);
__d("useMessengerUnsendNUXQuery.graphql",["useMessengerUnsendNUXQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],c=[{kind:"Variable",name:"nux_id",variableName:"id"}],d={alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useMessengerUnsendNUXQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useMessengerUnsendNUXQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("useMessengerUnsendNUXQuery_facebookRelayOperation"),metadata:{},name:"useMessengerUnsendNUXQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useMessengerUnsendNUX",["CometDismissFBNuxMutation","CometLogImpressionFBNuxMutation","CometRelay","RelayHooks","promiseDone","react","useMessengerUnsendNUXQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback,k=h!==void 0?h:h=b("useMessengerUnsendNUXQuery.graphql");function a(a){var b=d("RelayHooks").useRelayEnvironment(),e=j(function(e){c("promiseDone")(d("CometRelay").fetchQuery(b,k,{id:a}).toPromise(),function(a){a=(a=a==null?void 0:(a=a.nux)==null?void 0:a.should_show)!=null?a:!1;e(a)},null)},[b,a]),f=j(function(){d("CometDismissFBNuxMutation").commit(b,a)},[b,a]),g=j(function(){d("CometLogImpressionFBNuxMutation").commit(b,a)},[b,a]);return[e,f,g]}g["default"]=a}),98);
__d("MWChatUnsendNUXReceiver.react",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MWChatUnsendNUXReceiverBanner.react","MWLSThread","MWPActor.react","MWThreadKey.react","ReQL","isMessageUnsentInLastTenSeconds","react","useMessengerUnsendNUX","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;var l=b.useCallback,m=b.useRef,n=b.useState;function a(){var a=d("MWPActor.react").useActor(),b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),e=d("MWLSThread").useThread(b,function(a){return a.threadType});e=e!=null&&d("LSMessagingThreadTypeUtil").isDiscoverableChannel(e);var f=(h||(h=c("useReStore")))(),g=n(!1),j=g[0],o=g[1],p=m(!1),q=m(!1),r=m();g=c("useMessengerUnsendNUX")(8568);var s=g[0],t=g[1],u=g[2],v=l(function(){var a=r.current;if(a!=null){a();r.current=void 0;return}},[]);g=l(function(){q.current=!0;t();v();return o(!1)},[t,v]);var w=l(function(a){var b=!j&&!p.current;if(b&&c("isMessageUnsentInLastTenSeconds")(a)){p.current=!0;return s(function(a){p.current=!1;if(a)return o(!0);else{v();q.current=!0;return}})}},[j,s,v]);d("Int64Hooks").useEffectInt64(function(){if(q.current)return;r.current=d("ReQL").fromTableAscending(f.tables.messages).getKeyRange(b).filter(function(b){if(b.isUnsent)return!(i||(i=d("I64"))).equal(b.senderId,a);else return!1}).subscribe(function(a,b){b.operation!=="delete"&&w(b.value)});return function(){v();if(j&&!q.current)return u()}},[f,a,j,u,w,b,v]);if(j&&!e)return k.jsx(c("MWChatUnsendNUXReceiverBanner.react"),{onDismiss:g,onView:g});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUnsendNUXSender.react",["I64","JSResourceForInteraction","MWPActor.react","MWThreadKey.react","ReQL","isMessageUnsentInLastTenSeconds","react","useMWXLazyDialog","useMessengerUnsendNUX","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;j||(j=d("react"));b=j;var k=b.useCallback,l=b.useEffect,m=b.useRef;function a(){var a=d("MWPActor.react").useActor(),b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),e=(h||(h=c("useReStore")))(),f=m(!1),g=m(!1),j=m(!1),n=m(),o=c("useMessengerUnsendNUX")(8598),p=o[0],q=o[1],r=k(function(){var a=n.current;if(a!=null){a();n.current=void 0;return}},[]),s=k(function(){if(!j.current){j.current=!0;r();return q()}},[]);o=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatUnsendNUXSenderDialog.react").__setRef("MWChatUnsendNUXSender.react"));var t=o[0],u=k(function(a){var b=!f.current&&!g.current;if(b&&c("isMessageUnsentInLastTenSeconds")(a)){f.current=!0;return p(function(a){f.current=!1,a?(t({onView:s},function(){}),g.current=!0):(r(),j.current=!0)})}},[a,r]);l(function(){n.current=d("ReQL").fromTableAscending(e.table("messages")).getKeyRange(b).filter(function(b){return b.isUnsent&&(i||(i=d("I64"))).equal(b.senderId,a)}).subscribe(function(a,b){b.operation!=="delete"&&u(b.value)});return r},[b,u,r]);return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInChatTabContextProvider.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=e(!1);function a(){return j(k)}function b(a){a=a.children;return i.jsx(k.Provider,{value:!0,children:a})}b.displayName=b.name+" [from "+f.id+"]";g.useInChatTab=a;g.InChatTabContextProvider=b}),98);
__d("MWPNewMessageAnnouncementForScreenReaders.react",["fbt","CometAccessibilityAnnouncementForDynamicContent.react","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSMessageReplySourceTypeV2","LSMessagingThreadTypeUtil","MWPActor.react","MWPForwardedContent","MWPMessageHasAttachment","MessagingAttachmentType","Promise","ReQL","ReQLSuspense","ServerTime","clearTimeout","cr:2472","promiseDone","react","setTimeout","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=k||(k=d("react"));e=k;var o=e.useCallback,p=e.useEffect,q=e.useRef,r=e.useState;function s(a){var b=a.message;a=a.outgoing;b=d("MWPForwardedContent").useTitle(b,a);return h._("__JHASH__Q9FyIHvWIxM__JHASH__",[h._param("forward title",b)])}function t(a){var b=a.message,e=a.participant;a=a.sender;var f=d("MWPActor.react").useActor();f=(l||(l=d("I64"))).equal(a.id,f);var g=b.replySourceTypeV2!=null&&(l||(l=d("I64"))).equal(b.replySourceTypeV2,(m||(m=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD));e=(e=(e=e==null?void 0:e.nickname)!=null?e:a.firstName)!=null?e:a.name;if(g)return n.jsx(s,{message:b,outgoing:f});a=b.replySnippet;if(a!=null)return h._("__JHASH__LPdQYmdaw5d__JHASH__",[h._param("reply snippet",a)]);else if(f)return h._("__JHASH__1b0bN0cduWX__JHASH__");else return h._("__JHASH__3ymXOGN3z8-__JHASH__",[h._param("name of sender",e)])}function u(a){return(l||(l=d("I64"))).equal(a.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))}function v(a){a=a.message;a=a;var b=(j||(j=c("useReStore")))(),e=a.messageId,g=a.threadKey;a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.tables.attachments).getKeyRange(g,e)},[b,e,g],f.id+":128");if(a.length===0)return null;if(a.length>1)return a.every(u)?h._("__JHASH__mLcLGv6kQjM__JHASH__",[h._param("count of images, greater than or equal to 2",String(a.length))]):null;a=a[0];var i=a.accessibilitySummaryText,k=a.attachmentType,o=a.filename;a=a.titleText;if((l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return n.jsxs(n.Fragment,{children:[h._("__JHASH__CsGZwNmXaIO__JHASH__"),a!=null?h._("__JHASH__tk2ipgOtBcG__JHASH__",[h._param("title of image",a)]):null]});else if((l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__0rNBSLJGEDI__JHASH__");else if((l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)))return h._("__JHASH__456qLg2FzOf__JHASH__");else if((l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return n.jsxs(n.Fragment,{children:[h._("__JHASH__0TMOPValyqo__JHASH__"),i!=null&&i!==""?h._("__JHASH__z9hWNeIESIs__JHASH__",[h._param("title of sticker",i)]):null]});else if((l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)))return h._("__JHASH__sBZdmUKngae__JHASH__");else if((l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)))return n.jsxs(n.Fragment,{children:[h._("__JHASH__3lrC4KV5Ban__JHASH__"),o!=null?h._("__JHASH__120leC-bvKi__JHASH__",[h._param("name of file",o)]):null]});else return h._("__JHASH__PpAv-1cm1Lu__JHASH__")}v.displayName=v.name+" [from "+f.id+"]";function w(a){var e=a.message,f=a.participant,g=a.sender;a=a.threadType;var h=r(!1),i=h[0],j=h[1];p(function(){var a=c("setTimeout")(function(){return j(!0)},100);return function(){c("clearTimeout")(a)}},[]);if(!i)return null;h=d("LSMessagingThreadTypeUtil").isSecure(a);i=e.text!=null&&b("cr:2472")!=null?b("cr:2472").unvault(e.text):e.text;return n.jsxs(c("CometAccessibilityAnnouncementForDynamicContent.react"),{children:[n.jsx(t,{message:e,participant:f,sender:g}),i!=null?i:null,c("MWPMessageHasAttachment")(e)&&!h?n.jsx(v,{message:e}):null]})}w.displayName=w.name+" [from "+f.id+"]";function x(a,e){var f=(j||(j=c("useReStore")))(),g=d("MWPActor.react").useActor(),h=q(d("ServerTime").getMillis()),k=e.threadKey;d("Int64Hooks").useEffectInt64(function(){return d("ReQL").fromTableAscending(f.table("messages")).getKeyRange(k).subscribe(function(e,g){if(g.operation!=="add")return;var j=g.value;(l||(l=d("I64"))).to_float(j.timestampMs)>h.current&&(h.current=(l||(l=d("I64"))).to_float(j.timestampMs),c("promiseDone")((i||(i=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.table("contacts")).getKeyRange(j.senderId)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.table("participants")).getKeyRange(j.threadKey,j.senderId))]),function(b){var c=b[0];b=b[1];if(c!=null)return a(j,c,b)}))})},[f,g,a,k])}function a(a){a=a.thread;var b=a.threadType,e=r(null),f=e[0],g=e[1];e=o(function(a,e,f){if((l||(l=d("I64"))).equal(a.authorityLevel,(m||(m=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return g(function(){return n.jsx(w,{message:a,participant:f,sender:e,threadType:b})})},[b]);x(e,a);return f}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPublicChatMemberRequestsBanner.react",["fbt","ix","CometContextualMessage.react","CometErrorBoundary.react","CometPlaceholder.react","FBLogger","FDSSkittleIcon.react","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","LSVerifyContactRowExistsStoredProcedure","MWCMThreadTypes.react","MWInboxInfoPanelContext.react","Promise","ReQL","ReQLSuspense","TetraButtonGroup.react","cr:4923","fbicon","promiseDone","react","usePrevious","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=m||(m=d("react"));e=m;var o=e.useEffect,p=e.useState;function q(a){if(a.length===0){c("FBLogger")("messenger_comet").mustfix("No member requests?");return void 0}else if(a.length===1){var b;return h._("__JHASH__bWQyKZ80V0d__JHASH__",[h._param("name",((b=a[0][1])==null?void 0:b.name)||"")])}else{b=a.length-1;return h._("__JHASH__ZU2Oj6CpDJW__JHASH__",[h._plural(b,"number"),h._param("name",((b=a[0][1])==null?void 0:b.name)||"")])}}function r(a){var e=a.memberRequests,f=a.setWasClosed;a=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext();var g=a.isOnMemberRequestsPageRef,j=a.pushMemberRequestsPage,k=a.setShouldNavToMemberRequests,l=a.setThreadInfoVisible,m=a.threadInfoVisible;return n.jsx("div",{className:"xcrg951 x7m3og9 x1vjfegm",children:n.jsx(c("CometContextualMessage.react"),{addOnPrimary:n.jsx(c("TetraButtonGroup.react"),{primary:{label:h._("__JHASH__N4aWocdoeuZ__JHASH__",[h._plural(e.length)]),onPress:function(){g.current!==!0&&(m===!0?j():(k(!0),l(!0))),f(!0)},padding:"wide",type:"secondary"}}),body:q(e),headline:h._("__JHASH__wwx2l6C4JXf__JHASH__",[h._plural(e.length,"number")]),icon:n.jsx(c("FDSSkittleIcon.react"),{color:"gray",icon:b("cr:4923")!=null?b("cr:4923"):d("fbicon")._(i("497883"),16),size:36}),level:4,onClose:function(){f(!0)}})})}r.displayName=r.name+" [from "+f.id+"]";function s(a){var e=a.threadKey;a=p(!1);var g=a[0],h=a[1],i=(l||(l=c("useReStore")))(),m=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(i.tables.group_membership_approval_requests).getKeyRange(e).map(function(a){var b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(i.tables.contacts).getKeyRange(a.contactId),f.id+":175");return[a,b]})},[i,e],f.id+":170"),q=m.length,s=c("usePrevious")(q);a=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext();var t=a.isOnMemberRequestsPageRef;o(function(){t.current!==!0&&s!==null&&q>s&&h(!1)},[q,s,h,t]);o(function(){var a=m.map(function(a){return a[0].contactId});c("promiseDone")(i.runInTransaction(function(e){return(j||(j=b("Promise"))).all(a.map(function(a){return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(e),{authorityLevel:(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:k.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:k.ofNumber(c("LSContactIdType").FBID),contactType:k.ofNumber(c("LSContactType").USER),contactViewerRelationship:k.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:k.ofNumber(c("LSContactGender").UNKNOWN),id:a,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:k.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})}))},"readwrite"))},[i,m]);return!g&&m.length>0?n.jsx(r,{memberRequests:m,setWasClosed:h}):null}s.displayName=s.name+" [from "+f.id+"]";function t(a){a=a.thread;var b=d("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType),c=d("LSThreadBitOffset").has(66,a)&&!d("MWCMThreadTypes.react").isStandardCMThread(a.threadType);return c&&b?n.jsx(s,{threadKey:a.threadKey}):null}t.displayName=t.name+" [from "+f.id+"]";function a(a){a=a.thread;return n.jsx(c("CometErrorBoundary.react"),{children:n.jsx(c("CometPlaceholder.react"),{fallback:null,children:n.jsx(t,{thread:a})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPublicChatsNUXQuickPromotionQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6098288313524910"}),null);
__d("MWPublicChatsNUXQuickPromotionQuery$Parameters",["MWPublicChatsNUXQuickPromotionQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWPublicChatsNUXQuickPromotionQuery_facebookRelayOperation"),metadata:{},name:"MWPublicChatsNUXQuickPromotionQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWPublicChatsNUXQuickPromotionContainer.entrypoint",["JSResourceForInteraction","MWPublicChatsNUXQuickPromotionQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{queryRef:{parameters:c("MWPublicChatsNUXQuickPromotionQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWPublicChatsNUXQuickPromotion.react").__setRef("MWPublicChatsNUXQuickPromotionContainer.entrypoint")};g["default"]=a}),98);
__d("MWPublicChatNUXDialog.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","LSMessagingThreadTypeUtil","MWPublicChatsNUXQuickPromotionContainer.entrypoint","react","useCometRelayEntrypointContextualEnvironmentProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){a=a.thread;var b=k(),e=b[0],f=b[1],g=c("useCometRelayEntrypointContextualEnvironmentProvider")(),h=d("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType);j(function(){e==null&&h&&f(function(){return d("CometRelay").loadEntryPoint(g,c("MWPublicChatsNUXQuickPromotionContainer.entrypoint"),{})});return function(){e==null?void 0:e.dispose()}},[e,g,h]);if(e!=null)return i.jsx(c("CometErrorBoundary.react"),{children:i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:e,props:{}})})});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatTabThreadLinkHashContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=e(null);function a(a){var b=a.children;a=a.threadLinkHash;return i.jsx(k.Provider,{value:(a=a)!=null?a:null,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(k)}g.MWV2ChatTabThreadLinkHashContextProvider=a;g.useGetChatTabThreadLinkHash=b}),98);
__d("XPlatWebAudioPlaybackContextProvider.react",["cr:6234","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){a=a.children;return a}a.displayName=a.name+" [from "+f.id+"]";e=(c=b("cr:6234")==null?void 0:b("cr:6234").MWPAudioPlaybackContextProvider)!=null?c:a;d=e;g["default"]=d}),98);
__d("useMAWCanThreadBeCutover",["LSContactBitOffset","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("ReQLSuspense").useArray(function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(b.tables.participants,[]).getKeyRange(a),d("ReQL").fromTableAscending(b.tables.contacts,["capabilities","capabilities2"]))},[b,a],f.id+":26");return e.every(function(a){a[0];a=a[1];return a!=null&&d("LSContactBitOffset").has(75,a)===!0})}g["default"]=a}),98);
__d("useMAWCanThreadBeCutoverOnDemand",["LSContactBitOffset","LSMessagingThreadTypeUtil","MAWThreadCutover","ReQL","ReQLSuspense","useMAWCanThreadBeCutover","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.contacts,d("LSContactBitOffset").contactCapabilityFields).getKeyRange(a)},[e,a],f.id+":33");g=g!=null&&d("LSContactBitOffset").has(76,g);var i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.threads,["threadType"]).getKeyRange(a)},[e,a],f.id+":50");i=i?d("LSMessagingThreadTypeUtil").isOpenOneToOne(i.threadType):!1;b=((b=(b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.messages_ranges_v2__generated,["minMessageId"]).getKeyRange(a)},[e,a],f.id+":62"))==null?void 0:b.minMessageId)!=null?b:"")==="";var j=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.mi_act_mapping_table.index("jid")).getKeyRange(a)},[e,a],f.id+":68");j=j!=null;var k=d("MAWThreadCutover").useIsCutoverOpenThread(a),l=d("MAWThreadCutover").useIsCutoverSecureThread(a);k=k||l;l=c("useMAWCanThreadBeCutover")(a);return g&&i&&!b&&!j&&!k&&l}g["default"]=a}),98);
__d("useMWPThreadPointQueryOneToOneCutoverThreadThenNavigate",["I64","LSFactory","LSPlatformWaitForTaskCompletion","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWJids","MAWJobDefinitions","MAWTimedJob","QPLUserFlow","ReQL","WAJobOrchestratorTypes","WALoggerDeferred","asyncToGeneratorRuntime","promiseDone","qpl","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Thread-Point-Query][OD-Cutover] LSThreadPointQueryAndRestoreMessagesWithJID finished successfully for ThreadKey: ",""]);k=function(){return a};return a}var l=(h||d("react")).useCallback;function a(){var a=c("useAsyncReStore")();return l(function(e){var f=e.contactId,g=e.isOnDemandCutover,h=e.navigationApi;c("promiseDone")(a,function(a){var e=d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table.index("jid")).getKeyRange(f);e.subscribe(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,g){b=g.operation;if(b==="delete")return;g=(yield d("ReQL").firstAsync(e));if(g==null)return;b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(g.serverThreadKey)));if(b==null)return;g=b.clientThreadKey;var j=b.threadKey;b=b.threadType;c("promiseDone")(d("MAWTimedJob").TimedUIJobStarters.waitUntilPersisted(d("MAWJobDefinitions").createStartJobInfo("getDevices",{ignoreDhash:!1,reason:"thread-point-querying-1-to-1-thread",scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},users:new Set().add(d("MAWJids").toUserJid((i||(i=d("I64"))).to_string(f)))})));h.openTabOrInbox({clientThreadKey:g,threadKey:j,threadType:b},"preCutoverThread")});return function(a,b){return g.apply(this,arguments)}}());c("LSPlatformWaitForTaskCompletion")(a,function(a){return c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(a),{waJid:f})},"readwrite").then(function(){c("promiseDone")(d("WALoggerDeferred").LOG(k(),(i||(i=d("I64"))).to_string(f))),g===!0&&c("QPLUserFlow").endSuccess(c("qpl")._(1056847893,"505"))})["catch"](function(a){a="[Thread-Point-Query][OD-Cutover] LSThreadPointQueryAndRestoreMessagesWithJID finished with an error for ThreadKey: "+(i||(i=d("I64"))).to_string(f)+"\nError: "+a;c("promiseDone")(d("WALoggerDeferred").LOG(j(),a));g===!0&&c("QPLUserFlow").endFailure(c("qpl")._(1056847893,"505"),a)})})},[a])}g["default"]=a}),98);
__d("useMAWTriggerOnDemandCutover",["I64","Int64Hooks","LSFactory","LSPlatformWaitForTaskCompletion","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","QPLUserFlow","WALoggerDeferred","promiseDone","qpl","react","useMAWCanThreadBeCutoverOnDemand","useMWNavigation","useMWPThreadPointQueryOneToOneCutoverThreadThenNavigate","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[OD-Cutover] Cutover finished successfully for ThreadKey: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[OD-Cutover] Triggering cutover for ThreadKey: ",""]);m=function(){return a};return a}b=j||d("react");var n=b.useRef,o=b.useState;function a(a){var b=a.threadKey,e=a.triggerSource,f=(h||(h=c("useReStore")))(),g=c("useMAWCanThreadBeCutoverOnDemand")(b),j=n(null);a=o(!1);var p=a[0],q=a[1],r=c("useMWNavigation")(),s=c("useMWPThreadPointQueryOneToOneCutoverThreadThenNavigate")();d("Int64Hooks").useEffectInt64(function(){var a=j.current==null||j.current!==g;a&&g&&(j.current=g,q(!0),c("promiseDone")(d("WALoggerDeferred").LOG(m(),(i||(i=d("I64"))).to_string(b))),c("QPLUserFlow").start(c("qpl")._(1056847893,"505")),e==="inbox"?s&&s({contactId:b,isOnDemandCutover:!0,navigationApi:r}):c("LSPlatformWaitForTaskCompletion")(f,function(a){return c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(a),{waJid:b})},"readwrite").then(function(){c("promiseDone")(d("WALoggerDeferred").LOG(l(),(i||(i=d("I64"))).to_string(b))),c("QPLUserFlow").endSuccess(c("qpl")._(1056847893,"505"))})["catch"](function(a){a="[OD-Cutover] Cutover finished with an error for ThreadKey: "+(i||(i=d("I64"))).to_string(b)+".\nError: "+a;c("promiseDone")(d("WALoggerDeferred").LOG(k(),a));c("QPLUserFlow").endFailure(c("qpl")._(1056847893,"505"),a)})["finally"](function(){q(!1)}))},[g,f,r,b,s,e]);return p}g["default"]=a}),98);
__d("useMWChatStateUpdateThreadKeyDescriptorIfAuthoritative",["Int64Hooks","LSAuthorityLevel","LSIntEnum","MWChatStateActions","MWChatStateV2.react"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){e===void 0&&(e={shouldClearOldHiddenTab:!1,shouldUpdateThreadType:!1});var f=d("MWChatStateV2.react").useDispatch(),g=a==null?void 0:a.threadKey,i=a==null?void 0:a.clientThreadKey,j=a==null?void 0:a.threadType,k=a==null?void 0:a.authorityLevel;d("Int64Hooks").useEffectInt64(function(){g!=null&&k!=null&&(h||(h=d("LSIntEnum"))).toNumber(k)>=c("LSAuthorityLevel").AUTHORITATIVE&&f(d("MWChatStateActions").updateThreadKeyDescriptor(b.tabId,g,i,e.shouldUpdateThreadType?j:void 0,{shouldClearOldHiddenTab:e.shouldClearOldHiddenTab}))},[b.tabId,g,i,f,k,j,e.shouldUpdateThreadType,e.shouldClearOldHiddenTab])}g["default"]=a}),98);
__d("MWV2ChatTab.react",["CometErrorBoundary.react","CometPageletWithDiv.react","CometTransientDialogProvider.react","I64","Int64Hooks","InteractionTracingMetrics","JSResourceForInteraction","LSFactory","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","LSThreadBitOffset","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWInThreadBannerNuxReqCondWrapper.react","MAWThreadCutover","MWChatConnectionStatusCard.react","MWChatInteraction","MWChatStateContext","MWChatTabInThreadBanner.react","MWInChatTabContextProvider.react","MWInboxThreadMessagesSpinner.react","MWJewelEntrypoint","MWOpenAndSecureThreadView.react","MWPNewMessageAnnouncementForScreenReaders.react","MWPThreadIsPage.react","MWPThreadThemeProvider.react","MWPVisibleMessageContext.react","MWThreadKey.react","MWV2ChatTabHeaderLoadingWithGlimmers.react","MWV2ChatTabLoadingWithGlimmers.react","MWV2ChatTabSSR","MWV2ChatTabThreadLinkHashContext.react","MWV2ComposerHasContentContext.react","MWV2EnsureThatChatTabExists","MWV2ErrorComposer.react","MWV2FileDropzone.react","MWV2TabContainer","MetaConfig","ReQL","ReQLSuspense","XPlatWebAudioPlaybackContextProvider.react","cr:1113","cr:4346","cr:5001","cr:6111","cr:7654","cr:8060","cr:8061","cr:8673","cr:8674","cr:8675","cr:8676","emptyFunction","gkx","lazyLoadComponent","promiseDone","react","stylex","useC4gEngagementImpressionLogging","useMAWTriggerOnDemandCutover","useMWChatStateUpdateThreadKeyDescriptorIfAuthoritative","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));e=k;var m=e.memo,n=e.useLayoutEffect,o=e.useRef,p=(e=b("cr:7654"))!=null?e:l.Fragment,q=(e=b("cr:8061"))!=null?e:function(a,b){return[!1,!0,null]},r=(e=b("cr:1113"))!=null?e:c("emptyFunction"),s=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWInboxPinnedMessagesBanner.react").__setRef("MWV2ChatTab.react"));function t(a){var b=a.children,e=a.threadKey,g=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.threads).getKeyRange(e)},[g,e],f.id+":122");if(a==null)return;return b(a)}t.displayName=t.name+" [from "+f.id+"]";function u(a){var e=a.otherContactIdForDefaultE2eeThread,f=a.shouldUseDefaultE2eeOneToOne,g=a.tab,h=a.thread;a=a.threadLinkHash;var i=h.themeFbid,j=h.threadKey,k=h.threadSubtype,m=h.threadType;r({groupThreadSubtype:k,threadKey:j,threadType:m});c("useC4gEngagementImpressionLogging")({threadKey:j,threadType:m});k=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(m);var q=d("LSThreadBitOffset").has(167,h),u=!d("LSThreadBitOffset").has(56,h),v=d("LSMessagingThreadTypeUtil").isSecure(m),w=o({getScrollAreaElement:c("emptyFunction"),jumpToMostRecentMessage:c("emptyFunction"),restoreScrollPosition:c("emptyFunction")}),x=d("MWChatStateContext").useChatState(function(a){return a.focusedTabId});n(function(){if(x!==g.tabId){var a;(a=w.current)==null?void 0:a.restoreScrollPosition()}},[x,g.tabId]);k=k&&d("LSThreadBitOffset").has(106,h)&&c("MetaConfig")._("105");v=l.jsxs(l.Fragment,{children:[g.tabId!==x?null:l.jsx(c("MWPNewMessageAnnouncementForScreenReaders.react"),{thread:h}),v?l.jsx(c("MAWInThreadBannerNuxReqCondWrapper.react"),{threadKey:j}):null,l.jsx(c("MWChatConnectionStatusCard.react"),{}),l.jsx(c("MWChatTabInThreadBanner.react"),{thread:h}),k&&l.jsx(s,{thread:h}),l.jsxs(d("MWV2FileDropzone.react").MWV2FileDropzone,{isMediaOnly:u,thread:h,children:[l.jsx(c("MWOpenAndSecureThreadView.react"),{entryPoint:"popup_chat_box",messageListRef:w,thread:h}),l.jsx(c("CometErrorBoundary.react"),{fallback:function(){return l.jsx(c("MWV2ErrorComposer.react"),{})},children:l.jsx(d("MWV2ChatTabThreadLinkHashContext.react").MWV2ChatTabThreadLinkHashContextProvider,{threadLinkHash:a,children:l.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWComposer",children:b("cr:8676")!=null?l.jsx(b("cr:8676"),{afterSendMessage:function(){var a;(a=w.current)==null?void 0:a.jumpToMostRecentMessage()},isPreviewThread:!1,threadKey:j,threadType:m}):b("cr:8675")!=null?l.jsx(b("cr:8675"),{afterSendMessage:function(){var a;(a=w.current)==null?void 0:a.jumpToMostRecentMessage()},isPreviewThread:!1,threadKey:j,threadType:m}):b("cr:8673")!=null&&l.jsx(t,{threadKey:j,children:function(a){return l.jsx(b("cr:8673").MWChatComposerGating,{afterSendMessage:function(){var a;(a=w.current)==null?void 0:a.jumpToMostRecentMessage()},isPreviewThread:!1,thread:a})}})})})})]})]});k=b("cr:6111")!=null&&q?l.jsx(b("cr:6111"),{tab:g,thread:h,children:v}):null;u=function(a){return f?l.jsx(l.Fragment,{children:a}):l.jsx(d("MWThreadKey.react").MWThreadKeyProvider,{id:j,children:a})};a=b("cr:5001")==null?void 0:b("cr:5001").MWAdmodOnboardingSuggestedActionsContextProvider;q=c("MWJewelEntrypoint").entrypoint==="ONBOARDING_SOFTBLOCK";k=k!=null?k:f&&b("cr:8060")!=null?l.jsx(b("cr:8060"),{otherContactIdForDefaultE2eeThread:e,tab:g}):l.jsxs(c("MWV2TabContainer"),{tab:g,threadKey:j,children:[l.jsxs(d("CometPageletWithDiv.react").Placeholder,{fallback:l.jsx(c("MWV2ChatTabHeaderLoadingWithGlimmers.react"),{tab:g}),name:"MWChatTabHeader",children:[b("cr:4346")!=null?l.jsx(b("cr:4346"),{tab:g,thread:h}):null,b("cr:8674")!=null?l.jsx(b("cr:8674"),{tab:g,threadKey:j,threadType:m}):null]}),l.jsx(d("MWV2ChatTabSSR").Placeholder,{fallback:l.jsx(c("MWInboxThreadMessagesSpinner.react"),{}),children:g.doNotBlockWithEBUpsell!==!0&&q?l.jsx(p,{children:v}):v})]});e=function(a){return c("gkx")("24125")?l.jsx(c("CometTransientDialogProvider.react"),{children:l.jsx(c("MWPThreadThemeProvider.react"),{themeFbid:i,children:a})}):l.jsx(c("MWPThreadThemeProvider.react"),{themeFbid:i,children:l.jsx(c("CometTransientDialogProvider.react"),{children:a})})};return l.jsx(d("MWPThreadIsPage.react").Provider,{threadKey:j,children:u(l.jsx(c("XPlatWebAudioPlaybackContextProvider.react"),{children:l.jsx(d("MWPVisibleMessageContext.react").MWPVisibleMessageContextProvider,{children:e(l.jsx(d("MWV2ComposerHasContentContext.react").MWV2ComposerHasContentContextProvider,{children:l.jsx(d("MWInChatTabContextProvider.react").InChatTabContextProvider,{children:a!=null?l.jsx(a,{children:k}):k})}))})}))})}u.displayName=u.name+" [from "+f.id+"]";function v(a,b){var e=d("MAWThreadCutover").useIsDualThreadCutoverOpenThread(a),g=(d("MAWThreadCutover").useIsCutoverOpenThread(a)||b!=null&&d("LSThreadBitOffset").has(128,b))&&!e&&c("gkx")("24126");b=d("MAWThreadCutover").useGetCutoverSecureThreadKey((j||(j=d("I64"))).to_string(a));var i=c("gkx")("24126")?b:null,k=(h||(h=c("useReStore")))();d("Int64Hooks").useEffectInt64(function(){if(!g)return;if(i==null)c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(k,function(b){return c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(b),{waJid:a})},"readwrite"));else{var b=d("MWChatInteraction").get((j||(j=d("I64"))).to_string(a));if(b!=null){var e;d("MWChatInteraction").set(i,b);(e=c("InteractionTracingMetrics")).addMetadata(b,"thread_id",i);e.addMetadata(b,"thread_type",15..toString());e.addMetadata(b,"is_secure",!0);e.addMetadata(b,"redirectedFromPreCutover",1)}}},[i,k,g,a]);b=d("ReQLSuspense").useFirst(function(){return i!=null?d("ReQL").fromTableAscending(k.tables.threads).getKeyRange((j||(j=d("I64"))).of_string(i)):d("ReQL").empty()},[k,i],f.id+":445");e=e?void 0:b;return e}var w={hidden:{display:"x1s85apg",$$css:!0}};function a(a){var b,e=a.isMinimized;e=e===void 0?!1:e;var g=a.tab;a=a.threadKeyDescriptor;var j=(h||(h=c("useReStore")))(),k=a.threadKey,m=a.clientThreadKey,n=a.threadLinkHash;d("MWV2EnsureThatChatTabExists").useMWV2EnsureThatChatTabExists(k,a.threadType,m);a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(j.tables.threads,["folderName","themeFbid","threadKey","threadType","parentThreadKey","threadSubtype","threadName","authorityLevel","cannotUnsendReason","threadStatus","cannotReplyReason","clientThreadKey"].concat(d("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(k)},[j,k],f.id+":483");var o=d("ReQLSuspense").useFirst(function(){return m!=null?d("ReQL").fromTableAscending(j.tables.threads.index("clientThreadKey")).getKeyRange(m):d("ReQL").empty()},[j,m],f.id+":501"),p=v(k,a);a=(p=(p=p)!=null?p:a)!=null?p:o;c("useMWChatStateUpdateThreadKeyDescriptorIfAuthoritative")(a,g,{shouldClearOldHiddenTab:!0,shouldUpdateThreadType:!0});o=q((p=a==null?void 0:a.threadKey)!=null?p:k,a==null?void 0:a.threadType);p=o[0];var r=o[1];o=o[2];b=(b=c("useMAWTriggerOnDemandCutover")({threadKey:(b=a==null?void 0:a.threadKey)!=null?b:k,triggerSource:"chatTab"}))!=null?b:!1;if(a!=null&&d("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)&&!r||b)return e?null:l.jsx(c("MWV2ChatTabLoadingWithGlimmers.react"),{tab:g});return a!=null?l.jsx(d("MWV2ChatTabSSR").Placeholder,{fallback:l.jsx(c("MWV2ChatTabLoadingWithGlimmers.react"),{tab:g}),children:l.jsx("div",{className:(i||(i=c("stylex")))(e?w.hidden:void 0),"data-testid":void 0,children:l.jsx(u,{otherContactIdForDefaultE2eeThread:o,shouldUseDefaultE2eeOneToOne:a!=null&&d("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)&&p,tab:g,thread:a,threadLinkHash:n})})}):null}a.displayName=a.name+" [from "+f.id+"]";e=m(a);g["default"]=e}),98);
__d("MWXIconPencil",["MWXSvgIcon","SVGIcon","cr:9238","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9238")),c("gkx")("23219"));g["default"]=a}),98);
__d("PencilFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{d:"M461.985 1075.58a.938.938 0 0 0-.272-.492l-1.325-1.325a.902.902 0 0 0-1.272 0l-1.003 1.003a.385.385 0 0 0 0 .545l2.075 2.076c.15.15.395.15.545 0l1.003-1.003a.9.9 0 0 0 .249-.805m-11.142 6.423a1.164 1.164 0 0 0-.343.828v1.78c0 .215.175.39.391.39h1.778c.313 0 .608-.122.83-.343l5.887-5.889a.39.39 0 0 0 0-.551l-2.103-2.103a.391.391 0 0 0-.553 0l-5.887 5.888z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("useMAWThreadLastMessageConsistencyLoggingPerformLog",["CometDebounce","I64","Int64Hooks","MAWBridgeSendAndReceive","Promise","WATimeUtils","asyncToGeneratorRuntime","logMessengerWebFalcoEvent","promiseDone","useMWEntrypoint"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("CometDebounce")(c("logMessengerWebFalcoEvent")),k=5;function a(){var a=c("useMWEntrypoint")();return d("Int64Hooks").useCallbackInt64(function(e){var f=e.threadKey,g=e.threadLastActivityTimeMs,p=e.threadLastMessageTimeMs,q=e.threadType;c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(i||(i=d("I64"))).compare(p,g)>-1;c={hasMissingMessage:!c,threadLastActivityTimeMs:i.to_string(g),threadLastMessageTimeMs:i.to_string(p)};try{var e=(yield (h||(h=b("Promise"))).all([d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadLastNumMessagesByServerTs",{numMsgs:k,threadKey:(i||(i=d("I64"))).to_string(f)}),d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadLastNumMessagesBySortOrder",{numMsgs:k,threadKey:i.to_string(f)})])),r=e[0];e=e[1];j({threadKey:f,threadType:q},"thread_and_message_list_last_activity_mismatch",a,babelHelpers["extends"]({},c,{armadilloThreadLastMsgAuthoritativeTs:l(r),armadilloThreadLastMsgTs:m(e),isLastMsgsSetConsistent:n(r,e).toString(),lastNumMsgsByServerTs:o(r),lastNumMsgsBySortOrder:o(e)}))}catch(b){j({threadKey:f,threadType:q},"thread_and_message_list_last_activity_mismatch",a,c)}})())},[a])}function l(a){var b;return((b=a[0])==null?void 0:b.serverTs)!=null?d("WATimeUtils").castUnixTimeToMillisTime(a[0].serverTs).toString():""}function m(a){return(a=(a=a[0])==null?void 0:(a=a.sortOrderMs)==null?void 0:a.toString())!=null?a:""}function n(a,b){b=b.filter(function(a){return a.serverTs!=null});return b.every(function(b,c){return b.msgId===a[c].msgId})}function o(a){a=a.map(function(a){return{msgId:a.msgId,serverTsInMillis:a.serverTs!=null?d("WATimeUtils").castUnixTimeToMillisTime(a.serverTs):"",sortOrderMs:a.sortOrderMs,type:a.type}});return JSON.stringify(a)}g["default"]=a}),98);
__d("useMAWThreadLastMessageConsistencyLogging",["I64","Int64Hooks","MAWLoadingStateOutstandingOfflineQueueSelector","MAWStateContext.react","Promise","ReQL","asyncToGeneratorRuntime","promiseDone","react","useMAWThreadLastMessageConsistencyLoggingPerformLog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).useRef;function a(a){var e=(j||(j=c("useReStore")))(),f=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateOutstandingOfflineQueueSelector").outstandingOfflineQueueSelector()),g=c("useMAWThreadLastMessageConsistencyLoggingPerformLog")(),k=l(null);d("Int64Hooks").useEffectInt64(function(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield (h||(h=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableDescending(e.tables.threads).getKeyRange(a)),d("ReQL").firstAsync(d("ReQL").fromTableDescending(e.tables.messages).getKeyRange(a)),d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(e.tables.reactions).getKeyRange(a).take(20))])),j=c[0],l=c[1];c=c[2];if(l==null||j==null)return;if(f)return;if(k.current===a)return;k.current=a;c=c.reduce(function(a,b){return(i||(i=d("I64"))).max(a,(a=b.reactionCreationTimestampMs)!=null?a:(i||(i=d("I64"))).zero)},(i||(i=d("I64"))).zero);g({threadKey:j.threadKey,threadLastActivityTimeMs:j.lastActivityTimestampMs,threadLastMessageTimeMs:i.max(l.timestampMs,c),threadType:j.threadType})})())},[e,f,g,a])}g["default"]=a}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/yKsQCAUqcFZ/
 */
__d("dexie-4.0.1-alpha.22",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():(b=typeof globalThis!=="undefined"?globalThis:b||self,b.Dexie=c())})(this,function(){var b=function(a,c){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return b(a,c)};function c(a,c){if(typeof c!=="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");b(a,c);function d(){this.constructor=a}a.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d())}var d=function(){d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return d.apply(this,arguments)};function e(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}var f=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:a,g=Object.keys,h=Array.isArray;typeof Promise!=="undefined"&&!f.Promise&&(f.Promise=Promise);function i(a,b){if(typeof b!=="object")return a;g(b).forEach(function(c){a[c]=b[c]});return a}var j=Object.getPrototypeOf,k={}.hasOwnProperty;function l(a,b){return k.call(a,b)}function m(a,b){typeof b==="function"&&(b=b(j(a))),(typeof Reflect==="undefined"?g:Reflect.ownKeys)(b).forEach(function(c){o(a,c,b[c])})}var n=Object.defineProperty;function o(a,b,c,d){n(a,b,i(c&&l(c,"get")&&typeof c.get==="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function p(a){return{from:function(b){a.prototype=Object.create(b.prototype);o(a.prototype,"constructor",a);return{extend:m.bind(null,a.prototype)}}}}var q=Object.getOwnPropertyDescriptor;function r(a,b){var c=q(a,b);return c||(c=j(a))&&r(c,b)}var s=[].slice;function t(a,b,c){return s.call(a,b,c)}function u(a,b){return b(a)}function v(a){if(!a)throw new Error("Assertion Failed")}function aa(a){f.setImmediate?setImmediate(a):setTimeout(a,0)}function ba(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function ca(a,b,c){try{a.apply(null,c)}catch(a){b&&b(a)}}function w(a,b){if(l(a,b))return a[b];if(!b)return a;if(typeof b!=="string"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=w(a,b[d]);c.push(f)}return c}f=b.indexOf(".");if(f!==-1){d=a[b.substr(0,f)];return d===void 0?void 0:w(d,b.substr(f+1))}return void 0}function x(a,b,c){if(!a||b===void 0)return;if("isFrozen"in Object&&Object.isFrozen(a))return;if(typeof b!=="string"&&"length"in b){v(typeof c!=="string"&&"length"in c);for(var d=0,e=b.length;d<e;++d)x(a,b[d],c[d])}else{d=b.indexOf(".");if(d!==-1){e=b.substr(0,d);d=b.substr(d+1);if(d==="")c===void 0?h(a)&&!isNaN(parseInt(e))?a.splice(e,1):delete a[e]:a[e]=c;else{var f=a[e];(!f||!l(a,e))&&(f=a[e]={});x(f,d,c)}}else c===void 0?h(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function da(a,b){typeof b==="string"?x(a,b,void 0):"length"in b&&[].map.call(b,function(b){x(a,b,void 0)})}function ea(a){var b={};for(var c in a)l(a,c)&&(b[c]=a[c]);return b}var fa=[].concat;function ga(a){return fa.apply([],a)}var y="Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ga([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return f[a]}),ha=new Set(y.map(function(a){return f[a]}));function ia(a){var b={};for(var c in a)if(l(a,c)){var d=a[c];b[c]=!d||typeof d!=="object"||ha.has(d.constructor)?d:ia(d)}return b}function ja(a){for(var b in a)if(l(a,b))return!1;return!0}var ka=null;function z(a){ka=new WeakMap();a=la(a);ka=null;return a}function la(a){if(!a||typeof a!=="object")return a;var b=ka.get(a);if(b)return b;if(h(a)){b=[];ka.set(a,b);for(var c=0,d=a.length;c<d;++c)b.push(la(a[c]))}else if(ha.has(a.constructor))b=a;else{c=j(a);b=c===Object.prototype?{}:Object.create(c);ka.set(a,b);for(d in a)l(a,d)&&(b[d]=la(a[d]))}return b}var ma={}.toString;function na(a){return ma.call(a).slice(8,-1)}var oa=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator",pa=typeof oa==="symbol"?function(a){var b;return a!=null&&(b=a[oa])&&b.apply(a)}:function(){return null};function qa(a,b){b=a.indexOf(b);b>=0&&a.splice(b,1);return b>=0}var ra={};function A(a){var b,c,d,e;if(arguments.length===1){if(h(a))return a.slice();if(this===ra&&typeof a==="string")return[a];if(e=pa(a)){c=[];while(d=e.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b==="number"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var sa=typeof Symbol!=="undefined"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},B=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ta(a,b){B=a,ua=b}var ua=function(){return!0},va=!new Error("").stack;function C(){if(va)try{C.arguments;throw new Error()}catch(a){return a}return new Error()}function wa(a,b){var c=a.stack;if(!c)return"";b=b||0;c.indexOf(a.name)===0&&(b+=(a.name+a.message).split("\n").length);return c.split("\n").slice(b).filter(ua).map(function(a){return"\n"+a}).join("")}y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var D=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];y=y.concat(D);var xa={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ya(a,b){this._e=C(),this.name=a,this.message=b}p(ya).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+wa(this._e,2))}},toString:function(){return this.name+": "+this.message}});function za(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function Aa(a,b,c,d){this._e=C(),this.failures=b,this.failedKeys=d,this.successCount=c,this.message=za(a,b)}p(Aa).from(ya);function Ba(a,b){this._e=C(),this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=za(a,this.failures)}p(Ba).from(ya);var Ca=y.reduce(function(a,b){return a[b]=b+"Error",a},{}),Da=ya,E=y.reduce(function(b,c){var d=c+"Error";function a(a,b){this._e=C(),this.name=d,!a?(this.message=xa[c]||d,this.inner=null):typeof a==="string"?(this.message="".concat(a).concat(b?"\n "+b:""),this.inner=b||null):typeof a==="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a)}p(a).from(Da);b[c]=a;return b},{});E.Syntax=SyntaxError;E.Type=TypeError;E.Range=RangeError;var Ea=D.reduce(function(a,b){a[b+"Error"]=E[b];return a},{});function Fa(a,b){if(!a||a instanceof ya||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Ea[a.name])return a;b=new Ea[a.name](b||a.message,a);"stack"in a&&o(b,"stack",{get:function(){return this.inner.stack}});return b}D=y.reduce(function(a,b){["Syntax","Type","Range"].indexOf(b)===-1&&(a[b+"Error"]=E[b]);return a},{});D.ModifyError=Aa;D.DexieError=ya;D.BulkError=Ba;function F(){}function Ga(a){return a}function Ha(a,b){return a==null||a===Ga?b:function(c){return b(a(c))}}function G(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Ia(a,b){return a===F?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?G(d,this.onsuccess):d);e&&(this.onerror=this.onerror?G(e,this.onerror):e);return f!==void 0?f:c}}function Ja(a,b){return a===F?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?G(c,this.onsuccess):c);d&&(this.onerror=this.onerror?G(d,this.onerror):d)}}function Ka(a,b){return a===F?b:function(c){var d=a.apply(this,arguments);i(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var g=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?G(e,this.onsuccess):e);f&&(this.onerror=this.onerror?G(f,this.onerror):f);return d===void 0?g===void 0?void 0:g:i(d,g)}}function La(a,b){return a===F?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ma(a,b){return a===F?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then==="function"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var Na={},Oa=100,Pa=20,Qa=100;y=typeof Promise==="undefined"?[]:function(){var a=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[a,j(a),a];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,j(b),a]}();var Ra=y[0],Sa=y[1],Ta=y[2],Ua=Sa&&Sa.then,Va=Ra&&Ra.constructor,Wa=!!Ta,Xa=!1,Ya=Ta?function(){Ta.then(pb)}:f.setImmediate?setImmediate.bind(null,pb):f.MutationObserver?function(){var a=document.createElement("div");new MutationObserver(function(){pb(),a=null}).observe(a,{attributes:!0});a.setAttribute("i","1")}:function(){setTimeout(pb,0)},Za=function(a,b){eb.push([a,b]),ab&&(Ya(),ab=!1)},$a=!0,ab=!0,H=[],bb=[],cb=null,db=Ga,I={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:F,pgp:!1,env:{},finalize:F},J=I,eb=[],K=0,fb=[];function L(a){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this._lib=!1;var b=this._PSD=J;B&&(this._stackHolder=C(),this._prev=null,this._numPrev=0);if(typeof a!=="function"){if(a!==Na)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];this._state===!1&&jb(this,this._value);return}this._state=null;this._value=null;++b.ref;ib(this,a)}var gb={get:function(){var a=J,b=Ab;function c(c,d){var e=this,f=!a.global&&(a!==J||b!==Ab),g=f&&!P(),h=new L(function(b,h){lb(e,new hb(Jb(c,a,f,g),Jb(d,a,f,g),b,h,a))});B&&ob(h,this);return h}c.prototype=Na;return c},set:function(a){o(this,"then",a&&a.prototype===Na?gb:{get:function(){return a},set:gb.set})}};m(L.prototype,{then:gb,_then:function(a,b){lb(this,new hb(null,null,a,b,J))},"catch":function(b){if(arguments.length===1)return this.then(null,b);var a=arguments[0],c=arguments[1];return typeof a==="function"?this.then(null,function(b){return b instanceof a?c(b):wb(b)}):this.then(null,function(b){return b&&b.name===a?c(b):wb(b)})},"finally":function(a){return this.then(function(b){a();return b},function(b){a();return wb(b)})},stack:{get:function(){if(this._stack)return this._stack;try{Xa=!0;var a=nb(this,[],Pa);a=a.join("\nFrom previous: ");this._state!==null&&(this._stack=a);return a}finally{Xa=!1}}},timeout:function(a,b){var c=this;return a<Infinity?new L(function(d,e){var f=setTimeout(function(){return e(new E.Timeout(b))},a);c.then(d,e)["finally"](clearTimeout.bind(null,f))}):this}});typeof Symbol!=="undefined"&&Symbol.toStringTag&&o(L.prototype,Symbol.toStringTag,"Dexie.Promise");I.env=Gb();function hb(a,b,c,d,e){this.onFulfilled=typeof a==="function"?a:null,this.onRejected=typeof b==="function"?b:null,this.resolve=c,this.reject=d,this.psd=e}m(L,{all:function(){var a=A.apply(null,arguments).map(Db);return new L(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return L.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof L)return a;if(a&&typeof a.then==="function")return new L(function(b,c){a.then(b,c)});var b=new L(Na,!0,a);ob(b,cb);return b},reject:wb,race:function(){var a=A.apply(null,arguments).map(Db);return new L(function(b,c){a.map(function(a){return L.resolve(a).then(b,c)})})},PSD:{get:function(){return J},set:function(a){return J=a}},totalEchoes:{get:function(){return Ab}},newPSD:O,usePSD:Hb,scheduler:{get:function(){return Za},set:function(a){Za=a}},rejectionMapper:{get:function(){return db},set:function(a){db=a}},follow:function(a,b){return new L(function(c,d){return O(function(b,c){var d=J;d.unhandleds=[];d.onunhandled=c;d.finalize=G(function(){var a=this;tb(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});Va&&(Va.allSettled&&o(L,"allSettled",function(){var a=A.apply(null,arguments).map(Db);return new L(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return L.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),Va.any&&typeof AggregateError!=="undefined"&&o(L,"any",function(){var a=A.apply(null,arguments).map(Db);return new L(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return L.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function ib(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&qb();b&&typeof b.then==="function"?ib(a,function(a,c){b instanceof L?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,kb(a));c&&rb()},jb.bind(null,a))}catch(b){jb(a,b)}}function jb(a,b){bb.push(b);if(a._state!==null)return;var c=a._lib&&qb();b=db(b);a._state=!1;a._value=b;B&&b!==null&&typeof b==="object"&&!b._promise&&ca(function(){var c=r(b,"stack");b._promise=a;o(b,"stack",{get:function(){return Xa?c&&(c.get?c.get.apply(b):c.value):a.stack}})});ub(a);kb(a);c&&rb()}function kb(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)lb(a,b[c]);c=a._PSD;--c.ref||c.finalize();K===0&&(++K,Za(function(){--K===0&&sb()},[]))}function lb(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++K;Za(mb,[c,a,b])}function mb(a,b,c){try{cb=b;var d,e=b._value;b._state?d=a(e):(bb.length&&(bb=[]),d=a(e),bb.indexOf(e)===-1&&vb(b));c.resolve(d)}catch(a){c.reject(a)}finally{cb=null,--K===0&&sb(),--c.psd.ref||c.psd.finalize()}}function nb(a,b,c){if(b.length===c)return b;var d="";if(a._state===!1){var e=a._value,f,g;e!=null?(f=e.name||"Error",g=e.message||e,d=wa(e,0)):(f=e,g="");b.push(f+(g?": "+g:"")+d)}B&&(d=wa(a._stackHolder,2),d&&b.indexOf(d)===-1&&b.push(d),a._prev&&nb(a._prev,b,c));return b}function ob(a,b){var c=b?b._numPrev+1:0;c<Oa&&(a._prev=b,a._numPrev=c)}function pb(){qb()&&rb()}function qb(){var a=$a;$a=!1;ab=!1;return a}function rb(){var a,b,c;do while(eb.length>0){a=eb;eb=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while(eb.length>0);$a=!0;ab=!0}function sb(){var a=H;H=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=fb.slice(0);var b=a.length;while(b)a[--b]()}function tb(a){function b(){a(),fb.splice(fb.indexOf(b),1)}fb.push(b);++K;Za(function(){--K===0&&sb()},[])}function ub(a){H.some(function(b){return b._value===a._value})||H.push(a)}function vb(a){var b=H.length;while(b)if(H[--b]._value===a._value){H.splice(b,1);return}}function wb(a){return new L(Na,!1,a)}function M(a,b){var c=J;return function(){var d=qb(),e=J;try{Q(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{Q(e,!1),d&&rb()}}}var N={awaits:0,echoes:0,id:0},xb=0,yb=[],zb=0,Ab=0,Bb=0;function O(b,a,c,d){var e=J,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++Bb;var g=I.env;f.env=Wa?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject,nthen:Kb(g.nthen,f),gthen:Kb(g.gthen,f)}:{};a&&i(f,a);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};g=Hb(f,b,c,d);f.ref===0&&f.finalize();return g}function Cb(){N.id||(N.id=++xb);++N.awaits;N.echoes+=Qa;return N.id}function P(){if(!N.awaits)return!1;--N.awaits===0&&(N.id=0);N.echoes=N.awaits*Qa;return!0}(""+Ua).indexOf("[native code]")===-1&&(Cb=P=F);function Db(a){if(N.echoes&&a&&a.constructor===Va){Cb();return a.then(function(a){P();return a},function(a){P();return R(a)})}return a}function Eb(a){++Ab,(!N.echoes||--N.echoes===0)&&(N.echoes=N.id=0),yb.push(J),Q(a,!0)}function Fb(){var a=yb[yb.length-1];yb.pop();Q(a,!1)}function Q(a,b){var c=J;(b?N.echoes&&(!zb++||a!==J):zb&&(!--zb||a!==J))&&Ib(b?Eb.bind(null,a):Fb);if(a===J)return;J=a;c===I&&(I.env=Gb());if(Wa){b=I.env.Promise;var d=a.env;Sa.then=d.nthen;b.prototype.then=d.gthen;(c.global||a.global)&&(Object.defineProperty(f,"Promise",d.PromiseProp),b.all=d.all,b.race=d.race,b.resolve=d.resolve,b.reject=d.reject,d.allSettled&&(b.allSettled=d.allSettled),d.any&&(b.any=d.any))}}function Gb(){var a=f.Promise;return Wa?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject,nthen:Sa.then,gthen:a.prototype.then}:{}}function Hb(a,b,c,d,e){var f=J;try{Q(a,!0);return b(c,d,e)}finally{Q(f,!1)}}function Ib(a){Ua.call(Ra,a)}function Jb(a,b,c,d){return typeof a!=="function"?a:function(){var e=J;c&&Cb();Q(b,!0);try{return a.apply(this,arguments)}finally{Q(e,!1),d&&Ib(P)}}}function Kb(a,b){return function(c,d){return a.call(this,Jb(c,b),Jb(d,b))}}var R=L.reject;function Lb(a,b,c,d){if(!a.idbdb||!a._state.openComplete&&!J.letThrough&&!a._vip){if(a._state.openComplete)return R(new E.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._options.autoOpen)return R(new E.DatabaseClosed());a.open()["catch"](F)}return a._state.dbReadyPromise.then(function(){return Lb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create(),a._state.PR1398_maxLoop=3}catch(e){if(e.name===Ca.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return Lb(a,b,c,d)})}return R(e)}return e._promise(b,function(a,b){return O(function(){J.trans=e;return d(a,b,e)})}).then(function(a){if(b==="readwrite")try{e.idbtrans.commit()}catch(a){}return b==="readonly"?a:e._completion.then(function(){return a})})}}y="4.0.1-alpha.22";var Mb=String.fromCharCode(65535),Nb=-Infinity,S="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ob="String expected.",Pb=[],Qb=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Rb=Qb,Sb=Qb,Tb=function(a){return!/(dexie\.js|dexie\.min\.js)/.test(a)},Ub="__dbnames",Vb="readonly",Wb="readwrite";function Xb(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Yb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Zb(a){return typeof a==="string"&&!/\./.test(a)?function(b){b[a]===void 0&&a in b&&(b=z(b),delete b[a]);return b}:function(a){return a}}function $b(){throw E.Type()}function T(a,b){try{var c=cc(a),d=cc(b);if(c!==d){if(c==="Array")return 1;if(d==="Array")return-1;if(c==="binary")return 1;if(d==="binary")return-1;if(c==="string")return 1;if(d==="string")return-1;if(c==="Date")return 1;return d!=="Date"?NaN:-1}switch(c){case"number":case"Date":case"string":return a>b?1:a<b?-1:0;case"binary":return bc(dc(a),dc(b));case"Array":return ac(a,b)}}catch(a){}return NaN}function ac(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f){var g=T(a[f],b[f]);if(g!==0)return g}return c===d?0:c<d?-1:1}function bc(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}function cc(a){var b=typeof a;if(b!=="object")return b;if(ArrayBuffer.isView(a))return"binary";b=na(a);return b==="ArrayBuffer"?"binary":b}function dc(a){if(a instanceof Uint8Array)return a;return ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var ec=function(){function a(){}a.prototype._trans=function(a,b,c){var d=this._tx||J.trans,e=this.name;function f(c,d,a){if(!a.schema[e])throw new E.NotFound("Table "+e+" not part of transaction");return b(a.idbtrans,a)}var g=qb();try{return d&&d.db===this.db?d===J.trans?d._promise(a,f,c):O(function(){return d._promise(a,f,c)},{trans:d,transless:J.transless||J}):Lb(this.db,a,[this.name],f)}finally{g&&rb()}};a.prototype.get=function(a,b){var c=this;return a&&a.constructor===Object?this.where(a).first(b):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a==="string")return new this.db.WhereClause(this,a);if(h(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var b=g(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){if(a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})){for(var c=0;c<b.length;++c)if(b.indexOf(a.keyPath[c])===-1)return!1;return!0}return!1}).sort(function(a,b){return a.keyPath.length-b.keyPath.length})[0];if(c&&this.db._maxKey!==Mb){var d=c.keyPath.slice(0,b.length);return this.where(d).equals(d.map(function(b){return a[b]}))}!c&&B&&!1;var e=this.schema.idxByName,f=this.db._deps.indexedDB;function i(a,b){return f.cmp(a,b)===0}d=b.reduce(function(b,c){var d=b[0];b=b[1];var f=e[c],g=a[c];return[d||f,d||!f?Xb(b,f&&f.multi?function(a){a=w(a,c);return h(a)&&a.some(function(a){return i(g,a)})}:function(a){return i(g,w(a,c))}):b]},[null,null]);var j=d[0];d=d[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(d):c?this.filter(d):this.where(b).equals("")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,h(a)?"[".concat(a.join("+"),"]"):a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){var b=this,d=b.db,e=b.name;this.schema.mappedClass=a;a.prototype instanceof $b&&(a=function(a){c(b,a);function b(){return a!==null&&a.apply(this,arguments)||this}Object.defineProperty(b.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0});b.prototype.table=function(){return e};return b}(a));var f=new Set();for(b=a.prototype;b;b=j(b))Object.getOwnPropertyNames(b).forEach(function(a){return f.add(a)});b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(!f.has(d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook("reading",b);return a};a.prototype.defineClass=function(){function a(a){i(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Zb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof a==="object"&&!h(a)){var c=w(a,this.schema.primKey.keyPath);return c===void 0?R(new E.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(b)}else return this.where(":id").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Zb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype["delete"]=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:Yb})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new E.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new E.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Zb(d)):b;return e.core.mutate({trans:c,type:"add",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new Ba("".concat(e.name,".bulkAdd(): ").concat(b," of ").concat(h," operations failed"),a)})})};a.prototype.bulkPut=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new E.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new E.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Zb(d)):b;return e.core.mutate({trans:c,type:"put",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new Ba("".concat(e.name,".bulkPut(): ").concat(b," of ").concat(h," operations failed"),a)})})};a.prototype.bulkUpdate=function(b){var c=this,d=this.core,a=b.map(function(a){return a.key}),e=b.map(function(a){return a.changes}),f=[];return this._trans("readwrite",function(g){return d.getMany({trans:g,keys:a,cache:"clone"}).then(function(h){var i=[],j=[];b.forEach(function(a,b){var d=a.key;a=a.changes;var e=h[b];if(e){for(var g=0,k=Object.keys(a);g<k.length;g++){var l=k[g],m=a[l];if(l===c.schema.primKey.keyPath){if(T(m,d)!==0)throw new E.Constraint("Cannot update primary key in bulkUpdate()")}else x(e,l,m)}f.push(b);i.push(d);j.push(e)}});var k=i.length;return d.mutate({trans:g,type:"put",keys:i,values:j,updates:{keys:a,changeSpecs:e}}).then(function(a){var b=a.numFailures;a=a.failures;if(b===0)return k;for(var d=0,e=Object.keys(a);d<e.length;d++){var g=e[d],h=f[Number(g)];if(h!=null){var i=a[g];delete a[g];a[h]=i}}throw new Ba("".concat(c.name,".bulkUpdate(): ").concat(b," of ").concat(k," operations failed"),a)})})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new Ba("".concat(b.name,".bulkDelete(): ").concat(d," of ").concat(c," operations failed"),a)})};return a}();function fc(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d==="string")return b[d]};c.addEventType=f;for(var d=1,e=arguments.length;d<e;++d)f(arguments[d]);return c;function f(a,d,e){if(typeof a==="object")return i(a);d||(d=La);e||(e=F);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){g(a).forEach(function(b){var c=a[b];if(h(c))f(b,a[b][0],a[b][1]);else if(c==="asap")var d=f(b,Ga,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){aa(function(){a.apply(null,b)})})});else throw new E.InvalidArgument("Invalid event config")})}}function gc(a,b){p(b).from({prototype:a});return b}function hc(a){return gc(ec.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:fc(null,{creating:[Ia,F],reading:[Ha,Ga],updating:[Ka,F],deleting:[Ja,F]})})}function ic(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function jc(a,b){a.filter=Xb(a.filter,b)}function kc(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return Xb(d(),b())}:b;a.justLimit=c&&!d}function lc(a,b){a.isMatch=Xb(a.isMatch,b)}function mc(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new E.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function nc(a,b,c){var d=mc(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function oc(a,b,c,d){var e=a.replayFilter?Xb(a.filter,a.replayFilter()):a.filter;if(!a.or)return pc(nc(a,d,c),Xb(a.algorithm,e),b,!a.keysOnly&&a.valueMapper);else{var f={},g=function(a,c,d){if(!e||e(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})){var g=c.primaryKey,h=""+g;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(g));l(f,h)||(f[h]=!0,b(a,c,d))}};return Promise.all([a.or._iterate(g,c),pc(nc(a,d,c),a.algorithm,g,!a.keysOnly&&a.valueMapper)])}}function pc(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=M(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a["continue"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=F},function(b){a.fail(b),c=F}))&&f(a.value,a,function(a){return c=a});c()})})}var qc=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,R.bind(null,c.error)):c.table._trans("readonly",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,R.bind(null,b.error)):b.table._trans("readwrite",a,"locked")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=Xb(b.algorithm,a)};a.prototype._iterate=function(a,b){return oc(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&i(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return oc(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(ic(c,!0))return d.count({trans:a,query:{index:mc(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return oc(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir==="next"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir==="next"&&ic(c,!0)&&c.limit>0){var d=c.valueMapper,e=mc(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return oc(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;ic(b)?kc(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):kc(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);kc(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){jc(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){jc(this._ctx,function(b){return a(b.value)});lc(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique="unique";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir==="next"&&ic(b,!0)&&b.limit>0)return this._read(function(a){var c=mc(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique="unique";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};jc(this._ctx,function(a){a=a.primaryKey.toString();var c=l(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){var e;if(typeof a==="function")e=a;else{var f=g(a),h=f.length;e=function(b){var c=!1;for(var d=0;d<h;++d){var e=f[d],g=a[e];w(b,e)!==g&&(x(b,e,g),c=!0)}return c}}var i=c.table.core,j=i.schema.primaryKey,k=j.outbound,l=j.extractKey,m=b.db._options.modifyChunkSize||200,n=[],o=0,p=[],q=function(a,b){var c=b.failures;b=b.numFailures;o+=a-b;for(a=0,b=g(c);a<b.length;a++){var d=b[a];n.push(c[d])}};return b.clone().primaryKeys().then(function(b){var f=function(g){var h=Math.min(m,b.length-g);return i.getMany({trans:d,keys:b.slice(g,g+h),cache:"immutable"}).then(function(j){var n=[],o=[],p=k?[]:null,r=[];for(var s=0;s<h;++s){var t=j[s],u={value:z(t),primKey:b[g+s]};e.call(u,u.value,u)!==!1&&(u.value==null?r.push(b[g+s]):!k&&T(l(t),l(u.value))!==0?(r.push(b[g+s]),n.push(u.value)):(o.push(u.value),k&&p.push(b[g+s])))}var v=ic(c)&&c.limit===Infinity&&(typeof a!=="function"||a===rc)&&{index:c.index,range:c.range};return Promise.resolve(n.length>0&&i.mutate({trans:d,type:"add",values:n}).then(function(a){for(var b in a.failures)r.splice(parseInt(b),1);q(n.length,a)})).then(function(){return(o.length>0||v&&typeof a==="object")&&i.mutate({trans:d,type:"put",keys:p,values:o,criteria:v,changeSpec:typeof a!=="function"&&a}).then(function(a){return q(o.length,a)})}).then(function(){return(r.length>0||v&&a===rc)&&i.mutate({trans:d,type:"delete",keys:r,criteria:v}).then(function(a){return q(r.length,a)})}).then(function(){return b.length>g+h&&f(g+m)})})};return f(0).then(function(){if(n.length>0)throw new Aa("Error modifying one or more objects",n,o,p);return b.length})})})};a.prototype["delete"]=function(){var a=this._ctx,b=a.range;return ic(a)&&(a.isPrimKey&&!Sb||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:"deleteRange",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new Aa("Could not delete some values",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(rc)};return a}(),rc=function(a,b){return b.value=null};function sc(a){return gc(qc.prototype,function(b,c){this.db=a;var d=Yb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Ga?f:null}})}function tc(a,b){return a<b?-1:a===b?0:1}function uc(a,b){return a>b?-1:a===b?0:1}function U(a,b,c){a=a instanceof Bc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function vc(a){return new a.Collection(a,function(){return Ac("")}).limit(0)}function wc(a){return a==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function xc(a){return a==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function yc(b,c,d,e,a,f){var g=Math.min(b.length,e.length),h=-1;for(var i=0;i<g;++i){var j=c[i];if(j!==e[i]){if(a(b[i],d[i])<0)return b.substr(0,i)+d[i]+d.substr(i+1);if(a(b[i],e[i])<0)return b.substr(0,i)+e[i]+d.substr(i+1);return h>=0?b.substr(0,h)+c[h]+d.substr(h+1):null}a(b[i],j)<0&&(h=i)}if(g<e.length&&f==="next")return b+d.substr(b.length);return g<b.length&&f==="prev"?b.substr(0,d.length):h<0?null:b.substr(0,h)+e[h]+d.substr(h+1)}function zc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a==="string"}))return U(a,Ob);function m(a){e=wc(a);f=xc(a);g=a==="next"?tc:uc;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a==="next"?"":d}m("next");a=new a.Collection(a,function(){return V(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!=="string")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=yc(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a["continue"](o+k)}):c(d);return!1}});return a}function V(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function Ac(a){return{type:1,lower:a,upper:a}}var Bc=function(){function a(){}Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?vc(this):new this.Collection(this,function(){return V(a,b,!c,!d)})}catch(a){return U(this,S)}};a.prototype.equals=function(a){return a==null?U(this,S):new this.Collection(this,function(){return Ac(a)})};a.prototype.above=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(a,void 0,!1)})};a.prototype.below=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!=="string"?U(this,Ob):this.between(a,a+Mb,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):zc(this,function(a,b){return a.indexOf(b[0])===0},[a],Mb)};a.prototype.equalsIgnoreCase=function(a){return zc(this,function(a,b){return a===b[0]},[a],"")};a.prototype.anyOfIgnoreCase=function(){var a=A.apply(ra,arguments);return a.length===0?vc(this):zc(this,function(a,b){return b.indexOf(a)!==-1},a,"")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=A.apply(ra,arguments);return a.length===0?vc(this):zc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,Mb)};a.prototype.anyOf=function(){var a=this,b=A.apply(ra,arguments),c=this._cmp;try{b.sort(c)}catch(a){return U(this,S)}if(b.length===0)return vc(this);var d=new this.Collection(this,function(){return V(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d==="next"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a["continue"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Nb,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=A.apply(ra,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return U(this,S)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Nb,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(c,d){var e=this,a=this._cmp,f=this._ascending,g=this._descending,h=this._min,i=this._max;if(c.length===0)return vc(this);if(!c.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&f(a[0],a[1])<=0}))return U(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",E.InvalidArgument);var j=!d||d.includeLowers!==!1,k=d&&d.includeUppers===!0;function b(b,c){var d=0,e=b.length;for(;d<e;++d){var f=b[d];if(a(c[0],f[1])<0&&a(c[1],f[0])>0){f[0]=h(f[0],c[0]);f[1]=i(f[1],c[1]);break}}d===e&&b.push(c);return b}var l=f;function m(a,b){return l(a[0],b[0])}var n;try{n=c.reduce(b,[]),n.sort(m)}catch(a){return U(this,S)}var o=0,p=k?function(a){return f(a,n[o][1])>0}:function(a){return f(a,n[o][1])>=0},q=j?function(a){return g(a,n[o][0])>0}:function(a){return g(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;d=new this.Collection(this,function(){return V(n[0][0],n[n.length-1][1],!j,!k)});d._ondirectionchange=function(a){a==="next"?(s=p,l=f):(s=q,l=g),n.sort(m)};d._addAlgorithm(function(a,b,c){var d=a.key;while(s(d)){++o;if(o===n.length){b(c);return!1}}if(r(d))return!0;else if(e._cmp(d,n[o][1])===0||e._cmp(d,n[o][0])===0)return!1;else{b(function(){l===f?a["continue"](n[o][0]):a["continue"](n[o][1])});return!1}});return d};a.prototype.startsWithAnyOf=function(){var a=A.apply(ra,arguments);if(!a.every(function(a){return typeof a==="string"}))return U(this,"startsWithAnyOf() only works with strings");return a.length===0?vc(this):this.inAnyRange(a.map(function(a){return[a,a+Mb]}))};return a}();function Cc(a){return gc(Bc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===":id"?null:c,or:d};this._cmp=this._ascending=T;this._descending=function(a,b){return T(b,a)};this._max=function(a,b){return T(a,b)>0?a:b};this._min=function(a,b){return T(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange;if(!this._IDBKeyRange)throw new E.MissingAPI()})}function W(a){return M(function(b){Dc(b);a(b.target.error);return!1})}function Dc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Ec="storagemutated",X="x-storagemutated-1",Y=fc(null,Ec),Fc=function(){function a(){}a.prototype._lock=function(){v(!J.global);++this._reculock;this._reculock===1&&!J.global&&(J.lockOwnerFor=this);return this};a.prototype._unlock=function(){v(!J.global);if(--this._reculock===0){J.global||(J.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{Hb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&J.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;v(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new E.DatabaseClosed(d);case"MissingAPIError":throw new E.MissingAPI(d.message,d);default:throw new E.OpenFailed(d)}if(!this.active)throw new E.TransactionInactive();v(this._completion._state===null);a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));a.onerror=M(function(c){Dc(c),b._reject(a.error)});a.onabort=M(function(c){Dc(c),b.active&&b._reject(new E.Abort(a.error)),b.active=!1,b.on("abort").fire(c)});a.oncomplete=M(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&Y.storagemutated.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a==="readwrite"&&this.mode!=="readwrite")return R(new E.ReadOnly("Transaction is readonly"));if(!this.active)return R(new E.TransactionInactive());if(this._locked())return new L(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},J])});else if(c)return O(function(){var a=new L(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a["finally"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new L(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=L.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new L(function(a,d){c.then(function(c){return b._waitingQueue.push(M(a.bind(null,c)))},function(a){return b._waitingQueue.push(M(d.bind(null,a)))})["finally"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new E.Abort()))};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(l(b,a))return b[a];var c=this.schema[a];if(!c)throw new E.NotFound("Table "+a+" not part of transaction");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function Gc(a){return gc(Fc.prototype,function(b,c,d,e,f){var g=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.chromeTransactionDurability=e;this.idbtrans=null;this.on=fc(this,"complete","error","abort");this.parent=f||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new L(function(a,b){g._resolve=a,g._reject=b});this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;g.active=!1;g.on.error.fire(a);g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort();return R(a)})})}function Hc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+Ic(b)}}function Ic(a){return typeof a==="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Jc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:ba(c,function(a){return[a.name,a]})}}function Kc(a){return a.length===1?a[0]:a}var Lc=function(a){try{a.only([[]]);Lc=function(){return[[]]};return[[]]}catch(a){Lc=function(){return Mb};return Mb}};function Mc(a){if(a==null)return function(){return void 0};else if(typeof a==="string")return Nc(a);else return function(b){return w(b,a)}}function Nc(a){var b=a.split(".");if(b.length===1)return function(b){return b[a]};else return function(b){return w(b,a)}}function Oc(a){return[].slice.call(a)}var Pc=0;function Qc(a){return a==null?":id":typeof a==="string"?a:"[".concat(a.join("+"),"]")}function Rc(a,b,c){function d(a,b){var c=Oc(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=h(b),e=b==null,f={};e={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:e,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:Mc(b)},indexes:Oc(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,e=b.multiEntry;b=b.keyPath;var a=h(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:e,extractKey:Mc(b)};f[Qc(b)]=c;return c}),getIndexByKeyPath:function(a){return f[Qc(a)]}};f[":id"]=e.primaryKey;b!=null&&(f[Qc(b)]=e.primaryKey);return e})},hasGetAll:c.length>0&&"getAll"in b.objectStore(c[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function e(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var c=a.lower,d=a.upper,e=a.lowerOpen;a=a.upperOpen;c=c===void 0?d===void 0?null:b.upperBound(d,!!a):d===void 0?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a);return c}function f(b){var c=b.name;function d(d){var f=d.trans,b=d.type,a=d.keys,g=d.values,h=d.range;return new Promise(function(d,i){d=M(d);i=f.objectStore(c);var j=i.keyPath==null,k=b==="put"||b==="add";if(!k&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var l=(a||g||{length:1}).length;if(a&&g&&a.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(l===0)return d({numFailures:0,failures:{},results:[],lastResult:void 0});var m,n=[],o=[],p=0,q=function(a){++p,Dc(a)};if(b==="deleteRange"){if(h.type===4)return d({numFailures:p,failures:o,results:[],lastResult:void 0});h.type===3?n.push(m=i.clear()):n.push(m=i["delete"](e(h)))}else{j=k?j?[g,a]:[g,null]:[a,null];var r=j[0];j=j[1];if(k)for(k=0;k<l;++k)n.push(m=j&&j[k]!==void 0?i[b](r[k],j[k]):i[b](r[k])),m.onerror=q;else for(k=0;k<l;++k)n.push(m=i[b](r[k])),m.onerror=q}var s=function(c){c=c.target.result;n.forEach(function(a,b){return a.error!=null&&(o[b]=a.error)});d({numFailures:p,failures:o,results:b==="delete"?a:n.map(function(a){return a.result}),lastResult:c})};m.onerror=function(a){q(a),s(a)};m.onsuccess=s})}function a(b){var d=b.trans,f=b.values,a=b.query,g=b.reverse,h=b.unique;return new Promise(function(b,i){b=M(b);var j=a.index,k=a.range,l=d.objectStore(c);l=j.isPrimaryKey?l:l.index(j.name);j=g?h?"prevunique":"prev":h?"nextunique":"next";var m=f||!("openKeyCursor"in l)?l.openCursor(e(k),j):l.openKeyCursor(e(k),j);m.onerror=W(i);m.onsuccess=M(function(a){var c=m.result;if(!c){b(null);return}c.___id=++Pc;c.done=!1;var e=c["continue"].bind(c),f=c.continuePrimaryKey;f&&(f=f.bind(c));var g=c.advance.bind(c);a=function(){throw new Error("Cursor not started")};var h=function(){throw new Error("Cursor not stopped")};c.trans=d;c.stop=c["continue"]=c.continuePrimaryKey=c.advance=a;c.fail=M(i);c.next=function(){var a=this,b=1;return this.start(function(){return b--?a["continue"]():a.stop()}).then(function(){return a})};c.start=function(a){var b=new Promise(function(a,b){a=M(a),m.onerror=W(b),c.fail=b,c.stop=function(b){c.stop=c["continue"]=c.continuePrimaryKey=c.advance=h,a(b)}}),d=function(){if(m.result)try{a()}catch(a){c.fail(a)}else c.done=!0,c.start=function(){throw new Error("Cursor behind last entry")},c.stop()};m.onsuccess=M(function(a){m.onsuccess=d,d()});c["continue"]=e;c.continuePrimaryKey=f;c.advance=g;d();return b};b(c)},i)})}function f(a){return function(b){return new Promise(function(f,g){f=M(f);var h=b.trans,i=b.values,j=b.limit,d=b.query,k=j===Infinity?void 0:j,l=d.index;d=d.range;h=h.objectStore(c);h=l.isPrimaryKey?h:h.index(l.name);l=e(d);if(j===0)return f({result:[]});if(a){d=i?h.getAll(l,k):h.getAllKeys(l,k);d.onsuccess=function(a){return f({result:a.target.result})};d.onerror=W(g)}else{var m=0,n=i||!("openKeyCursor"in h)?h.openCursor(l):h.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return f({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return f({result:o});a["continue"]()};n.onerror=W(g)}})}}return{name:c,schema:b,mutate:d,getMany:function(b){var d=b.trans,a=b.keys;return new Promise(function(b,e){b=M(b);var f=d.objectStore(c),g=a.length,h=new Array(g),i=0,j=0,k=function(a){a=a.target;(h[a._pos]=a.result)!=null;++j===i&&b(h)};e=W(e);for(var l=0;l<g;++l){var m=a[l];m!=null&&(m=f.get(a[l]),m._pos=l,m.onsuccess=k,m.onerror=e,++i)}i===0&&b(h)})},get:function(a){var b=a.trans,d=a.key;return new Promise(function(a,e){a=M(a);var f=b.objectStore(c);f=f.get(d);f.onsuccess=function(b){return a(b.target.result)};f.onerror=W(e)})},query:f(g),openCursor:a,count:function(b){var a=b.query,d=b.trans,f=a.index,g=a.range;return new Promise(function(a,b){var h=d.objectStore(c);h=f.isPrimaryKey?h:h.index(f.name);var i=e(g);i=i?h.count(i):h.count();i.onsuccess=M(function(b){return a(b.target.result)});i.onerror=W(b)})}}}d=d(a,c);c=d.schema;var g=d.hasGetAll;d=c.tables.map(function(a){return f(a)});var i={};d.forEach(function(a){return i[a.name]=a});return{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){var b=i[a];if(!b)throw new Error("Table '".concat(a,"' not found"));return i[a]},MIN_KEY:-Infinity,MAX_KEY:Lc(b),schema:c}}function Sc(a,b){return b.reduce(function(a,b){b=b.create;return d(d({},a),b(a))},a)}function Tc(a,b,c,d){var e=c.IDBKeyRange;c.indexedDB;c=Sc(Rc(b,e,d),a.dbcore);return{dbcore:c}}function Uc(a,b){var c=a._novip;a=b.db;a=Tc(c._middlewares,a,c._deps,b);c.core=a.dbcore;c.tables.forEach(function(a){var b=a.name;c.core.schema.tables.some(function(a){return a.name===b})&&(a.core=c.core.table(b),c[b]instanceof c.Table&&(c[b].core=a.core))})}function Vc(a,b,c,d){var e=a._novip;c.forEach(function(a){var c=d[a];b.forEach(function(b){var d=r(b,a);(!d||"value"in d&&d.value===void 0)&&(b===e.Transaction.prototype||b instanceof e.Transaction?o(b,a,{get:function(){return this.table(a)},set:function(b){n(this,a,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):b[a]=new e.Table(a,c))})})}function Wc(a,b){var c=a._novip;b.forEach(function(a){for(var b in a)a[b]instanceof c.Table&&delete a[b]})}function Xc(a,b){return a._cfg.version-b._cfg.version}function Yc(a,b,c,d){var e=a._dbSchema,f=a._createTransaction("readwrite",a._storeNames,e);f.create(c);f._completion["catch"](d);var h=f._reject.bind(f),i=J.transless||J;O(function(){J.trans=f,J.transless=i,b===0?(g(e).forEach(function(a){ad(c,a,e[a].primKey,e[a].indexes)}),Uc(a,c),L.follow(function(){return a.on.populate.fire(f)})["catch"](h)):Zc(a,b,f,c)["catch"](h)})}function Zc(a,b,c,d){var e=a._novip,f=[];a=e._versions;var h=e._dbSchema=ed(e,e.idbdb,d),i=!1;a=a.filter(function(a){return a._cfg.version>=b});a.forEach(function(a){f.push(function(){var f=h,j=a._cfg.dbschema;hd(e,f,d);hd(e,j,d);h=e._dbSchema=j;var k=$c(f,j);k.add.forEach(function(a){ad(d,a[0],a[1].primKey,a[1].indexes)});k.change.forEach(function(a){if(a.recreate)throw new E.Upgrade("Not yet support for changing primary key");else{var b=d.objectStore(a.name);a.add.forEach(function(a){return dd(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),dd(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var l=a._cfg.contentUpgrade;if(l&&a._cfg.version>b){Uc(e,d);c._memoizedTables={};i=!0;var m=ea(j);k.del.forEach(function(a){m[a]=f[a]});Wc(e,[e.Transaction.prototype]);Vc(e,[e.Transaction.prototype],g(m),m);c.schema=m;var n=sa(l);n&&Cb();var o;j=L.follow(function(){o=l(c);if(o&&n){var a=P.bind(null,null);o.then(a,a)}});return o&&typeof o.then==="function"?L.resolve(o):j.then(function(){return o})}}),f.push(function(b){if(!i||!Rb){var d=a._cfg.dbschema;cd(d,b)}Wc(e,[e.Transaction.prototype]);Vc(e,[e.Transaction.prototype],e._storeNames,e._dbSchema);c.schema=e._dbSchema})});function j(){return f.length?L.resolve(f.shift()(c.idbtrans)).then(j):L.resolve()}return j().then(function(){bd(h,d)})}function $c(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!==""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto&&!Qb)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function ad(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return dd(e,a)});return e}function bd(a,b){g(a).forEach(function(c){b.db.objectStoreNames.contains(c)||ad(b,c,a[c].primKey,a[c].indexes)})}function cd(a,b){[].slice.call(b.db.objectStoreNames).forEach(function(c){return a[c]==null&&b.db.deleteObjectStore(c)})}function dd(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function ed(a,b,c){var d={};a=t(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=Hc(Ic(e),e||"",!1,!1,!!b.autoIncrement,e&&typeof e!=="string",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=Hc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!=="string",!1);g.push(i)}d[a]=Jc(a,f,g)});return d}function fd(a,b,c){a=a._novip;a.verno=b.version/10;c=a._dbSchema=ed(a,b,c);a._storeNames=t(b.objectStoreNames,0);Vc(a,[a._allTables],g(c),c)}function gd(a,b){b=ed(a,a.idbdb,b);b=$c(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function hd(a,b,c){a=a._novip;var d=c.db.objectStoreNames;for(var e=0;e<d.length;++e){var g=d[e],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k==="string"?k:"["+t(k).join("+")+"]";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function id(a){return a.split(",").map(function(a,b){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Hc(c,d||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),h(d),b===0)})}var jd=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){g(a).forEach(function(c){if(a[c]!==null){var d=id(a[c]),e=d.shift();if(e.multi)throw new E.Schema("Primary key cannot be multi-valued");d.forEach(function(a){if(a.auto)throw new E.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new E.Schema("Index must have a name and cannot be an empty string")});b[c]=Jc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,a):a;a=b._versions;var c={},d={};a.forEach(function(a){i(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)});b._dbSchema=d;Wc(b,[b._allTables,b,b.Transaction.prototype]);Vc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],g(d),d);b._storeNames=g(d);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=Ma(this._cfg.contentUpgrade||F,a);return this};return a}();function kd(a){return gc(jd.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ld(a,b){var c=a._dbNamesDB;c||(c=a._dbNamesDB=new je(Ub,{addons:[],indexedDB:a,IDBKeyRange:b}),c.version(1).stores({dbnames:"name"}));return c.table("dbnames")}function md(a){return a&&typeof a.databases==="function"}function nd(a){var b=a.indexedDB;a=a.IDBKeyRange;return md(b)?Promise.resolve(b.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Ub})}):ld(b,a).toCollection().primaryKeys()}function od(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!md(c)&&b!==Ub&&ld(c,a).put({name:b})["catch"](F)}function pd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!md(c)&&b!==Ub&&ld(c,a)["delete"](b)["catch"](F)}function qd(a){return O(function(){J.letThrough=!0;return a()})}function rd(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var b;return new Promise(function(a){var c=function(){return indexedDB.databases()["finally"](a)};b=setInterval(c,100);c()})["finally"](function(){return clearInterval(b)})}function sd(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?R(b.dbOpenError):a});B&&(b.openCanceller._stackHolder=C());b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.openCanceller;function e(){if(b.openCanceller!==d)throw new E.DatabaseClosed("db.open() was cancelled")}var f=b.dbReadyResolve,g=null,h=!1;return L.race([d,(typeof navigator==="undefined"?L.resolve():rd()).then(function(){return new L(function(d,f){e();if(!c)throw new E.MissingAPI();var i=a.name,j=b.autoSchema?c.open(i):c.open(i,Math.round(a.verno*10));if(!j)throw new E.MissingAPI();j.onerror=W(f);j.onblocked=M(a._fireOnBlocked);j.onupgradeneeded=M(function(d){g=j.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){j.onerror=Dc;g.abort();j.result.close();var e=c.deleteDatabase(i);e.onsuccess=e.onerror=M(function(){f(new E.NoSuchDatabase("Database ".concat(i," doesnt exist")))})}else{g.onerror=W(f);e=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;h=e<1;a._novip.idbdb=j.result;Yc(a,e/10,g,f)}},f);j.onsuccess=M(function(){g=null;var c=a._novip.idbdb=j.result,e=t(c.objectStoreNames);if(e.length>0)try{e=c.transaction(Kc(e),"readonly");b.autoSchema?fd(a,c,e):(hd(a,a._dbSchema,e),!gd(a,e));Uc(a,e)}catch(a){}Pb.push(a);c.onversionchange=M(function(c){b.vcFired=!0,a.on("versionchange").fire(c)});c.onclose=M(function(b){a.on("close").fire(b)});h&&od(a._deps,i);d()},f)})})]).then(function(){e();b.onReadyBeingFired=[];return L.resolve(qd(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(b.onReadyBeingFired.length>0){var d=b.onReadyBeingFired.reduce(Ma,F);b.onReadyBeingFired=[];return L.resolve(qd(function(){return d(a.vip)})).then(c)}})})["finally"](function(){b.onReadyBeingFired=null,b.isBeingOpened=!1}).then(function(){return a})["catch"](function(c){b.dbOpenError=c;try{g&&g.abort()}catch(a){}d===b.openCanceller&&a._close();return R(c)})["finally"](function(){b.openComplete=!0,f()})}function td(a){var b=function(b){return a.next(b)},c=function(b){return a["throw"](b)},d=f(b),e=f(c);function f(a){return function(b){b=a(b);var c=b.value;return b.done?c:!c||typeof c.then!=="function"?h(c)?Promise.all(c).then(d,e):d(c):c.then(d,e)}}return f(b)()}function ud(a,b,c){var d=arguments.length;if(d<2)throw new E.InvalidArgument("Too few arguments");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=ga(e);return[a,f,c]}function vd(a,b,c,d,e){return L.resolve().then(function(){var f=J.transless||J,g=a._createTransaction(b,c,a._dbSchema,d);g.explicit=!0;f={trans:g,transless:f};if(d)g.idbtrans=d.idbtrans;else try{g.create(),a._state.PR1398_maxLoop=3}catch(d){if(d.name===Ca.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return vd(a,b,c,null,e)})}return R(d)}var h=sa(e);h&&Cb();var i;f=L.follow(function(){i=e.call(g,g);if(i)if(h){var a=P.bind(null,null);i.then(a,a)}else typeof i.next==="function"&&typeof i["throw"]==="function"&&(i=td(i))},f);return(i&&typeof i.then==="function"?L.resolve(i).then(function(a){return g.active?a:R(new E.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})["catch"](function(a){g._reject(a);return R(a)})})}function wd(a,b,c){a=h(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function xd(a){return d(d({},a),{table:function(b){var c=a.table(b);b=c.schema;var e={},f=[];function g(a,b,c){var h=Qc(a),i=e[h]=e[h]||[],j=a==null?0:typeof a==="string"?1:a.length,k=b>0;h=d(d({},c),{name:k?"".concat(h,"(virtual-from:").concat(c.name,")"):c.name,lowLevelIndex:c,isVirtual:k,keyTail:b,keyLength:j,extractKey:Mc(a),unique:!k&&c.unique});i.push(h);h.isPrimaryKey||f.push(h);if(j>1){k=j===2?a[0]:a.slice(0,j-1);g(k,b+1,c)}i.sort(function(a,b){return a.keyTail-b.keyTail});return h}var h=g(b.primaryKey.keyPath,0,b.primaryKey);e[":id"]=[h];for(var i=0,j=b.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Qc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:wd(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:wd(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(b){var a=b.query.index;return a.isVirtual?d(d({},b),{query:{index:a.lowLevelIndex,range:m(b.query.range,a.keyTail)}}):b}k=d(d({},c),{schema:d(d({},b),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return c.count(n(a))},query:function(a){return c.query(n(a))},openCursor:function(d){var b=d.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return c.openCursor(d);function h(b){function c(c){c!=null?b["continue"](wd(c,d.reverse?a.MAX_KEY:a.MIN_KEY,e)):d.unique?b["continue"](b.key.slice(0,g).concat(d.reverse?a.MIN_KEY:a.MAX_KEY,e)):b["continue"]()}c=Object.create(b,{"continue":{value:c},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(wd(d,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return c}return c.openCursor(n(d)).then(function(a){return a&&h(a)})}});return k}})}var yd={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:xd};function zd(a,b,c,d){c=c||{};d=d||"";g(a).forEach(function(e){if(!l(b,e))c[d+e]=void 0;else{var f=a[e],g=b[e];if(typeof f==="object"&&typeof g==="object"&&f&&g){var h=na(f),i=na(g);h!==i?c[d+e]=b[e]:h==="Object"?zd(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e])}else f!==g&&(c[d+e]=b[e])}});g(b).forEach(function(e){l(a,e)||(c[d+e]=b[e])});return c}function Ad(a,b){return b.type==="delete"?b.keys:b.keys||b.values.map(a.extractKey)}var Bd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return d(d({},a),{table:function(b){var c=a.table(b),f=c.schema.primaryKey,g=d(d({},c),{mutate:function(a){var g=J.trans,h=g.table(b).hook,i=h.deleting,j=h.creating,k=h.updating;switch(a.type){case"add":if(j.fire===F)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(j.fire===F&&k.fire===F)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===F)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===F)break;return g._promise("readwrite",function(){return n(a)},!0)}return c.mutate(a);function m(b){var g=J.trans,a=b.keys||Ad(f,b);if(!a)throw new Error("Keys missing");b=b.type==="add"||b.type==="put"?d(d({},b),{keys:a}):d({},b);b.type!=="delete"&&(b.values=e([],b.values,!0));b.keys&&(b.keys=e([],b.keys,!0));return Cd(c,b,a).then(function(d){var e=a.map(function(a,c){var e=d[c],h={onerror:null,onsuccess:null};if(b.type==="delete")i.fire.call(h,a,e,g);else if(b.type==="add"||e===void 0){var m=j.fire.call(h,a,b.values[c],g);a==null&&m!=null&&(a=m,b.keys[c]=a,f.outbound||x(b.values[c],f.keyPath,a))}else{m=zd(e,b.values[c]);var n=k.fire.call(h,m,a,e,g);if(n){var o=b.values[c];Object.keys(n).forEach(function(a){l(o,a)?o[a]=n[a]:x(o,a,n[a])})}}return h});return c.mutate(b).then(function(c){var f=c.failures,g=c.results,h=c.numFailures;c=c.lastResult;for(var i=0;i<a.length;++i){var j=g?g[i]:a[i],k=e[i];j==null?k.onerror&&k.onerror(f[i]):k.onsuccess&&k.onsuccess(b.type==="put"&&d[i]?b.values[i]:j)}return{failures:f,results:g,numFailures:h,lastResult:c}})["catch"](function(a){e.forEach(function(b){return b.onerror&&b.onerror(a)});return Promise.reject(a)})})}function n(a){return o(a.trans,a.range,1e4)}function o(a,b,e){return c.query({trans:a,values:!1,query:{index:f,range:b},limit:e}).then(function(c){var f=c.result;return m({type:"delete",keys:f,trans:a}).then(function(c){if(c.numFailures>0)return Promise.reject(c.failures[0]);if(f.length<e)return{failures:[],numFailures:0,lastResult:void 0};else return o(a,d(d({},b),{lower:f[f.length-1],lowerOpen:!0}),e)})})}}});return g}})}};function Cd(a,b,c){return b.type==="add"?Promise.resolve([]):a.getMany({trans:b.trans,keys:c,cache:"immutable"})}function Dd(a,b,c){try{if(!b)return null;if(b.keys.length<a.length)return null;var d=[];for(var e=0,f=0;e<b.keys.length&&f<a.length;++e){if(T(b.keys[e],a[f])!==0)continue;d.push(c?z(b.values[e]):b.values[e]);++f}return d.length===a.length?d:null}catch(a){return null}}var Ed={stack:"dbcore",level:-1,create:function(a){return{table:function(b){var c=a.table(b);return d(d({},c),{getMany:function(a){if(!a.cache)return c.getMany(a);var b=Dd(a.keys,a.trans._cache,a.cache==="clone");return b?L.resolve(b):c.getMany(a).then(function(b){a.trans._cache={keys:a.keys,values:a.cache==="clone"?z(b):b};return b})},mutate:function(a){a.type!=="add"&&(a.trans._cache=null);return c.mutate(a)}})}}}};function Fd(a){return!("from"in a)}var Z=function(a,b){if(this)i(this,arguments.length?{d:1,from:a,to:arguments.length>1?b:a}:{d:0});else{var c=new Z();a&&"d"in a&&i(c,a);return c}};m(Z.prototype,(xd={add:function(a){Hd(this,a);return this},addKey:function(a){Gd(this,a,a);return this},addKeys:function(a){var b=this;a.forEach(function(a){return Gd(b,a,a)});return this}},xd[oa]=function(){return Jd(this)},xd));function Gd(a,b,c){var d=T(b,c);if(isNaN(d))return;if(d>0)throw RangeError();if(Fd(a))return i(a,{from:b,to:c,d:1});d=a.l;var e=a.r;if(T(c,a.from)<0){d?Gd(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null};return Kd(a)}if(T(b,a.to)>0){e?Gd(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null};return Kd(a)}T(b,a.from)<0&&(a.from=b,a.l=null,a.d=e?e.d+1:1);T(c,a.to)>0&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1);b=!a.r;d&&!a.l&&Hd(a,d);e&&b&&Hd(a,e)}function Hd(a,b){function c(a,b){var d=b.from,e=b.to,f=b.l;b=b.r;Gd(a,d,e);f&&c(a,f);b&&c(a,b)}Fd(b)||c(a,b)}function Id(a,b){b=Jd(b);var c=b.next();if(c.done)return!1;var d=c.value;a=Jd(a);var e=a.next(d.from),f=e.value;while(!c.done&&!e.done){if(T(f.from,d.to)<=0&&T(f.to,d.from)>=0)return!0;T(d.from,f.from)<0?d=(c=b.next(f.from)).value:f=(e=a.next(d.from)).value}return!1}function Jd(a){var b=Fd(a)?null:{s:0,n:a};return{next:function(a){var c=arguments.length>0;while(b)switch(b.s){case 0:b.s=1;if(c)while(b.n.l&&T(a,b.n.from)<0)b={up:b,n:b.n.l,s:1};else while(b.n.l)b={up:b,n:b.n.l,s:1};case 1:b.s=2;if(!c||T(a,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3;b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function Kd(a){var b;b=(((b=a.r)===null||b===void 0?void 0:b.d)||0)-(((b=a.l)===null||b===void 0?void 0:b.d)||0);b=b>1?"r":b<-1?"l":"";if(b){var c=b==="r"?"l":"r",e=d({},a),f=a[b];a.from=f.from;a.to=f.to;a[b]=f[b];e[b]=f[c];a[c]=e;e.d=Ld(e)}a.d=Ld(a)}function Ld(a){var b=a.r;a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}function Md(a,b){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!b.schema.primaryKey.outbound}function Nd(a,b){switch(a){case"query":return b.values&&!b.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}function Od(a,b){g(b).forEach(function(c){a[c]?Hd(a[c],b[c]):a[c]=ia(b[c])});return a}var Pd={stack:"dbcore",level:0,name:"Observability",create:function(a){var b=a.schema.name,c=new Z(a.MIN_KEY,a.MAX_KEY);return d(d({},a),{transaction:function(b,c,d){if(!J.subscr)return a.transaction(b,c,d);if(c!=="readonly")throw new E.ReadOnly("write transaction not allowed within liveQueries");return a.transaction(b,c,d)},table:function(e){var f=a.table(e),i=f.schema,j=i.primaryKey,k=j.extractKey,l=j.outbound,m=d(d({},f),{mutate:function(g){var k=g.trans,l=g.mutatedParts||(g.mutatedParts={}),m=function(a){a="idb://".concat(b,"/").concat(e,"/").concat(a);return l[a]||(l[a]=new Z())},n=m(""),o=m(":dels"),d=g.type,p=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[Ad(j,g).filter(function(a){return a}),g.values]:[],a=p[0];p=p[1];var q=g.trans._cache;if(h(a)){n.addKeys(a);q=d==="delete"||a.length===p.length?Dd(a,q):null;!q&&d!=="add"&&o.addKeys(a);(q||p)&&Qd(m,i,q,p)}else if(a){d={from:a.lower,to:a.upper};o.add(d);n.add(d)}else n.add(c),o.add(c),i.indexes.forEach(function(a){return m(a.name).add(c)});return f.mutate(g).then(function(b){a&&(g.type==="add"||g.type==="put")&&n.addKeys(b.results);k.mutatedParts=Od(k.mutatedParts||{},l);return b})}}),n=function(b){b=b.query;var c=b.index;b=b.range;return[c,new Z((c=b.lower)!==null&&c!==void 0?c:a.MIN_KEY,(c=b.upper)!==null&&c!==void 0?c:a.MAX_KEY)]},o={get:function(a){return[j,new Z(a.key)]},getMany:function(a){return[j,new Z().addKeys(a.keys)]},count:n,query:n,openCursor:n};g(o).forEach(function(a){m[a]=function(g){var h=J.subscr,i=!!h,j=Md(J,f)&&Nd(a,g),m=j?g.obsSet={}:h;if(i){var n=function(a){a="idb://".concat(b,"/").concat(e,"/").concat(a);return m[a]||(m[a]=new Z())},p=n(""),q=n(":dels"),r=o[a](g),s=r[0],t=r[1];n(s.name||"").add(t);if(!s.isPrimaryKey)if(a==="count")q.add(c);else{var u=a==="query"&&l&&g.values&&f.query(d(d({},g),{values:!1}));return f[a].apply(this,arguments).then(function(b){if(a==="query"){if(l&&g.values)return u.then(function(a){a=a.result;p.addKeys(a);return b});var c=g.values?b.result.map(k):b.result;g.values?p.addKeys(c):q.addKeys(c)}else if(a==="openCursor"){var d=b,e=g.values;return d&&Object.create(d,{key:{get:function(){q.addKey(d.primaryKey);return d.key}},primaryKey:{get:function(){var a=d.primaryKey;q.addKey(a);return a}},value:{get:function(){e&&p.addKey(d.primaryKey);return d.value}}})}return b})}}return f[a].apply(this,arguments)}});return m}})}};function Qd(a,b,c,d){function e(b){var e=a(b.name||"");function f(a){return a!=null?b.extractKey(a):null}var g=function(a){return b.multiEntry&&h(a)?a.forEach(function(a){return e.addKey(a)}):e.addKey(a)};(c||d).forEach(function(a,b){a=c&&f(c[b]);b=d&&f(d[b]);T(a,b)!==0&&(a!=null&&g(a),b!=null&&g(b))})}b.indexes.forEach(e)}function Rd(a,b){return b.lower===void 0?!0:b.lowerOpen?T(a,b.lower)>0:T(a,b.lower)>=0}function Sd(a,b){return b.upper===void 0?!0:b.upperOpen?T(a,b.upper)<0:T(a,b.upper)<=0}function Td(a,b){return Rd(a,b)&&Sd(a,b)}function Ud(a,b,c,d,e,f){if(!c||c.length===0)return a;var g=b.query.index;d=d.schema.primaryKey;var h=d.extractKey,i=g.extractKey,j=(g.lowLevelIndex||g).extractKey;d=c.reduce(function(a,c){var d=a,e=c.type==="add"||c.type==="put"?c.values.filter(function(a){return Td(i(a),b.query.range)}).map(function(a){a=z(a);f&&Object.freeze(a);return a}):[];switch(c.type){case"add":d=a.concat(b.values?e:e.map(function(a){return h(a)}));break;case"put":var g=new Z().addKeys(c.values.map(function(a){return h(a)}));d=a.filter(function(a){a=b.values?h(a):a;return!Id(new Z(a),g)}).concat(b.values?e:e.map(function(a){return h(a)}));break;case"delete":var j=new Z().addKeys(c.keys);d=a.filter(function(a){a=b.values?h(a):a;return!Id(new Z(a),j)});break;case"deleteRange":var k=c.range;d=a.filter(function(a){return!Td(h(a),k)});break}return d},a);if(d===a)return a;d.sort(function(a,b){return T(j(a),j(b))||T(h(a),h(b))});b.limit&&b.limit<Infinity&&(d.length>b.limit?d.length=b.limit:a.length===b.limit&&d.length<b.limit&&(e.dirty=!0));return f?Object.freeze(d):d}var Vd={};function Wd(a,b){return T(a.lower,b.lower)===0&&T(a.upper,b.upper)===0&&!!a.lowerOpen===!!b.lowerOpen&&!!a.upperOpen===!!b.upperOpen}function Xd(a,b,c,d){if(a===void 0)return b!==void 0?-1:0;if(b===void 0)return 1;a=T(a,b);if(a===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return a}function Yd(a,b,c,d){if(a===void 0)return b!==void 0?1:0;if(b===void 0)return-1;a=T(a,b);if(a===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return a}function Zd(a,b){return Xd(a.lower,b.lower,a.lowerOpen,b.lowerOpen)<=0&&Yd(a.upper,b.upper,a.upperOpen,b.upperOpen)>=0}function $d(b,c,a,d){b=Vd["idb://".concat(b,"/").concat(c)];if(!b)return[];c=b.queries[a];if(!c)return[null,!1,b,null];var e=d.query?d.query.index.name:null;c=c[e||""];if(!c)return[null,!1,b,null];switch(a){case"query":e=c.find(function(a){return a.req.limit===d.limit&&a.req.values===d.values&&Wd(a.req.query.range,d.query.range)});if(e)return[e,!0,b,c];a=c.find(function(a){var b="limit"in a.req?a.req.limit:Infinity;return b>=d.limit&&(d.values?a.req.values:!0)&&Zd(a.req.query.range,d.query.range)});return[a,!1,b,c];case"count":e=c.find(function(a){return Wd(a.req.query.range,d.query.range)});return[e,!!e,b,c]}}function ae(a,b){return Object.keys(a).some(function(c){return b[c]&&Id(b[c],a[c])})}var be={},ce=!1;function de(a){Od(be,a),ce||(ce=!0,queueMicrotask(function(){ce=!1;var a=be;be={};ee(a)}))}function ee(a,b){b===void 0&&(b=!1);var c=new Set();for(var d in a){var e=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(e){var f=e[1];e=e[2];f=Vd["idb://".concat(f,"/").concat(e)];f&&fe(f,a,c,b)}}c.forEach(function(a){return a()})}function fe(a,b,c,d){var e=d&&[];for(var f=0,g=Object.entries(a.queries.query);f<g.length;f++){var h=g[f],i=h[0];h=h[1];var j=d&&[];for(var k=0,h=h;k<h.length;k++){var l=h[k];l.obsSet&&ae(b,l.obsSet)?l.subscribers.forEach(function(a){return c.add(a)}):d&&j.push(l)}d&&e.push([i,j])}if(d)for(l=0,k=e;l<k.length;l++){h=k[l];var i=h[0],j=h[1];a.queries.query[i]=j}}function ge(a,b,c,d){a.subscribers.add(c),d.addEventListener("abort",function(){a.subscribers["delete"](c),a.subscribers.size===0&&he(a,b)})}function he(a,b){setTimeout(function(){a.subscribers.size===0&&qa(b,a)},3e3)}var ie={stack:"dbcore",level:0,name:"Cache",create:function(a){var b=a.schema.name,c=d(d({},a),{transaction:function(c,d,e){var f=a.transaction(c,d,e);if(d==="readwrite"){var g=new AbortController();e=g.signal;var h=function(e){return function(){g.abort();if(d==="readwrite"){var h=new Set();for(var i=0,j=c;i<j.length;i++){var k=j[i],l=Vd["idb://".concat(b,"/").concat(k)];k=a.table(k);if(l){var m=l.optimisticOps.filter(function(a){return a.trans===f});if(m.length>0){l.optimisticOps=l.optimisticOps.filter(function(a){return a.trans!==f});for(var n=0,l=Object.values(l.queries.query);n<l.length;n++){var o=l[n];for(var p=0,q=o.slice();p<q.length;p++){var r=q[p];if(r.res!=null&&f.mutatedParts)if(e&&!r.dirty){var s=Object.isFrozen(r.res);s=Ud(r.res,r.req,m,k,r,s);r.dirty?(qa(o,r),r.subscribers.forEach(function(a){return h.add(a)})):s!==r.res&&(r.res=s,r.promise=L.resolve({result:s}))}else r.dirty&&qa(o,r),r.subscribers.forEach(function(a){return h.add(a)})}}}}}h.forEach(function(a){return a()})}}};f.addEventListener("abort",h(!1),{signal:e});f.addEventListener("error",h(!1),{signal:e});f.addEventListener("complete",h(!0),{signal:e})}return f},table:function(c){var e=a.table(c),f=e.schema.primaryKey,g=d(d({},e),{mutate:function(a){if(f.outbound||J.trans.db._options.cache==="disabled")return e.mutate(a);var g=Vd["idb://".concat(b,"/").concat(c)];if(!g)return e.mutate(a);var h=e.mutate(a);(a.type==="add"||a.type==="put")&&(a.values.length>=50||Ad(f,a).some(function(a){return a==null}))?h.then(function(b){var c=d(d({},a),{values:a.values.map(function(a,c){a=f.keyPath.includes(".")?z(a):d({},a);x(a,f.keyPath,b.results[c]);return a})});g.optimisticOps.push(c);queueMicrotask(function(){return de(a.mutatedParts)})}):(g.optimisticOps.push(a),de(a.mutatedParts),h["catch"](function(){qa(g.optimisticOps,a),de(a.mutatedParts)}));return h},query:function(a){if(!Md(J,e)||!Nd("query",a))return e.query(a);var d=J.trans.db._options.cache==="immutable",f=J,g=f.requery;f=f.signal;var h=$d(b,c,"query",a),i=h[0],j=h[1],k=h[2],l=h[3];if(i&&j)i.obsSet=a.obsSet;else{h=e.query(a).then(function(a){var b=a.result;i.res=b;if(d){for(var c=0,e=b.length;c<e;++c)Object.freeze(b[c]);Object.freeze(b)}else a.result=z(b);return a})["catch"](function(a){l&&i&&qa(l,i);return Promise.reject(a)});i={obsSet:a.obsSet,promise:h,subscribers:new Set(),type:"query",req:a,dirty:!1};l?l.push(i):(l=[i],k||(k=Vd["idb://".concat(b,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map(),optimisticOps:[],unsignaledParts:{}}),k.queries.query[a.query.index.name||""]=l)}ge(i,l,g,f);return i.promise.then(function(b){return{result:Ud(b.result,a,k===null||k===void 0?void 0:k.optimisticOps,e,i,d)}})}});return g}});return c}},je=function(){function a(b,c){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=c=d({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},c);this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange};f=c.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:F,dbReadyPromise:null,cancelOpen:F,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};g.dbReadyPromise=new L(function(a){g.dbReadyResolve=a});g.openCanceller=new L(function(a,b){g.cancelOpen=b});this._state=g;this.name=b;this.on=fc(this,"populate","blocked","versionchange","close",{ready:[Ma,F]});this.on.ready.subscribe=u(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||L.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=sc(this);this.Table=hc(this);this.Transaction=Gc(this);this.Version=kd(this);this.WhereClause=Cc(this);this.on("versionchange",function(a){a.newVersion>0?!1:!1,e.close()});this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=Lc(c.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,e._options.chromeTransactionDurability,d)};this._fireOnBlocked=function(a){e.on("blocked").fire(a),Pb.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})};this.use(Ed);this.use(ie);this.use(Pd);this.use(yd);this.use(Bd);this.vip=Object.create(this,{_vip:{value:!0}});f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new E.Type("Given version is not a positive number");a=Math.round(a*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new E.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Xc);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||J.letThrough||this._vip)?a():new L(function(a,c){if(b._state.openComplete)return c(new E.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._options.autoOpen){c(new E.DatabaseClosed());return}b.open()["catch"](F)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){var a=this;return Hb(I,function(){return sd(a)})};a.prototype._close=function(){var a=this._state,b=Pb.indexOf(this);b>=0&&Pb.splice(b,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this._novip.idbdb=null}a.dbReadyPromise=new L(function(b){a.dbReadyResolve=b});a.openCanceller=new L(function(b,c){a.cancelOpen=c})};a.prototype.close=function(){this._close();var a=this._state;this._options.autoOpen=!1;a.dbOpenError=new E.DatabaseClosed();a.isBeingOpened&&a.cancelOpen(a.dbOpenError)};a.prototype["delete"]=function(){var a=this,b=arguments.length>0,c=this._state;return new L(function(d,e){var f=function(){a.close();var b=a._deps.indexedDB.deleteDatabase(a.name);b.onsuccess=M(function(){pd(a._deps,a.name),d()});b.onerror=W(e);b.onblocked=a._fireOnBlocked};if(b)throw new E.InvalidArgument("Arguments not allowed in db.delete()");c.isBeingOpened?c.dbReadyPromise.then(f):f()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,"tables",{get:function(){var a=this;return g(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0});a.prototype.transaction=function(){var a=ud.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=J.trans;(!e||e.db!==this||a.indexOf("!")!==-1)&&(e=null);var f=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a});if(a=="r"||a===Vb)g=Vb;else if(a=="rw"||a==Wb)g=Wb;else throw new E.InvalidArgument("Invalid transaction mode: "+a);if(e){if(e.mode===Vb&&g===Wb)if(f)e=null;else throw new E.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new E.SubTransaction("Table "+a+" not included in parent transaction.")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):R(a)}var i=vd.bind(null,this,g,h,e,c);return e?e._promise(g,i,"lock"):J.trans?Hb(J.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!l(this._allTables,a))throw new E.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]};return a}(),ke=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",le=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return this._subscribe(!a||typeof a==="function"?{next:a,error:b,complete:c}:a)};a.prototype[ke]=function(){return this};return a}(),me;try{me={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch(a){me={indexedDB:null,IDBKeyRange:null}}function ne(a){var b=!1,c,d=new le(function(d){var e=sa(a);function f(b){e&&Cb();b=O(a,b);e&&b["finally"](P);return b}var g=!1,h,i={},j={},k={get closed(){return g},unsubscribe:function(){if(g)return;g=!0;h&&h.abort();l&&Y.storagemutated.unsubscribe(n)}};d.start&&d.start(k);var l=!1;function m(){return ae(j,i)}var n=function(a){Od(i,a),m()&&o()},o=function(){if(g||!me.indexedDB)return;i={};var a={};h&&h.abort();h=new AbortController();var e={subscr:a,signal:h.signal,requery:o,trans:null},k=f(e);Promise.resolve(k).then(function(f){b=!0;c=f;if(g||e.signal.aborted)return;i={};j=a;!ja(j)&&!l&&(Y(Ec,n),l=!0);d.next&&d.next(f)},function(a){b=!1;if(!["DatabaseClosedError","AbortError"].includes(a===null||a===void 0?void 0:a.name)){if(g)return;d.error&&d.error(a)}})};o();return k});d.hasValue=function(){return b};d.getValue=function(){return c};return d}var oe=je;m(oe,d(d({},D),{"delete":function(a){a=new oe(a,{addons:[]});return a["delete"]()},exists:function(a){return new oe(a,{addons:[]}).open().then(function(a){a.close();return!0})["catch"]("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return nd(oe.dependencies).then(a)}catch(a){return R(new E.MissingAPI())}},defineClass:function(){function a(a){i(this,a)}return a},ignoreTransaction:function(a){return J.trans?Hb(J.transless,a):a()},vip:qd,async:function(a){return function(){try{var b=td(a.apply(this,arguments));return!b||typeof b.then!=="function"?L.resolve(b):b}catch(a){return R(a)}}},spawn:function(a,b,c){try{a=td(a.apply(c,b||[]));return!a||typeof a.then!=="function"?L.resolve(a):a}catch(a){return R(a)}},currentTransaction:{get:function(){return J.trans||null}},waitFor:function(a,b){a=L.resolve(typeof a==="function"?oe.ignoreTransaction(a):a).timeout(b||6e4);return J.trans?J.trans.waitFor(a):a},Promise:L,debug:{get:function(){return B},set:function(a){ta(a,a==="dexie"?function(){return!0}:Tb)}},derive:p,extend:i,props:m,override:u,Events:fc,on:Y,liveQuery:ne,extendObservabilitySet:Od,getByKeyPath:w,setByKeyPath:x,delByKeyPath:da,shallowClone:ea,deepClone:z,getObjectDiff:zd,cmp:T,asap:aa,minKey:Nb,addons:[],connections:Pb,errnames:Ca,dependencies:me,cache:Vd,semVer:y,version:y.split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,c*2)})}));oe.maxKey=Lc(oe.dependencies.IDBKeyRange);typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"&&(Y(Ec,function(a){if(!$){var b;Qb?(b=document.createEvent("CustomEvent"),b.initCustomEvent(X,!0,!0,a)):b=new CustomEvent(X,{detail:a});$=!0;dispatchEvent(b);$=!1}}),addEventListener(X,function(a){a=a.detail;$||pe(a)}));function pe(a){var b=$;try{$=!0,Y.storagemutated.fire(a),ee(a,!0)}finally{$=b}}var $=!1;if(typeof BroadcastChannel!=="undefined"){var qe=new BroadcastChannel(X);typeof qe.unref==="function"&&qe.unref();Y(Ec,function(a){$||qe.postMessage(a)});qe.onmessage=function(a){a.data&&pe(a.data)}}else if(typeof self!=="undefined"&&typeof navigator!=="undefined"){Y(Ec,function(a){try{$||(typeof localStorage!=="undefined"&&localStorage.setItem(X,JSON.stringify({trig:Math.random(),changedParts:a})),typeof self.clients==="object"&&e([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(b){return b.postMessage({type:X,changedParts:a})}))}catch(a){}});typeof addEventListener!=="undefined"&&addEventListener("storage",function(a){if(a.key===X){a=JSON.parse(a.newValue);a&&pe(a.changedParts)}});xd=self.document&&navigator.serviceWorker;xd&&xd.addEventListener("message",re)}function re(a){a=a.data;a&&a.type===X&&pe(a.changedParts)}L.rejectionMapper=Fa;ta(B,Tb);D=Object.freeze({__proto__:null,Dexie:je,liveQuery:ne,Entity:$b,cmp:T,"default":je,RangeSet:Z,mergeRanges:Hd,rangesOverlap:Id});d(je,D,{"default":je});return je})}var j=!1;function k(){j||(j=!0,i());return h.exports}function b(a){switch(a){case void 0:return k()}}e.exports=b}),null);
__d("dexie_maw",["dexie-4.0.1-alpha.22"],(function(a,b,c,d,e,f){e.exports=b("dexie-4.0.1-alpha.22")()}),null);
/**
 * License: https://www.facebook.com/legal/license/CCT5pM3qiNk/
 */
__d("tweetnacl-auth-1.0.1",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f){"use strict";var g=b("tweetnacl-1.0.3");c={};var h={exports:c};function i(){(function(a,b){typeof h!=="undefined"&&h.exports?h.exports=b(g()):a.nacl.auth=b(a.nacl)})(this,function(a){if(!a)throw new Error("tweetnacl not loaded");var b=128,c=64;function d(d,e){var f=new Uint8Array(b+Math.max(c,d.length)),g;e.length>b&&(e=a.hash(e));for(g=0;g<b;g++)f[g]=54;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);d=a.hash(f.subarray(0,b+d.length));for(g=0;g<b;g++)f[g]=92;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);return a.hash(f.subarray(0,b+d.length))}function e(a,b){var c=new Uint8Array(32);c.set(d(a,b).subarray(0,32));return c}e.full=function(a,b){return d(a,b)};e.authLength=32;e.authFullLength=64;e.keyLength=32;return e})}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
__d("tweetnacl-auth",["tweetnacl-auth-1.0.1"],(function(a,b,c,d,e,f){e.exports=b("tweetnacl-auth-1.0.1")()}),null);/*FB_PKG_DELIM*/
__d("LSCommunityMemberListSource",[],(function(a,b,c,d,e,f){a=Object.freeze({MEMBER_LIST:0,INVITE_MEMBER_LIST:1,INVITE_ACTIVE_MEMBER:2,INVITE_CONVERSATION_STARTER:3,INVITE_NEW_MEMBERS:4,INVITE_FACEBOOK_FRIENDS:5,INVITE_ALL_MEMBERS:6,THREAD_PARTICIPANT_LIST:7,MENTION_LIST:8,POST_AUTHOR:9,POST_COMMENTER:10,INVITE_NON_MEMBERS:11,PENDING_JOIN_REQUEST:12,BLOCKED_MEMBER_LIST:13,PROFILE_SHEET:14,INVITE_FB_FRIENDS_AND_FOLLOWERS:15,INVITE_ALL_FB_FRIENDS:16,INVITE_MOST_INTERACTED_FB_FRIENDS:17,INVITE_TOP_FANS:18,INVITE_TOP_COMMENTERS:19,INVITE_NEW_FOLLOWERS:20,INVITE_ALL_FOLLOWERS:21,INVITE_MOST_ENGAGED_FOLLOWERS:22,SMART_INVITE_MEMBERS:23,INVITE_GROUP_THREAD_MEMBERS:24,THREAD_JOIN_REQUEST_QUEUE:25,OPTIMISTIC_CHAT_CREATION_INVITE_MEMBER_LIST:26,THREAD_PARTICIPANT_BLOCK_MEMBER_LIST:27,ADMIN_SUGGESTED_ACTIONS:28});f["default"]=a}),66);
__d("LSContactCapabilityBitOffset",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSAGE:0,REPLY_MESSAGE:1,JOIN_GROUP:2,BLOCK:3,SEE:4,SEE_FACEBOOK_PROFILE:5,PAYMENT:6,CAMERA:7,MEDIA_PICKER:8,STICKER:9,GIF:10,AUDIO_CLIPS:11,SHARED_MEDIA:12,REACTIONS:13,SEEN_HEADS:14,THREAD_DETAILS:15,RTC_VIDEO_CALL:16,RTC_VOICE_CALL:17,THREAD_FEEDBACK_AND_REPORT:18,GO_TO_SECRET_CONVERSATION:19,MAKE_ADMIN:20,REMOVE_FROM_GROUP:21,REMOVE_AS_ADMIN:22,VERIFIED:23,DISAPPEARING_MODE:24,SEE_MESSAGE:25,PSEUDO_BLOCK:26,PUSHABLE:27,MESSAGE_BLOCK_PLACED:28,FACEBOOK_BLOCK_PLACED:29,VIEWER_IS_UNCONNECTED:64,PAGE_PLATFORM_BOT:65,RESTRICT_PLACED:66,IS_XAC_ELIGIBLE:67,IS_GROUPS_XAC_ELIGIBLE:68,IS_GROUPS_XAC_CALLING_ELIGIBLE:69,IS_E2EE_ONLY:70,IS_ELIGIBLE_FOR_SAFETY_NOTICE:71,NOVI:72,IS_CONTACT_SHAREABLE:73,IS_HIDDEN:74,IS_THREAD_CUTOVER_USER:75,HAS_CUTOVER_THREAD:76,IS_COMMUNITY_BOT_PAGE:77,IS_NOT_SEARCHABLE:78,CAN_UPSELL_VOICEMAIL:79,DEFAULT_E2EE_THREADS:80,INCALL_CAPTIONS:81,IS_INTERNAL:82,DEFAULT_E2EE_THREAD_ONE_TO_ONE:83,IS_GROUP_UPDATES_BOT:84,LINK_TO_IG_PROFILE:85,IS_MARKETPLACE_NOT_CONSENTED:86,IS_GAMING_NOT_CONSENTED:87,DISABLE_MP_DMA_THREAD_COMPOSER:88,IS_GAMING_CONSENT_UNDECIDED:89,IS_GAMING_CONSENTED:90,IS_MSPLIT_NOT_CONSENTED:91,IS_MSPLIT_CONSENT_UNDECIDED:92,WORK_CHAT_GOVERNANCE_BLOCKED:93,HAS_P2P_DISAPPEARING_MESSAGES_THREAD:94,HAS_INSTAMADILLO_CUTOVER_THREAD:95});f["default"]=a}),66);
__d("LS_Contact",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value.phoneNumber}function c(a){return a.value.normalizedNameForSearch}function d(a){return a.value.profilePictureFallbackUrl}function e(a){return a.value.profilePictureUrlExpirationTimestampMs}function g(a){return a.value.profilePictureLargeUrl}function h(a){return a.value.profilePictureLargeFallbackUrl}function i(a){return a.value.profilePictureLargeUrlExpirationTimestampMs}function j(a){return a.value.contactReachabilityStatusType}function k(a){return a.value.capabilities2}function l(a){return a.value.id}function m(a){return a.value.profilePictureUrl}function n(a){return a.value.name}function o(a){return a.value.normalizedSearchTerms}function p(a){return a.value.isMessengerUser}function q(a){return a.value.isMemorialized}function r(a){return a.value.isManagedByViewer}function s(a){return a.value.blockedByViewerStatus}function t(a){return a.value.optimisticBlockedByViewerStatus}function u(a){return a.value.optimisticBlockedByViewerStatusTimestampMs}function v(a){return a.value.pendingMnUserBlockAction}function w(a){return a.value.pendingMnUserBlockActionTimestampMs}function x(a){return a.value.pendingFbUserBlockAction}function y(a){return a.value.pendingFbUserBlockActionTimestampMs}function z(a){return a.value.rank}function A(a){return a.value.firstName}function B(a){return a.value.contactType}function C(a){return a.value.pendingMessengerRestrictAction}function D(a){return a.value.contactTypeExact}function E(a){return a.value.messengerCallLogThirdPartyId}function F(a){return a.value.profileRingColor}function G(a){return a.value.requiresMultiway}function H(a){return a.value.blockedSinceTimestampMs}function I(a){return a.value.fbUnblockedSinceTimestampMs}function J(a){return a.value.canViewerMessage}function K(a){return a.value.emailAddress}function L(a){return a.value.profileRingColorExpirationTimestampMs}function M(a){return a.value.workCompanyId}function N(a){return a.value.workCompanyName}function O(a){return a.value.workJobTitle}function P(a){return a.value.profileRingState}function Q(a){return a.value.deviceContactId}function R(a){return a.value.workForeignEntityType}function S(a){return a.value.capabilities}function T(a){return a.value.contactViewerRelationship}function U(a){return a.value.gender}function V(a){return a.value.secondaryName}function W(a){return a.value.restrictionType}function X(a){return a.value.waConnectStatus}function Y(a){return a.value.isEmployee}function Z(a){return a.value.pageType}function $(a){return a.value.authorityLevel}function aa(a){return a.value}f.__context=a;f.phone_number=b;f.normalized_name_for_search=c;f.profile_picture_fallback_url=d;f.profile_picture_url_expiration_timestamp_ms=e;f.profile_picture_large_url=g;f.profile_picture_large_fallback_url=h;f.profile_picture_large_url_expiration_timestamp_ms=i;f.contact_reachability_status_type=j;f.capabilities_2=k;f.id_=l;f.profile_picture_url=m;f.name=n;f.normalized_search_terms=o;f.is_messenger_user=p;f.is_memorialized=q;f.is_managed_by_viewer=r;f.blocked_by_viewer_status=s;f.optimistic_blocked_by_viewer_status=t;f.optimistic_blocked_by_viewer_status_timestamp_ms=u;f.pending_mn_user_block_action=v;f.pending_mn_user_block_action_timestamp_ms=w;f.pending_fb_user_block_action=x;f.pending_fb_user_block_action_timestamp_ms=y;f.rank=z;f.first_name=A;f.contact_type=B;f.pending_messenger_restrict_action=C;f.contact_type_exact=D;f.messenger_call_log_third_party_id=E;f.profile_ring_color=F;f.requires_multiway=G;f.blocked_since_timestamp_ms=H;f.fb_unblocked_since_timestamp_ms=I;f.can_viewer_message=J;f.email_address=K;f.profile_ring_color_expiration_timestamp_ms=L;f.work_company_id=M;f.work_company_name=N;f.work_job_title=O;f.profile_ring_state=P;f.device_contact_id=Q;f.work_foreign_entity_type=R;f.capabilities=S;f.contact_viewer_relationship=T;f.gender=U;f.secondary_name=V;f.restriction_type=W;f.wa_connect_status=X;f.is_employee=Y;f.page_type=Z;f.authority_level=$;f.__lightspeed_table_row=aa}),66);
__d("LSContactHasCapability__has_capability$normalization.graphql",["LS_Contact","LS_Contact"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSContactHasCapability__has_capability$normalization",selections:[{kind:"ClientExtension",selections:[{name:"capabilities",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").capabilities,rootFragment:null}},{name:"capabilities_2",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").capabilities_2,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSContactHasCapability__has_capability.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSContactHasCapability__has_capability",selections:[{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities_2",storageKey:null}],type:"LS_Contact",abstractKey:null};e.exports=a}),null);
__d("LSRelayConnections",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.end_cursor}function b(a){return a.has_next_page}function d(a){return a.has_previous_page}function e(a){return a.start_cursor}function h(a){return JSON.stringify(a)}function i(a){return JSON.parse(a)}function f(a,b){if(a.length>b.first+1)throw c("FBLogger")("meteora").mustfixThrow("Got more edges (%s) than expected given the limit (%s).",a.length,b.first);var d=a[0],e=a.length>=b.first+1;b=e?b.first-1:a.length-1;a=a.length>0?a[b]:null;return{end_cursor:a!=null?h(a.value[0]):null,has_next_page:e,has_previous_page:!1,start_cursor:d!=null?h(d.value[0]):null}}function j(a){var b;if(((b=a.first)!=null?b:0)<=0)throw c("FBLogger")("meteora").mustfixThrow("Invalid `first` argument passed to connection: expected > 0 but got %s",String(a.first))}function k(a,b){a=a;b.after!=null&&(a=a.bounds({gt:i(b.after)}));b.before!=null&&(a=a.bounds({lt:i(b.before)}));a=a.take(b.first+1);return a}g.end_cursor=a;g.has_next_page=b;g.has_previous_page=d;g.start_cursor=e;g.keyToCursor=h;g.cursorToKey=i;g.pageInfoFromEdges=f;g.validateArgsOrThrow=j;g.applyConnectionArgs=k}),98);
__d("LSRelayLiveResolvers",["LSRelayConnections","ReQLObservable","areEqual","emptyFunction","relay-runtime","relay-runtime/store/experimental-live-resolvers/LiveResolverSuspenseSentinel","transformObservableToLiveState"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return j(k(a,b),function(b){return b.map(function(b){b[0];b=b[1];return{context:a,value:b}})})}function b(a,b,c){d("LSRelayConnections").validateArgsOrThrow(c);return j(k(a,function(a){return d("LSRelayConnections").applyConnectionArgs(b(a),c)}),function(b){b=b.map(function(b){return{context:a,value:b}});return{context:a,value:{edges:b.slice(0,c.first),page_info:d("LSRelayConnections").pageInfoFromEdges(b,c)}}})}function e(a,b){return j(k(a,function(a){return b(a).take(1)}),function(b){return b.length>0?{context:a,value:b[0][1]}:null})}function f(a,b,c){return j(k(a,function(a){return b(a).take(1)}),function(b){return{context:a,value:c(b==null?void 0:(b=b[0])==null?void 0:b[1])}})}var i={read:function(){return null},subscribe:function(){return c("emptyFunction")}};function j(a,b){var c=a.read;a=a.subscribe;return{read:function(){var a=c();if(d("relay-runtime/store/experimental-live-resolvers/LiveResolverSuspenseSentinel").isSuspenseSentinel(a))return d("relay-runtime").suspenseSentinel();else return b(a)},subscribe:a}}function k(a,b){return c("transformObservableToLiveState")(d("relay-runtime").Observable.create(function(e){var f,g=d("ReQLObservable").create(a.db,b).subscribe({complete:e.complete,error:e.error,next:function(a){if((h||(h=c("areEqual")))(a,f))return;f=a;e.next(a)}});return g}))}g.iterableToPluralFieldLiveResolver_MAY_CAUSE_OVERFETCHING=a;g.iterableToConnectionLiveResolver=b;g.iterableToFirstValueLiveResolver=e;g.iterableToMappedValueLiveResolver=f;g.nullValueLiveState=i;g.mapLiveState=j;g.makeLiveState=k}),98);
__d("LS_Message",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){function a(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("contacts")).getKeyRange(a.value.senderId)})}function b(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("threads")).getKeyRange(a.value.threadKey)})}function c(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("attachments")).getKeyRange(a.value.threadKey,a.value.messageId)},b)}function e(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("quick_reply_ctas")).getKeyRange(a.value.threadKey,a.value.messageId)},b)}function f(a){return d("LSRelayLiveResolvers").iterableToPluralFieldLiveResolver_MAY_CAUSE_OVERFETCHING(a.context,function(b){return d("ReQL").fromTableAscending(b.table("quick_reply_ctas")).getKeyRange(a.value.threadKey,a.value.messageId)})}function h(a){return a.context}function i(a){return a.value.text}function j(a){return a.value.subscriptErrorMessage}function k(a){return a.value.authorityLevel}function l(a){return a.value.threadKey}function m(a){return a.value.timestampMs}function n(a){return a.value.primarySortKey}function o(a){return a.value.secondarySortKey}function p(a){return a.value.messageId}function q(a){return a.value.offlineThreadingId}function r(a){return a.value.senderId}function s(a){return a.value.stickerId}function t(a){return a.value.isAdminMessage}function u(a){return a.value.messageRenderingType}function v(a){return a.value.sendStatus}function w(a){return a.value.sendStatusV2}function x(a){return a.value.isUnsent}function y(a){return a.value.unsentTimestampMs}function z(a){return a.value.mentionOffsets}function A(a){return a.value.mentionLengths}function B(a){return a.value.mentionIds}function C(a){return a.value.mentionTypes}function D(a){return a.value.replySourceId}function E(a){return a.value.replySourceType}function F(a){return a.value.replySourceTypeV2}function G(a){return a.value.replyStatus}function H(a){return a.value.replySnippet}function I(a){return a.value.replyMessageText}function J(a){return a.value.replyToUserId}function K(a){return a.value.replyMediaExpirationTimestampMs}function L(a){return a.value.replyMediaUrl}function M(a){return a.value.replyMediaPreviewWidth}function N(a){return a.value.replyMediaPreviewHeight}function O(a){return a.value.replyMediaUrlMimeType}function P(a){return a.value.replyMediaUrlFallback}function Q(a){return a.value.replyCtaId}function R(a){return a.value.replyCtaTitle}function S(a){return a.value.replyAttachmentType}function T(a){return a.value.replyAttachmentId}function U(a){return a.value.replyAttachmentExtra}function V(a){return a.value.replyType}function W(a){return a.value.isForwarded}function X(a){return a.value.forwardScore}function Y(a){return a.value.hasQuickReplies}function Z(a){return a.value.adminMsgCtaId}function $(a){return a.value.adminMsgCtaTitle}function aa(a){return a.value.adminMsgCtaType}function ba(a){return a.value.cannotUnsendReason}function ca(a){return a.value.textHasLinks}function da(a){return a.value.viewFlags}function ea(a){return a.value.displayedContentTypes}function fa(a){return a.value.viewedPluginKey}function ga(a){return a.value.viewedPluginContext}function ha(a){return a.value.quickReplyType}function ia(a){return a.value.hotEmojiSize}function ja(a){return a.value.replySourceTimestampMs}function ka(a){return a.value.ephemeralDurationInSec}function la(a){return a.value.msUntilExpirationTs}function ma(a){return a.value.localDataId}function na(a){return a.value.ephemeralExpirationTs}function oa(a){return a.value.takedownState}function pa(a){return a.value.isCollapsed}function qa(a){return a.value.subthreadKey}function ra(a){return a.value.botResponseId}function sa(a){return a.value.editCount}function ta(a){return a.value.isPaidPartnership}function ua(a){return a.value.adminSignatureName}function va(a){return a.value.adminSignatureProfileUrl}function wa(a){return a.value.adminSignatureCreatorType}function xa(a){return a.value.transportKey}function ya(a){return a.value.ebUploadTs}function za(a){return a.value.xmaReceiverFetchParams}function Aa(a){return a.value}g.contact=a;g.thread=b;g.attachments=c;g.quick_reply_ctas=e;g.quick_reply_ctas_MAY_CAUSE_OVERFETCHING=f;g.__context=h;g.text=i;g.subscript_error_message=j;g.authority_level=k;g.thread_key=l;g.timestamp_ms=m;g.primary_sort_key=n;g.secondary_sort_key=o;g.message_id=p;g.offline_threading_id=q;g.sender_id=r;g.sticker_id=s;g.is_admin_message=t;g.message_rendering_type=u;g.send_status=v;g.send_status_v2=w;g.is_unsent=x;g.unsent_timestamp_ms=y;g.mention_offsets=z;g.mention_lengths=A;g.mention_ids=B;g.mention_types=C;g.reply_source_id=D;g.reply_source_type=E;g.reply_source_type_v2=F;g.reply_status=G;g.reply_snippet=H;g.reply_message_text=I;g.reply_to_user_id=J;g.reply_media_expiration_timestamp_ms=K;g.reply_media_url=L;g.reply_media_preview_width=M;g.reply_media_preview_height=N;g.reply_media_url_mime_type=O;g.reply_media_url_fallback=P;g.reply_cta_id=Q;g.reply_cta_title=R;g.reply_attachment_type=S;g.reply_attachment_id=T;g.reply_attachment_extra=U;g.reply_type=V;g.is_forwarded=W;g.forward_score=X;g.has_quick_replies=Y;g.admin_msg_cta_id=Z;g.admin_msg_cta_title=$;g.admin_msg_cta_type=aa;g.cannot_unsend_reason=ba;g.text_has_links=ca;g.view_flags=da;g.displayed_content_types=ea;g.viewed_plugin_key=fa;g.viewed_plugin_context=ga;g.quick_reply_type=ha;g.hot_emoji_size=ia;g.reply_source_timestamp_ms=ja;g.ephemeral_duration_in_sec=ka;g.ms_until_expiration_ts=la;g.local_data_id=ma;g.ephemeral_expiration_ts=na;g.takedown_state=oa;g.is_collapsed=pa;g.subthread_key=qa;g.bot_response_id=ra;g.edit_count=sa;g.is_paid_partnership=ta;g.admin_signature_name=ua;g.admin_signature_profile_url=va;g.admin_signature_creator_type=wa;g.transport_key=xa;g.eb_upload_ts=ya;g.xma_receiver_fetch_params=za;g.__lightspeed_table_row=Aa}),98);
__d("LS_Thread",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){function a(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("participants")).getKeyRange(a.value.threadKey)},b)}function b(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableDescending(b.table("messages").index("messageDisplayOrder")).getKeyRange(a.value.threadKey)},b)}function c(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("thread_nullstate")).getKeyRange(a.value.threadKey)})}function e(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("community_folders")).getKeyRange(a.value.parentThreadKey)})}function f(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("mi_act_mapping_table")).getKeyRange(a.value.threadKey)},b)}function h(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("rtc_ongoing_calls_on_threads_v2")).getKeyRange(a.value.threadKey)})}function i(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("thread_proactive_warning_settings")).getKeyRange(a.value.threadKey)})}function j(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("in_thread_banner")).getKeyRange(a.value.threadKey)},b)}function k(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("cutover_threads")).getKeyRange(a.value.threadKey)})}function l(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("custom_thread_commands")).getKeyRange(a.value.threadKey)},b)}function m(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("discoverable_chat_participants")).getKeyRange(a.value.threadKey)},b)}function n(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("persistent_menu_items")).getKeyRange(a.value.threadKey)},b)}function o(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableDescending(b.table("thread_limits")).getKeyRange(a.value.threadKey)})}function p(a){return a.context}function q(a){return a.value.lastActivityTimestampMs}function r(a){return a.value.lastReadWatermarkTimestampMs}function s(a){return a.value.snippet}function t(a){return a.value.threadName}function u(a){return a.value.threadPictureUrl}function v(a){return a.value.needsAdminApprovalForNewParticipant}function w(a){return a.value.authorityLevel}function x(a){return a.value.threadKey}function y(a){return a.value.mailboxType}function z(a){return a.value.threadType}function A(a){return a.value.folderName}function B(a){return a.value.threadPictureUrlFallback}function C(a){return a.value.threadPictureUrlExpirationTimestampMs}function D(a){return a.value.removeWatermarkTimestampMs}function E(a){return a.value.muteExpireTimeMs}function F(a){return a.value.muteMentionExpireTimeMs}function G(a){return a.value.muteCallsExpireTimeMs}function H(a){return a.value.groupNotificationSettings}function I(a){return a.value.isAdminSnippet}function J(a){return a.value.snippetSenderContactId}function K(a){return a.value.snippetText}function L(a){return a.value.snippetStringHash}function M(a){return a.value.snippetStringArgument1}function N(a){return a.value.snippetAttribution}function O(a){return a.value.snippetAttributionStringHash}function P(a){return a.value.disappearingSettingTtl}function Q(a){return a.value.disappearingSettingUpdatedTs}function R(a){return a.value.disappearingSettingUpdatedBy}function S(a){return a.value.ongoingCallState}function T(a){return a.value.cannotReplyReason}function U(a){return a.value.customEmoji}function V(a){return a.value.customEmojiImageUrl}function W(a){return a.value.avatarStickerInstructionKeyId}function X(a){return a.value.avatarStickerId}function Y(a){return a.value.avatarStickerThumbnailImageUrl}function Z(a){return a.value.avatarStickerThumbnailImageMimeType}function $(a){return a.value.avatarStickerOriginalImageUrl}function aa(a){return a.value.avatarStickerOriginalImageMimeType}function ba(a){return a.value.outgoingBubbleColor}function ca(a){return a.value.themeFbid}function da(a){return a.value.parentThreadKey}function ea(a){return a.value.nullstateDescriptionText1}function fa(a){return a.value.nullstateDescriptionType1}function ga(a){return a.value.nullstateDescriptionText2}function ha(a){return a.value.nullstateDescriptionType2}function ia(a){return a.value.nullstateDescriptionText3}function ja(a){return a.value.nullstateDescriptionType3}function ka(a){return a.value.snippetHasEmoji}function la(a){return a.value.hasPersistentMenu}function ma(a){return a.value.disableComposerInput}function na(a){return a.value.cannotUnsendReason}function oa(a){return a.value.viewedPluginKey}function pa(a){return a.value.viewedPluginContext}function qa(a){return a.value.clientThreadKey}function ra(a){return a.value.capabilities}function sa(a){return a.value.shouldRoundThreadPicture}function ta(a){return a.value.proactiveWarningDismissTime}function ua(a){return a.value.isCustomThreadPicture}function va(a){return a.value.otidOfFirstMessage}function wa(a){return a.value.normalizedSearchTerms}function xa(a){return a.value.additionalThreadContext}function ya(a){return a.value.disappearingThreadKey}function za(a){return a.value.isDisappearingMode}function Aa(a){return a.value.disappearingModeInitiator}function Ba(a){return a.value.unreadDisappearingMessageCount}function Ca(a){return a.value.lastMessageCtaId}function Da(a){return a.value.lastMessageCtaType}function Ea(a){return a.value.lastMessageCtaTimestampMs}function Fa(a){return a.value.consistentThreadFbid}function Ga(a){return a.value.threadDescription}function Ha(a){return a.value.unsendLimitMs}function Ia(a){return a.value.capabilities2}function Ja(a){return a.value.capabilities3}function Ka(a){return a.value.syncGroup}function La(a){return a.value.threadInvitesEnabled}function Ma(a){return a.value.threadInviteLink}function Na(a){return a.value.isAllUnreadMessageMissedCallXma}function Oa(a){return a.value.numUnreadSubthreads}function Pa(a){return a.value.subthreadCount}function Qa(a){return a.value.lastNonMissedCallXmaMessageTimestampMs}function Ra(a){return a.value.isHidden}function Sa(a){return a.value.threadInvitesEnabledV2}function Ta(a){return a.value.joinRequestApprovalSetting}function Ua(a){return a.value.hasPendingJoinRequest}function Va(a){return a.value.pendingJoinRequestsCount}function Wa(a){return a.value.hasPendingInvitation}function Xa(a){return a.value.eventStartTimestampMs}function Ya(a){return a.value.eventEndTimestampMs}function Za(a){return a.value.takedownState}function $a(a){return a.value.memberCount}function ab(a){return a.value.admodCount}function bb(a){return a.value.secondaryParentThreadKey}function cb(a){return a.value.igFolder}function db(a){return a.value.inviterId}function eb(a){return a.value.threadTags}function fb(a){return a.value.isReadReceiptsDisabled}function gb(a){return a.value.readReceiptsDisabledV2}function hb(a){return a.value.threadStatus}function ib(a){return a.value.ctmAdId}function jb(a){return a.value.threadSubtype}function kb(a){return a.value.pauseThreadTimestamp}function lb(a){return a.value.metadata}function mb(a){return a.value.capabilities4}function nb(a){return a.value}g.participants=a;g.messages=b;g.nullstate=c;g.community_folder=e;g.mi_act_mapping=f;g.rtc_ongoing_calls=h;g.thread_proactive_warning_settings=i;g.in_thread_banner=j;g.cutover_thread=k;g.custom_thread_commands=l;g.discoverable_chat_participants=m;g.persistent_menu_items=n;g.thread_limit=o;g.__context=p;g.last_activity_timestamp_ms=q;g.last_read_watermark_timestamp_ms=r;g.snippet=s;g.thread_name=t;g.thread_picture_url=u;g.needs_admin_approval_for_new_participant=v;g.authority_level=w;g.thread_key=x;g.mailbox_type=y;g.thread_type=z;g.folder_name=A;g.thread_picture_url_fallback=B;g.thread_picture_url_expiration_timestamp_ms=C;g.remove_watermark_timestamp_ms=D;g.mute_expire_time_ms=E;g.mute_mention_expire_time_ms=F;g.mute_calls_expire_time_ms=G;g.group_notification_settings=H;g.is_admin_snippet=I;g.snippet_sender_contact_id=J;g.snippet_text=K;g.snippet_string_hash=L;g.snippet_string_argument1=M;g.snippet_attribution=N;g.snippet_attribution_string_hash=O;g.disappearing_setting_ttl=P;g.disappearing_setting_updated_ts=Q;g.disappearing_setting_updated_by=R;g.ongoing_call_state=S;g.cannot_reply_reason=T;g.custom_emoji=U;g.custom_emoji_image_url=V;g.avatar_sticker_instruction_key_id=W;g.avatar_sticker_id=X;g.avatar_sticker_thumbnail_image_url=Y;g.avatar_sticker_thumbnail_image_mime_type=Z;g.avatar_sticker_original_image_url=$;g.avatar_sticker_original_image_mime_type=aa;g.outgoing_bubble_color=ba;g.theme_fbid=ca;g.parent_thread_key=da;g.nullstate_description_text1=ea;g.nullstate_description_type1=fa;g.nullstate_description_text2=ga;g.nullstate_description_type2=ha;g.nullstate_description_text3=ia;g.nullstate_description_type3=ja;g.snippet_has_emoji=ka;g.has_persistent_menu=la;g.disable_composer_input=ma;g.cannot_unsend_reason=na;g.viewed_plugin_key=oa;g.viewed_plugin_context=pa;g.client_thread_key=qa;g.capabilities=ra;g.should_round_thread_picture=sa;g.proactive_warning_dismiss_time=ta;g.is_custom_thread_picture=ua;g.otid_of_first_message=va;g.normalized_search_terms=wa;g.additional_thread_context=xa;g.disappearing_thread_key=ya;g.is_disappearing_mode=za;g.disappearing_mode_initiator=Aa;g.unread_disappearing_message_count=Ba;g.last_message_cta_id=Ca;g.last_message_cta_type=Da;g.last_message_cta_timestamp_ms=Ea;g.consistent_thread_fbid=Fa;g.thread_description=Ga;g.unsend_limit_ms=Ha;g.capabilities_2=Ia;g.capabilities_3=Ja;g.sync_group=Ka;g.thread_invites_enabled=La;g.thread_invite_link=Ma;g.is_all_unread_message_missed_call_xma=Na;g.num_unread_subthreads=Oa;g.subthread_count=Pa;g.last_non_missed_call_xma_message_timestamp_ms=Qa;g.is_hidden=Ra;g.thread_invites_enabled_v2=Sa;g.join_request_approval_setting=Ta;g.has_pending_join_request=Ua;g.pending_join_requests_count=Va;g.has_pending_invitation=Wa;g.event_start_timestamp_ms=Xa;g.event_end_timestamp_ms=Ya;g.takedown_state=Za;g.member_count=$a;g.admod_count=ab;g.secondary_parent_thread_key=bb;g.ig_folder=cb;g.inviter_id=db;g.thread_tags=eb;g.is_read_receipts_disabled=fb;g.read_receipts_disabled_v2=gb;g.thread_status=hb;g.ctm_ad_id=ib;g.thread_subtype=jb;g.pause_thread_timestamp=kb;g.metadata=lb;g.capabilities_4=mb;g.__lightspeed_table_row=nb}),98);
__d("LSMessageSenderContextualProfile__sender_contextual_profile$normalization.graphql",["LS_Message","LS_Thread","LS_Thread","LS_Message","LS_Message"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSMessageSenderContextualProfile__sender_contextual_profile$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"thread",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Message").thread,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}},{name:"parent_thread_key",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").parent_thread_key,rootFragment:null}}],storageKey:null}},{kind:"ClientExtension",selections:[{name:"__context",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Message").__context,rootFragment:null}},{name:"sender_id",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Message").sender_id,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSMessageSenderContextualProfile__sender_contextual_profile.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSMessageSenderContextualProfile__sender_contextual_profile",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"__context",storageKey:null},action:"THROW",path:"__context"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"sender_id",storageKey:null},action:"THROW",path:"sender_id"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"thread.thread_type"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"parent_thread_key",storageKey:null},action:"THROW",path:"thread.parent_thread_key"}],storageKey:null},action:"THROW",path:"thread"}],type:"LS_Message",abstractKey:null};e.exports=a}),null);
__d("LSRelayContextDB",["LSDatabaseSingleton","cr:8556","err","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){switch(a){case"PROD":return(h||(h=d("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue();case"EXAMPLE":if(b("cr:8556")==null)throw c("err")("Loading test data on prod");return b("cr:8556").getExampleLSDatabasePromise();default:throw c("unrecoverableViolation")("Unsupported dbType: "+a,"lightspeed_resolvers")}}g.getLSDbStoragePromise=a}),98);
__d("LSRelayContext",["LSRelayContextDB","Promise","RelayAPIConfig","isPromise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=a.dbType;a=k(a);return a instanceof(i||(i=b("Promise")))?a.then(function(a){return{actorID:c("RelayAPIConfig").actorID,db:a}}):{actorID:c("RelayAPIConfig").actorID,db:a}}var j={};function k(a){if(j[a]==null){var b=d("LSRelayContextDB").getLSDbStoragePromise(a);j[a]=b;(h||(h=c("isPromise")))(b)&&c("promiseDone")(b,function(b){j[a]=b})}return j[a]}g.getContext=a}),98);
__d("LSRoot__chat_tab_thread.impl",["LSRelayLiveResolvers","ReQL","promiseDone","verifyChatTabThreadExists"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){a=a.context;var e=b.threadKey,f=b.threadType;return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a,function(a){c("promiseDone")(c("verifyChatTabThreadExists")({db:a,threadKey:e,threadType:f}));return d("ReQL").fromTableAscending(a.table("threads")).getKeyRange(e).take(1)})};g.chat_tab_thread=a}),98);
__d("LSRoot__chat_tab_thread",["LSRoot__chat_tab_thread.impl"],(function(a,b,c,d,e,f,g){"use strict";d("LSRoot__chat_tab_thread.impl").chat_tab_thread,g.chat_tab_thread=d("LSRoot__chat_tab_thread.impl").chat_tab_thread}),98);
__d("LSRoot__message",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){a=a.context;return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a,function(a){return d("ReQL").fromTableAscending(a.table("messages").index("messageId")).getKeyRange(b.messageId).take(1)})}g.message=a}),98);
__d("LSRoot__viewer",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.context;return{context:a,value:{}}}f.viewer=a}),66);
__d("LSThreadCapabilityBitOffset",[],(function(a,b,c,d,e,f){a=Object.freeze({PAYMENT:0,CAMERA:1,MEDIA_PICKER:2,STICKER:3,GIF:4,GO_TO_SECRET_CONVERSATION:5,COLOR_CUSTOMIZATION:6,EMOJI_CUSTOMIZATION:7,THREAD_DETAILS_PROFILE_BUTTON:8,NICKNAMES:9,BLOCK:10,CALIBRA:12,MESSENGER_KIDS_MANAGE_KID_ACCOUNT:13,AUDIO_CLIPS:14,SHARED_MEDIA:15,BLOCK_GROUP_MEMBER:16,FEEDBACK_AND_REPORT:17,REACTIONS:18,MUTE_THREAD:19,SEEN_HEADS:20,MESSAGE_REQUEST_COMPOSER_BANNER:21,IN_THREAD_PROFILE_BUTTON:22,THREAD_DETAILS:23,RTC_VIDEO_CALL:24,RTC_VOICE_CALL:25,MEMBER_LIST:26,ADD_MEMBER:27,LEAVE_THREAD:28,BLOCKED_USER_INTERSTITIAL:29,OPTIMISTIC_THREAD_FEEDBACK_AND_REPORT:30,LOCATION_SHARING:31,IGNORE_MESSAGES:32,FOCUS_MODE:33,SEARCH_IN_CONVERSATION:34,CREATE_GROUP:35,POLL_CREATION:36,DISPLAY_ACTOR_TYPE_IN_THREAD_VIEW_HEADER:37,DISAPPEARING_MODE:38,FORCE_ONE_PHASE_SEND:39,SPLIT_MULTI_SEND_PHOTO:40,THREAD_DETAILS_IG_PROFILE_BUTTON:41,MESSAGE_REPLY:42,MENTIONS:43,GAMES_BOT_THREAD:44,DISABLE_LINKS:45,BLUR_MEDIA:46,DISABLE_CONTEXT_BANNER:47,TOP_LEVEL_SELF_REMEDIATION:48,DISABLE_USER_CONTROL:49,THREAD_DETAILS_SHOW_USER_NAME:50,DISABLE_MESSAGE_BUBBLE_SWIPE:51,IGNORED_THREAD:52,PAGE_BAN:53,CUSTOM_THREAD_NOTIFICATION_SOUNDS:54,ROOM_CREATION:55,FILE_PICKER:56,JOIN_ROOM:57,SELFIE_STICKER:58,POWER_UP:59,THREAD_NAME_CUSTOMIZATION:60,THREAD_PHOTO_CUSTOMIZATION:61,STRUCTURED_INPUT:62,SUPPRESS_NULLSTATE_HEADER:63,ARCHIVE_THREAD:64,UNARCHIVE_THREAD:65,MEMBER_REQUEST:66,BUSINESS_INBOX_BAN:67,CTM_AD_THREAD_WITH_AD_WARNING:68,BUSINESS_INBOX_SAVED_REPLIES:69,GARDEN_THREAD_SETTINGS:70,MARKETPLACE_SAVED_REPLIES:71,CARRIER_MESSAGING_ADD_MEMBER:72,PHONE_CALL:73,THREAD_DETAILS_DELETE_THREAD:74,EPHEMERAL_MESSAGE_TIMER:75,MESSAGE_EXPIRATION:76,MESSAGE_SOUND_SETTINGS:77,RINGTONE_SOUND_SETTINGS:78,HIDE_FROM_ACTIVE_NOW:79,MAGIC_WORDS:80,THREAD_DESCRIPTION_CUSTOMIZATION:81,BUSINESS_INBOX_CATALOG:82,ADMIN_RECALL_MESSAGE:83,SHARE_CONTACT:84,RESTRICT_CONTACT:85,SOUND_BITE:86,MOST_LIKELY_TO_POLL_CREATION:87,REPORT_CHAT_TO_ADMIN:88,CAN_MARK_READ_OR_UNREAD:89,BUSINESS_TOOLS:90,REMOVE_MEMBER:91,GROUP_GO_TO_SECRET_CONVERSATION:92,REPORT_MESSAGE_TO_ADMIN:93,MANAGE_MEMBER:94,SHARED_LINKS:95,SHARED_CONTENT:96,ADD_XAC_USERS:97,BUSINESS_ORDER_MANAGEMENT:98,RTC_MARKETPLACE_COMPOSER_BANNER:99,IS_SELLER_RTC_ELIGIBLE:100,IS_BUYER_RTC_ELIGIBLE:101,MESSAGE_LOCAL_DELETE:102,MESSAGE_FORWARD:103,IS_NFB_ELIGIBLE:104,MESSAGE_REQUEST_GROUP_INVITE:105,VIEW_PINNED_MESSAGES_V2:106,BUSINESS_APPOINTMENT_BOOKING:107,THREAD_DETAILS_SHOW_CHAT_INVITE_LINK:108,HOTLIKE_STICKER:109,IS_LEARNING_SPACE_CHAT:110,AUDIO_CAPTIONS:111,COMMAND_SILENT:112,MARKETPLACE_THREAD_COMMERCE_PROFILE_BUTTON:113,EPHEMERAL_MEDIA:114,COMMAND_EVERYONE:115,COMMAND_GIF:116,MARKETPLACE_THREAD_COMMERCE_PRODUCT_BUTTON:117,CAMERA_BACKUP:118,BLOCK_MARKETPLACE_USER:119,COMMUNITY_MESSAGING_CHANNEL_INVITE:120,COMMAND_TEXT_REPLACEMENT:121,MESSAGE_UNSEND:122,IMMERSIVE_MODES_SPACES:123,COMMUNITY_MESSAGING_LINK_SHARING_V2:124,COMMUNITY_MESSAGING_AUDIO_ROOMS:125,BUMP_MESSAGE_ACTION:126,CUTOVER_BLOCK_COMPOSER:128,FAVORITE_THREAD:129,BUMP_THREAD:131,IS_BUSINESS_APPOINTMENT_THREAD_INTENT_ENABLED:132,COMMUNITY_MESSAGING_ICEBREAKERS:133,COMMUNITY_MESSAGING_CHANNEL_EMOJI_CUSTOMIZATION:134,COMMUNITY_MESSAGING_CHANNEL_DESCRIPTION_CUSTOMIZATION:135,IS_MESSENGER_CHAT_ENTITY_THREAD:136,RESHARE_HUB:138,REACTIONS_V2:139,SEEN_COUNTS_V2:140,IS_LARGE_THREAD:141,PUBLIC_CHAT_BAN_USER:143,CONTENT_EXPLORER:144,PRO_MODE:145,CUSTOMER_APPOINTMENT_REQUEST:146,IS_MESSENGER_GUIDE_CHAT_ENTITY_THREAD:147,COMMUNITY_MESSAGING_THREAD_LEAVE_UPSELL:148,GENERATED_STICKERS:149,ROLLCALL:152,BUSINESS_CHAT_PRIVACY_DISCLOSURE:153,PAUSE_CHAT:154,GAMES_DISCOVERY:155,MULTI_REACT:156,STICKER_TRAY_SEARCH:157,POLL_V1_UI:158,POLL_V2_UI:159,DEIDENTIFIED_STICKER_SEARCH:160,PIN_CHANNEL_ON_PROFILE:161,ARMADILLO_TLC_CONTROL_OPEN_THREAD:162,SUGGESTED_TAB:163,GROUP_CHAT_UPGRADE_ELIGIBILITY:164,HAS_GROUP_UPDATES_BOT_ATTACHED:165,HAS_GROUP_UPDATES_SETTING_ENABLED:166,SUB_THREAD_CREATION_ENABLED:167,COMMUNITY_MESSAGING_FIRST_MESSAGE_UPSELL_WITH_ICE_BREAKERS:168,REACTIONS_V2_WRITE:169,POLL_VOTING:170,AUTO_ENDED_CHANNEL_COMPOSER:171,MODIFY_PINNED_MESSAGES_V2:172,CUSTOM_GHOST_TEXT:173,AVATAR_DETAILS:174,COLLAPSIBLE_XMAT:175,ADD_YOURS:176,PAUSE_CHAT_ON_BLUE:177,UPGRADED_COMMUNITY_JOINED:178,IS_UPGRADED_COMMUNITY_OWNER:179,AI_BOT_DATA_USAGE_IN_THREAD_DETAILS:180,AI_BOT_FEEDBACK_IN_THREAD_DETAILS:181,AI_BOT_TIPS_IN_THREAD_DETAILS:182,AI_BOT_SUMMONING:183,VIEW_REACTION_DETAILS:184,BUSINESS_PROFILE_BADGE:185,HINT_CARD_IN_CHANNEL_UPGRADED_FROM_GROUP_CHAT:186,AI_BOT_EMBODIMENT:187,BMOP_IN_THREAD_CATALOG_ENTRY_POINT:188,OPTIMISTIC_THREAD_APPOINTMENT_REQUEST:189,IS_GAME_RECOMMENDATIONS_CHAT_ENTITY_THREAD:190,IS_XAC_READ_ONLY:192,WILL_XAC_BE_READ_ONLY:193,IS_EDIT_MESSAGE_ENABLED:194,SUB_THREAD_LIST:195,TRANSLATE_MESSAGE:196,MANAGE_CHAT_THREAD_DETAILS:197,CUSTOMER_LEAD_FORM_APPOINTMENT_REQUEST:198,ADMOD_ONBOARDING_ACTIONS_V2:199,RTC_OPTIN_REQUEST:200,CUSTOMER_LEAD_FORM_GET_QUOTE:201,PAUSED_BY_SOFT_ACTION_COMPOSER_BLOCK:202,DISABLE_MARKETPLACE_DMA_THREAD_COMPOSER:203,CUSTOMIZE_WELCOME_PROMPT_THREAD_DETAILS:204,IS_COMMUNITY_MESSAGING_FIRST_THREAD_JOIN_PER_COMMUNITY_FOR_MEMBER_ONBOARDING:205,SUB_THREAD_OPTIMISTIC_CREATE_ENABLED:206,ONE_CLICK_MUTE_ENABLED:207,GEOCHATS_CAN_SET_LOCATION:208,GEOCHATS_CAN_VIEW_LOCATION:209,WORK_CHAT_GOVERNANCE_BLOCK:210,INSTAMADILLO_TRANSPORT_ENABLED:211,INSTAMADILLO_DISAPPEARING_MESSAGES_TOGGLE_ENABLED:212,IS_BSG_THREAD:213,IS_INSTAMADILLO_CUTOVER:214,WRITE_WITH_AI_ENABLED:215,SHOW_FOLLOW_PAGE_CTA:216,CAN_VIEWING_PAGE_BE_LIKED:217,DELETE_FROM_THREAD_LIST_VIEW:218,INVITE_MODEL_TEXT_ONLY:219,COMMAND_SUMMARY:220,COMMUNITY_AI:221});f["default"]=a}),66);
__d("LS_Participant",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){function a(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("contacts")).getKeyRange(a.value.contactId)})}function b(a){return a.context}function c(a){return a.value.readWatermarkTimestampMs}function e(a){return a.value.deliveredWatermarkTimestampMs}function f(a){return a.value.nickname}function h(a){return a.value.authorityLevel}function i(a){return a.value.threadKey}function j(a){return a.value.contactId}function k(a){return a.value.readActionTimestampMs}function l(a){return a.value.isAdmin}function m(a){return a.value.subscribeSource}function n(a){return a.value.normalizedSearchTerms}function o(a){return a.value.participantCapabilities}function p(a){return a.value.groupParticipantJoinState}function q(a){return a.value.isModerator}function r(a){return a.value.isSuperAdmin}function s(a){return a.value.threadRoles}function t(a){return a.value}g.contact=a;g.__context=b;g.read_watermark_timestamp_ms=c;g.delivered_watermark_timestamp_ms=e;g.nickname=f;g.authority_level=h;g.thread_key=i;g.contact_id=j;g.read_action_timestamp_ms=k;g.is_admin=l;g.subscribe_source=m;g.normalized_search_terms=n;g.participant_capabilities=o;g.group_participant_join_state=p;g.is_moderator=q;g.is_super_admin=r;g.thread_roles=s;g.__lightspeed_table_row=t}),98);
__d("LS_Participant_Connection",["LSRelayConnections"],(function(a,b,c,d,e,f,g){function a(a){return a.value.edges}function b(a){return a.value.page_info}function c(a){return d("LSRelayConnections").keyToCursor(a.value[0])}function e(a){return{context:a.context,value:a.value[1]}}g.edges=a;g.page_info=b;g.cursor=c;g.node=e}),98);
__d("LSThreadComputedThreadTitle__computed_thread_title$normalization.graphql",["LS_Thread","LS_Participant_Connection","LS_Participant_Connection","LS_Participant","LS_Participant","LS_Participant","LS_Contact","LS_Contact","LS_Contact","LS_Thread","LS_Thread","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"first",value:8}];return{kind:"SplitOperation",metadata:{},name:"LSThreadComputedThreadTitle__computed_thread_title$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"participants",args:a,kind:"RelayLiveResolver",storageKey:"participants(first:8)",isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").participants,rootFragment:null}},linkedField:{alias:null,args:a,concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"edges",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").edges,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"node",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").node,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"node",plural:!1,selections:[{name:"contact_id",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact_id,rootFragment:null}},{name:"nickname",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").nickname,rootFragment:null}},{kind:"ClientEdgeToClientObject",backingField:{name:"contact",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{name:"first_name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").first_name,rootFragment:null}},{name:"name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").name,rootFragment:null}},{name:"rank",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").rank,rootFragment:null}}],storageKey:null}}],storageKey:null}}],storageKey:null}}],storageKey:"participants(first:8)"}},{kind:"ClientExtension",selections:[{name:"__context",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").__context,rootFragment:null}},{name:"thread_name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_name,rootFragment:null}},{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]}}();e.exports=a}),null);
__d("LSThreadComputedThreadTitle__computed_thread_title.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadComputedThreadTitle__computed_thread_title",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"__context",storageKey:null},action:"THROW",path:"__context"},{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"thread_type"},{kind:"RequiredField",field:{alias:null,args:[{kind:"Literal",name:"first",value:8}],concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"contact_id",storageKey:null},action:"THROW",path:"participants.edges.node.contact_id"},{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"first_name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"THROW",path:"participants.edges.node.contact.name"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"rank",storageKey:null},action:"THROW",path:"participants.edges.node.contact.rank"}],storageKey:null}],storageKey:null},action:"THROW",path:"participants.edges.node"}],storageKey:null},action:"THROW",path:"participants.edges"}],storageKey:"participants(first:8)"},action:"THROW",path:"participants"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LS_Thread__computed_thread_title",["fbt","CurrentEnvironment","I64","LSThreadComputedThreadTitle__computed_thread_title.graphql","MWCMIsAnyCMThread","ReactiveExecutorResolverFragments","intlList","recoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(i!==void 0?i:i=b("LSThreadComputedThreadTitle__computed_thread_title.graphql"),a);var c=a.__context,e=a.participants,f=a.thread_name;a=a.thread_type;return f!=null?f:l(a,e.edges.map(function(a){return a.node}),c.actorID)}function k(a,b){return a.filter(function(a){return(j||(j=d("I64"))).to_string(a.contact_id)!==b}).map(function(a){return a.contact==null?null:{first_name:a.contact.first_name,name:a.contact.name,nickname:a.nickname,rank:a.contact.rank}}).filter(Boolean).sort(function(a,b){return b.rank-a.rank})}function l(a,b,e){if(c("MWCMIsAnyCMThread")(a)){c("recoverableViolation")("community message should not use computed thread title","messenger_comet");return null}if(b.length===0){c("recoverableViolation")("No pariticipants in thread","lightspeed_resolvers");return null}if(b.length===1){if((j||(j=d("I64"))).to_string(b[0].contact_id)!==e){c("recoverableViolation")("Self thread participant should match actor","lightspeed_resolvers");return""}return(a=(a=b[0].contact)==null?void 0:a.name)!=null?a:m}a=k(b,e);var f=a.length>2;b=a.map(function(a){return n(a,f)});a.length>7&&b.push(String(h._("__JHASH__p-5gRHawKL0__JHASH__")));return c("intlList")(b,c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA).toString()}var m=(c("CurrentEnvironment").workplacedotcom?h._("__JHASH__WW0S3bu0Fvp__JHASH__"):c("CurrentEnvironment").instagramdotcom?h._("__JHASH__PghB4SzSbNm__JHASH__"):h._("__JHASH__AaE4hJExM0x__JHASH__")).toString();function n(a,b){var c=a.first_name,d=a.name;a=a.nickname;b===void 0&&(b=!1);if(a!=null)return a;if(c!=null&&b)return c;return d!=null?d:m}g.computed_thread_title=a}),98);
__d("LSThreadComposerAriaDescription_thread$normalization.graphql",["LS_Thread","LS_Thread","LS_Thread__computed_thread_title","LSThreadComputedThreadTitle__computed_thread_title$normalization.graphql"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadComposerAriaDescription_thread$normalization",selections:[{kind:"ClientExtension",selections:[{name:"__context",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").__context,rootFragment:null}},{name:"thread_name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_name,rootFragment:null}},{name:"computed_thread_title",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread__computed_thread_title").computed_thread_title,rootFragment:b("LSThreadComputedThreadTitle__computed_thread_title$normalization.graphql")}}]}]};e.exports=a}),null);
__d("LSThreadComposerAriaDescription_thread.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSThreadComposerAriaDescription_thread",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"__context",storageKey:null},action:"THROW",path:"__context"},{alias:"threadName",args:null,kind:"ScalarField",name:"thread_name",storageKey:null},{alias:"title",args:null,kind:"ScalarField",name:"computed_thread_title",storageKey:null}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSThreadHasCapability__has_capability$normalization.graphql",["LS_Thread","LS_Thread","LS_Thread","LS_Thread","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadHasCapability__has_capability$normalization",selections:[{kind:"ClientExtension",selections:[{name:"capabilities",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities,rootFragment:null}},{name:"capabilities_2",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities_2,rootFragment:null}},{name:"capabilities_3",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities_3,rootFragment:null}},{name:"capabilities_4",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities_4,rootFragment:null}},{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSThreadHasCapability__has_capability.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSThreadHasCapability__has_capability",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},action:"THROW",path:"capabilities"},{kind:"RequiredField",field:{alias:"capabilities2",args:null,kind:"ScalarField",name:"capabilities_2",storageKey:null},action:"THROW",path:"capabilities2"},{kind:"RequiredField",field:{alias:"capabilities3",args:null,kind:"ScalarField",name:"capabilities_3",storageKey:null},action:"THROW",path:"capabilities3"},{kind:"RequiredField",field:{alias:"capabilities4",args:null,kind:"ScalarField",name:"capabilities_4",storageKey:null},action:"THROW",path:"capabilities4"},{kind:"RequiredField",field:{alias:"threadType",args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"threadType"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LS_Thread__other_participant",["I64","LSMessagingThreadTypeUtil","LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.context;a=a.value;var c=a.threadKey;a=a.threadType;return!d("LSMessagingThreadTypeUtil").isOneToOne(a)?d("LSRelayLiveResolvers").nullValueLiveState:d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(b,function(a){return d("ReQL").fromTableAscending(a.table("participants")).getKeyRange(c).take(2).filter(function(a){a=a.contactId;return(h||(h=d("I64"))).to_string(a)!==b.actorID})})}g.other_participant=a}),98);
__d("LSThreadIsPage__is_page$normalization.graphql",["LS_Thread__other_participant","LS_Participant","LS_Contact"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadIsPage__is_page$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"other_participant",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread__other_participant").other_participant,rootFragment:null}},linkedField:{alias:"otherParticipant",args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"other_participant",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"contact",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{name:"contact_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").contact_type,rootFragment:null}}],storageKey:null}}],storageKey:null}}]};e.exports=a}),null);
__d("LSThreadIsPage__is_page.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadIsPage__is_page",selections:[{alias:"otherParticipant",args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"other_participant",plural:!1,selections:[{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{alias:"contactType",args:null,kind:"ScalarField",name:"contact_type",storageKey:null}],storageKey:null}],storageKey:null}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSThreadIsSecureThread__is_secure_thread$normalization.graphql",["LS_Thread"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadIsSecureThread__is_secure_thread$normalization",selections:[{kind:"ClientExtension",selections:[{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSThreadIsSecureThread__is_secure_thread.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSThreadIsSecureThread__is_secure_thread",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"thread_type"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LS_Thread__non_addressable_participants",["I64","LSAuthorityLevel","LSIntEnum","LSRelayLiveResolvers","LSWhatsAppConnectStatus","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var c=a.context;a=a.value;var e=a.threadKey;return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(c,function(a){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(a.table("participants")).getKeyRange(e),d("ReQL").fromTableAscending(a.table("contacts"))).filter(function(a){a[0];a=a[1];return j(a,c==null?void 0:c.actorID)}).map(function(a){a=a[0];return a})},b)}function j(a,b){if(!(h||(h=d("I64"))).equal(a.waConnectStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSWhatsAppConnectStatus").WHATSAPP_NOT_ADDRESSABLE)))return!1;return!(h||(h=d("I64"))).ge(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT))?!1:!(h||(h=d("I64"))).equal(a.id,h.of_string(b))}g.non_addressable_participants=a}),98);
__d("LSThreadNonAddressableParticipantBanner__non_addressable_participant_banner$normalization.graphql",["LS_Thread__non_addressable_participants","LS_Participant_Connection","LS_Participant_Connection","LS_Participant","LS_Contact","LS_Contact","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"first",value:1}];return{kind:"SplitOperation",metadata:{},name:"LSThreadNonAddressableParticipantBanner__non_addressable_participant_banner$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"non_addressable_participants",args:a,kind:"RelayLiveResolver",storageKey:"non_addressable_participants(first:1)",isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread__non_addressable_participants").non_addressable_participants,rootFragment:null}},linkedField:{alias:null,args:a,concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"non_addressable_participants",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"edges",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").edges,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"node",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").node,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"contact",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{name:"first_name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").first_name,rootFragment:null}},{name:"name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").name,rootFragment:null}}],storageKey:null}}],storageKey:null}}],storageKey:null}}],storageKey:"non_addressable_participants(first:1)"}},{kind:"ClientExtension",selections:[{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]}}();e.exports=a}),null);
__d("LSThreadNonAddressableParticipantBanner__non_addressable_participant_banner.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadNonAddressableParticipantBanner__non_addressable_participant_banner",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"thread_type"},{alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"non_addressable_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"first_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"non_addressable_participants(first:1)"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSThreadOtherParticipantOrSelf__other_participant_or_self$normalization.graphql",["LS_Thread","LS_Participant_Connection","LS_Thread","LS_Thread","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"first",value:2}];return{kind:"SplitOperation",metadata:{},name:"LSThreadOtherParticipantOrSelf__other_participant_or_self$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"participants",args:a,kind:"RelayLiveResolver",storageKey:"participants(first:2)",isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").participants,rootFragment:null}},linkedField:{alias:null,args:a,concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"edges",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").edges,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}}],storageKey:"participants(first:2)"}},{kind:"ClientExtension",selections:[{name:"__context",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").__context,rootFragment:null}},{name:"thread_key",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_key,rootFragment:null}},{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]}}();e.exports=a}),null);
__d("LSThreadOtherParticipantOrSelf__other_participant_or_self.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadOtherParticipantOrSelf__other_participant_or_self",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"__context",storageKey:null},action:"THROW",path:"__context"},{kind:"RequiredField",field:{alias:"threadKey",args:null,kind:"ScalarField",name:"thread_key",storageKey:null},action:"THROW",path:"threadKey"},{kind:"RequiredField",field:{alias:"threadType",args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"threadType"},{kind:"RequiredField",field:{alias:null,args:[{kind:"Literal",name:"first",value:2}],concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},action:"THROW",path:"participants.edges"}],storageKey:"participants(first:2)"},action:"THROW",path:"participants"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LS_Attachment",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){function a(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("attachment_ctas").index("fk_attachments")).getKeyRange(a.value.threadKey,a.value.messageId,a.value.attachmentFbid)},b)}function b(a){return a.context}function c(a){return a.value.filename}function e(a){return a.value.filesize}function f(a){return a.value.hasMedia}function h(a){return a.value.isSharable}function i(a){return a.value.playableUrl}function j(a){return a.value.playableUrlFallback}function k(a){return a.value.playableUrlExpirationTimestampMs}function l(a){return a.value.playableUrlMimeType}function m(a){return a.value.dashManifest}function n(a){return a.value.previewUrl}function o(a){return a.value.previewUrlFallback}function p(a){return a.value.previewUrlExpirationTimestampMs}function q(a){return a.value.previewUrlMimeType}function r(a){return a.value.miniPreview}function s(a){return a.value.previewWidth}function t(a){return a.value.previewHeight}function u(a){return a.value.imageUrlMimeType}function v(a){return a.value.attributionAppId}function w(a){return a.value.attributionAppName}function x(a){return a.value.attributionAppIcon}function y(a){return a.value.attributionAppIconFallback}function z(a){return a.value.attributionAppIconUrlExpirationTimestampMs}function A(a){return a.value.localPlayableUrl}function B(a){return a.value.playableDurationMs}function C(a){return a.value.attachmentIndex}function D(a){return a.value.decryptionKey}function E(a){return a.value.accessibilitySummaryText}function F(a){return a.value.isPreviewImage}function G(a){return a.value.originalFileHash}function H(a){return a.value.shouldRespectServerPreviewSize}function I(a){return a.value.subtitleIconUrl}function J(a){return a.value.preheaderText}function K(a){return a.value.shouldAutoplayVideo}function L(a){return a.value.threadKey}function M(a){return a.value.attachmentType}function N(a){return a.value.timestampMs}function O(a){return a.value.messageId}function P(a){return a.value.offlineAttachmentId}function Q(a){return a.value.attachmentFbid}function R(a){return a.value.hasXma}function S(a){return a.value.xmaLayoutType}function T(a){return a.value.xmasTemplateType}function U(a){return a.value.collapsibleId}function V(a){return a.value.defaultCtaId}function W(a){return a.value.defaultCtaTitle}function X(a){return a.value.defaultCtaType}function Y(a){return a.value.attachmentCta1Id}function Z(a){return a.value.cta1Title}function $(a){return a.value.cta1IconType}function aa(a){return a.value.cta1Type}function ba(a){return a.value.attachmentCta2Id}function ca(a){return a.value.cta2Title}function da(a){return a.value.cta2IconType}function ea(a){return a.value.cta2Type}function fa(a){return a.value.attachmentCta3Id}function ga(a){return a.value.cta3Title}function ha(a){return a.value.cta3IconType}function ia(a){return a.value.cta3Type}function ja(a){return a.value.imageUrl}function ka(a){return a.value.imageUrlFallback}function la(a){return a.value.imageUrlExpirationTimestampMs}function ma(a){return a.value.actionUrl}function na(a){return a.value.titleText}function oa(a){return a.value.subtitleText}function pa(a){return a.value.subtitleDecorationType}function qa(a){return a.value.maxTitleNumOfLines}function ra(a){return a.value.maxSubtitleNumOfLines}function sa(a){return a.value.descriptionText}function ta(a){return a.value.sourceText}function ua(a){return a.value.faviconUrl}function va(a){return a.value.faviconUrlFallback}function wa(a){return a.value.faviconUrlExpirationTimestampMs}function xa(a){return a.value.originalPageSenderId}function ya(a){return a.value.listItemsId}function za(a){return a.value.listItemsDescriptionText}function Aa(a){return a.value.listItemsDescriptionSubtitleText}function Ba(a){return a.value.listItemsSecondaryDescriptionText}function Ca(a){return a.value.avatarViewUrlList}function Da(a){return a.value.avatarViewUrlExpirationTimestampList}function Ea(a){return a.value.avatarViewUrlFallbackList}function Fa(a){return a.value.avatarViewTitleList}function Ga(a){return a.value.avatarViewAccessibilityLabel}function Ha(a){return a.value.avatarViewSize}function Ia(a){return a.value.avatarCount}function Ja(a){return a.value.avatarViewContextText}function Ka(a){return a.value.listItemId1}function La(a){return a.value.listItemTitleText1}function Ma(a){return a.value.listItemContactUrlList1}function Na(a){return a.value.listItemProgressBarFilledPercentage1}function Oa(a){return a.value.listItemContactUrlExpirationTimestampList1}function Pa(a){return a.value.listItemContactUrlFallbackList1}function Qa(a){return a.value.listItemAccessibilityText1}function Ra(a){return a.value.listItemProfilePictureUrl1}function Sa(a){return a.value.listItemProfilePictureUrlExpirationTimestamp1}function Ta(a){return a.value.listItemProfilePictureUrlFallback1}function Ua(a){return a.value.listItemTotalCount1}function Va(a){return a.value.listItemId2}function Wa(a){return a.value.listItemTitleText2}function Xa(a){return a.value.listItemContactUrlList2}function Ya(a){return a.value.listItemProgressBarFilledPercentage2}function Za(a){return a.value.listItemContactUrlExpirationTimestampList2}function $a(a){return a.value.listItemContactUrlFallbackList2}function ab(a){return a.value.listItemAccessibilityText2}function bb(a){return a.value.listItemProfilePictureUrl2}function cb(a){return a.value.listItemProfilePictureUrlExpirationTimestamp2}function db(a){return a.value.listItemProfilePictureUrlFallback2}function eb(a){return a.value.listItemTotalCount2}function fb(a){return a.value.listItemId3}function gb(a){return a.value.listItemTitleText3}function hb(a){return a.value.listItemContactUrlList3}function ib(a){return a.value.listItemProgressBarFilledPercentage3}function jb(a){return a.value.listItemContactUrlExpirationTimestampList3}function kb(a){return a.value.listItemContactUrlFallbackList3}function lb(a){return a.value.listItemAccessibilityText3}function mb(a){return a.value.listItemProfilePictureUrl3}function nb(a){return a.value.listItemProfilePictureUrlExpirationTimestamp3}function ob(a){return a.value.listItemProfilePictureUrlFallback3}function pb(a){return a.value.listItemTotalCount3}function qb(a){return a.value.isBorderless}function rb(a){return a.value.headerImageUrlMimeType}function sb(a){return a.value.headerTitle}function tb(a){return a.value.headerSubtitleText}function ub(a){return a.value.headerImageUrl}function vb(a){return a.value.headerImageUrlFallback}function wb(a){return a.value.headerImageUrlExpirationTimestampMs}function xb(a){return a.value.previewImageDecorationType}function yb(a){return a.value.shouldHighlightHeaderTitleInTitle}function zb(a){return a.value.targetId}function Ab(a){return a.value.attachmentLoggingType}function Bb(a){return a.value.ephemeralMediaState}function Cb(a){return a.value.ephemeralMediaViewMode}function Db(a){return a.value.viewerSeenTimestampMs}function Eb(a){return a.value.previewUrlLarge}function Fb(a){return a.value.samplingFrequencyHz}function Gb(a){return a.value.waveformData}function Hb(a){return a.value.previewWidthLarge}function Ib(a){return a.value.previewHeightLarge}function Jb(a){return a.value.audioTranscription}function Kb(a){return a.value.gatingType}function Lb(a){return a.value.gatingTitle}function Mb(a){return a.value.targetExpiryTimestampMs}function Nb(a){return a.value.countdownTimestampMs}function Ob(a){return a.value.shouldBlurSubattachments}function Pb(a){return a.value.verifiedType}function Qb(a){return a.value.captionBodyText}function Rb(a){return a.value.xmaContentType}function Sb(a){return a.value.igStoryReplyType}function Tb(a){return a.value.isPublicXma}function Ub(a){return a.value.mustacheText}function Vb(a){return a.value.isAttachmentConsumed}function Wb(a){return a.value.replyCount}function Xb(a){return a.value.authorityLevel}function Yb(a){return a.value}g.ctas=a;g.__context=b;g.filename=c;g.filesize=e;g.has_media=f;g.is_sharable=h;g.playable_url=i;g.playable_url_fallback=j;g.playable_url_expiration_timestamp_ms=k;g.playable_url_mime_type=l;g.dash_manifest=m;g.preview_url=n;g.preview_url_fallback=o;g.preview_url_expiration_timestamp_ms=p;g.preview_url_mime_type=q;g.mini_preview=r;g.preview_width=s;g.preview_height=t;g.image_url_mime_type=u;g.attribution_app_id=v;g.attribution_app_name=w;g.attribution_app_icon=x;g.attribution_app_icon_fallback=y;g.attribution_app_icon_url_expiration_timestamp_ms=z;g.local_playable_url=A;g.playable_duration_ms=B;g.attachment_index=C;g.decryption_key=D;g.accessibility_summary_text=E;g.is_preview_image=F;g.original_file_hash=G;g.should_respect_server_preview_size=H;g.subtitle_icon_url=I;g.preheader_text=J;g.should_autoplay_video=K;g.thread_key=L;g.attachment_type=M;g.timestamp_ms=N;g.message_id=O;g.offline_attachment_id=P;g.attachment_fbid=Q;g.has_xma=R;g.xma_layout_type=S;g.xmas_template_type=T;g.collapsible_id=U;g.default_cta_id=V;g.default_cta_title=W;g.default_cta_type=X;g.attachment_cta1_id=Y;g.cta1_title=Z;g.cta1_icon_type=$;g.cta1_type=aa;g.attachment_cta2_id=ba;g.cta2_title=ca;g.cta2_icon_type=da;g.cta2_type=ea;g.attachment_cta3_id=fa;g.cta3_title=ga;g.cta3_icon_type=ha;g.cta3_type=ia;g.image_url=ja;g.image_url_fallback=ka;g.image_url_expiration_timestamp_ms=la;g.action_url=ma;g.title_text=na;g.subtitle_text=oa;g.subtitle_decoration_type=pa;g.max_title_num_of_lines=qa;g.max_subtitle_num_of_lines=ra;g.description_text=sa;g.source_text=ta;g.favicon_url=ua;g.favicon_url_fallback=va;g.favicon_url_expiration_timestamp_ms=wa;g.original_page_sender_id=xa;g.list_items_id=ya;g.list_items_description_text=za;g.list_items_description_subtitle_text=Aa;g.list_items_secondary_description_text=Ba;g.avatar_view_url_list=Ca;g.avatar_view_url_expiration_timestamp_list=Da;g.avatar_view_url_fallback_list=Ea;g.avatar_view_title_list=Fa;g.avatar_view_accessibility_label=Ga;g.avatar_view_size=Ha;g.avatar_count=Ia;g.avatar_view_context_text=Ja;g.list_item_id_1=Ka;g.list_item_title_text_1=La;g.list_item_contact_url_list_1=Ma;g.list_item_progress_bar_filled_percentage_1=Na;g.list_item_contact_url_expiration_timestamp_list_1=Oa;g.list_item_contact_url_fallback_list_1=Pa;g.list_item_accessibility_text_1=Qa;g.list_item_profile_picture_url_1=Ra;g.list_item_profile_picture_url_expiration_timestamp_1=Sa;g.list_item_profile_picture_url_fallback_1=Ta;g.list_item_total_count_1=Ua;g.list_item_id_2=Va;g.list_item_title_text_2=Wa;g.list_item_contact_url_list_2=Xa;g.list_item_progress_bar_filled_percentage_2=Ya;g.list_item_contact_url_expiration_timestamp_list_2=Za;g.list_item_contact_url_fallback_list_2=$a;g.list_item_accessibility_text_2=ab;g.list_item_profile_picture_url_2=bb;g.list_item_profile_picture_url_expiration_timestamp_2=cb;g.list_item_profile_picture_url_fallback_2=db;g.list_item_total_count_2=eb;g.list_item_id_3=fb;g.list_item_title_text_3=gb;g.list_item_contact_url_list_3=hb;g.list_item_progress_bar_filled_percentage_3=ib;g.list_item_contact_url_expiration_timestamp_list_3=jb;g.list_item_contact_url_fallback_list_3=kb;g.list_item_accessibility_text_3=lb;g.list_item_profile_picture_url_3=mb;g.list_item_profile_picture_url_expiration_timestamp_3=nb;g.list_item_profile_picture_url_fallback_3=ob;g.list_item_total_count_3=pb;g.is_borderless=qb;g.header_image_url_mime_type=rb;g.header_title=sb;g.header_subtitle_text=tb;g.header_image_url=ub;g.header_image_url_fallback=vb;g.header_image_url_expiration_timestamp_ms=wb;g.preview_image_decoration_type=xb;g.should_highlight_header_title_in_title=yb;g.target_id=zb;g.attachment_logging_type=Ab;g.ephemeral_media_state=Bb;g.ephemeral_media_view_mode=Cb;g.viewer_seen_timestamp_ms=Db;g.preview_url_large=Eb;g.sampling_frequency_hz=Fb;g.waveform_data=Gb;g.preview_width_large=Hb;g.preview_height_large=Ib;g.audio_transcription=Jb;g.gating_type=Kb;g.gating_title=Lb;g.target_expiry_timestamp_ms=Mb;g.countdown_timestamp_ms=Nb;g.should_blur_subattachments=Ob;g.verified_type=Pb;g.caption_body_text=Qb;g.xma_content_type=Rb;g.ig_story_reply_type=Sb;g.is_public_xma=Tb;g.mustache_text=Ub;g.is_attachment_consumed=Vb;g.reply_count=Wb;g.authority_level=Xb;g.__lightspeed_table_row=Yb}),98);
__d("LS_Attachment_Connection",["LSRelayConnections"],(function(a,b,c,d,e,f,g){function a(a){return a.value.edges}function b(a){return a.value.page_info}function c(a){return d("LSRelayConnections").keyToCursor(a.value[0])}function e(a){return{context:a.context,value:a.value[1]}}g.edges=a;g.page_info=b;g.cursor=c;g.node=e}),98);
__d("LS_CommunityFolder",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value.folderId}function c(a){return a.value.fbGroupId}function d(a){return a.value.name}function e(a){return a.value.description}function g(a){return a.value.memberCount}function h(a){return a.value.pictureUrl}function i(a){return a.value.pictureUrlFallback}function j(a){return a.value.pictureUrlExpirationTimestampMs}function k(a){return a.value.joiningChannelTaskId}function l(a){return a.value.afterJoiningOpenChannelId}function m(a){return a.value.capabilities}function n(a){return a.value.capabilities2}function o(a){return a.value.capabilities3}function p(a){return a.value.notificationSetting}function q(a){return a.value.notificationMutedUntil}function r(a){return a.value.sendsBlockedUntil}function s(a){return a.value.isHidden}function t(a){return a.value.hasSeenDisablingAlert}function u(a){return a.value.inviteLink}function v(a){return a.value.communityType}function w(a){return a.value.directInviteLink}function x(a){return a.value.enableState}function y(a){return a.value.takedownState}function z(a){return a.value.fbGroupType}function A(a){return a.value.threadCount}function B(a){return a.value.disableTimestamp}function C(a){return a.value.readTimestampMs}function D(a){return a.value.inviteStatus}function E(a){return a.value.blockedFromCommunityMemberCount}function F(a){return a.value.categoryCount}function G(a){return a.value.snippetText}function H(a){return a.value.coverPicUrl}function I(a){return a.value.coverPicUrlFallback}function J(a){return a.value.coverPicUrlExpirationTimestampMs}function K(a){return a.value.invitedThreadId}function L(a){return a.value.fbGroupUserParticipationApprovalStatus}function M(a){return a.value.ccAdminAssistRegistrationStatus}function N(a){return a.value.pauseStatus}function O(a){return a.value.isMember}function P(a){return a.value}f.__context=a;f.folder_id=b;f.fb_group_id=c;f.name=d;f.description=e;f.member_count=g;f.picture_url=h;f.picture_url_fallback=i;f.picture_url_expiration_timestamp_ms=j;f.joining_channel_task_id=k;f.after_joining_open_channel_id=l;f.capabilities=m;f.capabilities_2=n;f.capabilities_3=o;f.notification_setting=p;f.notification_muted_until=q;f.sends_blocked_until=r;f.is_hidden=s;f.has_seen_disabling_alert=t;f.invite_link=u;f.community_type=v;f.direct_invite_link=w;f.enable_state=x;f.takedown_state=y;f.fb_group_type=z;f.thread_count=A;f.disable_timestamp=B;f.read_timestamp_ms=C;f.invite_status=D;f.blocked_from_community_member_count=E;f.category_count=F;f.snippet_text=G;f.cover_pic_url=H;f.cover_pic_url_fallback=I;f.cover_pic_url_expiration_timestamp_ms=J;f.invited_thread_id=K;f.fb_group_user_participation_approval_status=L;f.cc_admin_assist_registration_status=M;f.pause_status=N;f.is_member=O;f.__lightspeed_table_row=P}),66);
__d("LS_CommunityFolder__community_members_source",["FBLogger","LSCommunityMemberListSource","LSIntEnum","LSRelayLiveResolvers","ReQL","pageID"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=b.source;b=babelHelpers.objectWithoutPropertiesLoose(b,["source"]);var f=a.value.fbGroupId;if(e==="%future added value")throw c("FBLogger")("meteora").mustfixThrow("Cannot use future added value as source in community_members_source");var g=c("LSCommunityMemberListSource")[e];return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(a){return d("ReQL").fromTableAscending(a.table("community_members").index("communitySource")).getKeyRange(f,(h||(h=d("LSIntEnum"))).ofNumber(g),c("pageID"))},b)}g.community_members_source=a}),98);
__d("LS_CommunityMember",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value.communityId}function c(a){return a.value.contactId}function d(a){return a.value.source}function e(a){return a.value.name}function g(a){return a.value.profilePictureUrl}function h(a){return a.value.isAdmin}function i(a){return a.value.isBlocked}function j(a){return a.value.profilePictureUrlFallback}function k(a){return a.value.profilePictureUrlExpirationTimestampMs}function l(a){return a.value.firstName}function m(a){return a.value.isBlockedFromCommunity}function n(a){return a.value.isMuted}function o(a){return a.value.isCommunityMember}function p(a){return a.value.fetchingInfoTaskId}function q(a){return a.value.isModerator}function r(a){return a.value.adminActions}function s(a){return a.value.hasPendingModeratorInvite}function t(a){return a.value.subtitle}function u(a){return a.value.isEligibleForCmInvite}function v(a){return a.value.nickname}function w(a){return a.value.threadRole}function x(a){return a.value.channelBadges}function y(a){return a.value.contactCapabilities}function z(a){return a.value.threadRoles}function A(a){return a.value.groupThreadId}function B(a){return a.value.requestId}function C(a){return a.value}f.__context=a;f.community_id=b;f.contact_id=c;f.source=d;f.name=e;f.profile_picture_url=g;f.is_admin=h;f.is_blocked=i;f.profile_picture_url_fallback=j;f.profile_picture_url_expiration_timestamp_ms=k;f.first_name=l;f.is_blocked_from_community=m;f.is_muted=n;f.is_community_member=o;f.fetching_info_task_id=p;f.is_moderator=q;f.admin_actions=r;f.has_pending_moderator_invite=s;f.subtitle=t;f.is_eligible_for_cm_invite=u;f.nickname=v;f.thread_role=w;f.channel_badges=x;f.contact_capabilities=y;f.thread_roles=z;f.group_thread_id=A;f.request_id=B;f.__lightspeed_table_row=C}),66);
__d("LS_CommunityMember__Connection",["LSRelayConnections"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.value.edges}function b(a){return a.value.page_info}function c(a){return d("LSRelayConnections").keyToCursor(a.value[0])}function e(a){return{context:a.context,value:a.value[1]}}g.edges=a;g.page_info=b;g.cursor=c;g.node=e}),98);
__d("LS_Contact__has_capability",["LSContactBitOffset","LSContactCapabilityBitOffset","LSContactHasCapability__has_capability.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){e=e.capability;a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSContactHasCapability__has_capability.graphql"),a);var f=a.capabilities;a=a.capabilities_2;return e!=="%future added value"&&d("LSContactBitOffset").has(c("LSContactCapabilityBitOffset")[e],{capabilities:(e=f)!=null?e:void 0,capabilities2:(f=a)!=null?f:void 0})}g.has_capability=a}),98);
__d("LS_ContextualProfileV1",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value.ownerId}function c(a){return a.value.associatedEntityId}function d(a){return a.value.profilePictureUrl}function e(a){return a.value.profilePictureFallbackUrl}function g(a){return a.value.profilePictureUrlExpirationTimestampMs}function h(a){return a.value.profileName}function i(a){return a.value}f.__context=a;f.owner_id=b;f.associated_entity_id=c;f.profile_picture_url=d;f.profile_picture_fallback_url=e;f.profile_picture_url_expiration_timestamp_ms=g;f.profile_name=h;f.__lightspeed_table_row=i}),66);
__d("LS_CutoverThread",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value.openThreadId}function c(a){return a.value.armadilloThreadId}function d(a){return a.value.showOpenMessageHistory}function e(a){return a.value.timestampMs}function g(a){return a.value.isMigrated}function h(a){return a.value}f.__context=a;f.open_thread_id=b;f.armadillo_thread_id=c;f.show_open_message_history=d;f.timestamp_ms=e;f.is_migrated=g;f.__lightspeed_table_row=h}),66);
__d("LS_InThreadBanner",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value.threadKey}function c(a){return a.value.bannerId}function d(a){return a.value.timestampMs}function e(a){return a.value.iconUrl}function g(a){return a.value.iconUrlFallback}function h(a){return a.value.iconUrlExpirationTimestampMs}function i(a){return a.value.heading}function j(a){return a.value.titleSectionOne}function k(a){return a.value.titleSectionTwo}function l(a){return a.value.cta1Id}function m(a){return a.value.cta1Title}function n(a){return a.value.cta1Type}function o(a){return a.value.cta2Id}function p(a){return a.value.cta2Title}function q(a){return a.value.cta2Type}function r(a){return a.value.chevronCtaId}function s(a){return a.value.chevronCtaType}function t(a){return a.value.bannerCtaId}function u(a){return a.value.bannerCtaType}function v(a){return a.value.infoLabel}function w(a){return a.value}f.__context=a;f.thread_key=b;f.banner_id=c;f.timestamp_ms=d;f.icon_url=e;f.icon_url_fallback=g;f.icon_url_expiration_timestamp_ms=h;f.heading=i;f.title_section_one=j;f.title_section_two=k;f.cta1_id=l;f.cta1_title=m;f.cta1_type=n;f.cta2_id=o;f.cta2_title=p;f.cta2_type=q;f.chevron_cta_id=r;f.chevron_cta_type=s;f.banner_cta_id=t;f.banner_cta_type=u;f.info_label=v;f.__lightspeed_table_row=w}),66);
__d("LS_InThreadBanner_Connection",["LSRelayConnections"],(function(a,b,c,d,e,f,g){function a(a){return a.value.edges}function b(a){return a.value.page_info}function c(a){return d("LSRelayConnections").keyToCursor(a.value[0])}function e(a){return{context:a.context,value:a.value[1]}}g.edges=a;g.page_info=b;g.cursor=c;g.node=e}),98);
__d("LS_Message__sender_contextual_profile",["I64","LSMessageSenderContextualProfile__sender_contextual_profile.graphql","LSRelayLiveResolvers","MWCMIsAnyCMThread","ReQL","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSMessageSenderContextualProfile__sender_contextual_profile.graphql"),a);var e=a.__context,f=a.sender_id;a=a.thread;var g=a.parent_thread_key;a=a.thread_type;if((i||(i=d("I64"))).to_string(f)===e.actorID)return d("LSRelayLiveResolvers").nullValueLiveState;return!c("MWCMIsAnyCMThread")(a)?d("LSRelayLiveResolvers").nullValueLiveState:d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(e,function(a){return d("ReQL").fromTableAscending(a.table("contextual_profile_v1").index("associatedEntityIdAndOwner")).getKeyRange(g,f)})}g.sender_contextual_profile=a}),98);
__d("LS_MiActMappingTable",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value.serverThreadKey}function c(a){return a.value.clientThreadPk}function d(a){return a.value.jid}function e(a){return a.value}f.__context=a;f.server_thread_key=b;f.client_thread_pk=c;f.jid=d;f.__lightspeed_table_row=e}),66);
__d("LS_MiActMappingTable_Connection",["LSRelayConnections"],(function(a,b,c,d,e,f,g){function a(a){return a.value.edges}function b(a){return a.value.page_info}function c(a){return d("LSRelayConnections").keyToCursor(a.value[0])}function e(a){return{context:a.context,value:a.value[1]}}g.edges=a;g.page_info=b;g.cursor=c;g.node=e}),98);
__d("LS_ThreadNullstate",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){function a(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.table("thread_nullstate_ctas").index("threadKeyCtaId")).getKeyRange(a.value.threadKey)},b)}function b(a){return d("LSRelayLiveResolvers").iterableToPluralFieldLiveResolver_MAY_CAUSE_OVERFETCHING(a.context,function(b){return d("ReQL").fromTableAscending(b.table("thread_nullstate_ctas").index("threadKeyCtaId")).getKeyRange(a.value.threadKey)})}function c(a){return a.context}function e(a){return a.value.threadKey}function f(a){return a.value.welcomeText}function h(a){return a.value.privacyText}function i(a){return a.value.privacyTextNonWelcomeScreen}function j(a){return a.value.privacyTextWithRef}function k(a){return a.value.privacyTextCtaTitle}function l(a){return a.value.privacyTextCtaType}function m(a){return a.value.nullstateCtaType}function n(a){return a.value.ctaType}function o(a){return a.value.ctaId}function p(a){return a.value.ctaTitle}function q(a){return a.value}g.ctas=a;g.ctas_MAY_CAUSE_OVERFETCHING=b;g.__context=c;g.thread_key=e;g.welcome_text=f;g.privacy_text=h;g.privacy_text_non_welcome_screen=i;g.privacy_text_with_ref=j;g.privacy_text_cta_title=k;g.privacy_text_cta_type=l;g.nullstate_cta_type=m;g.cta_type=n;g.cta_id=o;g.cta_title=p;g.__lightspeed_table_row=q}),98);
__d("LS_ThreadProactiveWarningSetting",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value.threadKey}function c(a){return a.value.suspectId}function d(a){return a.value.nextCheckTimestampMs}function e(a){return a.value.token}function g(a){return a.value.tag}function h(a){return a.value.storyLocation}function i(a){return a.value.entryPoint}function j(a){return a.value.context}function k(a){return a.value}f.__context=a;f.thread_key=b;f.suspect_id=c;f.next_check_timestamp_ms=d;f.token=e;f.tag=g;f.story_location=h;f.entry_point=i;f.context=j;f.__lightspeed_table_row=k}),66);
__d("LS_Thread__composer_aria_description",["fbt","LSThreadComposerAriaDescription_thread.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(i!==void 0?i:i=b("LSThreadComposerAriaDescription_thread.graphql"),a);a.__context;var c=a.threadName;a=a.title;return c!=null?h._("__JHASH__AZYBx6Ry0lI__JHASH__",[h._param("name of conversation",c)]).toString():h._("__JHASH__a-kg7czmDb1__JHASH__",[h._param("participant list",a)]).toString()}g.composer_aria_description=a}),98);
__d("LS_Thread__has_capability",["LSThreadBitOffset","LSThreadCapabilityBitOffset","LSThreadHasCapability__has_capability.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){e=e.capability;a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadHasCapability__has_capability.graphql"),a);var f=a.capabilities,g=a.capabilities2,i=a.capabilities3,j=a.capabilities4;a=a.threadType;return e!=="%future added value"&&d("LSThreadBitOffset").has(c("LSThreadCapabilityBitOffset")[e],{capabilities:f,capabilities2:g,capabilities3:i,capabilities4:j,threadType:a})}g.has_capability=a}),98);
__d("LS_Thread__is_cutover_thread",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.context;a=a.value;var c=a.threadKey;return d("LSRelayLiveResolvers").mapLiveState(d("LSRelayLiveResolvers").iterableToMappedValueLiveResolver(b,function(a){return d("ReQL").fromTableAscending(a.table("cutover_threads")).getKeyRange(c).take(1)},function(a){return a!=null}),function(a){return a==null?void 0:a.value})}g.is_cutover_thread=a}),98);
__d("LS_Thread__is_page",["I64","LSContactType","LSIntEnum","LSThreadIsPage__is_page.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadIsPage__is_page.graphql"),a);a=a.otherParticipant;a=a==null?void 0:(a=a.contact)==null?void 0:a.contactType;return a!=null&&(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE))}g.computed_is_page=a}),98);
__d("LS_Thread__is_secure_thread",["LSMessagingThreadTypeUtil","LSThreadIsSecureThread__is_secure_thread.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadIsSecureThread__is_secure_thread.graphql"),a);a=a.thread_type;return d("LSMessagingThreadTypeUtil").isSecure(a)}g.is_secure_thread=a}),98);
__d("LS_Thread__non_addressable_participant_banner",["fbt","IntlVariations","LSMessagingThreadTypeUtil","LSThreadNonAddressableParticipantBanner__non_addressable_participant_banner.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(i!==void 0?i:i=b("LSThreadNonAddressableParticipantBanner__non_addressable_participant_banner.graphql"),a);var e=a.non_addressable_participants;a=a.thread_type;e=e==null?void 0:e.edges;if(e!=null&&e.length>0){if(d("LSMessagingThreadTypeUtil").isGroup(a))return{details:h._("__JHASH__ixaC9ybh3Q8__JHASH__"),headline:h._("__JHASH___yUMmqEez-U__JHASH__")};a=(a=(a=e[0].node)==null?void 0:(a=a.contact)==null?void 0:a.first_name)!=null?a:(a=e[0].node)==null?void 0:(e=a.contact)==null?void 0:e.name;a=(e=a)!=null?e:"recipient";e=c("IntlVariations").GENDER_UNKNOWN;return{details:h._("__JHASH__J_HXGmiXLis__JHASH__",[h._name("message recipient name",a,e)]),headline:h._("__JHASH__9vfr7-Uns9r__JHASH__",[h._name("message recipient name",a,e)])}}else return null}function e(a){return a.headline}function f(a){return a.details}g.non_addressable_participant_banner=a;g.headline=e;g.details=f}),98);
__d("LS_Thread__other_participant_or_self",["I64","LSMessagingThreadTypeUtil","LSRelayLiveResolvers","LSThreadOtherParticipantOrSelf__other_participant_or_self.graphql","ReQL","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadOtherParticipantOrSelf__other_participant_or_self.graphql"),a);var c=a.__context,e=a.participants.edges,f=a.threadKey;a=a.threadType;if(!d("LSMessagingThreadTypeUtil").isOneToOne(a))return d("LSRelayLiveResolvers").nullValueLiveState;var g=c.actorID;return e.length===1?d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(c,function(a){return d("ReQL").fromTableAscending(a.table("participants")).getKeyRange(f)}):d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(c,function(a){return d("ReQL").fromTableAscending(a.table("participants")).getKeyRange(f).filter(function(a){a=a.contactId;return(i||(i=d("I64"))).to_string(a)!==g})})}g.other_participant_or_self=a}),98);
__d("LS_Thread__other_participants_MAY_CAUSE_OVERFETCHING",["I64","LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.context,c=a.value.threadKey;return d("LSRelayLiveResolvers").iterableToPluralFieldLiveResolver_MAY_CAUSE_OVERFETCHING(b,function(a){return d("ReQL").fromTableAscending(a.table("participants")).getKeyRange(c).filter(function(a){a=a.contactId;return(h||(h=d("I64"))).to_string(a)!==b.actorID})})}g.other_participants_MAY_CAUSE_OVERFETCHING=a}),98);
__d("LS_Viewer",["I64","LSFeatureLimitsType","LSIntEnum","LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return a.context.actorID}function b(a){a=a.context;var b=(h||(h=d("I64"))).of_float(Date.now()/1e3);return d("LSRelayLiveResolvers").mapLiveState(d("LSRelayLiveResolvers").iterableToMappedValueLiveResolver(a,function(a){return d("ReQL").fromTableAscending(a.table("feature_limits")).filter(function(a){return k(a)&&(h||(h=d("I64"))).gt(a.expirationTimestampSeconds,b)}).take(1)},function(a){return a!=null}),function(a){return a==null?void 0:a.value})}var j=[(i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").READ_ONLY),i.ofNumber(c("LSFeatureLimitsType").GENERIC_READ_ONLY_BLOCK),i.ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND)],k=function(a){return j.some(function(b){return(h||(h=d("I64"))).equal(b,a.type_)})};function e(a){a=a.context;return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a,function(a){return d("ReQL").fromTableAscending(a.table("user_visible_errors")).filter(function(a){return a.presentationStyle==="banner"})})}g.actor_id=a;g.is_read_only_feature_limited=b;g.user_visible_error_banner=e}),98);
__d("MWRelayNonAddressableSecureContact_thread.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"MWRelayNonAddressableSecureContact_thread",selections:[{kind:"RequiredField",field:{alias:"threadType",args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"threadType"},{kind:"RequiredField",field:{alias:"isSecure",args:null,kind:"ScalarField",name:"is_secure_thread",storageKey:null},action:"THROW",path:"isSecure"},{alias:"banner",args:null,concreteType:"LSThreadNonAddressableParticipantBanner",kind:"LinkedField",name:"non_addressable_participant_banner",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"headline",storageKey:null},action:"THROW",path:"banner.headline"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"details",storageKey:null},action:"THROW",path:"banner.details"}],storageKey:null},{kind:"RequiredField",field:{alias:"threadKey",args:null,kind:"ScalarField",name:"thread_key",storageKey:null},action:"THROW",path:"threadKey"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("MWRelayNonAddressableSecureContact",["fbt","LSMessagingThreadTypeUtil","LSRelayHooks","MWBlockedComposerLogging","MWRelayNonAddressableSecureContact_thread.graphql","MWXComposerBanner.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useState;function m(a,e){e===void 0&&(e="block");var f=l(!1),g=f[0],j=f[1];f=d("LSRelayHooks").useFragment(i!==void 0?i:i=b("MWRelayNonAddressableSecureContact_thread.graphql"),a);f=(a=f)!=null?a:{};a=f.banner;var m=f.isSecure,n=f.threadKey;f=f.threadType;f=d("LSMessagingThreadTypeUtil").isGroup(f);m=a!=null&&m&&!g&&!(e==="block"&&f);d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(e==="block"?n:void 0,e==="block"&&m?d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_RECEIVER_NON_ADDRESSABLE_ON_WA:d("MWBlockedComposerLogging").ComposerBlockingReason.NOT_BLOCKED);if(!m)return;g=f?[{label:h._("__JHASH__VEA9nvLBK5B__JHASH__"),onPress:function(){return j(!0)}}]:void 0;return k.jsx(c("MWXComposerBanner.react"),{bodyText:a==null?void 0:a.details,buttons:g,headerText:a==null?void 0:a.headline,variant:e})}m.displayName=m.name+" [from "+f.id+"]";function a(a){a=a.thread$key;return m(a,"banner")}a.displayName=a.name+" [from "+f.id+"]";g.useMWRelayNonAddressableSecureContactConfiguration=m;g.MWRelayNonAddressableSecureContactBanner=a}),98);
__d("Query__lightspeed_data",["LSRelayContext","Promise","emptyFunction","promiseDone","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e=new Map(),f=d("LSRelayContext").getContext(a);f instanceof(h||(h=b("Promise")))&&c("promiseDone")(f,function(a){f=a,e.forEach(function(a){return a()}),e.clear()});return{read:function(){return f instanceof(h||(h=b("Promise")))?d("relay-runtime").suspenseSentinel():{context:f,value:void 0}},subscribe:function(a){if(!(f instanceof(h||(h=b("Promise")))))return c("emptyFunction");var d={};e.set(d,a);return function(){e["delete"](d)}}}}g.lightspeed_data=a}),98);
__d("isMAWDualThreadCutover.relayprovider",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a={get:function(){return c("gkx")("26365")}};g["default"]=a}),98);
__d("useComposerReplyHeaderBody.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"useComposerReplyHeaderBody",selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"is_unsent",storageKey:null},action:"THROW",path:"is_unsent"},{alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"LS_Attachment_Connection",kind:"LinkedField",name:"attachments",plural:!1,selections:[{alias:null,args:null,concreteType:"LS_Attachment_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"LS_Attachment",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"RequiredField",field:{alias:"attachmentType",args:null,kind:"ScalarField",name:"attachment_type",storageKey:null},action:"THROW",path:"attachments.edges.node.attachmentType"}],storageKey:null}],storageKey:null}],storageKey:"attachments(first:1)"}],type:"LS_Message",abstractKey:null};e.exports=a}),null);
__d("useComposerReplyHeaderBody",["fbt","I64","LSIntEnum","LSRelayHooks","MessagingAttachmentType","cr:2472","useComposerReplyHeaderBody.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k;function a(a){a=d("LSRelayHooks").useFragment(i!==void 0?i:i=b("useComposerReplyHeaderBody.graphql"),a);if(a.is_unsent)return h._("__JHASH__OtyP2J0Nwkd__JHASH__");var e=a.text;e=e!=null?b("cr:2472")==null?e:b("cr:2472").unvault(e):"";if(e!=null&&e!=="")return e;a=(e=((a=(e=a.attachments)==null?void 0:e.edges)!=null?a:[])[0])==null?void 0:e.node;if(a!=null){if((j||(j=d("I64"))).equal(a.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return h._("__JHASH__vuq_ksOZBHO__JHASH__");if((j||(j=d("I64"))).equal(a.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return h._("__JHASH__7zoxdliwH6N__JHASH__");if((j||(j=d("I64"))).equal(a.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__d9ky9I-E6BP__JHASH__");return(j||(j=d("I64"))).equal(a.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))?h._("__JHASH__i96Qg8bFARm__JHASH__"):h._("__JHASH__L554Fq7JwGo__JHASH__")}return h._("__JHASH__C1Hm6KH3mNE__JHASH__")}g["default"]=a}),98);
__d("useComposerReplyHeaderText.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"useComposerReplyHeaderText",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"__context",storageKey:null},action:"THROW",path:"__context"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"sender_id",storageKey:null},action:"THROW",path:"sender_id"},{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"first_name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"THROW",path:"contact.name"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},action:"THROW",path:"contact.gender"}],storageKey:null},{alias:null,args:null,concreteType:"LS_ContextualProfileV1",kind:"LinkedField",name:"sender_contextual_profile",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"profile_name",storageKey:null}],storageKey:null}],type:"LS_Message",abstractKey:null};e.exports=a}),null);
__d("useComposerReplyHeaderText",["fbt","I64","LSContactGenderToGenderConst","LSRelayHooks","MWXText.react","getFBTSafeGenderFromGenderConst","react","useComposerReplyHeaderText.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||c("react");function a(a){a=d("LSRelayHooks").useFragment(i!==void 0?i:i=b("useComposerReplyHeaderText.graphql"),a);var e=a.__context,f=a.contact,g=a.sender_contextual_profile;a=a.sender_id;if((j||(j=d("I64"))).equal((j||(j=d("I64"))).of_string(e.actorID),a))return h._("__JHASH__iW_IRrZDexS__JHASH__");if(f!=null){e=g==null?void 0:g.profile_name;return h._("__JHASH__O5URXTVzEEM__JHASH__",[h._param("name",l.jsx(c("MWXText.react"),{type:"bodyLink4",children:(g=(a=e)!=null?a:f.first_name)!=null?g:f.name}),[1,c("getFBTSafeGenderFromGenderConst")(c("LSContactGenderToGenderConst")(f.gender))])])}return h._("__JHASH__Y3usjYXlLYK__JHASH__",[h._param("Placeholder for an unknown user","Facebook User")])}g["default"]=a}),98);
__d("useMWRelayProactiveWarningPayload_thread.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"useMWRelayProactiveWarningPayload_thread",selections:[{alias:"proactiveWarningDismissTime",args:null,kind:"ScalarField",name:"proactive_warning_dismiss_time",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"LS_InThreadBanner_Connection",kind:"LinkedField",name:"in_thread_banner",plural:!1,selections:[{alias:null,args:null,concreteType:"LS_InThreadBanner_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"LS_InThreadBanner",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"RequiredField",field:{alias:"bannerId",args:null,kind:"ScalarField",name:"banner_id",storageKey:null},action:"THROW",path:"in_thread_banner.edges.node.bannerId"},{alias:"cta1Title",args:null,kind:"ScalarField",name:"cta1_title",storageKey:null},{alias:"cta2Title",args:null,kind:"ScalarField",name:"cta2_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"heading",storageKey:null},{alias:"titleSectionOne",args:null,kind:"ScalarField",name:"title_section_one",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"in_thread_banner(first:1)"},{alias:null,args:null,concreteType:"LS_ThreadProactiveWarningSetting",kind:"LinkedField",name:"thread_proactive_warning_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"context",storageKey:null},{alias:"entryPoint",args:null,kind:"ScalarField",name:"entry_point",storageKey:null},{alias:"storyLocation",args:null,kind:"ScalarField",name:"story_location",storageKey:null},{alias:"suspectId",args:null,kind:"ScalarField",name:"suspect_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null}],storageKey:null}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("useMWRelayProactiveWarningPayload",["I64","LSRelayHooks","MWThreadKey.react","useMWProactiveWarningPayloadMemo","useMWRelayProactiveWarningPayload_thread.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){var f;e=d("LSRelayHooks").useFragment(h!==void 0?h:h=b("useMWRelayProactiveWarningPayload_thread.graphql"),e);var g=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),j=e.in_thread_banner,k=e.thread_proactive_warning_settings;j=(j=j==null?void 0:(j=j.edges)==null?void 0:(j=j[0])==null?void 0:j.node)!=null?j:{};var l=j.bannerId,m=j.cta1Title,n=j.cta2Title,o=j.heading;j=j.titleSectionOne;f=(f=k)!=null?f:{};var p=f.context,q=f.entryPoint,r=f.storyLocation,s=f.suspectId;f=f.tag;e=(i||(i=d("I64"))).equal((e=e.proactiveWarningDismissTime)!=null?e:(i||(i=d("I64"))).zero,i.zero);m=l!=null?{bannerId:l,cta1Title:(l=m)!=null?l:void 0,cta2Title:(m=n)!=null?m:void 0,heading:(l=o)!=null?l:void 0,titleSectionOne:(n=j)!=null?n:void 0}:void 0;p=k!=null?{context:(o=p)!=null?o:void 0,entryPoint:(l=q)!=null?l:void 0,storyLocation:(j=r)!=null?j:void 0,suspectId:(n=s)!=null?n:void 0,tag:(k=f)!=null?k:void 0}:void 0;return c("useMWProactiveWarningPayloadMemo")({banner:m,ignoreDismissTime:a,isPWDismissTimeSet:e,pwSettings:p!=null?{context:(o=p.context)!=null?o:void 0,entryPoint:(q=p.entryPoint)!=null?q:void 0,storyLocation:(l=p.storyLocation)!=null?l:void 0,suspectId:(r=p.suspectId)!=null?r:void 0,tag:(j=p.tag)!=null?j:void 0}:void 0,threadKey:g})}g["default"]=a}),98);
__d("useMWRelaySendSecureMessageV2_thread.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWRelaySendSecureMessageV2_thread",selections:[{kind:"RequiredField",field:{alias:"threadKey",args:null,kind:"ScalarField",name:"thread_key",storageKey:null},action:"THROW",path:"threadKey"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},action:"THROW",path:"capabilities"},{kind:"RequiredField",field:{alias:"capabilities2",args:null,kind:"ScalarField",name:"capabilities_2",storageKey:null},action:"THROW",path:"capabilities2"},{kind:"RequiredField",field:{alias:"capabilities3",args:null,kind:"ScalarField",name:"capabilities_3",storageKey:null},action:"THROW",path:"capabilities3"},{kind:"RequiredField",field:{alias:"capabilities4",args:null,kind:"ScalarField",name:"capabilities_4",storageKey:null},action:"THROW",path:"capabilities4"},{alias:"eventStartTimestampMs",args:null,kind:"ScalarField",name:"event_start_timestamp_ms",storageKey:null},{kind:"RequiredField",field:{alias:"folderName",args:null,kind:"ScalarField",name:"folder_name",storageKey:null},action:"THROW",path:"folderName"},{kind:"RequiredField",field:{alias:"parentThreadKey",args:null,kind:"ScalarField",name:"parent_thread_key",storageKey:null},action:"THROW",path:"parentThreadKey"},{alias:"threadSubtype",args:null,kind:"ScalarField",name:"thread_subtype",storageKey:null},{kind:"RequiredField",field:{alias:"threadType",args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"threadType"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("useMWRelaySendSecureMessageV2",["I64","Int64Hooks","LSRelayHooks","MAWJids","MAWSendSecureMessageV2Utils","MWPReplyContext.react","promiseDone","qpl","react","sendToSentQPLLogger","unrecoverableViolation","useCometInteractionTracing","useMAWFetchAndDispatchEphemeralSettings","useMAWSendSecureMessageV2Impl","useMWRelaySendSecureMessageV2_thread.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||d("react")).useContext;function a(a,e,f){a=d("LSRelayHooks").useFragment(h!==void 0?h:h=b("useMWRelaySendSecureMessageV2_thread.graphql"),a);var g=a.capabilities,i=a.capabilities2,l=a.capabilities3,m=a.capabilities4,n=a.eventStartTimestampMs,o=a.folderName,p=a.parentThreadKey,q=a.threadKey,r=a.threadSubtype,s=a.threadType;a=k(d("MWPReplyContext.react").MWPReplyContext);var t=a.reply,u=c("useMAWSendSecureMessageV2Impl")(f),v=c("useCometInteractionTracing")(c("qpl")._(30605384,"573"),"fast","INTERACTION",void 0),w=c("useMAWFetchAndDispatchEphemeralSettings")();d("Int64Hooks").useEffectInt64(function(){w(q)},[w,q]);return function(a,b,f,h,k,w,x,y,z,A){var B=b==null?void 0:b.map(function(a){return d("MAWJids").toUserJid(a.id)}),C=a;f!=null&&d("MAWSendSecureMessageV2Utils").isLikeStickerId((j||(j=d("I64"))).to_string(f))&&(C="\ud83d\udc4d");var D=d("sendToSentQPLLogger").markSendToSentStart();v(function(a){var b;c("promiseDone")(u({externalAttachmentUrl:w,hotEmojiSize:h,lssTraceApi:a,mentionedJids:B,messageText:C,reply:t,s2sInstanceKey:D,stickerId:f,thread:{capabilities:g,capabilities2:i,capabilities3:l,capabilities4:m,eventStartTimestampMs:(b=n)!=null?b:void 0,folderName:o,parentThreadKey:p,threadKey:q,threadSubtype:(b=r)!=null?b:void 0,threadType:s},voiceClip:y}),e,function(b){d("sendToSentQPLLogger").markSendToSentFail(D,b);a.failTrace(b,!0);throw c("unrecoverableViolation")("Encountered failure during Armadillo Message Send (UI)","messenger_e2ee_web",{error:b})})})}}g["default"]=a}),98);